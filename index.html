<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
    * {
      user-select: none;
      -webkit-user-select: none;
      outline: none;
      -webkit-tap-highlight-color: transparent;
    }
    </style>
    <title>Earth-Explore</title>
    <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Py(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Ek(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var W7={exports:{}},M2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT;function Mk(){if(WT)return M2;WT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var o in r)o!=="key"&&(s[o]=r[o])}else s=r;return r=s.ref,{$$typeof:i,type:n,key:a,ref:r!==void 0?r:null,props:s}}return M2.Fragment=e,M2.jsx=t,M2.jsxs=t,M2}var $T;function Rk(){return $T||($T=1,W7.exports=Mk()),W7.exports}var I1=Rk(),$7={exports:{}},Wn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function Ck(){if(XT)return Wn;XT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(Y){return Y===null||typeof Y!="object"?null:(Y=g&&Y[g]||Y["@@iterator"],typeof Y=="function"?Y:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,R={};function M(Y,me,Me){this.props=Y,this.context=me,this.refs=R,this.updater=Me||q}M.prototype.isReactComponent={},M.prototype.setState=function(Y,me){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,me,"setState")},M.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function E(){}E.prototype=M.prototype;function U(Y,me,Me){this.props=Y,this.context=me,this.refs=R,this.updater=Me||q}var P=U.prototype=new E;P.constructor=U,S(P,M.prototype),P.isPureReactComponent=!0;var O=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function z(Y,me,Me,Be,be,Fe){return Me=Fe.ref,{$$typeof:i,type:Y,key:me,ref:Me!==void 0?Me:null,props:Fe}}function j(Y,me){return z(Y.type,me,void 0,void 0,void 0,Y.props)}function k(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===i}function G(Y){var me={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(Me){return me[Me]})}var $=/\/+/g;function te(Y,me){return typeof Y=="object"&&Y!==null&&Y.key!=null?G(""+Y.key):me.toString(36)}function ne(){}function ue(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(ne,ne):(Y.status="pending",Y.then(function(me){Y.status==="pending"&&(Y.status="fulfilled",Y.value=me)},function(me){Y.status==="pending"&&(Y.status="rejected",Y.reason=me)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function ae(Y,me,Me,Be,be){var Fe=typeof Y;(Fe==="undefined"||Fe==="boolean")&&(Y=null);var $e=!1;if(Y===null)$e=!0;else switch(Fe){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(Y.$$typeof){case i:case e:$e=!0;break;case p:return $e=Y._init,ae($e(Y._payload),me,Me,Be,be)}}if($e)return be=be(Y),$e=Be===""?"."+te(Y,0):Be,O(be)?(Me="",$e!=null&&(Me=$e.replace($,"$&/")+"/"),ae(be,me,Me,"",function(kt){return kt})):be!=null&&(k(be)&&(be=j(be,Me+(be.key==null||Y&&Y.key===be.key?"":(""+be.key).replace($,"$&/")+"/")+$e)),me.push(be)),1;$e=0;var ht=Be===""?".":Be+":";if(O(Y))for(var wt=0;wt<Y.length;wt++)Be=Y[wt],Fe=ht+te(Be,wt),$e+=ae(Be,me,Me,Fe,be);else if(wt=y(Y),typeof wt=="function")for(Y=wt.call(Y),wt=0;!(Be=Y.next()).done;)Be=Be.value,Fe=ht+te(Be,wt++),$e+=ae(Be,me,Me,Fe,be);else if(Fe==="object"){if(typeof Y.then=="function")return ae(ue(Y),me,Me,Be,be);throw me=String(Y),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.")}return $e}function W(Y,me,Me){if(Y==null)return Y;var Be=[],be=0;return ae(Y,Be,"","",function(Fe){return me.call(Me,Fe,be++)}),Be}function J(Y){if(Y._status===-1){var me=Y._result;me=me(),me.then(function(Me){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=Me)},function(Me){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=Me)}),Y._status===-1&&(Y._status=0,Y._result=me)}if(Y._status===1)return Y._result.default;throw Y._result}var re=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var me=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(me))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function ge(){}return Wn.Children={map:W,forEach:function(Y,me,Me){W(Y,function(){me.apply(this,arguments)},Me)},count:function(Y){var me=0;return W(Y,function(){me++}),me},toArray:function(Y){return W(Y,function(me){return me})||[]},only:function(Y){if(!k(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Wn.Component=M,Wn.Fragment=t,Wn.Profiler=r,Wn.PureComponent=U,Wn.StrictMode=n,Wn.Suspense=u,Wn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Wn.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return F.H.useMemoCache(Y)}},Wn.cache=function(Y){return function(){return Y.apply(null,arguments)}},Wn.cloneElement=function(Y,me,Me){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var Be=S({},Y.props),be=Y.key,Fe=void 0;if(me!=null)for($e in me.ref!==void 0&&(Fe=void 0),me.key!==void 0&&(be=""+me.key),me)!I.call(me,$e)||$e==="key"||$e==="__self"||$e==="__source"||$e==="ref"&&me.ref===void 0||(Be[$e]=me[$e]);var $e=arguments.length-2;if($e===1)Be.children=Me;else if(1<$e){for(var ht=Array($e),wt=0;wt<$e;wt++)ht[wt]=arguments[wt+2];Be.children=ht}return z(Y.type,be,void 0,void 0,Fe,Be)},Wn.createContext=function(Y){return Y={$$typeof:a,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:s,_context:Y},Y},Wn.createElement=function(Y,me,Me){var Be,be={},Fe=null;if(me!=null)for(Be in me.key!==void 0&&(Fe=""+me.key),me)I.call(me,Be)&&Be!=="key"&&Be!=="__self"&&Be!=="__source"&&(be[Be]=me[Be]);var $e=arguments.length-2;if($e===1)be.children=Me;else if(1<$e){for(var ht=Array($e),wt=0;wt<$e;wt++)ht[wt]=arguments[wt+2];be.children=ht}if(Y&&Y.defaultProps)for(Be in $e=Y.defaultProps,$e)be[Be]===void 0&&(be[Be]=$e[Be]);return z(Y,Fe,void 0,void 0,null,be)},Wn.createRef=function(){return{current:null}},Wn.forwardRef=function(Y){return{$$typeof:o,render:Y}},Wn.isValidElement=k,Wn.lazy=function(Y){return{$$typeof:p,_payload:{_status:-1,_result:Y},_init:J}},Wn.memo=function(Y,me){return{$$typeof:c,type:Y,compare:me===void 0?null:me}},Wn.startTransition=function(Y){var me=F.T,Me={};F.T=Me;try{var Be=Y(),be=F.S;be!==null&&be(Me,Be),typeof Be=="object"&&Be!==null&&typeof Be.then=="function"&&Be.then(ge,re)}catch(Fe){re(Fe)}finally{F.T=me}},Wn.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Wn.use=function(Y){return F.H.use(Y)},Wn.useActionState=function(Y,me,Me){return F.H.useActionState(Y,me,Me)},Wn.useCallback=function(Y,me){return F.H.useCallback(Y,me)},Wn.useContext=function(Y){return F.H.useContext(Y)},Wn.useDebugValue=function(){},Wn.useDeferredValue=function(Y,me){return F.H.useDeferredValue(Y,me)},Wn.useEffect=function(Y,me,Me){var Be=F.H;if(typeof Me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Be.useEffect(Y,me)},Wn.useId=function(){return F.H.useId()},Wn.useImperativeHandle=function(Y,me,Me){return F.H.useImperativeHandle(Y,me,Me)},Wn.useInsertionEffect=function(Y,me){return F.H.useInsertionEffect(Y,me)},Wn.useLayoutEffect=function(Y,me){return F.H.useLayoutEffect(Y,me)},Wn.useMemo=function(Y,me){return F.H.useMemo(Y,me)},Wn.useOptimistic=function(Y,me){return F.H.useOptimistic(Y,me)},Wn.useReducer=function(Y,me,Me){return F.H.useReducer(Y,me,Me)},Wn.useRef=function(Y){return F.H.useRef(Y)},Wn.useState=function(Y){return F.H.useState(Y)},Wn.useSyncExternalStore=function(Y,me,Me){return F.H.useSyncExternalStore(Y,me,Me)},Wn.useTransition=function(){return F.H.useTransition()},Wn.version="19.1.0",Wn}var QT;function Dy(){return QT||(QT=1,$7.exports=Ck()),$7.exports}var Rd=Dy(),X7={exports:{}},R2={},Q7={exports:{}},Y7={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function Nk(){return YT||(YT=1,function(i){function e(W,J){var re=W.length;W.push(J);e:for(;0<re;){var ge=re-1>>>1,Y=W[ge];if(0<r(Y,J))W[ge]=J,W[re]=Y,re=ge;else break e}}function t(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var J=W[0],re=W.pop();if(re!==J){W[0]=re;e:for(var ge=0,Y=W.length,me=Y>>>1;ge<me;){var Me=2*(ge+1)-1,Be=W[Me],be=Me+1,Fe=W[be];if(0>r(Be,re))be<Y&&0>r(Fe,Be)?(W[ge]=Fe,W[be]=re,ge=be):(W[ge]=Be,W[Me]=re,ge=Me);else if(be<Y&&0>r(Fe,re))W[ge]=Fe,W[be]=re,ge=be;else break e}}return J}function r(W,J){var re=W.sortIndex-J.sortIndex;return re!==0?re:W.id-J.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var u=[],c=[],p=1,g=null,y=3,q=!1,S=!1,R=!1,M=!1,E=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function O(W){for(var J=t(c);J!==null;){if(J.callback===null)n(c);else if(J.startTime<=W)n(c),J.sortIndex=J.expirationTime,e(u,J);else break;J=t(c)}}function F(W){if(R=!1,O(W),!S)if(t(u)!==null)S=!0,I||(I=!0,te());else{var J=t(c);J!==null&&ae(F,J.startTime-W)}}var I=!1,z=-1,j=5,k=-1;function G(){return M?!0:!(i.unstable_now()-k<j)}function $(){if(M=!1,I){var W=i.unstable_now();k=W;var J=!0;try{e:{S=!1,R&&(R=!1,U(z),z=-1),q=!0;var re=y;try{t:{for(O(W),g=t(u);g!==null&&!(g.expirationTime>W&&G());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,y=g.priorityLevel;var Y=ge(g.expirationTime<=W);if(W=i.unstable_now(),typeof Y=="function"){g.callback=Y,O(W),J=!0;break t}g===t(u)&&n(u),O(W)}else n(u);g=t(u)}if(g!==null)J=!0;else{var me=t(c);me!==null&&ae(F,me.startTime-W),J=!1}}break e}finally{g=null,y=re,q=!1}J=void 0}}finally{J?te():I=!1}}}var te;if(typeof P=="function")te=function(){P($)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ue=ne.port2;ne.port1.onmessage=$,te=function(){ue.postMessage(null)}}else te=function(){E($,0)};function ae(W,J){z=E(function(){W(i.unstable_now())},J)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(W){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var re=y;y=J;try{return W()}finally{y=re}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var re=y;y=W;try{return J()}finally{y=re}},i.unstable_scheduleCallback=function(W,J,re){var ge=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ge+re:ge):re=ge,W){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=re+Y,W={id:p++,callback:J,priorityLevel:W,startTime:re,expirationTime:Y,sortIndex:-1},re>ge?(W.sortIndex=re,e(c,W),t(u)===null&&W===t(c)&&(R?(U(z),z=-1):R=!0,ae(F,re-ge))):(W.sortIndex=Y,e(u,W),S||q||(S=!0,I||(I=!0,te()))),W},i.unstable_shouldYield=G,i.unstable_wrapCallback=function(W){var J=y;return function(){var re=y;y=J;try{return W.apply(this,arguments)}finally{y=re}}}}(Y7)),Y7}var KT;function Pk(){return KT||(KT=1,Q7.exports=Nk()),Q7.exports}var K7={exports:{}},$s={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function Dk(){if(ZT)return $s;ZT=1;var i=Dy();function e(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(u,c,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:u,containerInfo:c,implementation:p}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return $s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,$s.createPortal=function(u,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(u,c,null,p)},$s.flushSync=function(u){var c=a.T,p=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=c,n.p=p,n.d.f()}},$s.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(u,c))},$s.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},$s.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var p=c.as,g=o(p,c.crossOrigin),y=typeof c.integrity=="string"?c.integrity:void 0,q=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;p==="style"?n.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:q}):p==="script"&&n.d.X(u,{crossOrigin:g,integrity:y,fetchPriority:q,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},$s.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var p=o(c.as,c.crossOrigin);n.d.M(u,{crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(u)},$s.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var p=c.as,g=o(p,c.crossOrigin);n.d.L(u,p,{crossOrigin:g,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},$s.preloadModule=function(u,c){if(typeof u=="string")if(c){var p=o(c.as,c.crossOrigin);n.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(u)},$s.requestFormReset=function(u){n.d.r(u)},$s.unstable_batchedUpdates=function(u,c){return u(c)},$s.useFormState=function(u,c,p){return a.H.useFormState(u,c,p)},$s.useFormStatus=function(){return a.H.useHostTransitionStatus()},$s.version="19.1.0",$s}var JT;function Lk(){if(JT)return K7.exports;JT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),K7.exports=Dk(),K7.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function Uk(){if(ew)return R2;ew=1;var i=Pk(),e=Dy(),t=Lk();function n(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var h=l,_=l;if(l.alternate)for(;h.return;)h=h.return;else{l=h;do h=l,(h.flags&4098)!==0&&(_=h.return),l=h.return;while(l)}return h.tag===3?_:null}function a(l){if(l.tag===13){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function o(l){if(s(l)!==l)throw Error(n(188))}function u(l){var h=l.alternate;if(!h){if(h=s(l),h===null)throw Error(n(188));return h!==l?null:l}for(var _=l,b=h;;){var N=_.return;if(N===null)break;var L=N.alternate;if(L===null){if(b=N.return,b!==null){_=b;continue}break}if(N.child===L.child){for(L=N.child;L;){if(L===_)return o(N),l;if(L===b)return o(N),h;L=L.sibling}throw Error(n(188))}if(_.return!==b.return)_=N,b=L;else{for(var X=!1,se=N.child;se;){if(se===_){X=!0,_=N,b=L;break}if(se===b){X=!0,b=N,_=L;break}se=se.sibling}if(!X){for(se=L.child;se;){if(se===_){X=!0,_=L,b=N;break}if(se===b){X=!0,b=L,_=N;break}se=se.sibling}if(!X)throw Error(n(189))}}if(_.alternate!==b)throw Error(n(190))}if(_.tag!==3)throw Error(n(188));return _.stateNode.current===_?l:h}function c(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l;for(l=l.child;l!==null;){if(h=c(l),h!==null)return h;l=l.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),P=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function te(l){return l===null||typeof l!="object"?null:(l=$&&l[$]||l["@@iterator"],typeof l=="function"?l:null)}var ne=Symbol.for("react.client.reference");function ue(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===ne?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case M:return"Profiler";case R:return"StrictMode";case F:return"Suspense";case I:return"SuspenseList";case k:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case q:return"Portal";case P:return(l.displayName||"Context")+".Provider";case U:return(l._context.displayName||"Context")+".Consumer";case O:var h=l.render;return l=l.displayName,l||(l=h.displayName||h.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case z:return h=l.displayName||null,h!==null?h:ue(l.type)||"Memo";case j:h=l._payload,l=l._init;try{return ue(l(h))}catch{}}return null}var ae=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ge=[],Y=-1;function me(l){return{current:l}}function Me(l){0>Y||(l.current=ge[Y],ge[Y]=null,Y--)}function Be(l,h){Y++,ge[Y]=l.current,l.current=h}var be=me(null),Fe=me(null),$e=me(null),ht=me(null);function wt(l,h){switch(Be($e,h),Be(Fe,l),Be(be,null),h.nodeType){case 9:case 11:l=(l=h.documentElement)&&(l=l.namespaceURI)?yT(l):0;break;default:if(l=h.tagName,h=h.namespaceURI)h=yT(h),l=xT(h,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Me(be),Be(be,l)}function kt(){Me(be),Me(Fe),Me($e)}function Ct(l){l.memoizedState!==null&&Be(ht,l);var h=be.current,_=xT(h,l.type);h!==_&&(Be(Fe,l),Be(be,_))}function Kt(l){Fe.current===l&&(Me(be),Me(Fe)),ht.current===l&&(Me(ht),b2._currentValue=re)}var Bn=Object.prototype.hasOwnProperty,_n=i.unstable_scheduleCallback,ye=i.unstable_cancelCallback,gi=i.unstable_shouldYield,ut=i.unstable_requestPaint,st=i.unstable_now,nt=i.unstable_getCurrentPriorityLevel,Pt=i.unstable_ImmediatePriority,at=i.unstable_UserBlockingPriority,ce=i.unstable_NormalPriority,ee=i.unstable_LowPriority,Ne=i.unstable_IdlePriority,Xe=i.log,it=i.unstable_setDisableYieldValue,Qe=null,Ut=null;function St(l){if(typeof Xe=="function"&&it(l),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Qe,l)}catch{}}var Nt=Math.clz32?Math.clz32:jt,Xn=Math.log,Tt=Math.LN2;function jt(l){return l>>>=0,l===0?32:31-(Xn(l)/Tt|0)|0}var on=256,cn=4194304;function Bt(l){var h=l&42;if(h!==0)return h;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function kn(l,h,_){var b=l.pendingLanes;if(b===0)return 0;var N=0,L=l.suspendedLanes,X=l.pingedLanes;l=l.warmLanes;var se=b&134217727;return se!==0?(b=se&~L,b!==0?N=Bt(b):(X&=se,X!==0?N=Bt(X):_||(_=se&~l,_!==0&&(N=Bt(_))))):(se=b&~L,se!==0?N=Bt(se):X!==0?N=Bt(X):_||(_=b&~l,_!==0&&(N=Bt(_)))),N===0?0:h!==0&&h!==N&&(h&L)===0&&(L=N&-N,_=h&-h,L>=_||L===32&&(_&4194048)!==0)?h:N}function qn(l,h){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&h)===0}function Ei(l,h){switch(l){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pe(){var l=on;return on<<=1,(on&4194048)===0&&(on=256),l}function It(){var l=cn;return cn<<=1,(cn&62914560)===0&&(cn=4194304),l}function Ye(l){for(var h=[],_=0;31>_;_++)h.push(l);return h}function dt(l,h){l.pendingLanes|=h,h!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Gt(l,h,_,b,N,L){var X=l.pendingLanes;l.pendingLanes=_,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=_,l.entangledLanes&=_,l.errorRecoveryDisabledLanes&=_,l.shellSuspendCounter=0;var se=l.entanglements,_e=l.expirationTimes,Ge=l.hiddenUpdates;for(_=X&~_;0<_;){var lt=31-Nt(_),pt=1<<lt;se[lt]=0,_e[lt]=-1;var je=Ge[lt];if(je!==null)for(Ge[lt]=null,lt=0;lt<je.length;lt++){var We=je[lt];We!==null&&(We.lane&=-536870913)}_&=~pt}b!==0&&Ot(l,b,0),L!==0&&N===0&&l.tag!==0&&(l.suspendedLanes|=L&~(X&~h))}function Ot(l,h,_){l.pendingLanes|=h,l.suspendedLanes&=~h;var b=31-Nt(h);l.entangledLanes|=h,l.entanglements[b]=l.entanglements[b]|1073741824|_&4194090}function Tn(l,h){var _=l.entangledLanes|=h;for(l=l.entanglements;_;){var b=31-Nt(_),N=1<<b;N&h|l[b]&h&&(l[b]|=h),_&=~N}}function Pi(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function yr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function ii(){var l=J.p;return l!==0?l:(l=window.event,l===void 0?32:kT(l.type))}function ws(l,h){var _=J.p;try{return J.p=l,h()}finally{J.p=_}}var rr=Math.random().toString(36).slice(2),Ie="__reactFiber$"+rr,Je="__reactProps$"+rr,Et="__reactContainer$"+rr,ft="__reactEvents$"+rr,d="__reactListeners$"+rr,K="__reactHandles$"+rr,Gn="__reactResources$"+rr,Yn="__reactMarker$"+rr;function ji(l){delete l[Ie],delete l[Je],delete l[ft],delete l[d],delete l[K]}function An(l){var h=l[Ie];if(h)return h;for(var _=l.parentNode;_;){if(h=_[Et]||_[Ie]){if(_=h.alternate,h.child!==null||_!==null&&_.child!==null)for(l=TT(l);l!==null;){if(_=l[Ie])return _;l=TT(l)}return h}l=_,_=l.parentNode}return null}function In(l){if(l=l[Ie]||l[Et]){var h=l.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return l}return null}function Hs(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l.stateNode;throw Error(n(33))}function jn(l){var h=l[Gn];return h||(h=l[Gn]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Yt(l){l[Yn]=!0}var Es=new Set,Nu={};function il(l,h){oe(l,h),oe(l+"Capture",h)}function oe(l,h){for(Nu[l]=h,l=0;l<h.length;l++)Es.add(h[l])}var Re=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),He={},Ve={};function Le(l){return Bn.call(Ve,l)?!0:Bn.call(He,l)?!1:Re.test(l)?Ve[l]=!0:(He[l]=!0,!1)}function bt(l,h,_){if(Le(h))if(_===null)l.removeAttribute(h);else{switch(typeof _){case"undefined":case"function":case"symbol":l.removeAttribute(h);return;case"boolean":var b=h.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(h);return}}l.setAttribute(h,""+_)}}function Rt(l,h,_){if(_===null)l.removeAttribute(h);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttribute(h,""+_)}}function ot(l,h,_,b){if(b===null)l.removeAttribute(_);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(_);return}l.setAttributeNS(h,_,""+b)}}var Z,qt;function ln(l){if(Z===void 0)try{throw Error()}catch(_){var h=_.stack.trim().match(/\n( *(at )?)/);Z=h&&h[1]||"",qt=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Z+l+qt}var en=!1;function Kn(l,h){if(!l||en)return"";en=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(h){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(We){var je=We}Reflect.construct(l,[],pt)}else{try{pt.call()}catch(We){je=We}l.call(pt.prototype)}}else{try{throw Error()}catch(We){je=We}(pt=l())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(We){if(We&&je&&typeof We.stack=="string")return[We.stack,je.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=b.DetermineComponentFrameRoot(),X=L[0],se=L[1];if(X&&se){var _e=X.split(`
`),Ge=se.split(`
`);for(N=b=0;b<_e.length&&!_e[b].includes("DetermineComponentFrameRoot");)b++;for(;N<Ge.length&&!Ge[N].includes("DetermineComponentFrameRoot");)N++;if(b===_e.length||N===Ge.length)for(b=_e.length-1,N=Ge.length-1;1<=b&&0<=N&&_e[b]!==Ge[N];)N--;for(;1<=b&&0<=N;b--,N--)if(_e[b]!==Ge[N]){if(b!==1||N!==1)do if(b--,N--,0>N||_e[b]!==Ge[N]){var lt=`
`+_e[b].replace(" at new "," at ");return l.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",l.displayName)),lt}while(1<=b&&0<=N);break}}}finally{en=!1,Error.prepareStackTrace=_}return(_=l?l.displayName||l.name:"")?ln(_):""}function di(l){switch(l.tag){case 26:case 27:case 5:return ln(l.type);case 16:return ln("Lazy");case 13:return ln("Suspense");case 19:return ln("SuspenseList");case 0:case 15:return Kn(l.type,!1);case 11:return Kn(l.type.render,!1);case 1:return Kn(l.type,!0);case 31:return ln("Activity");default:return""}}function sr(l){try{var h="";do h+=di(l),l=l.return;while(l);return h}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function Q(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ri(l){var h=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function hn(l){var h=ri(l)?"checked":"value",_=Object.getOwnPropertyDescriptor(l.constructor.prototype,h),b=""+l[h];if(!l.hasOwnProperty(h)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var N=_.get,L=_.set;return Object.defineProperty(l,h,{configurable:!0,get:function(){return N.call(this)},set:function(X){b=""+X,L.call(this,X)}}),Object.defineProperty(l,h,{enumerable:_.enumerable}),{getValue:function(){return b},setValue:function(X){b=""+X},stopTracking:function(){l._valueTracker=null,delete l[h]}}}}function fr(l){l._valueTracker||(l._valueTracker=hn(l))}function fi(l){if(!l)return!1;var h=l._valueTracker;if(!h)return!0;var _=h.getValue(),b="";return l&&(b=ri(l)?l.checked?"true":"false":l.value),l=b,l!==_?(h.setValue(l),!0):!1}function cs(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Fl=/[\n"\\]/g;function Di(l){return l.replace(Fl,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function To(l,h,_,b,N,L,X,se){l.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?l.type=X:l.removeAttribute("type"),h!=null?X==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=""+Q(h)):l.value!==""+Q(h)&&(l.value=""+Q(h)):X!=="submit"&&X!=="reset"||l.removeAttribute("value"),h!=null?Ki(l,X,Q(h)):_!=null?Ki(l,X,Q(_)):b!=null&&l.removeAttribute("value"),N==null&&L!=null&&(l.defaultChecked=!!L),N!=null&&(l.checked=N&&typeof N!="function"&&typeof N!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?l.name=""+Q(se):l.removeAttribute("name")}function Mi(l,h,_,b,N,L,X,se){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(l.type=L),h!=null||_!=null){if(!(L!=="submit"&&L!=="reset"||h!=null))return;_=_!=null?""+Q(_):"",h=h!=null?""+Q(h):_,se||h===l.value||(l.value=h),l.defaultValue=h}b=b??N,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=se?l.checked:!!b,l.defaultChecked=!!b,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(l.name=X)}function Ki(l,h,_){h==="number"&&cs(l.ownerDocument)===l||l.defaultValue===""+_||(l.defaultValue=""+_)}function Jn(l,h,_,b){if(l=l.options,h){h={};for(var N=0;N<_.length;N++)h["$"+_[N]]=!0;for(_=0;_<l.length;_++)N=h.hasOwnProperty("$"+l[_].value),l[_].selected!==N&&(l[_].selected=N),N&&b&&(l[_].defaultSelected=!0)}else{for(_=""+Q(_),h=null,N=0;N<l.length;N++){if(l[N].value===_){l[N].selected=!0,b&&(l[N].defaultSelected=!0);return}h!==null||l[N].disabled||(h=l[N])}h!==null&&(h.selected=!0)}}function Er(l,h,_){if(h!=null&&(h=""+Q(h),h!==l.value&&(l.value=h),_==null)){l.defaultValue!==h&&(l.defaultValue=h);return}l.defaultValue=_!=null?""+Q(_):""}function Zr(l,h,_,b){if(h==null){if(b!=null){if(_!=null)throw Error(n(92));if(ae(b)){if(1<b.length)throw Error(n(93));b=b[0]}_=b}_==null&&(_=""),h=_}_=Q(h),l.defaultValue=_,b=l.textContent,b===_&&b!==""&&b!==null&&(l.value=b)}function wo(l,h){if(h){var _=l.firstChild;if(_&&_===l.lastChild&&_.nodeType===3){_.nodeValue=h;return}}l.textContent=h}var Eo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function r4(l,h,_){var b=h.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?b?l.setProperty(h,""):h==="float"?l.cssFloat="":l[h]="":b?l.setProperty(h,_):typeof _!="number"||_===0||Eo.has(h)?h==="float"?l.cssFloat=_:l[h]=(""+_).trim():l[h]=_+"px"}function s4(l,h,_){if(h!=null&&typeof h!="object")throw Error(n(62));if(l=l.style,_!=null){for(var b in _)!_.hasOwnProperty(b)||h!=null&&h.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var N in h)b=h[N],h.hasOwnProperty(N)&&_[N]!==b&&r4(l,N,b)}else for(var L in h)h.hasOwnProperty(L)&&r4(l,L,h[L])}function EA(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),MA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function a0(l){return MA.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var RA=null;function CA(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ic=null,Pu=null;function Nh(l){var h=In(l);if(h&&(l=h.stateNode)){var _=l[Je]||null;e:switch(l=h.stateNode,h.type){case"input":if(To(l,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),h=_.name,_.type==="radio"&&h!=null){for(_=l;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+Di(""+h)+'"][type="radio"]'),h=0;h<_.length;h++){var b=_[h];if(b!==l&&b.form===l.form){var N=b[Je]||null;if(!N)throw Error(n(90));To(b,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(h=0;h<_.length;h++)b=_[h],b.form===l.form&&fi(b)}break e;case"textarea":Er(l,_.value,_.defaultValue);break e;case"select":h=_.value,h!=null&&Jn(l,!!_.multiple,h,!1)}}}var o0=!1;function a4(l,h,_){if(o0)return l(h,_);o0=!0;try{var b=l(h);return b}finally{if(o0=!1,(Ic!==null||Pu!==null)&&(Y4(),Ic&&(h=Ic,l=Pu,Pu=Ic=null,Nh(h),l)))for(h=0;h<l.length;h++)Nh(l[h])}}function l0(l,h){var _=l.stateNode;if(_===null)return null;var b=_[Je]||null;if(b===null)return null;_=b[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(_&&typeof _!="function")throw Error(n(231,h,typeof _));return _}var rl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ph=!1;if(rl)try{var u0={};Object.defineProperty(u0,"passive",{get:function(){Ph=!0}}),window.addEventListener("test",u0,u0),window.removeEventListener("test",u0,u0)}catch{Ph=!1}var Mo=null,c0=null,Dh=null;function NA(){if(Dh)return Dh;var l,h=c0,_=h.length,b,N="value"in Mo?Mo.value:Mo.textContent,L=N.length;for(l=0;l<_&&h[l]===N[l];l++);var X=_-l;for(b=1;b<=X&&h[_-b]===N[L-b];b++);return Dh=N.slice(l,1<b?1-b:void 0)}function h0(l){var h=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&h===13&&(l=13)):l=h,l===10&&(l=13),32<=l||l===13?l:0}function f0(){return!0}function o4(){return!1}function js(l){function h(_,b,N,L,X){this._reactName=_,this._targetInst=N,this.type=b,this.nativeEvent=L,this.target=X,this.currentTarget=null;for(var se in l)l.hasOwnProperty(se)&&(_=l[se],this[se]=_?_(L):L[se]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?f0:o4,this.isPropagationStopped=o4,this}return p(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=f0)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=f0)},persist:function(){},isPersistent:f0}),h}var Du={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lh=js(Du),Mr=p({},Du,{view:0,detail:0}),Lu=js(Mr),Jr,d0,Fc,Uu=p({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DA,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Fc&&(Fc&&l.type==="mousemove"?(Jr=l.screenX-Fc.screenX,d0=l.screenY-Fc.screenY):d0=Jr=0,Fc=l),Jr)},movementY:function(l){return"movementY"in l?l.movementY:d0}}),l4=js(Uu),A9=p({},Uu,{dataTransfer:0}),p9=js(A9),u4=p({},Mr,{relatedTarget:0}),kc=js(u4),Ou=p({},Du,{animationName:0,elapsedTime:0,pseudoElement:0}),c4=js(Ou),h4=p({},Du,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Uh=js(h4),Bu=p({},Du,{data:0}),sl=js(Bu),f4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m9(l){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(l):(l=PA[l])?!!h[l]:!1}function DA(){return m9}var A4=p({},Mr,{key:function(l){if(l.key){var h=f4[l.key]||l.key;if(h!=="Unidentified")return h}return l.type==="keypress"?(l=h0(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?d4[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DA,charCode:function(l){return l.type==="keypress"?h0(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?h0(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),g9=js(A4),_9=p({},Uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p4=js(_9),v9=p({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DA}),y9=js(v9),x9=p({},Du,{propertyName:0,elapsedTime:0,pseudoElement:0}),q9=js(x9),b9=p({},Uu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Oh=js(b9),S9=p({},Du,{newState:0,oldState:0}),T9=js(S9),w9=[9,13,27,32],Iu=rl&&"CompositionEvent"in window,A0=null;rl&&"documentMode"in document&&(A0=document.documentMode);var LA=rl&&"TextEvent"in window&&!A0,UA=rl&&(!Iu||A0&&8<A0&&11>=A0),Fu=" ",m4=!1;function Bh(l,h){switch(l){case"keyup":return w9.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OA(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var zc=!1;function g4(l,h){switch(l){case"compositionend":return OA(h);case"keypress":return h.which!==32?null:(m4=!0,Fu);case"textInput":return l=h.data,l===Fu&&m4?null:l;default:return null}}function BA(l,h){if(zc)return l==="compositionend"||!Iu&&Bh(l,h)?(l=NA(),Dh=c0=Mo=null,zc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return UA&&h.locale!=="ko"?null:h.data;default:return null}}var IA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ih(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h==="input"?!!IA[l.type]:h==="textarea"}function Gc(l,h,_,b){Ic?Pu?Pu.push(b):Pu=[b]:Ic=b,h=nm(h,"onChange"),0<h.length&&(_=new Lh("onChange","change",null,_,b),l.push({event:_,listeners:h}))}var Ai=null,p0=null;function _4(l){pT(l,0)}function m0(l){var h=Hs(l);if(fi(h))return l}function v4(l,h){if(l==="change")return h}var y4=!1;if(rl){var FA;if(rl){var kA="oninput"in document;if(!kA){var Ms=document.createElement("div");Ms.setAttribute("oninput","return;"),kA=typeof Ms.oninput=="function"}FA=kA}else FA=!1;y4=FA&&(!document.documentMode||9<document.documentMode)}function Fh(){Ai&&(Ai.detachEvent("onpropertychange",kl),p0=Ai=null)}function kl(l){if(l.propertyName==="value"&&m0(p0)){var h=[];Gc(h,p0,l,CA(l)),a4(_4,h)}}function E9(l,h,_){l==="focusin"?(Fh(),Ai=h,p0=_,Ai.attachEvent("onpropertychange",kl)):l==="focusout"&&Fh()}function zA(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return m0(p0)}function M9(l,h){if(l==="click")return m0(h)}function ga(l,h){if(l==="input"||l==="change")return m0(h)}function GA(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var Rs=typeof Object.is=="function"?Object.is:GA;function Ro(l,h){if(Rs(l,h))return!0;if(typeof l!="object"||l===null||typeof h!="object"||h===null)return!1;var _=Object.keys(l),b=Object.keys(h);if(_.length!==b.length)return!1;for(b=0;b<_.length;b++){var N=_[b];if(!Bn.call(h,N)||!Rs(l[N],h[N]))return!1}return!0}function zl(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ku(l,h){var _=zl(l);l=0;for(var b;_;){if(_.nodeType===3){if(b=l+_.textContent.length,l<=h&&b>=h)return{node:_,offset:h-l};l=b}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=zl(_)}}function x4(l,h){return l&&h?l===h?!0:l&&l.nodeType===3?!1:h&&h.nodeType===3?x4(l,h.parentNode):"contains"in l?l.contains(h):l.compareDocumentPosition?!!(l.compareDocumentPosition(h)&16):!1:!1}function VA(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var h=cs(l.document);h instanceof l.HTMLIFrameElement;){try{var _=typeof h.contentWindow.location.href=="string"}catch{_=!1}if(_)l=h.contentWindow;else break;h=cs(l.document)}return h}function HA(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h&&(h==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||h==="textarea"||l.contentEditable==="true")}var jA=rl&&"documentMode"in document&&11>=document.documentMode,Vc=null,WA=null,zu=null,kh=!1;function zh(l,h,_){var b=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;kh||Vc==null||Vc!==cs(b)||(b=Vc,"selectionStart"in b&&HA(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),zu&&Ro(zu,b)||(zu=b,b=nm(WA,"onSelect"),0<b.length&&(h=new Lh("onSelect","select",null,h,_),l.push({event:h,listeners:b}),h.target=Vc)))}function Qa(l,h){var _={};return _[l.toLowerCase()]=h.toLowerCase(),_["Webkit"+l]="webkit"+h,_["Moz"+l]="moz"+h,_}var Ya={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},Cs={},q4={};rl&&(q4=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Ka(l){if(Cs[l])return Cs[l];if(!Ya[l])return l;var h=Ya[l],_;for(_ in h)if(h.hasOwnProperty(_)&&_ in q4)return Cs[l]=h[_];return l}var b4=Ka("animationend"),S4=Ka("animationiteration"),T4=Ka("animationstart"),w4=Ka("transitionrun"),R9=Ka("transitionstart"),C9=Ka("transitioncancel"),E4=Ka("transitionend"),Gh=new Map,Vh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vh.push("scrollEnd");function aa(l,h){Gh.set(l,h),il(h,[l])}var M4=new WeakMap;function _a(l,h){if(typeof l=="object"&&l!==null){var _=M4.get(l);return _!==void 0?_:(h={value:l,source:h,stack:sr(h)},M4.set(l,h),h)}return{value:l,source:h,stack:sr(h)}}var va=[],Hc=0,$A=0;function Hh(){for(var l=Hc,h=$A=Hc=0;h<l;){var _=va[h];va[h++]=null;var b=va[h];va[h++]=null;var N=va[h];va[h++]=null;var L=va[h];if(va[h++]=null,b!==null&&N!==null){var X=b.pending;X===null?N.next=N:(N.next=X.next,X.next=N),b.pending=N}L!==0&&XA(_,N,L)}}function jh(l,h,_,b){va[Hc++]=l,va[Hc++]=h,va[Hc++]=_,va[Hc++]=b,$A|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function Wh(l,h,_,b){return jh(l,h,_,b),ya(l)}function jc(l,h){return jh(l,null,null,h),ya(l)}function XA(l,h,_){l.lanes|=_;var b=l.alternate;b!==null&&(b.lanes|=_);for(var N=!1,L=l.return;L!==null;)L.childLanes|=_,b=L.alternate,b!==null&&(b.childLanes|=_),L.tag===22&&(l=L.stateNode,l===null||l._visibility&1||(N=!0)),l=L,L=L.return;return l.tag===3?(L=l.stateNode,N&&h!==null&&(N=31-Nt(_),l=L.hiddenUpdates,b=l[N],b===null?l[N]=[h]:b.push(h),h.lane=_|536870912),L):null}function ya(l){if(50<p2)throw p2=0,m7=null,Error(n(185));for(var h=l.return;h!==null;)l=h,h=l.return;return l.tag===3?l.stateNode:null}var Gu={};function N9(l,h,_,b){this.tag=l,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oa(l,h,_,b){return new N9(l,h,_,b)}function QA(l){return l=l.prototype,!(!l||!l.isReactComponent)}function al(l,h){var _=l.alternate;return _===null?(_=oa(l.tag,h,l.key,l.mode),_.elementType=l.elementType,_.type=l.type,_.stateNode=l.stateNode,_.alternate=l,l.alternate=_):(_.pendingProps=h,_.type=l.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=l.flags&65011712,_.childLanes=l.childLanes,_.lanes=l.lanes,_.child=l.child,_.memoizedProps=l.memoizedProps,_.memoizedState=l.memoizedState,_.updateQueue=l.updateQueue,h=l.dependencies,_.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},_.sibling=l.sibling,_.index=l.index,_.ref=l.ref,_.refCleanup=l.refCleanup,_}function R4(l,h){l.flags&=65011714;var _=l.alternate;return _===null?(l.childLanes=0,l.lanes=h,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=_.childLanes,l.lanes=_.lanes,l.child=_.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=_.memoizedProps,l.memoizedState=_.memoizedState,l.updateQueue=_.updateQueue,l.type=_.type,h=_.dependencies,l.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),l}function Za(l,h,_,b,N,L){var X=0;if(b=l,typeof l=="function")QA(l)&&(X=1);else if(typeof l=="string")X=Ak(l,_,be.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case k:return l=oa(31,_,h,N),l.elementType=k,l.lanes=L,l;case S:return ol(_.children,N,L,h);case R:X=8,N|=24;break;case M:return l=oa(12,_,h,N|2),l.elementType=M,l.lanes=L,l;case F:return l=oa(13,_,h,N),l.elementType=F,l.lanes=L,l;case I:return l=oa(19,_,h,N),l.elementType=I,l.lanes=L,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:case P:X=10;break e;case U:X=9;break e;case O:X=11;break e;case z:X=14;break e;case j:X=16,b=null;break e}X=29,_=Error(n(130,l===null?"null":typeof l,"")),b=null}return h=oa(X,_,h,N),h.elementType=l,h.type=b,h.lanes=L,h}function ol(l,h,_,b){return l=oa(7,l,b,h),l.lanes=_,l}function YA(l,h,_){return l=oa(6,l,null,h),l.lanes=_,l}function Wc(l,h,_){return h=oa(4,l.children!==null?l.children:[],l.key,h),h.lanes=_,h.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},h}var Vu=[],$c=0,$h=null,Gl=0,la=[],hs=0,ll=null,Ja=1,Co="";function No(l,h){Vu[$c++]=Gl,Vu[$c++]=$h,$h=l,Gl=h}function KA(l,h,_){la[hs++]=Ja,la[hs++]=Co,la[hs++]=ll,ll=l;var b=Ja;l=Co;var N=32-Nt(b)-1;b&=~(1<<N),_+=1;var L=32-Nt(h)+N;if(30<L){var X=N-N%5;L=(b&(1<<X)-1).toString(32),b>>=X,N-=X,Ja=1<<32-Nt(h)+N|_<<N|b,Co=L+l}else Ja=1<<L|_<<N|b,Co=l}function ZA(l){l.return!==null&&(No(l,1),KA(l,1,0))}function JA(l){for(;l===$h;)$h=Vu[--$c],Vu[$c]=null,Gl=Vu[--$c],Vu[$c]=null;for(;l===ll;)ll=la[--hs],la[hs]=null,Co=la[--hs],la[hs]=null,Ja=la[--hs],la[hs]=null}var Ns=null,dr=null,_i=!1,Hu=null,Po=!1,e2=Error(n(519));function ju(l){var h=Error(n(418,""));throw ul(_a(h,l)),e2}function t2(l){var h=l.stateNode,_=l.type,b=l.memoizedProps;switch(h[Ie]=l,h[Je]=b,_){case"dialog":ai("cancel",h),ai("close",h);break;case"iframe":case"object":case"embed":ai("load",h);break;case"video":case"audio":for(_=0;_<g2.length;_++)ai(g2[_],h);break;case"source":ai("error",h);break;case"img":case"image":case"link":ai("error",h),ai("load",h);break;case"details":ai("toggle",h);break;case"input":ai("invalid",h),Mi(h,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),fr(h);break;case"select":ai("invalid",h);break;case"textarea":ai("invalid",h),Zr(h,b.value,b.defaultValue,b.children),fr(h)}_=b.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||h.textContent===""+_||b.suppressHydrationWarning===!0||vT(h.textContent,_)?(b.popover!=null&&(ai("beforetoggle",h),ai("toggle",h)),b.onScroll!=null&&ai("scroll",h),b.onScrollEnd!=null&&ai("scrollend",h),b.onClick!=null&&(h.onclick=im),h=!0):h=!1,h||ju(l)}function n2(l){for(Ns=l.return;Ns;)switch(Ns.tag){case 5:case 13:Po=!1;return;case 27:case 3:Po=!0;return;default:Ns=Ns.return}}function Zi(l){if(l!==Ns)return!1;if(!_i)return n2(l),_i=!0,!1;var h=l.tag,_;if((_=h!==3&&h!==27)&&((_=h===5)&&(_=l.type,_=!(_!=="form"&&_!=="button")||P7(l.type,l.memoizedProps)),_=!_),_&&dr&&ju(l),n2(l),h===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,h=0;l;){if(l.nodeType===8)if(_=l.data,_==="/$"){if(h===0){dr=Al(l.nextSibling);break e}h--}else _!=="$"&&_!=="$!"&&_!=="$?"||h++;l=l.nextSibling}dr=null}}else h===27?(h=dr,l1(l.type)?(l=O7,O7=null,dr=l):dr=h):dr=Ns?Al(l.stateNode.nextSibling):null;return!0}function g0(){dr=Ns=null,_i=!1}function C4(){var l=Hu;return l!==null&&(Sa===null?Sa=l:Sa.push.apply(Sa,l),Hu=null),l}function ul(l){Hu===null?Hu=[l]:Hu.push(l)}var Ws=me(null),Wu=null,cl=null;function Vl(l,h,_){Be(Ws,h._currentValue),h._currentValue=_}function Do(l){l._currentValue=Ws.current,Me(Ws)}function Xh(l,h,_){for(;l!==null;){var b=l.alternate;if((l.childLanes&h)!==h?(l.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),l===_)break;l=l.return}}function Qh(l,h,_,b){var N=l.child;for(N!==null&&(N.return=l);N!==null;){var L=N.dependencies;if(L!==null){var X=N.child;L=L.firstContext;e:for(;L!==null;){var se=L;L=N;for(var _e=0;_e<h.length;_e++)if(se.context===h[_e]){L.lanes|=_,se=L.alternate,se!==null&&(se.lanes|=_),Xh(L.return,_,l),b||(X=null);break e}L=se.next}}else if(N.tag===18){if(X=N.return,X===null)throw Error(n(341));X.lanes|=_,L=X.alternate,L!==null&&(L.lanes|=_),Xh(X,_,l),X=null}else X=N.child;if(X!==null)X.return=N;else for(X=N;X!==null;){if(X===l){X=null;break}if(N=X.sibling,N!==null){N.return=X.return,X=N;break}X=X.return}N=X}}function Xc(l,h,_,b){l=null;for(var N=h,L=!1;N!==null;){if(!L){if((N.flags&524288)!==0)L=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var X=N.alternate;if(X===null)throw Error(n(387));if(X=X.memoizedProps,X!==null){var se=N.type;Rs(N.pendingProps.value,X.value)||(l!==null?l.push(se):l=[se])}}else if(N===ht.current){if(X=N.alternate,X===null)throw Error(n(387));X.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(l!==null?l.push(b2):l=[b2])}N=N.return}l!==null&&Qh(h,l,_,b),h.flags|=262144}function Yh(l){for(l=l.firstContext;l!==null;){if(!Rs(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function $u(l){Wu=l,cl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function fs(l){return hl(Wu,l)}function Kh(l,h){return Wu===null&&$u(l),hl(l,h)}function hl(l,h){var _=h._currentValue;if(h={context:h,memoizedValue:_,next:null},cl===null){if(l===null)throw Error(n(308));cl=h,l.dependencies={lanes:0,firstContext:h},l.flags|=524288}else cl=cl.next=h;return _}var Lo=typeof AbortController<"u"?AbortController:function(){var l=[],h=this.signal={aborted:!1,addEventListener:function(_,b){l.push(b)}};this.abort=function(){h.aborted=!0,l.forEach(function(_){return _()})}},dn=i.unstable_scheduleCallback,xa=i.unstable_NormalPriority,zt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ir(){return{controller:new Lo,data:new Map,refCount:0}}function Qc(l){l.refCount--,l.refCount===0&&dn(xa,function(){l.controller.abort()})}var Xu=null,Uo=0,Yc=0,xr=null;function Kc(l,h){if(Xu===null){var _=Xu=[];Uo=0,Yc=b7(),xr={status:"pending",value:void 0,then:function(b){_.push(b)}}}return Uo++,h.then(Qu,Qu),h}function Qu(){if(--Uo===0&&Xu!==null){xr!==null&&(xr.status="fulfilled");var l=Xu;Xu=null,Yc=0,xr=null;for(var h=0;h<l.length;h++)(0,l[h])()}}function N4(l,h){var _=[],b={status:"pending",value:null,reason:null,then:function(N){_.push(N)}};return l.then(function(){b.status="fulfilled",b.value=h;for(var N=0;N<_.length;N++)(0,_[N])(h)},function(N){for(b.status="rejected",b.reason=N,N=0;N<_.length;N++)(0,_[N])(void 0)}),b}var mt=W.S;W.S=function(l,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Kc(l,h),mt!==null&&mt(l,h)};var yt=me(null);function Zh(){var l=yt.current;return l!==null?l:Ji.pooledCache}function _0(l,h){h===null?Be(yt,yt.current):Be(yt,h.pool)}function v0(){var l=Zh();return l===null?null:{parent:zt._currentValue,pool:l}}var Hl=Error(n(460)),Yu=Error(n(474)),Oo=Error(n(542)),Jh={then:function(){}};function fl(l){return l=l.status,l==="fulfilled"||l==="rejected"}function f(){}function A(l,h,_){switch(_=l[_],_===void 0?l.push(h):_!==h&&(h.then(f,f),h=_),h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,x(l),l;default:if(typeof h.status=="string")h.then(f,f);else{if(l=Ji,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=h,l.status="pending",l.then(function(b){if(h.status==="pending"){var N=h;N.status="fulfilled",N.value=b}},function(b){if(h.status==="pending"){var N=h;N.status="rejected",N.reason=b}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,x(l),l}throw m=h,Hl}}var m=null;function v(){if(m===null)throw Error(n(459));var l=m;return m=null,l}function x(l){if(l===Hl||l===Oo)throw Error(n(483))}var T=!1;function w(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function C(l,h){l=l.updateQueue,h.updateQueue===l&&(h.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function D(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function B(l,h,_){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(Li&2)!==0){var N=b.pending;return N===null?h.next=h:(h.next=N.next,N.next=h),b.pending=h,h=ya(l),XA(l,null,_),h}return jh(l,b,h,_),ya(l)}function V(l,h,_){if(h=h.updateQueue,h!==null&&(h=h.shared,(_&4194048)!==0)){var b=h.lanes;b&=l.pendingLanes,_|=b,h.lanes=_,Tn(l,_)}}function ie(l,h){var _=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,_===b)){var N=null,L=null;if(_=_.firstBaseUpdate,_!==null){do{var X={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};L===null?N=L=X:L=L.next=X,_=_.next}while(_!==null);L===null?N=L=h:L=L.next=h}else N=L=h;_={baseState:b.baseState,firstBaseUpdate:N,lastBaseUpdate:L,shared:b.shared,callbacks:b.callbacks},l.updateQueue=_;return}l=_.lastBaseUpdate,l===null?_.firstBaseUpdate=h:l.next=h,_.lastBaseUpdate=h}var Ae=!1;function he(){if(Ae){var l=xr;if(l!==null)throw l}}function fe(l,h,_,b){Ae=!1;var N=l.updateQueue;T=!1;var L=N.firstBaseUpdate,X=N.lastBaseUpdate,se=N.shared.pending;if(se!==null){N.shared.pending=null;var _e=se,Ge=_e.next;_e.next=null,X===null?L=Ge:X.next=Ge,X=_e;var lt=l.alternate;lt!==null&&(lt=lt.updateQueue,se=lt.lastBaseUpdate,se!==X&&(se===null?lt.firstBaseUpdate=Ge:se.next=Ge,lt.lastBaseUpdate=_e))}if(L!==null){var pt=N.baseState;X=0,lt=Ge=_e=null,se=L;do{var je=se.lane&-536870913,We=je!==se.lane;if(We?(pi&je)===je:(b&je)===je){je!==0&&je===Yc&&(Ae=!0),lt!==null&&(lt=lt.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var bn=l,mn=se;je=h;var ki=_;switch(mn.tag){case 1:if(bn=mn.payload,typeof bn=="function"){pt=bn.call(ki,pt,je);break e}pt=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=mn.payload,je=typeof bn=="function"?bn.call(ki,pt,je):bn,je==null)break e;pt=p({},pt,je);break e;case 2:T=!0}}je=se.callback,je!==null&&(l.flags|=64,We&&(l.flags|=8192),We=N.callbacks,We===null?N.callbacks=[je]:We.push(je))}else We={lane:je,tag:se.tag,payload:se.payload,callback:se.callback,next:null},lt===null?(Ge=lt=We,_e=pt):lt=lt.next=We,X|=je;if(se=se.next,se===null){if(se=N.shared.pending,se===null)break;We=se,se=We.next,We.next=null,N.lastBaseUpdate=We,N.shared.pending=null}}while(!0);lt===null&&(_e=pt),N.baseState=_e,N.firstBaseUpdate=Ge,N.lastBaseUpdate=lt,L===null&&(N.shared.lanes=0),r1|=X,l.lanes=X,l.memoizedState=pt}}function xe(l,h){if(typeof l!="function")throw Error(n(191,l));l.call(h)}function Ee(l,h){var _=l.callbacks;if(_!==null)for(l.callbacks=null,l=0;l<_.length;l++)xe(_[l],h)}var ze=me(null),Ue=me(0);function Ce(l,h){l=ic,Be(Ue,l),Be(ze,h),ic=l|h.baseLanes}function qe(){Be(Ue,ic),Be(ze,ze.current)}function xt(){ic=Ue.current,Me(ze),Me(Ue)}var Vt=0,gt=null,Ft=null,$t=null,Ln=!1,tn=!1,Ht=!1,vt=0,xn=0,oi=null,wn=0;function pn(){throw Error(n(321))}function es(l,h){if(h===null)return!1;for(var _=0;_<h.length&&_<l.length;_++)if(!Rs(l[_],h[_]))return!1;return!0}function ef(l,h,_,b,N,L){return Vt=L,gt=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,W.H=l===null||l.memoizedState===null?Jb:eS,Ht=!1,L=_(b,N),Ht=!1,tn&&(L=_b(h,_,b,N)),gb(l),L}function gb(l){W.H=B4;var h=Ft!==null&&Ft.next!==null;if(Vt=0,$t=Ft=gt=null,Ln=!1,xn=0,oi=null,h)throw Error(n(300));l===null||ds||(l=l.dependencies,l!==null&&Yh(l)&&(ds=!0))}function _b(l,h,_,b){gt=l;var N=0;do{if(tn&&(oi=null),xn=0,tn=!1,25<=N)throw Error(n(301));if(N+=1,$t=Ft=null,l.updateQueue!=null){var L=l.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}W.H=TF,L=h(_,b)}while(tn);return L}function vF(){var l=W.H,h=l.useState()[0];return h=typeof h.then=="function"?i2(h):h,l=l.useState()[0],(Ft!==null?Ft.memoizedState:null)!==l&&(gt.flags|=1024),h}function P9(){var l=vt!==0;return vt=0,l}function D9(l,h,_){h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~_}function L9(l){if(Ln){for(l=l.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}Ln=!1}Vt=0,$t=Ft=gt=null,tn=!1,xn=vt=0,oi=null}function qa(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?gt.memoizedState=$t=l:$t=$t.next=l,$t}function jr(){if(Ft===null){var l=gt.alternate;l=l!==null?l.memoizedState:null}else l=Ft.next;var h=$t===null?gt.memoizedState:$t.next;if(h!==null)$t=h,Ft=l;else{if(l===null)throw gt.alternate===null?Error(n(467)):Error(n(310));Ft=l,l={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},$t===null?gt.memoizedState=$t=l:$t=$t.next=l}return $t}function U9(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function i2(l){var h=xn;return xn+=1,oi===null&&(oi=[]),l=A(oi,l,h),h=gt,($t===null?h.memoizedState:$t.next)===null&&(h=h.alternate,W.H=h===null||h.memoizedState===null?Jb:eS),l}function P4(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return i2(l);if(l.$$typeof===P)return fs(l)}throw Error(n(438,String(l)))}function O9(l){var h=null,_=gt.updateQueue;if(_!==null&&(h=_.memoCache),h==null){var b=gt.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(h={data:b.data.map(function(N){return N.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),_===null&&(_=U9(),gt.updateQueue=_),_.memoCache=h,_=h.data[h.index],_===void 0)for(_=h.data[h.index]=Array(l),b=0;b<l;b++)_[b]=G;return h.index++,_}function Ku(l,h){return typeof h=="function"?h(l):h}function D4(l){var h=jr();return B9(h,Ft,l)}function B9(l,h,_){var b=l.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=_;var N=l.baseQueue,L=b.pending;if(L!==null){if(N!==null){var X=N.next;N.next=L.next,L.next=X}h.baseQueue=N=L,b.pending=null}if(L=l.baseState,N===null)l.memoizedState=L;else{h=N.next;var se=X=null,_e=null,Ge=h,lt=!1;do{var pt=Ge.lane&-536870913;if(pt!==Ge.lane?(pi&pt)===pt:(Vt&pt)===pt){var je=Ge.revertLane;if(je===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null}),pt===Yc&&(lt=!0);else if((Vt&je)===je){Ge=Ge.next,je===Yc&&(lt=!0);continue}else pt={lane:0,revertLane:Ge.revertLane,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},_e===null?(se=_e=pt,X=L):_e=_e.next=pt,gt.lanes|=je,r1|=je;pt=Ge.action,Ht&&_(L,pt),L=Ge.hasEagerState?Ge.eagerState:_(L,pt)}else je={lane:pt,revertLane:Ge.revertLane,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},_e===null?(se=_e=je,X=L):_e=_e.next=je,gt.lanes|=pt,r1|=pt;Ge=Ge.next}while(Ge!==null&&Ge!==h);if(_e===null?X=L:_e.next=se,!Rs(L,l.memoizedState)&&(ds=!0,lt&&(_=xr,_!==null)))throw _;l.memoizedState=L,l.baseState=X,l.baseQueue=_e,b.lastRenderedState=L}return N===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function I9(l){var h=jr(),_=h.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=l;var b=_.dispatch,N=_.pending,L=h.memoizedState;if(N!==null){_.pending=null;var X=N=N.next;do L=l(L,X.action),X=X.next;while(X!==N);Rs(L,h.memoizedState)||(ds=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),_.lastRenderedState=L}return[L,b]}function vb(l,h,_){var b=gt,N=jr(),L=_i;if(L){if(_===void 0)throw Error(n(407));_=_()}else _=h();var X=!Rs((Ft||N).memoizedState,_);X&&(N.memoizedState=_,ds=!0),N=N.queue;var se=qb.bind(null,b,N,l);if(r2(2048,8,se,[l]),N.getSnapshot!==h||X||$t!==null&&$t.memoizedState.tag&1){if(b.flags|=2048,tf(9,L4(),xb.bind(null,b,N,_,h),null),Ji===null)throw Error(n(349));L||(Vt&124)!==0||yb(b,h,_)}return _}function yb(l,h,_){l.flags|=16384,l={getSnapshot:h,value:_},h=gt.updateQueue,h===null?(h=U9(),gt.updateQueue=h,h.stores=[l]):(_=h.stores,_===null?h.stores=[l]:_.push(l))}function xb(l,h,_,b){h.value=_,h.getSnapshot=b,bb(h)&&Sb(l)}function qb(l,h,_){return _(function(){bb(h)&&Sb(l)})}function bb(l){var h=l.getSnapshot;l=l.value;try{var _=h();return!Rs(l,_)}catch{return!0}}function Sb(l){var h=jc(l,2);h!==null&&ro(h,l,2)}function F9(l){var h=qa();if(typeof l=="function"){var _=l;if(l=_(),Ht){St(!0);try{_()}finally{St(!1)}}}return h.memoizedState=h.baseState=l,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ku,lastRenderedState:l},h}function Tb(l,h,_,b){return l.baseState=_,B9(l,Ft,typeof b=="function"?b:Ku)}function yF(l,h,_,b,N){if(O4(l))throw Error(n(485));if(l=h.action,l!==null){var L={payload:N,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){L.listeners.push(X)}};W.T!==null?_(!0):L.isTransition=!1,b(L),_=h.pending,_===null?(L.next=h.pending=L,wb(h,L)):(L.next=_.next,h.pending=_.next=L)}}function wb(l,h){var _=h.action,b=h.payload,N=l.state;if(h.isTransition){var L=W.T,X={};W.T=X;try{var se=_(N,b),_e=W.S;_e!==null&&_e(X,se),Eb(l,h,se)}catch(Ge){k9(l,h,Ge)}finally{W.T=L}}else try{L=_(N,b),Eb(l,h,L)}catch(Ge){k9(l,h,Ge)}}function Eb(l,h,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(b){Mb(l,h,b)},function(b){return k9(l,h,b)}):Mb(l,h,_)}function Mb(l,h,_){h.status="fulfilled",h.value=_,Rb(h),l.state=_,h=l.pending,h!==null&&(_=h.next,_===h?l.pending=null:(_=_.next,h.next=_,wb(l,_)))}function k9(l,h,_){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do h.status="rejected",h.reason=_,Rb(h),h=h.next;while(h!==b)}l.action=null}function Rb(l){l=l.listeners;for(var h=0;h<l.length;h++)(0,l[h])()}function Cb(l,h){return h}function Nb(l,h){if(_i){var _=Ji.formState;if(_!==null){e:{var b=gt;if(_i){if(dr){t:{for(var N=dr,L=Po;N.nodeType!==8;){if(!L){N=null;break t}if(N=Al(N.nextSibling),N===null){N=null;break t}}L=N.data,N=L==="F!"||L==="F"?N:null}if(N){dr=Al(N.nextSibling),b=N.data==="F!";break e}}ju(b)}b=!1}b&&(h=_[0])}}return _=qa(),_.memoizedState=_.baseState=h,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cb,lastRenderedState:h},_.queue=b,_=Yb.bind(null,gt,b),b.dispatch=_,b=F9(!1),L=j9.bind(null,gt,!1,b.queue),b=qa(),N={state:h,dispatch:null,action:l,pending:null},b.queue=N,_=yF.bind(null,gt,N,L,_),N.dispatch=_,b.memoizedState=l,[h,_,!1]}function Pb(l){var h=jr();return Db(h,Ft,l)}function Db(l,h,_){if(h=B9(l,h,Cb)[0],l=D4(Ku)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var b=i2(h)}catch(X){throw X===Hl?Oo:X}else b=h;h=jr();var N=h.queue,L=N.dispatch;return _!==h.memoizedState&&(gt.flags|=2048,tf(9,L4(),xF.bind(null,N,_),null)),[b,L,l]}function xF(l,h){l.action=h}function Lb(l){var h=jr(),_=Ft;if(_!==null)return Db(h,_,l);jr(),h=h.memoizedState,_=jr();var b=_.queue.dispatch;return _.memoizedState=l,[h,b,!1]}function tf(l,h,_,b){return l={tag:l,create:_,deps:b,inst:h,next:null},h=gt.updateQueue,h===null&&(h=U9(),gt.updateQueue=h),_=h.lastEffect,_===null?h.lastEffect=l.next=l:(b=_.next,_.next=l,l.next=b,h.lastEffect=l),l}function L4(){return{destroy:void 0,resource:void 0}}function Ub(){return jr().memoizedState}function U4(l,h,_,b){var N=qa();b=b===void 0?null:b,gt.flags|=l,N.memoizedState=tf(1|h,L4(),_,b)}function r2(l,h,_,b){var N=jr();b=b===void 0?null:b;var L=N.memoizedState.inst;Ft!==null&&b!==null&&es(b,Ft.memoizedState.deps)?N.memoizedState=tf(h,L,_,b):(gt.flags|=l,N.memoizedState=tf(1|h,L,_,b))}function Ob(l,h){U4(8390656,8,l,h)}function Bb(l,h){r2(2048,8,l,h)}function Ib(l,h){return r2(4,2,l,h)}function Fb(l,h){return r2(4,4,l,h)}function kb(l,h){if(typeof h=="function"){l=l();var _=h(l);return function(){typeof _=="function"?_():h(null)}}if(h!=null)return l=l(),h.current=l,function(){h.current=null}}function zb(l,h,_){_=_!=null?_.concat([l]):null,r2(4,4,kb.bind(null,h,l),_)}function z9(){}function Gb(l,h){var _=jr();h=h===void 0?null:h;var b=_.memoizedState;return h!==null&&es(h,b[1])?b[0]:(_.memoizedState=[l,h],l)}function Vb(l,h){var _=jr();h=h===void 0?null:h;var b=_.memoizedState;if(h!==null&&es(h,b[1]))return b[0];if(b=l(),Ht){St(!0);try{l()}finally{St(!1)}}return _.memoizedState=[b,h],b}function G9(l,h,_){return _===void 0||(Vt&1073741824)!==0?l.memoizedState=h:(l.memoizedState=_,l=WS(),gt.lanes|=l,r1|=l,_)}function Hb(l,h,_,b){return Rs(_,h)?_:ze.current!==null?(l=G9(l,_,b),Rs(l,h)||(ds=!0),l):(Vt&42)===0?(ds=!0,l.memoizedState=_):(l=WS(),gt.lanes|=l,r1|=l,h)}function jb(l,h,_,b,N){var L=J.p;J.p=L!==0&&8>L?L:8;var X=W.T,se={};W.T=se,j9(l,!1,h,_);try{var _e=N(),Ge=W.S;if(Ge!==null&&Ge(se,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var lt=N4(_e,b);s2(l,h,lt,io(l))}else s2(l,h,b,io(l))}catch(pt){s2(l,h,{then:function(){},status:"rejected",reason:pt},io())}finally{J.p=L,W.T=X}}function qF(){}function V9(l,h,_,b){if(l.tag!==5)throw Error(n(476));var N=Wb(l).queue;jb(l,N,h,re,_===null?qF:function(){return $b(l),_(b)})}function Wb(l){var h=l.memoizedState;if(h!==null)return h;h={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ku,lastRenderedState:re},next:null};var _={};return h.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ku,lastRenderedState:_},next:null},l.memoizedState=h,l=l.alternate,l!==null&&(l.memoizedState=h),h}function $b(l){var h=Wb(l).next.queue;s2(l,h,{},io())}function H9(){return fs(b2)}function Xb(){return jr().memoizedState}function Qb(){return jr().memoizedState}function bF(l){for(var h=l.return;h!==null;){switch(h.tag){case 24:case 3:var _=io();l=D(_);var b=B(h,l,_);b!==null&&(ro(b,h,_),V(b,h,_)),h={cache:Ir()},l.payload=h;return}h=h.return}}function SF(l,h,_){var b=io();_={lane:b,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null},O4(l)?Kb(h,_):(_=Wh(l,h,_,b),_!==null&&(ro(_,l,b),Zb(_,h,b)))}function Yb(l,h,_){var b=io();s2(l,h,_,b)}function s2(l,h,_,b){var N={lane:b,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null};if(O4(l))Kb(h,N);else{var L=l.alternate;if(l.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var X=h.lastRenderedState,se=L(X,_);if(N.hasEagerState=!0,N.eagerState=se,Rs(se,X))return jh(l,h,N,0),Ji===null&&Hh(),!1}catch{}finally{}if(_=Wh(l,h,N,b),_!==null)return ro(_,l,b),Zb(_,h,b),!0}return!1}function j9(l,h,_,b){if(b={lane:2,revertLane:b7(),action:b,hasEagerState:!1,eagerState:null,next:null},O4(l)){if(h)throw Error(n(479))}else h=Wh(l,_,b,2),h!==null&&ro(h,l,2)}function O4(l){var h=l.alternate;return l===gt||h!==null&&h===gt}function Kb(l,h){tn=Ln=!0;var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}function Zb(l,h,_){if((_&4194048)!==0){var b=h.lanes;b&=l.pendingLanes,_|=b,h.lanes=_,Tn(l,_)}}var B4={readContext:fs,use:P4,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn},Jb={readContext:fs,use:P4,useCallback:function(l,h){return qa().memoizedState=[l,h===void 0?null:h],l},useContext:fs,useEffect:Ob,useImperativeHandle:function(l,h,_){_=_!=null?_.concat([l]):null,U4(4194308,4,kb.bind(null,h,l),_)},useLayoutEffect:function(l,h){return U4(4194308,4,l,h)},useInsertionEffect:function(l,h){U4(4,2,l,h)},useMemo:function(l,h){var _=qa();h=h===void 0?null:h;var b=l();if(Ht){St(!0);try{l()}finally{St(!1)}}return _.memoizedState=[b,h],b},useReducer:function(l,h,_){var b=qa();if(_!==void 0){var N=_(h);if(Ht){St(!0);try{_(h)}finally{St(!1)}}}else N=h;return b.memoizedState=b.baseState=N,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:N},b.queue=l,l=l.dispatch=SF.bind(null,gt,l),[b.memoizedState,l]},useRef:function(l){var h=qa();return l={current:l},h.memoizedState=l},useState:function(l){l=F9(l);var h=l.queue,_=Yb.bind(null,gt,h);return h.dispatch=_,[l.memoizedState,_]},useDebugValue:z9,useDeferredValue:function(l,h){var _=qa();return G9(_,l,h)},useTransition:function(){var l=F9(!1);return l=jb.bind(null,gt,l.queue,!0,!1),qa().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,h,_){var b=gt,N=qa();if(_i){if(_===void 0)throw Error(n(407));_=_()}else{if(_=h(),Ji===null)throw Error(n(349));(pi&124)!==0||yb(b,h,_)}N.memoizedState=_;var L={value:_,getSnapshot:h};return N.queue=L,Ob(qb.bind(null,b,L,l),[l]),b.flags|=2048,tf(9,L4(),xb.bind(null,b,L,_,h),null),_},useId:function(){var l=qa(),h=Ji.identifierPrefix;if(_i){var _=Co,b=Ja;_=(b&~(1<<32-Nt(b)-1)).toString(32)+_,h="«"+h+"R"+_,_=vt++,0<_&&(h+="H"+_.toString(32)),h+="»"}else _=wn++,h="«"+h+"r"+_.toString(32)+"»";return l.memoizedState=h},useHostTransitionStatus:H9,useFormState:Nb,useActionState:Nb,useOptimistic:function(l){var h=qa();h.memoizedState=h.baseState=l;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=_,h=j9.bind(null,gt,!0,_),_.dispatch=h,[l,h]},useMemoCache:O9,useCacheRefresh:function(){return qa().memoizedState=bF.bind(null,gt)}},eS={readContext:fs,use:P4,useCallback:Gb,useContext:fs,useEffect:Bb,useImperativeHandle:zb,useInsertionEffect:Ib,useLayoutEffect:Fb,useMemo:Vb,useReducer:D4,useRef:Ub,useState:function(){return D4(Ku)},useDebugValue:z9,useDeferredValue:function(l,h){var _=jr();return Hb(_,Ft.memoizedState,l,h)},useTransition:function(){var l=D4(Ku)[0],h=jr().memoizedState;return[typeof l=="boolean"?l:i2(l),h]},useSyncExternalStore:vb,useId:Xb,useHostTransitionStatus:H9,useFormState:Pb,useActionState:Pb,useOptimistic:function(l,h){var _=jr();return Tb(_,Ft,l,h)},useMemoCache:O9,useCacheRefresh:Qb},TF={readContext:fs,use:P4,useCallback:Gb,useContext:fs,useEffect:Bb,useImperativeHandle:zb,useInsertionEffect:Ib,useLayoutEffect:Fb,useMemo:Vb,useReducer:I9,useRef:Ub,useState:function(){return I9(Ku)},useDebugValue:z9,useDeferredValue:function(l,h){var _=jr();return Ft===null?G9(_,l,h):Hb(_,Ft.memoizedState,l,h)},useTransition:function(){var l=I9(Ku)[0],h=jr().memoizedState;return[typeof l=="boolean"?l:i2(l),h]},useSyncExternalStore:vb,useId:Xb,useHostTransitionStatus:H9,useFormState:Lb,useActionState:Lb,useOptimistic:function(l,h){var _=jr();return Ft!==null?Tb(_,Ft,l,h):(_.baseState=l,[l,_.queue.dispatch])},useMemoCache:O9,useCacheRefresh:Qb},nf=null,a2=0;function I4(l){var h=a2;return a2+=1,nf===null&&(nf=[]),A(nf,l,h)}function o2(l,h){h=h.props.ref,l.ref=h!==void 0?h:null}function F4(l,h){throw h.$$typeof===g?Error(n(525)):(l=Object.prototype.toString.call(h),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":l)))}function tS(l){var h=l._init;return h(l._payload)}function nS(l){function h(Pe,we){if(l){var ke=Pe.deletions;ke===null?(Pe.deletions=[we],Pe.flags|=16):ke.push(we)}}function _(Pe,we){if(!l)return null;for(;we!==null;)h(Pe,we),we=we.sibling;return null}function b(Pe){for(var we=new Map;Pe!==null;)Pe.key!==null?we.set(Pe.key,Pe):we.set(Pe.index,Pe),Pe=Pe.sibling;return we}function N(Pe,we){return Pe=al(Pe,we),Pe.index=0,Pe.sibling=null,Pe}function L(Pe,we,ke){return Pe.index=ke,l?(ke=Pe.alternate,ke!==null?(ke=ke.index,ke<we?(Pe.flags|=67108866,we):ke):(Pe.flags|=67108866,we)):(Pe.flags|=1048576,we)}function X(Pe){return l&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function se(Pe,we,ke,ct){return we===null||we.tag!==6?(we=YA(ke,Pe.mode,ct),we.return=Pe,we):(we=N(we,ke),we.return=Pe,we)}function _e(Pe,we,ke,ct){var Qt=ke.type;return Qt===S?lt(Pe,we,ke.props.children,ct,ke.key):we!==null&&(we.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===j&&tS(Qt)===we.type)?(we=N(we,ke.props),o2(we,ke),we.return=Pe,we):(we=Za(ke.type,ke.key,ke.props,null,Pe.mode,ct),o2(we,ke),we.return=Pe,we)}function Ge(Pe,we,ke,ct){return we===null||we.tag!==4||we.stateNode.containerInfo!==ke.containerInfo||we.stateNode.implementation!==ke.implementation?(we=Wc(ke,Pe.mode,ct),we.return=Pe,we):(we=N(we,ke.children||[]),we.return=Pe,we)}function lt(Pe,we,ke,ct,Qt){return we===null||we.tag!==7?(we=ol(ke,Pe.mode,ct,Qt),we.return=Pe,we):(we=N(we,ke),we.return=Pe,we)}function pt(Pe,we,ke){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=YA(""+we,Pe.mode,ke),we.return=Pe,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case y:return ke=Za(we.type,we.key,we.props,null,Pe.mode,ke),o2(ke,we),ke.return=Pe,ke;case q:return we=Wc(we,Pe.mode,ke),we.return=Pe,we;case j:var ct=we._init;return we=ct(we._payload),pt(Pe,we,ke)}if(ae(we)||te(we))return we=ol(we,Pe.mode,ke,null),we.return=Pe,we;if(typeof we.then=="function")return pt(Pe,I4(we),ke);if(we.$$typeof===P)return pt(Pe,Kh(Pe,we),ke);F4(Pe,we)}return null}function je(Pe,we,ke,ct){var Qt=we!==null?we.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Qt!==null?null:se(Pe,we,""+ke,ct);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:return ke.key===Qt?_e(Pe,we,ke,ct):null;case q:return ke.key===Qt?Ge(Pe,we,ke,ct):null;case j:return Qt=ke._init,ke=Qt(ke._payload),je(Pe,we,ke,ct)}if(ae(ke)||te(ke))return Qt!==null?null:lt(Pe,we,ke,ct,null);if(typeof ke.then=="function")return je(Pe,we,I4(ke),ct);if(ke.$$typeof===P)return je(Pe,we,Kh(Pe,ke),ct);F4(Pe,ke)}return null}function We(Pe,we,ke,ct,Qt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Pe=Pe.get(ke)||null,se(we,Pe,""+ct,Qt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case y:return Pe=Pe.get(ct.key===null?ke:ct.key)||null,_e(we,Pe,ct,Qt);case q:return Pe=Pe.get(ct.key===null?ke:ct.key)||null,Ge(we,Pe,ct,Qt);case j:var ei=ct._init;return ct=ei(ct._payload),We(Pe,we,ke,ct,Qt)}if(ae(ct)||te(ct))return Pe=Pe.get(ke)||null,lt(we,Pe,ct,Qt,null);if(typeof ct.then=="function")return We(Pe,we,ke,I4(ct),Qt);if(ct.$$typeof===P)return We(Pe,we,ke,Kh(we,ct),Qt);F4(we,ct)}return null}function bn(Pe,we,ke,ct){for(var Qt=null,ei=null,rn=we,vn=we=0,ps=null;rn!==null&&vn<ke.length;vn++){rn.index>vn?(ps=rn,rn=null):ps=rn.sibling;var xi=je(Pe,rn,ke[vn],ct);if(xi===null){rn===null&&(rn=ps);break}l&&rn&&xi.alternate===null&&h(Pe,rn),we=L(xi,we,vn),ei===null?Qt=xi:ei.sibling=xi,ei=xi,rn=ps}if(vn===ke.length)return _(Pe,rn),_i&&No(Pe,vn),Qt;if(rn===null){for(;vn<ke.length;vn++)rn=pt(Pe,ke[vn],ct),rn!==null&&(we=L(rn,we,vn),ei===null?Qt=rn:ei.sibling=rn,ei=rn);return _i&&No(Pe,vn),Qt}for(rn=b(rn);vn<ke.length;vn++)ps=We(rn,Pe,vn,ke[vn],ct),ps!==null&&(l&&ps.alternate!==null&&rn.delete(ps.key===null?vn:ps.key),we=L(ps,we,vn),ei===null?Qt=ps:ei.sibling=ps,ei=ps);return l&&rn.forEach(function(d1){return h(Pe,d1)}),_i&&No(Pe,vn),Qt}function mn(Pe,we,ke,ct){if(ke==null)throw Error(n(151));for(var Qt=null,ei=null,rn=we,vn=we=0,ps=null,xi=ke.next();rn!==null&&!xi.done;vn++,xi=ke.next()){rn.index>vn?(ps=rn,rn=null):ps=rn.sibling;var d1=je(Pe,rn,xi.value,ct);if(d1===null){rn===null&&(rn=ps);break}l&&rn&&d1.alternate===null&&h(Pe,rn),we=L(d1,we,vn),ei===null?Qt=d1:ei.sibling=d1,ei=d1,rn=ps}if(xi.done)return _(Pe,rn),_i&&No(Pe,vn),Qt;if(rn===null){for(;!xi.done;vn++,xi=ke.next())xi=pt(Pe,xi.value,ct),xi!==null&&(we=L(xi,we,vn),ei===null?Qt=xi:ei.sibling=xi,ei=xi);return _i&&No(Pe,vn),Qt}for(rn=b(rn);!xi.done;vn++,xi=ke.next())xi=We(rn,Pe,vn,xi.value,ct),xi!==null&&(l&&xi.alternate!==null&&rn.delete(xi.key===null?vn:xi.key),we=L(xi,we,vn),ei===null?Qt=xi:ei.sibling=xi,ei=xi);return l&&rn.forEach(function(wk){return h(Pe,wk)}),_i&&No(Pe,vn),Qt}function ki(Pe,we,ke,ct){if(typeof ke=="object"&&ke!==null&&ke.type===S&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:e:{for(var Qt=ke.key;we!==null;){if(we.key===Qt){if(Qt=ke.type,Qt===S){if(we.tag===7){_(Pe,we.sibling),ct=N(we,ke.props.children),ct.return=Pe,Pe=ct;break e}}else if(we.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===j&&tS(Qt)===we.type){_(Pe,we.sibling),ct=N(we,ke.props),o2(ct,ke),ct.return=Pe,Pe=ct;break e}_(Pe,we);break}else h(Pe,we);we=we.sibling}ke.type===S?(ct=ol(ke.props.children,Pe.mode,ct,ke.key),ct.return=Pe,Pe=ct):(ct=Za(ke.type,ke.key,ke.props,null,Pe.mode,ct),o2(ct,ke),ct.return=Pe,Pe=ct)}return X(Pe);case q:e:{for(Qt=ke.key;we!==null;){if(we.key===Qt)if(we.tag===4&&we.stateNode.containerInfo===ke.containerInfo&&we.stateNode.implementation===ke.implementation){_(Pe,we.sibling),ct=N(we,ke.children||[]),ct.return=Pe,Pe=ct;break e}else{_(Pe,we);break}else h(Pe,we);we=we.sibling}ct=Wc(ke,Pe.mode,ct),ct.return=Pe,Pe=ct}return X(Pe);case j:return Qt=ke._init,ke=Qt(ke._payload),ki(Pe,we,ke,ct)}if(ae(ke))return bn(Pe,we,ke,ct);if(te(ke)){if(Qt=te(ke),typeof Qt!="function")throw Error(n(150));return ke=Qt.call(ke),mn(Pe,we,ke,ct)}if(typeof ke.then=="function")return ki(Pe,we,I4(ke),ct);if(ke.$$typeof===P)return ki(Pe,we,Kh(Pe,ke),ct);F4(Pe,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,we!==null&&we.tag===6?(_(Pe,we.sibling),ct=N(we,ke),ct.return=Pe,Pe=ct):(_(Pe,we),ct=YA(ke,Pe.mode,ct),ct.return=Pe,Pe=ct),X(Pe)):_(Pe,we)}return function(Pe,we,ke,ct){try{a2=0;var Qt=ki(Pe,we,ke,ct);return nf=null,Qt}catch(rn){if(rn===Hl||rn===Oo)throw rn;var ei=oa(29,rn,null,Pe.mode);return ei.lanes=ct,ei.return=Pe,ei}finally{}}}var rf=nS(!0),iS=nS(!1),Bo=me(null),jl=null;function Zc(l){var h=l.alternate;Be(ts,ts.current&1),Be(Bo,l),jl===null&&(h===null||ze.current!==null||h.memoizedState!==null)&&(jl=l)}function rS(l){if(l.tag===22){if(Be(ts,ts.current),Be(Bo,l),jl===null){var h=l.alternate;h!==null&&h.memoizedState!==null&&(jl=l)}}else Jc()}function Jc(){Be(ts,ts.current),Be(Bo,Bo.current)}function Zu(l){Me(Bo),jl===l&&(jl=null),Me(ts)}var ts=me(0);function k4(l){for(var h=l;h!==null;){if(h.tag===13){var _=h.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||U7(_)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function W9(l,h,_,b){h=l.memoizedState,_=_(b,h),_=_==null?h:p({},h,_),l.memoizedState=_,l.lanes===0&&(l.updateQueue.baseState=_)}var $9={enqueueSetState:function(l,h,_){l=l._reactInternals;var b=io(),N=D(b);N.payload=h,_!=null&&(N.callback=_),h=B(l,N,b),h!==null&&(ro(h,l,b),V(h,l,b))},enqueueReplaceState:function(l,h,_){l=l._reactInternals;var b=io(),N=D(b);N.tag=1,N.payload=h,_!=null&&(N.callback=_),h=B(l,N,b),h!==null&&(ro(h,l,b),V(h,l,b))},enqueueForceUpdate:function(l,h){l=l._reactInternals;var _=io(),b=D(_);b.tag=2,h!=null&&(b.callback=h),h=B(l,b,_),h!==null&&(ro(h,l,_),V(h,l,_))}};function sS(l,h,_,b,N,L,X){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,L,X):h.prototype&&h.prototype.isPureReactComponent?!Ro(_,b)||!Ro(N,L):!0}function aS(l,h,_,b){l=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(_,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(_,b),h.state!==l&&$9.enqueueReplaceState(h,h.state,null)}function y0(l,h){var _=h;if("ref"in h){_={};for(var b in h)b!=="ref"&&(_[b]=h[b])}if(l=l.defaultProps){_===h&&(_=p({},_));for(var N in l)_[N]===void 0&&(_[N]=l[N])}return _}var z4=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function oS(l){z4(l)}function lS(l){console.error(l)}function uS(l){z4(l)}function G4(l,h){try{var _=l.onUncaughtError;_(h.value,{componentStack:h.stack})}catch(b){setTimeout(function(){throw b})}}function cS(l,h,_){try{var b=l.onCaughtError;b(_.value,{componentStack:_.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function X9(l,h,_){return _=D(_),_.tag=3,_.payload={element:null},_.callback=function(){G4(l,h)},_}function hS(l){return l=D(l),l.tag=3,l}function fS(l,h,_,b){var N=_.type.getDerivedStateFromError;if(typeof N=="function"){var L=b.value;l.payload=function(){return N(L)},l.callback=function(){cS(h,_,b)}}var X=_.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(l.callback=function(){cS(h,_,b),typeof N!="function"&&(s1===null?s1=new Set([this]):s1.add(this));var se=b.stack;this.componentDidCatch(b.value,{componentStack:se!==null?se:""})})}function wF(l,h,_,b,N){if(_.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(h=_.alternate,h!==null&&Xc(h,_,N,!0),_=Bo.current,_!==null){switch(_.tag){case 13:return jl===null?_7():_.alternate===null&&Rr===0&&(Rr=3),_.flags&=-257,_.flags|=65536,_.lanes=N,b===Jh?_.flags|=16384:(h=_.updateQueue,h===null?_.updateQueue=new Set([b]):h.add(b),y7(l,b,N)),!1;case 22:return _.flags|=65536,b===Jh?_.flags|=16384:(h=_.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([b])},_.updateQueue=h):(_=h.retryQueue,_===null?h.retryQueue=new Set([b]):_.add(b)),y7(l,b,N)),!1}throw Error(n(435,_.tag))}return y7(l,b,N),_7(),!1}if(_i)return h=Bo.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=N,b!==e2&&(l=Error(n(422),{cause:b}),ul(_a(l,_)))):(b!==e2&&(h=Error(n(423),{cause:b}),ul(_a(h,_))),l=l.current.alternate,l.flags|=65536,N&=-N,l.lanes|=N,b=_a(b,_),N=X9(l.stateNode,b,N),ie(l,N),Rr!==4&&(Rr=2)),!1;var L=Error(n(520),{cause:b});if(L=_a(L,_),A2===null?A2=[L]:A2.push(L),Rr!==4&&(Rr=2),h===null)return!0;b=_a(b,_),_=h;do{switch(_.tag){case 3:return _.flags|=65536,l=N&-N,_.lanes|=l,l=X9(_.stateNode,b,l),ie(_,l),!1;case 1:if(h=_.type,L=_.stateNode,(_.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(s1===null||!s1.has(L))))return _.flags|=65536,N&=-N,_.lanes|=N,N=hS(N),fS(N,l,_,b),ie(_,N),!1}_=_.return}while(_!==null);return!1}var dS=Error(n(461)),ds=!1;function Ps(l,h,_,b){h.child=l===null?iS(h,null,_,b):rf(h,l.child,_,b)}function AS(l,h,_,b,N){_=_.render;var L=h.ref;if("ref"in b){var X={};for(var se in b)se!=="ref"&&(X[se]=b[se])}else X=b;return $u(h),b=ef(l,h,_,X,L,N),se=P9(),l!==null&&!ds?(D9(l,h,N),Ju(l,h,N)):(_i&&se&&ZA(h),h.flags|=1,Ps(l,h,b,N),h.child)}function pS(l,h,_,b,N){if(l===null){var L=_.type;return typeof L=="function"&&!QA(L)&&L.defaultProps===void 0&&_.compare===null?(h.tag=15,h.type=L,mS(l,h,L,b,N)):(l=Za(_.type,null,b,h,h.mode,N),l.ref=h.ref,l.return=h,h.child=l)}if(L=l.child,!n7(l,N)){var X=L.memoizedProps;if(_=_.compare,_=_!==null?_:Ro,_(X,b)&&l.ref===h.ref)return Ju(l,h,N)}return h.flags|=1,l=al(L,b),l.ref=h.ref,l.return=h,h.child=l}function mS(l,h,_,b,N){if(l!==null){var L=l.memoizedProps;if(Ro(L,b)&&l.ref===h.ref)if(ds=!1,h.pendingProps=b=L,n7(l,N))(l.flags&131072)!==0&&(ds=!0);else return h.lanes=l.lanes,Ju(l,h,N)}return Q9(l,h,_,b,N)}function gS(l,h,_){var b=h.pendingProps,N=b.children,L=l!==null?l.memoizedState:null;if(b.mode==="hidden"){if((h.flags&128)!==0){if(b=L!==null?L.baseLanes|_:_,l!==null){for(N=h.child=l.child,L=0;N!==null;)L=L|N.lanes|N.childLanes,N=N.sibling;h.childLanes=L&~b}else h.childLanes=0,h.child=null;return _S(l,h,b,_)}if((_&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},l!==null&&_0(h,L!==null?L.cachePool:null),L!==null?Ce(h,L):qe(),rS(h);else return h.lanes=h.childLanes=536870912,_S(l,h,L!==null?L.baseLanes|_:_,_)}else L!==null?(_0(h,L.cachePool),Ce(h,L),Jc(),h.memoizedState=null):(l!==null&&_0(h,null),qe(),Jc());return Ps(l,h,N,_),h.child}function _S(l,h,_,b){var N=Zh();return N=N===null?null:{parent:zt._currentValue,pool:N},h.memoizedState={baseLanes:_,cachePool:N},l!==null&&_0(h,null),qe(),rS(h),l!==null&&Xc(l,h,b,!0),null}function V4(l,h){var _=h.ref;if(_===null)l!==null&&l.ref!==null&&(h.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(n(284));(l===null||l.ref!==_)&&(h.flags|=4194816)}}function Q9(l,h,_,b,N){return $u(h),_=ef(l,h,_,b,void 0,N),b=P9(),l!==null&&!ds?(D9(l,h,N),Ju(l,h,N)):(_i&&b&&ZA(h),h.flags|=1,Ps(l,h,_,N),h.child)}function vS(l,h,_,b,N,L){return $u(h),h.updateQueue=null,_=_b(h,b,_,N),gb(l),b=P9(),l!==null&&!ds?(D9(l,h,L),Ju(l,h,L)):(_i&&b&&ZA(h),h.flags|=1,Ps(l,h,_,L),h.child)}function yS(l,h,_,b,N){if($u(h),h.stateNode===null){var L=Gu,X=_.contextType;typeof X=="object"&&X!==null&&(L=fs(X)),L=new _(b,L),h.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=$9,h.stateNode=L,L._reactInternals=h,L=h.stateNode,L.props=b,L.state=h.memoizedState,L.refs={},w(h),X=_.contextType,L.context=typeof X=="object"&&X!==null?fs(X):Gu,L.state=h.memoizedState,X=_.getDerivedStateFromProps,typeof X=="function"&&(W9(h,_,X,b),L.state=h.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(X=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),X!==L.state&&$9.enqueueReplaceState(L,L.state,null),fe(h,b,L,N),he(),L.state=h.memoizedState),typeof L.componentDidMount=="function"&&(h.flags|=4194308),b=!0}else if(l===null){L=h.stateNode;var se=h.memoizedProps,_e=y0(_,se);L.props=_e;var Ge=L.context,lt=_.contextType;X=Gu,typeof lt=="object"&&lt!==null&&(X=fs(lt));var pt=_.getDerivedStateFromProps;lt=typeof pt=="function"||typeof L.getSnapshotBeforeUpdate=="function",se=h.pendingProps!==se,lt||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(se||Ge!==X)&&aS(h,L,b,X),T=!1;var je=h.memoizedState;L.state=je,fe(h,b,L,N),he(),Ge=h.memoizedState,se||je!==Ge||T?(typeof pt=="function"&&(W9(h,_,pt,b),Ge=h.memoizedState),(_e=T||sS(h,_,_e,b,je,Ge,X))?(lt||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(h.flags|=4194308)):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=Ge),L.props=b,L.state=Ge,L.context=X,b=_e):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{L=h.stateNode,C(l,h),X=h.memoizedProps,lt=y0(_,X),L.props=lt,pt=h.pendingProps,je=L.context,Ge=_.contextType,_e=Gu,typeof Ge=="object"&&Ge!==null&&(_e=fs(Ge)),se=_.getDerivedStateFromProps,(Ge=typeof se=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(X!==pt||je!==_e)&&aS(h,L,b,_e),T=!1,je=h.memoizedState,L.state=je,fe(h,b,L,N),he();var We=h.memoizedState;X!==pt||je!==We||T||l!==null&&l.dependencies!==null&&Yh(l.dependencies)?(typeof se=="function"&&(W9(h,_,se,b),We=h.memoizedState),(lt=T||sS(h,_,lt,b,je,We,_e)||l!==null&&l.dependencies!==null&&Yh(l.dependencies))?(Ge||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(b,We,_e),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(b,We,_e)),typeof L.componentDidUpdate=="function"&&(h.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof L.componentDidUpdate!="function"||X===l.memoizedProps&&je===l.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||X===l.memoizedProps&&je===l.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=We),L.props=b,L.state=We,L.context=_e,b=lt):(typeof L.componentDidUpdate!="function"||X===l.memoizedProps&&je===l.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||X===l.memoizedProps&&je===l.memoizedState||(h.flags|=1024),b=!1)}return L=b,V4(l,h),b=(h.flags&128)!==0,L||b?(L=h.stateNode,_=b&&typeof _.getDerivedStateFromError!="function"?null:L.render(),h.flags|=1,l!==null&&b?(h.child=rf(h,l.child,null,N),h.child=rf(h,null,_,N)):Ps(l,h,_,N),h.memoizedState=L.state,l=h.child):l=Ju(l,h,N),l}function xS(l,h,_,b){return g0(),h.flags|=256,Ps(l,h,_,b),h.child}var Y9={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function K9(l){return{baseLanes:l,cachePool:v0()}}function Z9(l,h,_){return l=l!==null?l.childLanes&~_:0,h&&(l|=Io),l}function qS(l,h,_){var b=h.pendingProps,N=!1,L=(h.flags&128)!==0,X;if((X=L)||(X=l!==null&&l.memoizedState===null?!1:(ts.current&2)!==0),X&&(N=!0,h.flags&=-129),X=(h.flags&32)!==0,h.flags&=-33,l===null){if(_i){if(N?Zc(h):Jc(),_i){var se=dr,_e;if(_e=se){e:{for(_e=se,se=Po;_e.nodeType!==8;){if(!se){se=null;break e}if(_e=Al(_e.nextSibling),_e===null){se=null;break e}}se=_e}se!==null?(h.memoizedState={dehydrated:se,treeContext:ll!==null?{id:Ja,overflow:Co}:null,retryLane:536870912,hydrationErrors:null},_e=oa(18,null,null,0),_e.stateNode=se,_e.return=h,h.child=_e,Ns=h,dr=null,_e=!0):_e=!1}_e||ju(h)}if(se=h.memoizedState,se!==null&&(se=se.dehydrated,se!==null))return U7(se)?h.lanes=32:h.lanes=536870912,null;Zu(h)}return se=b.children,b=b.fallback,N?(Jc(),N=h.mode,se=H4({mode:"hidden",children:se},N),b=ol(b,N,_,null),se.return=h,b.return=h,se.sibling=b,h.child=se,N=h.child,N.memoizedState=K9(_),N.childLanes=Z9(l,X,_),h.memoizedState=Y9,b):(Zc(h),J9(h,se))}if(_e=l.memoizedState,_e!==null&&(se=_e.dehydrated,se!==null)){if(L)h.flags&256?(Zc(h),h.flags&=-257,h=e7(l,h,_)):h.memoizedState!==null?(Jc(),h.child=l.child,h.flags|=128,h=null):(Jc(),N=b.fallback,se=h.mode,b=H4({mode:"visible",children:b.children},se),N=ol(N,se,_,null),N.flags|=2,b.return=h,N.return=h,b.sibling=N,h.child=b,rf(h,l.child,null,_),b=h.child,b.memoizedState=K9(_),b.childLanes=Z9(l,X,_),h.memoizedState=Y9,h=N);else if(Zc(h),U7(se)){if(X=se.nextSibling&&se.nextSibling.dataset,X)var Ge=X.dgst;X=Ge,b=Error(n(419)),b.stack="",b.digest=X,ul({value:b,source:null,stack:null}),h=e7(l,h,_)}else if(ds||Xc(l,h,_,!1),X=(_&l.childLanes)!==0,ds||X){if(X=Ji,X!==null&&(b=_&-_,b=(b&42)!==0?1:Pi(b),b=(b&(X.suspendedLanes|_))!==0?0:b,b!==0&&b!==_e.retryLane))throw _e.retryLane=b,jc(l,b),ro(X,l,b),dS;se.data==="$?"||_7(),h=e7(l,h,_)}else se.data==="$?"?(h.flags|=192,h.child=l.child,h=null):(l=_e.treeContext,dr=Al(se.nextSibling),Ns=h,_i=!0,Hu=null,Po=!1,l!==null&&(la[hs++]=Ja,la[hs++]=Co,la[hs++]=ll,Ja=l.id,Co=l.overflow,ll=h),h=J9(h,b.children),h.flags|=4096);return h}return N?(Jc(),N=b.fallback,se=h.mode,_e=l.child,Ge=_e.sibling,b=al(_e,{mode:"hidden",children:b.children}),b.subtreeFlags=_e.subtreeFlags&65011712,Ge!==null?N=al(Ge,N):(N=ol(N,se,_,null),N.flags|=2),N.return=h,b.return=h,b.sibling=N,h.child=b,b=N,N=h.child,se=l.child.memoizedState,se===null?se=K9(_):(_e=se.cachePool,_e!==null?(Ge=zt._currentValue,_e=_e.parent!==Ge?{parent:Ge,pool:Ge}:_e):_e=v0(),se={baseLanes:se.baseLanes|_,cachePool:_e}),N.memoizedState=se,N.childLanes=Z9(l,X,_),h.memoizedState=Y9,b):(Zc(h),_=l.child,l=_.sibling,_=al(_,{mode:"visible",children:b.children}),_.return=h,_.sibling=null,l!==null&&(X=h.deletions,X===null?(h.deletions=[l],h.flags|=16):X.push(l)),h.child=_,h.memoizedState=null,_)}function J9(l,h){return h=H4({mode:"visible",children:h},l.mode),h.return=l,l.child=h}function H4(l,h){return l=oa(22,l,null,h),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function e7(l,h,_){return rf(h,l.child,null,_),l=J9(h,h.pendingProps.children),l.flags|=2,h.memoizedState=null,l}function bS(l,h,_){l.lanes|=h;var b=l.alternate;b!==null&&(b.lanes|=h),Xh(l.return,h,_)}function t7(l,h,_,b,N){var L=l.memoizedState;L===null?l.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:_,tailMode:N}:(L.isBackwards=h,L.rendering=null,L.renderingStartTime=0,L.last=b,L.tail=_,L.tailMode=N)}function SS(l,h,_){var b=h.pendingProps,N=b.revealOrder,L=b.tail;if(Ps(l,h,b.children,_),b=ts.current,(b&2)!==0)b=b&1|2,h.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=h.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&bS(l,_,h);else if(l.tag===19)bS(l,_,h);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break e;for(;l.sibling===null;){if(l.return===null||l.return===h)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}switch(Be(ts,b),N){case"forwards":for(_=h.child,N=null;_!==null;)l=_.alternate,l!==null&&k4(l)===null&&(N=_),_=_.sibling;_=N,_===null?(N=h.child,h.child=null):(N=_.sibling,_.sibling=null),t7(h,!1,N,_,L);break;case"backwards":for(_=null,N=h.child,h.child=null;N!==null;){if(l=N.alternate,l!==null&&k4(l)===null){h.child=N;break}l=N.sibling,N.sibling=_,_=N,N=l}t7(h,!0,_,null,L);break;case"together":t7(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Ju(l,h,_){if(l!==null&&(h.dependencies=l.dependencies),r1|=h.lanes,(_&h.childLanes)===0)if(l!==null){if(Xc(l,h,_,!1),(_&h.childLanes)===0)return null}else return null;if(l!==null&&h.child!==l.child)throw Error(n(153));if(h.child!==null){for(l=h.child,_=al(l,l.pendingProps),h.child=_,_.return=h;l.sibling!==null;)l=l.sibling,_=_.sibling=al(l,l.pendingProps),_.return=h;_.sibling=null}return h.child}function n7(l,h){return(l.lanes&h)!==0?!0:(l=l.dependencies,!!(l!==null&&Yh(l)))}function EF(l,h,_){switch(h.tag){case 3:wt(h,h.stateNode.containerInfo),Vl(h,zt,l.memoizedState.cache),g0();break;case 27:case 5:Ct(h);break;case 4:wt(h,h.stateNode.containerInfo);break;case 10:Vl(h,h.type,h.memoizedProps.value);break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(Zc(h),h.flags|=128,null):(_&h.child.childLanes)!==0?qS(l,h,_):(Zc(h),l=Ju(l,h,_),l!==null?l.sibling:null);Zc(h);break;case 19:var N=(l.flags&128)!==0;if(b=(_&h.childLanes)!==0,b||(Xc(l,h,_,!1),b=(_&h.childLanes)!==0),N){if(b)return SS(l,h,_);h.flags|=128}if(N=h.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Be(ts,ts.current),b)break;return null;case 22:case 23:return h.lanes=0,gS(l,h,_);case 24:Vl(h,zt,l.memoizedState.cache)}return Ju(l,h,_)}function TS(l,h,_){if(l!==null)if(l.memoizedProps!==h.pendingProps)ds=!0;else{if(!n7(l,_)&&(h.flags&128)===0)return ds=!1,EF(l,h,_);ds=(l.flags&131072)!==0}else ds=!1,_i&&(h.flags&1048576)!==0&&KA(h,Gl,h.index);switch(h.lanes=0,h.tag){case 16:e:{l=h.pendingProps;var b=h.elementType,N=b._init;if(b=N(b._payload),h.type=b,typeof b=="function")QA(b)?(l=y0(b,l),h.tag=1,h=yS(null,h,b,l,_)):(h.tag=0,h=Q9(null,h,b,l,_));else{if(b!=null){if(N=b.$$typeof,N===O){h.tag=11,h=AS(null,h,b,l,_);break e}else if(N===z){h.tag=14,h=pS(null,h,b,l,_);break e}}throw h=ue(b)||b,Error(n(306,h,""))}}return h;case 0:return Q9(l,h,h.type,h.pendingProps,_);case 1:return b=h.type,N=y0(b,h.pendingProps),yS(l,h,b,N,_);case 3:e:{if(wt(h,h.stateNode.containerInfo),l===null)throw Error(n(387));b=h.pendingProps;var L=h.memoizedState;N=L.element,C(l,h),fe(h,b,null,_);var X=h.memoizedState;if(b=X.cache,Vl(h,zt,b),b!==L.cache&&Qh(h,[zt],_,!0),he(),b=X.element,L.isDehydrated)if(L={element:b,isDehydrated:!1,cache:X.cache},h.updateQueue.baseState=L,h.memoizedState=L,h.flags&256){h=xS(l,h,b,_);break e}else if(b!==N){N=_a(Error(n(424)),h),ul(N),h=xS(l,h,b,_);break e}else{switch(l=h.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(dr=Al(l.firstChild),Ns=h,_i=!0,Hu=null,Po=!0,_=iS(h,null,b,_),h.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(g0(),b===N){h=Ju(l,h,_);break e}Ps(l,h,b,_)}h=h.child}return h;case 26:return V4(l,h),l===null?(_=RT(h.type,null,h.pendingProps,null))?h.memoizedState=_:_i||(_=h.type,l=h.pendingProps,b=rm($e.current).createElement(_),b[Ie]=h,b[Je]=l,Ls(b,_,l),Yt(b),h.stateNode=b):h.memoizedState=RT(h.type,l.memoizedProps,h.pendingProps,l.memoizedState),null;case 27:return Ct(h),l===null&&_i&&(b=h.stateNode=wT(h.type,h.pendingProps,$e.current),Ns=h,Po=!0,N=dr,l1(h.type)?(O7=N,dr=Al(b.firstChild)):dr=N),Ps(l,h,h.pendingProps.children,_),V4(l,h),l===null&&(h.flags|=4194304),h.child;case 5:return l===null&&_i&&((N=b=dr)&&(b=tk(b,h.type,h.pendingProps,Po),b!==null?(h.stateNode=b,Ns=h,dr=Al(b.firstChild),Po=!1,N=!0):N=!1),N||ju(h)),Ct(h),N=h.type,L=h.pendingProps,X=l!==null?l.memoizedProps:null,b=L.children,P7(N,L)?b=null:X!==null&&P7(N,X)&&(h.flags|=32),h.memoizedState!==null&&(N=ef(l,h,vF,null,null,_),b2._currentValue=N),V4(l,h),Ps(l,h,b,_),h.child;case 6:return l===null&&_i&&((l=_=dr)&&(_=nk(_,h.pendingProps,Po),_!==null?(h.stateNode=_,Ns=h,dr=null,l=!0):l=!1),l||ju(h)),null;case 13:return qS(l,h,_);case 4:return wt(h,h.stateNode.containerInfo),b=h.pendingProps,l===null?h.child=rf(h,null,b,_):Ps(l,h,b,_),h.child;case 11:return AS(l,h,h.type,h.pendingProps,_);case 7:return Ps(l,h,h.pendingProps,_),h.child;case 8:return Ps(l,h,h.pendingProps.children,_),h.child;case 12:return Ps(l,h,h.pendingProps.children,_),h.child;case 10:return b=h.pendingProps,Vl(h,h.type,b.value),Ps(l,h,b.children,_),h.child;case 9:return N=h.type._context,b=h.pendingProps.children,$u(h),N=fs(N),b=b(N),h.flags|=1,Ps(l,h,b,_),h.child;case 14:return pS(l,h,h.type,h.pendingProps,_);case 15:return mS(l,h,h.type,h.pendingProps,_);case 19:return SS(l,h,_);case 31:return b=h.pendingProps,_=h.mode,b={mode:b.mode,children:b.children},l===null?(_=H4(b,_),_.ref=h.ref,h.child=_,_.return=h,h=_):(_=al(l.child,b),_.ref=h.ref,h.child=_,_.return=h,h=_),h;case 22:return gS(l,h,_);case 24:return $u(h),b=fs(zt),l===null?(N=Zh(),N===null&&(N=Ji,L=Ir(),N.pooledCache=L,L.refCount++,L!==null&&(N.pooledCacheLanes|=_),N=L),h.memoizedState={parent:b,cache:N},w(h),Vl(h,zt,N)):((l.lanes&_)!==0&&(C(l,h),fe(h,null,null,_),he()),N=l.memoizedState,L=h.memoizedState,N.parent!==b?(N={parent:b,cache:b},h.memoizedState=N,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=N),Vl(h,zt,b)):(b=L.cache,Vl(h,zt,b),b!==N.cache&&Qh(h,[zt],_,!0))),Ps(l,h,h.pendingProps.children,_),h.child;case 29:throw h.pendingProps}throw Error(n(156,h.tag))}function ec(l){l.flags|=4}function wS(l,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!LT(h)){if(h=Bo.current,h!==null&&((pi&4194048)===pi?jl!==null:(pi&62914560)!==pi&&(pi&536870912)===0||h!==jl))throw m=Jh,Yu;l.flags|=8192}}function j4(l,h){h!==null&&(l.flags|=4),l.flags&16384&&(h=l.tag!==22?It():536870912,l.lanes|=h,lf|=h)}function l2(l,h){if(!_i)switch(l.tailMode){case"hidden":h=l.tail;for(var _=null;h!==null;)h.alternate!==null&&(_=h),h=h.sibling;_===null?l.tail=null:_.sibling=null;break;case"collapsed":_=l.tail;for(var b=null;_!==null;)_.alternate!==null&&(b=_),_=_.sibling;b===null?h||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function qr(l){var h=l.alternate!==null&&l.alternate.child===l.child,_=0,b=0;if(h)for(var N=l.child;N!==null;)_|=N.lanes|N.childLanes,b|=N.subtreeFlags&65011712,b|=N.flags&65011712,N.return=l,N=N.sibling;else for(N=l.child;N!==null;)_|=N.lanes|N.childLanes,b|=N.subtreeFlags,b|=N.flags,N.return=l,N=N.sibling;return l.subtreeFlags|=b,l.childLanes=_,h}function MF(l,h,_){var b=h.pendingProps;switch(JA(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(h),null;case 1:return qr(h),null;case 3:return _=h.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),h.memoizedState.cache!==b&&(h.flags|=2048),Do(zt),kt(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(l===null||l.child===null)&&(Zi(h)?ec(h):l===null||l.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,C4())),qr(h),null;case 26:return _=h.memoizedState,l===null?(ec(h),_!==null?(qr(h),wS(h,_)):(qr(h),h.flags&=-16777217)):_?_!==l.memoizedState?(ec(h),qr(h),wS(h,_)):(qr(h),h.flags&=-16777217):(l.memoizedProps!==b&&ec(h),qr(h),h.flags&=-16777217),null;case 27:Kt(h),_=$e.current;var N=h.type;if(l!==null&&h.stateNode!=null)l.memoizedProps!==b&&ec(h);else{if(!b){if(h.stateNode===null)throw Error(n(166));return qr(h),null}l=be.current,Zi(h)?t2(h):(l=wT(N,b,_),h.stateNode=l,ec(h))}return qr(h),null;case 5:if(Kt(h),_=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==b&&ec(h);else{if(!b){if(h.stateNode===null)throw Error(n(166));return qr(h),null}if(l=be.current,Zi(h))t2(h);else{switch(N=rm($e.current),l){case 1:l=N.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:l=N.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":l=N.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":l=N.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":l=N.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof b.is=="string"?N.createElement("select",{is:b.is}):N.createElement("select"),b.multiple?l.multiple=!0:b.size&&(l.size=b.size);break;default:l=typeof b.is=="string"?N.createElement(_,{is:b.is}):N.createElement(_)}}l[Ie]=h,l[Je]=b;e:for(N=h.child;N!==null;){if(N.tag===5||N.tag===6)l.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===h)break e;for(;N.sibling===null;){if(N.return===null||N.return===h)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}h.stateNode=l;e:switch(Ls(l,_,b),_){case"button":case"input":case"select":case"textarea":l=!!b.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ec(h)}}return qr(h),h.flags&=-16777217,null;case 6:if(l&&h.stateNode!=null)l.memoizedProps!==b&&ec(h);else{if(typeof b!="string"&&h.stateNode===null)throw Error(n(166));if(l=$e.current,Zi(h)){if(l=h.stateNode,_=h.memoizedProps,b=null,N=Ns,N!==null)switch(N.tag){case 27:case 5:b=N.memoizedProps}l[Ie]=h,l=!!(l.nodeValue===_||b!==null&&b.suppressHydrationWarning===!0||vT(l.nodeValue,_)),l||ju(h)}else l=rm(l).createTextNode(b),l[Ie]=h,h.stateNode=l}return qr(h),null;case 13:if(b=h.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(N=Zi(h),b!==null&&b.dehydrated!==null){if(l===null){if(!N)throw Error(n(318));if(N=h.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(n(317));N[Ie]=h}else g0(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;qr(h),N=!1}else N=C4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=N),N=!0;if(!N)return h.flags&256?(Zu(h),h):(Zu(h),null)}if(Zu(h),(h.flags&128)!==0)return h.lanes=_,h;if(_=b!==null,l=l!==null&&l.memoizedState!==null,_){b=h.child,N=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(N=b.alternate.memoizedState.cachePool.pool);var L=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(L=b.memoizedState.cachePool.pool),L!==N&&(b.flags|=2048)}return _!==l&&_&&(h.child.flags|=8192),j4(h,h.updateQueue),qr(h),null;case 4:return kt(),l===null&&E7(h.stateNode.containerInfo),qr(h),null;case 10:return Do(h.type),qr(h),null;case 19:if(Me(ts),N=h.memoizedState,N===null)return qr(h),null;if(b=(h.flags&128)!==0,L=N.rendering,L===null)if(b)l2(N,!1);else{if(Rr!==0||l!==null&&(l.flags&128)!==0)for(l=h.child;l!==null;){if(L=k4(l),L!==null){for(h.flags|=128,l2(N,!1),l=L.updateQueue,h.updateQueue=l,j4(h,l),h.subtreeFlags=0,l=_,_=h.child;_!==null;)R4(_,l),_=_.sibling;return Be(ts,ts.current&1|2),h.child}l=l.sibling}N.tail!==null&&st()>X4&&(h.flags|=128,b=!0,l2(N,!1),h.lanes=4194304)}else{if(!b)if(l=k4(L),l!==null){if(h.flags|=128,b=!0,l=l.updateQueue,h.updateQueue=l,j4(h,l),l2(N,!0),N.tail===null&&N.tailMode==="hidden"&&!L.alternate&&!_i)return qr(h),null}else 2*st()-N.renderingStartTime>X4&&_!==536870912&&(h.flags|=128,b=!0,l2(N,!1),h.lanes=4194304);N.isBackwards?(L.sibling=h.child,h.child=L):(l=N.last,l!==null?l.sibling=L:h.child=L,N.last=L)}return N.tail!==null?(h=N.tail,N.rendering=h,N.tail=h.sibling,N.renderingStartTime=st(),h.sibling=null,l=ts.current,Be(ts,b?l&1|2:l&1),h):(qr(h),null);case 22:case 23:return Zu(h),xt(),b=h.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(h.flags|=8192):b&&(h.flags|=8192),b?(_&536870912)!==0&&(h.flags&128)===0&&(qr(h),h.subtreeFlags&6&&(h.flags|=8192)):qr(h),_=h.updateQueue,_!==null&&j4(h,_.retryQueue),_=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(_=l.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==_&&(h.flags|=2048),l!==null&&Me(yt),null;case 24:return _=null,l!==null&&(_=l.memoizedState.cache),h.memoizedState.cache!==_&&(h.flags|=2048),Do(zt),qr(h),null;case 25:return null;case 30:return null}throw Error(n(156,h.tag))}function RF(l,h){switch(JA(h),h.tag){case 1:return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 3:return Do(zt),kt(),l=h.flags,(l&65536)!==0&&(l&128)===0?(h.flags=l&-65537|128,h):null;case 26:case 27:case 5:return Kt(h),null;case 13:if(Zu(h),l=h.memoizedState,l!==null&&l.dehydrated!==null){if(h.alternate===null)throw Error(n(340));g0()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 19:return Me(ts),null;case 4:return kt(),null;case 10:return Do(h.type),null;case 22:case 23:return Zu(h),xt(),l!==null&&Me(yt),l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 24:return Do(zt),null;case 25:return null;default:return null}}function ES(l,h){switch(JA(h),h.tag){case 3:Do(zt),kt();break;case 26:case 27:case 5:Kt(h);break;case 4:kt();break;case 13:Zu(h);break;case 19:Me(ts);break;case 10:Do(h.type);break;case 22:case 23:Zu(h),xt(),l!==null&&Me(yt);break;case 24:Do(zt)}}function u2(l,h){try{var _=h.updateQueue,b=_!==null?_.lastEffect:null;if(b!==null){var N=b.next;_=N;do{if((_.tag&l)===l){b=void 0;var L=_.create,X=_.inst;b=L(),X.destroy=b}_=_.next}while(_!==N)}}catch(se){$i(h,h.return,se)}}function e1(l,h,_){try{var b=h.updateQueue,N=b!==null?b.lastEffect:null;if(N!==null){var L=N.next;b=L;do{if((b.tag&l)===l){var X=b.inst,se=X.destroy;if(se!==void 0){X.destroy=void 0,N=h;var _e=_,Ge=se;try{Ge()}catch(lt){$i(N,_e,lt)}}}b=b.next}while(b!==L)}}catch(lt){$i(h,h.return,lt)}}function MS(l){var h=l.updateQueue;if(h!==null){var _=l.stateNode;try{Ee(h,_)}catch(b){$i(l,l.return,b)}}}function RS(l,h,_){_.props=y0(l.type,l.memoizedProps),_.state=l.memoizedState;try{_.componentWillUnmount()}catch(b){$i(l,h,b)}}function c2(l,h){try{var _=l.ref;if(_!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof _=="function"?l.refCleanup=_(b):_.current=b}}catch(N){$i(l,h,N)}}function Wl(l,h){var _=l.ref,b=l.refCleanup;if(_!==null)if(typeof b=="function")try{b()}catch(N){$i(l,h,N)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(N){$i(l,h,N)}else _.current=null}function CS(l){var h=l.type,_=l.memoizedProps,b=l.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":_.autoFocus&&b.focus();break e;case"img":_.src?b.src=_.src:_.srcSet&&(b.srcset=_.srcSet)}}catch(N){$i(l,l.return,N)}}function i7(l,h,_){try{var b=l.stateNode;YF(b,l.type,_,h),b[Je]=h}catch(N){$i(l,l.return,N)}}function NS(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&l1(l.type)||l.tag===4}function r7(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||NS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&l1(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function s7(l,h,_){var b=l.tag;if(b===5||b===6)l=l.stateNode,h?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(l,h):(h=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,h.appendChild(l),_=_._reactRootContainer,_!=null||h.onclick!==null||(h.onclick=im));else if(b!==4&&(b===27&&l1(l.type)&&(_=l.stateNode,h=null),l=l.child,l!==null))for(s7(l,h,_),l=l.sibling;l!==null;)s7(l,h,_),l=l.sibling}function W4(l,h,_){var b=l.tag;if(b===5||b===6)l=l.stateNode,h?_.insertBefore(l,h):_.appendChild(l);else if(b!==4&&(b===27&&l1(l.type)&&(_=l.stateNode),l=l.child,l!==null))for(W4(l,h,_),l=l.sibling;l!==null;)W4(l,h,_),l=l.sibling}function PS(l){var h=l.stateNode,_=l.memoizedProps;try{for(var b=l.type,N=h.attributes;N.length;)h.removeAttributeNode(N[0]);Ls(h,b,_),h[Ie]=l,h[Je]=_}catch(L){$i(l,l.return,L)}}var tc=!1,Fr=!1,a7=!1,DS=typeof WeakSet=="function"?WeakSet:Set,As=null;function CF(l,h){if(l=l.containerInfo,C7=cm,l=VA(l),HA(l)){if("selectionStart"in l)var _={start:l.selectionStart,end:l.selectionEnd};else e:{_=(_=l.ownerDocument)&&_.defaultView||window;var b=_.getSelection&&_.getSelection();if(b&&b.rangeCount!==0){_=b.anchorNode;var N=b.anchorOffset,L=b.focusNode;b=b.focusOffset;try{_.nodeType,L.nodeType}catch{_=null;break e}var X=0,se=-1,_e=-1,Ge=0,lt=0,pt=l,je=null;t:for(;;){for(var We;pt!==_||N!==0&&pt.nodeType!==3||(se=X+N),pt!==L||b!==0&&pt.nodeType!==3||(_e=X+b),pt.nodeType===3&&(X+=pt.nodeValue.length),(We=pt.firstChild)!==null;)je=pt,pt=We;for(;;){if(pt===l)break t;if(je===_&&++Ge===N&&(se=X),je===L&&++lt===b&&(_e=X),(We=pt.nextSibling)!==null)break;pt=je,je=pt.parentNode}pt=We}_=se===-1||_e===-1?null:{start:se,end:_e}}else _=null}_=_||{start:0,end:0}}else _=null;for(N7={focusedElem:l,selectionRange:_},cm=!1,As=h;As!==null;)if(h=As,l=h.child,(h.subtreeFlags&1024)!==0&&l!==null)l.return=h,As=l;else for(;As!==null;){switch(h=As,L=h.alternate,l=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&L!==null){l=void 0,_=h,N=L.memoizedProps,L=L.memoizedState,b=_.stateNode;try{var bn=y0(_.type,N,_.elementType===_.type);l=b.getSnapshotBeforeUpdate(bn,L),b.__reactInternalSnapshotBeforeUpdate=l}catch(mn){$i(_,_.return,mn)}}break;case 3:if((l&1024)!==0){if(l=h.stateNode.containerInfo,_=l.nodeType,_===9)L7(l);else if(_===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":L7(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=h.sibling,l!==null){l.return=h.return,As=l;break}As=h.return}}function LS(l,h,_){var b=_.flags;switch(_.tag){case 0:case 11:case 15:t1(l,_),b&4&&u2(5,_);break;case 1:if(t1(l,_),b&4)if(l=_.stateNode,h===null)try{l.componentDidMount()}catch(X){$i(_,_.return,X)}else{var N=y0(_.type,h.memoizedProps);h=h.memoizedState;try{l.componentDidUpdate(N,h,l.__reactInternalSnapshotBeforeUpdate)}catch(X){$i(_,_.return,X)}}b&64&&MS(_),b&512&&c2(_,_.return);break;case 3:if(t1(l,_),b&64&&(l=_.updateQueue,l!==null)){if(h=null,_.child!==null)switch(_.child.tag){case 27:case 5:h=_.child.stateNode;break;case 1:h=_.child.stateNode}try{Ee(l,h)}catch(X){$i(_,_.return,X)}}break;case 27:h===null&&b&4&&PS(_);case 26:case 5:t1(l,_),h===null&&b&4&&CS(_),b&512&&c2(_,_.return);break;case 12:t1(l,_);break;case 13:t1(l,_),b&4&&BS(l,_),b&64&&(l=_.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(_=FF.bind(null,_),ik(l,_))));break;case 22:if(b=_.memoizedState!==null||tc,!b){h=h!==null&&h.memoizedState!==null||Fr,N=tc;var L=Fr;tc=b,(Fr=h)&&!L?n1(l,_,(_.subtreeFlags&8772)!==0):t1(l,_),tc=N,Fr=L}break;case 30:break;default:t1(l,_)}}function US(l){var h=l.alternate;h!==null&&(l.alternate=null,US(h)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(h=l.stateNode,h!==null&&ji(h)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Ar=null,ba=!1;function nc(l,h,_){for(_=_.child;_!==null;)OS(l,h,_),_=_.sibling}function OS(l,h,_){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Qe,_)}catch{}switch(_.tag){case 26:Fr||Wl(_,h),nc(l,h,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:Fr||Wl(_,h);var b=Ar,N=ba;l1(_.type)&&(Ar=_.stateNode,ba=!1),nc(l,h,_),v2(_.stateNode),Ar=b,ba=N;break;case 5:Fr||Wl(_,h);case 6:if(b=Ar,N=ba,Ar=null,nc(l,h,_),Ar=b,ba=N,Ar!==null)if(ba)try{(Ar.nodeType===9?Ar.body:Ar.nodeName==="HTML"?Ar.ownerDocument.body:Ar).removeChild(_.stateNode)}catch(L){$i(_,h,L)}else try{Ar.removeChild(_.stateNode)}catch(L){$i(_,h,L)}break;case 18:Ar!==null&&(ba?(l=Ar,ST(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,_.stateNode),E2(l)):ST(Ar,_.stateNode));break;case 4:b=Ar,N=ba,Ar=_.stateNode.containerInfo,ba=!0,nc(l,h,_),Ar=b,ba=N;break;case 0:case 11:case 14:case 15:Fr||e1(2,_,h),Fr||e1(4,_,h),nc(l,h,_);break;case 1:Fr||(Wl(_,h),b=_.stateNode,typeof b.componentWillUnmount=="function"&&RS(_,h,b)),nc(l,h,_);break;case 21:nc(l,h,_);break;case 22:Fr=(b=Fr)||_.memoizedState!==null,nc(l,h,_),Fr=b;break;default:nc(l,h,_)}}function BS(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{E2(l)}catch(_){$i(h,h.return,_)}}function NF(l){switch(l.tag){case 13:case 19:var h=l.stateNode;return h===null&&(h=l.stateNode=new DS),h;case 22:return l=l.stateNode,h=l._retryCache,h===null&&(h=l._retryCache=new DS),h;default:throw Error(n(435,l.tag))}}function o7(l,h){var _=NF(l);h.forEach(function(b){var N=kF.bind(null,l,b);_.has(b)||(_.add(b),b.then(N,N))})}function eo(l,h){var _=h.deletions;if(_!==null)for(var b=0;b<_.length;b++){var N=_[b],L=l,X=h,se=X;e:for(;se!==null;){switch(se.tag){case 27:if(l1(se.type)){Ar=se.stateNode,ba=!1;break e}break;case 5:Ar=se.stateNode,ba=!1;break e;case 3:case 4:Ar=se.stateNode.containerInfo,ba=!0;break e}se=se.return}if(Ar===null)throw Error(n(160));OS(L,X,N),Ar=null,ba=!1,L=N.alternate,L!==null&&(L.return=null),N.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)IS(h,l),h=h.sibling}var dl=null;function IS(l,h){var _=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:eo(h,l),to(l),b&4&&(e1(3,l,l.return),u2(3,l),e1(5,l,l.return));break;case 1:eo(h,l),to(l),b&512&&(Fr||_===null||Wl(_,_.return)),b&64&&tc&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(_=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=_===null?b:_.concat(b))));break;case 26:var N=dl;if(eo(h,l),to(l),b&512&&(Fr||_===null||Wl(_,_.return)),b&4){var L=_!==null?_.memoizedState:null;if(b=l.memoizedState,_===null)if(b===null)if(l.stateNode===null){e:{b=l.type,_=l.memoizedProps,N=N.ownerDocument||N;t:switch(b){case"title":L=N.getElementsByTagName("title")[0],(!L||L[Yn]||L[Ie]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=N.createElement(b),N.head.insertBefore(L,N.querySelector("head > title"))),Ls(L,b,_),L[Ie]=l,Yt(L),b=L;break e;case"link":var X=PT("link","href",N).get(b+(_.href||""));if(X){for(var se=0;se<X.length;se++)if(L=X[se],L.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&L.getAttribute("rel")===(_.rel==null?null:_.rel)&&L.getAttribute("title")===(_.title==null?null:_.title)&&L.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){X.splice(se,1);break t}}L=N.createElement(b),Ls(L,b,_),N.head.appendChild(L);break;case"meta":if(X=PT("meta","content",N).get(b+(_.content||""))){for(se=0;se<X.length;se++)if(L=X[se],L.getAttribute("content")===(_.content==null?null:""+_.content)&&L.getAttribute("name")===(_.name==null?null:_.name)&&L.getAttribute("property")===(_.property==null?null:_.property)&&L.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&L.getAttribute("charset")===(_.charSet==null?null:_.charSet)){X.splice(se,1);break t}}L=N.createElement(b),Ls(L,b,_),N.head.appendChild(L);break;default:throw Error(n(468,b))}L[Ie]=l,Yt(L),b=L}l.stateNode=b}else DT(N,l.type,l.stateNode);else l.stateNode=NT(N,b,l.memoizedProps);else L!==b?(L===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):L.count--,b===null?DT(N,l.type,l.stateNode):NT(N,b,l.memoizedProps)):b===null&&l.stateNode!==null&&i7(l,l.memoizedProps,_.memoizedProps)}break;case 27:eo(h,l),to(l),b&512&&(Fr||_===null||Wl(_,_.return)),_!==null&&b&4&&i7(l,l.memoizedProps,_.memoizedProps);break;case 5:if(eo(h,l),to(l),b&512&&(Fr||_===null||Wl(_,_.return)),l.flags&32){N=l.stateNode;try{wo(N,"")}catch(We){$i(l,l.return,We)}}b&4&&l.stateNode!=null&&(N=l.memoizedProps,i7(l,N,_!==null?_.memoizedProps:N)),b&1024&&(a7=!0);break;case 6:if(eo(h,l),to(l),b&4){if(l.stateNode===null)throw Error(n(162));b=l.memoizedProps,_=l.stateNode;try{_.nodeValue=b}catch(We){$i(l,l.return,We)}}break;case 3:if(om=null,N=dl,dl=sm(h.containerInfo),eo(h,l),dl=N,to(l),b&4&&_!==null&&_.memoizedState.isDehydrated)try{E2(h.containerInfo)}catch(We){$i(l,l.return,We)}a7&&(a7=!1,FS(l));break;case 4:b=dl,dl=sm(l.stateNode.containerInfo),eo(h,l),to(l),dl=b;break;case 12:eo(h,l),to(l);break;case 13:eo(h,l),to(l),l.child.flags&8192&&l.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(d7=st()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,o7(l,b)));break;case 22:N=l.memoizedState!==null;var _e=_!==null&&_.memoizedState!==null,Ge=tc,lt=Fr;if(tc=Ge||N,Fr=lt||_e,eo(h,l),Fr=lt,tc=Ge,to(l),b&8192)e:for(h=l.stateNode,h._visibility=N?h._visibility&-2:h._visibility|1,N&&(_===null||_e||tc||Fr||x0(l)),_=null,h=l;;){if(h.tag===5||h.tag===26){if(_===null){_e=_=h;try{if(L=_e.stateNode,N)X=L.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{se=_e.stateNode;var pt=_e.memoizedProps.style,je=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;se.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(We){$i(_e,_e.return,We)}}}else if(h.tag===6){if(_===null){_e=h;try{_e.stateNode.nodeValue=N?"":_e.memoizedProps}catch(We){$i(_e,_e.return,We)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===l)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break e;for(;h.sibling===null;){if(h.return===null||h.return===l)break e;_===h&&(_=null),h=h.return}_===h&&(_=null),h.sibling.return=h.return,h=h.sibling}b&4&&(b=l.updateQueue,b!==null&&(_=b.retryQueue,_!==null&&(b.retryQueue=null,o7(l,_))));break;case 19:eo(h,l),to(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,o7(l,b)));break;case 30:break;case 21:break;default:eo(h,l),to(l)}}function to(l){var h=l.flags;if(h&2){try{for(var _,b=l.return;b!==null;){if(NS(b)){_=b;break}b=b.return}if(_==null)throw Error(n(160));switch(_.tag){case 27:var N=_.stateNode,L=r7(l);W4(l,L,N);break;case 5:var X=_.stateNode;_.flags&32&&(wo(X,""),_.flags&=-33);var se=r7(l);W4(l,se,X);break;case 3:case 4:var _e=_.stateNode.containerInfo,Ge=r7(l);s7(l,Ge,_e);break;default:throw Error(n(161))}}catch(lt){$i(l,l.return,lt)}l.flags&=-3}h&4096&&(l.flags&=-4097)}function FS(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var h=l;FS(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),l=l.sibling}}function t1(l,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)LS(l,h.alternate,h),h=h.sibling}function x0(l){for(l=l.child;l!==null;){var h=l;switch(h.tag){case 0:case 11:case 14:case 15:e1(4,h,h.return),x0(h);break;case 1:Wl(h,h.return);var _=h.stateNode;typeof _.componentWillUnmount=="function"&&RS(h,h.return,_),x0(h);break;case 27:v2(h.stateNode);case 26:case 5:Wl(h,h.return),x0(h);break;case 22:h.memoizedState===null&&x0(h);break;case 30:x0(h);break;default:x0(h)}l=l.sibling}}function n1(l,h,_){for(_=_&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var b=h.alternate,N=l,L=h,X=L.flags;switch(L.tag){case 0:case 11:case 15:n1(N,L,_),u2(4,L);break;case 1:if(n1(N,L,_),b=L,N=b.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(Ge){$i(b,b.return,Ge)}if(b=L,N=b.updateQueue,N!==null){var se=b.stateNode;try{var _e=N.shared.hiddenCallbacks;if(_e!==null)for(N.shared.hiddenCallbacks=null,N=0;N<_e.length;N++)xe(_e[N],se)}catch(Ge){$i(b,b.return,Ge)}}_&&X&64&&MS(L),c2(L,L.return);break;case 27:PS(L);case 26:case 5:n1(N,L,_),_&&b===null&&X&4&&CS(L),c2(L,L.return);break;case 12:n1(N,L,_);break;case 13:n1(N,L,_),_&&X&4&&BS(N,L);break;case 22:L.memoizedState===null&&n1(N,L,_),c2(L,L.return);break;case 30:break;default:n1(N,L,_)}h=h.sibling}}function l7(l,h){var _=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(_=l.memoizedState.cachePool.pool),l=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(l=h.memoizedState.cachePool.pool),l!==_&&(l!=null&&l.refCount++,_!=null&&Qc(_))}function u7(l,h){l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&Qc(l))}function $l(l,h,_,b){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)kS(l,h,_,b),h=h.sibling}function kS(l,h,_,b){var N=h.flags;switch(h.tag){case 0:case 11:case 15:$l(l,h,_,b),N&2048&&u2(9,h);break;case 1:$l(l,h,_,b);break;case 3:$l(l,h,_,b),N&2048&&(l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&Qc(l)));break;case 12:if(N&2048){$l(l,h,_,b),l=h.stateNode;try{var L=h.memoizedProps,X=L.id,se=L.onPostCommit;typeof se=="function"&&se(X,h.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(_e){$i(h,h.return,_e)}}else $l(l,h,_,b);break;case 13:$l(l,h,_,b);break;case 23:break;case 22:L=h.stateNode,X=h.alternate,h.memoizedState!==null?L._visibility&2?$l(l,h,_,b):h2(l,h):L._visibility&2?$l(l,h,_,b):(L._visibility|=2,sf(l,h,_,b,(h.subtreeFlags&10256)!==0)),N&2048&&l7(X,h);break;case 24:$l(l,h,_,b),N&2048&&u7(h.alternate,h);break;default:$l(l,h,_,b)}}function sf(l,h,_,b,N){for(N=N&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var L=l,X=h,se=_,_e=b,Ge=X.flags;switch(X.tag){case 0:case 11:case 15:sf(L,X,se,_e,N),u2(8,X);break;case 23:break;case 22:var lt=X.stateNode;X.memoizedState!==null?lt._visibility&2?sf(L,X,se,_e,N):h2(L,X):(lt._visibility|=2,sf(L,X,se,_e,N)),N&&Ge&2048&&l7(X.alternate,X);break;case 24:sf(L,X,se,_e,N),N&&Ge&2048&&u7(X.alternate,X);break;default:sf(L,X,se,_e,N)}h=h.sibling}}function h2(l,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var _=l,b=h,N=b.flags;switch(b.tag){case 22:h2(_,b),N&2048&&l7(b.alternate,b);break;case 24:h2(_,b),N&2048&&u7(b.alternate,b);break;default:h2(_,b)}h=h.sibling}}var f2=8192;function af(l){if(l.subtreeFlags&f2)for(l=l.child;l!==null;)zS(l),l=l.sibling}function zS(l){switch(l.tag){case 26:af(l),l.flags&f2&&l.memoizedState!==null&&mk(dl,l.memoizedState,l.memoizedProps);break;case 5:af(l);break;case 3:case 4:var h=dl;dl=sm(l.stateNode.containerInfo),af(l),dl=h;break;case 22:l.memoizedState===null&&(h=l.alternate,h!==null&&h.memoizedState!==null?(h=f2,f2=16777216,af(l),f2=h):af(l));break;default:af(l)}}function GS(l){var h=l.alternate;if(h!==null&&(l=h.child,l!==null)){h.child=null;do h=l.sibling,l.sibling=null,l=h;while(l!==null)}}function d2(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var _=0;_<h.length;_++){var b=h[_];As=b,HS(b,l)}GS(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)VS(l),l=l.sibling}function VS(l){switch(l.tag){case 0:case 11:case 15:d2(l),l.flags&2048&&e1(9,l,l.return);break;case 3:d2(l);break;case 12:d2(l);break;case 22:var h=l.stateNode;l.memoizedState!==null&&h._visibility&2&&(l.return===null||l.return.tag!==13)?(h._visibility&=-3,$4(l)):d2(l);break;default:d2(l)}}function $4(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var _=0;_<h.length;_++){var b=h[_];As=b,HS(b,l)}GS(l)}for(l=l.child;l!==null;){switch(h=l,h.tag){case 0:case 11:case 15:e1(8,h,h.return),$4(h);break;case 22:_=h.stateNode,_._visibility&2&&(_._visibility&=-3,$4(h));break;default:$4(h)}l=l.sibling}}function HS(l,h){for(;As!==null;){var _=As;switch(_.tag){case 0:case 11:case 15:e1(8,_,h);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var b=_.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Qc(_.memoizedState.cache)}if(b=_.child,b!==null)b.return=_,As=b;else e:for(_=l;As!==null;){b=As;var N=b.sibling,L=b.return;if(US(b),b===_){As=null;break e}if(N!==null){N.return=L,As=N;break e}As=L}}}var PF={getCacheForType:function(l){var h=fs(zt),_=h.data.get(l);return _===void 0&&(_=l(),h.data.set(l,_)),_}},DF=typeof WeakMap=="function"?WeakMap:Map,Li=0,Ji=null,si=null,pi=0,Ui=0,no=null,i1=!1,of=!1,c7=!1,ic=0,Rr=0,r1=0,q0=0,h7=0,Io=0,lf=0,A2=null,Sa=null,f7=!1,d7=0,X4=1/0,Q4=null,s1=null,Ds=0,a1=null,uf=null,cf=0,A7=0,p7=null,jS=null,p2=0,m7=null;function io(){if((Li&2)!==0&&pi!==0)return pi&-pi;if(W.T!==null){var l=Yc;return l!==0?l:b7()}return ii()}function WS(){Io===0&&(Io=(pi&536870912)===0||_i?pe():536870912);var l=Bo.current;return l!==null&&(l.flags|=32),Io}function ro(l,h,_){(l===Ji&&(Ui===2||Ui===9)||l.cancelPendingCommit!==null)&&(hf(l,0),o1(l,pi,Io,!1)),dt(l,_),((Li&2)===0||l!==Ji)&&(l===Ji&&((Li&2)===0&&(q0|=_),Rr===4&&o1(l,pi,Io,!1)),Xl(l))}function $S(l,h,_){if((Li&6)!==0)throw Error(n(327));var b=!_&&(h&124)===0&&(h&l.expiredLanes)===0||qn(l,h),N=b?OF(l,h):v7(l,h,!0),L=b;do{if(N===0){of&&!b&&o1(l,h,0,!1);break}else{if(_=l.current.alternate,L&&!LF(_)){N=v7(l,h,!1),L=!1;continue}if(N===2){if(L=h,l.errorRecoveryDisabledLanes&L)var X=0;else X=l.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){h=X;e:{var se=l;N=A2;var _e=se.current.memoizedState.isDehydrated;if(_e&&(hf(se,X).flags|=256),X=v7(se,X,!1),X!==2){if(c7&&!_e){se.errorRecoveryDisabledLanes|=L,q0|=L,N=4;break e}L=Sa,Sa=N,L!==null&&(Sa===null?Sa=L:Sa.push.apply(Sa,L))}N=X}if(L=!1,N!==2)continue}}if(N===1){hf(l,0),o1(l,h,0,!0);break}e:{switch(b=l,L=N,L){case 0:case 1:throw Error(n(345));case 4:if((h&4194048)!==h)break;case 6:o1(b,h,Io,!i1);break e;case 2:Sa=null;break;case 3:case 5:break;default:throw Error(n(329))}if((h&62914560)===h&&(N=d7+300-st(),10<N)){if(o1(b,h,Io,!i1),kn(b,0,!0)!==0)break e;b.timeoutHandle=qT(XS.bind(null,b,_,Sa,Q4,f7,h,Io,q0,lf,i1,L,2,-0,0),N);break e}XS(b,_,Sa,Q4,f7,h,Io,q0,lf,i1,L,0,-0,0)}}break}while(!0);Xl(l)}function XS(l,h,_,b,N,L,X,se,_e,Ge,lt,pt,je,We){if(l.timeoutHandle=-1,pt=h.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(q2={stylesheets:null,count:0,unsuspend:pk},zS(h),pt=gk(),pt!==null)){l.cancelPendingCommit=pt(tT.bind(null,l,h,L,_,b,N,X,se,_e,lt,1,je,We)),o1(l,L,X,!Ge);return}tT(l,h,L,_,b,N,X,se,_e)}function LF(l){for(var h=l;;){var _=h.tag;if((_===0||_===11||_===15)&&h.flags&16384&&(_=h.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var b=0;b<_.length;b++){var N=_[b],L=N.getSnapshot;N=N.value;try{if(!Rs(L(),N))return!1}catch{return!1}}if(_=h.child,h.subtreeFlags&16384&&_!==null)_.return=h,h=_;else{if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function o1(l,h,_,b){h&=~h7,h&=~q0,l.suspendedLanes|=h,l.pingedLanes&=~h,b&&(l.warmLanes|=h),b=l.expirationTimes;for(var N=h;0<N;){var L=31-Nt(N),X=1<<L;b[L]=-1,N&=~X}_!==0&&Ot(l,_,h)}function Y4(){return(Li&6)===0?(m2(0),!1):!0}function g7(){if(si!==null){if(Ui===0)var l=si.return;else l=si,cl=Wu=null,L9(l),nf=null,a2=0,l=si;for(;l!==null;)ES(l.alternate,l),l=l.return;si=null}}function hf(l,h){var _=l.timeoutHandle;_!==-1&&(l.timeoutHandle=-1,ZF(_)),_=l.cancelPendingCommit,_!==null&&(l.cancelPendingCommit=null,_()),g7(),Ji=l,si=_=al(l.current,null),pi=h,Ui=0,no=null,i1=!1,of=qn(l,h),c7=!1,lf=Io=h7=q0=r1=Rr=0,Sa=A2=null,f7=!1,(h&8)!==0&&(h|=h&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=h;0<b;){var N=31-Nt(b),L=1<<N;h|=l[N],b&=~L}return ic=h,Hh(),_}function QS(l,h){gt=null,W.H=B4,h===Hl||h===Oo?(h=v(),Ui=3):h===Yu?(h=v(),Ui=4):Ui=h===dS?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,no=h,si===null&&(Rr=1,G4(l,_a(h,l.current)))}function YS(){var l=W.H;return W.H=B4,l===null?B4:l}function KS(){var l=W.A;return W.A=PF,l}function _7(){Rr=4,i1||(pi&4194048)!==pi&&Bo.current!==null||(of=!0),(r1&134217727)===0&&(q0&134217727)===0||Ji===null||o1(Ji,pi,Io,!1)}function v7(l,h,_){var b=Li;Li|=2;var N=YS(),L=KS();(Ji!==l||pi!==h)&&(Q4=null,hf(l,h)),h=!1;var X=Rr;e:do try{if(Ui!==0&&si!==null){var se=si,_e=no;switch(Ui){case 8:g7(),X=6;break e;case 3:case 2:case 9:case 6:Bo.current===null&&(h=!0);var Ge=Ui;if(Ui=0,no=null,ff(l,se,_e,Ge),_&&of){X=0;break e}break;default:Ge=Ui,Ui=0,no=null,ff(l,se,_e,Ge)}}UF(),X=Rr;break}catch(lt){QS(l,lt)}while(!0);return h&&l.shellSuspendCounter++,cl=Wu=null,Li=b,W.H=N,W.A=L,si===null&&(Ji=null,pi=0,Hh()),X}function UF(){for(;si!==null;)ZS(si)}function OF(l,h){var _=Li;Li|=2;var b=YS(),N=KS();Ji!==l||pi!==h?(Q4=null,X4=st()+500,hf(l,h)):of=qn(l,h);e:do try{if(Ui!==0&&si!==null){h=si;var L=no;t:switch(Ui){case 1:Ui=0,no=null,ff(l,h,L,1);break;case 2:case 9:if(fl(L)){Ui=0,no=null,JS(h);break}h=function(){Ui!==2&&Ui!==9||Ji!==l||(Ui=7),Xl(l)},L.then(h,h);break e;case 3:Ui=7;break e;case 4:Ui=5;break e;case 7:fl(L)?(Ui=0,no=null,JS(h)):(Ui=0,no=null,ff(l,h,L,7));break;case 5:var X=null;switch(si.tag){case 26:X=si.memoizedState;case 5:case 27:var se=si;if(!X||LT(X)){Ui=0,no=null;var _e=se.sibling;if(_e!==null)si=_e;else{var Ge=se.return;Ge!==null?(si=Ge,K4(Ge)):si=null}break t}}Ui=0,no=null,ff(l,h,L,5);break;case 6:Ui=0,no=null,ff(l,h,L,6);break;case 8:g7(),Rr=6;break e;default:throw Error(n(462))}}BF();break}catch(lt){QS(l,lt)}while(!0);return cl=Wu=null,W.H=b,W.A=N,Li=_,si!==null?0:(Ji=null,pi=0,Hh(),Rr)}function BF(){for(;si!==null&&!gi();)ZS(si)}function ZS(l){var h=TS(l.alternate,l,ic);l.memoizedProps=l.pendingProps,h===null?K4(l):si=h}function JS(l){var h=l,_=h.alternate;switch(h.tag){case 15:case 0:h=vS(_,h,h.pendingProps,h.type,void 0,pi);break;case 11:h=vS(_,h,h.pendingProps,h.type.render,h.ref,pi);break;case 5:L9(h);default:ES(_,h),h=si=R4(h,ic),h=TS(_,h,ic)}l.memoizedProps=l.pendingProps,h===null?K4(l):si=h}function ff(l,h,_,b){cl=Wu=null,L9(h),nf=null,a2=0;var N=h.return;try{if(wF(l,N,h,_,pi)){Rr=1,G4(l,_a(_,l.current)),si=null;return}}catch(L){if(N!==null)throw si=N,L;Rr=1,G4(l,_a(_,l.current)),si=null;return}h.flags&32768?(_i||b===1?l=!0:of||(pi&536870912)!==0?l=!1:(i1=l=!0,(b===2||b===9||b===3||b===6)&&(b=Bo.current,b!==null&&b.tag===13&&(b.flags|=16384))),eT(h,l)):K4(h)}function K4(l){var h=l;do{if((h.flags&32768)!==0){eT(h,i1);return}l=h.return;var _=MF(h.alternate,h,ic);if(_!==null){si=_;return}if(h=h.sibling,h!==null){si=h;return}si=h=l}while(h!==null);Rr===0&&(Rr=5)}function eT(l,h){do{var _=RF(l.alternate,l);if(_!==null){_.flags&=32767,si=_;return}if(_=l.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!h&&(l=l.sibling,l!==null)){si=l;return}si=l=_}while(l!==null);Rr=6,si=null}function tT(l,h,_,b,N,L,X,se,_e){l.cancelPendingCommit=null;do Z4();while(Ds!==0);if((Li&6)!==0)throw Error(n(327));if(h!==null){if(h===l.current)throw Error(n(177));if(L=h.lanes|h.childLanes,L|=$A,Gt(l,_,L,X,se,_e),l===Ji&&(si=Ji=null,pi=0),uf=h,a1=l,cf=_,A7=L,p7=N,jS=b,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,zF(ce,function(){return aT(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||b){b=W.T,W.T=null,N=J.p,J.p=2,X=Li,Li|=4;try{CF(l,h,_)}finally{Li=X,J.p=N,W.T=b}}Ds=1,nT(),iT(),rT()}}function nT(){if(Ds===1){Ds=0;var l=a1,h=uf,_=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||_){_=W.T,W.T=null;var b=J.p;J.p=2;var N=Li;Li|=4;try{IS(h,l);var L=N7,X=VA(l.containerInfo),se=L.focusedElem,_e=L.selectionRange;if(X!==se&&se&&se.ownerDocument&&x4(se.ownerDocument.documentElement,se)){if(_e!==null&&HA(se)){var Ge=_e.start,lt=_e.end;if(lt===void 0&&(lt=Ge),"selectionStart"in se)se.selectionStart=Ge,se.selectionEnd=Math.min(lt,se.value.length);else{var pt=se.ownerDocument||document,je=pt&&pt.defaultView||window;if(je.getSelection){var We=je.getSelection(),bn=se.textContent.length,mn=Math.min(_e.start,bn),ki=_e.end===void 0?mn:Math.min(_e.end,bn);!We.extend&&mn>ki&&(X=ki,ki=mn,mn=X);var Pe=ku(se,mn),we=ku(se,ki);if(Pe&&we&&(We.rangeCount!==1||We.anchorNode!==Pe.node||We.anchorOffset!==Pe.offset||We.focusNode!==we.node||We.focusOffset!==we.offset)){var ke=pt.createRange();ke.setStart(Pe.node,Pe.offset),We.removeAllRanges(),mn>ki?(We.addRange(ke),We.extend(we.node,we.offset)):(ke.setEnd(we.node,we.offset),We.addRange(ke))}}}}for(pt=[],We=se;We=We.parentNode;)We.nodeType===1&&pt.push({element:We,left:We.scrollLeft,top:We.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<pt.length;se++){var ct=pt[se];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}cm=!!C7,N7=C7=null}finally{Li=N,J.p=b,W.T=_}}l.current=h,Ds=2}}function iT(){if(Ds===2){Ds=0;var l=a1,h=uf,_=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||_){_=W.T,W.T=null;var b=J.p;J.p=2;var N=Li;Li|=4;try{LS(l,h.alternate,h)}finally{Li=N,J.p=b,W.T=_}}Ds=3}}function rT(){if(Ds===4||Ds===3){Ds=0,ut();var l=a1,h=uf,_=cf,b=jS;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Ds=5:(Ds=0,uf=a1=null,sT(l,l.pendingLanes));var N=l.pendingLanes;if(N===0&&(s1=null),yr(_),h=h.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Qe,h,void 0,(h.current.flags&128)===128)}catch{}if(b!==null){h=W.T,N=J.p,J.p=2,W.T=null;try{for(var L=l.onRecoverableError,X=0;X<b.length;X++){var se=b[X];L(se.value,{componentStack:se.stack})}}finally{W.T=h,J.p=N}}(cf&3)!==0&&Z4(),Xl(l),N=l.pendingLanes,(_&4194090)!==0&&(N&42)!==0?l===m7?p2++:(p2=0,m7=l):p2=0,m2(0)}}function sT(l,h){(l.pooledCacheLanes&=h)===0&&(h=l.pooledCache,h!=null&&(l.pooledCache=null,Qc(h)))}function Z4(l){return nT(),iT(),rT(),aT()}function aT(){if(Ds!==5)return!1;var l=a1,h=A7;A7=0;var _=yr(cf),b=W.T,N=J.p;try{J.p=32>_?32:_,W.T=null,_=p7,p7=null;var L=a1,X=cf;if(Ds=0,uf=a1=null,cf=0,(Li&6)!==0)throw Error(n(331));var se=Li;if(Li|=4,VS(L.current),kS(L,L.current,X,_),Li=se,m2(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Qe,L)}catch{}return!0}finally{J.p=N,W.T=b,sT(l,h)}}function oT(l,h,_){h=_a(_,h),h=X9(l.stateNode,h,2),l=B(l,h,2),l!==null&&(dt(l,2),Xl(l))}function $i(l,h,_){if(l.tag===3)oT(l,l,_);else for(;h!==null;){if(h.tag===3){oT(h,l,_);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(s1===null||!s1.has(b))){l=_a(_,l),_=hS(2),b=B(h,_,2),b!==null&&(fS(_,b,h,l),dt(b,2),Xl(b));break}}h=h.return}}function y7(l,h,_){var b=l.pingCache;if(b===null){b=l.pingCache=new DF;var N=new Set;b.set(h,N)}else N=b.get(h),N===void 0&&(N=new Set,b.set(h,N));N.has(_)||(c7=!0,N.add(_),l=IF.bind(null,l,h,_),h.then(l,l))}function IF(l,h,_){var b=l.pingCache;b!==null&&b.delete(h),l.pingedLanes|=l.suspendedLanes&_,l.warmLanes&=~_,Ji===l&&(pi&_)===_&&(Rr===4||Rr===3&&(pi&62914560)===pi&&300>st()-d7?(Li&2)===0&&hf(l,0):h7|=_,lf===pi&&(lf=0)),Xl(l)}function lT(l,h){h===0&&(h=It()),l=jc(l,h),l!==null&&(dt(l,h),Xl(l))}function FF(l){var h=l.memoizedState,_=0;h!==null&&(_=h.retryLane),lT(l,_)}function kF(l,h){var _=0;switch(l.tag){case 13:var b=l.stateNode,N=l.memoizedState;N!==null&&(_=N.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(n(314))}b!==null&&b.delete(h),lT(l,_)}function zF(l,h){return _n(l,h)}var J4=null,df=null,x7=!1,em=!1,q7=!1,b0=0;function Xl(l){l!==df&&l.next===null&&(df===null?J4=df=l:df=df.next=l),em=!0,x7||(x7=!0,VF())}function m2(l,h){if(!q7&&em){q7=!0;do for(var _=!1,b=J4;b!==null;){if(l!==0){var N=b.pendingLanes;if(N===0)var L=0;else{var X=b.suspendedLanes,se=b.pingedLanes;L=(1<<31-Nt(42|l)+1)-1,L&=N&~(X&~se),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(_=!0,fT(b,L))}else L=pi,L=kn(b,b===Ji?L:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(L&3)===0||qn(b,L)||(_=!0,fT(b,L));b=b.next}while(_);q7=!1}}function GF(){uT()}function uT(){em=x7=!1;var l=0;b0!==0&&(KF()&&(l=b0),b0=0);for(var h=st(),_=null,b=J4;b!==null;){var N=b.next,L=cT(b,h);L===0?(b.next=null,_===null?J4=N:_.next=N,N===null&&(df=_)):(_=b,(l!==0||(L&3)!==0)&&(em=!0)),b=N}m2(l)}function cT(l,h){for(var _=l.suspendedLanes,b=l.pingedLanes,N=l.expirationTimes,L=l.pendingLanes&-62914561;0<L;){var X=31-Nt(L),se=1<<X,_e=N[X];_e===-1?((se&_)===0||(se&b)!==0)&&(N[X]=Ei(se,h)):_e<=h&&(l.expiredLanes|=se),L&=~se}if(h=Ji,_=pi,_=kn(l,l===h?_:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,_===0||l===h&&(Ui===2||Ui===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&ye(b),l.callbackNode=null,l.callbackPriority=0;if((_&3)===0||qn(l,_)){if(h=_&-_,h===l.callbackPriority)return h;switch(b!==null&&ye(b),yr(_)){case 2:case 8:_=at;break;case 32:_=ce;break;case 268435456:_=Ne;break;default:_=ce}return b=hT.bind(null,l),_=_n(_,b),l.callbackPriority=h,l.callbackNode=_,h}return b!==null&&b!==null&&ye(b),l.callbackPriority=2,l.callbackNode=null,2}function hT(l,h){if(Ds!==0&&Ds!==5)return l.callbackNode=null,l.callbackPriority=0,null;var _=l.callbackNode;if(Z4()&&l.callbackNode!==_)return null;var b=pi;return b=kn(l,l===Ji?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:($S(l,b,h),cT(l,st()),l.callbackNode!=null&&l.callbackNode===_?hT.bind(null,l):null)}function fT(l,h){if(Z4())return null;$S(l,h,!0)}function VF(){JF(function(){(Li&6)!==0?_n(Pt,GF):uT()})}function b7(){return b0===0&&(b0=pe()),b0}function dT(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:a0(""+l)}function AT(l,h){var _=h.ownerDocument.createElement("input");return _.name=h.name,_.value=h.value,l.id&&_.setAttribute("form",l.id),h.parentNode.insertBefore(_,h),l=new FormData(l),_.parentNode.removeChild(_),l}function HF(l,h,_,b,N){if(h==="submit"&&_&&_.stateNode===N){var L=dT((N[Je]||null).action),X=b.submitter;X&&(h=(h=X[Je]||null)?dT(h.formAction):X.getAttribute("formAction"),h!==null&&(L=h,X=null));var se=new Lh("action","action",null,b,N);l.push({event:se,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(b0!==0){var _e=X?AT(N,X):new FormData(N);V9(_,{pending:!0,data:_e,method:N.method,action:L},null,_e)}}else typeof L=="function"&&(se.preventDefault(),_e=X?AT(N,X):new FormData(N),V9(_,{pending:!0,data:_e,method:N.method,action:L},L,_e))},currentTarget:N}]})}}for(var S7=0;S7<Vh.length;S7++){var T7=Vh[S7],jF=T7.toLowerCase(),WF=T7[0].toUpperCase()+T7.slice(1);aa(jF,"on"+WF)}aa(b4,"onAnimationEnd"),aa(S4,"onAnimationIteration"),aa(T4,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(w4,"onTransitionRun"),aa(R9,"onTransitionStart"),aa(C9,"onTransitionCancel"),aa(E4,"onTransitionEnd"),oe("onMouseEnter",["mouseout","mouseover"]),oe("onMouseLeave",["mouseout","mouseover"]),oe("onPointerEnter",["pointerout","pointerover"]),oe("onPointerLeave",["pointerout","pointerover"]),il("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),il("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),il("onBeforeInput",["compositionend","keypress","textInput","paste"]),il("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),il("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),il("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var g2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$F=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(g2));function pT(l,h){h=(h&4)!==0;for(var _=0;_<l.length;_++){var b=l[_],N=b.event;b=b.listeners;e:{var L=void 0;if(h)for(var X=b.length-1;0<=X;X--){var se=b[X],_e=se.instance,Ge=se.currentTarget;if(se=se.listener,_e!==L&&N.isPropagationStopped())break e;L=se,N.currentTarget=Ge;try{L(N)}catch(lt){z4(lt)}N.currentTarget=null,L=_e}else for(X=0;X<b.length;X++){if(se=b[X],_e=se.instance,Ge=se.currentTarget,se=se.listener,_e!==L&&N.isPropagationStopped())break e;L=se,N.currentTarget=Ge;try{L(N)}catch(lt){z4(lt)}N.currentTarget=null,L=_e}}}}function ai(l,h){var _=h[ft];_===void 0&&(_=h[ft]=new Set);var b=l+"__bubble";_.has(b)||(mT(h,l,2,!1),_.add(b))}function w7(l,h,_){var b=0;h&&(b|=4),mT(_,l,b,h)}var tm="_reactListening"+Math.random().toString(36).slice(2);function E7(l){if(!l[tm]){l[tm]=!0,Es.forEach(function(_){_!=="selectionchange"&&($F.has(_)||w7(_,!1,l),w7(_,!0,l))});var h=l.nodeType===9?l:l.ownerDocument;h===null||h[tm]||(h[tm]=!0,w7("selectionchange",!1,h))}}function mT(l,h,_,b){switch(kT(h)){case 2:var N=yk;break;case 8:N=xk;break;default:N=z7}_=N.bind(null,h,_,l),N=void 0,!Ph||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(N=!0),b?N!==void 0?l.addEventListener(h,_,{capture:!0,passive:N}):l.addEventListener(h,_,!0):N!==void 0?l.addEventListener(h,_,{passive:N}):l.addEventListener(h,_,!1)}function M7(l,h,_,b,N){var L=b;if((h&1)===0&&(h&2)===0&&b!==null)e:for(;;){if(b===null)return;var X=b.tag;if(X===3||X===4){var se=b.stateNode.containerInfo;if(se===N)break;if(X===4)for(X=b.return;X!==null;){var _e=X.tag;if((_e===3||_e===4)&&X.stateNode.containerInfo===N)return;X=X.return}for(;se!==null;){if(X=An(se),X===null)return;if(_e=X.tag,_e===5||_e===6||_e===26||_e===27){b=L=X;continue e}se=se.parentNode}}b=b.return}a4(function(){var Ge=L,lt=CA(_),pt=[];e:{var je=Gh.get(l);if(je!==void 0){var We=Lh,bn=l;switch(l){case"keypress":if(h0(_)===0)break e;case"keydown":case"keyup":We=g9;break;case"focusin":bn="focus",We=kc;break;case"focusout":bn="blur",We=kc;break;case"beforeblur":case"afterblur":We=kc;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":We=l4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":We=p9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":We=y9;break;case b4:case S4:case T4:We=c4;break;case E4:We=q9;break;case"scroll":case"scrollend":We=Lu;break;case"wheel":We=Oh;break;case"copy":case"cut":case"paste":We=Uh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":We=p4;break;case"toggle":case"beforetoggle":We=T9}var mn=(h&4)!==0,ki=!mn&&(l==="scroll"||l==="scrollend"),Pe=mn?je!==null?je+"Capture":null:je;mn=[];for(var we=Ge,ke;we!==null;){var ct=we;if(ke=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||ke===null||Pe===null||(ct=l0(we,Pe),ct!=null&&mn.push(_2(we,ct,ke))),ki)break;we=we.return}0<mn.length&&(je=new We(je,bn,null,_,lt),pt.push({event:je,listeners:mn}))}}if((h&7)===0){e:{if(je=l==="mouseover"||l==="pointerover",We=l==="mouseout"||l==="pointerout",je&&_!==RA&&(bn=_.relatedTarget||_.fromElement)&&(An(bn)||bn[Et]))break e;if((We||je)&&(je=lt.window===lt?lt:(je=lt.ownerDocument)?je.defaultView||je.parentWindow:window,We?(bn=_.relatedTarget||_.toElement,We=Ge,bn=bn?An(bn):null,bn!==null&&(ki=s(bn),mn=bn.tag,bn!==ki||mn!==5&&mn!==27&&mn!==6)&&(bn=null)):(We=null,bn=Ge),We!==bn)){if(mn=l4,ct="onMouseLeave",Pe="onMouseEnter",we="mouse",(l==="pointerout"||l==="pointerover")&&(mn=p4,ct="onPointerLeave",Pe="onPointerEnter",we="pointer"),ki=We==null?je:Hs(We),ke=bn==null?je:Hs(bn),je=new mn(ct,we+"leave",We,_,lt),je.target=ki,je.relatedTarget=ke,ct=null,An(lt)===Ge&&(mn=new mn(Pe,we+"enter",bn,_,lt),mn.target=ke,mn.relatedTarget=ki,ct=mn),ki=ct,We&&bn)t:{for(mn=We,Pe=bn,we=0,ke=mn;ke;ke=Af(ke))we++;for(ke=0,ct=Pe;ct;ct=Af(ct))ke++;for(;0<we-ke;)mn=Af(mn),we--;for(;0<ke-we;)Pe=Af(Pe),ke--;for(;we--;){if(mn===Pe||Pe!==null&&mn===Pe.alternate)break t;mn=Af(mn),Pe=Af(Pe)}mn=null}else mn=null;We!==null&&gT(pt,je,We,mn,!1),bn!==null&&ki!==null&&gT(pt,ki,bn,mn,!0)}}e:{if(je=Ge?Hs(Ge):window,We=je.nodeName&&je.nodeName.toLowerCase(),We==="select"||We==="input"&&je.type==="file")var Qt=v4;else if(Ih(je))if(y4)Qt=ga;else{Qt=zA;var ei=E9}else We=je.nodeName,!We||We.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?Ge&&EA(Ge.elementType)&&(Qt=v4):Qt=M9;if(Qt&&(Qt=Qt(l,Ge))){Gc(pt,Qt,_,lt);break e}ei&&ei(l,je,Ge),l==="focusout"&&Ge&&je.type==="number"&&Ge.memoizedProps.value!=null&&Ki(je,"number",je.value)}switch(ei=Ge?Hs(Ge):window,l){case"focusin":(Ih(ei)||ei.contentEditable==="true")&&(Vc=ei,WA=Ge,zu=null);break;case"focusout":zu=WA=Vc=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,zh(pt,_,lt);break;case"selectionchange":if(jA)break;case"keydown":case"keyup":zh(pt,_,lt)}var rn;if(Iu)e:{switch(l){case"compositionstart":var vn="onCompositionStart";break e;case"compositionend":vn="onCompositionEnd";break e;case"compositionupdate":vn="onCompositionUpdate";break e}vn=void 0}else zc?Bh(l,_)&&(vn="onCompositionEnd"):l==="keydown"&&_.keyCode===229&&(vn="onCompositionStart");vn&&(UA&&_.locale!=="ko"&&(zc||vn!=="onCompositionStart"?vn==="onCompositionEnd"&&zc&&(rn=NA()):(Mo=lt,c0="value"in Mo?Mo.value:Mo.textContent,zc=!0)),ei=nm(Ge,vn),0<ei.length&&(vn=new sl(vn,l,null,_,lt),pt.push({event:vn,listeners:ei}),rn?vn.data=rn:(rn=OA(_),rn!==null&&(vn.data=rn)))),(rn=LA?g4(l,_):BA(l,_))&&(vn=nm(Ge,"onBeforeInput"),0<vn.length&&(ei=new sl("onBeforeInput","beforeinput",null,_,lt),pt.push({event:ei,listeners:vn}),ei.data=rn)),HF(pt,l,Ge,_,lt)}pT(pt,h)})}function _2(l,h,_){return{instance:l,listener:h,currentTarget:_}}function nm(l,h){for(var _=h+"Capture",b=[];l!==null;){var N=l,L=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||L===null||(N=l0(l,_),N!=null&&b.unshift(_2(l,N,L)),N=l0(l,h),N!=null&&b.push(_2(l,N,L))),l.tag===3)return b;l=l.return}return[]}function Af(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function gT(l,h,_,b,N){for(var L=h._reactName,X=[];_!==null&&_!==b;){var se=_,_e=se.alternate,Ge=se.stateNode;if(se=se.tag,_e!==null&&_e===b)break;se!==5&&se!==26&&se!==27||Ge===null||(_e=Ge,N?(Ge=l0(_,L),Ge!=null&&X.unshift(_2(_,Ge,_e))):N||(Ge=l0(_,L),Ge!=null&&X.push(_2(_,Ge,_e)))),_=_.return}X.length!==0&&l.push({event:h,listeners:X})}var XF=/\r\n?/g,QF=/\u0000|\uFFFD/g;function _T(l){return(typeof l=="string"?l:""+l).replace(XF,`
`).replace(QF,"")}function vT(l,h){return h=_T(h),_T(l)===h}function im(){}function Fi(l,h,_,b,N,L){switch(_){case"children":typeof b=="string"?h==="body"||h==="textarea"&&b===""||wo(l,b):(typeof b=="number"||typeof b=="bigint")&&h!=="body"&&wo(l,""+b);break;case"className":Rt(l,"class",b);break;case"tabIndex":Rt(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Rt(l,_,b);break;case"style":s4(l,b,L);break;case"data":if(h!=="object"){Rt(l,"data",b);break}case"src":case"href":if(b===""&&(h!=="a"||_!=="href")){l.removeAttribute(_);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(_);break}b=a0(""+b),l.setAttribute(_,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(_==="formAction"?(h!=="input"&&Fi(l,h,"name",N.name,N,null),Fi(l,h,"formEncType",N.formEncType,N,null),Fi(l,h,"formMethod",N.formMethod,N,null),Fi(l,h,"formTarget",N.formTarget,N,null)):(Fi(l,h,"encType",N.encType,N,null),Fi(l,h,"method",N.method,N,null),Fi(l,h,"target",N.target,N,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(_);break}b=a0(""+b),l.setAttribute(_,b);break;case"onClick":b!=null&&(l.onclick=im);break;case"onScroll":b!=null&&ai("scroll",l);break;case"onScrollEnd":b!=null&&ai("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(_=b.__html,_!=null){if(N.children!=null)throw Error(n(60));l.innerHTML=_}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}_=a0(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(_,""+b):l.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(_,""):l.removeAttribute(_);break;case"capture":case"download":b===!0?l.setAttribute(_,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(_,b):l.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(_,b):l.removeAttribute(_);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(_):l.setAttribute(_,b);break;case"popover":ai("beforetoggle",l),ai("toggle",l),bt(l,"popover",b);break;case"xlinkActuate":ot(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":ot(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":ot(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":ot(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":ot(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":ot(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":ot(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":ot(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":ot(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":bt(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=Wi.get(_)||_,bt(l,_,b))}}function R7(l,h,_,b,N,L){switch(_){case"style":s4(l,b,L);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(_=b.__html,_!=null){if(N.children!=null)throw Error(n(60));l.innerHTML=_}}break;case"children":typeof b=="string"?wo(l,b):(typeof b=="number"||typeof b=="bigint")&&wo(l,""+b);break;case"onScroll":b!=null&&ai("scroll",l);break;case"onScrollEnd":b!=null&&ai("scrollend",l);break;case"onClick":b!=null&&(l.onclick=im);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nu.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(N=_.endsWith("Capture"),h=_.slice(2,N?_.length-7:void 0),L=l[Je]||null,L=L!=null?L[_]:null,typeof L=="function"&&l.removeEventListener(h,L,N),typeof b=="function")){typeof L!="function"&&L!==null&&(_ in l?l[_]=null:l.hasAttribute(_)&&l.removeAttribute(_)),l.addEventListener(h,b,N);break e}_ in l?l[_]=b:b===!0?l.setAttribute(_,""):bt(l,_,b)}}}function Ls(l,h,_){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ai("error",l),ai("load",l);var b=!1,N=!1,L;for(L in _)if(_.hasOwnProperty(L)){var X=_[L];if(X!=null)switch(L){case"src":b=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:Fi(l,h,L,X,_,null)}}N&&Fi(l,h,"srcSet",_.srcSet,_,null),b&&Fi(l,h,"src",_.src,_,null);return;case"input":ai("invalid",l);var se=L=X=N=null,_e=null,Ge=null;for(b in _)if(_.hasOwnProperty(b)){var lt=_[b];if(lt!=null)switch(b){case"name":N=lt;break;case"type":X=lt;break;case"checked":_e=lt;break;case"defaultChecked":Ge=lt;break;case"value":L=lt;break;case"defaultValue":se=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(n(137,h));break;default:Fi(l,h,b,lt,_,null)}}Mi(l,L,se,_e,Ge,X,N,!1),fr(l);return;case"select":ai("invalid",l),b=X=L=null;for(N in _)if(_.hasOwnProperty(N)&&(se=_[N],se!=null))switch(N){case"value":L=se;break;case"defaultValue":X=se;break;case"multiple":b=se;default:Fi(l,h,N,se,_,null)}h=L,_=X,l.multiple=!!b,h!=null?Jn(l,!!b,h,!1):_!=null&&Jn(l,!!b,_,!0);return;case"textarea":ai("invalid",l),L=N=b=null;for(X in _)if(_.hasOwnProperty(X)&&(se=_[X],se!=null))switch(X){case"value":b=se;break;case"defaultValue":N=se;break;case"children":L=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(91));break;default:Fi(l,h,X,se,_,null)}Zr(l,b,N,L),fr(l);return;case"option":for(_e in _)if(_.hasOwnProperty(_e)&&(b=_[_e],b!=null))switch(_e){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:Fi(l,h,_e,b,_,null)}return;case"dialog":ai("beforetoggle",l),ai("toggle",l),ai("cancel",l),ai("close",l);break;case"iframe":case"object":ai("load",l);break;case"video":case"audio":for(b=0;b<g2.length;b++)ai(g2[b],l);break;case"image":ai("error",l),ai("load",l);break;case"details":ai("toggle",l);break;case"embed":case"source":case"link":ai("error",l),ai("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ge in _)if(_.hasOwnProperty(Ge)&&(b=_[Ge],b!=null))switch(Ge){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:Fi(l,h,Ge,b,_,null)}return;default:if(EA(h)){for(lt in _)_.hasOwnProperty(lt)&&(b=_[lt],b!==void 0&&R7(l,h,lt,b,_,void 0));return}}for(se in _)_.hasOwnProperty(se)&&(b=_[se],b!=null&&Fi(l,h,se,b,_,null))}function YF(l,h,_,b){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,L=null,X=null,se=null,_e=null,Ge=null,lt=null;for(We in _){var pt=_[We];if(_.hasOwnProperty(We)&&pt!=null)switch(We){case"checked":break;case"value":break;case"defaultValue":_e=pt;default:b.hasOwnProperty(We)||Fi(l,h,We,null,b,pt)}}for(var je in b){var We=b[je];if(pt=_[je],b.hasOwnProperty(je)&&(We!=null||pt!=null))switch(je){case"type":L=We;break;case"name":N=We;break;case"checked":Ge=We;break;case"defaultChecked":lt=We;break;case"value":X=We;break;case"defaultValue":se=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(n(137,h));break;default:We!==pt&&Fi(l,h,je,We,b,pt)}}To(l,X,se,_e,Ge,lt,L,N);return;case"select":We=X=se=je=null;for(L in _)if(_e=_[L],_.hasOwnProperty(L)&&_e!=null)switch(L){case"value":break;case"multiple":We=_e;default:b.hasOwnProperty(L)||Fi(l,h,L,null,b,_e)}for(N in b)if(L=b[N],_e=_[N],b.hasOwnProperty(N)&&(L!=null||_e!=null))switch(N){case"value":je=L;break;case"defaultValue":se=L;break;case"multiple":X=L;default:L!==_e&&Fi(l,h,N,L,b,_e)}h=se,_=X,b=We,je!=null?Jn(l,!!_,je,!1):!!b!=!!_&&(h!=null?Jn(l,!!_,h,!0):Jn(l,!!_,_?[]:"",!1));return;case"textarea":We=je=null;for(se in _)if(N=_[se],_.hasOwnProperty(se)&&N!=null&&!b.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:Fi(l,h,se,null,b,N)}for(X in b)if(N=b[X],L=_[X],b.hasOwnProperty(X)&&(N!=null||L!=null))switch(X){case"value":je=N;break;case"defaultValue":We=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:N!==L&&Fi(l,h,X,N,b,L)}Er(l,je,We);return;case"option":for(var bn in _)if(je=_[bn],_.hasOwnProperty(bn)&&je!=null&&!b.hasOwnProperty(bn))switch(bn){case"selected":l.selected=!1;break;default:Fi(l,h,bn,null,b,je)}for(_e in b)if(je=b[_e],We=_[_e],b.hasOwnProperty(_e)&&je!==We&&(je!=null||We!=null))switch(_e){case"selected":l.selected=je&&typeof je!="function"&&typeof je!="symbol";break;default:Fi(l,h,_e,je,b,We)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mn in _)je=_[mn],_.hasOwnProperty(mn)&&je!=null&&!b.hasOwnProperty(mn)&&Fi(l,h,mn,null,b,je);for(Ge in b)if(je=b[Ge],We=_[Ge],b.hasOwnProperty(Ge)&&je!==We&&(je!=null||We!=null))switch(Ge){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(n(137,h));break;default:Fi(l,h,Ge,je,b,We)}return;default:if(EA(h)){for(var ki in _)je=_[ki],_.hasOwnProperty(ki)&&je!==void 0&&!b.hasOwnProperty(ki)&&R7(l,h,ki,void 0,b,je);for(lt in b)je=b[lt],We=_[lt],!b.hasOwnProperty(lt)||je===We||je===void 0&&We===void 0||R7(l,h,lt,je,b,We);return}}for(var Pe in _)je=_[Pe],_.hasOwnProperty(Pe)&&je!=null&&!b.hasOwnProperty(Pe)&&Fi(l,h,Pe,null,b,je);for(pt in b)je=b[pt],We=_[pt],!b.hasOwnProperty(pt)||je===We||je==null&&We==null||Fi(l,h,pt,je,b,We)}var C7=null,N7=null;function rm(l){return l.nodeType===9?l:l.ownerDocument}function yT(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xT(l,h){if(l===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&h==="foreignObject"?0:l}function P7(l,h){return l==="textarea"||l==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var D7=null;function KF(){var l=window.event;return l&&l.type==="popstate"?l===D7?!1:(D7=l,!0):(D7=null,!1)}var qT=typeof setTimeout=="function"?setTimeout:void 0,ZF=typeof clearTimeout=="function"?clearTimeout:void 0,bT=typeof Promise=="function"?Promise:void 0,JF=typeof queueMicrotask=="function"?queueMicrotask:typeof bT<"u"?function(l){return bT.resolve(null).then(l).catch(ek)}:qT;function ek(l){setTimeout(function(){throw l})}function l1(l){return l==="head"}function ST(l,h){var _=h,b=0,N=0;do{var L=_.nextSibling;if(l.removeChild(_),L&&L.nodeType===8)if(_=L.data,_==="/$"){if(0<b&&8>b){_=b;var X=l.ownerDocument;if(_&1&&v2(X.documentElement),_&2&&v2(X.body),_&4)for(_=X.head,v2(_),X=_.firstChild;X;){var se=X.nextSibling,_e=X.nodeName;X[Yn]||_e==="SCRIPT"||_e==="STYLE"||_e==="LINK"&&X.rel.toLowerCase()==="stylesheet"||_.removeChild(X),X=se}}if(N===0){l.removeChild(L),E2(h);return}N--}else _==="$"||_==="$?"||_==="$!"?N++:b=_.charCodeAt(0)-48;else b=0;_=L}while(_);E2(h)}function L7(l){var h=l.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var _=h;switch(h=h.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":L7(_),ji(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}l.removeChild(_)}}function tk(l,h,_,b){for(;l.nodeType===1;){var N=_;if(l.nodeName.toLowerCase()!==h.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Yn])switch(h){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(L=l.getAttribute("rel"),L==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(L!==N.rel||l.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||l.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||l.getAttribute("title")!==(N.title==null?null:N.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(L=l.getAttribute("src"),(L!==(N.src==null?null:N.src)||l.getAttribute("type")!==(N.type==null?null:N.type)||l.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&L&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(h==="input"&&l.type==="hidden"){var L=N.name==null?null:""+N.name;if(N.type==="hidden"&&l.getAttribute("name")===L)return l}else return l;if(l=Al(l.nextSibling),l===null)break}return null}function nk(l,h,_){if(h==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!_||(l=Al(l.nextSibling),l===null))return null;return l}function U7(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function ik(l,h){var _=l.ownerDocument;if(l.data!=="$?"||_.readyState==="complete")h();else{var b=function(){h(),_.removeEventListener("DOMContentLoaded",b)};_.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function Al(l){for(;l!=null;l=l.nextSibling){var h=l.nodeType;if(h===1||h===3)break;if(h===8){if(h=l.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return l}var O7=null;function TT(l){l=l.previousSibling;for(var h=0;l;){if(l.nodeType===8){var _=l.data;if(_==="$"||_==="$!"||_==="$?"){if(h===0)return l;h--}else _==="/$"&&h++}l=l.previousSibling}return null}function wT(l,h,_){switch(h=rm(_),l){case"html":if(l=h.documentElement,!l)throw Error(n(452));return l;case"head":if(l=h.head,!l)throw Error(n(453));return l;case"body":if(l=h.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function v2(l){for(var h=l.attributes;h.length;)l.removeAttributeNode(h[0]);ji(l)}var Fo=new Map,ET=new Set;function sm(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var rc=J.d;J.d={f:rk,r:sk,D:ak,C:ok,L:lk,m:uk,X:hk,S:ck,M:fk};function rk(){var l=rc.f(),h=Y4();return l||h}function sk(l){var h=In(l);h!==null&&h.tag===5&&h.type==="form"?$b(h):rc.r(l)}var pf=typeof document>"u"?null:document;function MT(l,h,_){var b=pf;if(b&&typeof h=="string"&&h){var N=Di(h);N='link[rel="'+l+'"][href="'+N+'"]',typeof _=="string"&&(N+='[crossorigin="'+_+'"]'),ET.has(N)||(ET.add(N),l={rel:l,crossOrigin:_,href:h},b.querySelector(N)===null&&(h=b.createElement("link"),Ls(h,"link",l),Yt(h),b.head.appendChild(h)))}}function ak(l){rc.D(l),MT("dns-prefetch",l,null)}function ok(l,h){rc.C(l,h),MT("preconnect",l,h)}function lk(l,h,_){rc.L(l,h,_);var b=pf;if(b&&l&&h){var N='link[rel="preload"][as="'+Di(h)+'"]';h==="image"&&_&&_.imageSrcSet?(N+='[imagesrcset="'+Di(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(N+='[imagesizes="'+Di(_.imageSizes)+'"]')):N+='[href="'+Di(l)+'"]';var L=N;switch(h){case"style":L=mf(l);break;case"script":L=gf(l)}Fo.has(L)||(l=p({rel:"preload",href:h==="image"&&_&&_.imageSrcSet?void 0:l,as:h},_),Fo.set(L,l),b.querySelector(N)!==null||h==="style"&&b.querySelector(y2(L))||h==="script"&&b.querySelector(x2(L))||(h=b.createElement("link"),Ls(h,"link",l),Yt(h),b.head.appendChild(h)))}}function uk(l,h){rc.m(l,h);var _=pf;if(_&&l){var b=h&&typeof h.as=="string"?h.as:"script",N='link[rel="modulepreload"][as="'+Di(b)+'"][href="'+Di(l)+'"]',L=N;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=gf(l)}if(!Fo.has(L)&&(l=p({rel:"modulepreload",href:l},h),Fo.set(L,l),_.querySelector(N)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(x2(L)))return}b=_.createElement("link"),Ls(b,"link",l),Yt(b),_.head.appendChild(b)}}}function ck(l,h,_){rc.S(l,h,_);var b=pf;if(b&&l){var N=jn(b).hoistableStyles,L=mf(l);h=h||"default";var X=N.get(L);if(!X){var se={loading:0,preload:null};if(X=b.querySelector(y2(L)))se.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":h},_),(_=Fo.get(L))&&B7(l,_);var _e=X=b.createElement("link");Yt(_e),Ls(_e,"link",l),_e._p=new Promise(function(Ge,lt){_e.onload=Ge,_e.onerror=lt}),_e.addEventListener("load",function(){se.loading|=1}),_e.addEventListener("error",function(){se.loading|=2}),se.loading|=4,am(X,h,b)}X={type:"stylesheet",instance:X,count:1,state:se},N.set(L,X)}}}function hk(l,h){rc.X(l,h);var _=pf;if(_&&l){var b=jn(_).hoistableScripts,N=gf(l),L=b.get(N);L||(L=_.querySelector(x2(N)),L||(l=p({src:l,async:!0},h),(h=Fo.get(N))&&I7(l,h),L=_.createElement("script"),Yt(L),Ls(L,"link",l),_.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},b.set(N,L))}}function fk(l,h){rc.M(l,h);var _=pf;if(_&&l){var b=jn(_).hoistableScripts,N=gf(l),L=b.get(N);L||(L=_.querySelector(x2(N)),L||(l=p({src:l,async:!0,type:"module"},h),(h=Fo.get(N))&&I7(l,h),L=_.createElement("script"),Yt(L),Ls(L,"link",l),_.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},b.set(N,L))}}function RT(l,h,_,b){var N=(N=$e.current)?sm(N):null;if(!N)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(h=mf(_.href),_=jn(N).hoistableStyles,b=_.get(h),b||(b={type:"style",instance:null,count:0,state:null},_.set(h,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){l=mf(_.href);var L=jn(N).hoistableStyles,X=L.get(l);if(X||(N=N.ownerDocument||N,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(l,X),(L=N.querySelector(y2(l)))&&!L._p&&(X.instance=L,X.state.loading=5),Fo.has(l)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},Fo.set(l,_),L||dk(N,l,_,X.state))),h&&b===null)throw Error(n(528,""));return X}if(h&&b!==null)throw Error(n(529,""));return null;case"script":return h=_.async,_=_.src,typeof _=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=gf(_),_=jn(N).hoistableScripts,b=_.get(h),b||(b={type:"script",instance:null,count:0,state:null},_.set(h,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function mf(l){return'href="'+Di(l)+'"'}function y2(l){return'link[rel="stylesheet"]['+l+"]"}function CT(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function dk(l,h,_,b){l.querySelector('link[rel="preload"][as="style"]['+h+"]")?b.loading=1:(h=l.createElement("link"),b.preload=h,h.addEventListener("load",function(){return b.loading|=1}),h.addEventListener("error",function(){return b.loading|=2}),Ls(h,"link",_),Yt(h),l.head.appendChild(h))}function gf(l){return'[src="'+Di(l)+'"]'}function x2(l){return"script[async]"+l}function NT(l,h,_){if(h.count++,h.instance===null)switch(h.type){case"style":var b=l.querySelector('style[data-href~="'+Di(_.href)+'"]');if(b)return h.instance=b,Yt(b),b;var N=p({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Yt(b),Ls(b,"style",N),am(b,_.precedence,l),h.instance=b;case"stylesheet":N=mf(_.href);var L=l.querySelector(y2(N));if(L)return h.state.loading|=4,h.instance=L,Yt(L),L;b=CT(_),(N=Fo.get(N))&&B7(b,N),L=(l.ownerDocument||l).createElement("link"),Yt(L);var X=L;return X._p=new Promise(function(se,_e){X.onload=se,X.onerror=_e}),Ls(L,"link",b),h.state.loading|=4,am(L,_.precedence,l),h.instance=L;case"script":return L=gf(_.src),(N=l.querySelector(x2(L)))?(h.instance=N,Yt(N),N):(b=_,(N=Fo.get(L))&&(b=p({},_),I7(b,N)),l=l.ownerDocument||l,N=l.createElement("script"),Yt(N),Ls(N,"link",b),l.head.appendChild(N),h.instance=N);case"void":return null;default:throw Error(n(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(b=h.instance,h.state.loading|=4,am(b,_.precedence,l));return h.instance}function am(l,h,_){for(var b=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=b.length?b[b.length-1]:null,L=N,X=0;X<b.length;X++){var se=b[X];if(se.dataset.precedence===h)L=se;else if(L!==N)break}L?L.parentNode.insertBefore(l,L.nextSibling):(h=_.nodeType===9?_.head:_,h.insertBefore(l,h.firstChild))}function B7(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.title==null&&(l.title=h.title)}function I7(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.integrity==null&&(l.integrity=h.integrity)}var om=null;function PT(l,h,_){if(om===null){var b=new Map,N=om=new Map;N.set(_,b)}else N=om,b=N.get(_),b||(b=new Map,N.set(_,b));if(b.has(l))return b;for(b.set(l,null),_=_.getElementsByTagName(l),N=0;N<_.length;N++){var L=_[N];if(!(L[Yn]||L[Ie]||l==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var X=L.getAttribute(h)||"";X=l+X;var se=b.get(X);se?se.push(L):b.set(X,[L])}}return b}function DT(l,h,_){l=l.ownerDocument||l,l.head.insertBefore(_,h==="title"?l.querySelector("head > title"):null)}function Ak(l,h,_){if(_===1||h.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return l=h.disabled,typeof h.precedence=="string"&&l==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function LT(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var q2=null;function pk(){}function mk(l,h,_){if(q2===null)throw Error(n(475));var b=q2;if(h.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var N=mf(_.href),L=l.querySelector(y2(N));if(L){l=L._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(b.count++,b=lm.bind(b),l.then(b,b)),h.state.loading|=4,h.instance=L,Yt(L);return}L=l.ownerDocument||l,_=CT(_),(N=Fo.get(N))&&B7(_,N),L=L.createElement("link"),Yt(L);var X=L;X._p=new Promise(function(se,_e){X.onload=se,X.onerror=_e}),Ls(L,"link",_),h.instance=L}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(b.count++,h=lm.bind(b),l.addEventListener("load",h),l.addEventListener("error",h))}}function gk(){if(q2===null)throw Error(n(475));var l=q2;return l.stylesheets&&l.count===0&&F7(l,l.stylesheets),0<l.count?function(h){var _=setTimeout(function(){if(l.stylesheets&&F7(l,l.stylesheets),l.unsuspend){var b=l.unsuspend;l.unsuspend=null,b()}},6e4);return l.unsuspend=h,function(){l.unsuspend=null,clearTimeout(_)}}:null}function lm(){if(this.count--,this.count===0){if(this.stylesheets)F7(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var um=null;function F7(l,h){l.stylesheets=null,l.unsuspend!==null&&(l.count++,um=new Map,h.forEach(_k,l),um=null,lm.call(l))}function _k(l,h){if(!(h.state.loading&4)){var _=um.get(l);if(_)var b=_.get(null);else{_=new Map,um.set(l,_);for(var N=l.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<N.length;L++){var X=N[L];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(_.set(X.dataset.precedence,X),b=X)}b&&_.set(null,b)}N=h.instance,X=N.getAttribute("data-precedence"),L=_.get(X)||b,L===b&&_.set(null,N),_.set(X,N),this.count++,b=lm.bind(this),N.addEventListener("load",b),N.addEventListener("error",b),L?L.parentNode.insertBefore(N,L.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(N,l.firstChild)),h.state.loading|=4}}var b2={$$typeof:P,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function vk(l,h,_,b,N,L,X,se){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ye(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ye(0),this.hiddenUpdates=Ye(null),this.identifierPrefix=b,this.onUncaughtError=N,this.onCaughtError=L,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function UT(l,h,_,b,N,L,X,se,_e,Ge,lt,pt){return l=new vk(l,h,_,X,se,_e,Ge,pt),h=1,L===!0&&(h|=24),L=oa(3,null,null,h),l.current=L,L.stateNode=l,h=Ir(),h.refCount++,l.pooledCache=h,h.refCount++,L.memoizedState={element:b,isDehydrated:_,cache:h},w(L),l}function OT(l){return l?(l=Gu,l):Gu}function BT(l,h,_,b,N,L){N=OT(N),b.context===null?b.context=N:b.pendingContext=N,b=D(h),b.payload={element:_},L=L===void 0?null:L,L!==null&&(b.callback=L),_=B(l,b,h),_!==null&&(ro(_,l,h),V(_,l,h))}function IT(l,h){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var _=l.retryLane;l.retryLane=_!==0&&_<h?_:h}}function k7(l,h){IT(l,h),(l=l.alternate)&&IT(l,h)}function FT(l){if(l.tag===13){var h=jc(l,67108864);h!==null&&ro(h,l,67108864),k7(l,67108864)}}var cm=!0;function yk(l,h,_,b){var N=W.T;W.T=null;var L=J.p;try{J.p=2,z7(l,h,_,b)}finally{J.p=L,W.T=N}}function xk(l,h,_,b){var N=W.T;W.T=null;var L=J.p;try{J.p=8,z7(l,h,_,b)}finally{J.p=L,W.T=N}}function z7(l,h,_,b){if(cm){var N=G7(b);if(N===null)M7(l,h,b,hm,_),zT(l,b);else if(bk(N,l,h,_,b))b.stopPropagation();else if(zT(l,b),h&4&&-1<qk.indexOf(l)){for(;N!==null;){var L=In(N);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var X=Bt(L.pendingLanes);if(X!==0){var se=L;for(se.pendingLanes|=2,se.entangledLanes|=2;X;){var _e=1<<31-Nt(X);se.entanglements[1]|=_e,X&=~_e}Xl(L),(Li&6)===0&&(X4=st()+500,m2(0))}}break;case 13:se=jc(L,2),se!==null&&ro(se,L,2),Y4(),k7(L,2)}if(L=G7(b),L===null&&M7(l,h,b,hm,_),L===N)break;N=L}N!==null&&b.stopPropagation()}else M7(l,h,b,null,_)}}function G7(l){return l=CA(l),V7(l)}var hm=null;function V7(l){if(hm=null,l=An(l),l!==null){var h=s(l);if(h===null)l=null;else{var _=h.tag;if(_===13){if(l=a(h),l!==null)return l;l=null}else if(_===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;l=null}else h!==l&&(l=null)}}return hm=l,null}function kT(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case Pt:return 2;case at:return 8;case ce:case ee:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var H7=!1,u1=null,c1=null,h1=null,S2=new Map,T2=new Map,f1=[],qk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zT(l,h){switch(l){case"focusin":case"focusout":u1=null;break;case"dragenter":case"dragleave":c1=null;break;case"mouseover":case"mouseout":h1=null;break;case"pointerover":case"pointerout":S2.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":T2.delete(h.pointerId)}}function w2(l,h,_,b,N,L){return l===null||l.nativeEvent!==L?(l={blockedOn:h,domEventName:_,eventSystemFlags:b,nativeEvent:L,targetContainers:[N]},h!==null&&(h=In(h),h!==null&&FT(h)),l):(l.eventSystemFlags|=b,h=l.targetContainers,N!==null&&h.indexOf(N)===-1&&h.push(N),l)}function bk(l,h,_,b,N){switch(h){case"focusin":return u1=w2(u1,l,h,_,b,N),!0;case"dragenter":return c1=w2(c1,l,h,_,b,N),!0;case"mouseover":return h1=w2(h1,l,h,_,b,N),!0;case"pointerover":var L=N.pointerId;return S2.set(L,w2(S2.get(L)||null,l,h,_,b,N)),!0;case"gotpointercapture":return L=N.pointerId,T2.set(L,w2(T2.get(L)||null,l,h,_,b,N)),!0}return!1}function GT(l){var h=An(l.target);if(h!==null){var _=s(h);if(_!==null){if(h=_.tag,h===13){if(h=a(_),h!==null){l.blockedOn=h,ws(l.priority,function(){if(_.tag===13){var b=io();b=Pi(b);var N=jc(_,b);N!==null&&ro(N,_,b),k7(_,b)}});return}}else if(h===3&&_.stateNode.current.memoizedState.isDehydrated){l.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}l.blockedOn=null}function fm(l){if(l.blockedOn!==null)return!1;for(var h=l.targetContainers;0<h.length;){var _=G7(l.nativeEvent);if(_===null){_=l.nativeEvent;var b=new _.constructor(_.type,_);RA=b,_.target.dispatchEvent(b),RA=null}else return h=In(_),h!==null&&FT(h),l.blockedOn=_,!1;h.shift()}return!0}function VT(l,h,_){fm(l)&&_.delete(h)}function Sk(){H7=!1,u1!==null&&fm(u1)&&(u1=null),c1!==null&&fm(c1)&&(c1=null),h1!==null&&fm(h1)&&(h1=null),S2.forEach(VT),T2.forEach(VT)}function dm(l,h){l.blockedOn===h&&(l.blockedOn=null,H7||(H7=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Sk)))}var Am=null;function HT(l){Am!==l&&(Am=l,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Am===l&&(Am=null);for(var h=0;h<l.length;h+=3){var _=l[h],b=l[h+1],N=l[h+2];if(typeof b!="function"){if(V7(b||_)===null)continue;break}var L=In(_);L!==null&&(l.splice(h,3),h-=3,V9(L,{pending:!0,data:N,method:_.method,action:b},b,N))}}))}function E2(l){function h(_e){return dm(_e,l)}u1!==null&&dm(u1,l),c1!==null&&dm(c1,l),h1!==null&&dm(h1,l),S2.forEach(h),T2.forEach(h);for(var _=0;_<f1.length;_++){var b=f1[_];b.blockedOn===l&&(b.blockedOn=null)}for(;0<f1.length&&(_=f1[0],_.blockedOn===null);)GT(_),_.blockedOn===null&&f1.shift();if(_=(l.ownerDocument||l).$$reactFormReplay,_!=null)for(b=0;b<_.length;b+=3){var N=_[b],L=_[b+1],X=N[Je]||null;if(typeof L=="function")X||HT(_);else if(X){var se=null;if(L&&L.hasAttribute("formAction")){if(N=L,X=L[Je]||null)se=X.formAction;else if(V7(N)!==null)continue}else se=X.action;typeof se=="function"?_[b+1]=se:(_.splice(b,3),b-=3),HT(_)}}}function j7(l){this._internalRoot=l}pm.prototype.render=j7.prototype.render=function(l){var h=this._internalRoot;if(h===null)throw Error(n(409));var _=h.current,b=io();BT(_,b,l,h,null,null)},pm.prototype.unmount=j7.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var h=l.containerInfo;BT(l.current,2,null,l,null,null),Y4(),h[Et]=null}};function pm(l){this._internalRoot=l}pm.prototype.unstable_scheduleHydration=function(l){if(l){var h=ii();l={blockedOn:null,target:l,priority:h};for(var _=0;_<f1.length&&h!==0&&h<f1[_].priority;_++);f1.splice(_,0,l),_===0&&GT(l)}};var jT=e.version;if(jT!=="19.1.0")throw Error(n(527,jT,"19.1.0"));J.findDOMNode=function(l){var h=l._reactInternals;if(h===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=u(h),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var Tk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mm.isDisabled&&mm.supportsFiber)try{Qe=mm.inject(Tk),Ut=mm}catch{}}return R2.createRoot=function(l,h){if(!r(l))throw Error(n(299));var _=!1,b="",N=oS,L=lS,X=uS,se=null;return h!=null&&(h.unstable_strictMode===!0&&(_=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(N=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(X=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(se=h.unstable_transitionCallbacks)),h=UT(l,1,!1,null,null,_,b,N,L,X,se,null),l[Et]=h.current,E7(l),new j7(h)},R2.hydrateRoot=function(l,h,_){if(!r(l))throw Error(n(299));var b=!1,N="",L=oS,X=lS,se=uS,_e=null,Ge=null;return _!=null&&(_.unstable_strictMode===!0&&(b=!0),_.identifierPrefix!==void 0&&(N=_.identifierPrefix),_.onUncaughtError!==void 0&&(L=_.onUncaughtError),_.onCaughtError!==void 0&&(X=_.onCaughtError),_.onRecoverableError!==void 0&&(se=_.onRecoverableError),_.unstable_transitionCallbacks!==void 0&&(_e=_.unstable_transitionCallbacks),_.formState!==void 0&&(Ge=_.formState)),h=UT(l,1,!0,h,_??null,b,N,L,X,se,_e,Ge),h.context=OT(null),_=h.current,b=io(),b=Pi(b),N=D(b),N.callback=null,B(_,N,b),_=b,h.current.lanes=_,dt(h,_),Xl(h),l[Et]=h.current,E7(l),new pm(h)},R2.version="19.1.0",R2}var tw;function Ok(){if(tw)return X7.exports;tw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),X7.exports=Uk(),X7.exports}var Bk=Ok();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const pA="175",Xo={ROTATE:0,DOLLY:1,PAN:2},od={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tN=0,X_=1,nN=2,Ik=0,Ly=1,Fk=2,ho=3,Ia=0,Oi=1,Qr=2,Fa=0,ka=1,Cd=2,Nd=3,Pd=4,_d=5,Zs=100,Uy=101,Oy=102,iN=103,rN=104,dc=200,By=201,Iy=202,Fy=203,Up=204,Op=205,ky=206,zy=207,Gy=208,Vy=209,Hy=210,kk=211,zk=212,Gk=213,Vk=214,Bp=0,Ip=1,Fp=2,j1=3,kp=4,zp=5,Gp=6,Vp=7,M3=0,sN=1,aN=2,za=0,oN=1,lN=2,uN=3,cN=4,Hk=5,hN=6,fN=7,jy=300,Yo=301,Ko=302,W1=303,$1=304,dh=306,Ah=1e3,au=1001,ph=1002,nr=1003,Wy=1004,yc=1005,rs=1006,vd=1007,Na=1008,jk=1008,Ur=1009,ih=1010,rh=1011,Ml=1012,qs=1013,Qi=1014,kr=1015,Ss=1016,m5=1017,g5=1018,vo=1020,_5=35902,$y=1021,R3=1022,Or=1023,Xy=1024,Qy=1025,yo=1026,xo=1027,C3=1028,mA=1029,mh=1030,gA=1031,Wk=1032,_A=1033,sh=33776,F1=33777,k1=33778,z1=33779,Hp=35840,jp=35841,Wp=35842,$p=35843,Xp=36196,Dd=37492,Ld=37496,Ud=37808,Od=37809,Bd=37810,Id=37811,Fd=37812,kd=37813,zd=37814,Gd=37815,Vd=37816,Hd=37817,jd=37818,Wd=37819,$d=37820,Xd=37821,ah=36492,Q_=36494,Y_=36495,Yy=36283,Qp=36284,Yp=36285,Kp=36286,$k=0,Xk=1,nw=2,Qk=3200,Yk=3201,wc=0,dN=1,_o="",nn="srgb",Pl="srgb-linear",h8="linear",Ri="srgb",Kk=0,k0=7680,Zk=7681,Jk=7682,ez=7683,tz=34055,nz=34056,iz=5386,rz=512,sz=513,az=514,oz=515,lz=516,uz=517,cz=518,K_=519,Ky=512,v5=513,Zy=514,y5=515,Jy=516,ex=517,tx=518,nx=519,f8=35044,ld=35048,iw="300 es",Pa=2e3,mu=2001;class Eu{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const Xs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let rw=1234567;const gp=Math.PI/180,gh=180/Math.PI;function cu(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Xs[i&255]+Xs[i>>8&255]+Xs[i>>16&255]+Xs[i>>24&255]+"-"+Xs[e&255]+Xs[e>>8&255]+"-"+Xs[e>>16&15|64]+Xs[e>>24&255]+"-"+Xs[t&63|128]+Xs[t>>8&255]+"-"+Xs[t>>16&255]+Xs[t>>24&255]+Xs[n&255]+Xs[n>>8&255]+Xs[n>>16&255]+Xs[n>>24&255]).toLowerCase()}function zn(i,e,t){return Math.max(e,Math.min(t,i))}function ix(i,e){return(i%e+e)%e}function hz(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function fz(i,e,t){return i!==e?(t-i)/(e-i):0}function _p(i,e,t){return(1-t)*i+t*e}function dz(i,e,t,n){return _p(i,e,1-Math.exp(-t*n))}function Az(i,e=1){return e-Math.abs(ix(i,e*2)-e)}function pz(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function mz(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function gz(i,e){return i+Math.floor(Math.random()*(e-i+1))}function _z(i,e){return i+Math.random()*(e-i)}function vz(i){return i*(.5-Math.random())}function yz(i){i!==void 0&&(rw=i);let e=rw+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function xz(i){return i*gp}function qz(i){return i*gh}function bz(i){return(i&i-1)===0&&i!==0}function Sz(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Tz(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function wz(i,e,t,n,r){const s=Math.cos,a=Math.sin,o=s(t/2),u=a(t/2),c=s((e+n)/2),p=a((e+n)/2),g=s((e-n)/2),y=a((e-n)/2),q=s((n-e)/2),S=a((n-e)/2);switch(r){case"XYX":i.set(o*p,u*g,u*y,o*c);break;case"YZY":i.set(u*y,o*p,u*g,o*c);break;case"ZXZ":i.set(u*g,u*y,o*p,o*c);break;case"XZX":i.set(o*p,u*S,u*q,o*c);break;case"YXY":i.set(u*q,o*p,u*S,o*c);break;case"ZYZ":i.set(u*S,u*q,o*p,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function pa(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Vn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const Qd={DEG2RAD:gp,RAD2DEG:gh,generateUUID:cu,clamp:zn,euclideanModulo:ix,mapLinear:hz,inverseLerp:fz,lerp:_p,damp:dz,pingpong:Az,smoothstep:pz,smootherstep:mz,randInt:gz,randFloat:_z,randFloatSpread:vz,seededRandom:yz,degToRad:xz,radToDeg:qz,isPowerOfTwo:bz,ceilPowerOfTwo:Sz,floorPowerOfTwo:Tz,setQuaternionFromProperEuler:wz,normalize:Vn,denormalize:pa};class rt{constructor(e=0,t=0){rt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=zn(this.x,e.x,t.x),this.y=zn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=zn(this.x,e,t),this.y=zn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(zn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(zn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Cn{constructor(e,t,n,r,s,a,o,u,c){Cn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,u,c)}set(e,t,n,r,s,a,o,u,c){const p=this.elements;return p[0]=e,p[1]=r,p[2]=o,p[3]=t,p[4]=s,p[5]=u,p[6]=n,p[7]=a,p[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[3],u=n[6],c=n[1],p=n[4],g=n[7],y=n[2],q=n[5],S=n[8],R=r[0],M=r[3],E=r[6],U=r[1],P=r[4],O=r[7],F=r[2],I=r[5],z=r[8];return s[0]=a*R+o*U+u*F,s[3]=a*M+o*P+u*I,s[6]=a*E+o*O+u*z,s[1]=c*R+p*U+g*F,s[4]=c*M+p*P+g*I,s[7]=c*E+p*O+g*z,s[2]=y*R+q*U+S*F,s[5]=y*M+q*P+S*I,s[8]=y*E+q*O+S*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],u=e[6],c=e[7],p=e[8];return t*a*p-t*o*c-n*s*p+n*o*u+r*s*c-r*a*u}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],u=e[6],c=e[7],p=e[8],g=p*a-o*c,y=o*u-p*s,q=c*s-a*u,S=t*g+n*y+r*q;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const R=1/S;return e[0]=g*R,e[1]=(r*c-p*n)*R,e[2]=(o*n-r*a)*R,e[3]=y*R,e[4]=(p*t-r*u)*R,e[5]=(r*s-o*t)*R,e[6]=q*R,e[7]=(n*u-c*t)*R,e[8]=(a*t-n*s)*R,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,o){const u=Math.cos(s),c=Math.sin(s);return this.set(n*u,n*c,-n*(u*a+c*o)+a+e,-r*c,r*u,-r*(-c*a+u*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Z7.makeScale(e,t)),this}rotate(e){return this.premultiply(Z7.makeRotation(-e)),this}translate(e,t){return this.premultiply(Z7.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Z7=new Cn;function rx(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function Zp(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function AN(){const i=Zp("canvas");return i.style.display="block",i}const sw={};function Dl(i){i in sw||(sw[i]=!0,console.warn(i))}function Ez(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function Mz(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Rz(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const aw=new Cn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ow=new Cn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Cz(){const i={enabled:!0,workingColorSpace:Pl,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Ri&&(r.r=xc(r.r),r.g=xc(r.g),r.b=xc(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Ri&&(r.r=yd(r.r),r.g=yd(r.g),r.b=yd(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===_o?h8:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Pl]:{primaries:e,whitePoint:n,transfer:h8,toXYZ:aw,fromXYZ:ow,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:nn},outputColorSpaceConfig:{drawingBufferColorSpace:nn}},[nn]:{primaries:e,whitePoint:n,transfer:Ri,toXYZ:aw,fromXYZ:ow,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:nn}}}),i}const Hn=Cz();function xc(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function yd(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let _f;class Nz{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{_f===void 0&&(_f=Zp("canvas")),_f.width=e.width,_f.height=e.height;const r=_f.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=_f}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Zp("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=xc(s[a]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(xc(t[n]/255)*255):t[n]=xc(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Pz=0;class sx{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Pz++}),this.uuid=cu(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(J7(r[a].image)):s.push(J7(r[a]))}else s=J7(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function J7(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?Nz.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Dz=0;class ss extends Eu{constructor(e=ss.DEFAULT_IMAGE,t=ss.DEFAULT_MAPPING,n=au,r=au,s=rs,a=Na,o=Or,u=Ur,c=ss.DEFAULT_ANISOTROPY,p=_o){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Dz++}),this.uuid=cu(),this.name="",this.source=new sx(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=u,this.offset=new rt(0,0),this.repeat=new rt(1,1),this.center=new rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Cn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ah:e.x=e.x-Math.floor(e.x);break;case au:e.x=e.x<0?0:1;break;case ph:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ah:e.y=e.y-Math.floor(e.y);break;case au:e.y=e.y<0?0:1;break;case ph:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ss.DEFAULT_IMAGE=null;ss.DEFAULT_MAPPING=jy;ss.DEFAULT_ANISOTROPY=1;class sn{constructor(e=0,t=0,n=0,r=1){sn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const u=e.elements,c=u[0],p=u[4],g=u[8],y=u[1],q=u[5],S=u[9],R=u[2],M=u[6],E=u[10];if(Math.abs(p-y)<.01&&Math.abs(g-R)<.01&&Math.abs(S-M)<.01){if(Math.abs(p+y)<.1&&Math.abs(g+R)<.1&&Math.abs(S+M)<.1&&Math.abs(c+q+E-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(c+1)/2,O=(q+1)/2,F=(E+1)/2,I=(p+y)/4,z=(g+R)/4,j=(S+M)/4;return P>O&&P>F?P<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(P),r=I/n,s=z/n):O>F?O<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(O),n=I/r,s=j/r):F<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(F),n=z/s,r=j/s),this.set(n,r,s,t),this}let U=Math.sqrt((M-S)*(M-S)+(g-R)*(g-R)+(y-p)*(y-p));return Math.abs(U)<.001&&(U=1),this.x=(M-S)/U,this.y=(g-R)/U,this.z=(y-p)/U,this.w=Math.acos((c+q+E-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=zn(this.x,e.x,t.x),this.y=zn(this.y,e.y,t.y),this.z=zn(this.z,e.z,t.z),this.w=zn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=zn(this.x,e,t),this.y=zn(this.y,e,t),this.z=zn(this.z,e,t),this.w=zn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(zn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Lc extends Eu{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:rs,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new ss(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new sx(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class X1 extends Lc{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class ax extends ss{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=nr,this.minFilter=nr,this.wrapR=au,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Lz extends ss{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=nr,this.minFilter=nr,this.wrapR=au,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ul{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,o){let u=n[r+0],c=n[r+1],p=n[r+2],g=n[r+3];const y=s[a+0],q=s[a+1],S=s[a+2],R=s[a+3];if(o===0){e[t+0]=u,e[t+1]=c,e[t+2]=p,e[t+3]=g;return}if(o===1){e[t+0]=y,e[t+1]=q,e[t+2]=S,e[t+3]=R;return}if(g!==R||u!==y||c!==q||p!==S){let M=1-o;const E=u*y+c*q+p*S+g*R,U=E>=0?1:-1,P=1-E*E;if(P>Number.EPSILON){const F=Math.sqrt(P),I=Math.atan2(F,E*U);M=Math.sin(M*I)/F,o=Math.sin(o*I)/F}const O=o*U;if(u=u*M+y*O,c=c*M+q*O,p=p*M+S*O,g=g*M+R*O,M===1-o){const F=1/Math.sqrt(u*u+c*c+p*p+g*g);u*=F,c*=F,p*=F,g*=F}}e[t]=u,e[t+1]=c,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,r,s,a){const o=n[r],u=n[r+1],c=n[r+2],p=n[r+3],g=s[a],y=s[a+1],q=s[a+2],S=s[a+3];return e[t]=o*S+p*g+u*q-c*y,e[t+1]=u*S+p*y+c*g-o*q,e[t+2]=c*S+p*q+o*y-u*g,e[t+3]=p*S-o*g-u*y-c*q,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,u=Math.sin,c=o(n/2),p=o(r/2),g=o(s/2),y=u(n/2),q=u(r/2),S=u(s/2);switch(a){case"XYZ":this._x=y*p*g+c*q*S,this._y=c*q*g-y*p*S,this._z=c*p*S+y*q*g,this._w=c*p*g-y*q*S;break;case"YXZ":this._x=y*p*g+c*q*S,this._y=c*q*g-y*p*S,this._z=c*p*S-y*q*g,this._w=c*p*g+y*q*S;break;case"ZXY":this._x=y*p*g-c*q*S,this._y=c*q*g+y*p*S,this._z=c*p*S+y*q*g,this._w=c*p*g-y*q*S;break;case"ZYX":this._x=y*p*g-c*q*S,this._y=c*q*g+y*p*S,this._z=c*p*S-y*q*g,this._w=c*p*g+y*q*S;break;case"YZX":this._x=y*p*g+c*q*S,this._y=c*q*g+y*p*S,this._z=c*p*S-y*q*g,this._w=c*p*g-y*q*S;break;case"XZY":this._x=y*p*g-c*q*S,this._y=c*q*g-y*p*S,this._z=c*p*S+y*q*g,this._w=c*p*g+y*q*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],o=t[5],u=t[9],c=t[2],p=t[6],g=t[10],y=n+o+g;if(y>0){const q=.5/Math.sqrt(y+1);this._w=.25/q,this._x=(p-u)*q,this._y=(s-c)*q,this._z=(a-r)*q}else if(n>o&&n>g){const q=2*Math.sqrt(1+n-o-g);this._w=(p-u)/q,this._x=.25*q,this._y=(r+a)/q,this._z=(s+c)/q}else if(o>g){const q=2*Math.sqrt(1+o-n-g);this._w=(s-c)/q,this._x=(r+a)/q,this._y=.25*q,this._z=(u+p)/q}else{const q=2*Math.sqrt(1+g-n-o);this._w=(a-r)/q,this._x=(s+c)/q,this._y=(u+p)/q,this._z=.25*q}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(zn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,a=e._w,o=t._x,u=t._y,c=t._z,p=t._w;return this._x=n*p+a*o+r*c-s*u,this._y=r*p+a*u+s*o-n*c,this._z=s*p+a*c+n*u-r*o,this._w=a*p-n*o-r*u-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;const u=1-o*o;if(u<=Number.EPSILON){const q=1-t;return this._w=q*a+t*this._w,this._x=q*n+t*this._x,this._y=q*r+t*this._y,this._z=q*s+t*this._z,this.normalize(),this}const c=Math.sqrt(u),p=Math.atan2(c,o),g=Math.sin((1-t)*p)/c,y=Math.sin(t*p)/c;return this._w=a*g+this._w*y,this._x=n*g+this._x*y,this._y=r*g+this._y*y,this._z=s*g+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,t=0,n=0){le.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(lw.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(lw.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,o=e.z,u=e.w,c=2*(a*r-o*n),p=2*(o*t-s*r),g=2*(s*n-a*t);return this.x=t+u*c+a*g-o*p,this.y=n+u*p+o*c-s*g,this.z=r+u*g+s*p-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=zn(this.x,e.x,t.x),this.y=zn(this.y,e.y,t.y),this.z=zn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=zn(this.x,e,t),this.y=zn(this.y,e,t),this.z=zn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(zn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,a=t.x,o=t.y,u=t.z;return this.x=r*u-s*o,this.y=s*a-n*u,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return eg.copy(this).projectOnVector(e),this.sub(eg)}reflect(e){return this.sub(eg.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(zn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const eg=new le,lw=new Ul;class Uc{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(pl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(pl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=pl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,pl):pl.fromBufferAttribute(s,a),pl.applyMatrix4(e.matrixWorld),this.expandByPoint(pl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),gm.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),gm.copy(n.boundingBox)),gm.applyMatrix4(e.matrixWorld),this.union(gm)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,pl),pl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(C2),_m.subVectors(this.max,C2),vf.subVectors(e.a,C2),yf.subVectors(e.b,C2),xf.subVectors(e.c,C2),A1.subVectors(yf,vf),p1.subVectors(xf,yf),S0.subVectors(vf,xf);let t=[0,-A1.z,A1.y,0,-p1.z,p1.y,0,-S0.z,S0.y,A1.z,0,-A1.x,p1.z,0,-p1.x,S0.z,0,-S0.x,-A1.y,A1.x,0,-p1.y,p1.x,0,-S0.y,S0.x,0];return!tg(t,vf,yf,xf,_m)||(t=[1,0,0,0,1,0,0,0,1],!tg(t,vf,yf,xf,_m))?!1:(vm.crossVectors(A1,p1),t=[vm.x,vm.y,vm.z],tg(t,vf,yf,xf,_m))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,pl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(pl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(sc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),sc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),sc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),sc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),sc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),sc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),sc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),sc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(sc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const sc=[new le,new le,new le,new le,new le,new le,new le,new le],pl=new le,gm=new Uc,vf=new le,yf=new le,xf=new le,A1=new le,p1=new le,S0=new le,C2=new le,_m=new le,vm=new le,T0=new le;function tg(i,e,t,n,r){for(let s=0,a=i.length-3;s<=a;s+=3){T0.fromArray(i,s);const o=r.x*Math.abs(T0.x)+r.y*Math.abs(T0.y)+r.z*Math.abs(T0.z),u=e.dot(T0),c=t.dot(T0),p=n.dot(T0);if(Math.max(-Math.max(u,c,p),Math.min(u,c,p))>o)return!1}return!0}const Uz=new Uc,N2=new le,ng=new le;class Z1{constructor(e=new le,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Uz.setFromPoints(e).getCenter(n);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;N2.subVectors(e,this.center);const t=N2.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(N2,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ng.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(N2.copy(e.center).add(ng)),this.expandByPoint(N2.copy(e.center).sub(ng))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ac=new le,ig=new le,ym=new le,m1=new le,rg=new le,xm=new le,sg=new le;class N3{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ac)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ac.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ac.copy(this.origin).addScaledVector(this.direction,t),ac.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){ig.copy(e).add(t).multiplyScalar(.5),ym.copy(t).sub(e).normalize(),m1.copy(this.origin).sub(ig);const s=e.distanceTo(t)*.5,a=-this.direction.dot(ym),o=m1.dot(this.direction),u=-m1.dot(ym),c=m1.lengthSq(),p=Math.abs(1-a*a);let g,y,q,S;if(p>0)if(g=a*u-o,y=a*o-u,S=s*p,g>=0)if(y>=-S)if(y<=S){const R=1/p;g*=R,y*=R,q=g*(g+a*y+2*o)+y*(a*g+y+2*u)+c}else y=s,g=Math.max(0,-(a*y+o)),q=-g*g+y*(y+2*u)+c;else y=-s,g=Math.max(0,-(a*y+o)),q=-g*g+y*(y+2*u)+c;else y<=-S?(g=Math.max(0,-(-a*s+o)),y=g>0?-s:Math.min(Math.max(-s,-u),s),q=-g*g+y*(y+2*u)+c):y<=S?(g=0,y=Math.min(Math.max(-s,-u),s),q=y*(y+2*u)+c):(g=Math.max(0,-(a*s+o)),y=g>0?s:Math.min(Math.max(-s,-u),s),q=-g*g+y*(y+2*u)+c);else y=a>0?-s:s,g=Math.max(0,-(a*y+o)),q=-g*g+y*(y+2*u)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(ig).addScaledVector(ym,y),q}intersectSphere(e,t){ac.subVectors(e.center,this.origin);const n=ac.dot(this.direction),r=ac.dot(ac)-n*n,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=n-a,u=n+a;return u<0?null:o<0?this.at(u,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,a,o,u;const c=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,y=this.origin;return c>=0?(n=(e.min.x-y.x)*c,r=(e.max.x-y.x)*c):(n=(e.max.x-y.x)*c,r=(e.min.x-y.x)*c),p>=0?(s=(e.min.y-y.y)*p,a=(e.max.y-y.y)*p):(s=(e.max.y-y.y)*p,a=(e.min.y-y.y)*p),n>a||s>r||((s>n||isNaN(n))&&(n=s),(a<r||isNaN(r))&&(r=a),g>=0?(o=(e.min.z-y.z)*g,u=(e.max.z-y.z)*g):(o=(e.max.z-y.z)*g,u=(e.min.z-y.z)*g),n>u||o>r)||((o>n||n!==n)&&(n=o),(u<r||r!==r)&&(r=u),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,ac)!==null}intersectTriangle(e,t,n,r,s){rg.subVectors(t,e),xm.subVectors(n,e),sg.crossVectors(rg,xm);let a=this.direction.dot(sg),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;m1.subVectors(this.origin,e);const u=o*this.direction.dot(xm.crossVectors(m1,xm));if(u<0)return null;const c=o*this.direction.dot(rg.cross(m1));if(c<0||u+c>a)return null;const p=-o*m1.dot(sg);return p<0?null:this.at(p/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yn{constructor(e,t,n,r,s,a,o,u,c,p,g,y,q,S,R,M){yn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,u,c,p,g,y,q,S,R,M)}set(e,t,n,r,s,a,o,u,c,p,g,y,q,S,R,M){const E=this.elements;return E[0]=e,E[4]=t,E[8]=n,E[12]=r,E[1]=s,E[5]=a,E[9]=o,E[13]=u,E[2]=c,E[6]=p,E[10]=g,E[14]=y,E[3]=q,E[7]=S,E[11]=R,E[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/qf.setFromMatrixColumn(e,0).length(),s=1/qf.setFromMatrixColumn(e,1).length(),a=1/qf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),u=Math.cos(r),c=Math.sin(r),p=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const y=a*p,q=a*g,S=o*p,R=o*g;t[0]=u*p,t[4]=-u*g,t[8]=c,t[1]=q+S*c,t[5]=y-R*c,t[9]=-o*u,t[2]=R-y*c,t[6]=S+q*c,t[10]=a*u}else if(e.order==="YXZ"){const y=u*p,q=u*g,S=c*p,R=c*g;t[0]=y+R*o,t[4]=S*o-q,t[8]=a*c,t[1]=a*g,t[5]=a*p,t[9]=-o,t[2]=q*o-S,t[6]=R+y*o,t[10]=a*u}else if(e.order==="ZXY"){const y=u*p,q=u*g,S=c*p,R=c*g;t[0]=y-R*o,t[4]=-a*g,t[8]=S+q*o,t[1]=q+S*o,t[5]=a*p,t[9]=R-y*o,t[2]=-a*c,t[6]=o,t[10]=a*u}else if(e.order==="ZYX"){const y=a*p,q=a*g,S=o*p,R=o*g;t[0]=u*p,t[4]=S*c-q,t[8]=y*c+R,t[1]=u*g,t[5]=R*c+y,t[9]=q*c-S,t[2]=-c,t[6]=o*u,t[10]=a*u}else if(e.order==="YZX"){const y=a*u,q=a*c,S=o*u,R=o*c;t[0]=u*p,t[4]=R-y*g,t[8]=S*g+q,t[1]=g,t[5]=a*p,t[9]=-o*p,t[2]=-c*p,t[6]=q*g+S,t[10]=y-R*g}else if(e.order==="XZY"){const y=a*u,q=a*c,S=o*u,R=o*c;t[0]=u*p,t[4]=-g,t[8]=c*p,t[1]=y*g+R,t[5]=a*p,t[9]=q*g-S,t[2]=S*g-q,t[6]=o*p,t[10]=R*g+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Oz,e,Bz)}lookAt(e,t,n){const r=this.elements;return so.subVectors(e,t),so.lengthSq()===0&&(so.z=1),so.normalize(),g1.crossVectors(n,so),g1.lengthSq()===0&&(Math.abs(n.z)===1?so.x+=1e-4:so.z+=1e-4,so.normalize(),g1.crossVectors(n,so)),g1.normalize(),qm.crossVectors(so,g1),r[0]=g1.x,r[4]=qm.x,r[8]=so.x,r[1]=g1.y,r[5]=qm.y,r[9]=so.y,r[2]=g1.z,r[6]=qm.z,r[10]=so.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[4],u=n[8],c=n[12],p=n[1],g=n[5],y=n[9],q=n[13],S=n[2],R=n[6],M=n[10],E=n[14],U=n[3],P=n[7],O=n[11],F=n[15],I=r[0],z=r[4],j=r[8],k=r[12],G=r[1],$=r[5],te=r[9],ne=r[13],ue=r[2],ae=r[6],W=r[10],J=r[14],re=r[3],ge=r[7],Y=r[11],me=r[15];return s[0]=a*I+o*G+u*ue+c*re,s[4]=a*z+o*$+u*ae+c*ge,s[8]=a*j+o*te+u*W+c*Y,s[12]=a*k+o*ne+u*J+c*me,s[1]=p*I+g*G+y*ue+q*re,s[5]=p*z+g*$+y*ae+q*ge,s[9]=p*j+g*te+y*W+q*Y,s[13]=p*k+g*ne+y*J+q*me,s[2]=S*I+R*G+M*ue+E*re,s[6]=S*z+R*$+M*ae+E*ge,s[10]=S*j+R*te+M*W+E*Y,s[14]=S*k+R*ne+M*J+E*me,s[3]=U*I+P*G+O*ue+F*re,s[7]=U*z+P*$+O*ae+F*ge,s[11]=U*j+P*te+O*W+F*Y,s[15]=U*k+P*ne+O*J+F*me,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],o=e[5],u=e[9],c=e[13],p=e[2],g=e[6],y=e[10],q=e[14],S=e[3],R=e[7],M=e[11],E=e[15];return S*(+s*u*g-r*c*g-s*o*y+n*c*y+r*o*q-n*u*q)+R*(+t*u*q-t*c*y+s*a*y-r*a*q+r*c*p-s*u*p)+M*(+t*c*g-t*o*q-s*a*g+n*a*q+s*o*p-n*c*p)+E*(-r*o*p-t*u*g+t*o*y+r*a*g-n*a*y+n*u*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],u=e[6],c=e[7],p=e[8],g=e[9],y=e[10],q=e[11],S=e[12],R=e[13],M=e[14],E=e[15],U=g*M*c-R*y*c+R*u*q-o*M*q-g*u*E+o*y*E,P=S*y*c-p*M*c-S*u*q+a*M*q+p*u*E-a*y*E,O=p*R*c-S*g*c+S*o*q-a*R*q-p*o*E+a*g*E,F=S*g*u-p*R*u-S*o*y+a*R*y+p*o*M-a*g*M,I=t*U+n*P+r*O+s*F;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/I;return e[0]=U*z,e[1]=(R*y*s-g*M*s-R*r*q+n*M*q+g*r*E-n*y*E)*z,e[2]=(o*M*s-R*u*s+R*r*c-n*M*c-o*r*E+n*u*E)*z,e[3]=(g*u*s-o*y*s-g*r*c+n*y*c+o*r*q-n*u*q)*z,e[4]=P*z,e[5]=(p*M*s-S*y*s+S*r*q-t*M*q-p*r*E+t*y*E)*z,e[6]=(S*u*s-a*M*s-S*r*c+t*M*c+a*r*E-t*u*E)*z,e[7]=(a*y*s-p*u*s+p*r*c-t*y*c-a*r*q+t*u*q)*z,e[8]=O*z,e[9]=(S*g*s-p*R*s-S*n*q+t*R*q+p*n*E-t*g*E)*z,e[10]=(a*R*s-S*o*s+S*n*c-t*R*c-a*n*E+t*o*E)*z,e[11]=(p*o*s-a*g*s-p*n*c+t*g*c+a*n*q-t*o*q)*z,e[12]=F*z,e[13]=(p*R*r-S*g*r+S*n*y-t*R*y-p*n*M+t*g*M)*z,e[14]=(S*o*r-a*R*r-S*n*u+t*R*u+a*n*M-t*o*M)*z,e[15]=(a*g*r-p*o*r+p*n*u-t*g*u-a*n*y+t*o*y)*z,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,o=e.y,u=e.z,c=s*a,p=s*o;return this.set(c*a+n,c*o-r*u,c*u+r*o,0,c*o+r*u,p*o+n,p*u-r*a,0,c*u-r*o,p*u+r*a,s*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,a=t._y,o=t._z,u=t._w,c=s+s,p=a+a,g=o+o,y=s*c,q=s*p,S=s*g,R=a*p,M=a*g,E=o*g,U=u*c,P=u*p,O=u*g,F=n.x,I=n.y,z=n.z;return r[0]=(1-(R+E))*F,r[1]=(q+O)*F,r[2]=(S-P)*F,r[3]=0,r[4]=(q-O)*I,r[5]=(1-(y+E))*I,r[6]=(M+U)*I,r[7]=0,r[8]=(S+P)*z,r[9]=(M-U)*z,r[10]=(1-(y+R))*z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=qf.set(r[0],r[1],r[2]).length();const a=qf.set(r[4],r[5],r[6]).length(),o=qf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ml.copy(this);const c=1/s,p=1/a,g=1/o;return ml.elements[0]*=c,ml.elements[1]*=c,ml.elements[2]*=c,ml.elements[4]*=p,ml.elements[5]*=p,ml.elements[6]*=p,ml.elements[8]*=g,ml.elements[9]*=g,ml.elements[10]*=g,t.setFromRotationMatrix(ml),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,r,s,a,o=Pa){const u=this.elements,c=2*s/(t-e),p=2*s/(n-r),g=(t+e)/(t-e),y=(n+r)/(n-r);let q,S;if(o===Pa)q=-(a+s)/(a-s),S=-2*a*s/(a-s);else if(o===mu)q=-a/(a-s),S=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=c,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=p,u[9]=y,u[13]=0,u[2]=0,u[6]=0,u[10]=q,u[14]=S,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,s,a,o=Pa){const u=this.elements,c=1/(t-e),p=1/(n-r),g=1/(a-s),y=(t+e)*c,q=(n+r)*p;let S,R;if(o===Pa)S=(a+s)*g,R=-2*g;else if(o===mu)S=s*g,R=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=2*c,u[4]=0,u[8]=0,u[12]=-y,u[1]=0,u[5]=2*p,u[9]=0,u[13]=-q,u[2]=0,u[6]=0,u[10]=R,u[14]=-S,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const qf=new le,ml=new yn,Oz=new le(0,0,0),Bz=new le(1,1,1),g1=new le,qm=new le,so=new le,uw=new yn,cw=new Ul;class ks{constructor(e=0,t=0,n=0,r=ks.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],u=r[1],c=r[5],p=r[9],g=r[2],y=r[6],q=r[10];switch(t){case"XYZ":this._y=Math.asin(zn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-p,q),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(y,c),this._z=0);break;case"YXZ":this._x=Math.asin(-zn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(o,q),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(zn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-g,q),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-zn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(y,q),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(zn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-p,c),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(o,q));break;case"XZY":this._z=Math.asin(-zn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(y,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-p,q),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return uw.makeRotationFromQuaternion(e),this.setFromRotationMatrix(uw,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return cw.setFromEuler(this),this.setFromQuaternion(cw,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ks.DEFAULT_ORDER="XYZ";class ox{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Iz=0;const hw=new le,bf=new Ul,oc=new yn,bm=new le,P2=new le,Fz=new le,kz=new Ul,fw=new le(1,0,0),dw=new le(0,1,0),Aw=new le(0,0,1),pw={type:"added"},zz={type:"removed"},Sf={type:"childadded",child:null},ag={type:"childremoved",child:null};class ur extends Eu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Iz++}),this.uuid=cu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ur.DEFAULT_UP.clone();const e=new le,t=new ks,n=new Ul,r=new le(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new yn},normalMatrix:{value:new Cn}}),this.matrix=new yn,this.matrixWorld=new yn,this.matrixAutoUpdate=ur.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ur.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ox,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bf.setFromAxisAngle(e,t),this.quaternion.multiply(bf),this}rotateOnWorldAxis(e,t){return bf.setFromAxisAngle(e,t),this.quaternion.premultiply(bf),this}rotateX(e){return this.rotateOnAxis(fw,e)}rotateY(e){return this.rotateOnAxis(dw,e)}rotateZ(e){return this.rotateOnAxis(Aw,e)}translateOnAxis(e,t){return hw.copy(e).applyQuaternion(this.quaternion),this.position.add(hw.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(fw,e)}translateY(e){return this.translateOnAxis(dw,e)}translateZ(e){return this.translateOnAxis(Aw,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(oc.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?bm.copy(e):bm.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),P2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?oc.lookAt(P2,bm,this.up):oc.lookAt(bm,P2,this.up),this.quaternion.setFromRotationMatrix(oc),r&&(oc.extractRotation(r.matrixWorld),bf.setFromRotationMatrix(oc),this.quaternion.premultiply(bf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(pw),Sf.child=e,this.dispatchEvent(Sf),Sf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(zz),ag.child=e,this.dispatchEvent(ag),ag.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),oc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),oc.multiply(e.parent.matrixWorld)),e.applyMatrix4(oc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(pw),Sf.child=e,this.dispatchEvent(Sf),Sf.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(P2,e,Fz),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(P2,kz,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,u){return o[u.uuid]===void 0&&(o[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const u=o.shapes;if(Array.isArray(u))for(let c=0,p=u.length;c<p;c++){const g=u[c];s(e.shapes,g)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let u=0,c=this.material.length;u<c;u++)o.push(s(e.materials,this.material[u]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const u=this.animations[o];r.animations.push(s(e.animations,u))}}if(t){const o=a(e.geometries),u=a(e.materials),c=a(e.textures),p=a(e.images),g=a(e.shapes),y=a(e.skeletons),q=a(e.animations),S=a(e.nodes);o.length>0&&(n.geometries=o),u.length>0&&(n.materials=u),c.length>0&&(n.textures=c),p.length>0&&(n.images=p),g.length>0&&(n.shapes=g),y.length>0&&(n.skeletons=y),q.length>0&&(n.animations=q),S.length>0&&(n.nodes=S)}return n.object=r,n;function a(o){const u=[];for(const c in o){const p=o[c];delete p.metadata,u.push(p)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}ur.DEFAULT_UP=new le(0,1,0);ur.DEFAULT_MATRIX_AUTO_UPDATE=!0;ur.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const gl=new le,lc=new le,og=new le,uc=new le,Tf=new le,wf=new le,mw=new le,lg=new le,ug=new le,cg=new le,hg=new sn,fg=new sn,dg=new sn;class Tl{constructor(e=new le,t=new le,n=new le){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),gl.subVectors(e,t),r.cross(gl);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){gl.subVectors(r,t),lc.subVectors(n,t),og.subVectors(e,t);const a=gl.dot(gl),o=gl.dot(lc),u=gl.dot(og),c=lc.dot(lc),p=lc.dot(og),g=a*c-o*o;if(g===0)return s.set(0,0,0),null;const y=1/g,q=(c*u-o*p)*y,S=(a*p-o*u)*y;return s.set(1-q-S,S,q)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,uc)===null?!1:uc.x>=0&&uc.y>=0&&uc.x+uc.y<=1}static getInterpolation(e,t,n,r,s,a,o,u){return this.getBarycoord(e,t,n,r,uc)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,uc.x),u.addScaledVector(a,uc.y),u.addScaledVector(o,uc.z),u)}static getInterpolatedAttribute(e,t,n,r,s,a){return hg.setScalar(0),fg.setScalar(0),dg.setScalar(0),hg.fromBufferAttribute(e,t),fg.fromBufferAttribute(e,n),dg.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(hg,s.x),a.addScaledVector(fg,s.y),a.addScaledVector(dg,s.z),a}static isFrontFacing(e,t,n,r){return gl.subVectors(n,t),lc.subVectors(e,t),gl.cross(lc).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return gl.subVectors(this.c,this.b),lc.subVectors(this.a,this.b),gl.cross(lc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Tl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Tl.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Tl.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Tl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Tl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let a,o;Tf.subVectors(r,n),wf.subVectors(s,n),lg.subVectors(e,n);const u=Tf.dot(lg),c=wf.dot(lg);if(u<=0&&c<=0)return t.copy(n);ug.subVectors(e,r);const p=Tf.dot(ug),g=wf.dot(ug);if(p>=0&&g<=p)return t.copy(r);const y=u*g-p*c;if(y<=0&&u>=0&&p<=0)return a=u/(u-p),t.copy(n).addScaledVector(Tf,a);cg.subVectors(e,s);const q=Tf.dot(cg),S=wf.dot(cg);if(S>=0&&q<=S)return t.copy(s);const R=q*c-u*S;if(R<=0&&c>=0&&S<=0)return o=c/(c-S),t.copy(n).addScaledVector(wf,o);const M=p*S-q*g;if(M<=0&&g-p>=0&&q-S>=0)return mw.subVectors(s,r),o=(g-p)/(g-p+(q-S)),t.copy(r).addScaledVector(mw,o);const E=1/(M+R+y);return a=R*E,o=y*E,t.copy(n).addScaledVector(Tf,a).addScaledVector(wf,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const pN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_1={h:0,s:0,l:0},Sm={h:0,s:0,l:0};function Ag(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let Xt=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=nn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Hn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Hn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Hn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Hn.workingColorSpace){if(e=ix(e,1),t=zn(t,0,1),n=zn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=Ag(a,s,e+1/3),this.g=Ag(a,s,e),this.b=Ag(a,s,e-1/3)}return Hn.toWorkingColorSpace(this,r),this}setStyle(e,t=nn){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=nn){const n=pN[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xc(e.r),this.g=xc(e.g),this.b=xc(e.b),this}copyLinearToSRGB(e){return this.r=yd(e.r),this.g=yd(e.g),this.b=yd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=nn){return Hn.fromWorkingColorSpace(Qs.copy(this),e),Math.round(zn(Qs.r*255,0,255))*65536+Math.round(zn(Qs.g*255,0,255))*256+Math.round(zn(Qs.b*255,0,255))}getHexString(e=nn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Hn.workingColorSpace){Hn.fromWorkingColorSpace(Qs.copy(this),t);const n=Qs.r,r=Qs.g,s=Qs.b,a=Math.max(n,r,s),o=Math.min(n,r,s);let u,c;const p=(o+a)/2;if(o===a)u=0,c=0;else{const g=a-o;switch(c=p<=.5?g/(a+o):g/(2-a-o),a){case n:u=(r-s)/g+(r<s?6:0);break;case r:u=(s-n)/g+2;break;case s:u=(n-r)/g+4;break}u/=6}return e.h=u,e.s=c,e.l=p,e}getRGB(e,t=Hn.workingColorSpace){return Hn.fromWorkingColorSpace(Qs.copy(this),t),e.r=Qs.r,e.g=Qs.g,e.b=Qs.b,e}getStyle(e=nn){Hn.fromWorkingColorSpace(Qs.copy(this),e);const t=Qs.r,n=Qs.g,r=Qs.b;return e!==nn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(_1),this.setHSL(_1.h+e,_1.s+t,_1.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(_1),e.getHSL(Sm);const n=_p(_1.h,Sm.h,t),r=_p(_1.s,Sm.s,t),s=_p(_1.l,Sm.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Qs=new Xt;Xt.NAMES=pN;let Gz=0;class na extends Eu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Gz++}),this.uuid=cu(),this.name="",this.type="Material",this.blending=ka,this.side=Ia,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Up,this.blendDst=Op,this.blendEquation=Zs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Xt(0,0,0),this.blendAlpha=0,this.depthFunc=j1,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=K_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=k0,this.stencilZFail=k0,this.stencilZPass=k0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ka&&(n.blending=this.blending),this.side!==Ia&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Up&&(n.blendSrc=this.blendSrc),this.blendDst!==Op&&(n.blendDst=this.blendDst),this.blendEquation!==Zs&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==j1&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==K_&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==k0&&(n.stencilFail=this.stencilFail),this.stencilZFail!==k0&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==k0&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const a=[];for(const o in s){const u=s[o];delete u.metadata,a.push(u)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class jo extends na{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ks,this.combine=M3,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const gc=Vz();function Vz(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const c=u-127;c<-27?(n[u]=0,n[u|256]=32768,r[u]=24,r[u|256]=24):c<-14?(n[u]=1024>>-c-14,n[u|256]=1024>>-c-14|32768,r[u]=-c-1,r[u|256]=-c-1):c<=15?(n[u]=c+15<<10,n[u|256]=c+15<<10|32768,r[u]=13,r[u|256]=13):c<128?(n[u]=31744,n[u|256]=64512,r[u]=24,r[u|256]=24):(n[u]=31744,n[u|256]=64512,r[u]=13,r[u|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let u=1;u<1024;++u){let c=u<<13,p=0;for(;(c&8388608)===0;)c<<=1,p-=8388608;c&=-8388609,p+=947912704,s[u]=c|p}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)a[u]=u<<23;a[31]=1199570944,a[32]=2147483648;for(let u=33;u<63;++u)a[u]=2147483648+(u-32<<23);a[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(o[u]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function ao(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=zn(i,-65504,65504),gc.floatView[0]=i;const e=gc.uint32View[0],t=e>>23&511;return gc.baseTable[t]+((e&8388607)>>gc.shiftTable[t])}function Tm(i){const e=i>>10;return gc.uint32View[0]=gc.mantissaTable[gc.offsetTable[e]+(i&1023)]+gc.exponentTable[e],gc.floatView[0]}const Wr=new le,wm=new rt;let Hz=0;class _r{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Hz++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=f8,this.updateRanges=[],this.gpuType=kr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)wm.fromBufferAttribute(this,t),wm.applyMatrix3(e),this.setXY(t,wm.x,wm.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Wr.fromBufferAttribute(this,t),Wr.applyMatrix3(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Wr.fromBufferAttribute(this,t),Wr.applyMatrix4(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Wr.fromBufferAttribute(this,t),Wr.applyNormalMatrix(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Wr.fromBufferAttribute(this,t),Wr.transformDirection(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=pa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Vn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=pa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=pa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=pa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=pa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),n=Vn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),n=Vn(n,this.array),r=Vn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),n=Vn(n,this.array),r=Vn(r,this.array),s=Vn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==f8&&(e.usage=this.usage),e}}class lx extends _r{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class ux extends _r{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class mN extends _r{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Tm(this.array[e*this.itemSize]);return this.normalized&&(t=pa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize]=ao(t),this}getY(e){let t=Tm(this.array[e*this.itemSize+1]);return this.normalized&&(t=pa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+1]=ao(t),this}getZ(e){let t=Tm(this.array[e*this.itemSize+2]);return this.normalized&&(t=pa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+2]=ao(t),this}getW(e){let t=Tm(this.array[e*this.itemSize+3]);return this.normalized&&(t=pa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+3]=ao(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),n=Vn(n,this.array)),this.array[e+0]=ao(t),this.array[e+1]=ao(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),n=Vn(n,this.array),r=Vn(r,this.array)),this.array[e+0]=ao(t),this.array[e+1]=ao(n),this.array[e+2]=ao(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),n=Vn(n,this.array),r=Vn(r,this.array),s=Vn(s,this.array)),this.array[e+0]=ao(t),this.array[e+1]=ao(n),this.array[e+2]=ao(r),this.array[e+3]=ao(s),this}}class mi extends _r{constructor(e,t,n){super(new Float32Array(e),t,n)}}let jz=0;const ko=new yn,pg=new ur,Ef=new le,oo=new Uc,D2=new Uc,ms=new le;class Ii extends Eu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:jz++}),this.uuid=cu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(rx(e)?ux:lx)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Cn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ko.makeRotationFromQuaternion(e),this.applyMatrix4(ko),this}rotateX(e){return ko.makeRotationX(e),this.applyMatrix4(ko),this}rotateY(e){return ko.makeRotationY(e),this.applyMatrix4(ko),this}rotateZ(e){return ko.makeRotationZ(e),this.applyMatrix4(ko),this}translate(e,t,n){return ko.makeTranslation(e,t,n),this.applyMatrix4(ko),this}scale(e,t,n){return ko.makeScale(e,t,n),this.applyMatrix4(ko),this}lookAt(e){return pg.lookAt(e),pg.updateMatrix(),this.applyMatrix4(pg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ef).negate(),this.translate(Ef.x,Ef.y,Ef.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new mi(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Uc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];oo.setFromBufferAttribute(s),this.morphTargetsRelative?(ms.addVectors(this.boundingBox.min,oo.min),this.boundingBox.expandByPoint(ms),ms.addVectors(this.boundingBox.max,oo.max),this.boundingBox.expandByPoint(ms)):(this.boundingBox.expandByPoint(oo.min),this.boundingBox.expandByPoint(oo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Z1);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new le,1/0);return}if(e){const n=this.boundingSphere.center;if(oo.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];D2.setFromBufferAttribute(o),this.morphTargetsRelative?(ms.addVectors(oo.min,D2.min),oo.expandByPoint(ms),ms.addVectors(oo.max,D2.max),oo.expandByPoint(ms)):(oo.expandByPoint(D2.min),oo.expandByPoint(D2.max))}oo.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)ms.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(ms));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],u=this.morphTargetsRelative;for(let c=0,p=o.count;c<p;c++)ms.fromBufferAttribute(o,c),u&&(Ef.fromBufferAttribute(e,c),ms.add(Ef)),r=Math.max(r,n.distanceToSquared(ms))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _r(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],u=[];for(let j=0;j<n.count;j++)o[j]=new le,u[j]=new le;const c=new le,p=new le,g=new le,y=new rt,q=new rt,S=new rt,R=new le,M=new le;function E(j,k,G){c.fromBufferAttribute(n,j),p.fromBufferAttribute(n,k),g.fromBufferAttribute(n,G),y.fromBufferAttribute(s,j),q.fromBufferAttribute(s,k),S.fromBufferAttribute(s,G),p.sub(c),g.sub(c),q.sub(y),S.sub(y);const $=1/(q.x*S.y-S.x*q.y);isFinite($)&&(R.copy(p).multiplyScalar(S.y).addScaledVector(g,-q.y).multiplyScalar($),M.copy(g).multiplyScalar(q.x).addScaledVector(p,-S.x).multiplyScalar($),o[j].add(R),o[k].add(R),o[G].add(R),u[j].add(M),u[k].add(M),u[G].add(M))}let U=this.groups;U.length===0&&(U=[{start:0,count:e.count}]);for(let j=0,k=U.length;j<k;++j){const G=U[j],$=G.start,te=G.count;for(let ne=$,ue=$+te;ne<ue;ne+=3)E(e.getX(ne+0),e.getX(ne+1),e.getX(ne+2))}const P=new le,O=new le,F=new le,I=new le;function z(j){F.fromBufferAttribute(r,j),I.copy(F);const k=o[j];P.copy(k),P.sub(F.multiplyScalar(F.dot(k))).normalize(),O.crossVectors(I,k);const $=O.dot(u[j])<0?-1:1;a.setXYZW(j,P.x,P.y,P.z,$)}for(let j=0,k=U.length;j<k;++j){const G=U[j],$=G.start,te=G.count;for(let ne=$,ue=$+te;ne<ue;ne+=3)z(e.getX(ne+0)),z(e.getX(ne+1)),z(e.getX(ne+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new _r(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let y=0,q=n.count;y<q;y++)n.setXYZ(y,0,0,0);const r=new le,s=new le,a=new le,o=new le,u=new le,c=new le,p=new le,g=new le;if(e)for(let y=0,q=e.count;y<q;y+=3){const S=e.getX(y+0),R=e.getX(y+1),M=e.getX(y+2);r.fromBufferAttribute(t,S),s.fromBufferAttribute(t,R),a.fromBufferAttribute(t,M),p.subVectors(a,s),g.subVectors(r,s),p.cross(g),o.fromBufferAttribute(n,S),u.fromBufferAttribute(n,R),c.fromBufferAttribute(n,M),o.add(p),u.add(p),c.add(p),n.setXYZ(S,o.x,o.y,o.z),n.setXYZ(R,u.x,u.y,u.z),n.setXYZ(M,c.x,c.y,c.z)}else for(let y=0,q=t.count;y<q;y+=3)r.fromBufferAttribute(t,y+0),s.fromBufferAttribute(t,y+1),a.fromBufferAttribute(t,y+2),p.subVectors(a,s),g.subVectors(r,s),p.cross(g),n.setXYZ(y+0,p.x,p.y,p.z),n.setXYZ(y+1,p.x,p.y,p.z),n.setXYZ(y+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ms.fromBufferAttribute(e,t),ms.normalize(),e.setXYZ(t,ms.x,ms.y,ms.z)}toNonIndexed(){function e(o,u){const c=o.array,p=o.itemSize,g=o.normalized,y=new c.constructor(u.length*p);let q=0,S=0;for(let R=0,M=u.length;R<M;R++){o.isInterleavedBufferAttribute?q=u[R]*o.data.stride+o.offset:q=u[R]*p;for(let E=0;E<p;E++)y[S++]=c[q++]}return new _r(y,p,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ii,n=this.index.array,r=this.attributes;for(const o in r){const u=r[o],c=e(u,n);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const u=[],c=s[o];for(let p=0,g=c.length;p<g;p++){const y=c[p],q=e(y,n);u.push(q)}t.morphAttributes[o]=u}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,u=a.length;o<u;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const c in u)u[c]!==void 0&&(e[c]=u[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const c=n[u];e.data.attributes[u]=c.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const c=this.morphAttributes[u],p=[];for(let g=0,y=c.length;g<y;g++){const q=c[g];p.push(q.toJSON(e.data))}p.length>0&&(r[u]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const c in r){const p=r[c];this.setAttribute(c,p.clone(t))}const s=e.morphAttributes;for(const c in s){const p=[],g=s[c];for(let y=0,q=g.length;y<q;y++)p.push(g[y].clone(t));this.morphAttributes[c]=p}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,p=a.length;c<p;c++){const g=a[c];this.addGroup(g.start,g.count,g.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const gw=new yn,w0=new N3,Em=new Z1,_w=new le,Mm=new le,Rm=new le,Cm=new le,mg=new le,Nm=new le,vw=new le,Pm=new le;class yi extends ur{constructor(e=new Ii,t=new jo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){Nm.set(0,0,0);for(let u=0,c=s.length;u<c;u++){const p=o[u],g=s[u];p!==0&&(mg.fromBufferAttribute(g,e),a?Nm.addScaledVector(mg,p):Nm.addScaledVector(mg.sub(t),p))}t.add(Nm)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Em.copy(n.boundingSphere),Em.applyMatrix4(s),w0.copy(e.ray).recast(e.near),!(Em.containsPoint(w0.origin)===!1&&(w0.intersectSphere(Em,_w)===null||w0.origin.distanceToSquared(_w)>(e.far-e.near)**2))&&(gw.copy(s).invert(),w0.copy(e.ray).applyMatrix4(gw),!(n.boundingBox!==null&&w0.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,w0)))}_computeIntersections(e,t,n){let r;const s=this.geometry,a=this.material,o=s.index,u=s.attributes.position,c=s.attributes.uv,p=s.attributes.uv1,g=s.attributes.normal,y=s.groups,q=s.drawRange;if(o!==null)if(Array.isArray(a))for(let S=0,R=y.length;S<R;S++){const M=y[S],E=a[M.materialIndex],U=Math.max(M.start,q.start),P=Math.min(o.count,Math.min(M.start+M.count,q.start+q.count));for(let O=U,F=P;O<F;O+=3){const I=o.getX(O),z=o.getX(O+1),j=o.getX(O+2);r=Dm(this,E,e,n,c,p,g,I,z,j),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=M.materialIndex,t.push(r))}}else{const S=Math.max(0,q.start),R=Math.min(o.count,q.start+q.count);for(let M=S,E=R;M<E;M+=3){const U=o.getX(M),P=o.getX(M+1),O=o.getX(M+2);r=Dm(this,a,e,n,c,p,g,U,P,O),r&&(r.faceIndex=Math.floor(M/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(a))for(let S=0,R=y.length;S<R;S++){const M=y[S],E=a[M.materialIndex],U=Math.max(M.start,q.start),P=Math.min(u.count,Math.min(M.start+M.count,q.start+q.count));for(let O=U,F=P;O<F;O+=3){const I=O,z=O+1,j=O+2;r=Dm(this,E,e,n,c,p,g,I,z,j),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=M.materialIndex,t.push(r))}}else{const S=Math.max(0,q.start),R=Math.min(u.count,q.start+q.count);for(let M=S,E=R;M<E;M+=3){const U=M,P=M+1,O=M+2;r=Dm(this,a,e,n,c,p,g,U,P,O),r&&(r.faceIndex=Math.floor(M/3),t.push(r))}}}}function Wz(i,e,t,n,r,s,a,o){let u;if(e.side===Oi?u=n.intersectTriangle(a,s,r,!0,o):u=n.intersectTriangle(r,s,a,e.side===Ia,o),u===null)return null;Pm.copy(o),Pm.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(Pm);return c<t.near||c>t.far?null:{distance:c,point:Pm.clone(),object:i}}function Dm(i,e,t,n,r,s,a,o,u,c){i.getVertexPosition(o,Mm),i.getVertexPosition(u,Rm),i.getVertexPosition(c,Cm);const p=Wz(i,e,t,n,Mm,Rm,Cm,vw);if(p){const g=new le;Tl.getBarycoord(vw,Mm,Rm,Cm,g),r&&(p.uv=Tl.getInterpolatedAttribute(r,o,u,c,g,new rt)),s&&(p.uv1=Tl.getInterpolatedAttribute(s,o,u,c,g,new rt)),a&&(p.normal=Tl.getInterpolatedAttribute(a,o,u,c,g,new le),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const y={a:o,b:u,c,normal:new le,materialIndex:0};Tl.getNormal(Mm,Rm,Cm,y.normal),p.face=y,p.barycoord=g}return p}class J1 extends Ii{constructor(e=1,t=1,n=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const u=[],c=[],p=[],g=[];let y=0,q=0;S("z","y","x",-1,-1,n,t,e,a,s,0),S("z","y","x",1,-1,n,t,-e,a,s,1),S("x","z","y",1,1,e,n,t,r,a,2),S("x","z","y",1,-1,e,n,-t,r,a,3),S("x","y","z",1,-1,e,t,n,r,s,4),S("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(u),this.setAttribute("position",new mi(c,3)),this.setAttribute("normal",new mi(p,3)),this.setAttribute("uv",new mi(g,2));function S(R,M,E,U,P,O,F,I,z,j,k){const G=O/z,$=F/j,te=O/2,ne=F/2,ue=I/2,ae=z+1,W=j+1;let J=0,re=0;const ge=new le;for(let Y=0;Y<W;Y++){const me=Y*$-ne;for(let Me=0;Me<ae;Me++){const Be=Me*G-te;ge[R]=Be*U,ge[M]=me*P,ge[E]=ue,c.push(ge.x,ge.y,ge.z),ge[R]=0,ge[M]=0,ge[E]=I>0?1:-1,p.push(ge.x,ge.y,ge.z),g.push(Me/z),g.push(1-Y/j),J+=1}}for(let Y=0;Y<j;Y++)for(let me=0;me<z;me++){const Me=y+me+ae*Y,Be=y+me+ae*(Y+1),be=y+(me+1)+ae*(Y+1),Fe=y+(me+1)+ae*Y;u.push(Me,Be,Fe),u.push(Be,be,Fe),re+=6}o.addGroup(q,re,k),q+=re,y+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new J1(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Yd(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function ha(i){const e={};for(let t=0;t<i.length;t++){const n=Yd(i[t]);for(const r in n)e[r]=n[r]}return e}function $z(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function gN(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Hn.workingColorSpace}const x5={clone:Yd,merge:ha};var Xz=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Qz=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ga extends na{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Xz,this.fragmentShader=Qz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Yd(e.uniforms),this.uniformsGroups=$z(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class P3 extends ur{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yn,this.projectionMatrix=new yn,this.projectionMatrixInverse=new yn,this.coordinateSystem=Pa}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const v1=new le,yw=new rt,xw=new rt;class bs extends P3{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=gh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(gp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return gh*2*Math.atan(Math.tan(gp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){v1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(v1.x,v1.y).multiplyScalar(-e/v1.z),v1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(v1.x,v1.y).multiplyScalar(-e/v1.z)}getViewSize(e,t){return this.getViewBounds(e,yw,xw),t.subVectors(xw,yw)}setViewOffset(e,t,n,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(gp*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const u=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/u,t-=a.offsetY*n/c,r*=a.width/u,n*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Mf=-90,Rf=1;class _N extends ur{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new bs(Mf,Rf,e,t);r.layers=this.layers,this.add(r);const s=new bs(Mf,Rf,e,t);s.layers=this.layers,this.add(s);const a=new bs(Mf,Rf,e,t);a.layers=this.layers,this.add(a);const o=new bs(Mf,Rf,e,t);o.layers=this.layers,this.add(o);const u=new bs(Mf,Rf,e,t);u.layers=this.layers,this.add(u);const c=new bs(Mf,Rf,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,a,o,u]=t;for(const c of t)this.remove(c);if(e===Pa)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===mu)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,u,c,p]=this.children,g=e.getRenderTarget(),y=e.getActiveCubeFace(),q=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const R=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,u),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=R,e.setRenderTarget(n,5,r),e.render(t,p),e.setRenderTarget(g,y,q),e.xr.enabled=S,n.texture.needsPMREMUpdate=!0}}class q5 extends ss{constructor(e=[],t=Yo,n,r,s,a,o,u,c,p){super(e,t,n,r,s,a,o,u,c,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class vN extends X1{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new q5(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:rs}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new J1(5,5,5),s=new Ga({name:"CubemapFromEquirect",uniforms:Yd(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Oi,blending:Fa});s.uniforms.tEquirect.value=t;const a=new yi(r,s),o=t.minFilter;return t.minFilter===Na&&(t.minFilter=rs),new _N(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(s)}}let Da=class extends ur{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Yz={type:"move"};class j6{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Da,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Da,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Da,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,a=null;const o=this._targetRay,u=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const R of e.hand.values()){const M=t.getJointPose(R,n),E=this._getHandJoint(c,R);M!==null&&(E.matrix.fromArray(M.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=M.radius),E.visible=M!==null}const p=c.joints["index-finger-tip"],g=c.joints["thumb-tip"],y=p.position.distanceTo(g.position),q=.02,S=.005;c.inputState.pinching&&y>q+S?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&y<=q-S&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Yz)))}return o!==null&&(o.visible=r!==null),u!==null&&(u.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Da;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class b5 extends ur{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ks,this.environmentIntensity=1,this.environmentRotation=new ks,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class cx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=f8,this.updateRanges=[],this.version=0,this.uuid=cu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ua=new le;class ou{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ua.fromBufferAttribute(this,t),ua.applyMatrix4(e),this.setXYZ(t,ua.x,ua.y,ua.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ua.fromBufferAttribute(this,t),ua.applyNormalMatrix(e),this.setXYZ(t,ua.x,ua.y,ua.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ua.fromBufferAttribute(this,t),ua.transformDirection(e),this.setXYZ(t,ua.x,ua.y,ua.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=pa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Vn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Vn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Vn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Vn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Vn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=pa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=pa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=pa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=pa(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vn(t,this.array),n=Vn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vn(t,this.array),n=Vn(n,this.array),r=Vn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vn(t,this.array),n=Vn(n,this.array),r=Vn(r,this.array),s=Vn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new _r(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ou(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Kz extends na{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Xt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class Zz extends ss{constructor(e=null,t=1,n=1,r,s,a,o,u,c=nr,p=nr,g,y){super(null,a,o,u,c,p,r,s,g,y),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class G1 extends _r{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const gg=new le,Jz=new le,eG=new Cn;class tu{constructor(e=new le(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=gg.subVectors(n,t).cross(Jz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(gg),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||eG.getNormalMatrix(e),r=this.coplanarPoint(gg).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const E0=new Z1,Lm=new le;class D3{constructor(e=new tu,t=new tu,n=new tu,r=new tu,s=new tu,a=new tu){this.planes=[e,t,n,r,s,a]}set(e,t,n,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Pa){const n=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],u=r[3],c=r[4],p=r[5],g=r[6],y=r[7],q=r[8],S=r[9],R=r[10],M=r[11],E=r[12],U=r[13],P=r[14],O=r[15];if(n[0].setComponents(u-s,y-c,M-q,O-E).normalize(),n[1].setComponents(u+s,y+c,M+q,O+E).normalize(),n[2].setComponents(u+a,y+p,M+S,O+U).normalize(),n[3].setComponents(u-a,y-p,M-S,O-U).normalize(),n[4].setComponents(u-o,y-g,M-R,O-P).normalize(),t===Pa)n[5].setComponents(u+o,y+g,M+R,O+P).normalize();else if(t===mu)n[5].setComponents(o,g,R,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),E0.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),E0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(E0)}intersectsSprite(e){return E0.center.set(0,0,0),E0.radius=.7071067811865476,E0.applyMatrix4(e.matrixWorld),this.intersectsSphere(E0)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Lm.x=r.normal.x>0?e.max.x:e.min.x,Lm.y=r.normal.y>0?e.max.y:e.min.y,Lm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Lm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class vA extends na{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Xt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const d8=new le,A8=new le,qw=new yn,L2=new N3,Um=new Z1,_g=new le,bw=new le;class S5 extends ur{constructor(e=new Ii,t=new vA){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)d8.fromBufferAttribute(t,r-1),A8.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=d8.distanceTo(A8);e.setAttribute("lineDistance",new mi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Um.copy(n.boundingSphere),Um.applyMatrix4(r),Um.radius+=s,e.ray.intersectsSphere(Um)===!1)return;qw.copy(r).invert(),L2.copy(e.ray).applyMatrix4(qw);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,c=this.isLineSegments?2:1,p=n.index,y=n.attributes.position;if(p!==null){const q=Math.max(0,a.start),S=Math.min(p.count,a.start+a.count);for(let R=q,M=S-1;R<M;R+=c){const E=p.getX(R),U=p.getX(R+1),P=Om(this,e,L2,u,E,U,R);P&&t.push(P)}if(this.isLineLoop){const R=p.getX(S-1),M=p.getX(q),E=Om(this,e,L2,u,R,M,S-1);E&&t.push(E)}}else{const q=Math.max(0,a.start),S=Math.min(y.count,a.start+a.count);for(let R=q,M=S-1;R<M;R+=c){const E=Om(this,e,L2,u,R,R+1,R);E&&t.push(E)}if(this.isLineLoop){const R=Om(this,e,L2,u,S-1,q,S-1);R&&t.push(R)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function Om(i,e,t,n,r,s,a){const o=i.geometry.attributes.position;if(d8.fromBufferAttribute(o,r),A8.fromBufferAttribute(o,s),t.distanceSqToSegment(d8,A8,_g,bw)>n)return;_g.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(_g);if(!(c<e.near||c>e.far))return{distance:c,point:bw.clone().applyMatrix4(i.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:i}}const Sw=new le,Tw=new le;class yN extends S5{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)Sw.fromBufferAttribute(t,r),Tw.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+Sw.distanceTo(Tw);e.setAttribute("lineDistance",new mi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class hx extends na{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Xt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ww=new yn,Z_=new N3,Bm=new Z1,Im=new le;class tG extends ur{constructor(e=new Ii,t=new hx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Bm.copy(n.boundingSphere),Bm.applyMatrix4(r),Bm.radius+=s,e.ray.intersectsSphere(Bm)===!1)return;ww.copy(r).invert(),Z_.copy(e.ray).applyMatrix4(ww);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,c=n.index,g=n.attributes.position;if(c!==null){const y=Math.max(0,a.start),q=Math.min(c.count,a.start+a.count);for(let S=y,R=q;S<R;S++){const M=c.getX(S);Im.fromBufferAttribute(g,M),Ew(Im,M,u,r,e,t,this)}}else{const y=Math.max(0,a.start),q=Math.min(g.count,a.start+a.count);for(let S=y,R=q;S<R;S++)Im.fromBufferAttribute(g,S),Ew(Im,S,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function Ew(i,e,t,n,r,s,a){const o=Z_.distanceSqToPoint(i);if(o<t){const u=new le;Z_.closestPointToPoint(i,u),u.applyMatrix4(n);const c=r.ray.origin.distanceTo(u);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class xN extends ss{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=nr,this.minFilter=nr,this.generateMipmaps=!1,this.needsUpdate=!0}}class qo extends ss{constructor(e,t,n=Qi,r,s,a,o=nr,u=nr,c,p=yo){if(p!==yo&&p!==xo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,a,o,u,p,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new sx(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Bl{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let o=0,u=s-1,c;for(;o<=u;)if(r=Math.floor(o+(u-o)/2),c=n[r]-a,c<0)o=r+1;else if(c>0)u=r-1;else{u=r;break}if(r=u,n[r]===a)return r/(s-1);const p=n[r],y=n[r+1]-p,q=(a-p)/y;return(r+q)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),u=t||(a.isVector2?new rt:new le);return u.copy(o).sub(a).normalize(),u}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new le,r=[],s=[],a=[],o=new le,u=new yn;for(let q=0;q<=e;q++){const S=q/e;r[q]=this.getTangentAt(S,new le)}s[0]=new le,a[0]=new le;let c=Number.MAX_VALUE;const p=Math.abs(r[0].x),g=Math.abs(r[0].y),y=Math.abs(r[0].z);p<=c&&(c=p,n.set(1,0,0)),g<=c&&(c=g,n.set(0,1,0)),y<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let q=1;q<=e;q++){if(s[q]=s[q-1].clone(),a[q]=a[q-1].clone(),o.crossVectors(r[q-1],r[q]),o.length()>Number.EPSILON){o.normalize();const S=Math.acos(zn(r[q-1].dot(r[q]),-1,1));s[q].applyMatrix4(u.makeRotationAxis(o,S))}a[q].crossVectors(r[q],s[q])}if(t===!0){let q=Math.acos(zn(s[0].dot(s[e]),-1,1));q/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(q=-q);for(let S=1;S<=e;S++)s[S].applyMatrix4(u.makeRotationAxis(r[S],q*S)),a[S].crossVectors(r[S],s[S])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class fx extends Bl{constructor(e=0,t=0,n=1,r=1,s=0,a=Math.PI*2,o=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=u}getPoint(e,t=new rt){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),y=u-this.aX,q=c-this.aY;u=y*p-q*g+this.aX,c=y*g+q*p+this.aY}return n.set(u,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class nG extends fx{constructor(e,t,n,r,s,a){super(e,t,n,n,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function dx(){let i=0,e=0,t=0,n=0;function r(s,a,o,u){i=s,e=o,t=-3*s+3*a-2*o-u,n=2*s-2*a+o+u}return{initCatmullRom:function(s,a,o,u,c){r(a,o,c*(o-s),c*(u-a))},initNonuniformCatmullRom:function(s,a,o,u,c,p,g){let y=(a-s)/c-(o-s)/(c+p)+(o-a)/p,q=(o-a)/p-(u-a)/(p+g)+(u-o)/g;y*=p,q*=p,r(a,o,y,q)},calc:function(s){const a=s*s,o=a*s;return i+e*s+t*a+n*o}}}const Fm=new le,vg=new dx,yg=new dx,xg=new dx;class iG extends Bl{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new le){const n=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),u=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:u===0&&o===s-1&&(o=s-2,u=1);let c,p;this.closed||o>0?c=r[(o-1)%s]:(Fm.subVectors(r[0],r[1]).add(r[0]),c=Fm);const g=r[o%s],y=r[(o+1)%s];if(this.closed||o+2<s?p=r[(o+2)%s]:(Fm.subVectors(r[s-1],r[s-2]).add(r[s-1]),p=Fm),this.curveType==="centripetal"||this.curveType==="chordal"){const q=this.curveType==="chordal"?.5:.25;let S=Math.pow(c.distanceToSquared(g),q),R=Math.pow(g.distanceToSquared(y),q),M=Math.pow(y.distanceToSquared(p),q);R<1e-4&&(R=1),S<1e-4&&(S=R),M<1e-4&&(M=R),vg.initNonuniformCatmullRom(c.x,g.x,y.x,p.x,S,R,M),yg.initNonuniformCatmullRom(c.y,g.y,y.y,p.y,S,R,M),xg.initNonuniformCatmullRom(c.z,g.z,y.z,p.z,S,R,M)}else this.curveType==="catmullrom"&&(vg.initCatmullRom(c.x,g.x,y.x,p.x,this.tension),yg.initCatmullRom(c.y,g.y,y.y,p.y,this.tension),xg.initCatmullRom(c.z,g.z,y.z,p.z,this.tension));return n.set(vg.calc(u),yg.calc(u),xg.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new le().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Mw(i,e,t,n,r){const s=(n-e)*.5,a=(r-t)*.5,o=i*i,u=i*o;return(2*t-2*n+s+a)*u+(-3*t+3*n-2*s-a)*o+s*i+t}function rG(i,e){const t=1-i;return t*t*e}function sG(i,e){return 2*(1-i)*i*e}function aG(i,e){return i*i*e}function vp(i,e,t,n){return rG(i,e)+sG(i,t)+aG(i,n)}function oG(i,e){const t=1-i;return t*t*t*e}function lG(i,e){const t=1-i;return 3*t*t*i*e}function uG(i,e){return 3*(1-i)*i*i*e}function cG(i,e){return i*i*i*e}function yp(i,e,t,n,r){return oG(i,e)+lG(i,t)+uG(i,n)+cG(i,r)}class qN extends Bl{constructor(e=new rt,t=new rt,n=new rt,r=new rt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new rt){const n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(yp(e,r.x,s.x,a.x,o.x),yp(e,r.y,s.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class bN extends Bl{constructor(e=new le,t=new le,n=new le,r=new le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new le){const n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(yp(e,r.x,s.x,a.x,o.x),yp(e,r.y,s.y,a.y,o.y),yp(e,r.z,s.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class SN extends Bl{constructor(e=new rt,t=new rt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new rt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new rt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hG extends Bl{constructor(e=new le,t=new le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new le){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class TN extends Bl{constructor(e=new rt,t=new rt,n=new rt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new rt){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(vp(e,r.x,s.x,a.x),vp(e,r.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wN extends Bl{constructor(e=new le,t=new le,n=new le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new le){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(vp(e,r.x,s.x,a.x),vp(e,r.y,s.y,a.y),vp(e,r.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class EN extends Bl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new rt){const n=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,u=r[a===0?a:a-1],c=r[a],p=r[a>r.length-2?r.length-1:a+1],g=r[a>r.length-3?r.length-1:a+2];return n.set(Mw(o,u.x,c.x,p.x,g.x),Mw(o,u.y,c.y,p.y,g.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new rt().fromArray(r))}return this}}var p8=Object.freeze({__proto__:null,ArcCurve:nG,CatmullRomCurve3:iG,CubicBezierCurve:qN,CubicBezierCurve3:bN,EllipseCurve:fx,LineCurve:SN,LineCurve3:hG,QuadraticBezierCurve:TN,QuadraticBezierCurve3:wN,SplineCurve:EN});class fG extends Bl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new p8[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const a=r[s]-n,o=this.curves[s],u=o.getLength(),c=u===0?0:1-a/u;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,u=a.getPoints(o);for(let c=0;c<u.length;c++){const p=u[c];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new p8[r.type]().fromJSON(r))}return this}}let J_=class extends fG{constructor(e){super(),this.type="Path",this.currentPoint=new rt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new SN(this.currentPoint.clone(),new rt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new TN(this.currentPoint.clone(),new rt(e,t),new rt(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,a){const o=new qN(this.currentPoint.clone(),new rt(e,t),new rt(n,r),new rt(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new EN(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,a){const o=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+o,t+u,n,r,s,a),this}absarc(e,t,n,r,s,a){return this.absellipse(e,t,n,n,r,s,a),this}ellipse(e,t,n,r,s,a,o,u){const c=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+c,t+p,n,r,s,a,o,u),this}absellipse(e,t,n,r,s,a,o,u){const c=new fx(e,t,n,r,s,a,o,u);if(this.curves.length>0){const g=c.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(c);const p=c.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class T5 extends Ii{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],u=[],c=new le,p=new rt;a.push(0,0,0),o.push(0,0,1),u.push(.5,.5);for(let g=0,y=3;g<=t;g++,y+=3){const q=n+g/t*r;c.x=e*Math.cos(q),c.y=e*Math.sin(q),a.push(c.x,c.y,c.z),o.push(0,0,1),p.x=(a[y]/e+1)/2,p.y=(a[y+1]/e+1)/2,u.push(p.x,p.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new mi(a,3)),this.setAttribute("normal",new mi(o,3)),this.setAttribute("uv",new mi(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new T5(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class w5 extends Ii{constructor(e=1,t=1,n=1,r=32,s=1,a=!1,o=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:u};const c=this;r=Math.floor(r),s=Math.floor(s);const p=[],g=[],y=[],q=[];let S=0;const R=[],M=n/2;let E=0;U(),a===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(p),this.setAttribute("position",new mi(g,3)),this.setAttribute("normal",new mi(y,3)),this.setAttribute("uv",new mi(q,2));function U(){const O=new le,F=new le;let I=0;const z=(t-e)/n;for(let j=0;j<=s;j++){const k=[],G=j/s,$=G*(t-e)+e;for(let te=0;te<=r;te++){const ne=te/r,ue=ne*u+o,ae=Math.sin(ue),W=Math.cos(ue);F.x=$*ae,F.y=-G*n+M,F.z=$*W,g.push(F.x,F.y,F.z),O.set(ae,z,W).normalize(),y.push(O.x,O.y,O.z),q.push(ne,1-G),k.push(S++)}R.push(k)}for(let j=0;j<r;j++)for(let k=0;k<s;k++){const G=R[k][j],$=R[k+1][j],te=R[k+1][j+1],ne=R[k][j+1];(e>0||k!==0)&&(p.push(G,$,ne),I+=3),(t>0||k!==s-1)&&(p.push($,te,ne),I+=3)}c.addGroup(E,I,0),E+=I}function P(O){const F=S,I=new rt,z=new le;let j=0;const k=O===!0?e:t,G=O===!0?1:-1;for(let te=1;te<=r;te++)g.push(0,M*G,0),y.push(0,G,0),q.push(.5,.5),S++;const $=S;for(let te=0;te<=r;te++){const ue=te/r*u+o,ae=Math.cos(ue),W=Math.sin(ue);z.x=k*W,z.y=M*G,z.z=k*ae,g.push(z.x,z.y,z.z),y.push(0,G,0),I.x=ae*.5+.5,I.y=W*.5*G+.5,q.push(I.x,I.y),S++}for(let te=0;te<r;te++){const ne=F+te,ue=$+te;O===!0?p.push(ue,ue+1,ne):p.push(ue+1,ue,ne),j+=3}c.addGroup(E,j,O===!0?1:2),E+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w5(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class W6 extends J_{constructor(e){super(e),this.uuid=cu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new J_().fromJSON(r))}return this}}function dG(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=MN(i,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,u,c;if(n&&(s=_G(i,e,s,t)),i.length>80*t){o=1/0,u=1/0;let p=-1/0,g=-1/0;for(let y=t;y<r;y+=t){const q=i[y],S=i[y+1];q<o&&(o=q),S<u&&(u=S),q>p&&(p=q),S>g&&(g=S)}c=Math.max(p-o,g-u),c=c!==0?32767/c:0}return Jp(s,a,t,o,u,c,0),a}function MN(i,e,t,n,r){let s;if(r===RG(i,e,t,n)>0)for(let a=e;a<t;a+=n)s=Rw(a/n|0,i[a],i[a+1],s);else for(let a=t-n;a>=e;a-=n)s=Rw(a/n|0,i[a],i[a+1],s);return s&&Kd(s,s.next)&&(t3(s),s=s.next),s}function _h(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Kd(t,t.next)||Sr(t.prev,t,t.next)===0)){if(t3(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Jp(i,e,t,n,r,s,a){if(!i)return;!a&&s&&bG(i,n,r,s);let o=i;for(;i.prev!==i.next;){const u=i.prev,c=i.next;if(s?pG(i,n,r,s):AG(i)){e.push(u.i,i.i,c.i),t3(i),i=c.next,o=c.next;continue}if(i=c,i===o){a?a===1?(i=mG(_h(i),e),Jp(i,e,t,n,r,s,2)):a===2&&gG(i,e,t,n,r,s):Jp(_h(i),e,t,n,r,s,1);break}}}function AG(i){const e=i.prev,t=i,n=i.next;if(Sr(e,t,n)>=0)return!1;const r=e.x,s=t.x,a=n.x,o=e.y,u=t.y,c=n.y,p=Math.min(r,s,a),g=Math.min(o,u,c),y=Math.max(r,s,a),q=Math.max(o,u,c);let S=n.next;for(;S!==e;){if(S.x>=p&&S.x<=y&&S.y>=g&&S.y<=q&&op(r,o,s,u,a,c,S.x,S.y)&&Sr(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function pG(i,e,t,n){const r=i.prev,s=i,a=i.next;if(Sr(r,s,a)>=0)return!1;const o=r.x,u=s.x,c=a.x,p=r.y,g=s.y,y=a.y,q=Math.min(o,u,c),S=Math.min(p,g,y),R=Math.max(o,u,c),M=Math.max(p,g,y),E=ev(q,S,e,t,n),U=ev(R,M,e,t,n);let P=i.prevZ,O=i.nextZ;for(;P&&P.z>=E&&O&&O.z<=U;){if(P.x>=q&&P.x<=R&&P.y>=S&&P.y<=M&&P!==r&&P!==a&&op(o,p,u,g,c,y,P.x,P.y)&&Sr(P.prev,P,P.next)>=0||(P=P.prevZ,O.x>=q&&O.x<=R&&O.y>=S&&O.y<=M&&O!==r&&O!==a&&op(o,p,u,g,c,y,O.x,O.y)&&Sr(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;P&&P.z>=E;){if(P.x>=q&&P.x<=R&&P.y>=S&&P.y<=M&&P!==r&&P!==a&&op(o,p,u,g,c,y,P.x,P.y)&&Sr(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;O&&O.z<=U;){if(O.x>=q&&O.x<=R&&O.y>=S&&O.y<=M&&O!==r&&O!==a&&op(o,p,u,g,c,y,O.x,O.y)&&Sr(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function mG(i,e){let t=i;do{const n=t.prev,r=t.next.next;!Kd(n,r)&&CN(n,t,t.next,r)&&e3(n,r)&&e3(r,n)&&(e.push(n.i,t.i,r.i),t3(t),t3(t.next),t=i=r),t=t.next}while(t!==i);return _h(t)}function gG(i,e,t,n,r,s){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&wG(a,o)){let u=NN(a,o);a=_h(a,a.next),u=_h(u,u.next),Jp(a,e,t,n,r,s,0),Jp(u,e,t,n,r,s,0);return}o=o.next}a=a.next}while(a!==i)}function _G(i,e,t,n){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*n,u=s<a-1?e[s+1]*n:i.length,c=MN(i,o,u,n,!1);c===c.next&&(c.steiner=!0),r.push(TG(c))}r.sort(vG);for(let s=0;s<r.length;s++)t=yG(r[s],t);return t}function vG(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function yG(i,e){const t=xG(i,e);if(!t)return e;const n=NN(t,i);return _h(n,n.next),_h(t,t.next)}function xG(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,a;if(Kd(i,t))return t;do{if(Kd(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const g=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=n&&g>s&&(s=g,a=t.x<t.next.x?t:t.next,g===n))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,u=a.x,c=a.y;let p=1/0;t=a;do{if(n>=t.x&&t.x>=u&&n!==t.x&&RN(r<c?n:s,r,u,c,r<c?s:n,r,t.x,t.y)){const g=Math.abs(r-t.y)/(n-t.x);e3(t,i)&&(g<p||g===p&&(t.x>a.x||t.x===a.x&&qG(a,t)))&&(a=t,p=g)}t=t.next}while(t!==o);return a}function qG(i,e){return Sr(i.prev,i,e.prev)<0&&Sr(e.next,i,i.next)<0}function bG(i,e,t,n){let r=i;do r.z===0&&(r.z=ev(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,SG(r)}function SG(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let a=n,o=0;for(let c=0;c<t&&(o++,a=a.nextZ,!!a);c++);let u=t;for(;o>0||u>0&&a;)o!==0&&(u===0||!a||n.z<=a.z)?(r=n,n=n.nextZ,o--):(r=a,a=a.nextZ,u--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=a}s.nextZ=null,t*=2}while(e>1);return i}function ev(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function TG(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function RN(i,e,t,n,r,s,a,o){return(r-a)*(e-o)>=(i-a)*(s-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(n-o)}function op(i,e,t,n,r,s,a,o){return!(i===a&&e===o)&&RN(i,e,t,n,r,s,a,o)}function wG(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!EG(i,e)&&(e3(i,e)&&e3(e,i)&&MG(i,e)&&(Sr(i.prev,i,e.prev)||Sr(i,e.prev,e))||Kd(i,e)&&Sr(i.prev,i,i.next)>0&&Sr(e.prev,e,e.next)>0)}function Sr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Kd(i,e){return i.x===e.x&&i.y===e.y}function CN(i,e,t,n){const r=zm(Sr(i,e,t)),s=zm(Sr(i,e,n)),a=zm(Sr(t,n,i)),o=zm(Sr(t,n,e));return!!(r!==s&&a!==o||r===0&&km(i,t,e)||s===0&&km(i,n,e)||a===0&&km(t,i,n)||o===0&&km(t,e,n))}function km(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function zm(i){return i>0?1:i<0?-1:0}function EG(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&CN(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function e3(i,e){return Sr(i.prev,i,i.next)<0?Sr(i,e,i.next)>=0&&Sr(i,i.prev,e)>=0:Sr(i,e,i.prev)<0||Sr(i,i.next,e)<0}function MG(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function NN(i,e){const t=tv(i.i,i.x,i.y),n=tv(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Rw(i,e,t,n){const r=tv(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function t3(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function tv(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function RG(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}class CG{static triangulate(e,t,n=2){return dG(e,t,n)}}class xd{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return xd.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];Cw(e),Nw(n,e);let a=e.length;t.forEach(Cw);for(let u=0;u<t.length;u++)r.push(a),a+=t[u].length,Nw(n,t[u]);const o=CG.triangulate(n,r);for(let u=0;u<o.length;u+=3)s.push(o.slice(u,u+3));return s}}function Cw(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function Nw(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Ax extends Ii{constructor(e=new W6([new rt(.5,.5),new rt(-.5,.5),new rt(-.5,-.5),new rt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let o=0,u=e.length;o<u;o++){const c=e[o];a(c)}this.setAttribute("position",new mi(r,3)),this.setAttribute("uv",new mi(s,2)),this.computeVertexNormals();function a(o){const u=[],c=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,q=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:q-.1,R=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const E=t.extrudePath,U=t.UVGenerator!==void 0?t.UVGenerator:NG;let P,O=!1,F,I,z,j;E&&(P=E.getSpacedPoints(p),O=!0,y=!1,F=E.computeFrenetFrames(p,!1),I=new le,z=new le,j=new le),y||(M=0,q=0,S=0,R=0);const k=o.extractPoints(c);let G=k.shape;const $=k.holes;if(!xd.isClockWise(G)){G=G.reverse();for(let ut=0,st=$.length;ut<st;ut++){const nt=$[ut];xd.isClockWise(nt)&&($[ut]=nt.reverse())}}function ne(ut){const nt=10000000000000001e-36;let Pt=ut[0];for(let at=1;at<=ut.length;at++){const ce=at%ut.length,ee=ut[ce],Ne=ee.x-Pt.x,Xe=ee.y-Pt.y,it=Ne*Ne+Xe*Xe,Qe=Math.max(Math.abs(ee.x),Math.abs(ee.y),Math.abs(Pt.x),Math.abs(Pt.y)),Ut=nt*Qe*Qe;if(it<=Ut){ut.splice(ce,1),at--;continue}Pt=ee}}ne(G),$.forEach(ne);const ue=$.length,ae=G;for(let ut=0;ut<ue;ut++){const st=$[ut];G=G.concat(st)}function W(ut,st,nt){return st||console.error("THREE.ExtrudeGeometry: vec does not exist"),ut.clone().addScaledVector(st,nt)}const J=G.length;function re(ut,st,nt){let Pt,at,ce;const ee=ut.x-st.x,Ne=ut.y-st.y,Xe=nt.x-ut.x,it=nt.y-ut.y,Qe=ee*ee+Ne*Ne,Ut=ee*it-Ne*Xe;if(Math.abs(Ut)>Number.EPSILON){const St=Math.sqrt(Qe),Nt=Math.sqrt(Xe*Xe+it*it),Xn=st.x-Ne/St,Tt=st.y+ee/St,jt=nt.x-it/Nt,on=nt.y+Xe/Nt,cn=((jt-Xn)*it-(on-Tt)*Xe)/(ee*it-Ne*Xe);Pt=Xn+ee*cn-ut.x,at=Tt+Ne*cn-ut.y;const Bt=Pt*Pt+at*at;if(Bt<=2)return new rt(Pt,at);ce=Math.sqrt(Bt/2)}else{let St=!1;ee>Number.EPSILON?Xe>Number.EPSILON&&(St=!0):ee<-Number.EPSILON?Xe<-Number.EPSILON&&(St=!0):Math.sign(Ne)===Math.sign(it)&&(St=!0),St?(Pt=-Ne,at=ee,ce=Math.sqrt(Qe)):(Pt=ee,at=Ne,ce=Math.sqrt(Qe/2))}return new rt(Pt/ce,at/ce)}const ge=[];for(let ut=0,st=ae.length,nt=st-1,Pt=ut+1;ut<st;ut++,nt++,Pt++)nt===st&&(nt=0),Pt===st&&(Pt=0),ge[ut]=re(ae[ut],ae[nt],ae[Pt]);const Y=[];let me,Me=ge.concat();for(let ut=0,st=ue;ut<st;ut++){const nt=$[ut];me=[];for(let Pt=0,at=nt.length,ce=at-1,ee=Pt+1;Pt<at;Pt++,ce++,ee++)ce===at&&(ce=0),ee===at&&(ee=0),me[Pt]=re(nt[Pt],nt[ce],nt[ee]);Y.push(me),Me=Me.concat(me)}const Be=[],be=[];for(let ut=0;ut<M;ut++){const st=ut/M,nt=q*Math.cos(st*Math.PI/2),Pt=S*Math.sin(st*Math.PI/2)+R;for(let at=0,ce=ae.length;at<ce;at++){const ee=W(ae[at],ge[at],Pt);Kt(ee.x,ee.y,-nt),st==0&&Be.push(ee)}for(let at=0,ce=ue;at<ce;at++){const ee=$[at];me=Y[at];const Ne=[];for(let Xe=0,it=ee.length;Xe<it;Xe++){const Qe=W(ee[Xe],me[Xe],Pt);Kt(Qe.x,Qe.y,-nt),st==0&&Ne.push(Qe)}st==0&&be.push(Ne)}}const Fe=xd.triangulateShape(Be,be),$e=Fe.length,ht=S+R;for(let ut=0;ut<J;ut++){const st=y?W(G[ut],Me[ut],ht):G[ut];O?(z.copy(F.normals[0]).multiplyScalar(st.x),I.copy(F.binormals[0]).multiplyScalar(st.y),j.copy(P[0]).add(z).add(I),Kt(j.x,j.y,j.z)):Kt(st.x,st.y,0)}for(let ut=1;ut<=p;ut++)for(let st=0;st<J;st++){const nt=y?W(G[st],Me[st],ht):G[st];O?(z.copy(F.normals[ut]).multiplyScalar(nt.x),I.copy(F.binormals[ut]).multiplyScalar(nt.y),j.copy(P[ut]).add(z).add(I),Kt(j.x,j.y,j.z)):Kt(nt.x,nt.y,g/p*ut)}for(let ut=M-1;ut>=0;ut--){const st=ut/M,nt=q*Math.cos(st*Math.PI/2),Pt=S*Math.sin(st*Math.PI/2)+R;for(let at=0,ce=ae.length;at<ce;at++){const ee=W(ae[at],ge[at],Pt);Kt(ee.x,ee.y,g+nt)}for(let at=0,ce=$.length;at<ce;at++){const ee=$[at];me=Y[at];for(let Ne=0,Xe=ee.length;Ne<Xe;Ne++){const it=W(ee[Ne],me[Ne],Pt);O?Kt(it.x,it.y+P[p-1].y,P[p-1].x+nt):Kt(it.x,it.y,g+nt)}}}wt(),kt();function wt(){const ut=r.length/3;if(y){let st=0,nt=J*st;for(let Pt=0;Pt<$e;Pt++){const at=Fe[Pt];Bn(at[2]+nt,at[1]+nt,at[0]+nt)}st=p+M*2,nt=J*st;for(let Pt=0;Pt<$e;Pt++){const at=Fe[Pt];Bn(at[0]+nt,at[1]+nt,at[2]+nt)}}else{for(let st=0;st<$e;st++){const nt=Fe[st];Bn(nt[2],nt[1],nt[0])}for(let st=0;st<$e;st++){const nt=Fe[st];Bn(nt[0]+J*p,nt[1]+J*p,nt[2]+J*p)}}n.addGroup(ut,r.length/3-ut,0)}function kt(){const ut=r.length/3;let st=0;Ct(ae,st),st+=ae.length;for(let nt=0,Pt=$.length;nt<Pt;nt++){const at=$[nt];Ct(at,st),st+=at.length}n.addGroup(ut,r.length/3-ut,1)}function Ct(ut,st){let nt=ut.length;for(;--nt>=0;){const Pt=nt;let at=nt-1;at<0&&(at=ut.length-1);for(let ce=0,ee=p+M*2;ce<ee;ce++){const Ne=J*ce,Xe=J*(ce+1),it=st+Pt+Ne,Qe=st+at+Ne,Ut=st+at+Xe,St=st+Pt+Xe;_n(it,Qe,Ut,St)}}}function Kt(ut,st,nt){u.push(ut),u.push(st),u.push(nt)}function Bn(ut,st,nt){ye(ut),ye(st),ye(nt);const Pt=r.length/3,at=U.generateTopUV(n,r,Pt-3,Pt-2,Pt-1);gi(at[0]),gi(at[1]),gi(at[2])}function _n(ut,st,nt,Pt){ye(ut),ye(st),ye(Pt),ye(st),ye(nt),ye(Pt);const at=r.length/3,ce=U.generateSideWallUV(n,r,at-6,at-3,at-2,at-1);gi(ce[0]),gi(ce[1]),gi(ce[3]),gi(ce[1]),gi(ce[2]),gi(ce[3])}function ye(ut){r.push(u[ut*3+0]),r.push(u[ut*3+1]),r.push(u[ut*3+2])}function gi(ut){s.push(ut.x),s.push(ut.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return PG(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];n.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new p8[r.type]().fromJSON(r)),new Ax(n,e.options)}}const NG={generateTopUV:function(i,e,t,n,r){const s=e[t*3],a=e[t*3+1],o=e[n*3],u=e[n*3+1],c=e[r*3],p=e[r*3+1];return[new rt(s,a),new rt(o,u),new rt(c,p)]},generateSideWallUV:function(i,e,t,n,r,s){const a=e[t*3],o=e[t*3+1],u=e[t*3+2],c=e[n*3],p=e[n*3+1],g=e[n*3+2],y=e[r*3],q=e[r*3+1],S=e[r*3+2],R=e[s*3],M=e[s*3+1],E=e[s*3+2];return Math.abs(o-p)<Math.abs(a-c)?[new rt(a,1-u),new rt(c,1-g),new rt(y,1-S),new rt(R,1-E)]:[new rt(o,1-u),new rt(p,1-g),new rt(q,1-S),new rt(M,1-E)]}};function PG(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class L3 extends Ii{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(n),u=Math.floor(r),c=o+1,p=u+1,g=e/o,y=t/u,q=[],S=[],R=[],M=[];for(let E=0;E<p;E++){const U=E*y-a;for(let P=0;P<c;P++){const O=P*g-s;S.push(O,-U,0),R.push(0,0,1),M.push(P/o),M.push(1-E/u)}}for(let E=0;E<u;E++)for(let U=0;U<o;U++){const P=U+c*E,O=U+c*(E+1),F=U+1+c*(E+1),I=U+1+c*E;q.push(P,O,I),q.push(O,F,I)}this.setIndex(q),this.setAttribute("position",new mi(S,3)),this.setAttribute("normal",new mi(R,3)),this.setAttribute("uv",new mi(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new L3(e.width,e.height,e.widthSegments,e.heightSegments)}}class Mu extends Ii{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const u=Math.min(a+o,Math.PI);let c=0;const p=[],g=new le,y=new le,q=[],S=[],R=[],M=[];for(let E=0;E<=n;E++){const U=[],P=E/n;let O=0;E===0&&a===0?O=.5/t:E===n&&u===Math.PI&&(O=-.5/t);for(let F=0;F<=t;F++){const I=F/t;g.x=-e*Math.cos(r+I*s)*Math.sin(a+P*o),g.y=e*Math.cos(a+P*o),g.z=e*Math.sin(r+I*s)*Math.sin(a+P*o),S.push(g.x,g.y,g.z),y.copy(g).normalize(),R.push(y.x,y.y,y.z),M.push(I+O,1-P),U.push(c++)}p.push(U)}for(let E=0;E<n;E++)for(let U=0;U<t;U++){const P=p[E][U+1],O=p[E][U],F=p[E+1][U],I=p[E+1][U+1];(E!==0||a>0)&&q.push(P,O,I),(E!==n-1||u<Math.PI)&&q.push(O,F,I)}this.setIndex(q),this.setAttribute("position",new mi(S,3)),this.setAttribute("normal",new mi(R,3)),this.setAttribute("uv",new mi(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class px extends Ii{constructor(e=new wN(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new le,u=new le,c=new rt;let p=new le;const g=[],y=[],q=[],S=[];R(),this.setIndex(S),this.setAttribute("position",new mi(g,3)),this.setAttribute("normal",new mi(y,3)),this.setAttribute("uv",new mi(q,2));function R(){for(let P=0;P<t;P++)M(P);M(s===!1?t:0),U(),E()}function M(P){p=e.getPointAt(P/t,p);const O=a.normals[P],F=a.binormals[P];for(let I=0;I<=r;I++){const z=I/r*Math.PI*2,j=Math.sin(z),k=-Math.cos(z);u.x=k*O.x+j*F.x,u.y=k*O.y+j*F.y,u.z=k*O.z+j*F.z,u.normalize(),y.push(u.x,u.y,u.z),o.x=p.x+n*u.x,o.y=p.y+n*u.y,o.z=p.z+n*u.z,g.push(o.x,o.y,o.z)}}function E(){for(let P=1;P<=t;P++)for(let O=1;O<=r;O++){const F=(r+1)*(P-1)+(O-1),I=(r+1)*P+(O-1),z=(r+1)*P+O,j=(r+1)*(P-1)+O;S.push(F,I,j),S.push(I,z,j)}}function U(){for(let P=0;P<=t;P++)for(let O=0;O<=r;O++)c.x=P/t,c.y=O/r,q.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new px(new p8[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class DG extends Ii{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new le,s=new le;if(e.index!==null){const a=e.attributes.position,o=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,p=u.length;c<p;++c){const g=u[c],y=g.start,q=g.count;for(let S=y,R=y+q;S<R;S+=3)for(let M=0;M<3;M++){const E=o.getX(S+M),U=o.getX(S+(M+1)%3);r.fromBufferAttribute(a,E),s.fromBufferAttribute(a,U),Pw(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,u=a.count/3;o<u;o++)for(let c=0;c<3;c++){const p=3*o+c,g=3*o+(c+1)%3;r.fromBufferAttribute(a,p),s.fromBufferAttribute(a,g),Pw(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new mi(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Pw(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}class LG extends na{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Xt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class PN extends na{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Xt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wc,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ks,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class UG extends PN{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return zn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Xt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Xt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Xt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class DN extends na{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Xt(16777215),this.specular=new Xt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wc,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ks,this.combine=M3,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class OG extends na{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Xt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wc,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class BG extends na{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wc,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Oc extends na{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wc,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ks,this.combine=M3,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class IG extends na{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Qk,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class FG extends na{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class kG extends na{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Xt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wc,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zG extends vA{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const m8={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class GG{constructor(e,t,n){const r=this;let s=!1,a=0,o=0,u;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(p){o++,s===!1&&r.onStart!==void 0&&r.onStart(p,a,o),s=!0},this.itemEnd=function(p){a++,r.onProgress!==void 0&&r.onProgress(p,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return u?u(p):p},this.setURLModifier=function(p){return u=p,this},this.addHandler=function(p,g){return c.push(p,g),this},this.removeHandler=function(p){const g=c.indexOf(p);return g!==-1&&c.splice(g,2),this},this.getHandler=function(p){for(let g=0,y=c.length;g<y;g+=2){const q=c[g],S=c[g+1];if(q.global&&(q.lastIndex=0),q.test(p))return S}return null}}}const VG=new GG;class U3{constructor(e){this.manager=e!==void 0?e:VG,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}U3.DEFAULT_MATERIAL_NAME="__DEFAULT";const cc={};class HG extends Error{constructor(e,t){super(e),this.response=t}}class jG extends U3{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=m8.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(cc[e]!==void 0){cc[e].push({onLoad:t,onProgress:n,onError:r});return}cc[e]=[],cc[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,u=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const p=cc[e],g=c.body.getReader(),y=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),q=y?parseInt(y):0,S=q!==0;let R=0;const M=new ReadableStream({start(E){U();function U(){g.read().then(({done:P,value:O})=>{if(P)E.close();else{R+=O.byteLength;const F=new ProgressEvent("progress",{lengthComputable:S,loaded:R,total:q});for(let I=0,z=p.length;I<z;I++){const j=p[I];j.onProgress&&j.onProgress(F)}E.enqueue(O),U()}},P=>{E.error(P)})}}});return new Response(M)}else throw new HG(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(u){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(p=>new DOMParser().parseFromString(p,o));case"json":return c.json();default:if(o==="")return c.text();{const g=/charset="?([^;"\s]*)"?/i.exec(o),y=g&&g[1]?g[1].toLowerCase():void 0,q=new TextDecoder(y);return c.arrayBuffer().then(S=>q.decode(S))}}}).then(c=>{m8.add(e,c);const p=cc[e];delete cc[e];for(let g=0,y=p.length;g<y;g++){const q=p[g];q.onLoad&&q.onLoad(c)}}).catch(c=>{const p=cc[e];if(p===void 0)throw this.manager.itemError(e),c;delete cc[e];for(let g=0,y=p.length;g<y;g++){const q=p[g];q.onError&&q.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class WG extends U3{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=m8.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=Zp("img");function u(){p(),m8.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(g){p(),r&&r(g),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){o.removeEventListener("load",u,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",u,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class mx extends U3{constructor(e){super(e)}load(e,t,n,r){const s=new ss,a=new WG(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class bh extends ur{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Xt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class $G extends bh{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ur.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Xt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const qg=new yn,Dw=new le,Lw=new le;class gx{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new rt(512,512),this.map=null,this.mapPass=null,this.matrix=new yn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new D3,this._frameExtents=new rt(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Dw.setFromMatrixPosition(e.matrixWorld),t.position.copy(Dw),Lw.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Lw),t.updateMatrixWorld(),qg.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qg),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(qg)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class XG extends gx{constructor(){super(new bs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=gh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class LN extends bh{constructor(e,t,n=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ur.DEFAULT_UP),this.updateMatrix(),this.target=new ur,this.distance=n,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new XG}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Uw=new yn,U2=new le,bg=new le;class QG extends gx{constructor(){super(new bs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new rt(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),U2.setFromMatrixPosition(e.matrixWorld),n.position.copy(U2),bg.copy(n.position),bg.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(bg),n.updateMatrixWorld(),r.makeTranslation(-U2.x,-U2.y,-U2.z),Uw.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Uw)}}class YG extends bh{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new QG}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class O3 extends P3{constructor(e=-1,t=1,n=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,a=n+e,o=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=p*this.view.offsetY,u=o-p*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class KG extends gx{constructor(){super(new O3(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class UN extends bh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ur.DEFAULT_UP),this.updateMatrix(),this.target=new ur,this.shadow=new KG}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ON extends bh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ZG extends bh{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class JG{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class eV extends bh{constructor(e=new JG,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class tV extends Ii{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class BN extends bs{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class IN{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Ow(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Ow();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Ow(){return performance.now()}class g8 extends cx{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}const Bw=new yn;class nV{constructor(e,t,n=0,r=1/0){this.ray=new N3(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new ox,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Bw.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Bw),this}intersectObject(e,t=!0,n=[]){return nv(e,this,n,t),n.sort(Iw),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)nv(e[r],this,n,t);return n.sort(Iw),n}}function Iw(i,e){return i.distance-e.distance}function nv(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let a=0,o=s.length;a<o;a++)nv(s[a],e,t,!0)}}class Fw{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=zn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(zn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class E5{constructor(e,t,n,r){E5.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const kw=new le,Gm=new le;class iV{constructor(e=new le,t=new le){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){kw.subVectors(e,this.start),Gm.subVectors(this.end,this.start);const n=Gm.dot(Gm);let s=Gm.dot(kw)/n;return t&&(s=zn(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class FN{constructor(){this.type="ShapePath",this.color=new Xt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new J_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,a){return this.currentPath.bezierCurveTo(e,t,n,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(E){const U=[];for(let P=0,O=E.length;P<O;P++){const F=E[P],I=new W6;I.curves=F.curves,U.push(I)}return U}function n(E,U){const P=U.length;let O=!1;for(let F=P-1,I=0;I<P;F=I++){let z=U[F],j=U[I],k=j.x-z.x,G=j.y-z.y;if(Math.abs(G)>Number.EPSILON){if(G<0&&(z=U[I],k=-k,j=U[F],G=-G),E.y<z.y||E.y>j.y)continue;if(E.y===z.y){if(E.x===z.x)return!0}else{const $=G*(E.x-z.x)-k*(E.y-z.y);if($===0)return!0;if($<0)continue;O=!O}}else{if(E.y!==z.y)continue;if(j.x<=E.x&&E.x<=z.x||z.x<=E.x&&E.x<=j.x)return!0}}return O}const r=xd.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,u;const c=[];if(s.length===1)return o=s[0],u=new W6,u.curves=o.curves,c.push(u),c;let p=!r(s[0].getPoints());p=e?!p:p;const g=[],y=[];let q=[],S=0,R;y[S]=void 0,q[S]=[];for(let E=0,U=s.length;E<U;E++)o=s[E],R=o.getPoints(),a=r(R),a=e?!a:a,a?(!p&&y[S]&&S++,y[S]={s:new W6,p:R},y[S].s.curves=o.curves,p&&S++,q[S]=[]):q[S].push({h:o,p:R[0]});if(!y[0])return t(s);if(y.length>1){let E=!1,U=0;for(let P=0,O=y.length;P<O;P++)g[P]=[];for(let P=0,O=y.length;P<O;P++){const F=q[P];for(let I=0;I<F.length;I++){const z=F[I];let j=!0;for(let k=0;k<y.length;k++)n(z.p,y[k].p)&&(P!==k&&U++,j?(j=!1,g[k].push(z)):E=!0);j&&g[P].push(z)}}U>0&&E===!1&&(q=g)}let M;for(let E=0,U=y.length;E<U;E++){u=y[E].s,c.push(u),M=q[E];for(let P=0,O=M.length;P<O;P++)u.holes.push(M[P].h)}return c}}class _x extends Eu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function zw(i,e,t,n){const r=rV(n);switch(t){case $y:return i*e;case Xy:return i*e;case Qy:return i*e*2;case C3:return i*e/r.components*r.byteLength;case mA:return i*e/r.components*r.byteLength;case mh:return i*e*2/r.components*r.byteLength;case gA:return i*e*2/r.components*r.byteLength;case R3:return i*e*3/r.components*r.byteLength;case Or:return i*e*4/r.components*r.byteLength;case _A:return i*e*4/r.components*r.byteLength;case sh:case F1:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case k1:case z1:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case jp:case $p:return Math.max(i,16)*Math.max(e,8)/4;case Hp:case Wp:return Math.max(i,8)*Math.max(e,8)/2;case Xp:case Dd:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Ld:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Ud:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Od:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case Bd:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case Id:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case Fd:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case kd:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case zd:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Gd:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case Vd:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case Hd:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case jd:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case Wd:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case $d:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Xd:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case ah:case Q_:case Y_:return Math.ceil(i/4)*Math.ceil(e/4)*16;case Yy:case Qp:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Yp:case Kp:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function rV(i){switch(i){case Ur:case ih:return{byteLength:1,components:1};case Ml:case rh:case Ss:return{byteLength:2,components:1};case m5:case g5:return{byteLength:2,components:4};case Qi:case qs:case kr:return{byteLength:4,components:1};case _5:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pA}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pA);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function kN(){let i=null,e=!1,t=null,n=null;function r(s,a){t(s,a),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function sV(i){const e=new WeakMap;function t(o,u){const c=o.array,p=o.usage,g=c.byteLength,y=i.createBuffer();i.bindBuffer(u,y),i.bufferData(u,c,p),o.onUploadCallback();let q;if(c instanceof Float32Array)q=i.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?q=i.HALF_FLOAT:q=i.UNSIGNED_SHORT;else if(c instanceof Int16Array)q=i.SHORT;else if(c instanceof Uint32Array)q=i.UNSIGNED_INT;else if(c instanceof Int32Array)q=i.INT;else if(c instanceof Int8Array)q=i.BYTE;else if(c instanceof Uint8Array)q=i.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)q=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:y,type:q,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:g}}function n(o,u,c){const p=u.array,g=u.updateRanges;if(i.bindBuffer(c,o),g.length===0)i.bufferSubData(c,0,p);else{g.sort((q,S)=>q.start-S.start);let y=0;for(let q=1;q<g.length;q++){const S=g[y],R=g[q];R.start<=S.start+S.count+1?S.count=Math.max(S.count,R.start+R.count-S.start):(++y,g[y]=R)}g.length=y+1;for(let q=0,S=g.length;q<S;q++){const R=g[q];i.bufferSubData(c,R.start*p.BYTES_PER_ELEMENT,p,R.start,R.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const u=e.get(o);u&&(i.deleteBuffer(u.buffer),e.delete(o))}function a(o,u){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const p=e.get(o);(!p||p.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,u));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(c.buffer,o,u),c.version=o.version}}return{get:r,remove:s,update:a}}var aV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,oV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,lV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,uV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cV=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,hV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,fV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,dV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,AV=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,pV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,mV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,gV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_V=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,vV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,yV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,xV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,qV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,bV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,SV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,TV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,wV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,EV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,MV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,RV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,CV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,NV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,PV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,DV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,LV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,UV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,OV="gl_FragColor = linearToOutputTexel( gl_FragColor );",BV=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,IV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,FV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,kV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,zV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,GV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,VV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,HV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,jV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,WV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$V=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,XV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,QV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,YV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,KV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ZV=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,JV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,eH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,tH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,nH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,iH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,rH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,sH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,aH=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,oH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,lH=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,uH=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,cH=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hH=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,fH=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,dH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,pH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,mH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,gH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_H=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,vH=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,yH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,xH=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,qH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,bH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,SH=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,TH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,EH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,MH=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,RH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,CH=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,NH=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,PH=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,DH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,LH=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,UH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,OH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,BH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,IH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,FH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,kH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,zH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,GH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,VH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,HH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,jH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,WH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,$H=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,XH=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,QH=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,YH=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,KH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ZH=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,JH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,ej=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,tj=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,nj=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ij=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,rj=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const sj=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,aj=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,oj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,lj=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cj=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hj=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fj=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,dj=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Aj=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,pj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,mj=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gj=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_j=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vj=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,yj=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xj=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qj=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bj=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Sj=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tj=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,wj=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Ej=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Mj=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rj=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Cj=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nj=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Pj=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dj=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Lj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Uj=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Oj=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Bj=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ij=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Qn={alphahash_fragment:aV,alphahash_pars_fragment:oV,alphamap_fragment:lV,alphamap_pars_fragment:uV,alphatest_fragment:cV,alphatest_pars_fragment:hV,aomap_fragment:fV,aomap_pars_fragment:dV,batching_pars_vertex:AV,batching_vertex:pV,begin_vertex:mV,beginnormal_vertex:gV,bsdfs:_V,iridescence_fragment:vV,bumpmap_pars_fragment:yV,clipping_planes_fragment:xV,clipping_planes_pars_fragment:qV,clipping_planes_pars_vertex:bV,clipping_planes_vertex:SV,color_fragment:TV,color_pars_fragment:wV,color_pars_vertex:EV,color_vertex:MV,common:RV,cube_uv_reflection_fragment:CV,defaultnormal_vertex:NV,displacementmap_pars_vertex:PV,displacementmap_vertex:DV,emissivemap_fragment:LV,emissivemap_pars_fragment:UV,colorspace_fragment:OV,colorspace_pars_fragment:BV,envmap_fragment:IV,envmap_common_pars_fragment:FV,envmap_pars_fragment:kV,envmap_pars_vertex:zV,envmap_physical_pars_fragment:ZV,envmap_vertex:GV,fog_vertex:VV,fog_pars_vertex:HV,fog_fragment:jV,fog_pars_fragment:WV,gradientmap_pars_fragment:$V,lightmap_pars_fragment:XV,lights_lambert_fragment:QV,lights_lambert_pars_fragment:YV,lights_pars_begin:KV,lights_toon_fragment:JV,lights_toon_pars_fragment:eH,lights_phong_fragment:tH,lights_phong_pars_fragment:nH,lights_physical_fragment:iH,lights_physical_pars_fragment:rH,lights_fragment_begin:sH,lights_fragment_maps:aH,lights_fragment_end:oH,logdepthbuf_fragment:lH,logdepthbuf_pars_fragment:uH,logdepthbuf_pars_vertex:cH,logdepthbuf_vertex:hH,map_fragment:fH,map_pars_fragment:dH,map_particle_fragment:AH,map_particle_pars_fragment:pH,metalnessmap_fragment:mH,metalnessmap_pars_fragment:gH,morphinstance_vertex:_H,morphcolor_vertex:vH,morphnormal_vertex:yH,morphtarget_pars_vertex:xH,morphtarget_vertex:qH,normal_fragment_begin:bH,normal_fragment_maps:SH,normal_pars_fragment:TH,normal_pars_vertex:wH,normal_vertex:EH,normalmap_pars_fragment:MH,clearcoat_normal_fragment_begin:RH,clearcoat_normal_fragment_maps:CH,clearcoat_pars_fragment:NH,iridescence_pars_fragment:PH,opaque_fragment:DH,packing:LH,premultiplied_alpha_fragment:UH,project_vertex:OH,dithering_fragment:BH,dithering_pars_fragment:IH,roughnessmap_fragment:FH,roughnessmap_pars_fragment:kH,shadowmap_pars_fragment:zH,shadowmap_pars_vertex:GH,shadowmap_vertex:VH,shadowmask_pars_fragment:HH,skinbase_vertex:jH,skinning_pars_vertex:WH,skinning_vertex:$H,skinnormal_vertex:XH,specularmap_fragment:QH,specularmap_pars_fragment:YH,tonemapping_fragment:KH,tonemapping_pars_fragment:ZH,transmission_fragment:JH,transmission_pars_fragment:ej,uv_pars_fragment:tj,uv_pars_vertex:nj,uv_vertex:ij,worldpos_vertex:rj,background_vert:sj,background_frag:aj,backgroundCube_vert:oj,backgroundCube_frag:lj,cube_vert:uj,cube_frag:cj,depth_vert:hj,depth_frag:fj,distanceRGBA_vert:dj,distanceRGBA_frag:Aj,equirect_vert:pj,equirect_frag:mj,linedashed_vert:gj,linedashed_frag:_j,meshbasic_vert:vj,meshbasic_frag:yj,meshlambert_vert:xj,meshlambert_frag:qj,meshmatcap_vert:bj,meshmatcap_frag:Sj,meshnormal_vert:Tj,meshnormal_frag:wj,meshphong_vert:Ej,meshphong_frag:Mj,meshphysical_vert:Rj,meshphysical_frag:Cj,meshtoon_vert:Nj,meshtoon_frag:Pj,points_vert:Dj,points_frag:Lj,shadow_vert:Uj,shadow_frag:Oj,sprite_vert:Bj,sprite_frag:Ij},Dt={common:{diffuse:{value:new Xt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Cn},alphaMap:{value:null},alphaMapTransform:{value:new Cn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Cn}},envmap:{envMap:{value:null},envMapRotation:{value:new Cn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Cn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Cn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Cn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Cn},normalScale:{value:new rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Cn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Cn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Cn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Cn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Xt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Xt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Cn},alphaTest:{value:0},uvTransform:{value:new Cn}},sprite:{diffuse:{value:new Xt(16777215)},opacity:{value:1},center:{value:new rt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Cn},alphaMap:{value:null},alphaMapTransform:{value:new Cn},alphaTest:{value:0}}},Ra={basic:{uniforms:ha([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.fog]),vertexShader:Qn.meshbasic_vert,fragmentShader:Qn.meshbasic_frag},lambert:{uniforms:ha([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,Dt.lights,{emissive:{value:new Xt(0)}}]),vertexShader:Qn.meshlambert_vert,fragmentShader:Qn.meshlambert_frag},phong:{uniforms:ha([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,Dt.lights,{emissive:{value:new Xt(0)},specular:{value:new Xt(1118481)},shininess:{value:30}}]),vertexShader:Qn.meshphong_vert,fragmentShader:Qn.meshphong_frag},standard:{uniforms:ha([Dt.common,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.roughnessmap,Dt.metalnessmap,Dt.fog,Dt.lights,{emissive:{value:new Xt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qn.meshphysical_vert,fragmentShader:Qn.meshphysical_frag},toon:{uniforms:ha([Dt.common,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.gradientmap,Dt.fog,Dt.lights,{emissive:{value:new Xt(0)}}]),vertexShader:Qn.meshtoon_vert,fragmentShader:Qn.meshtoon_frag},matcap:{uniforms:ha([Dt.common,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,{matcap:{value:null}}]),vertexShader:Qn.meshmatcap_vert,fragmentShader:Qn.meshmatcap_frag},points:{uniforms:ha([Dt.points,Dt.fog]),vertexShader:Qn.points_vert,fragmentShader:Qn.points_frag},dashed:{uniforms:ha([Dt.common,Dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qn.linedashed_vert,fragmentShader:Qn.linedashed_frag},depth:{uniforms:ha([Dt.common,Dt.displacementmap]),vertexShader:Qn.depth_vert,fragmentShader:Qn.depth_frag},normal:{uniforms:ha([Dt.common,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,{opacity:{value:1}}]),vertexShader:Qn.meshnormal_vert,fragmentShader:Qn.meshnormal_frag},sprite:{uniforms:ha([Dt.sprite,Dt.fog]),vertexShader:Qn.sprite_vert,fragmentShader:Qn.sprite_frag},background:{uniforms:{uvTransform:{value:new Cn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Qn.background_vert,fragmentShader:Qn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Cn}},vertexShader:Qn.backgroundCube_vert,fragmentShader:Qn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Qn.cube_vert,fragmentShader:Qn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qn.equirect_vert,fragmentShader:Qn.equirect_frag},distanceRGBA:{uniforms:ha([Dt.common,Dt.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qn.distanceRGBA_vert,fragmentShader:Qn.distanceRGBA_frag},shadow:{uniforms:ha([Dt.lights,Dt.fog,{color:{value:new Xt(0)},opacity:{value:1}}]),vertexShader:Qn.shadow_vert,fragmentShader:Qn.shadow_frag}};Ra.physical={uniforms:ha([Ra.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Cn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Cn},clearcoatNormalScale:{value:new rt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Cn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Cn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Cn},sheen:{value:0},sheenColor:{value:new Xt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Cn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Cn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Cn},transmissionSamplerSize:{value:new rt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Cn},attenuationDistance:{value:0},attenuationColor:{value:new Xt(0)},specularColor:{value:new Xt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Cn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Cn},anisotropyVector:{value:new rt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Cn}}]),vertexShader:Qn.meshphysical_vert,fragmentShader:Qn.meshphysical_frag};const Vm={r:0,b:0,g:0},M0=new ks,Fj=new yn;function kj(i,e,t,n,r,s,a){const o=new Xt(0);let u=s===!0?0:1,c,p,g=null,y=0,q=null;function S(P){let O=P.isScene===!0?P.background:null;return O&&O.isTexture&&(O=(P.backgroundBlurriness>0?t:e).get(O)),O}function R(P){let O=!1;const F=S(P);F===null?E(o,u):F&&F.isColor&&(E(F,1),O=!0);const I=i.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,a):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||O)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function M(P,O){const F=S(O);F&&(F.isCubeTexture||F.mapping===dh)?(p===void 0&&(p=new yi(new J1(1,1,1),new Ga({name:"BackgroundCubeMaterial",uniforms:Yd(Ra.backgroundCube.uniforms),vertexShader:Ra.backgroundCube.vertexShader,fragmentShader:Ra.backgroundCube.fragmentShader,side:Oi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(I,z,j){this.matrixWorld.copyPosition(j.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),M0.copy(O.backgroundRotation),M0.x*=-1,M0.y*=-1,M0.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(M0.y*=-1,M0.z*=-1),p.material.uniforms.envMap.value=F,p.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(Fj.makeRotationFromEuler(M0)),p.material.toneMapped=Hn.getTransfer(F.colorSpace)!==Ri,(g!==F||y!==F.version||q!==i.toneMapping)&&(p.material.needsUpdate=!0,g=F,y=F.version,q=i.toneMapping),p.layers.enableAll(),P.unshift(p,p.geometry,p.material,0,0,null)):F&&F.isTexture&&(c===void 0&&(c=new yi(new L3(2,2),new Ga({name:"BackgroundMaterial",uniforms:Yd(Ra.background.uniforms),vertexShader:Ra.background.vertexShader,fragmentShader:Ra.background.fragmentShader,side:Ia,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=F,c.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,c.material.toneMapped=Hn.getTransfer(F.colorSpace)!==Ri,F.matrixAutoUpdate===!0&&F.updateMatrix(),c.material.uniforms.uvTransform.value.copy(F.matrix),(g!==F||y!==F.version||q!==i.toneMapping)&&(c.material.needsUpdate=!0,g=F,y=F.version,q=i.toneMapping),c.layers.enableAll(),P.unshift(c,c.geometry,c.material,0,0,null))}function E(P,O){P.getRGB(Vm,gN(i)),n.buffers.color.setClear(Vm.r,Vm.g,Vm.b,O,a)}function U(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(P,O=1){o.set(P),u=O,E(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(P){u=P,E(o,u)},render:R,addToRenderList:M,dispose:U}}function zj(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=y(null);let s=r,a=!1;function o(G,$,te,ne,ue){let ae=!1;const W=g(ne,te,$);s!==W&&(s=W,c(s.object)),ae=q(G,ne,te,ue),ae&&S(G,ne,te,ue),ue!==null&&e.update(ue,i.ELEMENT_ARRAY_BUFFER),(ae||a)&&(a=!1,O(G,$,te,ne),ue!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(ue).buffer))}function u(){return i.createVertexArray()}function c(G){return i.bindVertexArray(G)}function p(G){return i.deleteVertexArray(G)}function g(G,$,te){const ne=te.wireframe===!0;let ue=n[G.id];ue===void 0&&(ue={},n[G.id]=ue);let ae=ue[$.id];ae===void 0&&(ae={},ue[$.id]=ae);let W=ae[ne];return W===void 0&&(W=y(u()),ae[ne]=W),W}function y(G){const $=[],te=[],ne=[];for(let ue=0;ue<t;ue++)$[ue]=0,te[ue]=0,ne[ue]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:te,attributeDivisors:ne,object:G,attributes:{},index:null}}function q(G,$,te,ne){const ue=s.attributes,ae=$.attributes;let W=0;const J=te.getAttributes();for(const re in J)if(J[re].location>=0){const Y=ue[re];let me=ae[re];if(me===void 0&&(re==="instanceMatrix"&&G.instanceMatrix&&(me=G.instanceMatrix),re==="instanceColor"&&G.instanceColor&&(me=G.instanceColor)),Y===void 0||Y.attribute!==me||me&&Y.data!==me.data)return!0;W++}return s.attributesNum!==W||s.index!==ne}function S(G,$,te,ne){const ue={},ae=$.attributes;let W=0;const J=te.getAttributes();for(const re in J)if(J[re].location>=0){let Y=ae[re];Y===void 0&&(re==="instanceMatrix"&&G.instanceMatrix&&(Y=G.instanceMatrix),re==="instanceColor"&&G.instanceColor&&(Y=G.instanceColor));const me={};me.attribute=Y,Y&&Y.data&&(me.data=Y.data),ue[re]=me,W++}s.attributes=ue,s.attributesNum=W,s.index=ne}function R(){const G=s.newAttributes;for(let $=0,te=G.length;$<te;$++)G[$]=0}function M(G){E(G,0)}function E(G,$){const te=s.newAttributes,ne=s.enabledAttributes,ue=s.attributeDivisors;te[G]=1,ne[G]===0&&(i.enableVertexAttribArray(G),ne[G]=1),ue[G]!==$&&(i.vertexAttribDivisor(G,$),ue[G]=$)}function U(){const G=s.newAttributes,$=s.enabledAttributes;for(let te=0,ne=$.length;te<ne;te++)$[te]!==G[te]&&(i.disableVertexAttribArray(te),$[te]=0)}function P(G,$,te,ne,ue,ae,W){W===!0?i.vertexAttribIPointer(G,$,te,ue,ae):i.vertexAttribPointer(G,$,te,ne,ue,ae)}function O(G,$,te,ne){R();const ue=ne.attributes,ae=te.getAttributes(),W=$.defaultAttributeValues;for(const J in ae){const re=ae[J];if(re.location>=0){let ge=ue[J];if(ge===void 0&&(J==="instanceMatrix"&&G.instanceMatrix&&(ge=G.instanceMatrix),J==="instanceColor"&&G.instanceColor&&(ge=G.instanceColor)),ge!==void 0){const Y=ge.normalized,me=ge.itemSize,Me=e.get(ge);if(Me===void 0)continue;const Be=Me.buffer,be=Me.type,Fe=Me.bytesPerElement,$e=be===i.INT||be===i.UNSIGNED_INT||ge.gpuType===qs;if(ge.isInterleavedBufferAttribute){const ht=ge.data,wt=ht.stride,kt=ge.offset;if(ht.isInstancedInterleavedBuffer){for(let Ct=0;Ct<re.locationSize;Ct++)E(re.location+Ct,ht.meshPerAttribute);G.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=ht.meshPerAttribute*ht.count)}else for(let Ct=0;Ct<re.locationSize;Ct++)M(re.location+Ct);i.bindBuffer(i.ARRAY_BUFFER,Be);for(let Ct=0;Ct<re.locationSize;Ct++)P(re.location+Ct,me/re.locationSize,be,Y,wt*Fe,(kt+me/re.locationSize*Ct)*Fe,$e)}else{if(ge.isInstancedBufferAttribute){for(let ht=0;ht<re.locationSize;ht++)E(re.location+ht,ge.meshPerAttribute);G.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let ht=0;ht<re.locationSize;ht++)M(re.location+ht);i.bindBuffer(i.ARRAY_BUFFER,Be);for(let ht=0;ht<re.locationSize;ht++)P(re.location+ht,me/re.locationSize,be,Y,me*Fe,me/re.locationSize*ht*Fe,$e)}}else if(W!==void 0){const Y=W[J];if(Y!==void 0)switch(Y.length){case 2:i.vertexAttrib2fv(re.location,Y);break;case 3:i.vertexAttrib3fv(re.location,Y);break;case 4:i.vertexAttrib4fv(re.location,Y);break;default:i.vertexAttrib1fv(re.location,Y)}}}}U()}function F(){j();for(const G in n){const $=n[G];for(const te in $){const ne=$[te];for(const ue in ne)p(ne[ue].object),delete ne[ue];delete $[te]}delete n[G]}}function I(G){if(n[G.id]===void 0)return;const $=n[G.id];for(const te in $){const ne=$[te];for(const ue in ne)p(ne[ue].object),delete ne[ue];delete $[te]}delete n[G.id]}function z(G){for(const $ in n){const te=n[$];if(te[G.id]===void 0)continue;const ne=te[G.id];for(const ue in ne)p(ne[ue].object),delete ne[ue];delete te[G.id]}}function j(){k(),a=!0,s!==r&&(s=r,c(s.object))}function k(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:j,resetDefaultState:k,dispose:F,releaseStatesOfGeometry:I,releaseStatesOfProgram:z,initAttributes:R,enableAttribute:M,disableUnusedAttributes:U}}function Gj(i,e,t){let n;function r(c){n=c}function s(c,p){i.drawArrays(n,c,p),t.update(p,n,1)}function a(c,p,g){g!==0&&(i.drawArraysInstanced(n,c,p,g),t.update(p,n,g))}function o(c,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,p,0,g);let q=0;for(let S=0;S<g;S++)q+=p[S];t.update(q,n,1)}function u(c,p,g,y){if(g===0)return;const q=e.get("WEBGL_multi_draw");if(q===null)for(let S=0;S<c.length;S++)a(c[S],p[S],y[S]);else{q.multiDrawArraysInstancedWEBGL(n,c,0,p,0,y,0,g);let S=0;for(let R=0;R<g;R++)S+=p[R]*y[R];t.update(S,n,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=u}function Vj(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(z){return!(z!==Or&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(z){const j=z===Ss&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==Ur&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==kr&&!j)}function u(z){if(z==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const p=u(c);p!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",p,"instead."),c=p);const g=t.logarithmicDepthBuffer===!0,y=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),q=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),S=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),R=i.getParameter(i.MAX_TEXTURE_SIZE),M=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),E=i.getParameter(i.MAX_VERTEX_ATTRIBS),U=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),P=i.getParameter(i.MAX_VARYING_VECTORS),O=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),F=S>0,I=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:g,reverseDepthBuffer:y,maxTextures:q,maxVertexTextures:S,maxTextureSize:R,maxCubemapSize:M,maxAttributes:E,maxVertexUniforms:U,maxVaryings:P,maxFragmentUniforms:O,vertexTextures:F,maxSamples:I}}function Hj(i){const e=this;let t=null,n=0,r=!1,s=!1;const a=new tu,o=new Cn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y){const q=g.length!==0||y||n!==0||r;return r=y,n=g.length,q},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,y){t=p(g,y,0)},this.setState=function(g,y,q){const S=g.clippingPlanes,R=g.clipIntersection,M=g.clipShadows,E=i.get(g);if(!r||S===null||S.length===0||s&&!M)s?p(null):c();else{const U=s?0:n,P=U*4;let O=E.clippingState||null;u.value=O,O=p(S,y,P,q);for(let F=0;F!==P;++F)O[F]=t[F];E.clippingState=O,this.numIntersection=R?this.numPlanes:0,this.numPlanes+=U}};function c(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(g,y,q,S){const R=g!==null?g.length:0;let M=null;if(R!==0){if(M=u.value,S!==!0||M===null){const E=q+R*4,U=y.matrixWorldInverse;o.getNormalMatrix(U),(M===null||M.length<E)&&(M=new Float32Array(E));for(let P=0,O=q;P!==R;++P,O+=4)a.copy(g[P]).applyMatrix4(U,o),a.normal.toArray(M,O),M[O+3]=a.constant}u.value=M,u.needsUpdate=!0}return e.numPlanes=R,e.numIntersection=0,M}}function jj(i){let e=new WeakMap;function t(a,o){return o===W1?a.mapping=Yo:o===$1&&(a.mapping=Ko),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===W1||o===$1)if(e.has(a)){const u=e.get(a).texture;return t(u,a.mapping)}else{const u=a.image;if(u&&u.height>0){const c=new vN(u.height);return c.fromEquirectangularTexture(i,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const u=e.get(o);u!==void 0&&(e.delete(o),u.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const ud=4,Gw=[.125,.215,.35,.446,.526,.582],W0=20,Sg=new O3,Vw=new Xt;let Tg=null,wg=0,Eg=0,Mg=!1;const z0=(1+Math.sqrt(5))/2,Cf=1/z0,Hw=[new le(-z0,Cf,0),new le(z0,Cf,0),new le(-Cf,0,z0),new le(Cf,0,z0),new le(0,z0,-Cf),new le(0,z0,Cf),new le(-1,1,-1),new le(1,1,-1),new le(-1,1,1),new le(1,1,1)],Wj=new le;let jw=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,s={}){const{size:a=256,position:o=Wj}=s;Tg=this._renderer.getRenderTarget(),wg=this._renderer.getActiveCubeFace(),Eg=this._renderer.getActiveMipmapLevel(),Mg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,n,r,u,o),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Xw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$w(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Tg,wg,Eg),this._renderer.xr.enabled=Mg,e.scissorTest=!1,Hm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Yo||e.mapping===Ko?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Tg=this._renderer.getRenderTarget(),wg=this._renderer.getActiveCubeFace(),Eg=this._renderer.getActiveMipmapLevel(),Mg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:rs,minFilter:rs,generateMipmaps:!1,type:Ss,format:Or,colorSpace:Pl,depthBuffer:!1},r=Ww(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ww(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$j(s)),this._blurMaterial=Xj(s,e,t)}return r}_compileMaterial(e){const t=new yi(this._lodPlanes[0],e);this._renderer.compile(t,Sg)}_sceneToCubeUV(e,t,n,r,s){const u=new bs(90,1,t,n),c=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],g=this._renderer,y=g.autoClear,q=g.toneMapping;g.getClearColor(Vw),g.toneMapping=za,g.autoClear=!1;const S=new jo({name:"PMREM.Background",side:Oi,depthWrite:!1,depthTest:!1}),R=new yi(new J1,S);let M=!1;const E=e.background;E?E.isColor&&(S.color.copy(E),e.background=null,M=!0):(S.color.copy(Vw),M=!0);for(let U=0;U<6;U++){const P=U%3;P===0?(u.up.set(0,c[U],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+p[U],s.y,s.z)):P===1?(u.up.set(0,0,c[U]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+p[U],s.z)):(u.up.set(0,c[U],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+p[U]));const O=this._cubeSize;Hm(r,P*O,U>2?O:0,O,O),g.setRenderTarget(r),M&&g.render(R,u),g.render(e,u)}R.geometry.dispose(),R.material.dispose(),g.toneMapping=q,g.autoClear=y,e.background=E}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Yo||e.mapping===Ko;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Xw()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$w());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new yi(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const u=this._cubeSize;Hm(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(a,Sg)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=Hw[(r-s-1)%Hw.length];this._blur(e,s-1,s,a,o)}t.autoClear=n}_blur(e,t,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,o){const u=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,g=new yi(this._lodPlanes[r],c),y=c.uniforms,q=this._sizeLods[n]-1,S=isFinite(s)?Math.PI/(2*q):2*Math.PI/(2*W0-1),R=s/S,M=isFinite(s)?1+Math.floor(p*R):W0;M>W0&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${W0}`);const E=[];let U=0;for(let z=0;z<W0;++z){const j=z/R,k=Math.exp(-j*j/2);E.push(k),z===0?U+=k:z<M&&(U+=2*k)}for(let z=0;z<E.length;z++)E[z]=E[z]/U;y.envMap.value=e.texture,y.samples.value=M,y.weights.value=E,y.latitudinal.value=a==="latitudinal",o&&(y.poleAxis.value=o);const{_lodMax:P}=this;y.dTheta.value=S,y.mipInt.value=P-n;const O=this._sizeLods[r],F=3*O*(r>P-ud?r-P+ud:0),I=4*(this._cubeSize-O);Hm(t,F,I,3*O,2*O),u.setRenderTarget(t),u.render(g,Sg)}};function $j(i){const e=[],t=[],n=[];let r=i;const s=i-ud+1+Gw.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let u=1/o;a>i-ud?u=Gw[a-i+ud-1]:a===0&&(u=0),n.push(u);const c=1/(o-2),p=-c,g=1+c,y=[p,p,g,p,g,g,p,p,g,g,p,g],q=6,S=6,R=3,M=2,E=1,U=new Float32Array(R*S*q),P=new Float32Array(M*S*q),O=new Float32Array(E*S*q);for(let I=0;I<q;I++){const z=I%3*2/3-1,j=I>2?0:-1,k=[z,j,0,z+2/3,j,0,z+2/3,j+1,0,z,j,0,z+2/3,j+1,0,z,j+1,0];U.set(k,R*S*I),P.set(y,M*S*I);const G=[I,I,I,I,I,I];O.set(G,E*S*I)}const F=new Ii;F.setAttribute("position",new _r(U,R)),F.setAttribute("uv",new _r(P,M)),F.setAttribute("faceIndex",new _r(O,E)),e.push(F),r>ud&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Ww(i,e,t){const n=new X1(i,e,t);return n.texture.mapping=dh,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Hm(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function Xj(i,e,t){const n=new Float32Array(W0),r=new le(0,1,0);return new Ga({name:"SphericalGaussianBlur",defines:{n:W0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:vx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fa,depthTest:!1,depthWrite:!1})}function $w(){return new Ga({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fa,depthTest:!1,depthWrite:!1})}function Xw(){return new Ga({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fa,depthTest:!1,depthWrite:!1})}function vx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Qj(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const u=o.mapping,c=u===W1||u===$1,p=u===Yo||u===Ko;if(c||p){let g=e.get(o);const y=g!==void 0?g.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==y)return t===null&&(t=new jw(i)),g=c?t.fromEquirectangular(o,g):t.fromCubemap(o,g),g.texture.pmremVersion=o.pmremVersion,e.set(o,g),g.texture;if(g!==void 0)return g.texture;{const q=o.image;return c&&q&&q.height>0||p&&q&&r(q)?(t===null&&(t=new jw(i)),g=c?t.fromEquirectangular(o):t.fromCubemap(o),g.texture.pmremVersion=o.pmremVersion,e.set(o,g),o.addEventListener("dispose",s),g.texture):null}}}return o}function r(o){let u=0;const c=6;for(let p=0;p<c;p++)o[p]!==void 0&&u++;return u===c}function s(o){const u=o.target;u.removeEventListener("dispose",s);const c=e.get(u);c!==void 0&&(e.delete(u),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function Yj(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&Dl("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Kj(i,e,t,n){const r={},s=new WeakMap;function a(g){const y=g.target;y.index!==null&&e.remove(y.index);for(const S in y.attributes)e.remove(y.attributes[S]);y.removeEventListener("dispose",a),delete r[y.id];const q=s.get(y);q&&(e.remove(q),s.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function o(g,y){return r[y.id]===!0||(y.addEventListener("dispose",a),r[y.id]=!0,t.memory.geometries++),y}function u(g){const y=g.attributes;for(const q in y)e.update(y[q],i.ARRAY_BUFFER)}function c(g){const y=[],q=g.index,S=g.attributes.position;let R=0;if(q!==null){const U=q.array;R=q.version;for(let P=0,O=U.length;P<O;P+=3){const F=U[P+0],I=U[P+1],z=U[P+2];y.push(F,I,I,z,z,F)}}else if(S!==void 0){const U=S.array;R=S.version;for(let P=0,O=U.length/3-1;P<O;P+=3){const F=P+0,I=P+1,z=P+2;y.push(F,I,I,z,z,F)}}else return;const M=new(rx(y)?ux:lx)(y,1);M.version=R;const E=s.get(g);E&&e.remove(E),s.set(g,M)}function p(g){const y=s.get(g);if(y){const q=g.index;q!==null&&y.version<q.version&&c(g)}else c(g);return s.get(g)}return{get:o,update:u,getWireframeAttribute:p}}function Zj(i,e,t){let n;function r(y){n=y}let s,a;function o(y){s=y.type,a=y.bytesPerElement}function u(y,q){i.drawElements(n,q,s,y*a),t.update(q,n,1)}function c(y,q,S){S!==0&&(i.drawElementsInstanced(n,q,s,y*a,S),t.update(q,n,S))}function p(y,q,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,q,0,s,y,0,S);let M=0;for(let E=0;E<S;E++)M+=q[E];t.update(M,n,1)}function g(y,q,S,R){if(S===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let E=0;E<y.length;E++)c(y[E]/a,q[E],R[E]);else{M.multiDrawElementsInstancedWEBGL(n,q,0,s,y,0,R,0,S);let E=0;for(let U=0;U<S;U++)E+=q[U]*R[U];t.update(E,n,1)}}this.setMode=r,this.setIndex=o,this.render=u,this.renderInstances=c,this.renderMultiDraw=p,this.renderMultiDrawInstances=g}function Jj(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(s/3);break;case i.LINES:t.lines+=o*(s/2);break;case i.LINE_STRIP:t.lines+=o*(s-1);break;case i.LINE_LOOP:t.lines+=o*s;break;case i.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function eW(i,e,t){const n=new WeakMap,r=new sn;function s(a,o,u){const c=a.morphTargetInfluences,p=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,g=p!==void 0?p.length:0;let y=n.get(o);if(y===void 0||y.count!==g){let k=function(){z.dispose(),n.delete(o),o.removeEventListener("dispose",k)};y!==void 0&&y.texture.dispose();const q=o.morphAttributes.position!==void 0,S=o.morphAttributes.normal!==void 0,R=o.morphAttributes.color!==void 0,M=o.morphAttributes.position||[],E=o.morphAttributes.normal||[],U=o.morphAttributes.color||[];let P=0;q===!0&&(P=1),S===!0&&(P=2),R===!0&&(P=3);let O=o.attributes.position.count*P,F=1;O>e.maxTextureSize&&(F=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const I=new Float32Array(O*F*4*g),z=new ax(I,O,F,g);z.type=kr,z.needsUpdate=!0;const j=P*4;for(let G=0;G<g;G++){const $=M[G],te=E[G],ne=U[G],ue=O*F*4*G;for(let ae=0;ae<$.count;ae++){const W=ae*j;q===!0&&(r.fromBufferAttribute($,ae),I[ue+W+0]=r.x,I[ue+W+1]=r.y,I[ue+W+2]=r.z,I[ue+W+3]=0),S===!0&&(r.fromBufferAttribute(te,ae),I[ue+W+4]=r.x,I[ue+W+5]=r.y,I[ue+W+6]=r.z,I[ue+W+7]=0),R===!0&&(r.fromBufferAttribute(ne,ae),I[ue+W+8]=r.x,I[ue+W+9]=r.y,I[ue+W+10]=r.z,I[ue+W+11]=ne.itemSize===4?r.w:1)}}y={count:g,texture:z,size:new rt(O,F)},n.set(o,y),o.addEventListener("dispose",k)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)u.getUniforms().setValue(i,"morphTexture",a.morphTexture,t);else{let q=0;for(let R=0;R<c.length;R++)q+=c[R];const S=o.morphTargetsRelative?1:1-q;u.getUniforms().setValue(i,"morphTargetBaseInfluence",S),u.getUniforms().setValue(i,"morphTargetInfluences",c)}u.getUniforms().setValue(i,"morphTargetsTexture",y.texture,t),u.getUniforms().setValue(i,"morphTargetsTextureSize",y.size)}return{update:s}}function tW(i,e,t,n){let r=new WeakMap;function s(u){const c=n.render.frame,p=u.geometry,g=e.get(u,p);if(r.get(g)!==c&&(e.update(g),r.set(g,c)),u.isInstancedMesh&&(u.hasEventListener("dispose",o)===!1&&u.addEventListener("dispose",o),r.get(u)!==c&&(t.update(u.instanceMatrix,i.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,i.ARRAY_BUFFER),r.set(u,c))),u.isSkinnedMesh){const y=u.skeleton;r.get(y)!==c&&(y.update(),r.set(y,c))}return g}function a(){r=new WeakMap}function o(u){const c=u.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const zN=new ss,Qw=new qo(1,1),GN=new ax,VN=new Lz,HN=new q5,Yw=[],Kw=[],Zw=new Float32Array(16),Jw=new Float32Array(9),eE=new Float32Array(4);function yA(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=Yw[r];if(s===void 0&&(s=new Float32Array(r),Yw[r]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(s,o)}return s}function as(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function os(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function M5(i,e){let t=Kw[e];t===void 0&&(t=new Int32Array(e),Kw[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function nW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function iW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(as(t,e))return;i.uniform2fv(this.addr,e),os(t,e)}}function rW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(as(t,e))return;i.uniform3fv(this.addr,e),os(t,e)}}function sW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(as(t,e))return;i.uniform4fv(this.addr,e),os(t,e)}}function aW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(as(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),os(t,e)}else{if(as(t,n))return;eE.set(n),i.uniformMatrix2fv(this.addr,!1,eE),os(t,n)}}function oW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(as(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),os(t,e)}else{if(as(t,n))return;Jw.set(n),i.uniformMatrix3fv(this.addr,!1,Jw),os(t,n)}}function lW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(as(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),os(t,e)}else{if(as(t,n))return;Zw.set(n),i.uniformMatrix4fv(this.addr,!1,Zw),os(t,n)}}function uW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function cW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(as(t,e))return;i.uniform2iv(this.addr,e),os(t,e)}}function hW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(as(t,e))return;i.uniform3iv(this.addr,e),os(t,e)}}function fW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(as(t,e))return;i.uniform4iv(this.addr,e),os(t,e)}}function dW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function AW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(as(t,e))return;i.uniform2uiv(this.addr,e),os(t,e)}}function pW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(as(t,e))return;i.uniform3uiv(this.addr,e),os(t,e)}}function mW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(as(t,e))return;i.uniform4uiv(this.addr,e),os(t,e)}}function gW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(Qw.compareFunction=y5,s=Qw):s=zN,t.setTexture2D(e||s,r)}function _W(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||VN,r)}function vW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||HN,r)}function yW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||GN,r)}function xW(i){switch(i){case 5126:return nW;case 35664:return iW;case 35665:return rW;case 35666:return sW;case 35674:return aW;case 35675:return oW;case 35676:return lW;case 5124:case 35670:return uW;case 35667:case 35671:return cW;case 35668:case 35672:return hW;case 35669:case 35673:return fW;case 5125:return dW;case 36294:return AW;case 36295:return pW;case 36296:return mW;case 35678:case 36198:case 36298:case 36306:case 35682:return gW;case 35679:case 36299:case 36307:return _W;case 35680:case 36300:case 36308:case 36293:return vW;case 36289:case 36303:case 36311:case 36292:return yW}}function qW(i,e){i.uniform1fv(this.addr,e)}function bW(i,e){const t=yA(e,this.size,2);i.uniform2fv(this.addr,t)}function SW(i,e){const t=yA(e,this.size,3);i.uniform3fv(this.addr,t)}function TW(i,e){const t=yA(e,this.size,4);i.uniform4fv(this.addr,t)}function wW(i,e){const t=yA(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function EW(i,e){const t=yA(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function MW(i,e){const t=yA(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function RW(i,e){i.uniform1iv(this.addr,e)}function CW(i,e){i.uniform2iv(this.addr,e)}function NW(i,e){i.uniform3iv(this.addr,e)}function PW(i,e){i.uniform4iv(this.addr,e)}function DW(i,e){i.uniform1uiv(this.addr,e)}function LW(i,e){i.uniform2uiv(this.addr,e)}function UW(i,e){i.uniform3uiv(this.addr,e)}function OW(i,e){i.uniform4uiv(this.addr,e)}function BW(i,e,t){const n=this.cache,r=e.length,s=M5(t,r);as(n,s)||(i.uniform1iv(this.addr,s),os(n,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||zN,s[a])}function IW(i,e,t){const n=this.cache,r=e.length,s=M5(t,r);as(n,s)||(i.uniform1iv(this.addr,s),os(n,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||VN,s[a])}function FW(i,e,t){const n=this.cache,r=e.length,s=M5(t,r);as(n,s)||(i.uniform1iv(this.addr,s),os(n,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||HN,s[a])}function kW(i,e,t){const n=this.cache,r=e.length,s=M5(t,r);as(n,s)||(i.uniform1iv(this.addr,s),os(n,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||GN,s[a])}function zW(i){switch(i){case 5126:return qW;case 35664:return bW;case 35665:return SW;case 35666:return TW;case 35674:return wW;case 35675:return EW;case 35676:return MW;case 5124:case 35670:return RW;case 35667:case 35671:return CW;case 35668:case 35672:return NW;case 35669:case 35673:return PW;case 5125:return DW;case 36294:return LW;case 36295:return UW;case 36296:return OW;case 35678:case 36198:case 36298:case 36306:case 35682:return BW;case 35679:case 36299:case 36307:return IW;case 35680:case 36300:case 36308:case 36293:return FW;case 36289:case 36303:case 36311:case 36292:return kW}}class GW{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=xW(t.type)}}class VW{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=zW(t.type)}}class HW{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],n)}}}const Rg=/(\w+)(\])?(\[|\.)?/g;function tE(i,e){i.seq.push(e),i.map[e.id]=e}function jW(i,e,t){const n=i.name,r=n.length;for(Rg.lastIndex=0;;){const s=Rg.exec(n),a=Rg.lastIndex;let o=s[1];const u=s[2]==="]",c=s[3];if(u&&(o=o|0),c===void 0||c==="["&&a+2===r){tE(t,c===void 0?new GW(o,i,e):new VW(o,i,e));break}else{let g=t.map[o];g===void 0&&(g=new HW(o),tE(t,g)),t=g}}}class $6{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);jW(s,a,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],u=n[o.id];u.needsUpdate!==!1&&o.setValue(e,u.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&n.push(a)}return n}}function nE(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const WW=37297;let $W=0;function XW(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}const iE=new Cn;function QW(i){Hn._getMatrix(iE,Hn.workingColorSpace,i);const e=`mat3( ${iE.elements.map(t=>t.toFixed(4))} )`;switch(Hn.getTransfer(i)){case h8:return[e,"LinearTransferOETF"];case Ri:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function rE(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+XW(i.getShaderSource(e),a)}else return r}function YW(i,e){const t=QW(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function KW(i,e){let t;switch(e){case oN:t="Linear";break;case lN:t="Reinhard";break;case uN:t="Cineon";break;case cN:t="ACESFilmic";break;case hN:t="AgX";break;case fN:t="Neutral";break;case Hk:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const jm=new le;function ZW(){Hn.getLuminanceCoefficients(jm);const i=jm.x.toFixed(4),e=jm.y.toFixed(4),t=jm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function JW(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(lp).join(`
`)}function e$(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function t$(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),a=s.name;let o=1;s.type===i.FLOAT_MAT2&&(o=2),s.type===i.FLOAT_MAT3&&(o=3),s.type===i.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function lp(i){return i!==""}function sE(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function aE(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const n$=/^[ \t]*#include +<([\w\d./]+)>/gm;function iv(i){return i.replace(n$,r$)}const i$=new Map;function r$(i,e){let t=Qn[e];if(t===void 0){const n=i$.get(e);if(n!==void 0)t=Qn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return iv(t)}const s$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function oE(i){return i.replace(s$,a$)}function a$(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function lE(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function o$(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Ly?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Fk?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===ho&&(e="SHADOWMAP_TYPE_VSM"),e}function l$(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Yo:case Ko:e="ENVMAP_TYPE_CUBE";break;case dh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function u$(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Ko:e="ENVMAP_MODE_REFRACTION";break}return e}function c$(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case M3:e="ENVMAP_BLENDING_MULTIPLY";break;case sN:e="ENVMAP_BLENDING_MIX";break;case aN:e="ENVMAP_BLENDING_ADD";break}return e}function h$(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function f$(i,e,t,n){const r=i.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const u=o$(t),c=l$(t),p=u$(t),g=c$(t),y=h$(t),q=JW(t),S=e$(s),R=r.createProgram();let M,E,U=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(lp).join(`
`),M.length>0&&(M+=`
`),E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(lp).join(`
`),E.length>0&&(E+=`
`)):(M=[lE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(lp).join(`
`),E=[lE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==za?"#define TONE_MAPPING":"",t.toneMapping!==za?Qn.tonemapping_pars_fragment:"",t.toneMapping!==za?KW("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Qn.colorspace_pars_fragment,YW("linearToOutputTexel",t.outputColorSpace),ZW(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(lp).join(`
`)),a=iv(a),a=sE(a,t),a=aE(a,t),o=iv(o),o=sE(o,t),o=aE(o,t),a=oE(a),o=oE(o),t.isRawShaderMaterial!==!0&&(U=`#version 300 es
`,M=[q,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,E=["#define varying in",t.glslVersion===iw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===iw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const P=U+M+a,O=U+E+o,F=nE(r,r.VERTEX_SHADER,P),I=nE(r,r.FRAGMENT_SHADER,O);r.attachShader(R,F),r.attachShader(R,I),t.index0AttributeName!==void 0?r.bindAttribLocation(R,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(R,0,"position"),r.linkProgram(R);function z($){if(i.debug.checkShaderErrors){const te=r.getProgramInfoLog(R).trim(),ne=r.getShaderInfoLog(F).trim(),ue=r.getShaderInfoLog(I).trim();let ae=!0,W=!0;if(r.getProgramParameter(R,r.LINK_STATUS)===!1)if(ae=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,R,F,I);else{const J=rE(r,F,"vertex"),re=rE(r,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(R,r.VALIDATE_STATUS)+`

Material Name: `+$.name+`
Material Type: `+$.type+`

Program Info Log: `+te+`
`+J+`
`+re)}else te!==""?console.warn("THREE.WebGLProgram: Program Info Log:",te):(ne===""||ue==="")&&(W=!1);W&&($.diagnostics={runnable:ae,programLog:te,vertexShader:{log:ne,prefix:M},fragmentShader:{log:ue,prefix:E}})}r.deleteShader(F),r.deleteShader(I),j=new $6(r,R),k=t$(r,R)}let j;this.getUniforms=function(){return j===void 0&&z(this),j};let k;this.getAttributes=function(){return k===void 0&&z(this),k};let G=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return G===!1&&(G=r.getProgramParameter(R,WW)),G},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(R),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=$W++,this.cacheKey=e,this.usedTimes=1,this.program=R,this.vertexShader=F,this.fragmentShader=I,this}let d$=0;class A${constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new p$(e),t.set(e,n)),n}}class p${constructor(e){this.id=d$++,this.code=e,this.usedTimes=0}}function m$(i,e,t,n,r,s,a){const o=new ox,u=new A$,c=new Set,p=[],g=r.logarithmicDepthBuffer,y=r.vertexTextures;let q=r.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function R(k){return c.add(k),k===0?"uv":`uv${k}`}function M(k,G,$,te,ne){const ue=te.fog,ae=ne.geometry,W=k.isMeshStandardMaterial?te.environment:null,J=(k.isMeshStandardMaterial?t:e).get(k.envMap||W),re=J&&J.mapping===dh?J.image.height:null,ge=S[k.type];k.precision!==null&&(q=r.getMaxPrecision(k.precision),q!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",q,"instead."));const Y=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,me=Y!==void 0?Y.length:0;let Me=0;ae.morphAttributes.position!==void 0&&(Me=1),ae.morphAttributes.normal!==void 0&&(Me=2),ae.morphAttributes.color!==void 0&&(Me=3);let Be,be,Fe,$e;if(ge){const ii=Ra[ge];Be=ii.vertexShader,be=ii.fragmentShader}else Be=k.vertexShader,be=k.fragmentShader,u.update(k),Fe=u.getVertexShaderID(k),$e=u.getFragmentShaderID(k);const ht=i.getRenderTarget(),wt=i.state.buffers.depth.getReversed(),kt=ne.isInstancedMesh===!0,Ct=ne.isBatchedMesh===!0,Kt=!!k.map,Bn=!!k.matcap,_n=!!J,ye=!!k.aoMap,gi=!!k.lightMap,ut=!!k.bumpMap,st=!!k.normalMap,nt=!!k.displacementMap,Pt=!!k.emissiveMap,at=!!k.metalnessMap,ce=!!k.roughnessMap,ee=k.anisotropy>0,Ne=k.clearcoat>0,Xe=k.dispersion>0,it=k.iridescence>0,Qe=k.sheen>0,Ut=k.transmission>0,St=ee&&!!k.anisotropyMap,Nt=Ne&&!!k.clearcoatMap,Xn=Ne&&!!k.clearcoatNormalMap,Tt=Ne&&!!k.clearcoatRoughnessMap,jt=it&&!!k.iridescenceMap,on=it&&!!k.iridescenceThicknessMap,cn=Qe&&!!k.sheenColorMap,Bt=Qe&&!!k.sheenRoughnessMap,kn=!!k.specularMap,qn=!!k.specularColorMap,Ei=!!k.specularIntensityMap,pe=Ut&&!!k.transmissionMap,It=Ut&&!!k.thicknessMap,Ye=!!k.gradientMap,dt=!!k.alphaMap,Gt=k.alphaTest>0,Ot=!!k.alphaHash,Tn=!!k.extensions;let Pi=za;k.toneMapped&&(ht===null||ht.isXRRenderTarget===!0)&&(Pi=i.toneMapping);const yr={shaderID:ge,shaderType:k.type,shaderName:k.name,vertexShader:Be,fragmentShader:be,defines:k.defines,customVertexShaderID:Fe,customFragmentShaderID:$e,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:q,batching:Ct,batchingColor:Ct&&ne._colorsTexture!==null,instancing:kt,instancingColor:kt&&ne.instanceColor!==null,instancingMorph:kt&&ne.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:ht===null?i.outputColorSpace:ht.isXRRenderTarget===!0?ht.texture.colorSpace:Pl,alphaToCoverage:!!k.alphaToCoverage,map:Kt,matcap:Bn,envMap:_n,envMapMode:_n&&J.mapping,envMapCubeUVHeight:re,aoMap:ye,lightMap:gi,bumpMap:ut,normalMap:st,displacementMap:y&&nt,emissiveMap:Pt,normalMapObjectSpace:st&&k.normalMapType===dN,normalMapTangentSpace:st&&k.normalMapType===wc,metalnessMap:at,roughnessMap:ce,anisotropy:ee,anisotropyMap:St,clearcoat:Ne,clearcoatMap:Nt,clearcoatNormalMap:Xn,clearcoatRoughnessMap:Tt,dispersion:Xe,iridescence:it,iridescenceMap:jt,iridescenceThicknessMap:on,sheen:Qe,sheenColorMap:cn,sheenRoughnessMap:Bt,specularMap:kn,specularColorMap:qn,specularIntensityMap:Ei,transmission:Ut,transmissionMap:pe,thicknessMap:It,gradientMap:Ye,opaque:k.transparent===!1&&k.blending===ka&&k.alphaToCoverage===!1,alphaMap:dt,alphaTest:Gt,alphaHash:Ot,combine:k.combine,mapUv:Kt&&R(k.map.channel),aoMapUv:ye&&R(k.aoMap.channel),lightMapUv:gi&&R(k.lightMap.channel),bumpMapUv:ut&&R(k.bumpMap.channel),normalMapUv:st&&R(k.normalMap.channel),displacementMapUv:nt&&R(k.displacementMap.channel),emissiveMapUv:Pt&&R(k.emissiveMap.channel),metalnessMapUv:at&&R(k.metalnessMap.channel),roughnessMapUv:ce&&R(k.roughnessMap.channel),anisotropyMapUv:St&&R(k.anisotropyMap.channel),clearcoatMapUv:Nt&&R(k.clearcoatMap.channel),clearcoatNormalMapUv:Xn&&R(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Tt&&R(k.clearcoatRoughnessMap.channel),iridescenceMapUv:jt&&R(k.iridescenceMap.channel),iridescenceThicknessMapUv:on&&R(k.iridescenceThicknessMap.channel),sheenColorMapUv:cn&&R(k.sheenColorMap.channel),sheenRoughnessMapUv:Bt&&R(k.sheenRoughnessMap.channel),specularMapUv:kn&&R(k.specularMap.channel),specularColorMapUv:qn&&R(k.specularColorMap.channel),specularIntensityMapUv:Ei&&R(k.specularIntensityMap.channel),transmissionMapUv:pe&&R(k.transmissionMap.channel),thicknessMapUv:It&&R(k.thicknessMap.channel),alphaMapUv:dt&&R(k.alphaMap.channel),vertexTangents:!!ae.attributes.tangent&&(st||ee),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,pointsUvs:ne.isPoints===!0&&!!ae.attributes.uv&&(Kt||dt),fog:!!ue,useFog:k.fog===!0,fogExp2:!!ue&&ue.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:wt,skinning:ne.isSkinnedMesh===!0,morphTargets:ae.morphAttributes.position!==void 0,morphNormals:ae.morphAttributes.normal!==void 0,morphColors:ae.morphAttributes.color!==void 0,morphTargetsCount:me,morphTextureStride:Me,numDirLights:G.directional.length,numPointLights:G.point.length,numSpotLights:G.spot.length,numSpotLightMaps:G.spotLightMap.length,numRectAreaLights:G.rectArea.length,numHemiLights:G.hemi.length,numDirLightShadows:G.directionalShadowMap.length,numPointLightShadows:G.pointShadowMap.length,numSpotLightShadows:G.spotShadowMap.length,numSpotLightShadowsWithMaps:G.numSpotLightShadowsWithMaps,numLightProbes:G.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:k.dithering,shadowMapEnabled:i.shadowMap.enabled&&$.length>0,shadowMapType:i.shadowMap.type,toneMapping:Pi,decodeVideoTexture:Kt&&k.map.isVideoTexture===!0&&Hn.getTransfer(k.map.colorSpace)===Ri,decodeVideoTextureEmissive:Pt&&k.emissiveMap.isVideoTexture===!0&&Hn.getTransfer(k.emissiveMap.colorSpace)===Ri,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Qr,flipSided:k.side===Oi,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:Tn&&k.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Tn&&k.extensions.multiDraw===!0||Ct)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return yr.vertexUv1s=c.has(1),yr.vertexUv2s=c.has(2),yr.vertexUv3s=c.has(3),c.clear(),yr}function E(k){const G=[];if(k.shaderID?G.push(k.shaderID):(G.push(k.customVertexShaderID),G.push(k.customFragmentShaderID)),k.defines!==void 0)for(const $ in k.defines)G.push($),G.push(k.defines[$]);return k.isRawShaderMaterial===!1&&(U(G,k),P(G,k),G.push(i.outputColorSpace)),G.push(k.customProgramCacheKey),G.join()}function U(k,G){k.push(G.precision),k.push(G.outputColorSpace),k.push(G.envMapMode),k.push(G.envMapCubeUVHeight),k.push(G.mapUv),k.push(G.alphaMapUv),k.push(G.lightMapUv),k.push(G.aoMapUv),k.push(G.bumpMapUv),k.push(G.normalMapUv),k.push(G.displacementMapUv),k.push(G.emissiveMapUv),k.push(G.metalnessMapUv),k.push(G.roughnessMapUv),k.push(G.anisotropyMapUv),k.push(G.clearcoatMapUv),k.push(G.clearcoatNormalMapUv),k.push(G.clearcoatRoughnessMapUv),k.push(G.iridescenceMapUv),k.push(G.iridescenceThicknessMapUv),k.push(G.sheenColorMapUv),k.push(G.sheenRoughnessMapUv),k.push(G.specularMapUv),k.push(G.specularColorMapUv),k.push(G.specularIntensityMapUv),k.push(G.transmissionMapUv),k.push(G.thicknessMapUv),k.push(G.combine),k.push(G.fogExp2),k.push(G.sizeAttenuation),k.push(G.morphTargetsCount),k.push(G.morphAttributeCount),k.push(G.numDirLights),k.push(G.numPointLights),k.push(G.numSpotLights),k.push(G.numSpotLightMaps),k.push(G.numHemiLights),k.push(G.numRectAreaLights),k.push(G.numDirLightShadows),k.push(G.numPointLightShadows),k.push(G.numSpotLightShadows),k.push(G.numSpotLightShadowsWithMaps),k.push(G.numLightProbes),k.push(G.shadowMapType),k.push(G.toneMapping),k.push(G.numClippingPlanes),k.push(G.numClipIntersection),k.push(G.depthPacking)}function P(k,G){o.disableAll(),G.supportsVertexTextures&&o.enable(0),G.instancing&&o.enable(1),G.instancingColor&&o.enable(2),G.instancingMorph&&o.enable(3),G.matcap&&o.enable(4),G.envMap&&o.enable(5),G.normalMapObjectSpace&&o.enable(6),G.normalMapTangentSpace&&o.enable(7),G.clearcoat&&o.enable(8),G.iridescence&&o.enable(9),G.alphaTest&&o.enable(10),G.vertexColors&&o.enable(11),G.vertexAlphas&&o.enable(12),G.vertexUv1s&&o.enable(13),G.vertexUv2s&&o.enable(14),G.vertexUv3s&&o.enable(15),G.vertexTangents&&o.enable(16),G.anisotropy&&o.enable(17),G.alphaHash&&o.enable(18),G.batching&&o.enable(19),G.dispersion&&o.enable(20),G.batchingColor&&o.enable(21),k.push(o.mask),o.disableAll(),G.fog&&o.enable(0),G.useFog&&o.enable(1),G.flatShading&&o.enable(2),G.logarithmicDepthBuffer&&o.enable(3),G.reverseDepthBuffer&&o.enable(4),G.skinning&&o.enable(5),G.morphTargets&&o.enable(6),G.morphNormals&&o.enable(7),G.morphColors&&o.enable(8),G.premultipliedAlpha&&o.enable(9),G.shadowMapEnabled&&o.enable(10),G.doubleSided&&o.enable(11),G.flipSided&&o.enable(12),G.useDepthPacking&&o.enable(13),G.dithering&&o.enable(14),G.transmission&&o.enable(15),G.sheen&&o.enable(16),G.opaque&&o.enable(17),G.pointsUvs&&o.enable(18),G.decodeVideoTexture&&o.enable(19),G.decodeVideoTextureEmissive&&o.enable(20),G.alphaToCoverage&&o.enable(21),k.push(o.mask)}function O(k){const G=S[k.type];let $;if(G){const te=Ra[G];$=x5.clone(te.uniforms)}else $=k.uniforms;return $}function F(k,G){let $;for(let te=0,ne=p.length;te<ne;te++){const ue=p[te];if(ue.cacheKey===G){$=ue,++$.usedTimes;break}}return $===void 0&&($=new f$(i,G,k,s),p.push($)),$}function I(k){if(--k.usedTimes===0){const G=p.indexOf(k);p[G]=p[p.length-1],p.pop(),k.destroy()}}function z(k){u.remove(k)}function j(){u.dispose()}return{getParameters:M,getProgramCacheKey:E,getUniforms:O,acquireProgram:F,releaseProgram:I,releaseShaderCache:z,programs:p,dispose:j}}function g$(){let i=new WeakMap;function e(a){return i.has(a)}function t(a){let o=i.get(a);return o===void 0&&(o={},i.set(a,o)),o}function n(a){i.delete(a)}function r(a,o,u){i.get(a)[o]=u}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function _$(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function uE(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function cE(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function a(g,y,q,S,R,M){let E=i[e];return E===void 0?(E={id:g.id,object:g,geometry:y,material:q,groupOrder:S,renderOrder:g.renderOrder,z:R,group:M},i[e]=E):(E.id=g.id,E.object=g,E.geometry=y,E.material=q,E.groupOrder=S,E.renderOrder=g.renderOrder,E.z=R,E.group=M),e++,E}function o(g,y,q,S,R,M){const E=a(g,y,q,S,R,M);q.transmission>0?n.push(E):q.transparent===!0?r.push(E):t.push(E)}function u(g,y,q,S,R,M){const E=a(g,y,q,S,R,M);q.transmission>0?n.unshift(E):q.transparent===!0?r.unshift(E):t.unshift(E)}function c(g,y){t.length>1&&t.sort(g||_$),n.length>1&&n.sort(y||uE),r.length>1&&r.sort(y||uE)}function p(){for(let g=e,y=i.length;g<y;g++){const q=i[g];if(q.id===null)break;q.id=null,q.object=null,q.geometry=null,q.material=null,q.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:o,unshift:u,finish:p,sort:c}}function v$(){let i=new WeakMap;function e(n,r){const s=i.get(n);let a;return s===void 0?(a=new cE,i.set(n,[a])):r>=s.length?(a=new cE,s.push(a)):a=s[r],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function y$(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new Xt};break;case"SpotLight":t={position:new le,direction:new le,color:new Xt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new Xt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new Xt,groundColor:new Xt};break;case"RectAreaLight":t={color:new Xt,position:new le,halfWidth:new le,halfHeight:new le};break}return i[e.id]=t,t}}}function x$(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let q$=0;function b$(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function S$(i){const e=new y$,t=x$(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new le);const r=new le,s=new yn,a=new yn;function o(c){let p=0,g=0,y=0;for(let k=0;k<9;k++)n.probe[k].set(0,0,0);let q=0,S=0,R=0,M=0,E=0,U=0,P=0,O=0,F=0,I=0,z=0;c.sort(b$);for(let k=0,G=c.length;k<G;k++){const $=c[k],te=$.color,ne=$.intensity,ue=$.distance,ae=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)p+=te.r*ne,g+=te.g*ne,y+=te.b*ne;else if($.isLightProbe){for(let W=0;W<9;W++)n.probe[W].addScaledVector($.sh.coefficients[W],ne);z++}else if($.isDirectionalLight){const W=e.get($);if(W.color.copy($.color).multiplyScalar($.intensity),$.castShadow){const J=$.shadow,re=t.get($);re.shadowIntensity=J.intensity,re.shadowBias=J.bias,re.shadowNormalBias=J.normalBias,re.shadowRadius=J.radius,re.shadowMapSize=J.mapSize,n.directionalShadow[q]=re,n.directionalShadowMap[q]=ae,n.directionalShadowMatrix[q]=$.shadow.matrix,U++}n.directional[q]=W,q++}else if($.isSpotLight){const W=e.get($);W.position.setFromMatrixPosition($.matrixWorld),W.color.copy(te).multiplyScalar(ne),W.distance=ue,W.coneCos=Math.cos($.angle),W.penumbraCos=Math.cos($.angle*(1-$.penumbra)),W.decay=$.decay,n.spot[R]=W;const J=$.shadow;if($.map&&(n.spotLightMap[F]=$.map,F++,J.updateMatrices($),$.castShadow&&I++),n.spotLightMatrix[R]=J.matrix,$.castShadow){const re=t.get($);re.shadowIntensity=J.intensity,re.shadowBias=J.bias,re.shadowNormalBias=J.normalBias,re.shadowRadius=J.radius,re.shadowMapSize=J.mapSize,n.spotShadow[R]=re,n.spotShadowMap[R]=ae,O++}R++}else if($.isRectAreaLight){const W=e.get($);W.color.copy(te).multiplyScalar(ne),W.halfWidth.set($.width*.5,0,0),W.halfHeight.set(0,$.height*.5,0),n.rectArea[M]=W,M++}else if($.isPointLight){const W=e.get($);if(W.color.copy($.color).multiplyScalar($.intensity),W.distance=$.distance,W.decay=$.decay,$.castShadow){const J=$.shadow,re=t.get($);re.shadowIntensity=J.intensity,re.shadowBias=J.bias,re.shadowNormalBias=J.normalBias,re.shadowRadius=J.radius,re.shadowMapSize=J.mapSize,re.shadowCameraNear=J.camera.near,re.shadowCameraFar=J.camera.far,n.pointShadow[S]=re,n.pointShadowMap[S]=ae,n.pointShadowMatrix[S]=$.shadow.matrix,P++}n.point[S]=W,S++}else if($.isHemisphereLight){const W=e.get($);W.skyColor.copy($.color).multiplyScalar(ne),W.groundColor.copy($.groundColor).multiplyScalar(ne),n.hemi[E]=W,E++}}M>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Dt.LTC_FLOAT_1,n.rectAreaLTC2=Dt.LTC_FLOAT_2):(n.rectAreaLTC1=Dt.LTC_HALF_1,n.rectAreaLTC2=Dt.LTC_HALF_2)),n.ambient[0]=p,n.ambient[1]=g,n.ambient[2]=y;const j=n.hash;(j.directionalLength!==q||j.pointLength!==S||j.spotLength!==R||j.rectAreaLength!==M||j.hemiLength!==E||j.numDirectionalShadows!==U||j.numPointShadows!==P||j.numSpotShadows!==O||j.numSpotMaps!==F||j.numLightProbes!==z)&&(n.directional.length=q,n.spot.length=R,n.rectArea.length=M,n.point.length=S,n.hemi.length=E,n.directionalShadow.length=U,n.directionalShadowMap.length=U,n.pointShadow.length=P,n.pointShadowMap.length=P,n.spotShadow.length=O,n.spotShadowMap.length=O,n.directionalShadowMatrix.length=U,n.pointShadowMatrix.length=P,n.spotLightMatrix.length=O+F-I,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=z,j.directionalLength=q,j.pointLength=S,j.spotLength=R,j.rectAreaLength=M,j.hemiLength=E,j.numDirectionalShadows=U,j.numPointShadows=P,j.numSpotShadows=O,j.numSpotMaps=F,j.numLightProbes=z,n.version=q$++)}function u(c,p){let g=0,y=0,q=0,S=0,R=0;const M=p.matrixWorldInverse;for(let E=0,U=c.length;E<U;E++){const P=c[E];if(P.isDirectionalLight){const O=n.directional[g];O.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(M),g++}else if(P.isSpotLight){const O=n.spot[q];O.position.setFromMatrixPosition(P.matrixWorld),O.position.applyMatrix4(M),O.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(M),q++}else if(P.isRectAreaLight){const O=n.rectArea[S];O.position.setFromMatrixPosition(P.matrixWorld),O.position.applyMatrix4(M),a.identity(),s.copy(P.matrixWorld),s.premultiply(M),a.extractRotation(s),O.halfWidth.set(P.width*.5,0,0),O.halfHeight.set(0,P.height*.5,0),O.halfWidth.applyMatrix4(a),O.halfHeight.applyMatrix4(a),S++}else if(P.isPointLight){const O=n.point[y];O.position.setFromMatrixPosition(P.matrixWorld),O.position.applyMatrix4(M),y++}else if(P.isHemisphereLight){const O=n.hemi[R];O.direction.setFromMatrixPosition(P.matrixWorld),O.direction.transformDirection(M),R++}}}return{setup:o,setupView:u,state:n}}function hE(i){const e=new S$(i),t=[],n=[];function r(p){c.camera=p,t.length=0,n.length=0}function s(p){t.push(p)}function a(p){n.push(p)}function o(){e.setup(t)}function u(p){e.setupView(t,p)}const c={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:u,pushLight:s,pushShadow:a}}function T$(i){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new hE(i),e.set(r,[o])):s>=a.length?(o=new hE(i),a.push(o)):o=a[s],o}function n(){e=new WeakMap}return{get:t,dispose:n}}const w$=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,E$=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function M$(i,e,t){let n=new D3;const r=new rt,s=new rt,a=new sn,o=new IG({depthPacking:Yk}),u=new FG,c={},p=t.maxTextureSize,g={[Ia]:Oi,[Oi]:Ia,[Qr]:Qr},y=new Ga({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new rt},radius:{value:4}},vertexShader:w$,fragmentShader:E$}),q=y.clone();q.defines.HORIZONTAL_PASS=1;const S=new Ii;S.setAttribute("position",new _r(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const R=new yi(S,y),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ly;let E=this.type;this.render=function(I,z,j){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||I.length===0)return;const k=i.getRenderTarget(),G=i.getActiveCubeFace(),$=i.getActiveMipmapLevel(),te=i.state;te.setBlending(Fa),te.buffers.color.setClear(1,1,1,1),te.buffers.depth.setTest(!0),te.setScissorTest(!1);const ne=E!==ho&&this.type===ho,ue=E===ho&&this.type!==ho;for(let ae=0,W=I.length;ae<W;ae++){const J=I[ae],re=J.shadow;if(re===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(re.autoUpdate===!1&&re.needsUpdate===!1)continue;r.copy(re.mapSize);const ge=re.getFrameExtents();if(r.multiply(ge),s.copy(re.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/ge.x),r.x=s.x*ge.x,re.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/ge.y),r.y=s.y*ge.y,re.mapSize.y=s.y)),re.map===null||ne===!0||ue===!0){const me=this.type!==ho?{minFilter:nr,magFilter:nr}:{};re.map!==null&&re.map.dispose(),re.map=new X1(r.x,r.y,me),re.map.texture.name=J.name+".shadowMap",re.camera.updateProjectionMatrix()}i.setRenderTarget(re.map),i.clear();const Y=re.getViewportCount();for(let me=0;me<Y;me++){const Me=re.getViewport(me);a.set(s.x*Me.x,s.y*Me.y,s.x*Me.z,s.y*Me.w),te.viewport(a),re.updateMatrices(J,me),n=re.getFrustum(),O(z,j,re.camera,J,this.type)}re.isPointLightShadow!==!0&&this.type===ho&&U(re,j),re.needsUpdate=!1}E=this.type,M.needsUpdate=!1,i.setRenderTarget(k,G,$)};function U(I,z){const j=e.update(R);y.defines.VSM_SAMPLES!==I.blurSamples&&(y.defines.VSM_SAMPLES=I.blurSamples,q.defines.VSM_SAMPLES=I.blurSamples,y.needsUpdate=!0,q.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new X1(r.x,r.y)),y.uniforms.shadow_pass.value=I.map.texture,y.uniforms.resolution.value=I.mapSize,y.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(z,null,j,y,R,null),q.uniforms.shadow_pass.value=I.mapPass.texture,q.uniforms.resolution.value=I.mapSize,q.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(z,null,j,q,R,null)}function P(I,z,j,k){let G=null;const $=j.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if($!==void 0)G=$;else if(G=j.isPointLight===!0?u:o,i.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0){const te=G.uuid,ne=z.uuid;let ue=c[te];ue===void 0&&(ue={},c[te]=ue);let ae=ue[ne];ae===void 0&&(ae=G.clone(),ue[ne]=ae,z.addEventListener("dispose",F)),G=ae}if(G.visible=z.visible,G.wireframe=z.wireframe,k===ho?G.side=z.shadowSide!==null?z.shadowSide:z.side:G.side=z.shadowSide!==null?z.shadowSide:g[z.side],G.alphaMap=z.alphaMap,G.alphaTest=z.alphaTest,G.map=z.map,G.clipShadows=z.clipShadows,G.clippingPlanes=z.clippingPlanes,G.clipIntersection=z.clipIntersection,G.displacementMap=z.displacementMap,G.displacementScale=z.displacementScale,G.displacementBias=z.displacementBias,G.wireframeLinewidth=z.wireframeLinewidth,G.linewidth=z.linewidth,j.isPointLight===!0&&G.isMeshDistanceMaterial===!0){const te=i.properties.get(G);te.light=j}return G}function O(I,z,j,k,G){if(I.visible===!1)return;if(I.layers.test(z.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&G===ho)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,I.matrixWorld);const ne=e.update(I),ue=I.material;if(Array.isArray(ue)){const ae=ne.groups;for(let W=0,J=ae.length;W<J;W++){const re=ae[W],ge=ue[re.materialIndex];if(ge&&ge.visible){const Y=P(I,ge,k,G);I.onBeforeShadow(i,I,z,j,ne,Y,re),i.renderBufferDirect(j,null,ne,Y,I,re),I.onAfterShadow(i,I,z,j,ne,Y,re)}}}else if(ue.visible){const ae=P(I,ue,k,G);I.onBeforeShadow(i,I,z,j,ne,ae,null),i.renderBufferDirect(j,null,ne,ae,I,null),I.onAfterShadow(i,I,z,j,ne,ae,null)}}const te=I.children;for(let ne=0,ue=te.length;ne<ue;ne++)O(te[ne],z,j,k,G)}function F(I){I.target.removeEventListener("dispose",F);for(const j in c){const k=c[j],G=I.target.uuid;G in k&&(k[G].dispose(),delete k[G])}}}const R$={[Bp]:Ip,[Fp]:Gp,[kp]:Vp,[j1]:zp,[Ip]:Bp,[Gp]:Fp,[Vp]:kp,[zp]:j1};function C$(i,e){function t(){let pe=!1;const It=new sn;let Ye=null;const dt=new sn(0,0,0,0);return{setMask:function(Gt){Ye!==Gt&&!pe&&(i.colorMask(Gt,Gt,Gt,Gt),Ye=Gt)},setLocked:function(Gt){pe=Gt},setClear:function(Gt,Ot,Tn,Pi,yr){yr===!0&&(Gt*=Pi,Ot*=Pi,Tn*=Pi),It.set(Gt,Ot,Tn,Pi),dt.equals(It)===!1&&(i.clearColor(Gt,Ot,Tn,Pi),dt.copy(It))},reset:function(){pe=!1,Ye=null,dt.set(-1,0,0,0)}}}function n(){let pe=!1,It=!1,Ye=null,dt=null,Gt=null;return{setReversed:function(Ot){if(It!==Ot){const Tn=e.get("EXT_clip_control");Ot?Tn.clipControlEXT(Tn.LOWER_LEFT_EXT,Tn.ZERO_TO_ONE_EXT):Tn.clipControlEXT(Tn.LOWER_LEFT_EXT,Tn.NEGATIVE_ONE_TO_ONE_EXT),It=Ot;const Pi=Gt;Gt=null,this.setClear(Pi)}},getReversed:function(){return It},setTest:function(Ot){Ot?ht(i.DEPTH_TEST):wt(i.DEPTH_TEST)},setMask:function(Ot){Ye!==Ot&&!pe&&(i.depthMask(Ot),Ye=Ot)},setFunc:function(Ot){if(It&&(Ot=R$[Ot]),dt!==Ot){switch(Ot){case Bp:i.depthFunc(i.NEVER);break;case Ip:i.depthFunc(i.ALWAYS);break;case Fp:i.depthFunc(i.LESS);break;case j1:i.depthFunc(i.LEQUAL);break;case kp:i.depthFunc(i.EQUAL);break;case zp:i.depthFunc(i.GEQUAL);break;case Gp:i.depthFunc(i.GREATER);break;case Vp:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}dt=Ot}},setLocked:function(Ot){pe=Ot},setClear:function(Ot){Gt!==Ot&&(It&&(Ot=1-Ot),i.clearDepth(Ot),Gt=Ot)},reset:function(){pe=!1,Ye=null,dt=null,Gt=null,It=!1}}}function r(){let pe=!1,It=null,Ye=null,dt=null,Gt=null,Ot=null,Tn=null,Pi=null,yr=null;return{setTest:function(ii){pe||(ii?ht(i.STENCIL_TEST):wt(i.STENCIL_TEST))},setMask:function(ii){It!==ii&&!pe&&(i.stencilMask(ii),It=ii)},setFunc:function(ii,ws,rr){(Ye!==ii||dt!==ws||Gt!==rr)&&(i.stencilFunc(ii,ws,rr),Ye=ii,dt=ws,Gt=rr)},setOp:function(ii,ws,rr){(Ot!==ii||Tn!==ws||Pi!==rr)&&(i.stencilOp(ii,ws,rr),Ot=ii,Tn=ws,Pi=rr)},setLocked:function(ii){pe=ii},setClear:function(ii){yr!==ii&&(i.clearStencil(ii),yr=ii)},reset:function(){pe=!1,It=null,Ye=null,dt=null,Gt=null,Ot=null,Tn=null,Pi=null,yr=null}}}const s=new t,a=new n,o=new r,u=new WeakMap,c=new WeakMap;let p={},g={},y=new WeakMap,q=[],S=null,R=!1,M=null,E=null,U=null,P=null,O=null,F=null,I=null,z=new Xt(0,0,0),j=0,k=!1,G=null,$=null,te=null,ne=null,ue=null;const ae=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let W=!1,J=0;const re=i.getParameter(i.VERSION);re.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(re)[1]),W=J>=1):re.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(re)[1]),W=J>=2);let ge=null,Y={};const me=i.getParameter(i.SCISSOR_BOX),Me=i.getParameter(i.VIEWPORT),Be=new sn().fromArray(me),be=new sn().fromArray(Me);function Fe(pe,It,Ye,dt){const Gt=new Uint8Array(4),Ot=i.createTexture();i.bindTexture(pe,Ot),i.texParameteri(pe,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(pe,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Tn=0;Tn<Ye;Tn++)pe===i.TEXTURE_3D||pe===i.TEXTURE_2D_ARRAY?i.texImage3D(It,0,i.RGBA,1,1,dt,0,i.RGBA,i.UNSIGNED_BYTE,Gt):i.texImage2D(It+Tn,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Gt);return Ot}const $e={};$e[i.TEXTURE_2D]=Fe(i.TEXTURE_2D,i.TEXTURE_2D,1),$e[i.TEXTURE_CUBE_MAP]=Fe(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),$e[i.TEXTURE_2D_ARRAY]=Fe(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),$e[i.TEXTURE_3D]=Fe(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ht(i.DEPTH_TEST),a.setFunc(j1),ut(!1),st(X_),ht(i.CULL_FACE),ye(Fa);function ht(pe){p[pe]!==!0&&(i.enable(pe),p[pe]=!0)}function wt(pe){p[pe]!==!1&&(i.disable(pe),p[pe]=!1)}function kt(pe,It){return g[pe]!==It?(i.bindFramebuffer(pe,It),g[pe]=It,pe===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=It),pe===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=It),!0):!1}function Ct(pe,It){let Ye=q,dt=!1;if(pe){Ye=y.get(It),Ye===void 0&&(Ye=[],y.set(It,Ye));const Gt=pe.textures;if(Ye.length!==Gt.length||Ye[0]!==i.COLOR_ATTACHMENT0){for(let Ot=0,Tn=Gt.length;Ot<Tn;Ot++)Ye[Ot]=i.COLOR_ATTACHMENT0+Ot;Ye.length=Gt.length,dt=!0}}else Ye[0]!==i.BACK&&(Ye[0]=i.BACK,dt=!0);dt&&i.drawBuffers(Ye)}function Kt(pe){return S!==pe?(i.useProgram(pe),S=pe,!0):!1}const Bn={[Zs]:i.FUNC_ADD,[Uy]:i.FUNC_SUBTRACT,[Oy]:i.FUNC_REVERSE_SUBTRACT};Bn[iN]=i.MIN,Bn[rN]=i.MAX;const _n={[dc]:i.ZERO,[By]:i.ONE,[Iy]:i.SRC_COLOR,[Up]:i.SRC_ALPHA,[Hy]:i.SRC_ALPHA_SATURATE,[Gy]:i.DST_COLOR,[ky]:i.DST_ALPHA,[Fy]:i.ONE_MINUS_SRC_COLOR,[Op]:i.ONE_MINUS_SRC_ALPHA,[Vy]:i.ONE_MINUS_DST_COLOR,[zy]:i.ONE_MINUS_DST_ALPHA,[kk]:i.CONSTANT_COLOR,[zk]:i.ONE_MINUS_CONSTANT_COLOR,[Gk]:i.CONSTANT_ALPHA,[Vk]:i.ONE_MINUS_CONSTANT_ALPHA};function ye(pe,It,Ye,dt,Gt,Ot,Tn,Pi,yr,ii){if(pe===Fa){R===!0&&(wt(i.BLEND),R=!1);return}if(R===!1&&(ht(i.BLEND),R=!0),pe!==_d){if(pe!==M||ii!==k){if((E!==Zs||O!==Zs)&&(i.blendEquation(i.FUNC_ADD),E=Zs,O=Zs),ii)switch(pe){case ka:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Cd:i.blendFunc(i.ONE,i.ONE);break;case Nd:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Pd:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}else switch(pe){case ka:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Cd:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case Nd:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Pd:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}U=null,P=null,F=null,I=null,z.set(0,0,0),j=0,M=pe,k=ii}return}Gt=Gt||It,Ot=Ot||Ye,Tn=Tn||dt,(It!==E||Gt!==O)&&(i.blendEquationSeparate(Bn[It],Bn[Gt]),E=It,O=Gt),(Ye!==U||dt!==P||Ot!==F||Tn!==I)&&(i.blendFuncSeparate(_n[Ye],_n[dt],_n[Ot],_n[Tn]),U=Ye,P=dt,F=Ot,I=Tn),(Pi.equals(z)===!1||yr!==j)&&(i.blendColor(Pi.r,Pi.g,Pi.b,yr),z.copy(Pi),j=yr),M=pe,k=!1}function gi(pe,It){pe.side===Qr?wt(i.CULL_FACE):ht(i.CULL_FACE);let Ye=pe.side===Oi;It&&(Ye=!Ye),ut(Ye),pe.blending===ka&&pe.transparent===!1?ye(Fa):ye(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),a.setFunc(pe.depthFunc),a.setTest(pe.depthTest),a.setMask(pe.depthWrite),s.setMask(pe.colorWrite);const dt=pe.stencilWrite;o.setTest(dt),dt&&(o.setMask(pe.stencilWriteMask),o.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),o.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),Pt(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?ht(i.SAMPLE_ALPHA_TO_COVERAGE):wt(i.SAMPLE_ALPHA_TO_COVERAGE)}function ut(pe){G!==pe&&(pe?i.frontFace(i.CW):i.frontFace(i.CCW),G=pe)}function st(pe){pe!==tN?(ht(i.CULL_FACE),pe!==$&&(pe===X_?i.cullFace(i.BACK):pe===nN?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):wt(i.CULL_FACE),$=pe}function nt(pe){pe!==te&&(W&&i.lineWidth(pe),te=pe)}function Pt(pe,It,Ye){pe?(ht(i.POLYGON_OFFSET_FILL),(ne!==It||ue!==Ye)&&(i.polygonOffset(It,Ye),ne=It,ue=Ye)):wt(i.POLYGON_OFFSET_FILL)}function at(pe){pe?ht(i.SCISSOR_TEST):wt(i.SCISSOR_TEST)}function ce(pe){pe===void 0&&(pe=i.TEXTURE0+ae-1),ge!==pe&&(i.activeTexture(pe),ge=pe)}function ee(pe,It,Ye){Ye===void 0&&(ge===null?Ye=i.TEXTURE0+ae-1:Ye=ge);let dt=Y[Ye];dt===void 0&&(dt={type:void 0,texture:void 0},Y[Ye]=dt),(dt.type!==pe||dt.texture!==It)&&(ge!==Ye&&(i.activeTexture(Ye),ge=Ye),i.bindTexture(pe,It||$e[pe]),dt.type=pe,dt.texture=It)}function Ne(){const pe=Y[ge];pe!==void 0&&pe.type!==void 0&&(i.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function Xe(){try{i.compressedTexImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function it(){try{i.compressedTexImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Qe(){try{i.texSubImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Ut(){try{i.texSubImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function St(){try{i.compressedTexSubImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Nt(){try{i.compressedTexSubImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Xn(){try{i.texStorage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Tt(){try{i.texStorage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function jt(){try{i.texImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function on(){try{i.texImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function cn(pe){Be.equals(pe)===!1&&(i.scissor(pe.x,pe.y,pe.z,pe.w),Be.copy(pe))}function Bt(pe){be.equals(pe)===!1&&(i.viewport(pe.x,pe.y,pe.z,pe.w),be.copy(pe))}function kn(pe,It){let Ye=c.get(It);Ye===void 0&&(Ye=new WeakMap,c.set(It,Ye));let dt=Ye.get(pe);dt===void 0&&(dt=i.getUniformBlockIndex(It,pe.name),Ye.set(pe,dt))}function qn(pe,It){const dt=c.get(It).get(pe);u.get(It)!==dt&&(i.uniformBlockBinding(It,dt,pe.__bindingPointIndex),u.set(It,dt))}function Ei(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),p={},ge=null,Y={},g={},y=new WeakMap,q=[],S=null,R=!1,M=null,E=null,U=null,P=null,O=null,F=null,I=null,z=new Xt(0,0,0),j=0,k=!1,G=null,$=null,te=null,ne=null,ue=null,Be.set(0,0,i.canvas.width,i.canvas.height),be.set(0,0,i.canvas.width,i.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ht,disable:wt,bindFramebuffer:kt,drawBuffers:Ct,useProgram:Kt,setBlending:ye,setMaterial:gi,setFlipSided:ut,setCullFace:st,setLineWidth:nt,setPolygonOffset:Pt,setScissorTest:at,activeTexture:ce,bindTexture:ee,unbindTexture:Ne,compressedTexImage2D:Xe,compressedTexImage3D:it,texImage2D:jt,texImage3D:on,updateUBOMapping:kn,uniformBlockBinding:qn,texStorage2D:Xn,texStorage3D:Tt,texSubImage2D:Qe,texSubImage3D:Ut,compressedTexSubImage2D:St,compressedTexSubImage3D:Nt,scissor:cn,viewport:Bt,reset:Ei}}function N$(i,e,t,n,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new rt,p=new WeakMap;let g;const y=new WeakMap;let q=!1;try{q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(ce,ee){return q?new OffscreenCanvas(ce,ee):Zp("canvas")}function R(ce,ee,Ne){let Xe=1;const it=at(ce);if((it.width>Ne||it.height>Ne)&&(Xe=Ne/Math.max(it.width,it.height)),Xe<1)if(typeof HTMLImageElement<"u"&&ce instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ce instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ce instanceof ImageBitmap||typeof VideoFrame<"u"&&ce instanceof VideoFrame){const Qe=Math.floor(Xe*it.width),Ut=Math.floor(Xe*it.height);g===void 0&&(g=S(Qe,Ut));const St=ee?S(Qe,Ut):g;return St.width=Qe,St.height=Ut,St.getContext("2d").drawImage(ce,0,0,Qe,Ut),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+it.width+"x"+it.height+") to ("+Qe+"x"+Ut+")."),St}else return"data"in ce&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+it.width+"x"+it.height+")."),ce;return ce}function M(ce){return ce.generateMipmaps}function E(ce){i.generateMipmap(ce)}function U(ce){return ce.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:ce.isWebGL3DRenderTarget?i.TEXTURE_3D:ce.isWebGLArrayRenderTarget||ce.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function P(ce,ee,Ne,Xe,it=!1){if(ce!==null){if(i[ce]!==void 0)return i[ce];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ce+"'")}let Qe=ee;if(ee===i.RED&&(Ne===i.FLOAT&&(Qe=i.R32F),Ne===i.HALF_FLOAT&&(Qe=i.R16F),Ne===i.UNSIGNED_BYTE&&(Qe=i.R8)),ee===i.RED_INTEGER&&(Ne===i.UNSIGNED_BYTE&&(Qe=i.R8UI),Ne===i.UNSIGNED_SHORT&&(Qe=i.R16UI),Ne===i.UNSIGNED_INT&&(Qe=i.R32UI),Ne===i.BYTE&&(Qe=i.R8I),Ne===i.SHORT&&(Qe=i.R16I),Ne===i.INT&&(Qe=i.R32I)),ee===i.RG&&(Ne===i.FLOAT&&(Qe=i.RG32F),Ne===i.HALF_FLOAT&&(Qe=i.RG16F),Ne===i.UNSIGNED_BYTE&&(Qe=i.RG8)),ee===i.RG_INTEGER&&(Ne===i.UNSIGNED_BYTE&&(Qe=i.RG8UI),Ne===i.UNSIGNED_SHORT&&(Qe=i.RG16UI),Ne===i.UNSIGNED_INT&&(Qe=i.RG32UI),Ne===i.BYTE&&(Qe=i.RG8I),Ne===i.SHORT&&(Qe=i.RG16I),Ne===i.INT&&(Qe=i.RG32I)),ee===i.RGB_INTEGER&&(Ne===i.UNSIGNED_BYTE&&(Qe=i.RGB8UI),Ne===i.UNSIGNED_SHORT&&(Qe=i.RGB16UI),Ne===i.UNSIGNED_INT&&(Qe=i.RGB32UI),Ne===i.BYTE&&(Qe=i.RGB8I),Ne===i.SHORT&&(Qe=i.RGB16I),Ne===i.INT&&(Qe=i.RGB32I)),ee===i.RGBA_INTEGER&&(Ne===i.UNSIGNED_BYTE&&(Qe=i.RGBA8UI),Ne===i.UNSIGNED_SHORT&&(Qe=i.RGBA16UI),Ne===i.UNSIGNED_INT&&(Qe=i.RGBA32UI),Ne===i.BYTE&&(Qe=i.RGBA8I),Ne===i.SHORT&&(Qe=i.RGBA16I),Ne===i.INT&&(Qe=i.RGBA32I)),ee===i.RGB&&Ne===i.UNSIGNED_INT_5_9_9_9_REV&&(Qe=i.RGB9_E5),ee===i.RGBA){const Ut=it?h8:Hn.getTransfer(Xe);Ne===i.FLOAT&&(Qe=i.RGBA32F),Ne===i.HALF_FLOAT&&(Qe=i.RGBA16F),Ne===i.UNSIGNED_BYTE&&(Qe=Ut===Ri?i.SRGB8_ALPHA8:i.RGBA8),Ne===i.UNSIGNED_SHORT_4_4_4_4&&(Qe=i.RGBA4),Ne===i.UNSIGNED_SHORT_5_5_5_1&&(Qe=i.RGB5_A1)}return(Qe===i.R16F||Qe===i.R32F||Qe===i.RG16F||Qe===i.RG32F||Qe===i.RGBA16F||Qe===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Qe}function O(ce,ee){let Ne;return ce?ee===null||ee===Qi||ee===vo?Ne=i.DEPTH24_STENCIL8:ee===kr?Ne=i.DEPTH32F_STENCIL8:ee===Ml&&(Ne=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):ee===null||ee===Qi||ee===vo?Ne=i.DEPTH_COMPONENT24:ee===kr?Ne=i.DEPTH_COMPONENT32F:ee===Ml&&(Ne=i.DEPTH_COMPONENT16),Ne}function F(ce,ee){return M(ce)===!0||ce.isFramebufferTexture&&ce.minFilter!==nr&&ce.minFilter!==rs?Math.log2(Math.max(ee.width,ee.height))+1:ce.mipmaps!==void 0&&ce.mipmaps.length>0?ce.mipmaps.length:ce.isCompressedTexture&&Array.isArray(ce.image)?ee.mipmaps.length:1}function I(ce){const ee=ce.target;ee.removeEventListener("dispose",I),j(ee),ee.isVideoTexture&&p.delete(ee)}function z(ce){const ee=ce.target;ee.removeEventListener("dispose",z),G(ee)}function j(ce){const ee=n.get(ce);if(ee.__webglInit===void 0)return;const Ne=ce.source,Xe=y.get(Ne);if(Xe){const it=Xe[ee.__cacheKey];it.usedTimes--,it.usedTimes===0&&k(ce),Object.keys(Xe).length===0&&y.delete(Ne)}n.remove(ce)}function k(ce){const ee=n.get(ce);i.deleteTexture(ee.__webglTexture);const Ne=ce.source,Xe=y.get(Ne);delete Xe[ee.__cacheKey],a.memory.textures--}function G(ce){const ee=n.get(ce);if(ce.depthTexture&&(ce.depthTexture.dispose(),n.remove(ce.depthTexture)),ce.isWebGLCubeRenderTarget)for(let Xe=0;Xe<6;Xe++){if(Array.isArray(ee.__webglFramebuffer[Xe]))for(let it=0;it<ee.__webglFramebuffer[Xe].length;it++)i.deleteFramebuffer(ee.__webglFramebuffer[Xe][it]);else i.deleteFramebuffer(ee.__webglFramebuffer[Xe]);ee.__webglDepthbuffer&&i.deleteRenderbuffer(ee.__webglDepthbuffer[Xe])}else{if(Array.isArray(ee.__webglFramebuffer))for(let Xe=0;Xe<ee.__webglFramebuffer.length;Xe++)i.deleteFramebuffer(ee.__webglFramebuffer[Xe]);else i.deleteFramebuffer(ee.__webglFramebuffer);if(ee.__webglDepthbuffer&&i.deleteRenderbuffer(ee.__webglDepthbuffer),ee.__webglMultisampledFramebuffer&&i.deleteFramebuffer(ee.__webglMultisampledFramebuffer),ee.__webglColorRenderbuffer)for(let Xe=0;Xe<ee.__webglColorRenderbuffer.length;Xe++)ee.__webglColorRenderbuffer[Xe]&&i.deleteRenderbuffer(ee.__webglColorRenderbuffer[Xe]);ee.__webglDepthRenderbuffer&&i.deleteRenderbuffer(ee.__webglDepthRenderbuffer)}const Ne=ce.textures;for(let Xe=0,it=Ne.length;Xe<it;Xe++){const Qe=n.get(Ne[Xe]);Qe.__webglTexture&&(i.deleteTexture(Qe.__webglTexture),a.memory.textures--),n.remove(Ne[Xe])}n.remove(ce)}let $=0;function te(){$=0}function ne(){const ce=$;return ce>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ce+" texture units while this GPU supports only "+r.maxTextures),$+=1,ce}function ue(ce){const ee=[];return ee.push(ce.wrapS),ee.push(ce.wrapT),ee.push(ce.wrapR||0),ee.push(ce.magFilter),ee.push(ce.minFilter),ee.push(ce.anisotropy),ee.push(ce.internalFormat),ee.push(ce.format),ee.push(ce.type),ee.push(ce.generateMipmaps),ee.push(ce.premultiplyAlpha),ee.push(ce.flipY),ee.push(ce.unpackAlignment),ee.push(ce.colorSpace),ee.join()}function ae(ce,ee){const Ne=n.get(ce);if(ce.isVideoTexture&&nt(ce),ce.isRenderTargetTexture===!1&&ce.version>0&&Ne.__version!==ce.version){const Xe=ce.image;if(Xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{be(Ne,ce,ee);return}}t.bindTexture(i.TEXTURE_2D,Ne.__webglTexture,i.TEXTURE0+ee)}function W(ce,ee){const Ne=n.get(ce);if(ce.version>0&&Ne.__version!==ce.version){be(Ne,ce,ee);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Ne.__webglTexture,i.TEXTURE0+ee)}function J(ce,ee){const Ne=n.get(ce);if(ce.version>0&&Ne.__version!==ce.version){be(Ne,ce,ee);return}t.bindTexture(i.TEXTURE_3D,Ne.__webglTexture,i.TEXTURE0+ee)}function re(ce,ee){const Ne=n.get(ce);if(ce.version>0&&Ne.__version!==ce.version){Fe(Ne,ce,ee);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Ne.__webglTexture,i.TEXTURE0+ee)}const ge={[Ah]:i.REPEAT,[au]:i.CLAMP_TO_EDGE,[ph]:i.MIRRORED_REPEAT},Y={[nr]:i.NEAREST,[Wy]:i.NEAREST_MIPMAP_NEAREST,[yc]:i.NEAREST_MIPMAP_LINEAR,[rs]:i.LINEAR,[vd]:i.LINEAR_MIPMAP_NEAREST,[Na]:i.LINEAR_MIPMAP_LINEAR},me={[Ky]:i.NEVER,[nx]:i.ALWAYS,[v5]:i.LESS,[y5]:i.LEQUAL,[Zy]:i.EQUAL,[tx]:i.GEQUAL,[Jy]:i.GREATER,[ex]:i.NOTEQUAL};function Me(ce,ee){if(ee.type===kr&&e.has("OES_texture_float_linear")===!1&&(ee.magFilter===rs||ee.magFilter===vd||ee.magFilter===yc||ee.magFilter===Na||ee.minFilter===rs||ee.minFilter===vd||ee.minFilter===yc||ee.minFilter===Na)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(ce,i.TEXTURE_WRAP_S,ge[ee.wrapS]),i.texParameteri(ce,i.TEXTURE_WRAP_T,ge[ee.wrapT]),(ce===i.TEXTURE_3D||ce===i.TEXTURE_2D_ARRAY)&&i.texParameteri(ce,i.TEXTURE_WRAP_R,ge[ee.wrapR]),i.texParameteri(ce,i.TEXTURE_MAG_FILTER,Y[ee.magFilter]),i.texParameteri(ce,i.TEXTURE_MIN_FILTER,Y[ee.minFilter]),ee.compareFunction&&(i.texParameteri(ce,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(ce,i.TEXTURE_COMPARE_FUNC,me[ee.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(ee.magFilter===nr||ee.minFilter!==yc&&ee.minFilter!==Na||ee.type===kr&&e.has("OES_texture_float_linear")===!1)return;if(ee.anisotropy>1||n.get(ee).__currentAnisotropy){const Ne=e.get("EXT_texture_filter_anisotropic");i.texParameterf(ce,Ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ee.anisotropy,r.getMaxAnisotropy())),n.get(ee).__currentAnisotropy=ee.anisotropy}}}function Be(ce,ee){let Ne=!1;ce.__webglInit===void 0&&(ce.__webglInit=!0,ee.addEventListener("dispose",I));const Xe=ee.source;let it=y.get(Xe);it===void 0&&(it={},y.set(Xe,it));const Qe=ue(ee);if(Qe!==ce.__cacheKey){it[Qe]===void 0&&(it[Qe]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,Ne=!0),it[Qe].usedTimes++;const Ut=it[ce.__cacheKey];Ut!==void 0&&(it[ce.__cacheKey].usedTimes--,Ut.usedTimes===0&&k(ee)),ce.__cacheKey=Qe,ce.__webglTexture=it[Qe].texture}return Ne}function be(ce,ee,Ne){let Xe=i.TEXTURE_2D;(ee.isDataArrayTexture||ee.isCompressedArrayTexture)&&(Xe=i.TEXTURE_2D_ARRAY),ee.isData3DTexture&&(Xe=i.TEXTURE_3D);const it=Be(ce,ee),Qe=ee.source;t.bindTexture(Xe,ce.__webglTexture,i.TEXTURE0+Ne);const Ut=n.get(Qe);if(Qe.version!==Ut.__version||it===!0){t.activeTexture(i.TEXTURE0+Ne);const St=Hn.getPrimaries(Hn.workingColorSpace),Nt=ee.colorSpace===_o?null:Hn.getPrimaries(ee.colorSpace),Xn=ee.colorSpace===_o||St===Nt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,ee.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,ee.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Xn);let Tt=R(ee.image,!1,r.maxTextureSize);Tt=Pt(ee,Tt);const jt=s.convert(ee.format,ee.colorSpace),on=s.convert(ee.type);let cn=P(ee.internalFormat,jt,on,ee.colorSpace,ee.isVideoTexture);Me(Xe,ee);let Bt;const kn=ee.mipmaps,qn=ee.isVideoTexture!==!0,Ei=Ut.__version===void 0||it===!0,pe=Qe.dataReady,It=F(ee,Tt);if(ee.isDepthTexture)cn=O(ee.format===xo,ee.type),Ei&&(qn?t.texStorage2D(i.TEXTURE_2D,1,cn,Tt.width,Tt.height):t.texImage2D(i.TEXTURE_2D,0,cn,Tt.width,Tt.height,0,jt,on,null));else if(ee.isDataTexture)if(kn.length>0){qn&&Ei&&t.texStorage2D(i.TEXTURE_2D,It,cn,kn[0].width,kn[0].height);for(let Ye=0,dt=kn.length;Ye<dt;Ye++)Bt=kn[Ye],qn?pe&&t.texSubImage2D(i.TEXTURE_2D,Ye,0,0,Bt.width,Bt.height,jt,on,Bt.data):t.texImage2D(i.TEXTURE_2D,Ye,cn,Bt.width,Bt.height,0,jt,on,Bt.data);ee.generateMipmaps=!1}else qn?(Ei&&t.texStorage2D(i.TEXTURE_2D,It,cn,Tt.width,Tt.height),pe&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Tt.width,Tt.height,jt,on,Tt.data)):t.texImage2D(i.TEXTURE_2D,0,cn,Tt.width,Tt.height,0,jt,on,Tt.data);else if(ee.isCompressedTexture)if(ee.isCompressedArrayTexture){qn&&Ei&&t.texStorage3D(i.TEXTURE_2D_ARRAY,It,cn,kn[0].width,kn[0].height,Tt.depth);for(let Ye=0,dt=kn.length;Ye<dt;Ye++)if(Bt=kn[Ye],ee.format!==Or)if(jt!==null)if(qn){if(pe)if(ee.layerUpdates.size>0){const Gt=zw(Bt.width,Bt.height,ee.format,ee.type);for(const Ot of ee.layerUpdates){const Tn=Bt.data.subarray(Ot*Gt/Bt.data.BYTES_PER_ELEMENT,(Ot+1)*Gt/Bt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ye,0,0,Ot,Bt.width,Bt.height,1,jt,Tn)}ee.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ye,0,0,0,Bt.width,Bt.height,Tt.depth,jt,Bt.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Ye,cn,Bt.width,Bt.height,Tt.depth,0,Bt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else qn?pe&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,Ye,0,0,0,Bt.width,Bt.height,Tt.depth,jt,on,Bt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Ye,cn,Bt.width,Bt.height,Tt.depth,0,jt,on,Bt.data)}else{qn&&Ei&&t.texStorage2D(i.TEXTURE_2D,It,cn,kn[0].width,kn[0].height);for(let Ye=0,dt=kn.length;Ye<dt;Ye++)Bt=kn[Ye],ee.format!==Or?jt!==null?qn?pe&&t.compressedTexSubImage2D(i.TEXTURE_2D,Ye,0,0,Bt.width,Bt.height,jt,Bt.data):t.compressedTexImage2D(i.TEXTURE_2D,Ye,cn,Bt.width,Bt.height,0,Bt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qn?pe&&t.texSubImage2D(i.TEXTURE_2D,Ye,0,0,Bt.width,Bt.height,jt,on,Bt.data):t.texImage2D(i.TEXTURE_2D,Ye,cn,Bt.width,Bt.height,0,jt,on,Bt.data)}else if(ee.isDataArrayTexture)if(qn){if(Ei&&t.texStorage3D(i.TEXTURE_2D_ARRAY,It,cn,Tt.width,Tt.height,Tt.depth),pe)if(ee.layerUpdates.size>0){const Ye=zw(Tt.width,Tt.height,ee.format,ee.type);for(const dt of ee.layerUpdates){const Gt=Tt.data.subarray(dt*Ye/Tt.data.BYTES_PER_ELEMENT,(dt+1)*Ye/Tt.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,dt,Tt.width,Tt.height,1,jt,on,Gt)}ee.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Tt.width,Tt.height,Tt.depth,jt,on,Tt.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,cn,Tt.width,Tt.height,Tt.depth,0,jt,on,Tt.data);else if(ee.isData3DTexture)qn?(Ei&&t.texStorage3D(i.TEXTURE_3D,It,cn,Tt.width,Tt.height,Tt.depth),pe&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Tt.width,Tt.height,Tt.depth,jt,on,Tt.data)):t.texImage3D(i.TEXTURE_3D,0,cn,Tt.width,Tt.height,Tt.depth,0,jt,on,Tt.data);else if(ee.isFramebufferTexture){if(Ei)if(qn)t.texStorage2D(i.TEXTURE_2D,It,cn,Tt.width,Tt.height);else{let Ye=Tt.width,dt=Tt.height;for(let Gt=0;Gt<It;Gt++)t.texImage2D(i.TEXTURE_2D,Gt,cn,Ye,dt,0,jt,on,null),Ye>>=1,dt>>=1}}else if(kn.length>0){if(qn&&Ei){const Ye=at(kn[0]);t.texStorage2D(i.TEXTURE_2D,It,cn,Ye.width,Ye.height)}for(let Ye=0,dt=kn.length;Ye<dt;Ye++)Bt=kn[Ye],qn?pe&&t.texSubImage2D(i.TEXTURE_2D,Ye,0,0,jt,on,Bt):t.texImage2D(i.TEXTURE_2D,Ye,cn,jt,on,Bt);ee.generateMipmaps=!1}else if(qn){if(Ei){const Ye=at(Tt);t.texStorage2D(i.TEXTURE_2D,It,cn,Ye.width,Ye.height)}pe&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,jt,on,Tt)}else t.texImage2D(i.TEXTURE_2D,0,cn,jt,on,Tt);M(ee)&&E(Xe),Ut.__version=Qe.version,ee.onUpdate&&ee.onUpdate(ee)}ce.__version=ee.version}function Fe(ce,ee,Ne){if(ee.image.length!==6)return;const Xe=Be(ce,ee),it=ee.source;t.bindTexture(i.TEXTURE_CUBE_MAP,ce.__webglTexture,i.TEXTURE0+Ne);const Qe=n.get(it);if(it.version!==Qe.__version||Xe===!0){t.activeTexture(i.TEXTURE0+Ne);const Ut=Hn.getPrimaries(Hn.workingColorSpace),St=ee.colorSpace===_o?null:Hn.getPrimaries(ee.colorSpace),Nt=ee.colorSpace===_o||Ut===St?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,ee.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,ee.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Nt);const Xn=ee.isCompressedTexture||ee.image[0].isCompressedTexture,Tt=ee.image[0]&&ee.image[0].isDataTexture,jt=[];for(let dt=0;dt<6;dt++)!Xn&&!Tt?jt[dt]=R(ee.image[dt],!0,r.maxCubemapSize):jt[dt]=Tt?ee.image[dt].image:ee.image[dt],jt[dt]=Pt(ee,jt[dt]);const on=jt[0],cn=s.convert(ee.format,ee.colorSpace),Bt=s.convert(ee.type),kn=P(ee.internalFormat,cn,Bt,ee.colorSpace),qn=ee.isVideoTexture!==!0,Ei=Qe.__version===void 0||Xe===!0,pe=it.dataReady;let It=F(ee,on);Me(i.TEXTURE_CUBE_MAP,ee);let Ye;if(Xn){qn&&Ei&&t.texStorage2D(i.TEXTURE_CUBE_MAP,It,kn,on.width,on.height);for(let dt=0;dt<6;dt++){Ye=jt[dt].mipmaps;for(let Gt=0;Gt<Ye.length;Gt++){const Ot=Ye[Gt];ee.format!==Or?cn!==null?qn?pe&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Gt,0,0,Ot.width,Ot.height,cn,Ot.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Gt,kn,Ot.width,Ot.height,0,Ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):qn?pe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Gt,0,0,Ot.width,Ot.height,cn,Bt,Ot.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Gt,kn,Ot.width,Ot.height,0,cn,Bt,Ot.data)}}}else{if(Ye=ee.mipmaps,qn&&Ei){Ye.length>0&&It++;const dt=at(jt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,It,kn,dt.width,dt.height)}for(let dt=0;dt<6;dt++)if(Tt){qn?pe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,0,0,jt[dt].width,jt[dt].height,cn,Bt,jt[dt].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,kn,jt[dt].width,jt[dt].height,0,cn,Bt,jt[dt].data);for(let Gt=0;Gt<Ye.length;Gt++){const Tn=Ye[Gt].image[dt].image;qn?pe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Gt+1,0,0,Tn.width,Tn.height,cn,Bt,Tn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Gt+1,kn,Tn.width,Tn.height,0,cn,Bt,Tn.data)}}else{qn?pe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,0,0,cn,Bt,jt[dt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,kn,cn,Bt,jt[dt]);for(let Gt=0;Gt<Ye.length;Gt++){const Ot=Ye[Gt];qn?pe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Gt+1,0,0,cn,Bt,Ot.image[dt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Gt+1,kn,cn,Bt,Ot.image[dt])}}}M(ee)&&E(i.TEXTURE_CUBE_MAP),Qe.__version=it.version,ee.onUpdate&&ee.onUpdate(ee)}ce.__version=ee.version}function $e(ce,ee,Ne,Xe,it,Qe){const Ut=s.convert(Ne.format,Ne.colorSpace),St=s.convert(Ne.type),Nt=P(Ne.internalFormat,Ut,St,Ne.colorSpace),Xn=n.get(ee),Tt=n.get(Ne);if(Tt.__renderTarget=ee,!Xn.__hasExternalTextures){const jt=Math.max(1,ee.width>>Qe),on=Math.max(1,ee.height>>Qe);it===i.TEXTURE_3D||it===i.TEXTURE_2D_ARRAY?t.texImage3D(it,Qe,Nt,jt,on,ee.depth,0,Ut,St,null):t.texImage2D(it,Qe,Nt,jt,on,0,Ut,St,null)}t.bindFramebuffer(i.FRAMEBUFFER,ce),st(ee)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Xe,it,Tt.__webglTexture,0,ut(ee)):(it===i.TEXTURE_2D||it>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&it<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Xe,it,Tt.__webglTexture,Qe),t.bindFramebuffer(i.FRAMEBUFFER,null)}function ht(ce,ee,Ne){if(i.bindRenderbuffer(i.RENDERBUFFER,ce),ee.depthBuffer){const Xe=ee.depthTexture,it=Xe&&Xe.isDepthTexture?Xe.type:null,Qe=O(ee.stencilBuffer,it),Ut=ee.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,St=ut(ee);st(ee)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,St,Qe,ee.width,ee.height):Ne?i.renderbufferStorageMultisample(i.RENDERBUFFER,St,Qe,ee.width,ee.height):i.renderbufferStorage(i.RENDERBUFFER,Qe,ee.width,ee.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ut,i.RENDERBUFFER,ce)}else{const Xe=ee.textures;for(let it=0;it<Xe.length;it++){const Qe=Xe[it],Ut=s.convert(Qe.format,Qe.colorSpace),St=s.convert(Qe.type),Nt=P(Qe.internalFormat,Ut,St,Qe.colorSpace),Xn=ut(ee);Ne&&st(ee)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Xn,Nt,ee.width,ee.height):st(ee)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Xn,Nt,ee.width,ee.height):i.renderbufferStorage(i.RENDERBUFFER,Nt,ee.width,ee.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function wt(ce,ee){if(ee&&ee.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,ce),!(ee.depthTexture&&ee.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Xe=n.get(ee.depthTexture);Xe.__renderTarget=ee,(!Xe.__webglTexture||ee.depthTexture.image.width!==ee.width||ee.depthTexture.image.height!==ee.height)&&(ee.depthTexture.image.width=ee.width,ee.depthTexture.image.height=ee.height,ee.depthTexture.needsUpdate=!0),ae(ee.depthTexture,0);const it=Xe.__webglTexture,Qe=ut(ee);if(ee.depthTexture.format===yo)st(ee)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,it,0,Qe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,it,0);else if(ee.depthTexture.format===xo)st(ee)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,it,0,Qe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,it,0);else throw new Error("Unknown depthTexture format")}function kt(ce){const ee=n.get(ce),Ne=ce.isWebGLCubeRenderTarget===!0;if(ee.__boundDepthTexture!==ce.depthTexture){const Xe=ce.depthTexture;if(ee.__depthDisposeCallback&&ee.__depthDisposeCallback(),Xe){const it=()=>{delete ee.__boundDepthTexture,delete ee.__depthDisposeCallback,Xe.removeEventListener("dispose",it)};Xe.addEventListener("dispose",it),ee.__depthDisposeCallback=it}ee.__boundDepthTexture=Xe}if(ce.depthTexture&&!ee.__autoAllocateDepthBuffer){if(Ne)throw new Error("target.depthTexture not supported in Cube render targets");wt(ee.__webglFramebuffer,ce)}else if(Ne){ee.__webglDepthbuffer=[];for(let Xe=0;Xe<6;Xe++)if(t.bindFramebuffer(i.FRAMEBUFFER,ee.__webglFramebuffer[Xe]),ee.__webglDepthbuffer[Xe]===void 0)ee.__webglDepthbuffer[Xe]=i.createRenderbuffer(),ht(ee.__webglDepthbuffer[Xe],ce,!1);else{const it=ce.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Qe=ee.__webglDepthbuffer[Xe];i.bindRenderbuffer(i.RENDERBUFFER,Qe),i.framebufferRenderbuffer(i.FRAMEBUFFER,it,i.RENDERBUFFER,Qe)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,ee.__webglFramebuffer),ee.__webglDepthbuffer===void 0)ee.__webglDepthbuffer=i.createRenderbuffer(),ht(ee.__webglDepthbuffer,ce,!1);else{const Xe=ce.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,it=ee.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,it),i.framebufferRenderbuffer(i.FRAMEBUFFER,Xe,i.RENDERBUFFER,it)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ct(ce,ee,Ne){const Xe=n.get(ce);ee!==void 0&&$e(Xe.__webglFramebuffer,ce,ce.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Ne!==void 0&&kt(ce)}function Kt(ce){const ee=ce.texture,Ne=n.get(ce),Xe=n.get(ee);ce.addEventListener("dispose",z);const it=ce.textures,Qe=ce.isWebGLCubeRenderTarget===!0,Ut=it.length>1;if(Ut||(Xe.__webglTexture===void 0&&(Xe.__webglTexture=i.createTexture()),Xe.__version=ee.version,a.memory.textures++),Qe){Ne.__webglFramebuffer=[];for(let St=0;St<6;St++)if(ee.mipmaps&&ee.mipmaps.length>0){Ne.__webglFramebuffer[St]=[];for(let Nt=0;Nt<ee.mipmaps.length;Nt++)Ne.__webglFramebuffer[St][Nt]=i.createFramebuffer()}else Ne.__webglFramebuffer[St]=i.createFramebuffer()}else{if(ee.mipmaps&&ee.mipmaps.length>0){Ne.__webglFramebuffer=[];for(let St=0;St<ee.mipmaps.length;St++)Ne.__webglFramebuffer[St]=i.createFramebuffer()}else Ne.__webglFramebuffer=i.createFramebuffer();if(Ut)for(let St=0,Nt=it.length;St<Nt;St++){const Xn=n.get(it[St]);Xn.__webglTexture===void 0&&(Xn.__webglTexture=i.createTexture(),a.memory.textures++)}if(ce.samples>0&&st(ce)===!1){Ne.__webglMultisampledFramebuffer=i.createFramebuffer(),Ne.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer);for(let St=0;St<it.length;St++){const Nt=it[St];Ne.__webglColorRenderbuffer[St]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Ne.__webglColorRenderbuffer[St]);const Xn=s.convert(Nt.format,Nt.colorSpace),Tt=s.convert(Nt.type),jt=P(Nt.internalFormat,Xn,Tt,Nt.colorSpace,ce.isXRRenderTarget===!0),on=ut(ce);i.renderbufferStorageMultisample(i.RENDERBUFFER,on,jt,ce.width,ce.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+St,i.RENDERBUFFER,Ne.__webglColorRenderbuffer[St])}i.bindRenderbuffer(i.RENDERBUFFER,null),ce.depthBuffer&&(Ne.__webglDepthRenderbuffer=i.createRenderbuffer(),ht(Ne.__webglDepthRenderbuffer,ce,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Qe){t.bindTexture(i.TEXTURE_CUBE_MAP,Xe.__webglTexture),Me(i.TEXTURE_CUBE_MAP,ee);for(let St=0;St<6;St++)if(ee.mipmaps&&ee.mipmaps.length>0)for(let Nt=0;Nt<ee.mipmaps.length;Nt++)$e(Ne.__webglFramebuffer[St][Nt],ce,ee,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+St,Nt);else $e(Ne.__webglFramebuffer[St],ce,ee,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+St,0);M(ee)&&E(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ut){for(let St=0,Nt=it.length;St<Nt;St++){const Xn=it[St],Tt=n.get(Xn);t.bindTexture(i.TEXTURE_2D,Tt.__webglTexture),Me(i.TEXTURE_2D,Xn),$e(Ne.__webglFramebuffer,ce,Xn,i.COLOR_ATTACHMENT0+St,i.TEXTURE_2D,0),M(Xn)&&E(i.TEXTURE_2D)}t.unbindTexture()}else{let St=i.TEXTURE_2D;if((ce.isWebGL3DRenderTarget||ce.isWebGLArrayRenderTarget)&&(St=ce.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(St,Xe.__webglTexture),Me(St,ee),ee.mipmaps&&ee.mipmaps.length>0)for(let Nt=0;Nt<ee.mipmaps.length;Nt++)$e(Ne.__webglFramebuffer[Nt],ce,ee,i.COLOR_ATTACHMENT0,St,Nt);else $e(Ne.__webglFramebuffer,ce,ee,i.COLOR_ATTACHMENT0,St,0);M(ee)&&E(St),t.unbindTexture()}ce.depthBuffer&&kt(ce)}function Bn(ce){const ee=ce.textures;for(let Ne=0,Xe=ee.length;Ne<Xe;Ne++){const it=ee[Ne];if(M(it)){const Qe=U(ce),Ut=n.get(it).__webglTexture;t.bindTexture(Qe,Ut),E(Qe),t.unbindTexture()}}}const _n=[],ye=[];function gi(ce){if(ce.samples>0){if(st(ce)===!1){const ee=ce.textures,Ne=ce.width,Xe=ce.height;let it=i.COLOR_BUFFER_BIT;const Qe=ce.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ut=n.get(ce),St=ee.length>1;if(St)for(let Nt=0;Nt<ee.length;Nt++)t.bindFramebuffer(i.FRAMEBUFFER,Ut.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Ut.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Ut.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ut.__webglFramebuffer);for(let Nt=0;Nt<ee.length;Nt++){if(ce.resolveDepthBuffer&&(ce.depthBuffer&&(it|=i.DEPTH_BUFFER_BIT),ce.stencilBuffer&&ce.resolveStencilBuffer&&(it|=i.STENCIL_BUFFER_BIT)),St){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Ut.__webglColorRenderbuffer[Nt]);const Xn=n.get(ee[Nt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Xn,0)}i.blitFramebuffer(0,0,Ne,Xe,0,0,Ne,Xe,it,i.NEAREST),u===!0&&(_n.length=0,ye.length=0,_n.push(i.COLOR_ATTACHMENT0+Nt),ce.depthBuffer&&ce.resolveDepthBuffer===!1&&(_n.push(Qe),ye.push(Qe),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,ye)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,_n))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),St)for(let Nt=0;Nt<ee.length;Nt++){t.bindFramebuffer(i.FRAMEBUFFER,Ut.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.RENDERBUFFER,Ut.__webglColorRenderbuffer[Nt]);const Xn=n.get(ee[Nt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Ut.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.TEXTURE_2D,Xn,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ut.__webglMultisampledFramebuffer)}else if(ce.depthBuffer&&ce.resolveDepthBuffer===!1&&u){const ee=ce.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[ee])}}}function ut(ce){return Math.min(r.maxSamples,ce.samples)}function st(ce){const ee=n.get(ce);return ce.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ee.__useRenderToTexture!==!1}function nt(ce){const ee=a.render.frame;p.get(ce)!==ee&&(p.set(ce,ee),ce.update())}function Pt(ce,ee){const Ne=ce.colorSpace,Xe=ce.format,it=ce.type;return ce.isCompressedTexture===!0||ce.isVideoTexture===!0||Ne!==Pl&&Ne!==_o&&(Hn.getTransfer(Ne)===Ri?(Xe!==Or||it!==Ur)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ne)),ee}function at(ce){return typeof HTMLImageElement<"u"&&ce instanceof HTMLImageElement?(c.width=ce.naturalWidth||ce.width,c.height=ce.naturalHeight||ce.height):typeof VideoFrame<"u"&&ce instanceof VideoFrame?(c.width=ce.displayWidth,c.height=ce.displayHeight):(c.width=ce.width,c.height=ce.height),c}this.allocateTextureUnit=ne,this.resetTextureUnits=te,this.setTexture2D=ae,this.setTexture2DArray=W,this.setTexture3D=J,this.setTextureCube=re,this.rebindTextures=Ct,this.setupRenderTarget=Kt,this.updateRenderTargetMipmap=Bn,this.updateMultisampleRenderTarget=gi,this.setupDepthRenderbuffer=kt,this.setupFrameBufferTexture=$e,this.useMultisampledRTT=st}function P$(i,e){function t(n,r=_o){let s;const a=Hn.getTransfer(r);if(n===Ur)return i.UNSIGNED_BYTE;if(n===m5)return i.UNSIGNED_SHORT_4_4_4_4;if(n===g5)return i.UNSIGNED_SHORT_5_5_5_1;if(n===_5)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===ih)return i.BYTE;if(n===rh)return i.SHORT;if(n===Ml)return i.UNSIGNED_SHORT;if(n===qs)return i.INT;if(n===Qi)return i.UNSIGNED_INT;if(n===kr)return i.FLOAT;if(n===Ss)return i.HALF_FLOAT;if(n===$y)return i.ALPHA;if(n===R3)return i.RGB;if(n===Or)return i.RGBA;if(n===Xy)return i.LUMINANCE;if(n===Qy)return i.LUMINANCE_ALPHA;if(n===yo)return i.DEPTH_COMPONENT;if(n===xo)return i.DEPTH_STENCIL;if(n===C3)return i.RED;if(n===mA)return i.RED_INTEGER;if(n===mh)return i.RG;if(n===gA)return i.RG_INTEGER;if(n===_A)return i.RGBA_INTEGER;if(n===sh||n===F1||n===k1||n===z1)if(a===Ri)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===sh)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===F1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===k1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===z1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===sh)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===F1)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===k1)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===z1)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Hp||n===jp||n===Wp||n===$p)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Hp)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===jp)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Wp)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===$p)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Xp||n===Dd||n===Ld)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===Xp||n===Dd)return a===Ri?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Ld)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Ud||n===Od||n===Bd||n===Id||n===Fd||n===kd||n===zd||n===Gd||n===Vd||n===Hd||n===jd||n===Wd||n===$d||n===Xd)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===Ud)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Od)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Bd)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Id)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Fd)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===kd)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===zd)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Gd)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Vd)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Hd)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===jd)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Wd)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===$d)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Xd)return a===Ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===ah||n===Q_||n===Y_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===ah)return a===Ri?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Q_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Y_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Yy||n===Qp||n===Yp||n===Kp)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===ah)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Qp)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Yp)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Kp)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===vo?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const D$=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,L$=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class U${constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new ss,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Ga({vertexShader:D$,fragmentShader:L$,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new yi(new L3(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class O$ extends Eu{constructor(e,t){super();const n=this;let r=null,s=1,a=null,o="local-floor",u=1,c=null,p=null,g=null,y=null,q=null,S=null;const R=new U$,M=t.getContextAttributes();let E=null,U=null;const P=[],O=[],F=new rt;let I=null;const z=new bs;z.viewport=new sn;const j=new bs;j.viewport=new sn;const k=[z,j],G=new BN;let $=null,te=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(be){let Fe=P[be];return Fe===void 0&&(Fe=new j6,P[be]=Fe),Fe.getTargetRaySpace()},this.getControllerGrip=function(be){let Fe=P[be];return Fe===void 0&&(Fe=new j6,P[be]=Fe),Fe.getGripSpace()},this.getHand=function(be){let Fe=P[be];return Fe===void 0&&(Fe=new j6,P[be]=Fe),Fe.getHandSpace()};function ne(be){const Fe=O.indexOf(be.inputSource);if(Fe===-1)return;const $e=P[Fe];$e!==void 0&&($e.update(be.inputSource,be.frame,c||a),$e.dispatchEvent({type:be.type,data:be.inputSource}))}function ue(){r.removeEventListener("select",ne),r.removeEventListener("selectstart",ne),r.removeEventListener("selectend",ne),r.removeEventListener("squeeze",ne),r.removeEventListener("squeezestart",ne),r.removeEventListener("squeezeend",ne),r.removeEventListener("end",ue),r.removeEventListener("inputsourceschange",ae);for(let be=0;be<P.length;be++){const Fe=O[be];Fe!==null&&(O[be]=null,P[be].disconnect(Fe))}$=null,te=null,R.reset(),e.setRenderTarget(E),q=null,y=null,g=null,r=null,U=null,Be.stop(),n.isPresenting=!1,e.setPixelRatio(I),e.setSize(F.width,F.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(be){s=be,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(be){o=be,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(be){c=be},this.getBaseLayer=function(){return y!==null?y:q},this.getBinding=function(){return g},this.getFrame=function(){return S},this.getSession=function(){return r},this.setSession=async function(be){if(r=be,r!==null){if(E=e.getRenderTarget(),r.addEventListener("select",ne),r.addEventListener("selectstart",ne),r.addEventListener("selectend",ne),r.addEventListener("squeeze",ne),r.addEventListener("squeezestart",ne),r.addEventListener("squeezeend",ne),r.addEventListener("end",ue),r.addEventListener("inputsourceschange",ae),M.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(F),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let $e=null,ht=null,wt=null;M.depth&&(wt=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,$e=M.stencil?xo:yo,ht=M.stencil?vo:Qi);const kt={colorFormat:t.RGBA8,depthFormat:wt,scaleFactor:s};g=new XRWebGLBinding(r,t),y=g.createProjectionLayer(kt),r.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),U=new X1(y.textureWidth,y.textureHeight,{format:Or,type:Ur,depthTexture:new qo(y.textureWidth,y.textureHeight,ht,void 0,void 0,void 0,void 0,void 0,void 0,$e),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const $e={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:s};q=new XRWebGLLayer(r,t,$e),r.updateRenderState({baseLayer:q}),e.setPixelRatio(1),e.setSize(q.framebufferWidth,q.framebufferHeight,!1),U=new X1(q.framebufferWidth,q.framebufferHeight,{format:Or,type:Ur,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:q.ignoreDepthValues===!1,resolveStencilBuffer:q.ignoreDepthValues===!1})}U.isXRRenderTarget=!0,this.setFoveation(u),c=null,a=await r.requestReferenceSpace(o),Be.setContext(r),Be.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return R.getDepthTexture()};function ae(be){for(let Fe=0;Fe<be.removed.length;Fe++){const $e=be.removed[Fe],ht=O.indexOf($e);ht>=0&&(O[ht]=null,P[ht].disconnect($e))}for(let Fe=0;Fe<be.added.length;Fe++){const $e=be.added[Fe];let ht=O.indexOf($e);if(ht===-1){for(let kt=0;kt<P.length;kt++)if(kt>=O.length){O.push($e),ht=kt;break}else if(O[kt]===null){O[kt]=$e,ht=kt;break}if(ht===-1)break}const wt=P[ht];wt&&wt.connect($e)}}const W=new le,J=new le;function re(be,Fe,$e){W.setFromMatrixPosition(Fe.matrixWorld),J.setFromMatrixPosition($e.matrixWorld);const ht=W.distanceTo(J),wt=Fe.projectionMatrix.elements,kt=$e.projectionMatrix.elements,Ct=wt[14]/(wt[10]-1),Kt=wt[14]/(wt[10]+1),Bn=(wt[9]+1)/wt[5],_n=(wt[9]-1)/wt[5],ye=(wt[8]-1)/wt[0],gi=(kt[8]+1)/kt[0],ut=Ct*ye,st=Ct*gi,nt=ht/(-ye+gi),Pt=nt*-ye;if(Fe.matrixWorld.decompose(be.position,be.quaternion,be.scale),be.translateX(Pt),be.translateZ(nt),be.matrixWorld.compose(be.position,be.quaternion,be.scale),be.matrixWorldInverse.copy(be.matrixWorld).invert(),wt[10]===-1)be.projectionMatrix.copy(Fe.projectionMatrix),be.projectionMatrixInverse.copy(Fe.projectionMatrixInverse);else{const at=Ct+nt,ce=Kt+nt,ee=ut-Pt,Ne=st+(ht-Pt),Xe=Bn*Kt/ce*at,it=_n*Kt/ce*at;be.projectionMatrix.makePerspective(ee,Ne,Xe,it,at,ce),be.projectionMatrixInverse.copy(be.projectionMatrix).invert()}}function ge(be,Fe){Fe===null?be.matrixWorld.copy(be.matrix):be.matrixWorld.multiplyMatrices(Fe.matrixWorld,be.matrix),be.matrixWorldInverse.copy(be.matrixWorld).invert()}this.updateCamera=function(be){if(r===null)return;let Fe=be.near,$e=be.far;R.texture!==null&&(R.depthNear>0&&(Fe=R.depthNear),R.depthFar>0&&($e=R.depthFar)),G.near=j.near=z.near=Fe,G.far=j.far=z.far=$e,($!==G.near||te!==G.far)&&(r.updateRenderState({depthNear:G.near,depthFar:G.far}),$=G.near,te=G.far),z.layers.mask=be.layers.mask|2,j.layers.mask=be.layers.mask|4,G.layers.mask=z.layers.mask|j.layers.mask;const ht=be.parent,wt=G.cameras;ge(G,ht);for(let kt=0;kt<wt.length;kt++)ge(wt[kt],ht);wt.length===2?re(G,z,j):G.projectionMatrix.copy(z.projectionMatrix),Y(be,G,ht)};function Y(be,Fe,$e){$e===null?be.matrix.copy(Fe.matrixWorld):(be.matrix.copy($e.matrixWorld),be.matrix.invert(),be.matrix.multiply(Fe.matrixWorld)),be.matrix.decompose(be.position,be.quaternion,be.scale),be.updateMatrixWorld(!0),be.projectionMatrix.copy(Fe.projectionMatrix),be.projectionMatrixInverse.copy(Fe.projectionMatrixInverse),be.isPerspectiveCamera&&(be.fov=gh*2*Math.atan(1/be.projectionMatrix.elements[5]),be.zoom=1)}this.getCamera=function(){return G},this.getFoveation=function(){if(!(y===null&&q===null))return u},this.setFoveation=function(be){u=be,y!==null&&(y.fixedFoveation=be),q!==null&&q.fixedFoveation!==void 0&&(q.fixedFoveation=be)},this.hasDepthSensing=function(){return R.texture!==null},this.getDepthSensingMesh=function(){return R.getMesh(G)};let me=null;function Me(be,Fe){if(p=Fe.getViewerPose(c||a),S=Fe,p!==null){const $e=p.views;q!==null&&(e.setRenderTargetFramebuffer(U,q.framebuffer),e.setRenderTarget(U));let ht=!1;$e.length!==G.cameras.length&&(G.cameras.length=0,ht=!0);for(let Ct=0;Ct<$e.length;Ct++){const Kt=$e[Ct];let Bn=null;if(q!==null)Bn=q.getViewport(Kt);else{const ye=g.getViewSubImage(y,Kt);Bn=ye.viewport,Ct===0&&(e.setRenderTargetTextures(U,ye.colorTexture,ye.depthStencilTexture),e.setRenderTarget(U))}let _n=k[Ct];_n===void 0&&(_n=new bs,_n.layers.enable(Ct),_n.viewport=new sn,k[Ct]=_n),_n.matrix.fromArray(Kt.transform.matrix),_n.matrix.decompose(_n.position,_n.quaternion,_n.scale),_n.projectionMatrix.fromArray(Kt.projectionMatrix),_n.projectionMatrixInverse.copy(_n.projectionMatrix).invert(),_n.viewport.set(Bn.x,Bn.y,Bn.width,Bn.height),Ct===0&&(G.matrix.copy(_n.matrix),G.matrix.decompose(G.position,G.quaternion,G.scale)),ht===!0&&G.cameras.push(_n)}const wt=r.enabledFeatures;if(wt&&wt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&g){const Ct=g.getDepthInformation($e[0]);Ct&&Ct.isValid&&Ct.texture&&R.init(e,Ct,r.renderState)}}for(let $e=0;$e<P.length;$e++){const ht=O[$e],wt=P[$e];ht!==null&&wt!==void 0&&wt.update(ht,Fe,c||a)}me&&me(be,Fe),Fe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Fe}),S=null}const Be=new kN;Be.setAnimationLoop(Me),this.setAnimationLoop=function(be){me=be},this.dispose=function(){}}}const R0=new ks,B$=new yn;function I$(i,e){function t(M,E){M.matrixAutoUpdate===!0&&M.updateMatrix(),E.value.copy(M.matrix)}function n(M,E){E.color.getRGB(M.fogColor.value,gN(i)),E.isFog?(M.fogNear.value=E.near,M.fogFar.value=E.far):E.isFogExp2&&(M.fogDensity.value=E.density)}function r(M,E,U,P,O){E.isMeshBasicMaterial||E.isMeshLambertMaterial?s(M,E):E.isMeshToonMaterial?(s(M,E),g(M,E)):E.isMeshPhongMaterial?(s(M,E),p(M,E)):E.isMeshStandardMaterial?(s(M,E),y(M,E),E.isMeshPhysicalMaterial&&q(M,E,O)):E.isMeshMatcapMaterial?(s(M,E),S(M,E)):E.isMeshDepthMaterial?s(M,E):E.isMeshDistanceMaterial?(s(M,E),R(M,E)):E.isMeshNormalMaterial?s(M,E):E.isLineBasicMaterial?(a(M,E),E.isLineDashedMaterial&&o(M,E)):E.isPointsMaterial?u(M,E,U,P):E.isSpriteMaterial?c(M,E):E.isShadowMaterial?(M.color.value.copy(E.color),M.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function s(M,E){M.opacity.value=E.opacity,E.color&&M.diffuse.value.copy(E.color),E.emissive&&M.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(M.map.value=E.map,t(E.map,M.mapTransform)),E.alphaMap&&(M.alphaMap.value=E.alphaMap,t(E.alphaMap,M.alphaMapTransform)),E.bumpMap&&(M.bumpMap.value=E.bumpMap,t(E.bumpMap,M.bumpMapTransform),M.bumpScale.value=E.bumpScale,E.side===Oi&&(M.bumpScale.value*=-1)),E.normalMap&&(M.normalMap.value=E.normalMap,t(E.normalMap,M.normalMapTransform),M.normalScale.value.copy(E.normalScale),E.side===Oi&&M.normalScale.value.negate()),E.displacementMap&&(M.displacementMap.value=E.displacementMap,t(E.displacementMap,M.displacementMapTransform),M.displacementScale.value=E.displacementScale,M.displacementBias.value=E.displacementBias),E.emissiveMap&&(M.emissiveMap.value=E.emissiveMap,t(E.emissiveMap,M.emissiveMapTransform)),E.specularMap&&(M.specularMap.value=E.specularMap,t(E.specularMap,M.specularMapTransform)),E.alphaTest>0&&(M.alphaTest.value=E.alphaTest);const U=e.get(E),P=U.envMap,O=U.envMapRotation;P&&(M.envMap.value=P,R0.copy(O),R0.x*=-1,R0.y*=-1,R0.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(R0.y*=-1,R0.z*=-1),M.envMapRotation.value.setFromMatrix4(B$.makeRotationFromEuler(R0)),M.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=E.reflectivity,M.ior.value=E.ior,M.refractionRatio.value=E.refractionRatio),E.lightMap&&(M.lightMap.value=E.lightMap,M.lightMapIntensity.value=E.lightMapIntensity,t(E.lightMap,M.lightMapTransform)),E.aoMap&&(M.aoMap.value=E.aoMap,M.aoMapIntensity.value=E.aoMapIntensity,t(E.aoMap,M.aoMapTransform))}function a(M,E){M.diffuse.value.copy(E.color),M.opacity.value=E.opacity,E.map&&(M.map.value=E.map,t(E.map,M.mapTransform))}function o(M,E){M.dashSize.value=E.dashSize,M.totalSize.value=E.dashSize+E.gapSize,M.scale.value=E.scale}function u(M,E,U,P){M.diffuse.value.copy(E.color),M.opacity.value=E.opacity,M.size.value=E.size*U,M.scale.value=P*.5,E.map&&(M.map.value=E.map,t(E.map,M.uvTransform)),E.alphaMap&&(M.alphaMap.value=E.alphaMap,t(E.alphaMap,M.alphaMapTransform)),E.alphaTest>0&&(M.alphaTest.value=E.alphaTest)}function c(M,E){M.diffuse.value.copy(E.color),M.opacity.value=E.opacity,M.rotation.value=E.rotation,E.map&&(M.map.value=E.map,t(E.map,M.mapTransform)),E.alphaMap&&(M.alphaMap.value=E.alphaMap,t(E.alphaMap,M.alphaMapTransform)),E.alphaTest>0&&(M.alphaTest.value=E.alphaTest)}function p(M,E){M.specular.value.copy(E.specular),M.shininess.value=Math.max(E.shininess,1e-4)}function g(M,E){E.gradientMap&&(M.gradientMap.value=E.gradientMap)}function y(M,E){M.metalness.value=E.metalness,E.metalnessMap&&(M.metalnessMap.value=E.metalnessMap,t(E.metalnessMap,M.metalnessMapTransform)),M.roughness.value=E.roughness,E.roughnessMap&&(M.roughnessMap.value=E.roughnessMap,t(E.roughnessMap,M.roughnessMapTransform)),E.envMap&&(M.envMapIntensity.value=E.envMapIntensity)}function q(M,E,U){M.ior.value=E.ior,E.sheen>0&&(M.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),M.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(M.sheenColorMap.value=E.sheenColorMap,t(E.sheenColorMap,M.sheenColorMapTransform)),E.sheenRoughnessMap&&(M.sheenRoughnessMap.value=E.sheenRoughnessMap,t(E.sheenRoughnessMap,M.sheenRoughnessMapTransform))),E.clearcoat>0&&(M.clearcoat.value=E.clearcoat,M.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(M.clearcoatMap.value=E.clearcoatMap,t(E.clearcoatMap,M.clearcoatMapTransform)),E.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap,t(E.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),E.clearcoatNormalMap&&(M.clearcoatNormalMap.value=E.clearcoatNormalMap,t(E.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),E.side===Oi&&M.clearcoatNormalScale.value.negate())),E.dispersion>0&&(M.dispersion.value=E.dispersion),E.iridescence>0&&(M.iridescence.value=E.iridescence,M.iridescenceIOR.value=E.iridescenceIOR,M.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(M.iridescenceMap.value=E.iridescenceMap,t(E.iridescenceMap,M.iridescenceMapTransform)),E.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=E.iridescenceThicknessMap,t(E.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),E.transmission>0&&(M.transmission.value=E.transmission,M.transmissionSamplerMap.value=U.texture,M.transmissionSamplerSize.value.set(U.width,U.height),E.transmissionMap&&(M.transmissionMap.value=E.transmissionMap,t(E.transmissionMap,M.transmissionMapTransform)),M.thickness.value=E.thickness,E.thicknessMap&&(M.thicknessMap.value=E.thicknessMap,t(E.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=E.attenuationDistance,M.attenuationColor.value.copy(E.attenuationColor)),E.anisotropy>0&&(M.anisotropyVector.value.set(E.anisotropy*Math.cos(E.anisotropyRotation),E.anisotropy*Math.sin(E.anisotropyRotation)),E.anisotropyMap&&(M.anisotropyMap.value=E.anisotropyMap,t(E.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=E.specularIntensity,M.specularColor.value.copy(E.specularColor),E.specularColorMap&&(M.specularColorMap.value=E.specularColorMap,t(E.specularColorMap,M.specularColorMapTransform)),E.specularIntensityMap&&(M.specularIntensityMap.value=E.specularIntensityMap,t(E.specularIntensityMap,M.specularIntensityMapTransform))}function S(M,E){E.matcap&&(M.matcap.value=E.matcap)}function R(M,E){const U=e.get(E).light;M.referencePosition.value.setFromMatrixPosition(U.matrixWorld),M.nearDistance.value=U.shadow.camera.near,M.farDistance.value=U.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function F$(i,e,t,n){let r={},s={},a=[];const o=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function u(U,P){const O=P.program;n.uniformBlockBinding(U,O)}function c(U,P){let O=r[U.id];O===void 0&&(S(U),O=p(U),r[U.id]=O,U.addEventListener("dispose",M));const F=P.program;n.updateUBOMapping(U,F);const I=e.render.frame;s[U.id]!==I&&(y(U),s[U.id]=I)}function p(U){const P=g();U.__bindingPointIndex=P;const O=i.createBuffer(),F=U.__size,I=U.usage;return i.bindBuffer(i.UNIFORM_BUFFER,O),i.bufferData(i.UNIFORM_BUFFER,F,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,P,O),O}function g(){for(let U=0;U<o;U++)if(a.indexOf(U)===-1)return a.push(U),U;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(U){const P=r[U.id],O=U.uniforms,F=U.__cache;i.bindBuffer(i.UNIFORM_BUFFER,P);for(let I=0,z=O.length;I<z;I++){const j=Array.isArray(O[I])?O[I]:[O[I]];for(let k=0,G=j.length;k<G;k++){const $=j[k];if(q($,I,k,F)===!0){const te=$.__offset,ne=Array.isArray($.value)?$.value:[$.value];let ue=0;for(let ae=0;ae<ne.length;ae++){const W=ne[ae],J=R(W);typeof W=="number"||typeof W=="boolean"?($.__data[0]=W,i.bufferSubData(i.UNIFORM_BUFFER,te+ue,$.__data)):W.isMatrix3?($.__data[0]=W.elements[0],$.__data[1]=W.elements[1],$.__data[2]=W.elements[2],$.__data[3]=0,$.__data[4]=W.elements[3],$.__data[5]=W.elements[4],$.__data[6]=W.elements[5],$.__data[7]=0,$.__data[8]=W.elements[6],$.__data[9]=W.elements[7],$.__data[10]=W.elements[8],$.__data[11]=0):(W.toArray($.__data,ue),ue+=J.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,te,$.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function q(U,P,O,F){const I=U.value,z=P+"_"+O;if(F[z]===void 0)return typeof I=="number"||typeof I=="boolean"?F[z]=I:F[z]=I.clone(),!0;{const j=F[z];if(typeof I=="number"||typeof I=="boolean"){if(j!==I)return F[z]=I,!0}else if(j.equals(I)===!1)return j.copy(I),!0}return!1}function S(U){const P=U.uniforms;let O=0;const F=16;for(let z=0,j=P.length;z<j;z++){const k=Array.isArray(P[z])?P[z]:[P[z]];for(let G=0,$=k.length;G<$;G++){const te=k[G],ne=Array.isArray(te.value)?te.value:[te.value];for(let ue=0,ae=ne.length;ue<ae;ue++){const W=ne[ue],J=R(W),re=O%F,ge=re%J.boundary,Y=re+ge;O+=ge,Y!==0&&F-Y<J.storage&&(O+=F-Y),te.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),te.__offset=O,O+=J.storage}}}const I=O%F;return I>0&&(O+=F-I),U.__size=O,U.__cache={},this}function R(U){const P={boundary:0,storage:0};return typeof U=="number"||typeof U=="boolean"?(P.boundary=4,P.storage=4):U.isVector2?(P.boundary=8,P.storage=8):U.isVector3||U.isColor?(P.boundary=16,P.storage=12):U.isVector4?(P.boundary=16,P.storage=16):U.isMatrix3?(P.boundary=48,P.storage=48):U.isMatrix4?(P.boundary=64,P.storage=64):U.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",U),P}function M(U){const P=U.target;P.removeEventListener("dispose",M);const O=a.indexOf(P.__bindingPointIndex);a.splice(O,1),i.deleteBuffer(r[P.id]),delete r[P.id],delete s[P.id]}function E(){for(const U in r)i.deleteBuffer(r[U]);a=[],r={},s={}}return{bind:u,update:c,dispose:E}}class k${constructor(e={}){const{canvas:t=AN(),context:n=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:c=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let q;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");q=n.getContextAttributes().alpha}else q=a;const S=new Uint32Array(4),R=new Int32Array(4);let M=null,E=null;const U=[],P=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=za,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const O=this;let F=!1;this._outputColorSpace=nn;let I=0,z=0,j=null,k=-1,G=null;const $=new sn,te=new sn;let ne=null;const ue=new Xt(0);let ae=0,W=t.width,J=t.height,re=1,ge=null,Y=null;const me=new sn(0,0,W,J),Me=new sn(0,0,W,J);let Be=!1;const be=new D3;let Fe=!1,$e=!1;const ht=new yn,wt=new yn,kt=new le,Ct=new sn,Kt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Bn=!1;function _n(){return j===null?re:1}let ye=n;function gi(oe,Re){return t.getContext(oe,Re)}try{const oe={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:u,preserveDrawingBuffer:c,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${pA}`),t.addEventListener("webglcontextlost",dt,!1),t.addEventListener("webglcontextrestored",Gt,!1),t.addEventListener("webglcontextcreationerror",Ot,!1),ye===null){const Re="webgl2";if(ye=gi(Re,oe),ye===null)throw gi(Re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(oe){throw console.error("THREE.WebGLRenderer: "+oe.message),oe}let ut,st,nt,Pt,at,ce,ee,Ne,Xe,it,Qe,Ut,St,Nt,Xn,Tt,jt,on,cn,Bt,kn,qn,Ei,pe;function It(){ut=new Yj(ye),ut.init(),qn=new P$(ye,ut),st=new Vj(ye,ut,e,qn),nt=new C$(ye,ut),st.reverseDepthBuffer&&y&&nt.buffers.depth.setReversed(!0),Pt=new Jj(ye),at=new g$,ce=new N$(ye,ut,nt,at,st,qn,Pt),ee=new jj(O),Ne=new Qj(O),Xe=new sV(ye),Ei=new zj(ye,Xe),it=new Kj(ye,Xe,Pt,Ei),Qe=new tW(ye,it,Xe,Pt),cn=new eW(ye,st,ce),Tt=new Hj(at),Ut=new m$(O,ee,Ne,ut,st,Ei,Tt),St=new I$(O,at),Nt=new v$,Xn=new T$(ut),on=new kj(O,ee,Ne,nt,Qe,q,u),jt=new M$(O,Qe,st),pe=new F$(ye,Pt,st,nt),Bt=new Gj(ye,ut,Pt),kn=new Zj(ye,ut,Pt),Pt.programs=Ut.programs,O.capabilities=st,O.extensions=ut,O.properties=at,O.renderLists=Nt,O.shadowMap=jt,O.state=nt,O.info=Pt}It();const Ye=new O$(O,ye);this.xr=Ye,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const oe=ut.get("WEBGL_lose_context");oe&&oe.loseContext()},this.forceContextRestore=function(){const oe=ut.get("WEBGL_lose_context");oe&&oe.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(oe){oe!==void 0&&(re=oe,this.setSize(W,J,!1))},this.getSize=function(oe){return oe.set(W,J)},this.setSize=function(oe,Re,He=!0){if(Ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}W=oe,J=Re,t.width=Math.floor(oe*re),t.height=Math.floor(Re*re),He===!0&&(t.style.width=oe+"px",t.style.height=Re+"px"),this.setViewport(0,0,oe,Re)},this.getDrawingBufferSize=function(oe){return oe.set(W*re,J*re).floor()},this.setDrawingBufferSize=function(oe,Re,He){W=oe,J=Re,re=He,t.width=Math.floor(oe*He),t.height=Math.floor(Re*He),this.setViewport(0,0,oe,Re)},this.getCurrentViewport=function(oe){return oe.copy($)},this.getViewport=function(oe){return oe.copy(me)},this.setViewport=function(oe,Re,He,Ve){oe.isVector4?me.set(oe.x,oe.y,oe.z,oe.w):me.set(oe,Re,He,Ve),nt.viewport($.copy(me).multiplyScalar(re).round())},this.getScissor=function(oe){return oe.copy(Me)},this.setScissor=function(oe,Re,He,Ve){oe.isVector4?Me.set(oe.x,oe.y,oe.z,oe.w):Me.set(oe,Re,He,Ve),nt.scissor(te.copy(Me).multiplyScalar(re).round())},this.getScissorTest=function(){return Be},this.setScissorTest=function(oe){nt.setScissorTest(Be=oe)},this.setOpaqueSort=function(oe){ge=oe},this.setTransparentSort=function(oe){Y=oe},this.getClearColor=function(oe){return oe.copy(on.getClearColor())},this.setClearColor=function(){on.setClearColor(...arguments)},this.getClearAlpha=function(){return on.getClearAlpha()},this.setClearAlpha=function(){on.setClearAlpha(...arguments)},this.clear=function(oe=!0,Re=!0,He=!0){let Ve=0;if(oe){let Le=!1;if(j!==null){const bt=j.texture.format;Le=bt===_A||bt===gA||bt===mA}if(Le){const bt=j.texture.type,Rt=bt===Ur||bt===Qi||bt===Ml||bt===vo||bt===m5||bt===g5,ot=on.getClearColor(),Z=on.getClearAlpha(),qt=ot.r,ln=ot.g,en=ot.b;Rt?(S[0]=qt,S[1]=ln,S[2]=en,S[3]=Z,ye.clearBufferuiv(ye.COLOR,0,S)):(R[0]=qt,R[1]=ln,R[2]=en,R[3]=Z,ye.clearBufferiv(ye.COLOR,0,R))}else Ve|=ye.COLOR_BUFFER_BIT}Re&&(Ve|=ye.DEPTH_BUFFER_BIT),He&&(Ve|=ye.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ye.clear(Ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",dt,!1),t.removeEventListener("webglcontextrestored",Gt,!1),t.removeEventListener("webglcontextcreationerror",Ot,!1),on.dispose(),Nt.dispose(),Xn.dispose(),at.dispose(),ee.dispose(),Ne.dispose(),Qe.dispose(),Ei.dispose(),pe.dispose(),Ut.dispose(),Ye.dispose(),Ye.removeEventListener("sessionstart",Ie),Ye.removeEventListener("sessionend",Je),Et.stop()};function dt(oe){oe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function Gt(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const oe=Pt.autoReset,Re=jt.enabled,He=jt.autoUpdate,Ve=jt.needsUpdate,Le=jt.type;It(),Pt.autoReset=oe,jt.enabled=Re,jt.autoUpdate=He,jt.needsUpdate=Ve,jt.type=Le}function Ot(oe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",oe.statusMessage)}function Tn(oe){const Re=oe.target;Re.removeEventListener("dispose",Tn),Pi(Re)}function Pi(oe){yr(oe),at.remove(oe)}function yr(oe){const Re=at.get(oe).programs;Re!==void 0&&(Re.forEach(function(He){Ut.releaseProgram(He)}),oe.isShaderMaterial&&Ut.releaseShaderCache(oe))}this.renderBufferDirect=function(oe,Re,He,Ve,Le,bt){Re===null&&(Re=Kt);const Rt=Le.isMesh&&Le.matrixWorld.determinant()<0,ot=Hs(oe,Re,He,Ve,Le);nt.setMaterial(Ve,Rt);let Z=He.index,qt=1;if(Ve.wireframe===!0){if(Z=it.getWireframeAttribute(He),Z===void 0)return;qt=2}const ln=He.drawRange,en=He.attributes.position;let Kn=ln.start*qt,di=(ln.start+ln.count)*qt;bt!==null&&(Kn=Math.max(Kn,bt.start*qt),di=Math.min(di,(bt.start+bt.count)*qt)),Z!==null?(Kn=Math.max(Kn,0),di=Math.min(di,Z.count)):en!=null&&(Kn=Math.max(Kn,0),di=Math.min(di,en.count));const sr=di-Kn;if(sr<0||sr===1/0)return;Ei.setup(Le,Ve,ot,He,Z);let Q,ri=Bt;if(Z!==null&&(Q=Xe.get(Z),ri=kn,ri.setIndex(Q)),Le.isMesh)Ve.wireframe===!0?(nt.setLineWidth(Ve.wireframeLinewidth*_n()),ri.setMode(ye.LINES)):ri.setMode(ye.TRIANGLES);else if(Le.isLine){let hn=Ve.linewidth;hn===void 0&&(hn=1),nt.setLineWidth(hn*_n()),Le.isLineSegments?ri.setMode(ye.LINES):Le.isLineLoop?ri.setMode(ye.LINE_LOOP):ri.setMode(ye.LINE_STRIP)}else Le.isPoints?ri.setMode(ye.POINTS):Le.isSprite&&ri.setMode(ye.TRIANGLES);if(Le.isBatchedMesh)if(Le._multiDrawInstances!==null)Dl("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),ri.renderMultiDrawInstances(Le._multiDrawStarts,Le._multiDrawCounts,Le._multiDrawCount,Le._multiDrawInstances);else if(ut.get("WEBGL_multi_draw"))ri.renderMultiDraw(Le._multiDrawStarts,Le._multiDrawCounts,Le._multiDrawCount);else{const hn=Le._multiDrawStarts,fr=Le._multiDrawCounts,fi=Le._multiDrawCount,cs=Z?Xe.get(Z).bytesPerElement:1,Fl=at.get(Ve).currentProgram.getUniforms();for(let Di=0;Di<fi;Di++)Fl.setValue(ye,"_gl_DrawID",Di),ri.render(hn[Di]/cs,fr[Di])}else if(Le.isInstancedMesh)ri.renderInstances(Kn,sr,Le.count);else if(He.isInstancedBufferGeometry){const hn=He._maxInstanceCount!==void 0?He._maxInstanceCount:1/0,fr=Math.min(He.instanceCount,hn);ri.renderInstances(Kn,sr,fr)}else ri.render(Kn,sr)};function ii(oe,Re,He){oe.transparent===!0&&oe.side===Qr&&oe.forceSinglePass===!1?(oe.side=Oi,oe.needsUpdate=!0,ji(oe,Re,He),oe.side=Ia,oe.needsUpdate=!0,ji(oe,Re,He),oe.side=Qr):ji(oe,Re,He)}this.compile=function(oe,Re,He=null){He===null&&(He=oe),E=Xn.get(He),E.init(Re),P.push(E),He.traverseVisible(function(Le){Le.isLight&&Le.layers.test(Re.layers)&&(E.pushLight(Le),Le.castShadow&&E.pushShadow(Le))}),oe!==He&&oe.traverseVisible(function(Le){Le.isLight&&Le.layers.test(Re.layers)&&(E.pushLight(Le),Le.castShadow&&E.pushShadow(Le))}),E.setupLights();const Ve=new Set;return oe.traverse(function(Le){if(!(Le.isMesh||Le.isPoints||Le.isLine||Le.isSprite))return;const bt=Le.material;if(bt)if(Array.isArray(bt))for(let Rt=0;Rt<bt.length;Rt++){const ot=bt[Rt];ii(ot,He,Le),Ve.add(ot)}else ii(bt,He,Le),Ve.add(bt)}),E=P.pop(),Ve},this.compileAsync=function(oe,Re,He=null){const Ve=this.compile(oe,Re,He);return new Promise(Le=>{function bt(){if(Ve.forEach(function(Rt){at.get(Rt).currentProgram.isReady()&&Ve.delete(Rt)}),Ve.size===0){Le(oe);return}setTimeout(bt,10)}ut.get("KHR_parallel_shader_compile")!==null?bt():setTimeout(bt,10)})};let ws=null;function rr(oe){ws&&ws(oe)}function Ie(){Et.stop()}function Je(){Et.start()}const Et=new kN;Et.setAnimationLoop(rr),typeof self<"u"&&Et.setContext(self),this.setAnimationLoop=function(oe){ws=oe,Ye.setAnimationLoop(oe),oe===null?Et.stop():Et.start()},Ye.addEventListener("sessionstart",Ie),Ye.addEventListener("sessionend",Je),this.render=function(oe,Re){if(Re!==void 0&&Re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;if(oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),Re.parent===null&&Re.matrixWorldAutoUpdate===!0&&Re.updateMatrixWorld(),Ye.enabled===!0&&Ye.isPresenting===!0&&(Ye.cameraAutoUpdate===!0&&Ye.updateCamera(Re),Re=Ye.getCamera()),oe.isScene===!0&&oe.onBeforeRender(O,oe,Re,j),E=Xn.get(oe,P.length),E.init(Re),P.push(E),wt.multiplyMatrices(Re.projectionMatrix,Re.matrixWorldInverse),be.setFromProjectionMatrix(wt),$e=this.localClippingEnabled,Fe=Tt.init(this.clippingPlanes,$e),M=Nt.get(oe,U.length),M.init(),U.push(M),Ye.enabled===!0&&Ye.isPresenting===!0){const bt=O.xr.getDepthSensingMesh();bt!==null&&ft(bt,Re,-1/0,O.sortObjects)}ft(oe,Re,0,O.sortObjects),M.finish(),O.sortObjects===!0&&M.sort(ge,Y),Bn=Ye.enabled===!1||Ye.isPresenting===!1||Ye.hasDepthSensing()===!1,Bn&&on.addToRenderList(M,oe),this.info.render.frame++,Fe===!0&&Tt.beginShadows();const He=E.state.shadowsArray;jt.render(He,oe,Re),Fe===!0&&Tt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ve=M.opaque,Le=M.transmissive;if(E.setupLights(),Re.isArrayCamera){const bt=Re.cameras;if(Le.length>0)for(let Rt=0,ot=bt.length;Rt<ot;Rt++){const Z=bt[Rt];K(Ve,Le,oe,Z)}Bn&&on.render(oe);for(let Rt=0,ot=bt.length;Rt<ot;Rt++){const Z=bt[Rt];d(M,oe,Z,Z.viewport)}}else Le.length>0&&K(Ve,Le,oe,Re),Bn&&on.render(oe),d(M,oe,Re);j!==null&&z===0&&(ce.updateMultisampleRenderTarget(j),ce.updateRenderTargetMipmap(j)),oe.isScene===!0&&oe.onAfterRender(O,oe,Re),Ei.resetDefaultState(),k=-1,G=null,P.pop(),P.length>0?(E=P[P.length-1],Fe===!0&&Tt.setGlobalState(O.clippingPlanes,E.state.camera)):E=null,U.pop(),U.length>0?M=U[U.length-1]:M=null};function ft(oe,Re,He,Ve){if(oe.visible===!1)return;if(oe.layers.test(Re.layers)){if(oe.isGroup)He=oe.renderOrder;else if(oe.isLOD)oe.autoUpdate===!0&&oe.update(Re);else if(oe.isLight)E.pushLight(oe),oe.castShadow&&E.pushShadow(oe);else if(oe.isSprite){if(!oe.frustumCulled||be.intersectsSprite(oe)){Ve&&Ct.setFromMatrixPosition(oe.matrixWorld).applyMatrix4(wt);const Rt=Qe.update(oe),ot=oe.material;ot.visible&&M.push(oe,Rt,ot,He,Ct.z,null)}}else if((oe.isMesh||oe.isLine||oe.isPoints)&&(!oe.frustumCulled||be.intersectsObject(oe))){const Rt=Qe.update(oe),ot=oe.material;if(Ve&&(oe.boundingSphere!==void 0?(oe.boundingSphere===null&&oe.computeBoundingSphere(),Ct.copy(oe.boundingSphere.center)):(Rt.boundingSphere===null&&Rt.computeBoundingSphere(),Ct.copy(Rt.boundingSphere.center)),Ct.applyMatrix4(oe.matrixWorld).applyMatrix4(wt)),Array.isArray(ot)){const Z=Rt.groups;for(let qt=0,ln=Z.length;qt<ln;qt++){const en=Z[qt],Kn=ot[en.materialIndex];Kn&&Kn.visible&&M.push(oe,Rt,Kn,He,Ct.z,en)}}else ot.visible&&M.push(oe,Rt,ot,He,Ct.z,null)}}const bt=oe.children;for(let Rt=0,ot=bt.length;Rt<ot;Rt++)ft(bt[Rt],Re,He,Ve)}function d(oe,Re,He,Ve){const Le=oe.opaque,bt=oe.transmissive,Rt=oe.transparent;E.setupLightsView(He),Fe===!0&&Tt.setGlobalState(O.clippingPlanes,He),Ve&&nt.viewport($.copy(Ve)),Le.length>0&&Gn(Le,Re,He),bt.length>0&&Gn(bt,Re,He),Rt.length>0&&Gn(Rt,Re,He),nt.buffers.depth.setTest(!0),nt.buffers.depth.setMask(!0),nt.buffers.color.setMask(!0),nt.setPolygonOffset(!1)}function K(oe,Re,He,Ve){if((He.isScene===!0?He.overrideMaterial:null)!==null)return;E.state.transmissionRenderTarget[Ve.id]===void 0&&(E.state.transmissionRenderTarget[Ve.id]=new X1(1,1,{generateMipmaps:!0,type:ut.has("EXT_color_buffer_half_float")||ut.has("EXT_color_buffer_float")?Ss:Ur,minFilter:Na,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Hn.workingColorSpace}));const bt=E.state.transmissionRenderTarget[Ve.id],Rt=Ve.viewport||$;bt.setSize(Rt.z*O.transmissionResolutionScale,Rt.w*O.transmissionResolutionScale);const ot=O.getRenderTarget();O.setRenderTarget(bt),O.getClearColor(ue),ae=O.getClearAlpha(),ae<1&&O.setClearColor(16777215,.5),O.clear(),Bn&&on.render(He);const Z=O.toneMapping;O.toneMapping=za;const qt=Ve.viewport;if(Ve.viewport!==void 0&&(Ve.viewport=void 0),E.setupLightsView(Ve),Fe===!0&&Tt.setGlobalState(O.clippingPlanes,Ve),Gn(oe,He,Ve),ce.updateMultisampleRenderTarget(bt),ce.updateRenderTargetMipmap(bt),ut.has("WEBGL_multisampled_render_to_texture")===!1){let ln=!1;for(let en=0,Kn=Re.length;en<Kn;en++){const di=Re[en],sr=di.object,Q=di.geometry,ri=di.material,hn=di.group;if(ri.side===Qr&&sr.layers.test(Ve.layers)){const fr=ri.side;ri.side=Oi,ri.needsUpdate=!0,Yn(sr,He,Ve,Q,ri,hn),ri.side=fr,ri.needsUpdate=!0,ln=!0}}ln===!0&&(ce.updateMultisampleRenderTarget(bt),ce.updateRenderTargetMipmap(bt))}O.setRenderTarget(ot),O.setClearColor(ue,ae),qt!==void 0&&(Ve.viewport=qt),O.toneMapping=Z}function Gn(oe,Re,He){const Ve=Re.isScene===!0?Re.overrideMaterial:null;for(let Le=0,bt=oe.length;Le<bt;Le++){const Rt=oe[Le],ot=Rt.object,Z=Rt.geometry,qt=Rt.group;let ln=Rt.material;ln.allowOverride===!0&&Ve!==null&&(ln=Ve),ot.layers.test(He.layers)&&Yn(ot,Re,He,Z,ln,qt)}}function Yn(oe,Re,He,Ve,Le,bt){oe.onBeforeRender(O,Re,He,Ve,Le,bt),oe.modelViewMatrix.multiplyMatrices(He.matrixWorldInverse,oe.matrixWorld),oe.normalMatrix.getNormalMatrix(oe.modelViewMatrix),Le.onBeforeRender(O,Re,He,Ve,oe,bt),Le.transparent===!0&&Le.side===Qr&&Le.forceSinglePass===!1?(Le.side=Oi,Le.needsUpdate=!0,O.renderBufferDirect(He,Re,Ve,Le,oe,bt),Le.side=Ia,Le.needsUpdate=!0,O.renderBufferDirect(He,Re,Ve,Le,oe,bt),Le.side=Qr):O.renderBufferDirect(He,Re,Ve,Le,oe,bt),oe.onAfterRender(O,Re,He,Ve,Le,bt)}function ji(oe,Re,He){Re.isScene!==!0&&(Re=Kt);const Ve=at.get(oe),Le=E.state.lights,bt=E.state.shadowsArray,Rt=Le.state.version,ot=Ut.getParameters(oe,Le.state,bt,Re,He),Z=Ut.getProgramCacheKey(ot);let qt=Ve.programs;Ve.environment=oe.isMeshStandardMaterial?Re.environment:null,Ve.fog=Re.fog,Ve.envMap=(oe.isMeshStandardMaterial?Ne:ee).get(oe.envMap||Ve.environment),Ve.envMapRotation=Ve.environment!==null&&oe.envMap===null?Re.environmentRotation:oe.envMapRotation,qt===void 0&&(oe.addEventListener("dispose",Tn),qt=new Map,Ve.programs=qt);let ln=qt.get(Z);if(ln!==void 0){if(Ve.currentProgram===ln&&Ve.lightsStateVersion===Rt)return In(oe,ot),ln}else ot.uniforms=Ut.getUniforms(oe),oe.onBeforeCompile(ot,O),ln=Ut.acquireProgram(ot,Z),qt.set(Z,ln),Ve.uniforms=ot.uniforms;const en=Ve.uniforms;return(!oe.isShaderMaterial&&!oe.isRawShaderMaterial||oe.clipping===!0)&&(en.clippingPlanes=Tt.uniform),In(oe,ot),Ve.needsLights=Yt(oe),Ve.lightsStateVersion=Rt,Ve.needsLights&&(en.ambientLightColor.value=Le.state.ambient,en.lightProbe.value=Le.state.probe,en.directionalLights.value=Le.state.directional,en.directionalLightShadows.value=Le.state.directionalShadow,en.spotLights.value=Le.state.spot,en.spotLightShadows.value=Le.state.spotShadow,en.rectAreaLights.value=Le.state.rectArea,en.ltc_1.value=Le.state.rectAreaLTC1,en.ltc_2.value=Le.state.rectAreaLTC2,en.pointLights.value=Le.state.point,en.pointLightShadows.value=Le.state.pointShadow,en.hemisphereLights.value=Le.state.hemi,en.directionalShadowMap.value=Le.state.directionalShadowMap,en.directionalShadowMatrix.value=Le.state.directionalShadowMatrix,en.spotShadowMap.value=Le.state.spotShadowMap,en.spotLightMatrix.value=Le.state.spotLightMatrix,en.spotLightMap.value=Le.state.spotLightMap,en.pointShadowMap.value=Le.state.pointShadowMap,en.pointShadowMatrix.value=Le.state.pointShadowMatrix),Ve.currentProgram=ln,Ve.uniformsList=null,ln}function An(oe){if(oe.uniformsList===null){const Re=oe.currentProgram.getUniforms();oe.uniformsList=$6.seqWithValue(Re.seq,oe.uniforms)}return oe.uniformsList}function In(oe,Re){const He=at.get(oe);He.outputColorSpace=Re.outputColorSpace,He.batching=Re.batching,He.batchingColor=Re.batchingColor,He.instancing=Re.instancing,He.instancingColor=Re.instancingColor,He.instancingMorph=Re.instancingMorph,He.skinning=Re.skinning,He.morphTargets=Re.morphTargets,He.morphNormals=Re.morphNormals,He.morphColors=Re.morphColors,He.morphTargetsCount=Re.morphTargetsCount,He.numClippingPlanes=Re.numClippingPlanes,He.numIntersection=Re.numClipIntersection,He.vertexAlphas=Re.vertexAlphas,He.vertexTangents=Re.vertexTangents,He.toneMapping=Re.toneMapping}function Hs(oe,Re,He,Ve,Le){Re.isScene!==!0&&(Re=Kt),ce.resetTextureUnits();const bt=Re.fog,Rt=Ve.isMeshStandardMaterial?Re.environment:null,ot=j===null?O.outputColorSpace:j.isXRRenderTarget===!0?j.texture.colorSpace:Pl,Z=(Ve.isMeshStandardMaterial?Ne:ee).get(Ve.envMap||Rt),qt=Ve.vertexColors===!0&&!!He.attributes.color&&He.attributes.color.itemSize===4,ln=!!He.attributes.tangent&&(!!Ve.normalMap||Ve.anisotropy>0),en=!!He.morphAttributes.position,Kn=!!He.morphAttributes.normal,di=!!He.morphAttributes.color;let sr=za;Ve.toneMapped&&(j===null||j.isXRRenderTarget===!0)&&(sr=O.toneMapping);const Q=He.morphAttributes.position||He.morphAttributes.normal||He.morphAttributes.color,ri=Q!==void 0?Q.length:0,hn=at.get(Ve),fr=E.state.lights;if(Fe===!0&&($e===!0||oe!==G)){const Er=oe===G&&Ve.id===k;Tt.setState(Ve,oe,Er)}let fi=!1;Ve.version===hn.__version?(hn.needsLights&&hn.lightsStateVersion!==fr.state.version||hn.outputColorSpace!==ot||Le.isBatchedMesh&&hn.batching===!1||!Le.isBatchedMesh&&hn.batching===!0||Le.isBatchedMesh&&hn.batchingColor===!0&&Le.colorTexture===null||Le.isBatchedMesh&&hn.batchingColor===!1&&Le.colorTexture!==null||Le.isInstancedMesh&&hn.instancing===!1||!Le.isInstancedMesh&&hn.instancing===!0||Le.isSkinnedMesh&&hn.skinning===!1||!Le.isSkinnedMesh&&hn.skinning===!0||Le.isInstancedMesh&&hn.instancingColor===!0&&Le.instanceColor===null||Le.isInstancedMesh&&hn.instancingColor===!1&&Le.instanceColor!==null||Le.isInstancedMesh&&hn.instancingMorph===!0&&Le.morphTexture===null||Le.isInstancedMesh&&hn.instancingMorph===!1&&Le.morphTexture!==null||hn.envMap!==Z||Ve.fog===!0&&hn.fog!==bt||hn.numClippingPlanes!==void 0&&(hn.numClippingPlanes!==Tt.numPlanes||hn.numIntersection!==Tt.numIntersection)||hn.vertexAlphas!==qt||hn.vertexTangents!==ln||hn.morphTargets!==en||hn.morphNormals!==Kn||hn.morphColors!==di||hn.toneMapping!==sr||hn.morphTargetsCount!==ri)&&(fi=!0):(fi=!0,hn.__version=Ve.version);let cs=hn.currentProgram;fi===!0&&(cs=ji(Ve,Re,Le));let Fl=!1,Di=!1,To=!1;const Mi=cs.getUniforms(),Ki=hn.uniforms;if(nt.useProgram(cs.program)&&(Fl=!0,Di=!0,To=!0),Ve.id!==k&&(k=Ve.id,Di=!0),Fl||G!==oe){nt.buffers.depth.getReversed()?(ht.copy(oe.projectionMatrix),Mz(ht),Rz(ht),Mi.setValue(ye,"projectionMatrix",ht)):Mi.setValue(ye,"projectionMatrix",oe.projectionMatrix),Mi.setValue(ye,"viewMatrix",oe.matrixWorldInverse);const Zr=Mi.map.cameraPosition;Zr!==void 0&&Zr.setValue(ye,kt.setFromMatrixPosition(oe.matrixWorld)),st.logarithmicDepthBuffer&&Mi.setValue(ye,"logDepthBufFC",2/(Math.log(oe.far+1)/Math.LN2)),(Ve.isMeshPhongMaterial||Ve.isMeshToonMaterial||Ve.isMeshLambertMaterial||Ve.isMeshBasicMaterial||Ve.isMeshStandardMaterial||Ve.isShaderMaterial)&&Mi.setValue(ye,"isOrthographic",oe.isOrthographicCamera===!0),G!==oe&&(G=oe,Di=!0,To=!0)}if(Le.isSkinnedMesh){Mi.setOptional(ye,Le,"bindMatrix"),Mi.setOptional(ye,Le,"bindMatrixInverse");const Er=Le.skeleton;Er&&(Er.boneTexture===null&&Er.computeBoneTexture(),Mi.setValue(ye,"boneTexture",Er.boneTexture,ce))}Le.isBatchedMesh&&(Mi.setOptional(ye,Le,"batchingTexture"),Mi.setValue(ye,"batchingTexture",Le._matricesTexture,ce),Mi.setOptional(ye,Le,"batchingIdTexture"),Mi.setValue(ye,"batchingIdTexture",Le._indirectTexture,ce),Mi.setOptional(ye,Le,"batchingColorTexture"),Le._colorsTexture!==null&&Mi.setValue(ye,"batchingColorTexture",Le._colorsTexture,ce));const Jn=He.morphAttributes;if((Jn.position!==void 0||Jn.normal!==void 0||Jn.color!==void 0)&&cn.update(Le,He,cs),(Di||hn.receiveShadow!==Le.receiveShadow)&&(hn.receiveShadow=Le.receiveShadow,Mi.setValue(ye,"receiveShadow",Le.receiveShadow)),Ve.isMeshGouraudMaterial&&Ve.envMap!==null&&(Ki.envMap.value=Z,Ki.flipEnvMap.value=Z.isCubeTexture&&Z.isRenderTargetTexture===!1?-1:1),Ve.isMeshStandardMaterial&&Ve.envMap===null&&Re.environment!==null&&(Ki.envMapIntensity.value=Re.environmentIntensity),Di&&(Mi.setValue(ye,"toneMappingExposure",O.toneMappingExposure),hn.needsLights&&jn(Ki,To),bt&&Ve.fog===!0&&St.refreshFogUniforms(Ki,bt),St.refreshMaterialUniforms(Ki,Ve,re,J,E.state.transmissionRenderTarget[oe.id]),$6.upload(ye,An(hn),Ki,ce)),Ve.isShaderMaterial&&Ve.uniformsNeedUpdate===!0&&($6.upload(ye,An(hn),Ki,ce),Ve.uniformsNeedUpdate=!1),Ve.isSpriteMaterial&&Mi.setValue(ye,"center",Le.center),Mi.setValue(ye,"modelViewMatrix",Le.modelViewMatrix),Mi.setValue(ye,"normalMatrix",Le.normalMatrix),Mi.setValue(ye,"modelMatrix",Le.matrixWorld),Ve.isShaderMaterial||Ve.isRawShaderMaterial){const Er=Ve.uniformsGroups;for(let Zr=0,wo=Er.length;Zr<wo;Zr++){const Eo=Er[Zr];pe.update(Eo,cs),pe.bind(Eo,cs)}}return cs}function jn(oe,Re){oe.ambientLightColor.needsUpdate=Re,oe.lightProbe.needsUpdate=Re,oe.directionalLights.needsUpdate=Re,oe.directionalLightShadows.needsUpdate=Re,oe.pointLights.needsUpdate=Re,oe.pointLightShadows.needsUpdate=Re,oe.spotLights.needsUpdate=Re,oe.spotLightShadows.needsUpdate=Re,oe.rectAreaLights.needsUpdate=Re,oe.hemisphereLights.needsUpdate=Re}function Yt(oe){return oe.isMeshLambertMaterial||oe.isMeshToonMaterial||oe.isMeshPhongMaterial||oe.isMeshStandardMaterial||oe.isShadowMaterial||oe.isShaderMaterial&&oe.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return j},this.setRenderTargetTextures=function(oe,Re,He){const Ve=at.get(oe);Ve.__autoAllocateDepthBuffer=oe.resolveDepthBuffer===!1,Ve.__autoAllocateDepthBuffer===!1&&(Ve.__useRenderToTexture=!1),at.get(oe.texture).__webglTexture=Re,at.get(oe.depthTexture).__webglTexture=Ve.__autoAllocateDepthBuffer?void 0:He,Ve.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(oe,Re){const He=at.get(oe);He.__webglFramebuffer=Re,He.__useDefaultFramebuffer=Re===void 0};const Es=ye.createFramebuffer();this.setRenderTarget=function(oe,Re=0,He=0){j=oe,I=Re,z=He;let Ve=!0,Le=null,bt=!1,Rt=!1;if(oe){const Z=at.get(oe);if(Z.__useDefaultFramebuffer!==void 0)nt.bindFramebuffer(ye.FRAMEBUFFER,null),Ve=!1;else if(Z.__webglFramebuffer===void 0)ce.setupRenderTarget(oe);else if(Z.__hasExternalTextures)ce.rebindTextures(oe,at.get(oe.texture).__webglTexture,at.get(oe.depthTexture).__webglTexture);else if(oe.depthBuffer){const en=oe.depthTexture;if(Z.__boundDepthTexture!==en){if(en!==null&&at.has(en)&&(oe.width!==en.image.width||oe.height!==en.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ce.setupDepthRenderbuffer(oe)}}const qt=oe.texture;(qt.isData3DTexture||qt.isDataArrayTexture||qt.isCompressedArrayTexture)&&(Rt=!0);const ln=at.get(oe).__webglFramebuffer;oe.isWebGLCubeRenderTarget?(Array.isArray(ln[Re])?Le=ln[Re][He]:Le=ln[Re],bt=!0):oe.samples>0&&ce.useMultisampledRTT(oe)===!1?Le=at.get(oe).__webglMultisampledFramebuffer:Array.isArray(ln)?Le=ln[He]:Le=ln,$.copy(oe.viewport),te.copy(oe.scissor),ne=oe.scissorTest}else $.copy(me).multiplyScalar(re).floor(),te.copy(Me).multiplyScalar(re).floor(),ne=Be;if(He!==0&&(Le=Es),nt.bindFramebuffer(ye.FRAMEBUFFER,Le)&&Ve&&nt.drawBuffers(oe,Le),nt.viewport($),nt.scissor(te),nt.setScissorTest(ne),bt){const Z=at.get(oe.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_CUBE_MAP_POSITIVE_X+Re,Z.__webglTexture,He)}else if(Rt){const Z=at.get(oe.texture),qt=Re;ye.framebufferTextureLayer(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Z.__webglTexture,He,qt)}else if(oe!==null&&He!==0){const Z=at.get(oe.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,Z.__webglTexture,He)}k=-1},this.readRenderTargetPixels=function(oe,Re,He,Ve,Le,bt,Rt){if(!(oe&&oe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=at.get(oe).__webglFramebuffer;if(oe.isWebGLCubeRenderTarget&&Rt!==void 0&&(ot=ot[Rt]),ot){nt.bindFramebuffer(ye.FRAMEBUFFER,ot);try{const Z=oe.texture,qt=Z.format,ln=Z.type;if(!st.textureFormatReadable(qt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!st.textureTypeReadable(ln)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Re>=0&&Re<=oe.width-Ve&&He>=0&&He<=oe.height-Le&&ye.readPixels(Re,He,Ve,Le,qn.convert(qt),qn.convert(ln),bt)}finally{const Z=j!==null?at.get(j).__webglFramebuffer:null;nt.bindFramebuffer(ye.FRAMEBUFFER,Z)}}},this.readRenderTargetPixelsAsync=async function(oe,Re,He,Ve,Le,bt,Rt){if(!(oe&&oe.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ot=at.get(oe).__webglFramebuffer;if(oe.isWebGLCubeRenderTarget&&Rt!==void 0&&(ot=ot[Rt]),ot)if(Re>=0&&Re<=oe.width-Ve&&He>=0&&He<=oe.height-Le){nt.bindFramebuffer(ye.FRAMEBUFFER,ot);const Z=oe.texture,qt=Z.format,ln=Z.type;if(!st.textureFormatReadable(qt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!st.textureTypeReadable(ln))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const en=ye.createBuffer();ye.bindBuffer(ye.PIXEL_PACK_BUFFER,en),ye.bufferData(ye.PIXEL_PACK_BUFFER,bt.byteLength,ye.STREAM_READ),ye.readPixels(Re,He,Ve,Le,qn.convert(qt),qn.convert(ln),0);const Kn=j!==null?at.get(j).__webglFramebuffer:null;nt.bindFramebuffer(ye.FRAMEBUFFER,Kn);const di=ye.fenceSync(ye.SYNC_GPU_COMMANDS_COMPLETE,0);return ye.flush(),await Ez(ye,di,4),ye.bindBuffer(ye.PIXEL_PACK_BUFFER,en),ye.getBufferSubData(ye.PIXEL_PACK_BUFFER,0,bt),ye.deleteBuffer(en),ye.deleteSync(di),bt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(oe,Re=null,He=0){const Ve=Math.pow(2,-He),Le=Math.floor(oe.image.width*Ve),bt=Math.floor(oe.image.height*Ve),Rt=Re!==null?Re.x:0,ot=Re!==null?Re.y:0;ce.setTexture2D(oe,0),ye.copyTexSubImage2D(ye.TEXTURE_2D,He,0,0,Rt,ot,Le,bt),nt.unbindTexture()};const Nu=ye.createFramebuffer(),il=ye.createFramebuffer();this.copyTextureToTexture=function(oe,Re,He=null,Ve=null,Le=0,bt=null){bt===null&&(Le!==0?(Dl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),bt=Le,Le=0):bt=0);let Rt,ot,Z,qt,ln,en,Kn,di,sr;const Q=oe.isCompressedTexture?oe.mipmaps[bt]:oe.image;if(He!==null)Rt=He.max.x-He.min.x,ot=He.max.y-He.min.y,Z=He.isBox3?He.max.z-He.min.z:1,qt=He.min.x,ln=He.min.y,en=He.isBox3?He.min.z:0;else{const Jn=Math.pow(2,-Le);Rt=Math.floor(Q.width*Jn),ot=Math.floor(Q.height*Jn),oe.isDataArrayTexture?Z=Q.depth:oe.isData3DTexture?Z=Math.floor(Q.depth*Jn):Z=1,qt=0,ln=0,en=0}Ve!==null?(Kn=Ve.x,di=Ve.y,sr=Ve.z):(Kn=0,di=0,sr=0);const ri=qn.convert(Re.format),hn=qn.convert(Re.type);let fr;Re.isData3DTexture?(ce.setTexture3D(Re,0),fr=ye.TEXTURE_3D):Re.isDataArrayTexture||Re.isCompressedArrayTexture?(ce.setTexture2DArray(Re,0),fr=ye.TEXTURE_2D_ARRAY):(ce.setTexture2D(Re,0),fr=ye.TEXTURE_2D),ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,Re.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,Re.unpackAlignment);const fi=ye.getParameter(ye.UNPACK_ROW_LENGTH),cs=ye.getParameter(ye.UNPACK_IMAGE_HEIGHT),Fl=ye.getParameter(ye.UNPACK_SKIP_PIXELS),Di=ye.getParameter(ye.UNPACK_SKIP_ROWS),To=ye.getParameter(ye.UNPACK_SKIP_IMAGES);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,Q.width),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,Q.height),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,qt),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,ln),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,en);const Mi=oe.isDataArrayTexture||oe.isData3DTexture,Ki=Re.isDataArrayTexture||Re.isData3DTexture;if(oe.isDepthTexture){const Jn=at.get(oe),Er=at.get(Re),Zr=at.get(Jn.__renderTarget),wo=at.get(Er.__renderTarget);nt.bindFramebuffer(ye.READ_FRAMEBUFFER,Zr.__webglFramebuffer),nt.bindFramebuffer(ye.DRAW_FRAMEBUFFER,wo.__webglFramebuffer);for(let Eo=0;Eo<Z;Eo++)Mi&&(ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,at.get(oe).__webglTexture,Le,en+Eo),ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,at.get(Re).__webglTexture,bt,sr+Eo)),ye.blitFramebuffer(qt,ln,Rt,ot,Kn,di,Rt,ot,ye.DEPTH_BUFFER_BIT,ye.NEAREST);nt.bindFramebuffer(ye.READ_FRAMEBUFFER,null),nt.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else if(Le!==0||oe.isRenderTargetTexture||at.has(oe)){const Jn=at.get(oe),Er=at.get(Re);nt.bindFramebuffer(ye.READ_FRAMEBUFFER,Nu),nt.bindFramebuffer(ye.DRAW_FRAMEBUFFER,il);for(let Zr=0;Zr<Z;Zr++)Mi?ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Jn.__webglTexture,Le,en+Zr):ye.framebufferTexture2D(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,Jn.__webglTexture,Le),Ki?ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Er.__webglTexture,bt,sr+Zr):ye.framebufferTexture2D(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,Er.__webglTexture,bt),Le!==0?ye.blitFramebuffer(qt,ln,Rt,ot,Kn,di,Rt,ot,ye.COLOR_BUFFER_BIT,ye.NEAREST):Ki?ye.copyTexSubImage3D(fr,bt,Kn,di,sr+Zr,qt,ln,Rt,ot):ye.copyTexSubImage2D(fr,bt,Kn,di,qt,ln,Rt,ot);nt.bindFramebuffer(ye.READ_FRAMEBUFFER,null),nt.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else Ki?oe.isDataTexture||oe.isData3DTexture?ye.texSubImage3D(fr,bt,Kn,di,sr,Rt,ot,Z,ri,hn,Q.data):Re.isCompressedArrayTexture?ye.compressedTexSubImage3D(fr,bt,Kn,di,sr,Rt,ot,Z,ri,Q.data):ye.texSubImage3D(fr,bt,Kn,di,sr,Rt,ot,Z,ri,hn,Q):oe.isDataTexture?ye.texSubImage2D(ye.TEXTURE_2D,bt,Kn,di,Rt,ot,ri,hn,Q.data):oe.isCompressedTexture?ye.compressedTexSubImage2D(ye.TEXTURE_2D,bt,Kn,di,Q.width,Q.height,ri,Q.data):ye.texSubImage2D(ye.TEXTURE_2D,bt,Kn,di,Rt,ot,ri,hn,Q);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,fi),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,cs),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,Fl),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,Di),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,To),bt===0&&Re.generateMipmaps&&ye.generateMipmap(fr),nt.unbindTexture()},this.copyTextureToTexture3D=function(oe,Re,He=null,Ve=null,Le=0){return Dl('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(oe,Re,He,Ve,Le)},this.initRenderTarget=function(oe){at.get(oe).__webglFramebuffer===void 0&&ce.setupRenderTarget(oe)},this.initTexture=function(oe){oe.isCubeTexture?ce.setTextureCube(oe,0):oe.isData3DTexture?ce.setTexture3D(oe,0):oe.isDataArrayTexture||oe.isCompressedArrayTexture?ce.setTexture2DArray(oe,0):ce.setTexture2D(oe,0),nt.unbindTexture()},this.resetState=function(){I=0,z=0,j=null,nt.reset(),Ei.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Pa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Hn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Hn._getUnpackColorSpace()}}class z$ extends ur{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new rt(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const Nf=new le,fE=new yn,dE=new yn,AE=new le,pE=new le;class G${constructor(e={}){const t=this;let n,r,s,a;const o={objects:new WeakMap},u=e.element!==void 0?e.element:document.createElement("div");u.style.overflow="hidden",this.domElement=u,this.getSize=function(){return{width:n,height:r}},this.render=function(S,R){S.matrixWorldAutoUpdate===!0&&S.updateMatrixWorld(),R.parent===null&&R.matrixWorldAutoUpdate===!0&&R.updateMatrixWorld(),fE.copy(R.matrixWorldInverse),dE.multiplyMatrices(R.projectionMatrix,fE),p(S,S,R),q(S)},this.setSize=function(S,R){n=S,r=R,s=n/2,a=r/2,u.style.width=S+"px",u.style.height=R+"px"};function c(S){S.isCSS2DObject&&(S.element.style.display="none");for(let R=0,M=S.children.length;R<M;R++)c(S.children[R])}function p(S,R,M){if(S.visible===!1){c(S);return}if(S.isCSS2DObject){Nf.setFromMatrixPosition(S.matrixWorld),Nf.applyMatrix4(dE);const E=Nf.z>=-1&&Nf.z<=1&&S.layers.test(M.layers)===!0,U=S.element;U.style.display=E===!0?"":"none",E===!0&&(S.onBeforeRender(t,R,M),U.style.transform="translate("+-100*S.center.x+"%,"+-100*S.center.y+"%)translate("+(Nf.x*s+s)+"px,"+(-Nf.y*a+a)+"px)",U.parentNode!==u&&u.appendChild(U),S.onAfterRender(t,R,M));const P={distanceToCameraSquared:g(M,S)};o.objects.set(S,P)}for(let E=0,U=S.children.length;E<U;E++)p(S.children[E],R,M)}function g(S,R){return AE.setFromMatrixPosition(S.matrixWorld),pE.setFromMatrixPosition(R.matrixWorld),AE.distanceToSquared(pE)}function y(S){const R=[];return S.traverseVisible(function(M){M.isCSS2DObject&&R.push(M)}),R}function q(S){const R=y(S).sort(function(E,U){if(E.renderOrder!==U.renderOrder)return U.renderOrder-E.renderOrder;const P=o.objects.get(E).distanceToCameraSquared,O=o.objects.get(U).distanceToCameraSquared;return P-O}),M=R.length;for(let E=0,U=R.length;E<U;E++)R[E].element.style.zIndex=M-E}}}function rv(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var V$=typeof global=="object"&&global&&global.Object===Object&&global,H$=typeof self=="object"&&self&&self.Object===Object&&self,jN=V$||H$||Function("return this")(),Cg=function(){return jN.Date.now()},j$=/\s/;function W$(i){for(var e=i.length;e--&&j$.test(i.charAt(e)););return e}var $$=/^\s+/;function X$(i){return i&&i.slice(0,W$(i)+1).replace($$,"")}var _8=jN.Symbol,WN=Object.prototype,Q$=WN.hasOwnProperty,Y$=WN.toString,O2=_8?_8.toStringTag:void 0;function K$(i){var e=Q$.call(i,O2),t=i[O2];try{i[O2]=void 0;var n=!0}catch{}var r=Y$.call(i);return n&&(e?i[O2]=t:delete i[O2]),r}var Z$=Object.prototype,J$=Z$.toString;function eX(i){return J$.call(i)}var tX="[object Null]",nX="[object Undefined]",mE=_8?_8.toStringTag:void 0;function iX(i){return i==null?i===void 0?nX:tX:mE&&mE in Object(i)?K$(i):eX(i)}function rX(i){return i!=null&&typeof i=="object"}var sX="[object Symbol]";function aX(i){return typeof i=="symbol"||rX(i)&&iX(i)==sX}var gE=NaN,oX=/^[-+]0x[0-9a-f]+$/i,lX=/^0b[01]+$/i,uX=/^0o[0-7]+$/i,cX=parseInt;function _E(i){if(typeof i=="number")return i;if(aX(i))return gE;if(rv(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=rv(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=X$(i);var t=lX.test(i);return t||uX.test(i)?cX(i.slice(2),t?2:8):oX.test(i)?gE:+i}var hX="Expected a function",fX=Math.max,dX=Math.min;function AX(i,e,t){var n,r,s,a,o,u,c=0,p=!1,g=!1,y=!0;if(typeof i!="function")throw new TypeError(hX);e=_E(e)||0,rv(t)&&(p=!!t.leading,g="maxWait"in t,s=g?fX(_E(t.maxWait)||0,e):s,y="trailing"in t?!!t.trailing:y);function q(I){var z=n,j=r;return n=r=void 0,c=I,a=i.apply(j,z),a}function S(I){return c=I,o=setTimeout(E,e),p?q(I):a}function R(I){var z=I-u,j=I-c,k=e-z;return g?dX(k,s-j):k}function M(I){var z=I-u,j=I-c;return u===void 0||z>=e||z<0||g&&j>=s}function E(){var I=Cg();if(M(I))return U(I);o=setTimeout(E,R(I))}function U(I){return o=void 0,y&&n?q(I):(n=r=void 0,a)}function P(){o!==void 0&&clearTimeout(o),c=0,n=u=r=o=void 0}function O(){return o===void 0?a:U(Cg())}function F(){var I=Cg(),z=M(I);if(n=arguments,r=this,u=I,z){if(o===void 0)return S(u);if(g)return clearTimeout(o),o=setTimeout(E,e),q(u)}return o===void 0&&(o=setTimeout(E,e)),a}return F.cancel=P,F.flush=O,F}function vE(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function pX(i){if(Array.isArray(i))return i}function mX(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function gX(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function _X(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],u=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(u=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(p){c=!0,r=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function vX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yX(i,e){return pX(i)||_X(i,e)||xX(i,e)||vX()}function xX(i,e){if(i){if(typeof i=="string")return vE(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?vE(i,e):void 0}}var qX=gX(function i(e,t){var n=t.default,r=n===void 0?null:n,s=t.triggerUpdate,a=s===void 0?!0:s,o=t.onChange,u=o===void 0?function(c,p){}:o;mX(this,i),this.name=e,this.defaultVal=r,this.triggerUpdate=a,this.onChange=u});function ls(i){var e=i.stateInit,t=e===void 0?function(){return{}}:e,n=i.props,r=n===void 0?{}:n,s=i.methods,a=s===void 0?{}:s,o=i.aliases,u=o===void 0?{}:o,c=i.init,p=c===void 0?function(){}:c,g=i.update,y=g===void 0?function(){}:g,q=Object.keys(r).map(function(S){return new qX(S,r[S])});return function S(){for(var R=arguments.length,M=new Array(R),E=0;E<R;E++)M[E]=arguments[E];var U=!!(this instanceof S&&this.constructor),P=U?M.shift():void 0,O=M[0],F=O===void 0?{}:O,I=Object.assign({},t instanceof Function?t(F):t,{initialised:!1}),z={};function j($){return k($,F),G(),j}var k=function(te,ne){p.call(j,te,I,ne),I.initialised=!0},G=AX(function(){I.initialised&&(y.call(j,I,z),z={})},1);return q.forEach(function($){j[$.name]=te($);function te(ne){var ue=ne.name,ae=ne.triggerUpdate,W=ae===void 0?!1:ae,J=ne.onChange,re=J===void 0?function(me,Me){}:J,ge=ne.defaultVal,Y=ge===void 0?null:ge;return function(me){var Me=I[ue];if(!arguments.length)return Me;var Be=me===void 0?Y:me;return I[ue]=Be,re.call(j,Be,I,Me),!z.hasOwnProperty(ue)&&(z[ue]=Me),W&&G(),j}}}),Object.keys(a).forEach(function($){j[$]=function(){for(var te,ne=arguments.length,ue=new Array(ne),ae=0;ae<ne;ae++)ue[ae]=arguments[ae];return(te=a[$]).call.apply(te,[j,I].concat(ue))}}),Object.entries(u).forEach(function($){var te=yX($,2),ne=te[0],ue=te[1];return j[ne]=j[ue]}),j.resetProps=function(){return q.forEach(function($){j[$.name]($.defaultVal)}),j},j.resetProps(),I._rerender=G,U&&P&&j(P),j}}var Yr=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return i},Out:function(i){return i},InOut:function(i){return i}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-Yr.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?Yr.Bounce.In(i*2)*.5:Yr.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),up=function(){return performance.now()},R5=function(){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,s=t;r<s.length;r++){var a=s[r];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},i.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var s=r[n];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},i.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},i.prototype.update=function(e,t){e===void 0&&(e=up()),t===void 0&&(t=!0);var n=Object.keys(this._tweens);if(n.length!==0)for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]],a=!t;s&&s.update(e,a)===!1&&!t&&this.remove(s)}n=Object.keys(this._tweensAddedDuringUpdate)}},i}(),sv={Linear:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=sv.Utils.Linear;return e<0?s(i[0],i[1],n):e>1?s(i[t],i[t-1],t-n):s(i[r],i[r+1>t?t:r+1],n-r)},Utils:{Linear:function(i,e,t){return(e-i)*t+i}}},$N=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),av=new R5,ia=function(){function i(e,t){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Yr.Linear.None,this._interpolationFunction=sv.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=$N.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof t=="object"?(this._group=t,t.add(this)):t===!0&&(this._group=av,av.add(this))}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,t){if(e===void 0&&(e=up()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,t,n,r,s){for(var a in n){var o=e[a],u=Array.isArray(o),c=u?"array":typeof o,p=!u&&Array.isArray(n[a]);if(!(c==="undefined"||c==="function")){if(p){var g=n[a];if(g.length===0)continue;for(var y=[o],q=0,S=g.length;q<S;q+=1){var R=this._handleRelativeValue(o,g[q]);if(isNaN(R)){p=!1,console.warn("Found invalid interpolation list. Skipping.");break}y.push(R)}p&&(n[a]=y)}if((c==="object"||u)&&o&&!p){t[a]=u?[]:{};var M=o;for(var E in M)t[a][E]=M[E];r[a]=u?[]:{};var g=n[a];if(!this._isDynamic){var U={};for(var E in g)U[E]=g[E];n[a]=g=U}this._setupProperties(M,t[a],g,r[a],s)}else(typeof t[a]>"u"||s)&&(t[a]=o),u||(t[a]*=1),p?r[a]=n[a].slice().reverse():r[a]=t[a]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},i.prototype.pause=function(e){return e===void 0&&(e=up()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},i.prototype.resume=function(e){return e===void 0&&(e=up()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},i.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},i.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=Yr.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=sv.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,t){var n=this,r;if(e===void 0&&(e=up()),t===void 0&&(t=i.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(t)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,o=this._duration+((r=this._repeatDelayTime)!==null&&r!==void 0?r:this._delayTime),u=this._duration+this._repeat*o,c=function(){if(n._duration===0||a>u)return 1;var R=Math.trunc(a/o),M=a-R*o,E=Math.min(M/n._duration,1);return E===0&&a===n._duration?1:E},p=c(),g=this._easingFunction(p);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,g),this._onUpdateCallback&&this._onUpdateCallback(this._object,p),this._duration===0||a>=this._duration)if(this._repeat>0){var y=Math.min(Math.trunc((a-this._duration)/o)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=y);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=o*y,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var q=0,S=this._chainedTweens.length;q<S;q++)this._chainedTweens[q].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,t,n,r){for(var s in n)if(t[s]!==void 0){var a=t[s]||0,o=n[s],u=Array.isArray(e[s]),c=Array.isArray(o),p=!u&&c;p?e[s]=this._interpolationFunction(o,r):typeof o=="object"&&o?this._updateProperties(e[s],a,o,r):(o=this._handleRelativeValue(a,o),typeof o=="number"&&(e[s]=a+(o-a)*r))}},i.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},i.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},i.autoStartOnUpdate=!1,i}();$N.nextId;var gu=av;gu.getAll.bind(gu);gu.removeAll.bind(gu);gu.add.bind(gu);gu.remove.bind(gu);gu.update.bind(gu);function bX(i){const e=+this._x.call(null,i),t=+this._y.call(null,i),n=+this._z.call(null,i);return XN(this.cover(e,t,n),e,t,n,i)}function XN(i,e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n))return i;var s,a=i._root,o={data:r},u=i._x0,c=i._y0,p=i._z0,g=i._x1,y=i._y1,q=i._z1,S,R,M,E,U,P,O,F,I,z,j;if(!a)return i._root=o,i;for(;a.length;)if((O=e>=(S=(u+g)/2))?u=S:g=S,(F=t>=(R=(c+y)/2))?c=R:y=R,(I=n>=(M=(p+q)/2))?p=M:q=M,s=a,!(a=a[z=I<<2|F<<1|O]))return s[z]=o,i;if(E=+i._x.call(null,a.data),U=+i._y.call(null,a.data),P=+i._z.call(null,a.data),e===E&&t===U&&n===P)return o.next=a,s?s[z]=o:i._root=o,i;do s=s?s[z]=new Array(8):i._root=new Array(8),(O=e>=(S=(u+g)/2))?u=S:g=S,(F=t>=(R=(c+y)/2))?c=R:y=R,(I=n>=(M=(p+q)/2))?p=M:q=M;while((z=I<<2|F<<1|O)===(j=(P>=M)<<2|(U>=R)<<1|E>=S));return s[j]=a,s[z]=o,i}function SX(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,t=new Float64Array(e),n=new Float64Array(e),r=new Float64Array(e);let s=1/0,a=1/0,o=1/0,u=-1/0,c=-1/0,p=-1/0;for(let g=0,y,q,S,R;g<e;++g)isNaN(q=+this._x.call(null,y=i[g]))||isNaN(S=+this._y.call(null,y))||isNaN(R=+this._z.call(null,y))||(t[g]=q,n[g]=S,r[g]=R,q<s&&(s=q),q>u&&(u=q),S<a&&(a=S),S>c&&(c=S),R<o&&(o=R),R>p&&(p=R));if(s>u||a>c||o>p)return this;this.cover(s,a,o).cover(u,c,p);for(let g=0;g<e;++g)XN(this,t[g],n[g],r[g],i[g]);return this}function TX(i,e,t){if(isNaN(i=+i)||isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,s=this._z0,a=this._x1,o=this._y1,u=this._z1;if(isNaN(n))a=(n=Math.floor(i))+1,o=(r=Math.floor(e))+1,u=(s=Math.floor(t))+1;else{for(var c=a-n||1,p=this._root,g,y;n>i||i>=a||r>e||e>=o||s>t||t>=u;)switch(y=(t<s)<<2|(e<r)<<1|i<n,g=new Array(8),g[y]=p,p=g,c*=2,y){case 0:a=n+c,o=r+c,u=s+c;break;case 1:n=a-c,o=r+c,u=s+c;break;case 2:a=n+c,r=o-c,u=s+c;break;case 3:n=a-c,r=o-c,u=s+c;break;case 4:a=n+c,o=r+c,s=u-c;break;case 5:n=a-c,o=r+c,s=u-c;break;case 6:a=n+c,r=o-c,s=u-c;break;case 7:n=a-c,r=o-c,s=u-c;break}this._root&&this._root.length&&(this._root=p)}return this._x0=n,this._y0=r,this._z0=s,this._x1=a,this._y1=o,this._z1=u,this}function wX(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function EX(i){return arguments.length?this.cover(+i[0][0],+i[0][1],+i[0][2]).cover(+i[1][0],+i[1][1],+i[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Xi(i,e,t,n,r,s,a){this.node=i,this.x0=e,this.y0=t,this.z0=n,this.x1=r,this.y1=s,this.z1=a}function MX(i,e,t,n){var r,s=this._x0,a=this._y0,o=this._z0,u,c,p,g,y,q,S=this._x1,R=this._y1,M=this._z1,E=[],U=this._root,P,O;for(U&&E.push(new Xi(U,s,a,o,S,R,M)),n==null?n=1/0:(s=i-n,a=e-n,o=t-n,S=i+n,R=e+n,M=t+n,n*=n);P=E.pop();)if(!(!(U=P.node)||(u=P.x0)>S||(c=P.y0)>R||(p=P.z0)>M||(g=P.x1)<s||(y=P.y1)<a||(q=P.z1)<o))if(U.length){var F=(u+g)/2,I=(c+y)/2,z=(p+q)/2;E.push(new Xi(U[7],F,I,z,g,y,q),new Xi(U[6],u,I,z,F,y,q),new Xi(U[5],F,c,z,g,I,q),new Xi(U[4],u,c,z,F,I,q),new Xi(U[3],F,I,p,g,y,z),new Xi(U[2],u,I,p,F,y,z),new Xi(U[1],F,c,p,g,I,z),new Xi(U[0],u,c,p,F,I,z)),(O=(t>=z)<<2|(e>=I)<<1|i>=F)&&(P=E[E.length-1],E[E.length-1]=E[E.length-1-O],E[E.length-1-O]=P)}else{var j=i-+this._x.call(null,U.data),k=e-+this._y.call(null,U.data),G=t-+this._z.call(null,U.data),$=j*j+k*k+G*G;if($<n){var te=Math.sqrt(n=$);s=i-te,a=e-te,o=t-te,S=i+te,R=e+te,M=t+te,r=U.data}}return r}const RX=(i,e,t,n,r,s)=>Math.sqrt((i-n)**2+(e-r)**2+(t-s)**2);function CX(i,e,t,n){const r=[],s=i-n,a=e-n,o=t-n,u=i+n,c=e+n,p=t+n;return this.visit((g,y,q,S,R,M,E)=>{if(!g.length)do{const U=g.data;RX(i,e,t,this._x(U),this._y(U),this._z(U))<=n&&r.push(U)}while(g=g.next);return y>u||q>c||S>p||R<s||M<a||E<o}),r}function NX(i){if(isNaN(y=+this._x.call(null,i))||isNaN(q=+this._y.call(null,i))||isNaN(S=+this._z.call(null,i)))return this;var e,t=this._root,n,r,s,a=this._x0,o=this._y0,u=this._z0,c=this._x1,p=this._y1,g=this._z1,y,q,S,R,M,E,U,P,O,F,I;if(!t)return this;if(t.length)for(;;){if((U=y>=(R=(a+c)/2))?a=R:c=R,(P=q>=(M=(o+p)/2))?o=M:p=M,(O=S>=(E=(u+g)/2))?u=E:g=E,e=t,!(t=t[F=O<<2|P<<1|U]))return this;if(!t.length)break;(e[F+1&7]||e[F+2&7]||e[F+3&7]||e[F+4&7]||e[F+5&7]||e[F+6&7]||e[F+7&7])&&(n=e,I=F)}for(;t.data!==i;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[F]=s:delete e[F],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[I]=t:this._root=t),this):(this._root=s,this)}function PX(i){for(var e=0,t=i.length;e<t;++e)this.remove(i[e]);return this}function DX(){return this._root}function LX(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function UX(i){var e=[],t,n=this._root,r,s,a,o,u,c,p;for(n&&e.push(new Xi(n,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!i(n=t.node,s=t.x0,a=t.y0,o=t.z0,u=t.x1,c=t.y1,p=t.z1)&&n.length){var g=(s+u)/2,y=(a+c)/2,q=(o+p)/2;(r=n[7])&&e.push(new Xi(r,g,y,q,u,c,p)),(r=n[6])&&e.push(new Xi(r,s,y,q,g,c,p)),(r=n[5])&&e.push(new Xi(r,g,a,q,u,y,p)),(r=n[4])&&e.push(new Xi(r,s,a,q,g,y,p)),(r=n[3])&&e.push(new Xi(r,g,y,o,u,c,q)),(r=n[2])&&e.push(new Xi(r,s,y,o,g,c,q)),(r=n[1])&&e.push(new Xi(r,g,a,o,u,y,q)),(r=n[0])&&e.push(new Xi(r,s,a,o,g,y,q))}return this}function OX(i){var e=[],t=[],n;for(this._root&&e.push(new Xi(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();){var r=n.node;if(r.length){var s,a=n.x0,o=n.y0,u=n.z0,c=n.x1,p=n.y1,g=n.z1,y=(a+c)/2,q=(o+p)/2,S=(u+g)/2;(s=r[0])&&e.push(new Xi(s,a,o,u,y,q,S)),(s=r[1])&&e.push(new Xi(s,y,o,u,c,q,S)),(s=r[2])&&e.push(new Xi(s,a,q,u,y,p,S)),(s=r[3])&&e.push(new Xi(s,y,q,u,c,p,S)),(s=r[4])&&e.push(new Xi(s,a,o,S,y,q,g)),(s=r[5])&&e.push(new Xi(s,y,o,S,c,q,g)),(s=r[6])&&e.push(new Xi(s,a,q,S,y,p,g)),(s=r[7])&&e.push(new Xi(s,y,q,S,c,p,g))}t.push(n)}for(;n=t.pop();)i(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this}function BX(i){return i[0]}function IX(i){return arguments.length?(this._x=i,this):this._x}function FX(i){return i[1]}function kX(i){return arguments.length?(this._y=i,this):this._y}function zX(i){return i[2]}function GX(i){return arguments.length?(this._z=i,this):this._z}function QN(i,e,t,n){var r=new yx(e??BX,t??FX,n??zX,NaN,NaN,NaN,NaN,NaN,NaN);return i==null?r:r.addAll(i)}function yx(i,e,t,n,r,s,a,o,u){this._x=i,this._y=e,this._z=t,this._x0=n,this._y0=r,this._z0=s,this._x1=a,this._y1=o,this._z1=u,this._root=void 0}function yE(i){for(var e={data:i.data},t=e;i=i.next;)t=t.next={data:i.data};return e}var zs=QN.prototype=yx.prototype;zs.copy=function(){var i=new yx(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,n;if(!e)return i;if(!e.length)return i._root=yE(e),i;for(t=[{source:e,target:i._root=new Array(8)}];e=t.pop();)for(var r=0;r<8;++r)(n=e.source[r])&&(n.length?t.push({source:n,target:e.target[r]=new Array(8)}):e.target[r]=yE(n));return i};zs.add=bX;zs.addAll=SX;zs.cover=TX;zs.data=wX;zs.extent=EX;zs.find=MX;zs.findAllWithinRadius=CX;zs.remove=NX;zs.removeAll=PX;zs.root=DX;zs.size=LX;zs.visit=UX;zs.visitAfter=OX;zs.x=IX;zs.y=kX;zs.z=GX;function X6(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function VX(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function YN(i){let e,t,n;i.length!==2?(e=X6,t=(o,u)=>X6(i(o),u),n=(o,u)=>i(o)-u):(e=i===X6||i===VX?i:HX,t=i,n=i);function r(o,u,c=0,p=o.length){if(c<p){if(e(u,u)!==0)return p;do{const g=c+p>>>1;t(o[g],u)<0?c=g+1:p=g}while(c<p)}return c}function s(o,u,c=0,p=o.length){if(c<p){if(e(u,u)!==0)return p;do{const g=c+p>>>1;t(o[g],u)<=0?c=g+1:p=g}while(c<p)}return c}function a(o,u,c=0,p=o.length){const g=r(o,u,c,p-1);return g>c&&n(o[g-1],u)>-n(o[g],u)?g-1:g}return{left:r,center:a,right:s}}function HX(){return 0}function jX(i){return i===null?NaN:+i}const WX=YN(X6),KN=WX.right;YN(jX).center;function v8(i,e){let t,n;if(e===void 0)for(const r of i)r!=null&&(t===void 0?r>=r&&(t=n=r):(t>r&&(t=r),n<r&&(n=r)));else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(t===void 0?s>=s&&(t=n=s):(t>s&&(t=s),n<s&&(n=s)))}return[t,n]}class qc{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],a=e+s,o=Math.abs(e)<Math.abs(s)?e-(a-s):s-(a-e);o&&(t[n++]=o),e=a}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t=this._n,n,r,s,a=0;if(t>0){for(a=e[--t];t>0&&(n=a,r=e[--t],a=n+r,s=r-(a-n),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,n=a+r,r==n-a&&(a=n))}return a}}const $X=Math.sqrt(50),XX=Math.sqrt(10),QX=Math.sqrt(2);function y8(i,e,t){const n=(e-i)/Math.max(0,t),r=Math.floor(Math.log10(n)),s=n/Math.pow(10,r),a=s>=$X?10:s>=XX?5:s>=QX?2:1;let o,u,c;return r<0?(c=Math.pow(10,-r)/a,o=Math.round(i*c),u=Math.round(e*c),o/c<i&&++o,u/c>e&&--u,c=-c):(c=Math.pow(10,r)*a,o=Math.round(i/c),u=Math.round(e/c),o*c<i&&++o,u*c>e&&--u),u<o&&.5<=t&&t<2?y8(i,e,t*2):[o,u,c]}function YX(i,e,t){if(e=+e,i=+i,t=+t,!(t>0))return[];if(i===e)return[i];const n=e<i,[r,s,a]=n?y8(e,i,t):y8(i,e,t);if(!(s>=r))return[];const o=s-r+1,u=new Array(o);if(n)if(a<0)for(let c=0;c<o;++c)u[c]=(s-c)/-a;else for(let c=0;c<o;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)u[c]=(r+c)/-a;else for(let c=0;c<o;++c)u[c]=(r+c)*a;return u}function ov(i,e,t){return e=+e,i=+i,t=+t,y8(i,e,t)[2]}function KX(i,e,t){e=+e,i=+i,t=+t;const n=e<i,r=n?ov(e,i,t):ov(i,e,t);return(n?-1:1)*(r<0?1/-r:r)}function ZX(i,e){let t;for(const n of i)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function JX(i,e){let t=0,n=0;if(e===void 0)for(let r of i)r!=null&&(r=+r)>=r&&(++t,n+=r);else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(s=+s)>=s&&(++t,n+=s)}if(t)return n/t}function*eQ(i){for(const e of i)yield*e}function n3(i){return Array.from(eQ(i))}function cd(i,e,t){i=+i,e=+e,t=(r=arguments.length)<2?(e=i,i=0,1):r<3?1:+t;for(var n=-1,r=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(r);++n<r;)s[n]=i+n*t;return s}function tQ(i,e){let t=0;for(let n of i)(n=+n)&&(t+=n);return t}function ZN(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}function xx(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function JN(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function B3(){}var i3=.7,x8=1/i3,qd="\\s*([+-]?\\d+)\\s*",r3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nQ=/^#([0-9a-f]{3,8})$/,iQ=new RegExp(`^rgb\\(${qd},${qd},${qd}\\)$`),rQ=new RegExp(`^rgb\\(${hu},${hu},${hu}\\)$`),sQ=new RegExp(`^rgba\\(${qd},${qd},${qd},${r3}\\)$`),aQ=new RegExp(`^rgba\\(${hu},${hu},${hu},${r3}\\)$`),oQ=new RegExp(`^hsl\\(${r3},${hu},${hu}\\)$`),lQ=new RegExp(`^hsla\\(${r3},${hu},${hu},${r3}\\)$`),xE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xx(B3,vh,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:qE,formatHex:qE,formatHex8:uQ,formatHsl:cQ,formatRgb:bE,toString:bE});function qE(){return this.rgb().formatHex()}function uQ(){return this.rgb().formatHex8()}function cQ(){return eP(this).formatHsl()}function bE(){return this.rgb().formatRgb()}function vh(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=nQ.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?SE(e):t===3?new La(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Wm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Wm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=iQ.exec(i))?new La(e[1],e[2],e[3],1):(e=rQ.exec(i))?new La(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sQ.exec(i))?Wm(e[1],e[2],e[3],e[4]):(e=aQ.exec(i))?Wm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=oQ.exec(i))?EE(e[1],e[2]/100,e[3]/100,1):(e=lQ.exec(i))?EE(e[1],e[2]/100,e[3]/100,e[4]):xE.hasOwnProperty(i)?SE(xE[i]):i==="transparent"?new La(NaN,NaN,NaN,0):null}function SE(i){return new La(i>>16&255,i>>8&255,i&255,1)}function Wm(i,e,t,n){return n<=0&&(i=e=t=NaN),new La(i,e,t,n)}function hQ(i){return i instanceof B3||(i=vh(i)),i?(i=i.rgb(),new La(i.r,i.g,i.b,i.opacity)):new La}function lv(i,e,t,n){return arguments.length===1?hQ(i):new La(i,e,t,n??1)}function La(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}xx(La,lv,JN(B3,{brighter(i){return i=i==null?x8:Math.pow(x8,i),new La(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?i3:Math.pow(i3,i),new La(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new La(oh(this.r),oh(this.g),oh(this.b),q8(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TE,formatHex:TE,formatHex8:fQ,formatRgb:wE,toString:wE}));function TE(){return`#${J0(this.r)}${J0(this.g)}${J0(this.b)}`}function fQ(){return`#${J0(this.r)}${J0(this.g)}${J0(this.b)}${J0((isNaN(this.opacity)?1:this.opacity)*255)}`}function wE(){const i=q8(this.opacity);return`${i===1?"rgb(":"rgba("}${oh(this.r)}, ${oh(this.g)}, ${oh(this.b)}${i===1?")":`, ${i})`}`}function q8(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function oh(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function J0(i){return i=oh(i),(i<16?"0":"")+i.toString(16)}function EE(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new wl(i,e,t,n)}function eP(i){if(i instanceof wl)return new wl(i.h,i.s,i.l,i.opacity);if(i instanceof B3||(i=vh(i)),!i)return new wl;if(i instanceof wl)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,r=Math.min(e,t,n),s=Math.max(e,t,n),a=NaN,o=s-r,u=(s+r)/2;return o?(e===s?a=(t-n)/o+(t<n)*6:t===s?a=(n-e)/o+2:a=(e-t)/o+4,o/=u<.5?s+r:2-s-r,a*=60):o=u>0&&u<1?0:a,new wl(a,o,u,i.opacity)}function dQ(i,e,t,n){return arguments.length===1?eP(i):new wl(i,e,t,n??1)}function wl(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}xx(wl,dQ,JN(B3,{brighter(i){return i=i==null?x8:Math.pow(x8,i),new wl(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?i3:Math.pow(i3,i),new wl(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,r=2*t-n;return new La(Ng(i>=240?i-240:i+120,r,n),Ng(i,r,n),Ng(i<120?i+240:i-120,r,n),this.opacity)},clamp(){return new wl(ME(this.h),$m(this.s),$m(this.l),q8(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=q8(this.opacity);return`${i===1?"hsl(":"hsla("}${ME(this.h)}, ${$m(this.s)*100}%, ${$m(this.l)*100}%${i===1?")":`, ${i})`}`}}));function ME(i){return i=(i||0)%360,i<0?i+360:i}function $m(i){return Math.max(0,Math.min(1,i||0))}function Ng(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const qx=i=>()=>i;function AQ(i,e){return function(t){return i+t*e}}function pQ(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function mQ(i){return(i=+i)==1?tP:function(e,t){return t-e?pQ(e,t,i):qx(isNaN(e)?t:e)}}function tP(i,e){var t=e-i;return t?AQ(i,t):qx(isNaN(i)?e:i)}const RE=function i(e){var t=mQ(e);function n(r,s){var a=t((r=lv(r)).r,(s=lv(s)).r),o=t(r.g,s.g),u=t(r.b,s.b),c=tP(r.opacity,s.opacity);return function(p){return r.r=a(p),r.g=o(p),r.b=u(p),r.opacity=c(p),r+""}}return n.gamma=i,n}(1);function nP(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),r;return function(s){for(r=0;r<t;++r)n[r]=i[r]*(1-s)+e[r]*s;return n}}function iP(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function gQ(i,e){return(iP(e)?nP:rP)(i,e)}function rP(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,r=new Array(n),s=new Array(t),a;for(a=0;a<n;++a)r[a]=bx(i[a],e[a]);for(;a<t;++a)s[a]=e[a];return function(o){for(a=0;a<n;++a)s[a]=r[a](o);return s}}function _Q(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function s3(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function vQ(i,e){var t={},n={},r;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in i?t[r]=bx(i[r],e[r]):n[r]=e[r];return function(s){for(r in t)n[r]=t[r](s);return n}}var uv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pg=new RegExp(uv.source,"g");function yQ(i){return function(){return i}}function xQ(i){return function(e){return i(e)+""}}function qQ(i,e){var t=uv.lastIndex=Pg.lastIndex=0,n,r,s,a=-1,o=[],u=[];for(i=i+"",e=e+"";(n=uv.exec(i))&&(r=Pg.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,u.push({i:a,x:s3(n,r)})),t=Pg.lastIndex;return t<e.length&&(s=e.slice(t),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?xQ(u[0].x):yQ(e):(e=u.length,function(c){for(var p=0,g;p<e;++p)o[(g=u[p]).i]=g.x(c);return o.join("")})}function bx(i,e){var t=typeof e,n;return e==null||t==="boolean"?qx(e):(t==="number"?s3:t==="string"?(n=vh(e))?(e=n,RE):qQ:e instanceof vh?RE:e instanceof Date?_Q:iP(e)?nP:Array.isArray(e)?rP:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?vQ:s3)(i,e)}function bQ(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}function SQ(i){return function(){return i}}function TQ(i){return+i}var CE=[0,1];function hd(i){return i}function cv(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:SQ(isNaN(e)?NaN:.5)}function wQ(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function EQ(i,e,t){var n=i[0],r=i[1],s=e[0],a=e[1];return r<n?(n=cv(r,n),s=t(a,s)):(n=cv(n,r),s=t(s,a)),function(o){return s(n(o))}}function MQ(i,e,t){var n=Math.min(i.length,e.length)-1,r=new Array(n),s=new Array(n),a=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++a<n;)r[a]=cv(i[a],i[a+1]),s[a]=t(e[a],e[a+1]);return function(o){var u=KN(i,o,1,n)-1;return s[u](r[u](o))}}function RQ(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function CQ(){var i=CE,e=CE,t=bx,n,r,s,a=hd,o,u,c;function p(){var y=Math.min(i.length,e.length);return a!==hd&&(a=wQ(i[0],i[y-1])),o=y>2?MQ:EQ,u=c=null,g}function g(y){return y==null||isNaN(y=+y)?s:(u||(u=o(i.map(n),e,t)))(n(a(y)))}return g.invert=function(y){return a(r((c||(c=o(e,i.map(n),s3)))(y)))},g.domain=function(y){return arguments.length?(i=Array.from(y,TQ),p()):i.slice()},g.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},g.rangeRound=function(y){return e=Array.from(y),t=bQ,p()},g.clamp=function(y){return arguments.length?(a=y?!0:hd,p()):a!==hd},g.interpolate=function(y){return arguments.length?(t=y,p()):t},g.unknown=function(y){return arguments.length?(s=y,g):s},function(y,q){return n=y,r=q,p()}}function NQ(){return CQ()(hd,hd)}function PQ(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function b8(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function Zd(i){return i=b8(Math.abs(i)),i?i[1]:NaN}function DQ(i,e){return function(t,n){for(var r=t.length,s=[],a=0,o=i[0],u=0;r>0&&o>0&&(u+o+1>n&&(o=Math.max(1,n-u)),s.push(t.substring(r-=o,r+o)),!((u+=o+1)>n));)o=i[a=(a+1)%i.length];return s.reverse().join(e)}}function LQ(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var UQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function S8(i){if(!(e=UQ.exec(i)))throw new Error("invalid format: "+i);var e;return new Sx({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}S8.prototype=Sx.prototype;function Sx(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}Sx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function OQ(i){e:for(var e=i.length,t=1,n=-1,r;t<e;++t)switch(i[t]){case".":n=r=t;break;case"0":n===0&&(n=t),r=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(r+1):i}var sP;function BQ(i,e){var t=b8(i,e);if(!t)return i+"";var n=t[0],r=t[1],s=r-(sP=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+b8(i,Math.max(0,e+s-1))[0]}function NE(i,e){var t=b8(i,e);if(!t)return i+"";var n=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const PE={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:PQ,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>NE(i*100,e),r:NE,s:BQ,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function DE(i){return i}var LE=Array.prototype.map,UE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function IQ(i){var e=i.grouping===void 0||i.thousands===void 0?DE:DQ(LE.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",r=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?DE:LQ(LE.call(i.numerals,String)),a=i.percent===void 0?"%":i.percent+"",o=i.minus===void 0?"−":i.minus+"",u=i.nan===void 0?"NaN":i.nan+"";function c(g){g=S8(g);var y=g.fill,q=g.align,S=g.sign,R=g.symbol,M=g.zero,E=g.width,U=g.comma,P=g.precision,O=g.trim,F=g.type;F==="n"?(U=!0,F="g"):PE[F]||(P===void 0&&(P=12),O=!0,F="g"),(M||y==="0"&&q==="=")&&(M=!0,y="0",q="=");var I=R==="$"?t:R==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",z=R==="$"?n:/[%p]/.test(F)?a:"",j=PE[F],k=/[defgprs%]/.test(F);P=P===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function G($){var te=I,ne=z,ue,ae,W;if(F==="c")ne=j($)+ne,$="";else{$=+$;var J=$<0||1/$<0;if($=isNaN($)?u:j(Math.abs($),P),O&&($=OQ($)),J&&+$==0&&S!=="+"&&(J=!1),te=(J?S==="("?S:o:S==="-"||S==="("?"":S)+te,ne=(F==="s"?UE[8+sP/3]:"")+ne+(J&&S==="("?")":""),k){for(ue=-1,ae=$.length;++ue<ae;)if(W=$.charCodeAt(ue),48>W||W>57){ne=(W===46?r+$.slice(ue+1):$.slice(ue))+ne,$=$.slice(0,ue);break}}}U&&!M&&($=e($,1/0));var re=te.length+$.length+ne.length,ge=re<E?new Array(E-re+1).join(y):"";switch(U&&M&&($=e(ge+$,ge.length?E-ne.length:1/0),ge=""),q){case"<":$=te+$+ne+ge;break;case"=":$=te+ge+$+ne;break;case"^":$=ge.slice(0,re=ge.length>>1)+te+$+ne+ge.slice(re);break;default:$=ge+te+$+ne;break}return s($)}return G.toString=function(){return g+""},G}function p(g,y){var q=c((g=S8(g),g.type="f",g)),S=Math.max(-8,Math.min(8,Math.floor(Zd(y)/3)))*3,R=Math.pow(10,-S),M=UE[8+S/3];return function(E){return q(R*E)+M}}return{format:c,formatPrefix:p}}var Xm,aP,oP;FQ({thousands:",",grouping:[3],currency:["$",""]});function FQ(i){return Xm=IQ(i),aP=Xm.format,oP=Xm.formatPrefix,Xm}function kQ(i){return Math.max(0,-Zd(Math.abs(i)))}function zQ(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zd(e)/3)))*3-Zd(Math.abs(i)))}function GQ(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,Zd(e)-Zd(i))+1}function VQ(i,e,t,n){var r=KX(i,e,t),s;switch(n=S8(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(s=zQ(r,a))&&(n.precision=s),oP(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=GQ(r,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=kQ(r))&&(n.precision=s-(n.type==="%")*2);break}}return aP(n)}function lP(i){var e=i.domain;return i.ticks=function(t){var n=e();return YX(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var r=e();return VQ(r[0],r[r.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),r=0,s=n.length-1,a=n[r],o=n[s],u,c,p=10;for(o<a&&(c=a,a=o,o=c,c=r,r=s,s=c);p-- >0;){if(c=ov(a,o,t),c===u)return n[r]=a,n[s]=o,e(n);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;u=c}return i},i}function Ec(){var i=NQ();return i.copy=function(){return RQ(i,Ec())},ZN.apply(i,arguments),lP(i)}function uP(){var i=0,e=1,t=1,n=[.5],r=[0,1],s;function a(u){return u!=null&&u<=u?r[KN(n,u,0,t)]:s}function o(){var u=-1;for(n=new Array(t);++u<t;)n[u]=((u+1)*e-(u-t)*i)/(t+1);return a}return a.domain=function(u){return arguments.length?([i,e]=u,i=+i,e=+e,o()):[i,e]},a.range=function(u){return arguments.length?(t=(r=Array.from(u)).length-1,o()):r.slice()},a.invertExtent=function(u){var c=r.indexOf(u);return c<0?[NaN,NaN]:c<1?[i,n[0]]:c>=t?[n[t-1],e]:[n[c-1],n[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return n.slice()},a.copy=function(){return uP().domain([i,e]).range(r).unknown(s)},ZN.apply(lP(a),arguments)}var ci=1e-6,hv=1e-12,vi=Math.PI,Ua=vi/2,T8=vi/4,bo=vi*2,Pr=180/vi,Nn=vi/180,Hi=Math.abs,Tx=Math.atan,Zo=Math.atan2,Fn=Math.cos,Qm=Math.ceil,HQ=Math.exp,fv=Math.hypot,jQ=Math.log,Sn=Math.sin,WQ=Math.sign||function(i){return i>0?1:i<0?-1:0},Mc=Math.sqrt,$Q=Math.tan;function XQ(i){return i>1?0:i<-1?vi:Math.acos(i)}function Rc(i){return i>1?Ua:i<-1?-Ua:Math.asin(i)}function OE(i){return(i=Sn(i/2))*i}function Js(){}function w8(i,e){i&&IE.hasOwnProperty(i.type)&&IE[i.type](i,e)}var BE={Feature:function(i,e){w8(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)w8(t[n].geometry,e)}},IE={Sphere:function(i,e){e.sphere()},Point:function(i,e){i=i.coordinates,e.point(i[0],i[1],i[2])},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)i=t[n],e.point(i[0],i[1],i[2])},LineString:function(i,e){dv(i.coordinates,e,0)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)dv(t[n],e,0)},Polygon:function(i,e){FE(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)FE(t[n],e)},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)w8(t[n],e)}};function dv(i,e,t){var n=-1,r=i.length-t,s;for(e.lineStart();++n<r;)s=i[n],e.point(s[0],s[1],s[2]);e.lineEnd()}function FE(i,e){var t=-1,n=i.length;for(e.polygonStart();++t<n;)dv(i[t],e,1);e.polygonEnd()}function C5(i,e){i&&BE.hasOwnProperty(i.type)?BE[i.type](i,e):w8(i,e)}var E8=new qc,kE=new qc,cP,hP,Av,pv,mv,Cc={point:Js,lineStart:Js,lineEnd:Js,polygonStart:function(){E8=new qc,Cc.lineStart=QQ,Cc.lineEnd=YQ},polygonEnd:function(){var i=+E8;kE.add(i<0?bo+i:i),this.lineStart=this.lineEnd=this.point=Js},sphere:function(){kE.add(bo)}};function QQ(){Cc.point=KQ}function YQ(){fP(cP,hP)}function KQ(i,e){Cc.point=fP,cP=i,hP=e,i*=Nn,e*=Nn,Av=i,pv=Fn(e=e/2+T8),mv=Sn(e)}function fP(i,e){i*=Nn,e*=Nn,e=e/2+T8;var t=i-Av,n=t>=0?1:-1,r=n*t,s=Fn(e),a=Sn(e),o=mv*a,u=pv*s+o*Fn(r),c=o*n*Sn(r);E8.add(Zo(c,u)),Av=i,pv=s,mv=a}function M8(i){return[Zo(i[1],i[0]),Rc(i[2])]}function yh(i){var e=i[0],t=i[1],n=Fn(t);return[n*Fn(e),n*Sn(e),Sn(t)]}function Ym(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function Jd(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function Dg(i,e){i[0]+=e[0],i[1]+=e[1],i[2]+=e[2]}function Km(i,e){return[i[0]*e,i[1]*e,i[2]*e]}function R8(i){var e=Mc(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=e,i[1]/=e,i[2]/=e}var br,Ca,Cr,mo,G0,dP,AP,bd,xp,R1,Nc,Ac={point:gv,lineStart:zE,lineEnd:GE,polygonStart:function(){Ac.point=mP,Ac.lineStart=ZQ,Ac.lineEnd=JQ,xp=new qc,Cc.polygonStart()},polygonEnd:function(){Cc.polygonEnd(),Ac.point=gv,Ac.lineStart=zE,Ac.lineEnd=GE,E8<0?(br=-(Cr=180),Ca=-(mo=90)):xp>ci?mo=90:xp<-1e-6&&(Ca=-90),Nc[0]=br,Nc[1]=Cr},sphere:function(){br=-(Cr=180),Ca=-(mo=90)}};function gv(i,e){R1.push(Nc=[br=i,Cr=i]),e<Ca&&(Ca=e),e>mo&&(mo=e)}function pP(i,e){var t=yh([i*Nn,e*Nn]);if(bd){var n=Jd(bd,t),r=[n[1],-n[0],0],s=Jd(r,n);R8(s),s=M8(s);var a=i-G0,o=a>0?1:-1,u=s[0]*Pr*o,c,p=Hi(a)>180;p^(o*G0<u&&u<o*i)?(c=s[1]*Pr,c>mo&&(mo=c)):(u=(u+360)%360-180,p^(o*G0<u&&u<o*i)?(c=-s[1]*Pr,c<Ca&&(Ca=c)):(e<Ca&&(Ca=e),e>mo&&(mo=e))),p?i<G0?fo(br,i)>fo(br,Cr)&&(Cr=i):fo(i,Cr)>fo(br,Cr)&&(br=i):Cr>=br?(i<br&&(br=i),i>Cr&&(Cr=i)):i>G0?fo(br,i)>fo(br,Cr)&&(Cr=i):fo(i,Cr)>fo(br,Cr)&&(br=i)}else R1.push(Nc=[br=i,Cr=i]);e<Ca&&(Ca=e),e>mo&&(mo=e),bd=t,G0=i}function zE(){Ac.point=pP}function GE(){Nc[0]=br,Nc[1]=Cr,Ac.point=gv,bd=null}function mP(i,e){if(bd){var t=i-G0;xp.add(Hi(t)>180?t+(t>0?360:-360):t)}else dP=i,AP=e;Cc.point(i,e),pP(i,e)}function ZQ(){Cc.lineStart()}function JQ(){mP(dP,AP),Cc.lineEnd(),Hi(xp)>ci&&(br=-(Cr=180)),Nc[0]=br,Nc[1]=Cr,bd=null}function fo(i,e){return(e-=i)<0?e+360:e}function eY(i,e){return i[0]-e[0]}function VE(i,e){return i[0]<=i[1]?i[0]<=e&&e<=i[1]:e<i[0]||i[1]<e}function gP(i){var e,t,n,r,s,a,o;if(mo=Cr=-(br=Ca=1/0),R1=[],C5(i,Ac),t=R1.length){for(R1.sort(eY),e=1,n=R1[0],s=[n];e<t;++e)r=R1[e],VE(n,r[0])||VE(n,r[1])?(fo(n[0],r[1])>fo(n[0],n[1])&&(n[1]=r[1]),fo(r[0],n[1])>fo(n[0],n[1])&&(n[0]=r[0])):s.push(n=r);for(a=-1/0,t=s.length-1,e=0,n=s[t];e<=t;n=r,++e)r=s[e],(o=fo(n[1],r[0]))>a&&(a=o,br=r[0],Cr=n[1])}return R1=Nc=null,br===1/0||Ca===1/0?[[NaN,NaN],[NaN,NaN]]:[[br,Ca],[Cr,mo]]}var cp,C8,N8,P8,D8,L8,U8,O8,_v,vv,yv,_P,vP,fa,da,Aa,Rl={sphere:Js,point:wx,lineStart:HE,lineEnd:jE,polygonStart:function(){Rl.lineStart=iY,Rl.lineEnd=rY},polygonEnd:function(){Rl.lineStart=HE,Rl.lineEnd=jE}};function wx(i,e){i*=Nn,e*=Nn;var t=Fn(e);I3(t*Fn(i),t*Sn(i),Sn(e))}function I3(i,e,t){++cp,N8+=(i-N8)/cp,P8+=(e-P8)/cp,D8+=(t-D8)/cp}function HE(){Rl.point=tY}function tY(i,e){i*=Nn,e*=Nn;var t=Fn(e);fa=t*Fn(i),da=t*Sn(i),Aa=Sn(e),Rl.point=nY,I3(fa,da,Aa)}function nY(i,e){i*=Nn,e*=Nn;var t=Fn(e),n=t*Fn(i),r=t*Sn(i),s=Sn(e),a=Zo(Mc((a=da*s-Aa*r)*a+(a=Aa*n-fa*s)*a+(a=fa*r-da*n)*a),fa*n+da*r+Aa*s);C8+=a,L8+=a*(fa+(fa=n)),U8+=a*(da+(da=r)),O8+=a*(Aa+(Aa=s)),I3(fa,da,Aa)}function jE(){Rl.point=wx}function iY(){Rl.point=sY}function rY(){yP(_P,vP),Rl.point=wx}function sY(i,e){_P=i,vP=e,i*=Nn,e*=Nn,Rl.point=yP;var t=Fn(e);fa=t*Fn(i),da=t*Sn(i),Aa=Sn(e),I3(fa,da,Aa)}function yP(i,e){i*=Nn,e*=Nn;var t=Fn(e),n=t*Fn(i),r=t*Sn(i),s=Sn(e),a=da*s-Aa*r,o=Aa*n-fa*s,u=fa*r-da*n,c=fv(a,o,u),p=Rc(c),g=c&&-p/c;_v.add(g*a),vv.add(g*o),yv.add(g*u),C8+=p,L8+=p*(fa+(fa=n)),U8+=p*(da+(da=r)),O8+=p*(Aa+(Aa=s)),I3(fa,da,Aa)}function WE(i){cp=C8=N8=P8=D8=L8=U8=O8=0,_v=new qc,vv=new qc,yv=new qc,C5(i,Rl);var e=+_v,t=+vv,n=+yv,r=fv(e,t,n);return r<hv&&(e=L8,t=U8,n=O8,C8<ci&&(e=N8,t=P8,n=D8),r=fv(e,t,n),r<hv)?[NaN,NaN]:[Zo(t,e)*Pr,Rc(n/r)*Pr]}function xv(i,e){function t(n,r){return n=i(n,r),e(n[0],n[1])}return i.invert&&e.invert&&(t.invert=function(n,r){return n=e.invert(n,r),n&&i.invert(n[0],n[1])}),t}function qv(i,e){return Hi(i)>vi&&(i-=Math.round(i/bo)*bo),[i,e]}qv.invert=qv;function xP(i,e,t){return(i%=bo)?e||t?xv(XE(i),QE(e,t)):XE(i):e||t?QE(e,t):qv}function $E(i){return function(e,t){return e+=i,Hi(e)>vi&&(e-=Math.round(e/bo)*bo),[e,t]}}function XE(i){var e=$E(i);return e.invert=$E(-i),e}function QE(i,e){var t=Fn(i),n=Sn(i),r=Fn(e),s=Sn(e);function a(o,u){var c=Fn(u),p=Fn(o)*c,g=Sn(o)*c,y=Sn(u),q=y*t+p*n;return[Zo(g*r-q*s,p*t-y*n),Rc(q*r+g*s)]}return a.invert=function(o,u){var c=Fn(u),p=Fn(o)*c,g=Sn(o)*c,y=Sn(u),q=y*r-g*s;return[Zo(g*r+y*s,p*t+q*n),Rc(q*t-p*n)]},a}function aY(i){i=xP(i[0]*Nn,i[1]*Nn,i.length>2?i[2]*Nn:0);function e(t){return t=i(t[0]*Nn,t[1]*Nn),t[0]*=Pr,t[1]*=Pr,t}return e.invert=function(t){return t=i.invert(t[0]*Nn,t[1]*Nn),t[0]*=Pr,t[1]*=Pr,t},e}function oY(i,e,t,n,r,s){if(t){var a=Fn(e),o=Sn(e),u=n*t;r==null?(r=e+n*bo,s=e-u/2):(r=YE(a,r),s=YE(a,s),(n>0?r<s:r>s)&&(r+=n*bo));for(var c,p=r;n>0?p>s:p<s;p-=u)c=M8([a,-o*Fn(p),-o*Sn(p)]),i.point(c[0],c[1])}}function YE(i,e){e=yh(e),e[0]-=i,R8(e);var t=XQ(-e[1]);return((-e[2]<0?-t:t)+bo-ci)%bo}function qP(){var i=[],e;return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){i.push(e=[])},lineEnd:Js,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var t=i;return i=[],e=null,t}}}function Q6(i,e){return Hi(i[0]-e[0])<ci&&Hi(i[1]-e[1])<ci}function Zm(i,e,t,n){this.x=i,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function bP(i,e,t,n,r){var s=[],a=[],o,u;if(i.forEach(function(S){if(!((R=S.length-1)<=0)){var R,M=S[0],E=S[R],U;if(Q6(M,E)){if(!M[2]&&!E[2]){for(r.lineStart(),o=0;o<R;++o)r.point((M=S[o])[0],M[1]);r.lineEnd();return}E[0]+=2*ci}s.push(U=new Zm(M,S,null,!0)),a.push(U.o=new Zm(M,null,U,!1)),s.push(U=new Zm(E,S,null,!1)),a.push(U.o=new Zm(E,null,U,!0))}}),!!s.length){for(a.sort(e),KE(s),KE(a),o=0,u=a.length;o<u;++o)a[o].e=t=!t;for(var c=s[0],p,g;;){for(var y=c,q=!0;y.v;)if((y=y.n)===c)return;p=y.z,r.lineStart();do{if(y.v=y.o.v=!0,y.e){if(q)for(o=0,u=p.length;o<u;++o)r.point((g=p[o])[0],g[1]);else n(y.x,y.n.x,1,r);y=y.n}else{if(q)for(p=y.p.z,o=p.length-1;o>=0;--o)r.point((g=p[o])[0],g[1]);else n(y.x,y.p.x,-1,r);y=y.p}y=y.o,p=y.z,q=!q}while(!y.v);r.lineEnd()}}}function KE(i){if(e=i.length){for(var e,t=0,n=i[0],r;++t<e;)n.n=r=i[t],r.p=n,n=r;n.n=r=i[0],r.p=n}}function Lg(i){return Hi(i[0])<=vi?i[0]:WQ(i[0])*((Hi(i[0])+vi)%bo-vi)}function SP(i,e){var t=Lg(e),n=e[1],r=Sn(n),s=[Sn(t),-Fn(t),0],a=0,o=0,u=new qc;r===1?n=Ua+ci:r===-1&&(n=-Ua-ci);for(var c=0,p=i.length;c<p;++c)if(y=(g=i[c]).length)for(var g,y,q=g[y-1],S=Lg(q),R=q[1]/2+T8,M=Sn(R),E=Fn(R),U=0;U<y;++U,S=O,M=I,E=z,q=P){var P=g[U],O=Lg(P),F=P[1]/2+T8,I=Sn(F),z=Fn(F),j=O-S,k=j>=0?1:-1,G=k*j,$=G>vi,te=M*I;if(u.add(Zo(te*k*Sn(G),E*z+te*Fn(G))),a+=$?j+k*bo:j,$^S>=t^O>=t){var ne=Jd(yh(q),yh(P));R8(ne);var ue=Jd(s,ne);R8(ue);var ae=($^j>=0?-1:1)*Rc(ue[2]);(n>ae||n===ae&&(ne[0]||ne[1]))&&(o+=$^j>=0?1:-1)}}return(a<-1e-6||a<ci&&u<-1e-12)^o&1}function TP(i,e,t,n){return function(r){var s=e(r),a=qP(),o=e(a),u=!1,c,p,g,y={point:q,lineStart:R,lineEnd:M,polygonStart:function(){y.point=E,y.lineStart=U,y.lineEnd=P,p=[],c=[]},polygonEnd:function(){y.point=q,y.lineStart=R,y.lineEnd=M,p=n3(p);var O=SP(c,n);p.length?(u||(r.polygonStart(),u=!0),bP(p,uY,O,t,r)):O&&(u||(r.polygonStart(),u=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),p=c=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function q(O,F){i(O,F)&&r.point(O,F)}function S(O,F){s.point(O,F)}function R(){y.point=S,s.lineStart()}function M(){y.point=q,s.lineEnd()}function E(O,F){g.push([O,F]),o.point(O,F)}function U(){o.lineStart(),g=[]}function P(){E(g[0][0],g[0][1]),o.lineEnd();var O=o.clean(),F=a.result(),I,z=F.length,j,k,G;if(g.pop(),c.push(g),g=null,!!z){if(O&1){if(k=F[0],(j=k.length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),I=0;I<j;++I)r.point((G=k[I])[0],G[1]);r.lineEnd()}return}z>1&&O&2&&F.push(F.pop().concat(F.shift())),p.push(F.filter(lY))}}return y}}function lY(i){return i.length>1}function uY(i,e){return((i=i.x)[0]<0?i[1]-Ua-ci:Ua-i[1])-((e=e.x)[0]<0?e[1]-Ua-ci:Ua-e[1])}const ZE=TP(function(){return!0},cY,fY,[-vi,-Ua]);function cY(i){var e=NaN,t=NaN,n=NaN,r;return{lineStart:function(){i.lineStart(),r=1},point:function(s,a){var o=s>0?vi:-vi,u=Hi(s-e);Hi(u-vi)<ci?(i.point(e,t=(t+a)/2>0?Ua:-Ua),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(o,t),i.point(s,t),r=0):n!==o&&u>=vi&&(Hi(e-n)<ci&&(e-=n*ci),Hi(s-o)<ci&&(s-=o*ci),t=hY(e,t,s,a),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(o,t),r=0),i.point(e=s,t=a),n=o},lineEnd:function(){i.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function hY(i,e,t,n){var r,s,a=Sn(i-t);return Hi(a)>ci?Tx((Sn(e)*(s=Fn(n))*Sn(t)-Sn(n)*(r=Fn(e))*Sn(i))/(r*s*a)):(e+n)/2}function fY(i,e,t,n){var r;if(i==null)r=t*Ua,n.point(-vi,r),n.point(0,r),n.point(vi,r),n.point(vi,0),n.point(vi,-r),n.point(0,-r),n.point(-vi,-r),n.point(-vi,0),n.point(-vi,r);else if(Hi(i[0]-e[0])>ci){var s=i[0]<e[0]?vi:-vi;r=t*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function dY(i){var e=Fn(i),t=2*Nn,n=e>0,r=Hi(e)>ci;function s(p,g,y,q){oY(q,i,t,y,p,g)}function a(p,g){return Fn(p)*Fn(g)>e}function o(p){var g,y,q,S,R;return{lineStart:function(){S=q=!1,R=1},point:function(M,E){var U=[M,E],P,O=a(M,E),F=n?O?0:c(M,E):O?c(M+(M<0?vi:-vi),E):0;if(!g&&(S=q=O)&&p.lineStart(),O!==q&&(P=u(g,U),(!P||Q6(g,P)||Q6(U,P))&&(U[2]=1)),O!==q)R=0,O?(p.lineStart(),P=u(U,g),p.point(P[0],P[1])):(P=u(g,U),p.point(P[0],P[1],2),p.lineEnd()),g=P;else if(r&&g&&n^O){var I;!(F&y)&&(I=u(U,g,!0))&&(R=0,n?(p.lineStart(),p.point(I[0][0],I[0][1]),p.point(I[1][0],I[1][1]),p.lineEnd()):(p.point(I[1][0],I[1][1]),p.lineEnd(),p.lineStart(),p.point(I[0][0],I[0][1],3)))}O&&(!g||!Q6(g,U))&&p.point(U[0],U[1]),g=U,q=O,y=F},lineEnd:function(){q&&p.lineEnd(),g=null},clean:function(){return R|(S&&q)<<1}}}function u(p,g,y){var q=yh(p),S=yh(g),R=[1,0,0],M=Jd(q,S),E=Ym(M,M),U=M[0],P=E-U*U;if(!P)return!y&&p;var O=e*E/P,F=-e*U/P,I=Jd(R,M),z=Km(R,O),j=Km(M,F);Dg(z,j);var k=I,G=Ym(z,k),$=Ym(k,k),te=G*G-$*(Ym(z,z)-1);if(!(te<0)){var ne=Mc(te),ue=Km(k,(-G-ne)/$);if(Dg(ue,z),ue=M8(ue),!y)return ue;var ae=p[0],W=g[0],J=p[1],re=g[1],ge;W<ae&&(ge=ae,ae=W,W=ge);var Y=W-ae,me=Hi(Y-vi)<ci,Me=me||Y<ci;if(!me&&re<J&&(ge=J,J=re,re=ge),Me?me?J+re>0^ue[1]<(Hi(ue[0]-ae)<ci?J:re):J<=ue[1]&&ue[1]<=re:Y>vi^(ae<=ue[0]&&ue[0]<=W)){var Be=Km(k,(-G+ne)/$);return Dg(Be,z),[ue,M8(Be)]}}}function c(p,g){var y=n?i:vi-i,q=0;return p<-y?q|=1:p>y&&(q|=2),g<-y?q|=4:g>y&&(q|=8),q}return TP(a,o,s,n?[0,-i]:[-vi,i-vi])}function AY(i,e,t,n,r,s){var a=i[0],o=i[1],u=e[0],c=e[1],p=0,g=1,y=u-a,q=c-o,S;if(S=t-a,!(!y&&S>0)){if(S/=y,y<0){if(S<p)return;S<g&&(g=S)}else if(y>0){if(S>g)return;S>p&&(p=S)}if(S=r-a,!(!y&&S<0)){if(S/=y,y<0){if(S>g)return;S>p&&(p=S)}else if(y>0){if(S<p)return;S<g&&(g=S)}if(S=n-o,!(!q&&S>0)){if(S/=q,q<0){if(S<p)return;S<g&&(g=S)}else if(q>0){if(S>g)return;S>p&&(p=S)}if(S=s-o,!(!q&&S<0)){if(S/=q,q<0){if(S>g)return;S>p&&(p=S)}else if(q>0){if(S<p)return;S<g&&(g=S)}return p>0&&(i[0]=a+p*y,i[1]=o+p*q),g<1&&(e[0]=a+g*y,e[1]=o+g*q),!0}}}}}var Jm=1e9,e6=-1e9;function pY(i,e,t,n){function r(c,p){return i<=c&&c<=t&&e<=p&&p<=n}function s(c,p,g,y){var q=0,S=0;if(c==null||(q=a(c,g))!==(S=a(p,g))||u(c,p)<0^g>0)do y.point(q===0||q===3?i:t,q>1?n:e);while((q=(q+g+4)%4)!==S);else y.point(p[0],p[1])}function a(c,p){return Hi(c[0]-i)<ci?p>0?0:3:Hi(c[0]-t)<ci?p>0?2:1:Hi(c[1]-e)<ci?p>0?1:0:p>0?3:2}function o(c,p){return u(c.x,p.x)}function u(c,p){var g=a(c,1),y=a(p,1);return g!==y?g-y:g===0?p[1]-c[1]:g===1?c[0]-p[0]:g===2?c[1]-p[1]:p[0]-c[0]}return function(c){var p=c,g=qP(),y,q,S,R,M,E,U,P,O,F,I,z={point:j,lineStart:te,lineEnd:ne,polygonStart:G,polygonEnd:$};function j(ae,W){r(ae,W)&&p.point(ae,W)}function k(){for(var ae=0,W=0,J=q.length;W<J;++W)for(var re=q[W],ge=1,Y=re.length,me=re[0],Me,Be,be=me[0],Fe=me[1];ge<Y;++ge)Me=be,Be=Fe,me=re[ge],be=me[0],Fe=me[1],Be<=n?Fe>n&&(be-Me)*(n-Be)>(Fe-Be)*(i-Me)&&++ae:Fe<=n&&(be-Me)*(n-Be)<(Fe-Be)*(i-Me)&&--ae;return ae}function G(){p=g,y=[],q=[],I=!0}function $(){var ae=k(),W=I&&ae,J=(y=n3(y)).length;(W||J)&&(c.polygonStart(),W&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),J&&bP(y,o,ae,s,c),c.polygonEnd()),p=c,y=q=S=null}function te(){z.point=ue,q&&q.push(S=[]),F=!0,O=!1,U=P=NaN}function ne(){y&&(ue(R,M),E&&O&&g.rejoin(),y.push(g.result())),z.point=j,O&&p.lineEnd()}function ue(ae,W){var J=r(ae,W);if(q&&S.push([ae,W]),F)R=ae,M=W,E=J,F=!1,J&&(p.lineStart(),p.point(ae,W));else if(J&&O)p.point(ae,W);else{var re=[U=Math.max(e6,Math.min(Jm,U)),P=Math.max(e6,Math.min(Jm,P))],ge=[ae=Math.max(e6,Math.min(Jm,ae)),W=Math.max(e6,Math.min(Jm,W))];AY(re,ge,i,e,t,n)?(O||(p.lineStart(),p.point(re[0],re[1])),p.point(ge[0],ge[1]),J||p.lineEnd(),I=!1):J&&(p.lineStart(),p.point(ae,W),I=!1)}U=ae,P=W,O=J}return z}}var bv,Sv,Y6,K6,eA={sphere:Js,point:Js,lineStart:mY,lineEnd:Js,polygonStart:Js,polygonEnd:Js};function mY(){eA.point=_Y,eA.lineEnd=gY}function gY(){eA.point=eA.lineEnd=Js}function _Y(i,e){i*=Nn,e*=Nn,Sv=i,Y6=Sn(e),K6=Fn(e),eA.point=vY}function vY(i,e){i*=Nn,e*=Nn;var t=Sn(e),n=Fn(e),r=Hi(i-Sv),s=Fn(r),a=Sn(r),o=n*a,u=K6*t-Y6*n*s,c=Y6*t+K6*n*s;bv.add(Zo(Mc(o*o+u*u),c)),Sv=i,Y6=t,K6=n}function yY(i){return bv=new qc,C5(i,eA),+bv}var Tv=[null,null],xY={type:"LineString",coordinates:Tv};function Q1(i,e){return Tv[0]=i,Tv[1]=e,yY(xY)}var JE={Feature:function(i,e){return B8(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)if(B8(t[n].geometry,e))return!0;return!1}},eM={Sphere:function(){return!0},Point:function(i,e){return tM(i.coordinates,e)},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(tM(t[n],e))return!0;return!1},LineString:function(i,e){return nM(i.coordinates,e)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(nM(t[n],e))return!0;return!1},Polygon:function(i,e){return iM(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(iM(t[n],e))return!0;return!1},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)if(B8(t[n],e))return!0;return!1}};function B8(i,e){return i&&eM.hasOwnProperty(i.type)?eM[i.type](i,e):!1}function tM(i,e){return Q1(i,e)===0}function nM(i,e){for(var t,n,r,s=0,a=i.length;s<a;s++){if(n=Q1(i[s],e),n===0||s>0&&(r=Q1(i[s],i[s-1]),r>0&&t<=r&&n<=r&&(t+n-r)*(1-Math.pow((t-n)/r,2))<hv*r))return!0;t=n}return!1}function iM(i,e){return!!SP(i.map(qY),wP(e))}function qY(i){return i=i.map(wP),i.pop(),i}function wP(i){return[i[0]*Nn,i[1]*Nn]}function bY(i,e){return(i&&JE.hasOwnProperty(i.type)?JE[i.type]:B8)(i,e)}function rM(i,e,t){var n=cd(i,e-ci,t).concat(e);return function(r){return n.map(function(s){return[r,s]})}}function sM(i,e,t){var n=cd(i,e-ci,t).concat(e);return function(r){return n.map(function(s){return[s,r]})}}function SY(){var i,e,t,n,r,s,a,o,u=10,c=u,p=90,g=360,y,q,S,R,M=2.5;function E(){return{type:"MultiLineString",coordinates:U()}}function U(){return cd(Qm(n/p)*p,t,p).map(S).concat(cd(Qm(o/g)*g,a,g).map(R)).concat(cd(Qm(e/u)*u,i,u).filter(function(P){return Hi(P%p)>ci}).map(y)).concat(cd(Qm(s/c)*c,r,c).filter(function(P){return Hi(P%g)>ci}).map(q))}return E.lines=function(){return U().map(function(P){return{type:"LineString",coordinates:P}})},E.outline=function(){return{type:"Polygon",coordinates:[S(n).concat(R(a).slice(1),S(t).reverse().slice(1),R(o).reverse().slice(1))]}},E.extent=function(P){return arguments.length?E.extentMajor(P).extentMinor(P):E.extentMinor()},E.extentMajor=function(P){return arguments.length?(n=+P[0][0],t=+P[1][0],o=+P[0][1],a=+P[1][1],n>t&&(P=n,n=t,t=P),o>a&&(P=o,o=a,a=P),E.precision(M)):[[n,o],[t,a]]},E.extentMinor=function(P){return arguments.length?(e=+P[0][0],i=+P[1][0],s=+P[0][1],r=+P[1][1],e>i&&(P=e,e=i,i=P),s>r&&(P=s,s=r,r=P),E.precision(M)):[[e,s],[i,r]]},E.step=function(P){return arguments.length?E.stepMajor(P).stepMinor(P):E.stepMinor()},E.stepMajor=function(P){return arguments.length?(p=+P[0],g=+P[1],E):[p,g]},E.stepMinor=function(P){return arguments.length?(u=+P[0],c=+P[1],E):[u,c]},E.precision=function(P){return arguments.length?(M=+P,y=rM(s,r,90),q=sM(e,i,M),S=rM(o,a,90),R=sM(n,t,M),E):M},E.extentMajor([[-180,-90+ci],[180,90-ci]]).extentMinor([[-180,-80-ci],[180,80+ci]])}function TY(){return SY()()}function Ex(i,e){var t=i[0]*Nn,n=i[1]*Nn,r=e[0]*Nn,s=e[1]*Nn,a=Fn(n),o=Sn(n),u=Fn(s),c=Sn(s),p=a*Fn(t),g=a*Sn(t),y=u*Fn(r),q=u*Sn(r),S=2*Rc(Mc(OE(s-n)+a*u*OE(r-t))),R=Sn(S),M=S?function(E){var U=Sn(E*=S)/R,P=Sn(S-E)/R,O=P*p+U*y,F=P*g+U*q,I=P*o+U*c;return[Zo(F,O)*Pr,Zo(I,Mc(O*O+F*F))*Pr]}:function(){return[t*Pr,n*Pr]};return M.distance=S,M}const aM=i=>i;var tA=1/0,I8=tA,a3=-tA,F8=a3,oM={point:wY,lineStart:Js,lineEnd:Js,polygonStart:Js,polygonEnd:Js,result:function(){var i=[[tA,I8],[a3,F8]];return a3=F8=-(I8=tA=1/0),i}};function wY(i,e){i<tA&&(tA=i),i>a3&&(a3=i),e<I8&&(I8=e),e>F8&&(F8=e)}function Mx(i){return function(e){var t=new wv;for(var n in i)t[n]=i[n];return t.stream=e,t}}function wv(){}wv.prototype={constructor:wv,point:function(i,e){this.stream.point(i,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Rx(i,e,t){var n=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),n!=null&&i.clipExtent(null),C5(t,i.stream(oM)),e(oM.result()),n!=null&&i.clipExtent(n),i}function EP(i,e,t){return Rx(i,function(n){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,u=+e[0][1]+(s-a*(n[1][1]+n[0][1]))/2;i.scale(150*a).translate([o,u])},t)}function EY(i,e,t){return EP(i,[[0,0],e],t)}function MY(i,e,t){return Rx(i,function(n){var r=+e,s=r/(n[1][0]-n[0][0]),a=(r-s*(n[1][0]+n[0][0]))/2,o=-s*n[0][1];i.scale(150*s).translate([a,o])},t)}function RY(i,e,t){return Rx(i,function(n){var r=+e,s=r/(n[1][1]-n[0][1]),a=-s*n[0][0],o=(r-s*(n[1][1]+n[0][1]))/2;i.scale(150*s).translate([a,o])},t)}var lM=16,CY=Fn(30*Nn);function uM(i,e){return+e?PY(i,e):NY(i)}function NY(i){return Mx({point:function(e,t){e=i(e,t),this.stream.point(e[0],e[1])}})}function PY(i,e){function t(n,r,s,a,o,u,c,p,g,y,q,S,R,M){var E=c-n,U=p-r,P=E*E+U*U;if(P>4*e&&R--){var O=a+y,F=o+q,I=u+S,z=Mc(O*O+F*F+I*I),j=Rc(I/=z),k=Hi(Hi(I)-1)<ci||Hi(s-g)<ci?(s+g)/2:Zo(F,O),G=i(k,j),$=G[0],te=G[1],ne=$-n,ue=te-r,ae=U*ne-E*ue;(ae*ae/P>e||Hi((E*ne+U*ue)/P-.5)>.3||a*y+o*q+u*S<CY)&&(t(n,r,s,a,o,u,$,te,k,O/=z,F/=z,I,R,M),M.point($,te),t($,te,k,O,F,I,c,p,g,y,q,S,R,M))}}return function(n){var r,s,a,o,u,c,p,g,y,q,S,R,M={point:E,lineStart:U,lineEnd:O,polygonStart:function(){n.polygonStart(),M.lineStart=F},polygonEnd:function(){n.polygonEnd(),M.lineStart=U}};function E(j,k){j=i(j,k),n.point(j[0],j[1])}function U(){g=NaN,M.point=P,n.lineStart()}function P(j,k){var G=yh([j,k]),$=i(j,k);t(g,y,p,q,S,R,g=$[0],y=$[1],p=j,q=G[0],S=G[1],R=G[2],lM,n),n.point(g,y)}function O(){M.point=E,n.lineEnd()}function F(){U(),M.point=I,M.lineEnd=z}function I(j,k){P(r=j,k),s=g,a=y,o=q,u=S,c=R,M.point=P}function z(){t(g,y,p,q,S,R,s,a,r,o,u,c,lM,n),M.lineEnd=O,O()}return M}}var DY=Mx({point:function(i,e){this.stream.point(i*Nn,e*Nn)}});function LY(i){return Mx({point:function(e,t){var n=i(e,t);return this.stream.point(n[0],n[1])}})}function UY(i,e,t,n,r){function s(a,o){return a*=n,o*=r,[e+i*a,t-i*o]}return s.invert=function(a,o){return[(a-e)/i*n,(t-o)/i*r]},s}function cM(i,e,t,n,r,s){if(!s)return UY(i,e,t,n,r);var a=Fn(s),o=Sn(s),u=a*i,c=o*i,p=a/i,g=o/i,y=(o*t-a*e)/i,q=(o*e+a*t)/i;function S(R,M){return R*=n,M*=r,[u*R-c*M+e,t-c*R-u*M]}return S.invert=function(R,M){return[n*(p*R-g*M+y),r*(q-g*R-p*M)]},S}function OY(i){return BY(function(){return i})()}function BY(i){var e,t=150,n=480,r=250,s=0,a=0,o=0,u=0,c=0,p,g=0,y=1,q=1,S=null,R=ZE,M=null,E,U,P,O=aM,F=.5,I,z,j,k,G;function $(ae){return j(ae[0]*Nn,ae[1]*Nn)}function te(ae){return ae=j.invert(ae[0],ae[1]),ae&&[ae[0]*Pr,ae[1]*Pr]}$.stream=function(ae){return k&&G===ae?k:k=DY(LY(p)(R(I(O(G=ae)))))},$.preclip=function(ae){return arguments.length?(R=ae,S=void 0,ue()):R},$.postclip=function(ae){return arguments.length?(O=ae,M=E=U=P=null,ue()):O},$.clipAngle=function(ae){return arguments.length?(R=+ae?dY(S=ae*Nn):(S=null,ZE),ue()):S*Pr},$.clipExtent=function(ae){return arguments.length?(O=ae==null?(M=E=U=P=null,aM):pY(M=+ae[0][0],E=+ae[0][1],U=+ae[1][0],P=+ae[1][1]),ue()):M==null?null:[[M,E],[U,P]]},$.scale=function(ae){return arguments.length?(t=+ae,ne()):t},$.translate=function(ae){return arguments.length?(n=+ae[0],r=+ae[1],ne()):[n,r]},$.center=function(ae){return arguments.length?(s=ae[0]%360*Nn,a=ae[1]%360*Nn,ne()):[s*Pr,a*Pr]},$.rotate=function(ae){return arguments.length?(o=ae[0]%360*Nn,u=ae[1]%360*Nn,c=ae.length>2?ae[2]%360*Nn:0,ne()):[o*Pr,u*Pr,c*Pr]},$.angle=function(ae){return arguments.length?(g=ae%360*Nn,ne()):g*Pr},$.reflectX=function(ae){return arguments.length?(y=ae?-1:1,ne()):y<0},$.reflectY=function(ae){return arguments.length?(q=ae?-1:1,ne()):q<0},$.precision=function(ae){return arguments.length?(I=uM(z,F=ae*ae),ue()):Mc(F)},$.fitExtent=function(ae,W){return EP($,ae,W)},$.fitSize=function(ae,W){return EY($,ae,W)},$.fitWidth=function(ae,W){return MY($,ae,W)},$.fitHeight=function(ae,W){return RY($,ae,W)};function ne(){var ae=cM(t,0,0,y,q,g).apply(null,e(s,a)),W=cM(t,n-ae[0],r-ae[1],y,q,g);return p=xP(o,u,c),z=xv(e,W),j=xv(p,z),I=uM(z,F),ue()}function ue(){return k=G=null,$}return function(){return e=i.apply(this,arguments),$.invert=e.invert&&te,ne()}}function IY(i){return function(e,t){var n=Mc(e*e+t*t),r=i(n),s=Sn(r),a=Fn(r);return[Zo(e*s,n*a),Rc(n&&t*s/n)]}}function Cx(i,e){return[i,jQ($Q((Ua+e)/2))]}Cx.invert=function(i,e){return[i,2*Tx(HQ(e))-Ua]};function MP(i,e){var t=Fn(e),n=1+Fn(i)*t;return[t*Sn(i)/n,Sn(e)/n]}MP.invert=IY(function(i){return 2*Tx(i)});function FY(){return OY(MP).scale(250).clipAngle(142)}function Ev(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function kY(i){if(Array.isArray(i))return i}function zY(i){if(Array.isArray(i))return Ev(i)}function qp(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function GY(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function VY(i,e,t){return e=k8(e),JY(i,CP()?Reflect.construct(e,[],k8(i).constructor):e.apply(i,t))}function RP(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function HY(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function ti(i,e){return i.get(qp(i,e))}function y1(i,e,t){RP(i,e),e.set(i,t)}function x1(i,e,t){return i.set(qp(i,e),t),t}function jY(i,e){RP(i,e),e.add(i)}function WY(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,PP(n.key),n)}}function $Y(i,e,t){return WY(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Pf(i,e,t){return(e=PP(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function k8(i){return k8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k8(i)}function XY(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Mv(i,e)}function CP(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CP=function(){return!!i})()}function QY(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function YY(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],u=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(u=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(p){c=!0,r=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function KY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JY(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GY(i)}function Mv(i,e){return Mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Mv(i,e)}function Z6(i,e){return kY(i)||YY(i,e)||DP(i,e)||KY()}function NP(i){return zY(i)||QY(i)||DP(i)||ZY()}function eK(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function PP(i){var e=eK(i,"string");return typeof e=="symbol"?e:e+""}function DP(i,e){if(i){if(typeof i=="string")return Ev(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ev(i,e):void 0}}var LP=function(e){e instanceof Array?e.forEach(LP):(e.map&&e.map.dispose(),e.dispose())},UP=function(e){e.geometry&&e.geometry.dispose(),e.material&&LP(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(UP)},hM=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),UP(t)}};function OP(i,e,t){var n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return{x:t*Math.sin(n)*Math.cos(r),y:t*Math.cos(n),z:t*Math.sin(n)*Math.sin(r)}}function tK(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),a=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-a*180/Math.PI-(a<-Math.PI/2?360:0),r}}function C0(i){return i*Math.PI/180}var BP=function(e){return 1-(Cx(0,(.5-e)*Math.PI)[1]/Math.PI+1)/2},Ug=function(e){return Math.max(0,Math.min(1,BP(e)))},fM=function(e){return .5-Cx.invert(0,(2*(1-e)-1)*Math.PI)[1]/Math.PI},nK=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=Ec().domain([1,0]).range([t,n]).clamp(!0),s=Ec().domain([Ug(t),Ug(n)]).range([1,0]).clamp(!0),a=function(g){return s(Ug(r(g)))},o=e.array,u=0,c=o.length;u<c;u+=2)o[u+1]=a(o[u+1]);e.needsUpdate=!0},dM=function(e,t,n,r){var s=Math.pow(2,e),a=Math.max(0,Math.min(s-1,Math.floor((n+180)*s/360))),o=(90-r)/180;t&&(o=Math.max(0,Math.min(1,BP(o))));var u=Math.floor(o*s);return[a,u]},Rv=function(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,o=[],u=Math.pow(2,e),c=360/u,p=180/u,g=s===void 0?u-1:s,y=a===void 0?u-1:a,q=n,S=Math.min(u-1,g);q<=S;q++)for(var R=r,M=Math.min(u-1,y);R<=M;R++){var E=R,U=p;if(t){E=R===0?R:fM(R/u)*u;var P=R+1===u?R+1:fM((R+1)/u)*u;U=(P-E)*180/u}var O=-180+(q+.5)*c,F=90-(E*180/u+U/2),I=U;o.push({x:q,y:R,lng:O,lat:F,latLen:I})}return o},iK=6,rK=7,sK=3,aK=90,nu=new WeakMap,P1=new WeakMap,Og=new WeakMap,t6=new WeakMap,zo=new WeakMap,z8=new WeakMap,Sd=new WeakMap,N0=new WeakMap,n6=new WeakSet,oK=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.tileUrl,a=r.minLevel,o=a===void 0?0:a,u=r.maxLevel,c=u===void 0?17:u,p=r.mercatorProjection,g=p===void 0?!0:p;return HY(this,e),n=VY(this,e),jY(n,n6),y1(n,nu,void 0),y1(n,P1,void 0),y1(n,Og,void 0),y1(n,t6,void 0),y1(n,zo,{}),y1(n,z8,void 0),y1(n,Sd,void 0),y1(n,N0,void 0),Pf(n,"minLevel",void 0),Pf(n,"maxLevel",void 0),Pf(n,"thresholds",NP(new Array(30)).map(function(y,q){return 8/Math.pow(2,q)})),Pf(n,"curvatureResolution",5),Pf(n,"tileMargin",0),Pf(n,"clearTiles",function(){Object.values(ti(zo,n)).forEach(function(y){y.forEach(function(q){q.obj&&(n.remove(q.obj),hM(q.obj),delete q.obj)})}),x1(zo,n,{})}),x1(nu,n,t),n.tileUrl=s,x1(P1,n,g),n.minLevel=o,n.maxLevel=c,n.level=0,n.add(x1(N0,n,new yi(new Mu(ti(nu,n)*.99,180,90),new jo({color:0})))),ti(N0,n).visible=!1,ti(N0,n).material.polygonOffset=!0,ti(N0,n).material.polygonOffsetUnits=3,ti(N0,n).material.polygonOffsetFactor=1,n}return XY(e,i),$Y(e,[{key:"tileUrl",get:function(){return ti(Og,this)},set:function(n){x1(Og,this,n),this.updatePov(ti(Sd,this))}},{key:"level",get:function(){return ti(t6,this)},set:function(n){var r=this;ti(zo,this)[n]||qp(n6,this,lK).call(this,n);var s=ti(t6,this);if(x1(t6,this,n),!(n===s||s===void 0)){if(ti(N0,this).visible=n>0,ti(zo,this)[n].forEach(function(o){return o.obj&&(o.obj.material.depthWrite=!0)}),s<n&&ti(zo,this)[s].forEach(function(o){return o.obj&&(o.obj.material.depthWrite=!1)}),s>n)for(var a=n+1;a<=s;a++)ti(zo,this)[a]&&ti(zo,this)[a].forEach(function(o){o.obj&&(r.remove(o.obj),hM(o.obj),delete o.obj)});qp(n6,this,AM).call(this)}}},{key:"updatePov",value:function(n){var r=this;if(!(!n||!(n instanceof P3))){x1(Sd,this,n);var s;if(x1(z8,this,function(p){if(!p.hullPnts){var g=360/Math.pow(2,r.level),y=p.lng,q=p.lat,S=p.latLen,R=y-g/2,M=y+g/2,E=q-S/2,U=q+S/2;p.hullPnts=[[q,y],[E,R],[U,R],[E,M],[U,M]].map(function(P){var O=Z6(P,2),F=O[0],I=O[1];return OP(F,I,ti(nu,r))}).map(function(P){var O=P.x,F=P.y,I=P.z;return new le(O,F,I)})}return s||(s=new D3,n.updateMatrix(),n.updateMatrixWorld(),s.setFromProjectionMatrix(new yn().multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse))),p.hullPnts.some(function(P){return s.containsPoint(P.clone().applyMatrix4(r.matrixWorld))})}),this.tileUrl){var a=n.position.clone(),o=a.distanceTo(this.getWorldPosition(new le)),u=(o-ti(nu,this))/ti(nu,this),c=this.thresholds.findIndex(function(p){return p&&p<=u});this.level=Math.min(this.maxLevel,Math.max(this.minLevel,c<0?this.thresholds.length:c)),qp(n6,this,AM).call(this)}}}}])}(Da);function lK(i){var e=this;if(i>rK){ti(zo,this)[i]=[];return}var t=ti(zo,this)[i]=Rv(i,ti(P1,this));t.forEach(function(n){return n.centroid=OP(n.lat,n.lng,ti(nu,e))}),t.octree=QN().x(function(n){return n.centroid.x}).y(function(n){return n.centroid.y}).z(function(n){return n.centroid.z}).addAll(t)}function AM(){var i=this;if(!(!this.tileUrl||this.level===void 0||!ti(zo,this).hasOwnProperty(this.level))&&!(!ti(z8,this)&&this.level>iK)){var e=ti(zo,this)[this.level];if(ti(Sd,this)){var t=this.worldToLocal(ti(Sd,this).position.clone());if(e.octree){var n,r=this.worldToLocal(ti(Sd,this).position.clone()),s=(r.length()-ti(nu,this))*sK;e=(n=e.octree).findAllWithinRadius.apply(n,NP(r).concat([s]))}else{var a=tK(t),o=(a.r/ti(nu,this)-1)*aK,u=o/Math.cos(C0(a.lat)),c=[a.lng-u,a.lng+u],p=[a.lat+o,a.lat-o],g=dM(this.level,ti(P1,this),c[0],p[0]),y=Z6(g,2),q=y[0],S=y[1],R=dM(this.level,ti(P1,this),c[1],p[1]),M=Z6(R,2),E=M[0],U=M[1];!e.record&&(e.record={});var P=e.record;if(!P.hasOwnProperty("".concat(Math.round((q+E)/2),"_").concat(Math.round((S+U)/2))))e=Rv(this.level,ti(P1,this),q,S,E,U).map(function(j){var k="".concat(j.x,"_").concat(j.y);return P.hasOwnProperty(k)?P[k]:(P[k]=j,e.push(j),j)});else{for(var O=[],F=q;F<=E;F++)for(var I=S;I<=U;I++){var z="".concat(F,"_").concat(I);P.hasOwnProperty(z)||(P[z]=Rv(this.level,ti(P1,this),F,I,F,I)[0],e.push(P[z])),O.push(P[z])}e=O}}}e.filter(function(j){return!j.obj}).filter(ti(z8,this)||function(){return!0}).forEach(function(j){var k=j.x,G=j.y,$=j.lng,te=j.lat,ne=j.latLen,ue=360/Math.pow(2,i.level);if(!j.obj){var ae=ue*(1-i.tileMargin),W=ne*(1-i.tileMargin),J=C0($),re=C0(-te),ge=new yi(new Mu(ti(nu,i),Math.ceil(ae/i.curvatureResolution),Math.ceil(W/i.curvatureResolution),C0(90-ae/2)+J,C0(ae),C0(90-W/2)+re,C0(W)),new Oc);if(ti(P1,i)){var Y=[te+ne/2,te-ne/2].map(function(be){return .5-be/180}),me=Z6(Y,2),Me=me[0],Be=me[1];nK(ge.geometry.attributes.uv,Me,Be)}j.obj=ge}j.loading||(j.loading=!0,new mx().load(i.tileUrl(k,G,i.level),function(be){var Fe=j.obj;Fe&&(be.colorSpace=nn,Fe.material.map=be,Fe.material.color=null,Fe.material.needsUpdate=!0,i.add(Fe)),j.loading=!1}))})}}function uK(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=IP(i,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,u,c;if(n&&(s=AK(i,e,s,t)),i.length>80*t){o=1/0,u=1/0;let p=-1/0,g=-1/0;for(let y=t;y<r;y+=t){const q=i[y],S=i[y+1];q<o&&(o=q),S<u&&(u=S),q>p&&(p=q),S>g&&(g=S)}c=Math.max(p-o,g-u),c=c!==0?32767/c:0}return o3(s,a,t,o,u,c,0),a}function IP(i,e,t,n,r){let s;if(r===TK(i,e,t,n)>0)for(let a=e;a<t;a+=n)s=pM(a/n|0,i[a],i[a+1],s);else for(let a=t-n;a>=e;a-=n)s=pM(a/n|0,i[a],i[a+1],s);return s&&nA(s,s.next)&&(u3(s),s=s.next),s}function xh(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(nA(t,t.next)||Tr(t.prev,t,t.next)===0)){if(u3(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function o3(i,e,t,n,r,s,a){if(!i)return;!a&&s&&vK(i,n,r,s);let o=i;for(;i.prev!==i.next;){const u=i.prev,c=i.next;if(s?hK(i,n,r,s):cK(i)){e.push(u.i,i.i,c.i),u3(i),i=c.next,o=c.next;continue}if(i=c,i===o){a?a===1?(i=fK(xh(i),e),o3(i,e,t,n,r,s,2)):a===2&&dK(i,e,t,n,r,s):o3(xh(i),e,t,n,r,s,1);break}}}function cK(i){const e=i.prev,t=i,n=i.next;if(Tr(e,t,n)>=0)return!1;const r=e.x,s=t.x,a=n.x,o=e.y,u=t.y,c=n.y,p=Math.min(r,s,a),g=Math.min(o,u,c),y=Math.max(r,s,a),q=Math.max(o,u,c);let S=n.next;for(;S!==e;){if(S.x>=p&&S.x<=y&&S.y>=g&&S.y<=q&&hp(r,o,s,u,a,c,S.x,S.y)&&Tr(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function hK(i,e,t,n){const r=i.prev,s=i,a=i.next;if(Tr(r,s,a)>=0)return!1;const o=r.x,u=s.x,c=a.x,p=r.y,g=s.y,y=a.y,q=Math.min(o,u,c),S=Math.min(p,g,y),R=Math.max(o,u,c),M=Math.max(p,g,y),E=Cv(q,S,e,t,n),U=Cv(R,M,e,t,n);let P=i.prevZ,O=i.nextZ;for(;P&&P.z>=E&&O&&O.z<=U;){if(P.x>=q&&P.x<=R&&P.y>=S&&P.y<=M&&P!==r&&P!==a&&hp(o,p,u,g,c,y,P.x,P.y)&&Tr(P.prev,P,P.next)>=0||(P=P.prevZ,O.x>=q&&O.x<=R&&O.y>=S&&O.y<=M&&O!==r&&O!==a&&hp(o,p,u,g,c,y,O.x,O.y)&&Tr(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;P&&P.z>=E;){if(P.x>=q&&P.x<=R&&P.y>=S&&P.y<=M&&P!==r&&P!==a&&hp(o,p,u,g,c,y,P.x,P.y)&&Tr(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;O&&O.z<=U;){if(O.x>=q&&O.x<=R&&O.y>=S&&O.y<=M&&O!==r&&O!==a&&hp(o,p,u,g,c,y,O.x,O.y)&&Tr(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function fK(i,e){let t=i;do{const n=t.prev,r=t.next.next;!nA(n,r)&&kP(n,t,t.next,r)&&l3(n,r)&&l3(r,n)&&(e.push(n.i,t.i,r.i),u3(t),u3(t.next),t=i=r),t=t.next}while(t!==i);return xh(t)}function dK(i,e,t,n,r,s){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&qK(a,o)){let u=zP(a,o);a=xh(a,a.next),u=xh(u,u.next),o3(a,e,t,n,r,s,0),o3(u,e,t,n,r,s,0);return}o=o.next}a=a.next}while(a!==i)}function AK(i,e,t,n){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*n,u=s<a-1?e[s+1]*n:i.length,c=IP(i,o,u,n,!1);c===c.next&&(c.steiner=!0),r.push(xK(c))}r.sort(pK);for(let s=0;s<r.length;s++)t=mK(r[s],t);return t}function pK(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function mK(i,e){const t=gK(i,e);if(!t)return e;const n=zP(t,i);return xh(n,n.next),xh(t,t.next)}function gK(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,a;if(nA(i,t))return t;do{if(nA(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const g=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=n&&g>s&&(s=g,a=t.x<t.next.x?t:t.next,g===n))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,u=a.x,c=a.y;let p=1/0;t=a;do{if(n>=t.x&&t.x>=u&&n!==t.x&&FP(r<c?n:s,r,u,c,r<c?s:n,r,t.x,t.y)){const g=Math.abs(r-t.y)/(n-t.x);l3(t,i)&&(g<p||g===p&&(t.x>a.x||t.x===a.x&&_K(a,t)))&&(a=t,p=g)}t=t.next}while(t!==o);return a}function _K(i,e){return Tr(i.prev,i,e.prev)<0&&Tr(e.next,i,i.next)<0}function vK(i,e,t,n){let r=i;do r.z===0&&(r.z=Cv(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,yK(r)}function yK(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let a=n,o=0;for(let c=0;c<t&&(o++,a=a.nextZ,!!a);c++);let u=t;for(;o>0||u>0&&a;)o!==0&&(u===0||!a||n.z<=a.z)?(r=n,n=n.nextZ,o--):(r=a,a=a.nextZ,u--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=a}s.nextZ=null,t*=2}while(e>1);return i}function Cv(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function xK(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function FP(i,e,t,n,r,s,a,o){return(r-a)*(e-o)>=(i-a)*(s-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(n-o)}function hp(i,e,t,n,r,s,a,o){return!(i===a&&e===o)&&FP(i,e,t,n,r,s,a,o)}function qK(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!bK(i,e)&&(l3(i,e)&&l3(e,i)&&SK(i,e)&&(Tr(i.prev,i,e.prev)||Tr(i,e.prev,e))||nA(i,e)&&Tr(i.prev,i,i.next)>0&&Tr(e.prev,e,e.next)>0)}function Tr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function nA(i,e){return i.x===e.x&&i.y===e.y}function kP(i,e,t,n){const r=r6(Tr(i,e,t)),s=r6(Tr(i,e,n)),a=r6(Tr(t,n,i)),o=r6(Tr(t,n,e));return!!(r!==s&&a!==o||r===0&&i6(i,t,e)||s===0&&i6(i,n,e)||a===0&&i6(t,i,n)||o===0&&i6(t,e,n))}function i6(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function r6(i){return i>0?1:i<0?-1:0}function bK(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&kP(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function l3(i,e){return Tr(i.prev,i,i.next)<0?Tr(i,e,i.next)>=0&&Tr(i,i.prev,e)>=0:Tr(i,e,i.prev)<0||Tr(i,i.next,e)<0}function SK(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function zP(i,e){const t=Nv(i.i,i.x,i.y),n=Nv(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function pM(i,e,t,n){const r=Nv(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function u3(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Nv(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function TK(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}function G8(i){const e=[],t=[],n=i[0][0].length;let r=0,s=0;for(const a of i){for(const o of a)for(let u=0;u<n;u++)e.push(o[u]);s&&(r+=s,t.push(r)),s=a.length}return{vertices:e,holes:t,dimensions:n}}function Pv(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function wK(i){if(Array.isArray(i))return i}function EK(i){if(Array.isArray(i))return Pv(i)}function MK(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function RK(i,e,t){return e=V8(e),IK(i,GP()?Reflect.construct(e,[],V8(i).constructor):e.apply(i,t))}function CK(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function NK(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function PK(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=Nx(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{a||t.return==null||t.return()}finally{if(o)throw s}}}}function V8(i){return V8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V8(i)}function DK(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Dv(i,e)}function GP(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GP=function(){return!!i})()}function LK(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function UK(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],u=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(p){c=!0,r=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function OK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IK(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MK(i)}function Dv(i,e){return Dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Dv(i,e)}function B2(i,e){return wK(i)||UK(i,e)||Nx(i,e)||OK()}function FK(i){return EK(i)||LK(i)||Nx(i)||BK()}function Nx(i,e){if(i){if(typeof i=="string")return Pv(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pv(i,e):void 0}}var mM=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=[],r=null;return e.forEach(function(s){if(r){var a=Q1(s,r)*180/Math.PI;if(a>t)for(var o=Ex(r,s),u=r.length>2||s.length>2?s3(r[2]||0,s[2]||0):null,c=u?function(y){return[].concat(FK(o(y)),[u(y)])}:o,p=1/Math.ceil(a/t),g=p;g<1;)n.push(c(g)),g+=p}n.push(r=s)}),n},Lv=typeof window<"u"&&window.THREE?window.THREE:{BufferGeometry:Ii,Float32BufferAttribute:mi},kK=new Lv.BufferGeometry().setAttribute?"setAttribute":"addAttribute",VP=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;CK(this,e),n=RK(this,e),n.type="GeoJsonGeometry",n.parameters={geoJson:t,radius:r,resolution:s};var a=({Point:p,MultiPoint:g,LineString:y,MultiLineString:q,Polygon:S,MultiPolygon:R}[t.type]||function(){return[]})(t.coordinates,r),o=[],u=[],c=0;a.forEach(function(M){var E=o.length;I2({indices:o,vertices:u},M),n.addGroup(E,o.length-E,c++)}),o.length&&n.setIndex(o),u.length&&n[kK]("position",new Lv.Float32BufferAttribute(u,3));function p(M,E){var U=Bg(M[1],M[0],E+(M[2]||0)),P=[];return[{vertices:U,indices:P}]}function g(M,E){var U={vertices:[],indices:[]};return M.map(function(P){return p(P,E)}).forEach(function(P){var O=B2(P,1),F=O[0];I2(U,F)}),[U]}function y(M,E){for(var U=mM(M,s).map(function(j){var k=B2(j,3),G=k[0],$=k[1],te=k[2],ne=te===void 0?0:te;return Bg($,G,E+ne)}),P=G8([U]),O=P.vertices,F=Math.round(O.length/3),I=[],z=1;z<F;z++)I.push(z-1,z);return[{vertices:O,indices:I}]}function q(M,E){var U={vertices:[],indices:[]};return M.map(function(P){return y(P,E)}).forEach(function(P){var O=B2(P,1),F=O[0];I2(U,F)}),[U]}function S(M,E){for(var U=M.map(function(ae){return mM(ae,s).map(function(W){var J=B2(W,3),re=J[0],ge=J[1],Y=J[2],me=Y===void 0?0:Y;return Bg(ge,re,E+me)})}),P=G8(U),O=P.vertices,F=P.holes,I=F[0]||1/0,z=O.slice(0,I*3),j=O.slice(I*3),k=new Set(F),G=Math.round(O.length/3),$=[],te=[],ne=1;ne<G;ne++)k.has(ne)||(ne<I?$.push(ne-1,ne):te.push(ne-1-I,ne-I));var ue=[{indices:$,vertices:z}];return F.length&&ue.push({indices:te,vertices:j}),ue}function R(M,E){var U={vertices:[],indices:[]},P={vertices:[],indices:[]};M.map(function(F){return S(F,E)}).forEach(function(F){var I=B2(F,2),z=I[0],j=I[1];I2(U,z),j&&I2(P,j)});var O=[U];return P.vertices.length&&O.push(P),O}return n}return DK(e,i),NK(e)}(Lv.BufferGeometry);function I2(i,e){var t=Math.round(i.vertices.length/3);gM(i.vertices,e.vertices),gM(i.indices,e.indices.map(function(n){return n+t}))}function gM(i,e){var t=PK(e),n;try{for(t.s();!(n=t.n()).done;){var r=n.value;i.push(r)}}catch(s){t.e(s)}finally{t.f()}}function Bg(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function zK(i,e,t=!0){if(!e||!e.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!i.hasAttribute("position")||!i.hasAttribute("normal")||!i.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function n(a){if(a.normalized||a.isInterleavedBufferAttribute){const o=new Float32Array(a.count*a.itemSize);for(let u=0,c=0;u<a.count;u++)o[c++]=a.getX(u),o[c++]=a.getY(u),a.itemSize>2&&(o[c++]=a.getZ(u));return o}return a.array instanceof Float32Array?a.array:new Float32Array(a.array)}const r=i.index?i.toNonIndexed():i,s=e.generateTangents(n(r.attributes.position),n(r.attributes.normal),n(r.attributes.uv));if(t)for(let a=3;a<s.length;a+=4)s[a]*=-1;return r.setAttribute("tangent",new _r(s,4)),i!==r&&i.copy(r),i}function GK(i,e=!1){const t=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),r=new Set(Object.keys(i[0].morphAttributes)),s={},a={},o=i[0].morphTargetsRelative,u=new Ii;let c=0;for(let p=0;p<i.length;++p){const g=i[p];let y=0;if(t!==(g.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+p+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const q in g.attributes){if(!n.has(q))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+p+'. All geometries must have compatible attributes; make sure "'+q+'" attribute exists among all geometries, or in none of them.'),null;s[q]===void 0&&(s[q]=[]),s[q].push(g.attributes[q]),y++}if(y!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+p+". Make sure all geometries have the same number of attributes."),null;if(o!==g.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+p+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const q in g.morphAttributes){if(!r.has(q))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+p+".  .morphAttributes must be consistent throughout all geometries."),null;a[q]===void 0&&(a[q]=[]),a[q].push(g.morphAttributes[q])}if(e){let q;if(t)q=g.index.count;else if(g.attributes.position!==void 0)q=g.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+p+". The geometry must have either an index or a position attribute"),null;u.addGroup(c,q,p),c+=q}}if(t){let p=0;const g=[];for(let y=0;y<i.length;++y){const q=i[y].index;for(let S=0;S<q.count;++S)g.push(q.getX(S)+p);p+=i[y].attributes.position.count}u.setIndex(g)}for(const p in s){const g=Uv(s[p]);if(!g)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+p+" attribute."),null;u.setAttribute(p,g)}for(const p in a){const g=a[p][0].length;if(g===0)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[p]=[];for(let y=0;y<g;++y){const q=[];for(let R=0;R<a[p].length;++R)q.push(a[p][R][y]);const S=Uv(q);if(!S)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+p+" morphAttribute."),null;u.morphAttributes[p].push(S)}}return u}function Uv(i){let e,t,n,r=-1,s=0;for(let c=0;c<i.length;++c){const p=i[c];if(e===void 0&&(e=p.array.constructor),e!==p.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=p.itemSize),t!==p.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=p.normalized),n!==p.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=p.gpuType),r!==p.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;s+=p.count*t}const a=new e(s),o=new _r(a,t,n);let u=0;for(let c=0;c<i.length;++c){const p=i[c];if(p.isInterleavedBufferAttribute){const g=u/t;for(let y=0,q=p.count;y<q;y++)for(let S=0;S<t;S++){const R=p.getComponent(y,S);o.setComponent(y+g,S,R)}}else a.set(p.array,u);u+=p.count*t}return r!==void 0&&(o.gpuType=r),o}function VK(i){return i.isInstancedInterleavedBufferAttribute||i.isInterleavedBufferAttribute?H8(i):i.isInstancedBufferAttribute?new G1().copy(i):new _r().copy(i)}function HK(i){let e,t=0,n=0;for(let c=0,p=i.length;c<p;++c){const g=i[c];if(e===void 0&&(e=g.array.constructor),e!==g.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;t+=g.array.length,n+=g.itemSize}const r=new cx(new e(t),n);let s=0;const a=[],o=["getX","getY","getZ","getW"],u=["setX","setY","setZ","setW"];for(let c=0,p=i.length;c<p;c++){const g=i[c],y=g.itemSize,q=g.count,S=new ou(r,y,s,g.normalized);a.push(S),s+=y;for(let R=0;R<q;R++)for(let M=0;M<y;M++)S[u[M]](R,g[o[M]](R))}return a}function H8(i){const e=i.data.array.constructor,t=i.count,n=i.itemSize,r=i.normalized,s=new e(t*n);let a;i.isInstancedInterleavedBufferAttribute?a=new G1(s,n,r,i.meshPerAttribute):a=new _r(s,n,r);for(let o=0;o<t;o++)a.setX(o,i.getX(o)),n>=2&&a.setY(o,i.getY(o)),n>=3&&a.setZ(o,i.getZ(o)),n>=4&&a.setW(o,i.getW(o));return a}function jK(i){const e=i.attributes,t=i.morphTargets,n=new Map;for(const r in e){const s=e[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,H8(s)),e[r]=n.get(s))}for(const r in t){const s=t[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,H8(s)),t[r]=n.get(s))}}function WK(i){let e=0;for(const n in i.attributes){const r=i.getAttribute(n);e+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const t=i.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}function $K(i,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},n=i.getIndex(),r=i.getAttribute("position"),s=n?n.count:r.count;let a=0;const o=Object.keys(i.attributes),u={},c={},p=[],g=["getX","getY","getZ","getW"],y=["setX","setY","setZ","setW"];for(let U=0,P=o.length;U<P;U++){const O=o[U],F=i.attributes[O];u[O]=new F.constructor(new F.array.constructor(F.count*F.itemSize),F.itemSize,F.normalized);const I=i.morphAttributes[O];I&&(c[O]||(c[O]=[]),I.forEach((z,j)=>{const k=new z.array.constructor(z.count*z.itemSize);c[O][j]=new z.constructor(k,z.itemSize,z.normalized)}))}const q=e*.5,S=Math.log10(1/e),R=Math.pow(10,S),M=q*R;for(let U=0;U<s;U++){const P=n?n.getX(U):U;let O="";for(let F=0,I=o.length;F<I;F++){const z=o[F],j=i.getAttribute(z),k=j.itemSize;for(let G=0;G<k;G++)O+=`${~~(j[g[G]](P)*R+M)},`}if(O in t)p.push(t[O]);else{for(let F=0,I=o.length;F<I;F++){const z=o[F],j=i.getAttribute(z),k=i.morphAttributes[z],G=j.itemSize,$=u[z],te=c[z];for(let ne=0;ne<G;ne++){const ue=g[ne],ae=y[ne];if($[ae](a,j[ue](P)),k)for(let W=0,J=k.length;W<J;W++)te[W][ae](a,k[W][ue](P))}}t[O]=a,p.push(a),a++}}const E=i.clone();for(const U in i.attributes){const P=u[U];if(E.setAttribute(U,new P.constructor(P.array.slice(0,a*P.itemSize),P.itemSize,P.normalized)),U in c)for(let O=0;O<c[U].length;O++){const F=c[U][O];E.morphAttributes[U][O]=new F.constructor(F.array.slice(0,a*F.itemSize),F.itemSize,F.normalized)}}return E.setIndex(p),E}function XK(i,e){if(e===$k)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===nw||e===Xk){let t=i.getIndex();if(t===null){const a=[],o=i.getAttribute("position");if(o!==void 0){for(let u=0;u<o.count;u++)a.push(u);i.setIndex(a),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===nw)for(let a=1;a<=n;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}function QK(i){const e=new le,t=new le,n=new le,r=new le,s=new le,a=new le,o=new le,u=new le,c=new le;function p(ge,Y,me,Me,Be,be,Fe,$e){e.fromBufferAttribute(Y,Be),t.fromBufferAttribute(Y,be),n.fromBufferAttribute(Y,Fe);const ht=ge.morphTargetInfluences;if(me&&ht){o.set(0,0,0),u.set(0,0,0),c.set(0,0,0);for(let wt=0,kt=me.length;wt<kt;wt++){const Ct=ht[wt],Kt=me[wt];Ct!==0&&(r.fromBufferAttribute(Kt,Be),s.fromBufferAttribute(Kt,be),a.fromBufferAttribute(Kt,Fe),Me?(o.addScaledVector(r,Ct),u.addScaledVector(s,Ct),c.addScaledVector(a,Ct)):(o.addScaledVector(r.sub(e),Ct),u.addScaledVector(s.sub(t),Ct),c.addScaledVector(a.sub(n),Ct)))}e.add(o),t.add(u),n.add(c)}ge.isSkinnedMesh&&(ge.applyBoneTransform(Be,e),ge.applyBoneTransform(be,t),ge.applyBoneTransform(Fe,n)),$e[Be*3+0]=e.x,$e[Be*3+1]=e.y,$e[Be*3+2]=e.z,$e[be*3+0]=t.x,$e[be*3+1]=t.y,$e[be*3+2]=t.z,$e[Fe*3+0]=n.x,$e[Fe*3+1]=n.y,$e[Fe*3+2]=n.z}const g=i.geometry,y=i.material;let q,S,R;const M=g.index,E=g.attributes.position,U=g.morphAttributes.position,P=g.morphTargetsRelative,O=g.attributes.normal,F=g.morphAttributes.position,I=g.groups,z=g.drawRange;let j,k,G,$,te,ne,ue;const ae=new Float32Array(E.count*E.itemSize),W=new Float32Array(O.count*O.itemSize);if(M!==null)if(Array.isArray(y))for(j=0,G=I.length;j<G;j++)for(te=I[j],ne=Math.max(te.start,z.start),ue=Math.min(te.start+te.count,z.start+z.count),k=ne,$=ue;k<$;k+=3)q=M.getX(k),S=M.getX(k+1),R=M.getX(k+2),p(i,E,U,P,q,S,R,ae),p(i,O,F,P,q,S,R,W);else for(ne=Math.max(0,z.start),ue=Math.min(M.count,z.start+z.count),j=ne,G=ue;j<G;j+=3)q=M.getX(j),S=M.getX(j+1),R=M.getX(j+2),p(i,E,U,P,q,S,R,ae),p(i,O,F,P,q,S,R,W);else if(Array.isArray(y))for(j=0,G=I.length;j<G;j++)for(te=I[j],ne=Math.max(te.start,z.start),ue=Math.min(te.start+te.count,z.start+z.count),k=ne,$=ue;k<$;k+=3)q=k,S=k+1,R=k+2,p(i,E,U,P,q,S,R,ae),p(i,O,F,P,q,S,R,W);else for(ne=Math.max(0,z.start),ue=Math.min(E.count,z.start+z.count),j=ne,G=ue;j<G;j+=3)q=j,S=j+1,R=j+2,p(i,E,U,P,q,S,R,ae),p(i,O,F,P,q,S,R,W);const J=new mi(ae,3),re=new mi(W,3);return{positionAttribute:E,normalAttribute:O,morphedPositionAttribute:J,morphedNormalAttribute:re}}function YK(i){if(i.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),i;let e=i.groups;if(e=e.sort((a,o)=>a.materialIndex!==o.materialIndex?a.materialIndex-o.materialIndex:a.start-o.start),i.getIndex()===null){const a=i.getAttribute("position"),o=[];for(let u=0;u<a.count;u+=3)o.push(u,u+1,u+2);i.setIndex(o)}const t=i.getIndex(),n=[];for(let a=0;a<e.length;a++){const o=e[a],u=o.start,c=u+o.count;for(let p=u;p<c;p++)n.push(t.getX(p))}i.dispose(),i.setIndex(n);let r=0;for(let a=0;a<e.length;a++){const o=e[a];o.start=r,r+=o.count}let s=e[0];i.groups=[s];for(let a=1;a<e.length;a++){const o=e[a];s.materialIndex===o.materialIndex?s.count+=o.count:(s=o,i.groups.push(s))}return i}function KK(i,e=Math.PI/3){const t=Math.cos(e),n=(1+1e-10)*100,r=[new le,new le,new le],s=new le,a=new le,o=new le,u=new le;function c(R){const M=~~(R.x*n),E=~~(R.y*n),U=~~(R.z*n);return`${M},${E},${U}`}const p=i.index?i.toNonIndexed():i,g=p.attributes.position,y={};for(let R=0,M=g.count/3;R<M;R++){const E=3*R,U=r[0].fromBufferAttribute(g,E+0),P=r[1].fromBufferAttribute(g,E+1),O=r[2].fromBufferAttribute(g,E+2);s.subVectors(O,P),a.subVectors(U,P);const F=new le().crossVectors(s,a).normalize();for(let I=0;I<3;I++){const z=r[I],j=c(z);j in y||(y[j]=[]),y[j].push(F)}}const q=new Float32Array(g.count*3),S=new _r(q,3,!1);for(let R=0,M=g.count/3;R<M;R++){const E=3*R,U=r[0].fromBufferAttribute(g,E+0),P=r[1].fromBufferAttribute(g,E+1),O=r[2].fromBufferAttribute(g,E+2);s.subVectors(O,P),a.subVectors(U,P),o.crossVectors(s,a).normalize();for(let F=0;F<3;F++){const I=r[F],z=c(I),j=y[z];u.set(0,0,0);for(let k=0,G=j.length;k<G;k++){const $=j[k];o.dot($)>t&&u.add($)}u.normalize(),S.setXYZ(E+F,u.x,u.y,u.z)}}return p.setAttribute("normal",S),p}const Px=Object.freeze(Object.defineProperty({__proto__:null,computeMikkTSpaceTangents:zK,computeMorphedAttributes:QK,deepCloneAttribute:VK,deinterleaveAttribute:H8,deinterleaveGeometry:jK,estimateBytesUsed:WK,interleaveAttributes:HK,mergeAttributes:Uv,mergeGeometries:GK,mergeGroups:YK,mergeVertices:$K,toCreasedNormals:KK,toTrianglesDrawMode:XK},Symbol.toStringTag,{value:"Module"}));var _t=function(i){return typeof i=="function"?i:typeof i=="string"?function(e){return e[i]}:function(e){return i}};function j8(i){"@babel/helpers - typeof";return j8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j8(i)}var ZK=/^\s+/,JK=/\s+$/;function an(i,e){if(i=i||"",e=e||{},i instanceof an)return i;if(!(this instanceof an))return new an(i,e);var t=eZ(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}an.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,r,s,a,o;return t=e.r/255,n=e.g/255,r=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(e){return this._a=HP(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=vM(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=vM(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=_M(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=_M(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return yM(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return rZ(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(mr(this._r,255)*100)+"%",g:Math.round(mr(this._g,255)*100)+"%",b:Math.round(mr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(mr(this._r,255)*100)+"%, "+Math.round(mr(this._g,255)*100)+"%, "+Math.round(mr(this._b,255)*100)+"%)":"rgba("+Math.round(mr(this._r,255)*100)+"%, "+Math.round(mr(this._g,255)*100)+"%, "+Math.round(mr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:mZ[yM(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+xM(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var s=an(e);n="#"+xM(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,s=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return an(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(lZ,arguments)},brighten:function(){return this._applyModification(uZ,arguments)},darken:function(){return this._applyModification(cZ,arguments)},desaturate:function(){return this._applyModification(sZ,arguments)},saturate:function(){return this._applyModification(aZ,arguments)},greyscale:function(){return this._applyModification(oZ,arguments)},spin:function(){return this._applyModification(hZ,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(AZ,arguments)},complement:function(){return this._applyCombination(fZ,arguments)},monochromatic:function(){return this._applyCombination(pZ,arguments)},splitcomplement:function(){return this._applyCombination(dZ,arguments)},triad:function(){return this._applyCombination(qM,[3])},tetrad:function(){return this._applyCombination(qM,[4])}};an.fromRatio=function(i,e){if(j8(i)=="object"){var t={};for(var n in i)i.hasOwnProperty(n)&&(n==="a"?t[n]=i[n]:t[n]=fp(i[n]));i=t}return an(i,e)};function eZ(i){var e={r:0,g:0,b:0},t=1,n=null,r=null,s=null,a=!1,o=!1;return typeof i=="string"&&(i=yZ(i)),j8(i)=="object"&&(hc(i.r)&&hc(i.g)&&hc(i.b)?(e=tZ(i.r,i.g,i.b),a=!0,o=String(i.r).substr(-1)==="%"?"prgb":"rgb"):hc(i.h)&&hc(i.s)&&hc(i.v)?(n=fp(i.s),r=fp(i.v),e=iZ(i.h,n,r),a=!0,o="hsv"):hc(i.h)&&hc(i.s)&&hc(i.l)&&(n=fp(i.s),s=fp(i.l),e=nZ(i.h,n,s),a=!0,o="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=HP(t),{ok:a,format:i.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function tZ(i,e,t){return{r:mr(i,255)*255,g:mr(e,255)*255,b:mr(t,255)*255}}function _M(i,e,t){i=mr(i,255),e=mr(e,255),t=mr(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,a,o=(n+r)/2;if(n==r)s=a=0;else{var u=n-r;switch(a=o>.5?u/(2-n-r):u/(n+r),n){case i:s=(e-t)/u+(e<t?6:0);break;case e:s=(t-i)/u+2;break;case t:s=(i-e)/u+4;break}s/=6}return{h:s,s:a,l:o}}function nZ(i,e,t){var n,r,s;i=mr(i,360),e=mr(e,100),t=mr(t,100);function a(c,p,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?c+(p-c)*6*g:g<1/2?p:g<2/3?c+(p-c)*(2/3-g)*6:c}if(e===0)n=r=s=t;else{var o=t<.5?t*(1+e):t+e-t*e,u=2*t-o;n=a(u,o,i+1/3),r=a(u,o,i),s=a(u,o,i-1/3)}return{r:n*255,g:r*255,b:s*255}}function vM(i,e,t){i=mr(i,255),e=mr(e,255),t=mr(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,a,o=n,u=n-r;if(a=n===0?0:u/n,n==r)s=0;else{switch(n){case i:s=(e-t)/u+(e<t?6:0);break;case e:s=(t-i)/u+2;break;case t:s=(i-e)/u+4;break}s/=6}return{h:s,s:a,v:o}}function iZ(i,e,t){i=mr(i,360)*6,e=mr(e,100),t=mr(t,100);var n=Math.floor(i),r=i-n,s=t*(1-e),a=t*(1-r*e),o=t*(1-(1-r)*e),u=n%6,c=[t,a,s,s,o,t][u],p=[o,t,t,a,s,s][u],g=[s,s,o,t,t,a][u];return{r:c*255,g:p*255,b:g*255}}function yM(i,e,t,n){var r=[Cl(Math.round(i).toString(16)),Cl(Math.round(e).toString(16)),Cl(Math.round(t).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function rZ(i,e,t,n,r){var s=[Cl(Math.round(i).toString(16)),Cl(Math.round(e).toString(16)),Cl(Math.round(t).toString(16)),Cl(jP(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function xM(i,e,t,n){var r=[Cl(jP(n)),Cl(Math.round(i).toString(16)),Cl(Math.round(e).toString(16)),Cl(Math.round(t).toString(16))];return r.join("")}an.equals=function(i,e){return!i||!e?!1:an(i).toRgbString()==an(e).toRgbString()};an.random=function(){return an.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function sZ(i,e){e=e===0?0:e||10;var t=an(i).toHsl();return t.s-=e/100,t.s=N5(t.s),an(t)}function aZ(i,e){e=e===0?0:e||10;var t=an(i).toHsl();return t.s+=e/100,t.s=N5(t.s),an(t)}function oZ(i){return an(i).desaturate(100)}function lZ(i,e){e=e===0?0:e||10;var t=an(i).toHsl();return t.l+=e/100,t.l=N5(t.l),an(t)}function uZ(i,e){e=e===0?0:e||10;var t=an(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),an(t)}function cZ(i,e){e=e===0?0:e||10;var t=an(i).toHsl();return t.l-=e/100,t.l=N5(t.l),an(t)}function hZ(i,e){var t=an(i).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,an(t)}function fZ(i){var e=an(i).toHsl();return e.h=(e.h+180)%360,an(e)}function qM(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=an(i).toHsl(),n=[an(i)],r=360/e,s=1;s<e;s++)n.push(an({h:(t.h+s*r)%360,s:t.s,l:t.l}));return n}function dZ(i){var e=an(i).toHsl(),t=e.h;return[an(i),an({h:(t+72)%360,s:e.s,l:e.l}),an({h:(t+216)%360,s:e.s,l:e.l})]}function AZ(i,e,t){e=e||6,t=t||30;var n=an(i).toHsl(),r=360/t,s=[an(i)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,s.push(an(n));return s}function pZ(i,e){e=e||6;for(var t=an(i).toHsv(),n=t.h,r=t.s,s=t.v,a=[],o=1/e;e--;)a.push(an({h:n,s:r,v:s})),s=(s+o)%1;return a}an.mix=function(i,e,t){t=t===0?0:t||50;var n=an(i).toRgb(),r=an(e).toRgb(),s=t/100,a={r:(r.r-n.r)*s+n.r,g:(r.g-n.g)*s+n.g,b:(r.b-n.b)*s+n.b,a:(r.a-n.a)*s+n.a};return an(a)};an.readability=function(i,e){var t=an(i),n=an(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};an.isReadable=function(i,e,t){var n=an.readability(i,e),r,s;switch(s=!1,r=xZ(t),r.level+r.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};an.mostReadable=function(i,e,t){var n=null,r=0,s,a,o,u;t=t||{},a=t.includeFallbackColors,o=t.level,u=t.size;for(var c=0;c<e.length;c++)s=an.readability(i,e[c]),s>r&&(r=s,n=an(e[c]));return an.isReadable(i,n,{level:o,size:u})||!a?n:(t.includeFallbackColors=!1,an.mostReadable(i,["#fff","#000"],t))};var Ov=an.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},mZ=an.hexNames=gZ(Ov);function gZ(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function HP(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function mr(i,e){_Z(i)&&(i="100%");var t=vZ(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function N5(i){return Math.min(1,Math.max(0,i))}function uo(i){return parseInt(i,16)}function _Z(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function vZ(i){return typeof i=="string"&&i.indexOf("%")!=-1}function Cl(i){return i.length==1?"0"+i:""+i}function fp(i){return i<=1&&(i=i*100+"%"),i}function jP(i){return Math.round(parseFloat(i)*255).toString(16)}function bM(i){return uo(i)/255}var ql=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function hc(i){return!!ql.CSS_UNIT.exec(i)}function yZ(i){i=i.replace(ZK,"").replace(JK,"").toLowerCase();var e=!1;if(Ov[i])i=Ov[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=ql.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=ql.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=ql.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=ql.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=ql.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=ql.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=ql.hex8.exec(i))?{r:uo(t[1]),g:uo(t[2]),b:uo(t[3]),a:bM(t[4]),format:e?"name":"hex8"}:(t=ql.hex6.exec(i))?{r:uo(t[1]),g:uo(t[2]),b:uo(t[3]),format:e?"name":"hex"}:(t=ql.hex4.exec(i))?{r:uo(t[1]+""+t[1]),g:uo(t[2]+""+t[2]),b:uo(t[3]+""+t[3]),a:bM(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=ql.hex3.exec(i))?{r:uo(t[1]+""+t[1]),g:uo(t[2]+""+t[2]),b:uo(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function xZ(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}function Bv(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function qZ(i){if(Array.isArray(i))return i}function bZ(i){if(Array.isArray(i))return Bv(i)}function WP(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function SZ(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function TZ(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Ys(i,e){return i.get(WP(i,e))}function Df(i,e,t){SZ(i,e),e.set(i,t)}function s6(i,e,t){return i.set(WP(i,e),t),t}function wZ(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,UZ(n.key),n)}}function EZ(i,e,t){return e&&wZ(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function MZ(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function RZ(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],u=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(u=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(p){c=!0,r=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function CZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PZ(i,e){return qZ(i)||RZ(i,e)||$P(i,e)||CZ()}function DZ(i){return bZ(i)||MZ(i)||$P(i)||NZ()}function LZ(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function UZ(i){var e=LZ(i,"string");return typeof e=="symbol"?e:e+""}function $P(i,e){if(i){if(typeof i=="string")return Bv(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Bv(i,e):void 0}}var Lf=new WeakMap,F2=new WeakMap,Uf=new WeakMap,Ig=new WeakMap,Fg=new WeakMap,kg=new WeakMap,OZ=function(){function i(){TZ(this,i),Df(this,Lf,new Map),Df(this,F2,new Map),Df(this,Uf,function(e){return e}),Df(this,Ig,function(){return{}}),Df(this,Fg,function(){}),Df(this,kg,function(){})}return EZ(i,[{key:"getObj",value:function(t){return Ys(Lf,this).get(Ys(Uf,this).call(this,t))}},{key:"getData",value:function(t){return Ys(F2,this).get(t)}},{key:"entries",value:function(){return DZ(Ys(F2,this).entries()).map(function(t){var n=PZ(t,2),r=n[0],s=n[1];return[s,r]})}},{key:"id",value:function(t){return s6(Uf,this,_t(t)),this}},{key:"onCreateObj",value:function(t){return s6(Ig,this,t),this}},{key:"onUpdateObj",value:function(t){return s6(Fg,this,t),this}},{key:"onRemoveObj",value:function(t){return s6(kg,this,t),this}},{key:"digest",value:function(t){var n=this;t.filter(function(s){return!Ys(Lf,n).has(Ys(Uf,n).call(n,s))}).forEach(function(s){var a=Ys(Ig,n).call(n,s);Ys(Lf,n).set(Ys(Uf,n).call(n,s),a),Ys(F2,n).set(a,s)});var r=new Map(t.map(function(s){return[Ys(Uf,n).call(n,s),s]}));return Ys(Lf,this).forEach(function(s,a){r.has(a)?Ys(Fg,n).call(n,s,r.get(a)):(Ys(kg,n).call(n,s,a),Ys(Lf,n).delete(a),Ys(F2,n).delete(s))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])}(),J6={exports:{}},BZ=J6.exports,SM;function IZ(){return SM||(SM=1,function(i,e){(function(t,n){i.exports=n()})(BZ,function(){return function(t){function n(s){if(r[s])return r[s].exports;var a=r[s]={exports:{},id:s,loaded:!1};return t[s].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var r={};return n.m=t,n.c=r,n.p="",n(0)}([function(t,n,r){var s=r(1),a=function(){function o(u,c,p){u===void 0&&(u=NaN),c===void 0&&(c=NaN),p===void 0&&(p=!1),this._minFPS=c,this._maxFPS=u,this._timeScale=1,this._currentTick=0,this._currentTime=0,this._tickDeltaTime=0,this._isRunning=!1,this._maxInterval=isNaN(this._minFPS)?NaN:1e3/this._minFPS,this._minInterval=isNaN(this._maxFPS)?NaN:1e3/this._maxFPS,this._onResume=new s.default,this._onPause=new s.default,this._onTick=new s.default,this._onTickOncePerFrame=new s.default,p||this.resume()}return o.prototype.updateOnce=function(u){u(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},o.prototype.resume=function(){this._isRunning||(this._isRunning=!0,this._lastTimeUpdated=this.getTimer(),this._onResume.dispatch(),this.animateOnce())},o.prototype.pause=function(){this._isRunning&&(this._isRunning=!1,this._onPause.dispatch(),window.cancelAnimationFrame(this._animationFrameHandle))},o.prototype.dispose=function(){this.pause(),this._onResume.removeAll(),this._onPause.removeAll(),this._onTick.removeAll()},Object.defineProperty(o.prototype,"currentTick",{get:function(){return this._currentTick},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"currentTimeSeconds",{get:function(){return this._currentTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tickDeltaTimeSeconds",{get:function(){return this._tickDeltaTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timeScale",{get:function(){return this._timeScale},set:function(u){this._timeScale!==u&&(this._timeScale=u)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onResume",{get:function(){return this._onResume},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onPause",{get:function(){return this._onPause},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onTickOncePerFrame",{get:function(){return this._onTickOncePerFrame},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),o.prototype.animateOnce=function(){var u=this;this._animationFrameHandle=window.requestAnimationFrame(function(){return u.onFrame()})},o.prototype.onFrame=function(){if(this._now=this.getTimer(),this._frameDeltaTime=this._now-this._lastTimeUpdated,isNaN(this._minInterval)||this._frameDeltaTime>=this._minInterval)if(isNaN(this._maxInterval))this.update(this._frameDeltaTime*this._timeScale,!0),this._lastTimeUpdated=this._now;else for(this._interval=Math.min(this._frameDeltaTime,this._maxInterval);this._now>=this._lastTimeUpdated+this._interval;)this.update(this._interval*this._timeScale,this._now<=this._lastTimeUpdated+2*this._maxInterval),this._lastTimeUpdated+=this._interval;this._isRunning&&this.animateOnce()},o.prototype.update=function(u,c){c===void 0&&(c=!0),this._currentTick++,this._currentTime+=u,this._tickDeltaTime=u,this._onTick.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick),c&&this._onTickOncePerFrame.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},o.prototype.getTimer=function(){return Date.now()},o}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=a},function(t,n,r){(function(s,a){t.exports=a()})(this,function(){return function(s){function a(u){if(o[u])return o[u].exports;var c=o[u]={exports:{},id:u,loaded:!1};return s[u].call(c.exports,c,c.exports,a),c.loaded=!0,c.exports}var o={};return a.m=s,a.c=o,a.p="",a(0)}([function(s,a){var o=function(){function u(){this.functions=[]}return u.prototype.add=function(c){return this.functions.indexOf(c)===-1&&(this.functions.push(c),!0)},u.prototype.remove=function(c){var p=this.functions.indexOf(c);return p>-1&&(this.functions.splice(p,1),!0)},u.prototype.removeAll=function(){return this.functions.length>0&&(this.functions.length=0,!0)},u.prototype.dispatch=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];var g=this.functions.concat();g.forEach(function(y){y.apply(void 0,c)})},Object.defineProperty(u.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),u}();Object.defineProperty(a,"__esModule",{value:!0}),a.default=o}])})}])})}(J6)),J6.exports}var FZ=IZ();const iA=Py(FZ),bc=11102230246251565e-32,Ks=134217729,kZ=(3+8*bc)*bc;function zg(i,e,t,n,r){let s,a,o,u,c=e[0],p=n[0],g=0,y=0;p>c==p>-c?(s=c,c=e[++g]):(s=p,p=n[++y]);let q=0;if(g<i&&y<t)for(p>c==p>-c?(a=c+s,o=s-(a-c),c=e[++g]):(a=p+s,o=s-(a-p),p=n[++y]),s=a,o!==0&&(r[q++]=o);g<i&&y<t;)p>c==p>-c?(a=s+c,u=a-s,o=s-(a-u)+(c-u),c=e[++g]):(a=s+p,u=a-s,o=s-(a-u)+(p-u),p=n[++y]),s=a,o!==0&&(r[q++]=o);for(;g<i;)a=s+c,u=a-s,o=s-(a-u)+(c-u),c=e[++g],s=a,o!==0&&(r[q++]=o);for(;y<t;)a=s+p,u=a-s,o=s-(a-u)+(p-u),p=n[++y],s=a,o!==0&&(r[q++]=o);return(s!==0||q===0)&&(r[q++]=s),q}function zZ(i,e){let t=e[0];for(let n=1;n<i;n++)t+=e[n];return t}function F3(i){return new Float64Array(i)}const GZ=(3+16*bc)*bc,VZ=(2+12*bc)*bc,HZ=(9+64*bc)*bc*bc,Of=F3(4),TM=F3(8),wM=F3(12),EM=F3(16),ca=F3(4);function jZ(i,e,t,n,r,s,a){let o,u,c,p,g,y,q,S,R,M,E,U,P,O,F,I,z,j;const k=i-r,G=t-r,$=e-s,te=n-s;O=k*te,y=Ks*k,q=y-(y-k),S=k-q,y=Ks*te,R=y-(y-te),M=te-R,F=S*M-(O-q*R-S*R-q*M),I=$*G,y=Ks*$,q=y-(y-$),S=$-q,y=Ks*G,R=y-(y-G),M=G-R,z=S*M-(I-q*R-S*R-q*M),E=F-z,g=F-E,Of[0]=F-(E+g)+(g-z),U=O+E,g=U-O,P=O-(U-g)+(E-g),E=P-I,g=P-E,Of[1]=P-(E+g)+(g-I),j=U+E,g=j-U,Of[2]=U-(j-g)+(E-g),Of[3]=j;let ne=zZ(4,Of),ue=VZ*a;if(ne>=ue||-ne>=ue||(g=i-k,o=i-(k+g)+(g-r),g=t-G,c=t-(G+g)+(g-r),g=e-$,u=e-($+g)+(g-s),g=n-te,p=n-(te+g)+(g-s),o===0&&u===0&&c===0&&p===0)||(ue=HZ*a+kZ*Math.abs(ne),ne+=k*p+te*o-($*c+G*u),ne>=ue||-ne>=ue))return ne;O=o*te,y=Ks*o,q=y-(y-o),S=o-q,y=Ks*te,R=y-(y-te),M=te-R,F=S*M-(O-q*R-S*R-q*M),I=u*G,y=Ks*u,q=y-(y-u),S=u-q,y=Ks*G,R=y-(y-G),M=G-R,z=S*M-(I-q*R-S*R-q*M),E=F-z,g=F-E,ca[0]=F-(E+g)+(g-z),U=O+E,g=U-O,P=O-(U-g)+(E-g),E=P-I,g=P-E,ca[1]=P-(E+g)+(g-I),j=U+E,g=j-U,ca[2]=U-(j-g)+(E-g),ca[3]=j;const ae=zg(4,Of,4,ca,TM);O=k*p,y=Ks*k,q=y-(y-k),S=k-q,y=Ks*p,R=y-(y-p),M=p-R,F=S*M-(O-q*R-S*R-q*M),I=$*c,y=Ks*$,q=y-(y-$),S=$-q,y=Ks*c,R=y-(y-c),M=c-R,z=S*M-(I-q*R-S*R-q*M),E=F-z,g=F-E,ca[0]=F-(E+g)+(g-z),U=O+E,g=U-O,P=O-(U-g)+(E-g),E=P-I,g=P-E,ca[1]=P-(E+g)+(g-I),j=U+E,g=j-U,ca[2]=U-(j-g)+(E-g),ca[3]=j;const W=zg(ae,TM,4,ca,wM);O=o*p,y=Ks*o,q=y-(y-o),S=o-q,y=Ks*p,R=y-(y-p),M=p-R,F=S*M-(O-q*R-S*R-q*M),I=u*c,y=Ks*u,q=y-(y-u),S=u-q,y=Ks*c,R=y-(y-c),M=c-R,z=S*M-(I-q*R-S*R-q*M),E=F-z,g=F-E,ca[0]=F-(E+g)+(g-z),U=O+E,g=U-O,P=O-(U-g)+(E-g),E=P-I,g=P-E,ca[1]=P-(E+g)+(g-I),j=U+E,g=j-U,ca[2]=U-(j-g)+(E-g),ca[3]=j;const J=zg(W,wM,4,ca,EM);return EM[J-1]}function dp(i,e,t,n,r,s){const a=(e-s)*(t-r),o=(i-r)*(n-s),u=a-o,c=Math.abs(a+o);return Math.abs(u)>=GZ*c?u:-jZ(i,e,t,n,r,s,c)}const MM=Math.pow(2,-52),a6=new Uint32Array(512);class c3{static from(e,t=YZ,n=KZ){const r=e.length,s=new Float64Array(r*2);for(let a=0;a<r;a++){const o=e[a];s[2*a]=t(o),s[2*a+1]=n(o)}return new c3(s)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:s}=this,a=e.length>>1;let o=1/0,u=1/0,c=-1/0,p=-1/0;for(let k=0;k<a;k++){const G=e[2*k],$=e[2*k+1];G<o&&(o=G),$<u&&(u=$),G>c&&(c=G),$>p&&(p=$),this._ids[k]=k}const g=(o+c)/2,y=(u+p)/2;let q,S,R;for(let k=0,G=1/0;k<a;k++){const $=Gg(g,y,e[2*k],e[2*k+1]);$<G&&(q=k,G=$)}const M=e[2*q],E=e[2*q+1];for(let k=0,G=1/0;k<a;k++){if(k===q)continue;const $=Gg(M,E,e[2*k],e[2*k+1]);$<G&&$>0&&(S=k,G=$)}let U=e[2*S],P=e[2*S+1],O=1/0;for(let k=0;k<a;k++){if(k===q||k===S)continue;const G=XZ(M,E,U,P,e[2*k],e[2*k+1]);G<O&&(R=k,O=G)}let F=e[2*R],I=e[2*R+1];if(O===1/0){for(let $=0;$<a;$++)this._dists[$]=e[2*$]-e[0]||e[2*$+1]-e[1];fd(this._ids,this._dists,0,a-1);const k=new Uint32Array(a);let G=0;for(let $=0,te=-1/0;$<a;$++){const ne=this._ids[$],ue=this._dists[ne];ue>te&&(k[G++]=ne,te=ue)}this.hull=k.subarray(0,G),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(dp(M,E,U,P,F,I)<0){const k=S,G=U,$=P;S=R,U=F,P=I,R=k,F=G,I=$}const z=QZ(M,E,U,P,F,I);this._cx=z.x,this._cy=z.y;for(let k=0;k<a;k++)this._dists[k]=Gg(e[2*k],e[2*k+1],z.x,z.y);fd(this._ids,this._dists,0,a-1),this._hullStart=q;let j=3;n[q]=t[R]=S,n[S]=t[q]=R,n[R]=t[S]=q,r[q]=0,r[S]=1,r[R]=2,s.fill(-1),s[this._hashKey(M,E)]=q,s[this._hashKey(U,P)]=S,s[this._hashKey(F,I)]=R,this.trianglesLen=0,this._addTriangle(q,S,R,-1,-1,-1);for(let k=0,G,$;k<this._ids.length;k++){const te=this._ids[k],ne=e[2*te],ue=e[2*te+1];if(k>0&&Math.abs(ne-G)<=MM&&Math.abs(ue-$)<=MM||(G=ne,$=ue,te===q||te===S||te===R))continue;let ae=0;for(let Y=0,me=this._hashKey(ne,ue);Y<this._hashSize&&(ae=s[(me+Y)%this._hashSize],!(ae!==-1&&ae!==n[ae]));Y++);ae=t[ae];let W=ae,J;for(;J=n[W],dp(ne,ue,e[2*W],e[2*W+1],e[2*J],e[2*J+1])>=0;)if(W=J,W===ae){W=-1;break}if(W===-1)continue;let re=this._addTriangle(W,te,n[W],-1,-1,r[W]);r[te]=this._legalize(re+2),r[W]=re,j++;let ge=n[W];for(;J=n[ge],dp(ne,ue,e[2*ge],e[2*ge+1],e[2*J],e[2*J+1])<0;)re=this._addTriangle(ge,te,J,r[te],-1,r[ge]),r[te]=this._legalize(re+2),n[ge]=ge,j--,ge=J;if(W===ae)for(;J=t[W],dp(ne,ue,e[2*J],e[2*J+1],e[2*W],e[2*W+1])<0;)re=this._addTriangle(J,te,W,-1,r[W],r[J]),this._legalize(re+2),r[J]=re,n[W]=W,j--,W=J;this._hullStart=t[te]=W,n[W]=t[ge]=te,n[te]=ge,s[this._hashKey(ne,ue)]=te,s[this._hashKey(e[2*W],e[2*W+1])]=W}this.hull=new Uint32Array(j);for(let k=0,G=this._hullStart;k<j;k++)this.hull[k]=G,G=n[G];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(WZ(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let s=0,a=0;for(;;){const o=n[e],u=e-e%3;if(a=u+(e+2)%3,o===-1){if(s===0)break;e=a6[--s];continue}const c=o-o%3,p=u+(e+1)%3,g=c+(o+2)%3,y=t[a],q=t[e],S=t[p],R=t[g];if($Z(r[2*y],r[2*y+1],r[2*q],r[2*q+1],r[2*S],r[2*S+1],r[2*R],r[2*R+1])){t[e]=R,t[o]=y;const E=n[g];if(E===-1){let P=this._hullStart;do{if(this._hullTri[P]===g){this._hullTri[P]=e;break}P=this._hullPrev[P]}while(P!==this._hullStart)}this._link(e,E),this._link(o,n[a]),this._link(a,g);const U=c+(o+1)%3;s<a6.length&&(a6[s++]=U)}else{if(s===0)break;e=a6[--s]}}return a}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,s,a){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,s),this._link(o+2,a),this.trianglesLen+=3,o}}function WZ(i,e){const t=i/(Math.abs(i)+Math.abs(e));return(e>0?3-t:1+t)/4}function Gg(i,e,t,n){const r=i-t,s=e-n;return r*r+s*s}function $Z(i,e,t,n,r,s,a,o){const u=i-a,c=e-o,p=t-a,g=n-o,y=r-a,q=s-o,S=u*u+c*c,R=p*p+g*g,M=y*y+q*q;return u*(g*M-R*q)-c*(p*M-R*y)+S*(p*q-g*y)<0}function XZ(i,e,t,n,r,s){const a=t-i,o=n-e,u=r-i,c=s-e,p=a*a+o*o,g=u*u+c*c,y=.5/(a*c-o*u),q=(c*p-o*g)*y,S=(a*g-u*p)*y;return q*q+S*S}function QZ(i,e,t,n,r,s){const a=t-i,o=n-e,u=r-i,c=s-e,p=a*a+o*o,g=u*u+c*c,y=.5/(a*c-o*u),q=i+(c*p-o*g)*y,S=e+(a*g-u*p)*y;return{x:q,y:S}}function fd(i,e,t,n){if(n-t<=20)for(let r=t+1;r<=n;r++){const s=i[r],a=e[s];let o=r-1;for(;o>=t&&e[i[o]]>a;)i[o+1]=i[o--];i[o+1]=s}else{const r=t+n>>1;let s=t+1,a=n;k2(i,r,s),e[i[t]]>e[i[n]]&&k2(i,t,n),e[i[s]]>e[i[n]]&&k2(i,s,n),e[i[t]]>e[i[s]]&&k2(i,t,s);const o=i[s],u=e[o];for(;;){do s++;while(e[i[s]]<u);do a--;while(e[i[a]]>u);if(a<s)break;k2(i,s,a)}i[t+1]=i[a],i[a]=o,n-s+1>=a-t?(fd(i,e,s,n),fd(i,e,t,a-1)):(fd(i,e,t,a-1),fd(i,e,s,n))}}function k2(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function YZ(i){return i[0]}function KZ(i){return i[1]}function ZZ(i,e){var t,n,r=0,s,a,o,u,c,p,g,y=i[0],q=i[1],S=e.length;for(t=0;t<S;t++){n=0;var R=e[t],M=R.length-1;if(p=R[0],p[0]!==R[M][0]&&p[1]!==R[M][1])throw new Error("First and last coordinates in a ring must be the same");for(a=p[0]-y,o=p[1]-q,n;n<M;n++){if(g=R[n+1],u=g[0]-y,c=g[1]-q,o===0&&c===0){if(u<=0&&a>=0||a<=0&&u>=0)return 0}else if(c>=0&&o<=0||c<=0&&o>=0){if(s=dp(a,u,o,c,0,0),s===0)return 0;(s>0&&c>0&&o<=0||s<0&&c<=0&&o>0)&&r++}p=g,o=c,a=u}}return r%2!==0}function JZ(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return[...i.geometry.coordinates];if(i.type==="Point")return[...i.coordinates]}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return[...i];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function eJ(i){return i.type==="Feature"?i.geometry:i}function tJ(i,e,t={}){if(!i)throw new Error("point is required");if(!e)throw new Error("polygon is required");const n=JZ(i),r=eJ(e),s=r.type,a=e.bbox;let o=r.coordinates;if(a&&nJ(n,a)===!1)return!1;s==="Polygon"&&(o=[o]);let u=!1;for(var c=0;c<o.length;++c){const p=ZZ(n,o[c]);if(p===0)return!t.ignoreBoundary;p&&(u=!0)}return u}function nJ(i,e){return e[0]<=i[0]&&e[1]<=i[1]&&e[2]>=i[0]&&e[3]>=i[1]}var iJ=tJ;const RM=1e-6;class eh{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){e=+e,t=+t,n=+n;const r=e+n,s=t;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>RM||Math.abs(this._y1-s)>RM)&&(this._+="L"+r+","+s),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=s}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class Iv{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class rJ{constructor(e,[t,n,r,s]=[0,0,960,500]){if(!((r=+r)>=(t=+t))||!((s=+s)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=t,this.ymax=s,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this;let s,a;const o=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let R=0,M=0,E=n.length,U,P;R<E;R+=3,M+=2){const O=n[R]*2,F=n[R+1]*2,I=n[R+2]*2,z=e[O],j=e[O+1],k=e[F],G=e[F+1],$=e[I],te=e[I+1],ne=k-z,ue=G-j,ae=$-z,W=te-j,J=(ne*W-ue*ae)*2;if(Math.abs(J)<1e-9){if(s===void 0){s=a=0;for(const ge of t)s+=e[ge*2],a+=e[ge*2+1];s/=t.length,a/=t.length}const re=1e9*Math.sign((s-z)*W-(a-j)*ae);U=(z+$)/2-re*W,P=(j+te)/2+re*ae}else{const re=1/J,ge=ne*ne+ue*ue,Y=ae*ae+W*W;U=z+(W*ge-ue*Y)*re,P=j+(ne*Y-ae*ge)*re}o[M]=U,o[M+1]=P}let u=t[t.length-1],c,p=u*4,g,y=e[2*u],q,S=e[2*u+1];r.fill(0);for(let R=0;R<t.length;++R)u=t[R],c=p,g=y,q=S,p=u*4,y=e[2*u],S=e[2*u+1],r[c+2]=r[p]=q-S,r[c+3]=r[p+1]=y-g}render(e){const t=e==null?e=new eh:void 0,{delaunay:{halfedges:n,inedges:r,hull:s},circumcenters:a,vectors:o}=this;if(s.length<=1)return null;for(let p=0,g=n.length;p<g;++p){const y=n[p];if(y<p)continue;const q=Math.floor(p/3)*2,S=Math.floor(y/3)*2,R=a[q],M=a[q+1],E=a[S],U=a[S+1];this._renderSegment(R,M,E,U,e)}let u,c=s[s.length-1];for(let p=0;p<s.length;++p){u=c,c=s[p];const g=Math.floor(r[c]/3)*2,y=a[g],q=a[g+1],S=u*4,R=this._project(y,q,o[S+2],o[S+3]);R&&this._renderSegment(y,q,R[0],R[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new eh:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=t==null?t=new eh:void 0,r=this._clip(e);if(r===null||!r.length)return;t.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(r[a]!==r[a-2]||r[a+1]!==r[a-1])&&t.lineTo(r[a],r[a+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const r=this.cellPolygon(t);r&&(r.index=t,yield r)}}cellPolygon(e){const t=new Iv;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,s){let a;const o=this._regioncode(e,t),u=this._regioncode(n,r);o===0&&u===0?(s.moveTo(e,t),s.lineTo(n,r)):(a=this._clipSegment(e,t,n,r,o,u))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(e,t,n){return t=+t,t!==t||(n=+n,n!==n)?!1:this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const r=this._clip(n);if(r){e:for(let s=0,a=t.length;s<a;s+=2)for(let o=0,u=r.length;o<u;o+=2)if(t[s]===r[o]&&t[s+1]===r[o+1]&&t[(s+2)%a]===r[(o+u-2)%u]&&t[(s+3)%a]===r[(o+u-1)%u]){yield n;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:s}}=this,a=n[e];if(a===-1)return null;const o=[];let u=a;do{const c=Math.floor(u/3);if(o.push(t[c*2],t[c*2+1]),u=u%3===2?u-2:u+1,s[u]!==e)break;u=r[u]}while(u!==a&&u!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:n}=this,r=e*4;return this._simplify(n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t))}_clipFinite(e,t){const n=t.length;let r=null,s,a,o=t[n-2],u=t[n-1],c,p=this._regioncode(o,u),g,y=0;for(let q=0;q<n;q+=2)if(s=o,a=u,o=t[q],u=t[q+1],c=p,p=this._regioncode(o,u),c===0&&p===0)g=y,y=0,r?r.push(o,u):r=[o,u];else{let S,R,M,E,U;if(c===0){if((S=this._clipSegment(s,a,o,u,c,p))===null)continue;[R,M,E,U]=S}else{if((S=this._clipSegment(o,u,s,a,p,c))===null)continue;[E,U,R,M]=S,g=y,y=this._edgecode(R,M),g&&y&&this._edge(e,g,y,r,r.length),r?r.push(R,M):r=[R,M]}g=y,y=this._edgecode(E,U),g&&y&&this._edge(e,g,y,r,r.length),r?r.push(E,U):r=[E,U]}if(r)g=y,y=this._edgecode(r[0],r[1]),g&&y&&this._edge(e,g,y,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,t,n,r,s,a){const o=s<a;for(o&&([e,t,n,r,s,a]=[n,r,e,t,a,s]);;){if(s===0&&a===0)return o?[n,r,e,t]:[e,t,n,r];if(s&a)return null;let u,c,p=s||a;p&8?(u=e+(n-e)*(this.ymax-t)/(r-t),c=this.ymax):p&4?(u=e+(n-e)*(this.ymin-t)/(r-t),c=this.ymin):p&2?(c=t+(r-t)*(this.xmax-e)/(n-e),u=this.xmax):(c=t+(r-t)*(this.xmin-e)/(n-e),u=this.xmin),s?(e=u,t=c,s=this._regioncode(e,t)):(n=u,r=c,a=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,s,a){let o=Array.from(t),u;if((u=this._project(o[0],o[1],n,r))&&o.unshift(u[0],u[1]),(u=this._project(o[o.length-2],o[o.length-1],s,a))&&o.push(u[0],u[1]),o=this._clipFinite(e,o))for(let c=0,p=o.length,g,y=this._edgecode(o[p-2],o[p-1]);c<p;c+=2)g=y,y=this._edgecode(o[c],o[c+1]),g&&y&&(c=this._edge(e,g,y,o,c),p=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,t,n,r,s){for(;t!==n;){let a,o;switch(t){case 5:t=4;continue;case 4:t=6,a=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,a=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,a=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,a=this.xmin,o=this.ymin;break}(r[s]!==a||r[s+1]!==o)&&this.contains(e,a,o)&&(r.splice(s,0,a,o),s+=2)}return s}_project(e,t,n,r){let s=1/0,a,o,u;if(r<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/r)<s&&(u=this.ymin,o=e+(s=a)*n)}else if(r>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/r)<s&&(u=this.ymax,o=e+(s=a)*n)}if(n>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/n)<s&&(o=this.xmax,u=t+(s=a)*r)}else if(n<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/n)<s&&(o=this.xmin,u=t+(s=a)*r)}return[o,u]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const n=(t+2)%e.length,r=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[r]||e[t+1]===e[n+1]&&e[n+1]===e[r+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}const sJ=2*Math.PI,Bf=Math.pow;function aJ(i){return i[0]}function oJ(i){return i[1]}function lJ(i){const{triangles:e,coords:t}=i;for(let n=0;n<e.length;n+=3){const r=2*e[n],s=2*e[n+1],a=2*e[n+2];if((t[a]-t[r])*(t[s+1]-t[r+1])-(t[s]-t[r])*(t[a+1]-t[r+1])>1e-10)return!1}return!0}function uJ(i,e,t){return[i+Math.sin(i+e)*t,e+Math.cos(i-e)*t]}class Dx{static from(e,t=aJ,n=oJ,r){return new Dx("length"in e?cJ(e,t,n,r):Float64Array.from(hJ(e,t,n,r)))}constructor(e){this._delaunator=new c3(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&lJ(e)){this.collinear=Int32Array.from({length:t.length/2},(y,q)=>q).sort((y,q)=>t[2*y]-t[2*q]||t[2*y+1]-t[2*q+1]);const u=this.collinear[0],c=this.collinear[this.collinear.length-1],p=[t[2*u],t[2*u+1],t[2*c],t[2*c+1]],g=1e-8*Math.hypot(p[3]-p[1],p[2]-p[0]);for(let y=0,q=t.length/2;y<q;++y){const S=uJ(t[2*y],t[2*y+1],g);t[2*y]=S[0],t[2*y+1]=S[1]}this._delaunator=new c3(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let u=0,c=n.length;u<c;++u){const p=s[u%3===2?u-2:u+1];(n[u]===-1||a[p]===-1)&&(a[p]=u)}for(let u=0,c=r.length;u<c;++u)o[r[u]]=u;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],a[r[0]]=1,r.length===2&&(a[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new rJ(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:s,triangles:a,collinear:o}=this;if(o){const g=o.indexOf(e);g>0&&(yield o[g-1]),g<o.length-1&&(yield o[g+1]);return}const u=t[e];if(u===-1)return;let c=u,p=-1;do{if(yield p=a[c],c=c%3===2?c-2:c+1,a[c]!==e)return;if(c=s[c],c===-1){const g=n[(r[e]+1)%n.length];g!==p&&(yield g);return}}while(c!==u)}find(e,t,n=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const r=n;let s;for(;(s=this._step(n,e,t))>=0&&s!==n&&s!==r;)n=s;return s}_step(e,t,n){const{inedges:r,hull:s,_hullIndex:a,halfedges:o,triangles:u,points:c}=this;if(r[e]===-1||!c.length)return(e+1)%(c.length>>1);let p=e,g=Bf(t-c[e*2],2)+Bf(n-c[e*2+1],2);const y=r[e];let q=y;do{let S=u[q];const R=Bf(t-c[S*2],2)+Bf(n-c[S*2+1],2);if(R<g&&(g=R,p=S),q=q%3===2?q-2:q+1,u[q]!==e)break;if(q=o[q],q===-1){if(q=s[(a[e]+1)%s.length],q!==S&&Bf(t-c[q*2],2)+Bf(n-c[q*2+1],2)<g)return q;break}}while(q!==y);return p}render(e){const t=e==null?e=new eh:void 0,{points:n,halfedges:r,triangles:s}=this;for(let a=0,o=r.length;a<o;++a){const u=r[a];if(u<a)continue;const c=s[a]*2,p=s[u]*2;e.moveTo(n[c],n[c+1]),e.lineTo(n[p],n[p+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const n=e==null?e=new eh:void 0,{points:r}=this;for(let s=0,a=r.length;s<a;s+=2){const o=r[s],u=r[s+1];e.moveTo(o+t,u),e.arc(o,u,t,0,sJ)}return n&&n.value()}renderHull(e){const t=e==null?e=new eh:void 0,{hull:n,points:r}=this,s=n[0]*2,a=n.length;e.moveTo(r[s],r[s+1]);for(let o=1;o<a;++o){const u=2*n[o];e.lineTo(r[u],r[u+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new Iv;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=t==null?t=new eh:void 0,{points:r,triangles:s}=this,a=s[e*=3]*2,o=s[e+1]*2,u=s[e+2]*2;return t.moveTo(r[a],r[a+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[u],r[u+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new Iv;return this.renderTriangle(e,t),t.value()}}function cJ(i,e,t,n){const r=i.length,s=new Float64Array(r*2);for(let a=0;a<r;++a){const o=i[a];s[a*2]=e.call(n,o,a,i),s[a*2+1]=t.call(n,o,a,i)}return s}function*hJ(i,e,t,n){let r=0;for(const s of i)yield e.call(n,s,r,i),yield t.call(n,s,r,i),++r}const Lx=Math.PI,CM=Lx/2,NM=180/Lx,PM=Lx/180,fJ=Math.atan2,DM=Math.cos,dJ=Math.max,AJ=Math.min,LM=Math.sin,pJ=Math.sign||function(i){return i>0?1:i<0?-1:0},XP=Math.sqrt;function mJ(i){return i>1?CM:i<-1?-CM:Math.asin(i)}function QP(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function Ao(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function W8(i,e){return[i[0]+e[0],i[1]+e[1],i[2]+e[2]]}function $8(i){var e=XP(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return[i[0]/e,i[1]/e,i[2]/e]}function Ux(i){return[fJ(i[1],i[0])*NM,mJ(dJ(-1,AJ(1,i[2])))*NM]}function fu(i){const e=i[0]*PM,t=i[1]*PM,n=DM(t);return[n*DM(e),n*LM(e),LM(t)]}function Ox(i){return i=i.map(e=>fu(e)),QP(i[0],Ao(i[2],i[1]))}function gJ(i){const e=vJ(i),t=xJ(e),n=yJ(t,i),r=bJ(t,i.length),s=_J(r,i),a=qJ(t,i),{polygons:o,centers:u}=SJ(a,t,i),c=TJ(o),p=EJ(t,i),g=wJ(n,t);return{delaunay:e,edges:n,triangles:t,centers:u,neighbors:r,polygons:o,mesh:c,hull:p,urquhart:g,find:s}}function _J(i,e){function t(n,r){let s=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2];return s*s+a*a+o*o}return function(r,s,a){a===void 0&&(a=0);let o,u,c=a;const p=fu([r,s]);do o=a,a=null,u=t(p,fu(e[o])),i[o].forEach(g=>{let y=t(p,fu(e[g]));if(y<u){u=y,a=g,c=g;return}});while(a!==null);return c}}function vJ(i){if(i.length<2)return{};let e=0;for(;isNaN(i[e][0]+i[e][1])&&e++<i.length;);const t=aY(i[e]),n=FY().translate([0,0]).scale(1).rotate(t.invert([180,0]));i=i.map(n);const r=[];let s=1;for(let g=0,y=i.length;g<y;g++){let q=i[g][0]**2+i[g][1]**2;!isFinite(q)||q>1e32?r.push(g):q>s&&(s=q)}const a=1e6*XP(s);r.forEach(g=>i[g]=[a,0]),i.push([0,a]),i.push([-a,0]),i.push([0,-a]);const o=Dx.from(i);o.projection=n;const{triangles:u,halfedges:c,inedges:p}=o;for(let g=0,y=c.length;g<y;g++)if(c[g]<0){const q=g%3==2?g-2:g+1,S=g%3==0?g+2:g-1,R=c[q],M=c[S];c[R]=M,c[M]=R,c[q]=c[S]=-1,u[g]=u[q]=u[S]=e,p[u[R]]=R%3==0?R+2:R-1,p[u[M]]=M%3==0?M+2:M-1,g+=2-g%3}else u[g]>i.length-3-1&&(u[g]=e);return o}function yJ(i,e){const t=new Set;return e.length===2?[[0,1]]:(i.forEach(n=>{if(n[0]!==n[1]&&!(Ox(n.map(r=>e[r]))<0))for(let r=0,s;r<3;r++)s=(r+1)%3,t.add(v8([n[r],n[s]]).join("-"))}),Array.from(t,n=>n.split("-").map(Number)))}function xJ(i){const{triangles:e}=i;if(!e)return[];const t=[];for(let n=0,r=e.length/3;n<r;n++){const s=e[3*n],a=e[3*n+1],o=e[3*n+2];s!==a&&a!==o&&t.push([s,o,a])}return t}function qJ(i,e){return i.map(t=>{const n=t.map(s=>e[s]).map(fu),r=W8(W8(Ao(n[1],n[0]),Ao(n[2],n[1])),Ao(n[0],n[2]));return Ux($8(r))})}function bJ(i,e){const t=[];return i.forEach(n=>{for(let r=0;r<3;r++){const s=n[r],a=n[(r+1)%3];t[s]=t[s]||[],t[s].push(a)}}),i.length===0&&(e===2?(t[0]=[1],t[1]=[0]):e===1&&(t[0]=[])),t}function SJ(i,e,t){const n=[],r=i.slice();if(e.length===0){if(t.length<2)return{polygons:n,centers:r};if(t.length===2){const o=fu(t[0]),u=fu(t[1]),c=$8(W8(o,u)),p=$8(Ao(o,u)),g=Ao(c,p),y=[c,Ao(c,g),Ao(Ao(c,g),g),Ao(Ao(Ao(c,g),g),g)].map(Ux).map(a);return n.push(y),n.push(y.slice().reverse()),{polygons:n,centers:r}}}e.forEach((o,u)=>{for(let c=0;c<3;c++){const p=o[c],g=o[(c+1)%3],y=o[(c+2)%3];n[p]=n[p]||[],n[p].push([g,y,u,[p,g,y]])}});const s=n.map(o=>{const u=[o[0][2]];let c=o[0][1];for(let p=1;p<o.length;p++)for(let g=0;g<o.length;g++)if(o[g][0]==c){c=o[g][1],u.push(o[g][2]);break}if(u.length>2)return u;if(u.length==2){const p=UM(t[o[0][3][0]],t[o[0][3][1]],r[u[0]]),g=UM(t[o[0][3][2]],t[o[0][3][0]],r[u[0]]),y=a(p),q=a(g);return[u[0],q,u[1],y]}});function a(o){let u=-1;return r.slice(e.length,1/0).forEach((c,p)=>{c[0]===o[0]&&c[1]===o[1]&&(u=p+e.length)}),u<0&&(u=r.length,r.push(o)),u}return{polygons:s,centers:r}}function UM(i,e,t){i=fu(i),e=fu(e),t=fu(t);const n=pJ(QP(Ao(e,i),t));return Ux($8(W8(i,e)).map(r=>n*r))}function TJ(i){const e=[];return i.forEach(t=>{if(!t)return;let n=t[t.length-1];for(let r of t)r>n&&e.push([n,r]),n=r}),e}function wJ(i,e){return function(t){const n=new Map,r=new Map;return i.forEach((s,a)=>{const o=s.join("-");n.set(o,t[a]),r.set(o,!0)}),e.forEach(s=>{let a=0,o=-1;for(let u=0;u<3;u++){let c=v8([s[u],s[(u+1)%3]]).join("-");n.get(c)>a&&(a=n.get(c),o=c)}r.set(o,!1)}),i.map(s=>r.get(s.join("-")))}}function EJ(i,e){const t=new Set,n=[];i.map(o=>{if(!(Ox(o.map(u=>e[u>e.length?0:u]))>1e-12))for(let u=0;u<3;u++){let c=[o[u],o[(u+1)%3]],p=`${c[0]}-${c[1]}`;t.has(p)?t.delete(p):t.add(`${c[1]}-${c[0]}`)}});const r=new Map;let s;if(t.forEach(o=>{o=o.split("-").map(Number),r.set(o[0],o[1]),s=o[0]}),s===void 0)return n;let a=s;do{n.push(a);let o=r.get(a);r.set(a,-1),a=o}while(a>-1&&a!==s);return n}function MJ(i){const e=function(t){if(e.delaunay=null,e._data=t,typeof e._data=="object"&&e._data.type==="FeatureCollection"&&(e._data=e._data.features),typeof e._data=="object"){const n=e._data.map(r=>[e._vx(r),e._vy(r),r]).filter(r=>isFinite(r[0]+r[1]));e.points=n.map(r=>[r[0],r[1]]),e.valid=n.map(r=>r[2]),e.delaunay=gJ(e.points)}return e};return e._vx=function(t){if(typeof t=="object"&&"type"in t)return WE(t)[0];if(0 in t)return t[0]},e._vy=function(t){if(typeof t=="object"&&"type"in t)return WE(t)[1];if(1 in t)return t[1]},e.x=function(t){return t?(e._vx=t,e):e._vx},e.y=function(t){return t?(e._vy=t,e):e._vy},e.polygons=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n={type:"FeatureCollection",features:[]};return e.valid.length===0||(e.delaunay.polygons.forEach((r,s)=>n.features.push({type:"Feature",geometry:r?{type:"Polygon",coordinates:[[...r,r[0]].map(a=>e.delaunay.centers[a])]}:null,properties:{site:e.valid[s],sitecoordinates:e.points[s],neighbours:e.delaunay.neighbors[s]}})),e.valid.length===1&&n.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:e.valid[0],sitecoordinates:e.points[0],neighbours:[]}})),n},e.triangles=function(t){return t!==void 0&&e(t),e.delaunay?{type:"FeatureCollection",features:e.delaunay.triangles.map((n,r)=>(n=n.map(s=>e.points[s]),n.center=e.delaunay.centers[r],n)).filter(n=>Ox(n)>0).map(n=>({type:"Feature",properties:{circumcenter:n.center},geometry:{type:"Polygon",coordinates:[[...n,n[0]]]}}))}:!1},e.links=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n=e.delaunay.edges.map(s=>Q1(e.points[s[0]],e.points[s[1]])),r=e.delaunay.urquhart(n);return{type:"FeatureCollection",features:e.delaunay.edges.map((s,a)=>({type:"Feature",properties:{source:e.valid[s[0]],target:e.valid[s[1]],length:n[a],urquhart:!!r[a]},geometry:{type:"LineString",coordinates:[e.points[s[0]],e.points[s[1]]]}}))}},e.mesh=function(t){return t!==void 0&&e(t),e.delaunay?{type:"MultiLineString",coordinates:e.delaunay.edges.map(n=>[e.points[n[0]],e.points[n[1]]])}:!1},e.cellMesh=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const{centers:n,polygons:r}=e.delaunay,s=[];for(const a of r)if(a)for(let o=a.length,u=a[o-1],c=a[0],p=0;p<o;u=c,c=a[++p])c>u&&s.push([n[u],n[c]]);return{type:"MultiLineString",coordinates:s}},e._found=void 0,e.find=function(t,n,r){if(e._found=e.delaunay.find(t,n,e._found),!r||Q1([t,n],e.points[e._found])<r)return e._found},e.hull=function(t){t!==void 0&&e(t);const n=e.delaunay.hull,r=e.points;return n.length===0?null:{type:"Polygon",coordinates:[[...n.map(s=>r[s]),r[n[0]]]]}},i?e(i):e}function Fv(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function RJ(i){if(Array.isArray(i))return i}function CJ(i){if(Array.isArray(i))return Fv(i)}function NJ(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function PJ(i,e,t){return e=X8(e),kJ(i,YP()?Reflect.construct(e,[],X8(i).constructor):e.apply(i,t))}function DJ(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function LJ(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function X8(i){return X8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X8(i)}function UJ(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&kv(i,e)}function YP(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YP=function(){return!!i})()}function OJ(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function BJ(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],u=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(u=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(p){c=!0,r=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function IJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kJ(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NJ(i)}function kv(i,e){return kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},kv(i,e)}function iu(i,e){return RJ(i)||BJ(i,e)||KP(i,e)||IJ()}function Vg(i){return CJ(i)||OJ(i)||KP(i)||FJ()}function KP(i,e){if(i){if(typeof i=="string")return Fv(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Fv(i,e):void 0}}function zJ(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.resolution,n=t===void 0?1/0:t,r=GJ(i,n),s=n3(r),a=VJ(i,n),o=[].concat(Vg(s),Vg(a)),u={type:"Polygon",coordinates:i},c=gP(u),p=iu(c,2),g=iu(p[0],2),y=g[0],q=g[1],S=iu(p[1],2),R=S[0],M=S[1],E=y>R||M>=89||q<=-89,U=[];if(E){var P=MJ(o).triangles(),O=new Map(o.map(function(J,re){var ge=iu(J,2),Y=ge[0],me=ge[1];return["".concat(Y,"-").concat(me),re]}));P.features.forEach(function(J){var re,ge=J.geometry.coordinates[0].slice(0,3).reverse(),Y=[];if(ge.forEach(function(Me){var Be=iu(Me,2),be=Be[0],Fe=Be[1],$e="".concat(be,"-").concat(Fe);O.has($e)&&Y.push(O.get($e))}),Y.length===3){if(Y.some(function(Me){return Me<s.length})){var me=J.properties.circumcenter;if(!zv(me,u,E))return}(re=U).push.apply(re,Y)}})}else if(a.length)for(var k=c3.from(o),G=function(re){var ge,Y=[2,1,0].map(function(Be){return k.triangles[re+Be]}),me=Y.map(function(Be){return o[Be]});if(Y.some(function(Be){return Be<s.length})){var Me=[0,1].map(function(Be){return JX(me,function(be){return be[Be]})});if(!zv(Me,u,E))return 1}(ge=U).push.apply(ge,Vg(Y))},$=0,te=k.triangles.length;$<te;$+=3)G($);else{var F=G8(r),I=F.vertices,z=F.holes,j=z===void 0?[]:z;U=uK(I,j,2)}var ne=Ec(v8(o,function(J){return J[0]}),[0,1]),ue=Ec(v8(o,function(J){return J[1]}),[0,1]),ae=o.map(function(J){var re=iu(J,2),ge=re[0],Y=re[1];return[ne(ge),ue(Y)]}),W={points:o,indices:U,uvs:ae};return{contour:r,triangles:W}}function GJ(i,e){return i.map(function(t){var n=[],r;return t.forEach(function(s){if(r){var a=Q1(s,r)*180/Math.PI;if(a>e)for(var o=Ex(r,s),u=1/Math.ceil(a/e),c=u;c<1;)n.push(o(c)),c+=u}n.push(r=s)}),n})}function VJ(i,e){var t={type:"Polygon",coordinates:i},n=gP(t),r=iu(n,2),s=iu(r[0],2),a=s[0],o=s[1],u=iu(r[1],2),c=u[0],p=u[1];if(Math.min(Math.abs(c-a),Math.abs(p-o))<e)return[];var g=a>c||p>=89||o<=-89;return HJ(e,{minLng:a,maxLng:c,minLat:o,maxLat:p}).filter(function(y){return zv(y,t,g)})}function HJ(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.minLng,n=e.maxLng,r=e.minLat,s=e.maxLat,a=Math.round(Math.pow(360/i,2)/Math.PI),o=(1+Math.sqrt(5))/2,u=function(E){return E/o*360%360-180},c=function(E){return Math.acos(2*E/a-1)/Math.PI*180-90},p=function(E){return a*(Math.cos((E+90)*Math.PI/180)+1)/2},g=[s!==void 0?Math.ceil(p(s)):0,r!==void 0?Math.floor(p(r)):a-1],y=t===void 0&&n===void 0?function(){return!0}:t===void 0?function(M){return M<=n}:n===void 0?function(M){return M>=t}:n>=t?function(M){return M>=t&&M<=n}:function(M){return M>=t||M<=n},q=[],S=g[0];S<=g[1];S++){var R=u(S);y(R)&&q.push([R,c(S)])}return q}function zv(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?bY(e,i):iJ(i,e)}var e8=window.THREE?window.THREE:{BufferGeometry:Ii,Float32BufferAttribute:mi},OM=new e8.BufferGeometry().setAttribute?"setAttribute":"addAttribute",Bx=function(i){function e(t,n,r,s,a,o,u){var c;DJ(this,e),c=PJ(this,e),c.type="ConicPolygonGeometry",c.parameters={polygonGeoJson:t,bottomHeight:n,topHeight:r,closedBottom:s,closedTop:a,includeSides:o,curvatureResolution:u},n=n||0,r=r||1,s=s!==void 0?s:!0,a=a!==void 0?a:!0,o=o!==void 0?o:!0,u=u||5;var p=zJ(t,{resolution:u}),g=p.contour,y=p.triangles,q=n3(y.uvs),S=[],R=[],M=[],E=0,U=function(z){var j=Math.round(S.length/3),k=M.length;S=S.concat(z.vertices),R=R.concat(z.uvs),M=M.concat(j?z.indices.map(function(G){return G+j}):z.indices),c.addGroup(k,M.length-k,E++)};o&&U(O()),s&&U(F(n,!1)),a&&U(F(r,!0)),c.setIndex(M),c[OM]("position",new e8.Float32BufferAttribute(S,3)),c[OM]("uv",new e8.Float32BufferAttribute(R,2)),c.computeVertexNormals();function P(I,z){var j=typeof z=="function"?z:function(){return z},k=I.map(function(G){return G.map(function($){var te=iu($,2),ne=te[0],ue=te[1];return jJ(ue,ne,j(ne,ue))})});return G8(k)}function O(){for(var I=P(g,n),z=I.vertices,j=I.holes,k=P(g,r),G=k.vertices,$=n3([G,z]),te=Math.round(G.length/3),ne=new Set(j),ue=0,ae=[],W=0;W<te;W++){var J=W+1;if(J===te)J=ue;else if(ne.has(J)){var re=J;J=ue,ue=re}ae.push(W,W+te,J+te),ae.push(J+te,J,W)}for(var ge=[],Y=1;Y>=0;Y--)for(var me=0;me<te;me+=1)ge.push(me/(te-1),Y);return{indices:ae,vertices:$,uvs:ge}}function F(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{indices:z?y.indices:y.indices.slice().reverse(),vertices:P([y.points],I).vertices,uvs:q}}return c}return UJ(e,i),LJ(e)}(e8.BufferGeometry);function jJ(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function Gv(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function WJ(i){if(Array.isArray(i))return i}function $J(i){if(Array.isArray(i))return Gv(i)}function XJ(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function QJ(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],u=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(u=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(p){c=!0,r=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function YJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZJ(i,e){if(i==null)return{};var t,n,r=JJ(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function JJ(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function eee(i,e){return WJ(i)||QJ(i,e)||ZP(i,e)||YJ()}function tee(i){return $J(i)||XJ(i)||ZP(i)||KJ()}function nee(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function iee(i){var e=nee(i,"string");return typeof e=="symbol"?e:e+""}function ZP(i,e){if(i){if(typeof i=="string")return Gv(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Gv(i,e):void 0}}var ree=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(o){return{keyAccessor:o,isProp:!(o instanceof Function)}}),s=i.reduce(function(o,u){var c=o,p=u;return r.forEach(function(g,y){var q=g.keyAccessor,S=g.isProp,R;if(S){var M=p,E=M[q],U=ZJ(M,[q].map(iee));R=E,p=U}else R=q(p,y);y+1<r.length?(c.hasOwnProperty(R)||(c[R]={}),c=c[R]):t?(c.hasOwnProperty(R)||(c[R]=[]),c[R].push(p)):c[R]=p}),o},{});t instanceof Function&&function o(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===r.length?Object.keys(u).forEach(function(p){return u[p]=t(u[p])}):Object.values(u).forEach(function(p){return o(p,c+1)})}(s);var a=s;return n&&(a=[],function o(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===r.length?a.push({keys:c,vals:u}):Object.entries(u).forEach(function(p){var g=eee(p,2),y=g[0],q=g[1];return o(q,[].concat(tee(c),[y]))})}(s),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a},ui=function(i){i=i||{};var e=typeof i<"u"?i:{},t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var r="";function s(Ie){return e.locateFile?e.locateFile(Ie,r):r+Ie}var a;typeof document<"u"&&document.currentScript&&(r=document.currentScript.src),r.indexOf("blob:")!==0?r=r.substr(0,r.lastIndexOf("/")+1):r="",a=function(Je,Et,ft){var d=new XMLHttpRequest;d.open("GET",Je,!0),d.responseType="arraybuffer",d.onload=function(){if(d.status==200||d.status==0&&d.response){Et(d.response);return}var Gn=kn(Je);if(Gn){Et(Gn.buffer);return}ft()},d.onerror=ft,d.send(null)};var o=e.print||console.log.bind(console),u=e.printErr||console.warn.bind(console);for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);t=null,e.arguments&&e.arguments;var c=0,p=function(Ie){c=Ie},g=function(){return c},y=8;function q(Ie,Je,Et,ft){switch(Et=Et||"i8",Et.charAt(Et.length-1)==="*"&&(Et="i32"),Et){case"i1":te[Ie>>0]=Je;break;case"i8":te[Ie>>0]=Je;break;case"i16":ue[Ie>>1]=Je;break;case"i32":ae[Ie>>2]=Je;break;case"i64":it=[Je>>>0,(Xe=Je,+_n(Xe)>=1?Xe>0?(ut(+gi(Xe/4294967296),4294967295)|0)>>>0:~~+ye((Xe-+(~~Xe>>>0))/4294967296)>>>0:0)],ae[Ie>>2]=it[0],ae[Ie+4>>2]=it[1];break;case"float":W[Ie>>2]=Je;break;case"double":J[Ie>>3]=Je;break;default:rr("invalid type for setValue: "+Et)}}function S(Ie,Je,Et){switch(Je=Je||"i8",Je.charAt(Je.length-1)==="*"&&(Je="i32"),Je){case"i1":return te[Ie>>0];case"i8":return te[Ie>>0];case"i16":return ue[Ie>>1];case"i32":return ae[Ie>>2];case"i64":return ae[Ie>>2];case"float":return W[Ie>>2];case"double":return J[Ie>>3];default:rr("invalid type for getValue: "+Je)}return null}var R=!1;function M(Ie,Je){Ie||rr("Assertion failed: "+Je)}function E(Ie){var Je=e["_"+Ie];return M(Je,"Cannot call unknown function "+Ie+", make sure it is exported"),Je}function U(Ie,Je,Et,ft,d){var K={string:function(Yt){var Es=0;if(Yt!=null&&Yt!==0){var Nu=(Yt.length<<2)+1;Es=Ye(Nu),j(Yt,Es,Nu)}return Es},array:function(Yt){var Es=Ye(Yt.length);return k(Yt,Es),Es}};function Gn(Yt){return Je==="string"?I(Yt):Je==="boolean"?!!Yt:Yt}var Yn=E(Ie),ji=[],An=0;if(ft)for(var In=0;In<ft.length;In++){var Hs=K[Et[In]];Hs?(An===0&&(An=Gt()),ji[In]=Hs(ft[In])):ji[In]=ft[In]}var jn=Yn.apply(null,ji);return jn=Gn(jn),An!==0&&dt(An),jn}function P(Ie,Je,Et,ft){Et=Et||[];var d=Et.every(function(Gn){return Gn==="number"}),K=Je!=="string";return K&&d&&!ft?E(Ie):function(){return U(Ie,Je,Et,arguments)}}var O=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function F(Ie,Je,Et){for(var ft=Je+Et,d=Je;Ie[d]&&!(d>=ft);)++d;if(d-Je>16&&Ie.subarray&&O)return O.decode(Ie.subarray(Je,d));for(var K="";Je<d;){var Gn=Ie[Je++];if(!(Gn&128)){K+=String.fromCharCode(Gn);continue}var Yn=Ie[Je++]&63;if((Gn&224)==192){K+=String.fromCharCode((Gn&31)<<6|Yn);continue}var ji=Ie[Je++]&63;if((Gn&240)==224?Gn=(Gn&15)<<12|Yn<<6|ji:Gn=(Gn&7)<<18|Yn<<12|ji<<6|Ie[Je++]&63,Gn<65536)K+=String.fromCharCode(Gn);else{var An=Gn-65536;K+=String.fromCharCode(55296|An>>10,56320|An&1023)}}return K}function I(Ie,Je){return Ie?F(ne,Ie,Je):""}function z(Ie,Je,Et,ft){if(!(ft>0))return 0;for(var d=Et,K=Et+ft-1,Gn=0;Gn<Ie.length;++Gn){var Yn=Ie.charCodeAt(Gn);if(Yn>=55296&&Yn<=57343){var ji=Ie.charCodeAt(++Gn);Yn=65536+((Yn&1023)<<10)|ji&1023}if(Yn<=127){if(Et>=K)break;Je[Et++]=Yn}else if(Yn<=2047){if(Et+1>=K)break;Je[Et++]=192|Yn>>6,Je[Et++]=128|Yn&63}else if(Yn<=65535){if(Et+2>=K)break;Je[Et++]=224|Yn>>12,Je[Et++]=128|Yn>>6&63,Je[Et++]=128|Yn&63}else{if(Et+3>=K)break;Je[Et++]=240|Yn>>18,Je[Et++]=128|Yn>>12&63,Je[Et++]=128|Yn>>6&63,Je[Et++]=128|Yn&63}}return Je[Et]=0,Et-d}function j(Ie,Je,Et){return z(Ie,ne,Je,Et)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function k(Ie,Je){te.set(Ie,Je)}function G(Ie,Je){return Ie%Je>0&&(Ie+=Je-Ie%Je),Ie}var $,te,ne,ue,ae,W,J;function re(Ie){$=Ie,e.HEAP8=te=new Int8Array(Ie),e.HEAP16=ue=new Int16Array(Ie),e.HEAP32=ae=new Int32Array(Ie),e.HEAPU8=ne=new Uint8Array(Ie),e.HEAPU16=new Uint16Array(Ie),e.HEAPU32=new Uint32Array(Ie),e.HEAPF32=W=new Float32Array(Ie),e.HEAPF64=J=new Float64Array(Ie)}var ge=5271520,Y=28608,me=e.TOTAL_MEMORY||33554432;e.buffer?$=e.buffer:$=new ArrayBuffer(me),me=$.byteLength,re($),ae[Y>>2]=ge;function Me(Ie){for(;Ie.length>0;){var Je=Ie.shift();if(typeof Je=="function"){Je();continue}var Et=Je.func;typeof Et=="number"?Je.arg===void 0?e.dynCall_v(Et):e.dynCall_vi(Et,Je.arg):Et(Je.arg===void 0?null:Je.arg)}}var Be=[],be=[],Fe=[],$e=[];function ht(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Kt(e.preRun.shift());Me(Be)}function wt(){Me(be)}function kt(){Me(Fe)}function Ct(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Bn(e.postRun.shift());Me($e)}function Kt(Ie){Be.unshift(Ie)}function Bn(Ie){$e.unshift(Ie)}var _n=Math.abs,ye=Math.ceil,gi=Math.floor,ut=Math.min,st=0,nt=null;function Pt(Ie){st++,e.monitorRunDependencies&&e.monitorRunDependencies(st)}function at(Ie){if(st--,e.monitorRunDependencies&&e.monitorRunDependencies(st),st==0&&nt){var Je=nt;nt=null,Je()}}e.preloadedImages={},e.preloadedAudios={};var ce=null,ee="data:application/octet-stream;base64,";function Ne(Ie){return String.prototype.startsWith?Ie.startsWith(ee):Ie.indexOf(ee)===0}var Xe,it;ce="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var Qe=28624;function Ut(Ie,Je,Et,ft){rr("Assertion failed: "+I(Ie)+", at: "+[Je?I(Je):"unknown filename",Et,ft?I(ft):"unknown function"])}function St(){return te.length}function Nt(Ie,Je,Et){ne.set(ne.subarray(Je,Je+Et),Ie)}function Xn(Ie){return e.___errno_location&&(ae[e.___errno_location()>>2]=Ie),Ie}function Tt(Ie){rr("OOM")}function jt(Ie){try{var Je=new ArrayBuffer(Ie);return Je.byteLength!=Ie?void 0:(new Int8Array(Je).set(te),It(Je),re(Je),1)}catch{}}function on(Ie){var Je=St(),Et=16777216,ft=2147483648-Et;if(Ie>ft)return!1;for(var d=16777216,K=Math.max(Je,d);K<Ie;)K<=536870912?K=G(2*K,Et):K=Math.min(G((3*K+2147483648)/4,Et),ft);var Gn=jt(K);return!!Gn}var cn=typeof atob=="function"?atob:function(Ie){var Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Et="",ft,d,K,Gn,Yn,ji,An,In=0;Ie=Ie.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Gn=Je.indexOf(Ie.charAt(In++)),Yn=Je.indexOf(Ie.charAt(In++)),ji=Je.indexOf(Ie.charAt(In++)),An=Je.indexOf(Ie.charAt(In++)),ft=Gn<<2|Yn>>4,d=(Yn&15)<<4|ji>>2,K=(ji&3)<<6|An,Et=Et+String.fromCharCode(ft),ji!==64&&(Et=Et+String.fromCharCode(d)),An!==64&&(Et=Et+String.fromCharCode(K));while(In<Ie.length);return Et};function Bt(Ie){try{for(var Je=cn(Ie),Et=new Uint8Array(Je.length),ft=0;ft<Je.length;++ft)Et[ft]=Je.charCodeAt(ft);return Et}catch{throw new Error("Converting base64 string to bytes failed.")}}function kn(Ie){if(Ne(Ie))return Bt(Ie.slice(ee.length))}var qn={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Ei={b:p,c:g,d:Ut,e:Xn,f:St,g:Nt,h:on,i:Tt,o:Qe,p:Y},pe=function(Ie,Je,Et){"almost asm";var ft=new Ie.Int8Array(Et),d=new Ie.Int32Array(Et);new Ie.Uint8Array(Et),new Ie.Float32Array(Et);var K=new Ie.Float64Array(Et),Gn=Je.o|0,Yn=Je.p|0,ji=Ie.Math.floor,An=Ie.Math.abs,In=Ie.Math.sqrt,Hs=Ie.Math.pow,jn=Ie.Math.cos,Yt=Ie.Math.sin,Es=Ie.Math.tan,Nu=Ie.Math.acos,il=Ie.Math.asin,oe=Ie.Math.atan,Re=Ie.Math.atan2,He=Ie.Math.ceil,Ve=Ie.Math.imul,Le=Ie.Math.min,bt=Ie.Math.max,Rt=Ie.Math.clz32,ot=Je.b,Z=Je.c,qt=Je.d,ln=Je.e,en=Je.f,Kn=Je.g,di=Je.h,sr=Je.i,Q=28640;function ri(f){return ft=new Int8Array(f),d=new Int32Array(f),K=new Float64Array(f),Et=f,!0}function hn(f){f=f|0;var A=0;return A=Q,Q=Q+f|0,Q=Q+15&-16,A|0}function fr(){return Q|0}function fi(f){f=f|0,Q=f}function cs(f,A){f=f|0,Q=f}function Fl(f,A){f=f|0,A=A|0;var m=0,v=0,x=0;return(f|0)<0?(A=2,A|0):(f|0)>13780509?(A=Gh(15,A)|0,A|0):(m=((f|0)<0)<<31>>31,x=xr(f|0,m|0,3,0)|0,v=Z()|0,m=zt(f|0,m|0,1,0)|0,m=xr(x|0,v|0,m|0,Z()|0)|0,m=zt(m|0,Z()|0,1,0)|0,f=Z()|0,d[A>>2]=m,d[A+4>>2]=f,A=0,A|0)}function Di(f,A,m,v){return f=f|0,A=A|0,m=m|0,v=v|0,To(f,A,m,v,0)|0}function To(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0;if(D=Q,Q=Q+16|0,w=D,!(Mi(f,A,m,v,x)|0))return v=0,Q=D,v|0;do if((m|0)>=0){if((m|0)>13780509){if(T=Gh(15,w)|0,T|0)break;C=w,w=d[C>>2]|0,C=d[C+4>>2]|0}else T=((m|0)<0)<<31>>31,B=xr(m|0,T|0,3,0)|0,C=Z()|0,T=zt(m|0,T|0,1,0)|0,T=xr(B|0,C|0,T|0,Z()|0)|0,T=zt(T|0,Z()|0,1,0)|0,C=Z()|0,d[w>>2]=T,d[w+4>>2]=C,w=T;if(Oo(v|0,0,w<<3|0)|0,x|0){Oo(x|0,0,w<<2|0)|0,T=Ki(f,A,m,v,x,w,C,0)|0;break}T=xa(w,4)|0,T?(B=Ki(f,A,m,v,T,w,C,0)|0,dn(T),T=B):T=13}else T=2;while(!1);return B=T,Q=D,B|0}function Mi(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0;if(xe=Q,Q=Q+16|0,he=xe,fe=xe+8|0,Ae=he,d[Ae>>2]=f,d[Ae+4>>2]=A,(m|0)<0)return fe=2,Q=xe,fe|0;if(T=v,d[T>>2]=f,d[T+4>>2]=A,T=(x|0)!=0,T&&(d[x>>2]=0),Ai(f,A)|0)return fe=9,Q=xe,fe|0;d[fe>>2]=0;e:do if((m|0)>=1)if(T)for(V=1,B=0,ie=0,Ae=1,T=f;;){if(!(B|ie)){if(T=Jn(T,A,4,fe,he)|0,T|0)break e;if(A=he,T=d[A>>2]|0,A=d[A+4>>2]|0,Ai(T,A)|0){T=9;break e}}if(T=Jn(T,A,d[26800+(ie<<2)>>2]|0,fe,he)|0,T|0)break e;if(A=he,T=d[A>>2]|0,A=d[A+4>>2]|0,f=v+(V<<3)|0,d[f>>2]=T,d[f+4>>2]=A,d[x+(V<<2)>>2]=Ae,f=B+1|0,w=(f|0)==(Ae|0),C=ie+1|0,D=(C|0)==6,Ai(T,A)|0){T=9;break e}if(Ae=Ae+(D&w&1)|0,(Ae|0)>(m|0)){T=0;break}else V=V+1|0,B=w?0:f,ie=w?D?0:C:ie}else for(V=1,B=0,ie=0,Ae=1,T=f;;){if(!(B|ie)){if(T=Jn(T,A,4,fe,he)|0,T|0)break e;if(A=he,T=d[A>>2]|0,A=d[A+4>>2]|0,Ai(T,A)|0){T=9;break e}}if(T=Jn(T,A,d[26800+(ie<<2)>>2]|0,fe,he)|0,T|0)break e;if(A=he,T=d[A>>2]|0,A=d[A+4>>2]|0,f=v+(V<<3)|0,d[f>>2]=T,d[f+4>>2]=A,f=B+1|0,w=(f|0)==(Ae|0),C=ie+1|0,D=(C|0)==6,Ai(T,A)|0){T=9;break e}if(Ae=Ae+(D&w&1)|0,(Ae|0)>(m|0)){T=0;break}else V=V+1|0,B=w?0:f,ie=w?D?0:C:ie}else T=0;while(!1);return fe=T,Q=xe,fe|0}function Ki(f,A,m,v,x,T,w,C){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0,T=T|0,w=w|0,C=C|0;var D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0;if(xe=Q,Q=Q+16|0,he=xe+8|0,fe=xe,D=Qu(f|0,A|0,T|0,w|0)|0,V=Z()|0,ie=v+(D<<3)|0,Ee=ie,ze=d[Ee>>2]|0,Ee=d[Ee+4>>2]|0,B=(ze|0)==(f|0)&(Ee|0)==(A|0),!((ze|0)==0&(Ee|0)==0|B))do D=zt(D|0,V|0,1,0)|0,D=Kc(D|0,Z()|0,T|0,w|0)|0,V=Z()|0,ie=v+(D<<3)|0,ze=ie,Ee=d[ze>>2]|0,ze=d[ze+4>>2]|0,B=(Ee|0)==(f|0)&(ze|0)==(A|0);while(!((Ee|0)==0&(ze|0)==0|B));if(D=x+(D<<2)|0,B&&(d[D>>2]|0)<=(C|0)||(ze=ie,d[ze>>2]=f,d[ze+4>>2]=A,d[D>>2]=C,(C|0)>=(m|0)))return ze=0,Q=xe,ze|0;switch(B=C+1|0,d[he>>2]=0,D=Jn(f,A,2,he,fe)|0,D|0){case 9:{Ae=9;break}case 0:{D=fe,D=Ki(d[D>>2]|0,d[D+4>>2]|0,m,v,x,T,w,B)|0,D||(Ae=9);break}}e:do if((Ae|0)==9){switch(d[he>>2]=0,D=Jn(f,A,3,he,fe)|0,D|0){case 9:break;case 0:{if(D=fe,D=Ki(d[D>>2]|0,d[D+4>>2]|0,m,v,x,T,w,B)|0,D|0)break e;break}default:break e}switch(d[he>>2]=0,D=Jn(f,A,1,he,fe)|0,D|0){case 9:break;case 0:{if(D=fe,D=Ki(d[D>>2]|0,d[D+4>>2]|0,m,v,x,T,w,B)|0,D|0)break e;break}default:break e}switch(d[he>>2]=0,D=Jn(f,A,5,he,fe)|0,D|0){case 9:break;case 0:{if(D=fe,D=Ki(d[D>>2]|0,d[D+4>>2]|0,m,v,x,T,w,B)|0,D|0)break e;break}default:break e}switch(d[he>>2]=0,D=Jn(f,A,4,he,fe)|0,D|0){case 9:break;case 0:{if(D=fe,D=Ki(d[D>>2]|0,d[D+4>>2]|0,m,v,x,T,w,B)|0,D|0)break e;break}default:break e}switch(d[he>>2]=0,D=Jn(f,A,6,he,fe)|0,D|0){case 9:break;case 0:{if(D=fe,D=Ki(d[D>>2]|0,d[D+4>>2]|0,m,v,x,T,w,B)|0,D|0)break e;break}default:break e}return ze=0,Q=xe,ze|0}while(!1);return ze=D,Q=xe,ze|0}function Jn(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0;if(m>>>0>6)return x=1,x|0;if(ie=(d[v>>2]|0)%6|0,d[v>>2]=ie,(ie|0)>0){T=0;do m=Bu(m)|0,T=T+1|0;while((T|0)<(d[v>>2]|0))}if(ie=mt(f|0,A|0,45)|0,Z()|0,V=ie&127,V>>>0>121)return x=5,x|0;D=Ms(f,A)|0,T=mt(f|0,A|0,52)|0,Z()|0,T=T&15;e:do if(!T)B=8;else{for(;;){if(w=(15-T|0)*3|0,C=mt(f|0,A|0,w|0)|0,Z()|0,C=C&7,(C|0)==7){A=5;break}if(fe=(ga(T)|0)==0,T=T+-1|0,Ae=yt(7,0,w|0)|0,A=A&~(Z()|0),he=yt(d[(fe?432:16)+(C*28|0)+(m<<2)>>2]|0,0,w|0)|0,w=Z()|0,m=d[(fe?640:224)+(C*28|0)+(m<<2)>>2]|0,f=he|f&~Ae,A=w|A,!m){m=0;break e}if(!T){B=8;break e}}return A|0}while(!1);(B|0)==8&&(fe=d[848+(V*28|0)+(m<<2)>>2]|0,he=yt(fe|0,0,45)|0,f=he|f,A=Z()|0|A&-1040385,m=d[4272+(V*28|0)+(m<<2)>>2]|0,(fe&127|0)==127&&(fe=yt(d[848+(V*28|0)+20>>2]|0,0,45)|0,A=Z()|0|A&-1040385,m=d[4272+(V*28|0)+20>>2]|0,f=kl(fe|f,A)|0,A=Z()|0,d[v>>2]=(d[v>>2]|0)+1)),C=mt(f|0,A|0,45)|0,Z()|0,C=C&127;e:do if(Wi(C)|0){t:do if((Ms(f,A)|0)==1){if((V|0)!=(C|0))if(Pu(C,d[7696+(V*28|0)>>2]|0)|0){f=zA(f,A)|0,w=1,A=Z()|0;break}else qt(27795,26864,436,26872);switch(D|0){case 3:{f=kl(f,A)|0,A=Z()|0,d[v>>2]=(d[v>>2]|0)+1,w=0;break t}case 5:{f=zA(f,A)|0,A=Z()|0,d[v>>2]=(d[v>>2]|0)+5,w=0;break t}case 0:return fe=9,fe|0;default:return fe=1,fe|0}}else w=0;while(!1);if((m|0)>0){T=0;do f=Fh(f,A)|0,A=Z()|0,T=T+1|0;while((T|0)!=(m|0))}if((V|0)!=(C|0)){if(!(MA(C)|0)){if((w|0)!=0|(Ms(f,A)|0)!=5)break;d[v>>2]=(d[v>>2]|0)+1;break}switch(ie&127){case 8:case 118:break e}(Ms(f,A)|0)!=3&&(d[v>>2]=(d[v>>2]|0)+1)}}else if((m|0)>0){T=0;do f=kl(f,A)|0,A=Z()|0,T=T+1|0;while((T|0)!=(m|0))}while(!1);return d[v>>2]=((d[v>>2]|0)+m|0)%6|0,fe=x,d[fe>>2]=f,d[fe+4>>2]=A,fe=0,fe|0}function Er(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0;for(C=Q,Q=Q+16|0,T=C,w=C+8|0,x=(Ai(f,A)|0)==0,x=x?1:2;;){if(d[w>>2]=0,B=(Jn(f,A,x,w,T)|0)==0,D=T,B&((d[D>>2]|0)==(m|0)?(d[D+4>>2]|0)==(v|0):0)){f=4;break}if(x=x+1|0,x>>>0>=7){x=7,f=4;break}}return(f|0)==4?(Q=C,x|0):0}function Zr(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0;if(fe=Q,Q=Q+16|0,Ae=fe,he=fe+8|0,ie=Ae,d[ie>>2]=f,d[ie+4>>2]=A,!m)return he=v,d[he>>2]=f,d[he+4>>2]=A,he=0,Q=fe,he|0;d[he>>2]=0;e:do if(Ai(f,A)|0)f=9;else{if(T=(m|0)>0,T){x=0,ie=f;do{if(f=Jn(ie,A,4,he,Ae)|0,f|0)break e;if(A=Ae,ie=d[A>>2]|0,A=d[A+4>>2]|0,x=x+1|0,Ai(ie,A)|0){f=9;break e}}while((x|0)<(m|0));if(V=v,d[V>>2]=ie,d[V+4>>2]=A,V=m+-1|0,T){B=0,f=1;do{if(x=26800+(B<<2)|0,(B|0)==5)for(w=d[x>>2]|0,T=0,x=f;;){if(f=Ae,f=Jn(d[f>>2]|0,d[f+4>>2]|0,w,he,Ae)|0,f|0)break e;if((T|0)!=(V|0))if(D=Ae,C=d[D>>2]|0,D=d[D+4>>2]|0,f=v+(x<<3)|0,d[f>>2]=C,d[f+4>>2]=D,!(Ai(C,D)|0))f=x+1|0;else{f=9;break e}else f=x;if(T=T+1|0,(T|0)>=(m|0))break;x=f}else for(w=Ae,D=d[x>>2]|0,C=0,x=f,T=d[w>>2]|0,w=d[w+4>>2]|0;;){if(f=Jn(T,w,D,he,Ae)|0,f|0)break e;if(w=Ae,T=d[w>>2]|0,w=d[w+4>>2]|0,f=v+(x<<3)|0,d[f>>2]=T,d[f+4>>2]=w,f=x+1|0,Ai(T,w)|0){f=9;break e}if(C=C+1|0,(C|0)>=(m|0))break;x=f}B=B+1|0}while(B>>>0<6);f=Ae,w=ie,x=d[f>>2]|0,T=A,f=d[f+4>>2]|0}else w=ie,x=ie,T=A,f=A}else w=v,d[w>>2]=f,d[w+4>>2]=A,w=f,x=f,T=A,f=A;f=(w|0)==(x|0)&(T|0)==(f|0)?0:9}while(!1);return he=f,Q=fe,he|0}function wo(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0;if(C=Q,Q=Q+48|0,x=C+16|0,T=C+8|0,w=C,m=hs(m)|0,m|0)return w=m,Q=C,w|0;if(B=f,D=d[B+4>>2]|0,m=T,d[m>>2]=d[B>>2],d[m+4>>2]=D,la(T,x),m=f0(x,A,w)|0,!m){if(A=d[T>>2]|0,T=d[f+8>>2]|0,(T|0)>0){x=d[f+12>>2]|0,m=0;do A=(d[x+(m<<3)>>2]|0)+A|0,m=m+1|0;while((m|0)<(T|0))}m=w,x=d[m>>2]|0,m=d[m+4>>2]|0,T=((A|0)<0)<<31>>31,(m|0)<(T|0)|(m|0)==(T|0)&x>>>0<A>>>0?(m=w,d[m>>2]=A,d[m+4>>2]=T,m=T):A=x,D=zt(A|0,m|0,12,0)|0,B=Z()|0,m=w,d[m>>2]=D,d[m+4>>2]=B,m=v,d[m>>2]=D,d[m+4>>2]=B,m=0}return B=m,Q=C,B|0}function Eo(f,A,m,v,x,T,w){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0,T=T|0,w=w|0;var C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0,xt=0,Vt=0,gt=0,Ft=0,$t=0,Ln=0,tn=0,Ht=0,vt=0,xn=0,oi=0,wn=0,pn=0,es=0,ef=0;if(oi=Q,Q=Q+64|0,tn=oi+48|0,Ht=oi+32|0,vt=oi+24|0,xt=oi+8|0,Vt=oi,D=d[f>>2]|0,(D|0)<=0)return xn=0,Q=oi,xn|0;for(gt=f+4|0,Ft=tn+8|0,$t=Ht+8|0,Ln=xt+8|0,C=0,Ce=0;;){B=d[gt>>2]|0,Ue=B+(Ce<<4)|0,d[tn>>2]=d[Ue>>2],d[tn+4>>2]=d[Ue+4>>2],d[tn+8>>2]=d[Ue+8>>2],d[tn+12>>2]=d[Ue+12>>2],(Ce|0)==(D+-1|0)?(d[Ht>>2]=d[B>>2],d[Ht+4>>2]=d[B+4>>2],d[Ht+8>>2]=d[B+8>>2],d[Ht+12>>2]=d[B+12>>2]):(Ue=B+(Ce+1<<4)|0,d[Ht>>2]=d[Ue>>2],d[Ht+4>>2]=d[Ue+4>>2],d[Ht+8>>2]=d[Ue+8>>2],d[Ht+12>>2]=d[Ue+12>>2]),D=o4(tn,Ht,v,vt)|0;e:do if(D)B=0,C=D;else if(D=vt,B=d[D>>2]|0,D=d[D+4>>2]|0,(D|0)>0|(D|0)==0&B>>>0>0){ze=0,Ue=0;t:for(;;){if(pn=1/(+(B>>>0)+4294967296*+(D|0)),ef=+K[tn>>3],D=Ir(B|0,D|0,ze|0,Ue|0)|0,es=+(D>>>0)+4294967296*+(Z()|0),wn=+(ze>>>0)+4294967296*+(Ue|0),K[xt>>3]=pn*(ef*es)+pn*(+K[Ht>>3]*wn),K[Ln>>3]=pn*(+K[Ft>>3]*es)+pn*(+K[$t>>3]*wn),D=GA(xt,v,Vt)|0,D|0){C=D;break}Ee=Vt,xe=d[Ee>>2]|0,Ee=d[Ee+4>>2]|0,Ae=Qu(xe|0,Ee|0,A|0,m|0)|0,V=Z()|0,D=w+(Ae<<3)|0,ie=D,B=d[ie>>2]|0,ie=d[ie+4>>2]|0;n:do if((B|0)==0&(ie|0)==0)qe=D,xn=16;else for(he=0,fe=0;;){if((he|0)>(m|0)|(he|0)==(m|0)&fe>>>0>A>>>0){C=1;break t}if((B|0)==(xe|0)&(ie|0)==(Ee|0))break n;if(D=zt(Ae|0,V|0,1,0)|0,Ae=Kc(D|0,Z()|0,A|0,m|0)|0,V=Z()|0,fe=zt(fe|0,he|0,1,0)|0,he=Z()|0,D=w+(Ae<<3)|0,ie=D,B=d[ie>>2]|0,ie=d[ie+4>>2]|0,(B|0)==0&(ie|0)==0){qe=D,xn=16;break}}while(!1);if((xn|0)==16&&(xn=0,!((xe|0)==0&(Ee|0)==0))&&(fe=qe,d[fe>>2]=xe,d[fe+4>>2]=Ee,fe=T+(d[x>>2]<<3)|0,d[fe>>2]=xe,d[fe+4>>2]=Ee,fe=x,fe=zt(d[fe>>2]|0,d[fe+4>>2]|0,1,0)|0,xe=Z()|0,Ee=x,d[Ee>>2]=fe,d[Ee+4>>2]=xe),ze=zt(ze|0,Ue|0,1,0)|0,Ue=Z()|0,D=vt,B=d[D>>2]|0,D=d[D+4>>2]|0,!((D|0)>(Ue|0)|(D|0)==(Ue|0)&B>>>0>ze>>>0)){B=1;break e}}B=0}else B=1;while(!1);if(Ce=Ce+1|0,!B){xn=21;break}if(D=d[f>>2]|0,(Ce|0)>=(D|0)){C=0,xn=21;break}}return(xn|0)==21?(Q=oi,C|0):0}function r4(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0,xt=0,Vt=0,gt=0,Ft=0,$t=0,Ln=0,tn=0,Ht=0,vt=0,xn=0,oi=0,wn=0,pn=0,es=0;if(es=Q,Q=Q+112|0,xn=es+80|0,D=es+72|0,oi=es,wn=es+56|0,x=hs(m)|0,x|0)return pn=x,Q=es,pn|0;if(B=f+8|0,pn=Lo((d[B>>2]<<5)+32|0)|0,!pn)return pn=13,Q=es,pn|0;if(ll(f,pn),x=hs(m)|0,!x){if(Ht=f,vt=d[Ht+4>>2]|0,x=D,d[x>>2]=d[Ht>>2],d[x+4>>2]=vt,la(D,xn),x=f0(xn,A,oi)|0,x)Ht=0,vt=0;else{if(x=d[D>>2]|0,T=d[B>>2]|0,(T|0)>0){w=d[f+12>>2]|0,m=0;do x=(d[w+(m<<3)>>2]|0)+x|0,m=m+1|0;while((m|0)!=(T|0));m=x}else m=x;x=oi,T=d[x>>2]|0,x=d[x+4>>2]|0,w=((m|0)<0)<<31>>31,(x|0)<(w|0)|(x|0)==(w|0)&T>>>0<m>>>0?(x=oi,d[x>>2]=m,d[x+4>>2]=w,x=w):m=T,Ht=zt(m|0,x|0,12,0)|0,vt=Z()|0,x=oi,d[x>>2]=Ht,d[x+4>>2]=vt,x=0}if(!x){if(m=xa(Ht,8)|0,!m)return dn(pn),pn=13,Q=es,pn|0;if(C=xa(Ht,8)|0,!C)return dn(pn),dn(m),pn=13,Q=es,pn|0;Ln=xn,d[Ln>>2]=0,d[Ln+4>>2]=0,Ln=f,tn=d[Ln+4>>2]|0,x=D,d[x>>2]=d[Ln>>2],d[x+4>>2]=tn,x=Eo(D,Ht,vt,A,xn,m,C)|0;e:do if(x)dn(m),dn(C),dn(pn);else{t:do if((d[B>>2]|0)>0){for(w=f+12|0,T=0;x=Eo((d[w>>2]|0)+(T<<3)|0,Ht,vt,A,xn,m,C)|0,T=T+1|0,!(x|0);)if((T|0)>=(d[B>>2]|0))break t;dn(m),dn(C),dn(pn);break e}while(!1);(vt|0)>0|(vt|0)==0&Ht>>>0>0&&Oo(C|0,0,Ht<<3|0)|0,tn=xn,Ln=d[tn+4>>2]|0;t:do if((Ln|0)>0|(Ln|0)==0&(d[tn>>2]|0)>>>0>0){gt=m,Ft=C,$t=m,Ln=C,tn=m,x=m,qe=m,xt=C,Vt=C,m=C;n:for(;;){for(Ee=0,ze=0,Ue=0,Ce=0,T=0,w=0;;){C=oi,D=C+56|0;do d[C>>2]=0,C=C+4|0;while((C|0)<(D|0));if(A=gt+(Ee<<3)|0,B=d[A>>2]|0,A=d[A+4>>2]|0,Mi(B,A,1,oi,0)|0){C=oi,D=C+56|0;do d[C>>2]=0,C=C+4|0;while((C|0)<(D|0));C=xa(7,4)|0,C|0&&(Ki(B,A,1,oi,C,7,0,0)|0,dn(C))}for(xe=0;;){fe=oi+(xe<<3)|0,he=d[fe>>2]|0,fe=d[fe+4>>2]|0;i:do if((he|0)==0&(fe|0)==0)C=T,D=w;else{if(V=Qu(he|0,fe|0,Ht|0,vt|0)|0,B=Z()|0,C=v+(V<<3)|0,A=C,D=d[A>>2]|0,A=d[A+4>>2]|0,!((D|0)==0&(A|0)==0)){ie=0,Ae=0;do{if((ie|0)>(vt|0)|(ie|0)==(vt|0)&Ae>>>0>Ht>>>0)break n;if((D|0)==(he|0)&(A|0)==(fe|0)){C=T,D=w;break i}C=zt(V|0,B|0,1,0)|0,V=Kc(C|0,Z()|0,Ht|0,vt|0)|0,B=Z()|0,Ae=zt(Ae|0,ie|0,1,0)|0,ie=Z()|0,C=v+(V<<3)|0,A=C,D=d[A>>2]|0,A=d[A+4>>2]|0}while(!((D|0)==0&(A|0)==0))}if((he|0)==0&(fe|0)==0){C=T,D=w;break}zl(he,fe,wn)|0,Ja(f,pn,wn)|0&&(Ae=zt(T|0,w|0,1,0)|0,w=Z()|0,ie=C,d[ie>>2]=he,d[ie+4>>2]=fe,T=Ft+(T<<3)|0,d[T>>2]=he,d[T+4>>2]=fe,T=Ae),C=T,D=w}while(!1);if(xe=xe+1|0,xe>>>0>=7)break;T=C,w=D}if(Ee=zt(Ee|0,ze|0,1,0)|0,ze=Z()|0,Ue=zt(Ue|0,Ce|0,1,0)|0,Ce=Z()|0,w=xn,T=d[w>>2]|0,w=d[w+4>>2]|0,(Ce|0)<(w|0)|(Ce|0)==(w|0)&Ue>>>0<T>>>0)T=C,w=D;else break}if((w|0)>0|(w|0)==0&T>>>0>0){T=0,w=0;do Ce=gt+(T<<3)|0,d[Ce>>2]=0,d[Ce+4>>2]=0,T=zt(T|0,w|0,1,0)|0,w=Z()|0,Ce=xn,Ue=d[Ce+4>>2]|0;while((w|0)<(Ue|0)|((w|0)==(Ue|0)?T>>>0<(d[Ce>>2]|0)>>>0:0))}if(Ce=xn,d[Ce>>2]=C,d[Ce+4>>2]=D,(D|0)>0|(D|0)==0&C>>>0>0)xe=m,Ee=Vt,ze=tn,Ue=xt,Ce=Ft,m=qe,Vt=x,xt=$t,qe=xe,x=Ee,tn=Ln,Ln=ze,$t=Ue,Ft=gt,gt=Ce;else break t}dn($t),dn(Ln),dn(pn),x=1;break e}else x=C;while(!1);dn(pn),dn(m),dn(x),x=0}while(!1);return pn=x,Q=es,pn|0}}return dn(pn),pn=x,Q=es,pn|0}function s4(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0;if(V=Q,Q=Q+176|0,D=V,(A|0)<1)return Do(m,0,0),B=0,Q=V,B|0;for(C=f,C=mt(d[C>>2]|0,d[C+4>>2]|0,52)|0,Z()|0,Do(m,(A|0)>6?A:6,C&15),C=0;v=f+(C<<3)|0,v=ku(d[v>>2]|0,d[v+4>>2]|0,D)|0,!(v|0);){if(v=d[D>>2]|0,(v|0)>0){w=0;do T=D+8+(w<<4)|0,w=w+1|0,v=D+8+(((w|0)%(v|0)|0)<<4)|0,x=$u(m,v,T)|0,x?Xc(m,x)|0:Yh(m,T,v)|0,v=d[D>>2]|0;while((w|0)<(v|0))}if(C=C+1|0,(C|0)>=(A|0)){v=0,B=13;break}}return(B|0)==13?(Q=V,v|0):(Xh(m),B=v,Q=V,B|0)}function EA(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0;if(T=Q,Q=Q+32|0,v=T,x=T+16|0,f=s4(f,A,x)|0,f|0)return m=f,Q=T,m|0;if(d[m>>2]=0,d[m+4>>2]=0,d[m+8>>2]=0,f=Qh(x)|0,f|0)do{A=Hh(m)|0;do jh(A,f)|0,w=f+16|0,d[v>>2]=d[w>>2],d[v+4>>2]=d[w+4>>2],d[v+8>>2]=d[w+8>>2],d[v+12>>2]=d[w+12>>2],Xc(x,f)|0,f=fs(x,v)|0;while((f|0)!=0);f=Qh(x)|0}while((f|0)!=0);return Xh(x),f=jc(m)|0,f?(Wh(m),w=f,Q=T,w|0):(w=0,Q=T,w|0)}function Wi(f){return f=f|0,f>>>0>121?(f=0,f|0):(f=d[7696+(f*28|0)+16>>2]|0,f|0)}function MA(f){return f=f|0,(f|0)==4|(f|0)==117|0}function a0(f){return f=f|0,d[11120+((d[f>>2]|0)*216|0)+((d[f+4>>2]|0)*72|0)+((d[f+8>>2]|0)*24|0)+(d[f+12>>2]<<3)>>2]|0}function RA(f){return f=f|0,d[11120+((d[f>>2]|0)*216|0)+((d[f+4>>2]|0)*72|0)+((d[f+8>>2]|0)*24|0)+(d[f+12>>2]<<3)+4>>2]|0}function CA(f,A){f=f|0,A=A|0,f=7696+(f*28|0)|0,d[A>>2]=d[f>>2],d[A+4>>2]=d[f+4>>2],d[A+8>>2]=d[f+8>>2],d[A+12>>2]=d[f+12>>2]}function Ic(f,A){f=f|0,A=A|0;var m=0,v=0;if(A>>>0>20)return A=-1,A|0;do if((d[11120+(A*216|0)>>2]|0)!=(f|0))if((d[11120+(A*216|0)+8>>2]|0)!=(f|0))if((d[11120+(A*216|0)+16>>2]|0)!=(f|0))if((d[11120+(A*216|0)+24>>2]|0)!=(f|0))if((d[11120+(A*216|0)+32>>2]|0)!=(f|0))if((d[11120+(A*216|0)+40>>2]|0)!=(f|0))if((d[11120+(A*216|0)+48>>2]|0)!=(f|0))if((d[11120+(A*216|0)+56>>2]|0)!=(f|0))if((d[11120+(A*216|0)+64>>2]|0)!=(f|0))if((d[11120+(A*216|0)+72>>2]|0)!=(f|0))if((d[11120+(A*216|0)+80>>2]|0)!=(f|0))if((d[11120+(A*216|0)+88>>2]|0)!=(f|0))if((d[11120+(A*216|0)+96>>2]|0)!=(f|0))if((d[11120+(A*216|0)+104>>2]|0)!=(f|0))if((d[11120+(A*216|0)+112>>2]|0)!=(f|0))if((d[11120+(A*216|0)+120>>2]|0)!=(f|0))if((d[11120+(A*216|0)+128>>2]|0)!=(f|0))if((d[11120+(A*216|0)+136>>2]|0)==(f|0))f=2,m=1,v=2;else{if((d[11120+(A*216|0)+144>>2]|0)==(f|0)){f=0,m=2,v=0;break}if((d[11120+(A*216|0)+152>>2]|0)==(f|0)){f=0,m=2,v=1;break}if((d[11120+(A*216|0)+160>>2]|0)==(f|0)){f=0,m=2,v=2;break}if((d[11120+(A*216|0)+168>>2]|0)==(f|0)){f=1,m=2,v=0;break}if((d[11120+(A*216|0)+176>>2]|0)==(f|0)){f=1,m=2,v=1;break}if((d[11120+(A*216|0)+184>>2]|0)==(f|0)){f=1,m=2,v=2;break}if((d[11120+(A*216|0)+192>>2]|0)==(f|0)){f=2,m=2,v=0;break}if((d[11120+(A*216|0)+200>>2]|0)==(f|0)){f=2,m=2,v=1;break}if((d[11120+(A*216|0)+208>>2]|0)==(f|0)){f=2,m=2,v=2;break}else f=-1;return f|0}else f=2,m=1,v=1;else f=2,m=1,v=0;else f=1,m=1,v=2;else f=1,m=1,v=1;else f=1,m=1,v=0;else f=0,m=1,v=2;else f=0,m=1,v=1;else f=0,m=1,v=0;else f=2,m=0,v=2;else f=2,m=0,v=1;else f=2,m=0,v=0;else f=1,m=0,v=2;else f=1,m=0,v=1;else f=1,m=0,v=0;else f=0,m=0,v=2;else f=0,m=0,v=1;else f=0,m=0,v=0;while(!1);return A=d[11120+(A*216|0)+(m*72|0)+(f*24|0)+(v<<3)+4>>2]|0,A|0}function Pu(f,A){return f=f|0,A=A|0,(d[7696+(f*28|0)+20>>2]|0)==(A|0)?(A=1,A|0):(A=(d[7696+(f*28|0)+24>>2]|0)==(A|0),A|0)}function Nh(f,A){return f=f|0,A=A|0,d[848+(f*28|0)+(A<<2)>>2]|0}function o0(f,A){return f=f|0,A=A|0,(d[848+(f*28|0)>>2]|0)==(A|0)?(A=0,A|0):(d[848+(f*28|0)+4>>2]|0)==(A|0)?(A=1,A|0):(d[848+(f*28|0)+8>>2]|0)==(A|0)?(A=2,A|0):(d[848+(f*28|0)+12>>2]|0)==(A|0)?(A=3,A|0):(d[848+(f*28|0)+16>>2]|0)==(A|0)?(A=4,A|0):(d[848+(f*28|0)+20>>2]|0)==(A|0)?(A=5,A|0):((d[848+(f*28|0)+24>>2]|0)==(A|0)?6:7)|0}function a4(){return 122}function l0(f){f=f|0;var A=0,m=0,v=0;A=0;do yt(A|0,0,45)|0,v=Z()|0|134225919,m=f+(A<<3)|0,d[m>>2]=-1,d[m+4>>2]=v,A=A+1|0;while((A|0)!=122);return 0}function rl(f){f=f|0;var A=0,m=0,v=0;return v=+K[f+16>>3],m=+K[f+24>>3],A=v-m,+(v<m?A+6.283185307179586:A)}function Ph(f){return f=f|0,+K[f+16>>3]<+K[f+24>>3]|0}function u0(f){return f=f|0,+(+K[f>>3]-+K[f+8>>3])}function Mo(f,A){f=f|0,A=A|0;var m=0,v=0,x=0;return m=+K[A>>3],!(m>=+K[f+8>>3])||!(m<=+K[f>>3])?(A=0,A|0):(v=+K[f+16>>3],m=+K[f+24>>3],x=+K[A+8>>3],A=x>=m,f=x<=v&1,v<m?A&&(f=1):A||(f=0),A=(f|0)!=0,A|0)}function c0(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0;return+K[f>>3]<+K[A+8>>3]||+K[f+8>>3]>+K[A>>3]?(v=0,v|0):(T=+K[f+16>>3],m=f+24|0,V=+K[m>>3],w=T<V,v=A+16|0,B=+K[v>>3],x=A+24|0,D=+K[x>>3],C=B<D,A=V-B<D-T,f=w?C|A?1:2:0,A=C?w?1:A?2:1:0,T=+Cs(T,f),T<+Cs(+K[x>>3],A)||(V=+Cs(+K[m>>3],f),V>+Cs(+K[v>>3],A))?(C=0,C|0):(C=1,C|0))}function Dh(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0;T=+K[f+16>>3],D=+K[f+24>>3],f=T<D,C=+K[A+16>>3],w=+K[A+24>>3],x=C<w,A=D-C<w-T,d[m>>2]=f?x|A?1:2:0,d[v>>2]=x?f?1:A?2:1:0}function NA(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0;return+K[f>>3]<+K[A>>3]||+K[f+8>>3]>+K[A+8>>3]?(v=0,v|0):(v=f+16|0,D=+K[v>>3],T=+K[f+24>>3],w=D<T,m=A+16|0,V=+K[m>>3],x=A+24|0,B=+K[x>>3],C=V<B,A=T-V<B-D,f=w?C|A?1:2:0,A=C?w?1:A?2:1:0,T=+Cs(T,f),T<=+Cs(+K[x>>3],A)?(V=+Cs(+K[v>>3],f),C=V>=+Cs(+K[m>>3],A),C|0):(C=0,C|0))}function h0(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0;x=Q,Q=Q+176|0,v=x,d[v>>2]=4,C=+K[A>>3],K[v+8>>3]=C,T=+K[A+16>>3],K[v+16>>3]=T,K[v+24>>3]=C,C=+K[A+24>>3],K[v+32>>3]=C,w=+K[A+8>>3],K[v+40>>3]=w,K[v+48>>3]=C,K[v+56>>3]=w,K[v+64>>3]=T,A=v+72|0,m=A+96|0;do d[A>>2]=0,A=A+4|0;while((A|0)<(m|0));Yu(f|0,v|0,168)|0,Q=x}function f0(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0;fe=Q,Q=Q+288|0,V=fe+264|0,ie=fe+96|0,B=fe,C=B,D=C+96|0;do d[C>>2]=0,C=C+4|0;while((C|0)<(D|0));return A=jA(A,B)|0,A|0?(he=A,Q=fe,he|0):(D=B,B=d[D>>2]|0,D=d[D+4>>2]|0,zl(B,D,V)|0,ku(B,D,ie)|0,w=+Ka(V,ie+8|0),K[V>>3]=+K[f>>3],D=V+8|0,K[D>>3]=+K[f+16>>3],K[ie>>3]=+K[f+8>>3],B=ie+8|0,K[B>>3]=+K[f+24>>3],x=+Ka(V,ie),Ee=+K[D>>3]-+K[B>>3],T=+An(+Ee),xe=+K[V>>3]-+K[ie>>3],v=+An(+xe),!(Ee==0|xe==0)&&(Ee=+_0(+T,+v),Ee=+He(+(x*x/+v0(+(Ee/+v0(+T,+v)),3)/(w*(w*2.59807621135)*.8))),K[Gn>>3]=Ee,Ae=~~Ee>>>0,he=+An(Ee)>=1?Ee>0?~~+Le(+ji(Ee/4294967296),4294967295)>>>0:~~+He((Ee-+(~~Ee>>>0))/4294967296)>>>0:0,(d[Gn+4>>2]&2146435072|0)!=2146435072)?(ie=(Ae|0)==0&(he|0)==0,A=m,d[A>>2]=ie?1:Ae,d[A+4>>2]=ie?0:he,A=0):A=1,he=A,Q=fe,he|0)}function o4(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0;B=Q,Q=Q+288|0,w=B+264|0,C=B+96|0,D=B,x=D,T=x+96|0;do d[x>>2]=0,x=x+4|0;while((x|0)<(T|0));return m=jA(m,D)|0,m|0?(v=m,Q=B,v|0):(m=D,x=d[m>>2]|0,m=d[m+4>>2]|0,zl(x,m,w)|0,ku(x,m,C)|0,V=+Ka(w,C+8|0),V=+He(+(+Ka(f,A)/(V*2))),K[Gn>>3]=V,m=~~V>>>0,x=+An(V)>=1?V>0?~~+Le(+ji(V/4294967296),4294967295)>>>0:~~+He((V-+(~~V>>>0))/4294967296)>>>0:0,(d[Gn+4>>2]&2146435072|0)==2146435072?(v=1,Q=B,v|0):(D=(m|0)==0&(x|0)==0,d[v>>2]=D?1:m,d[v+4>>2]=D?0:x,v=0,Q=B,v|0))}function js(f,A){f=f|0,A=+A;var m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0;T=f+16|0,w=+K[T>>3],m=f+24|0,x=+K[m>>3],v=w-x,v=w<x?v+6.283185307179586:v,B=+K[f>>3],C=f+8|0,D=+K[C>>3],V=B-D,v=(v*A-v)*.5,A=(V*A-V)*.5,B=B+A,K[f>>3]=B>1.5707963267948966?1.5707963267948966:B,A=D-A,K[C>>3]=A<-1.5707963267948966?-1.5707963267948966:A,A=w+v,A=A>3.141592653589793?A+-6.283185307179586:A,K[T>>3]=A<-3.141592653589793?A+6.283185307179586:A,A=x-v,A=A>3.141592653589793?A+-6.283185307179586:A,K[m>>3]=A<-3.141592653589793?A+6.283185307179586:A}function Du(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0,d[f>>2]=A,d[f+4>>2]=m,d[f+8>>2]=v}function Lh(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0;ie=A+8|0,d[ie>>2]=0,D=+K[f>>3],w=+An(+D),B=+K[f+8>>3],C=+An(+B)*1.1547005383792515,w=w+C*.5,m=~~w,f=~~C,w=w-+(m|0),C=C-+(f|0);do if(w<.5)if(w<.3333333333333333)if(d[A>>2]=m,C<(w+1)*.5){d[A+4>>2]=f;break}else{f=f+1|0,d[A+4>>2]=f;break}else if(Ae=1-w,f=(!(C<Ae)&1)+f|0,d[A+4>>2]=f,Ae<=C&C<w*2){m=m+1|0,d[A>>2]=m;break}else{d[A>>2]=m;break}else{if(!(w<.6666666666666666))if(m=m+1|0,d[A>>2]=m,C<w*.5){d[A+4>>2]=f;break}else{f=f+1|0,d[A+4>>2]=f;break}if(C<1-w){if(d[A+4>>2]=f,w*2+-1<C){d[A>>2]=m;break}}else f=f+1|0,d[A+4>>2]=f;m=m+1|0,d[A>>2]=m}while(!1);do if(D<0)if(f&1){V=(f+1|0)/2|0,V=Ir(m|0,((m|0)<0)<<31>>31|0,V|0,((V|0)<0)<<31>>31|0)|0,m=~~(+(m|0)-((+(V>>>0)+4294967296*+(Z()|0))*2+1)),d[A>>2]=m;break}else{V=(f|0)/2|0,V=Ir(m|0,((m|0)<0)<<31>>31|0,V|0,((V|0)<0)<<31>>31|0)|0,m=~~(+(m|0)-(+(V>>>0)+4294967296*+(Z()|0))*2),d[A>>2]=m;break}while(!1);V=A+4|0,B<0&&(m=m-((f<<1|1|0)/2|0)|0,d[A>>2]=m,f=0-f|0,d[V>>2]=f),v=f-m|0,(m|0)<0?(x=0-m|0,d[V>>2]=v,d[ie>>2]=x,d[A>>2]=0,f=v,m=0):x=0,(f|0)<0&&(m=m-f|0,d[A>>2]=m,x=x-f|0,d[ie>>2]=x,d[V>>2]=0,f=0),T=m-x|0,v=f-x|0,(x|0)<0&&(d[A>>2]=T,d[V>>2]=v,d[ie>>2]=0,f=v,m=T,x=0),v=(f|0)<(m|0)?f:m,v=(x|0)<(v|0)?x:v,!((v|0)<=0)&&(d[A>>2]=m-v,d[V>>2]=f-v,d[ie>>2]=x-v)}function Mr(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0;A=d[f>>2]|0,w=f+4|0,m=d[w>>2]|0,(A|0)<0&&(m=m-A|0,d[w>>2]=m,T=f+8|0,d[T>>2]=(d[T>>2]|0)-A,d[f>>2]=0,A=0),(m|0)<0?(A=A-m|0,d[f>>2]=A,T=f+8|0,x=(d[T>>2]|0)-m|0,d[T>>2]=x,d[w>>2]=0,m=0):(x=f+8|0,T=x,x=d[x>>2]|0),(x|0)<0&&(A=A-x|0,d[f>>2]=A,m=m-x|0,d[w>>2]=m,d[T>>2]=0,x=0),v=(m|0)<(A|0)?m:A,v=(x|0)<(v|0)?x:v,!((v|0)<=0)&&(d[f>>2]=A-v,d[w>>2]=m-v,d[T>>2]=x-v)}function Lu(f,A){f=f|0,A=A|0;var m=0,v=0;v=d[f+8>>2]|0,m=+((d[f+4>>2]|0)-v|0),K[A>>3]=+((d[f>>2]|0)-v|0)-m*.5,K[A+8>>3]=m*.8660254037844386}function Jr(f,A,m){f=f|0,A=A|0,m=m|0,d[m>>2]=(d[A>>2]|0)+(d[f>>2]|0),d[m+4>>2]=(d[A+4>>2]|0)+(d[f+4>>2]|0),d[m+8>>2]=(d[A+8>>2]|0)+(d[f+8>>2]|0)}function d0(f,A,m){f=f|0,A=A|0,m=m|0,d[m>>2]=(d[f>>2]|0)-(d[A>>2]|0),d[m+4>>2]=(d[f+4>>2]|0)-(d[A+4>>2]|0),d[m+8>>2]=(d[f+8>>2]|0)-(d[A+8>>2]|0)}function Fc(f,A){f=f|0,A=A|0;var m=0,v=0;m=Ve(d[f>>2]|0,A)|0,d[f>>2]=m,m=f+4|0,v=Ve(d[m>>2]|0,A)|0,d[m>>2]=v,f=f+8|0,A=Ve(d[f>>2]|0,A)|0,d[f>>2]=A}function Uu(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;w=d[f>>2]|0,C=(w|0)<0,v=(d[f+4>>2]|0)-(C?w:0)|0,T=(v|0)<0,x=(T?0-v|0:0)+((d[f+8>>2]|0)-(C?w:0))|0,m=(x|0)<0,f=m?0:x,A=(T?0:v)-(m?x:0)|0,x=(C?0:w)-(T?v:0)-(m?x:0)|0,m=(A|0)<(x|0)?A:x,m=(f|0)<(m|0)?f:m,v=(m|0)>0,f=f-(v?m:0)|0,A=A-(v?m:0)|0;e:do switch(x-(v?m:0)|0){case 0:switch(A|0){case 0:return C=(f|0)==0?0:(f|0)==1?1:7,C|0;case 1:return C=(f|0)==0?2:(f|0)==1?3:7,C|0;default:break e}case 1:switch(A|0){case 0:return C=(f|0)==0?4:(f|0)==1?5:7,C|0;case 1:{if(!f)f=6;else break e;return f|0}default:break e}}while(!1);return C=7,C|0}function l4(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0;if(D=f+8|0,w=d[D>>2]|0,C=(d[f>>2]|0)-w|0,B=f+4|0,w=(d[B>>2]|0)-w|0,C>>>0>715827881|w>>>0>715827881){if(v=(C|0)>0,x=2147483647-C|0,T=-2147483648-C|0,(v?(x|0)<(C|0):(T|0)>(C|0))||(m=C<<1,v?(2147483647-m|0)<(C|0):(-2147483648-m|0)>(C|0))||((w|0)>0?(2147483647-w|0)<(w|0):(-2147483648-w|0)>(w|0))||(A=C*3|0,m=w<<1,(v?(x|0)<(m|0):(T|0)>(m|0))||((C|0)>-1?(A|-2147483648|0)>=(w|0):(A^-2147483648|0)<(w|0))))return B=1,B|0}else m=w<<1,A=C*3|0;return v=hl(+(A-w|0)*.14285714285714285)|0,d[f>>2]=v,x=hl(+(m+C|0)*.14285714285714285)|0,d[B>>2]=x,d[D>>2]=0,m=(x|0)<(v|0),A=m?v:x,m=m?x:v,(m|0)<0&&(((m|0)==-2147483648||((A|0)>0?(2147483647-A|0)<(m|0):(-2147483648-A|0)>(m|0)))&&qt(27795,26892,354,26903),((A|0)>-1?(A|-2147483648|0)>=(m|0):(A^-2147483648|0)<(m|0))&&qt(27795,26892,354,26903)),A=x-v|0,(v|0)<0?(m=0-v|0,d[B>>2]=A,d[D>>2]=m,d[f>>2]=0,v=0):(A=x,m=0),(A|0)<0&&(v=v-A|0,d[f>>2]=v,m=m-A|0,d[D>>2]=m,d[B>>2]=0,A=0),T=v-m|0,x=A-m|0,(m|0)<0?(d[f>>2]=T,d[B>>2]=x,d[D>>2]=0,A=x,x=T,m=0):x=v,v=(A|0)<(x|0)?A:x,v=(m|0)<(v|0)?m:v,(v|0)<=0?(B=0,B|0):(d[f>>2]=x-v,d[B>>2]=A-v,d[D>>2]=m-v,B=0,B|0)}function A9(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0,D=0;if(w=f+8|0,x=d[w>>2]|0,T=(d[f>>2]|0)-x|0,C=f+4|0,x=(d[C>>2]|0)-x|0,T>>>0>715827881|x>>>0>715827881){if(m=(T|0)>0,(m?(2147483647-T|0)<(T|0):(-2147483648-T|0)>(T|0))||(A=T<<1,v=(x|0)>0,v?(2147483647-x|0)<(x|0):(-2147483648-x|0)>(x|0)))return C=1,C|0;if(D=x<<1,(v?(2147483647-D|0)<(x|0):(-2147483648-D|0)>(x|0))||(m?(2147483647-A|0)<(x|0):(-2147483648-A|0)>(x|0))||(m=x*3|0,(x|0)>-1?(m|-2147483648|0)>=(T|0):(m^-2147483648|0)<(T|0)))return D=1,D|0}else m=x*3|0,A=T<<1;return v=hl(+(A+x|0)*.14285714285714285)|0,d[f>>2]=v,x=hl(+(m-T|0)*.14285714285714285)|0,d[C>>2]=x,d[w>>2]=0,m=(x|0)<(v|0),A=m?v:x,m=m?x:v,(m|0)<0&&(((m|0)==-2147483648||((A|0)>0?(2147483647-A|0)<(m|0):(-2147483648-A|0)>(m|0)))&&qt(27795,26892,402,26917),((A|0)>-1?(A|-2147483648|0)>=(m|0):(A^-2147483648|0)<(m|0))&&qt(27795,26892,402,26917)),A=x-v|0,(v|0)<0?(m=0-v|0,d[C>>2]=A,d[w>>2]=m,d[f>>2]=0,v=0):(A=x,m=0),(A|0)<0&&(v=v-A|0,d[f>>2]=v,m=m-A|0,d[w>>2]=m,d[C>>2]=0,A=0),T=v-m|0,x=A-m|0,(m|0)<0?(d[f>>2]=T,d[C>>2]=x,d[w>>2]=0,A=x,x=T,m=0):x=v,v=(A|0)<(x|0)?A:x,v=(m|0)<(v|0)?m:v,(v|0)<=0?(D=0,D|0):(d[f>>2]=x-v,d[C>>2]=A-v,d[w>>2]=m-v,D=0,D|0)}function p9(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;w=f+8|0,m=d[w>>2]|0,A=(d[f>>2]|0)-m|0,C=f+4|0,m=(d[C>>2]|0)-m|0,v=hl(+((A*3|0)-m|0)*.14285714285714285)|0,d[f>>2]=v,A=hl(+((m<<1)+A|0)*.14285714285714285)|0,d[C>>2]=A,d[w>>2]=0,m=A-v|0,(v|0)<0?(T=0-v|0,d[C>>2]=m,d[w>>2]=T,d[f>>2]=0,A=m,v=0,m=T):m=0,(A|0)<0&&(v=v-A|0,d[f>>2]=v,m=m-A|0,d[w>>2]=m,d[C>>2]=0,A=0),T=v-m|0,x=A-m|0,(m|0)<0?(d[f>>2]=T,d[C>>2]=x,d[w>>2]=0,A=x,x=T,m=0):x=v,v=(A|0)<(x|0)?A:x,v=(m|0)<(v|0)?m:v,!((v|0)<=0)&&(d[f>>2]=x-v,d[C>>2]=A-v,d[w>>2]=m-v)}function u4(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;w=f+8|0,m=d[w>>2]|0,A=(d[f>>2]|0)-m|0,C=f+4|0,m=(d[C>>2]|0)-m|0,v=hl(+((A<<1)+m|0)*.14285714285714285)|0,d[f>>2]=v,A=hl(+((m*3|0)-A|0)*.14285714285714285)|0,d[C>>2]=A,d[w>>2]=0,m=A-v|0,(v|0)<0?(T=0-v|0,d[C>>2]=m,d[w>>2]=T,d[f>>2]=0,A=m,v=0,m=T):m=0,(A|0)<0&&(v=v-A|0,d[f>>2]=v,m=m-A|0,d[w>>2]=m,d[C>>2]=0,A=0),T=v-m|0,x=A-m|0,(m|0)<0?(d[f>>2]=T,d[C>>2]=x,d[w>>2]=0,A=x,x=T,m=0):x=v,v=(A|0)<(x|0)?A:x,v=(m|0)<(v|0)?m:v,!((v|0)<=0)&&(d[f>>2]=x-v,d[C>>2]=A-v,d[w>>2]=m-v)}function kc(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;A=d[f>>2]|0,w=f+4|0,m=d[w>>2]|0,C=f+8|0,v=d[C>>2]|0,x=m+(A*3|0)|0,d[f>>2]=x,m=v+(m*3|0)|0,d[w>>2]=m,A=(v*3|0)+A|0,d[C>>2]=A,v=m-x|0,(x|0)<0?(A=A-x|0,d[w>>2]=v,d[C>>2]=A,d[f>>2]=0,m=v,v=0):v=x,(m|0)<0&&(v=v-m|0,d[f>>2]=v,A=A-m|0,d[C>>2]=A,d[w>>2]=0,m=0),T=v-A|0,x=m-A|0,(A|0)<0?(d[f>>2]=T,d[w>>2]=x,d[C>>2]=0,v=T,A=0):x=m,m=(x|0)<(v|0)?x:v,m=(A|0)<(m|0)?A:m,!((m|0)<=0)&&(d[f>>2]=v-m,d[w>>2]=x-m,d[C>>2]=A-m)}function Ou(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;x=d[f>>2]|0,w=f+4|0,A=d[w>>2]|0,C=f+8|0,m=d[C>>2]|0,v=(A*3|0)+x|0,x=m+(x*3|0)|0,d[f>>2]=x,d[w>>2]=v,A=(m*3|0)+A|0,d[C>>2]=A,m=v-x|0,(x|0)<0?(A=A-x|0,d[w>>2]=m,d[C>>2]=A,d[f>>2]=0,x=0):m=v,(m|0)<0&&(x=x-m|0,d[f>>2]=x,A=A-m|0,d[C>>2]=A,d[w>>2]=0,m=0),T=x-A|0,v=m-A|0,(A|0)<0?(d[f>>2]=T,d[w>>2]=v,d[C>>2]=0,x=T,A=0):v=m,m=(v|0)<(x|0)?v:x,m=(A|0)<(m|0)?A:m,!((m|0)<=0)&&(d[f>>2]=x-m,d[w>>2]=v-m,d[C>>2]=A-m)}function c4(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0;(A+-1|0)>>>0>=6||(x=(d[15440+(A*12|0)>>2]|0)+(d[f>>2]|0)|0,d[f>>2]=x,C=f+4|0,v=(d[15440+(A*12|0)+4>>2]|0)+(d[C>>2]|0)|0,d[C>>2]=v,w=f+8|0,A=(d[15440+(A*12|0)+8>>2]|0)+(d[w>>2]|0)|0,d[w>>2]=A,m=v-x|0,(x|0)<0?(A=A-x|0,d[C>>2]=m,d[w>>2]=A,d[f>>2]=0,v=0):(m=v,v=x),(m|0)<0&&(v=v-m|0,d[f>>2]=v,A=A-m|0,d[w>>2]=A,d[C>>2]=0,m=0),T=v-A|0,x=m-A|0,(A|0)<0?(d[f>>2]=T,d[C>>2]=x,d[w>>2]=0,v=T,A=0):x=m,m=(x|0)<(v|0)?x:v,m=(A|0)<(m|0)?A:m,!((m|0)<=0)&&(d[f>>2]=v-m,d[C>>2]=x-m,d[w>>2]=A-m))}function h4(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;x=d[f>>2]|0,w=f+4|0,A=d[w>>2]|0,C=f+8|0,m=d[C>>2]|0,v=A+x|0,x=m+x|0,d[f>>2]=x,d[w>>2]=v,A=m+A|0,d[C>>2]=A,m=v-x|0,(x|0)<0?(A=A-x|0,d[w>>2]=m,d[C>>2]=A,d[f>>2]=0,v=0):(m=v,v=x),(m|0)<0&&(v=v-m|0,d[f>>2]=v,A=A-m|0,d[C>>2]=A,d[w>>2]=0,m=0),T=v-A|0,x=m-A|0,(A|0)<0?(d[f>>2]=T,d[w>>2]=x,d[C>>2]=0,v=T,A=0):x=m,m=(x|0)<(v|0)?x:v,m=(A|0)<(m|0)?A:m,!((m|0)<=0)&&(d[f>>2]=v-m,d[w>>2]=x-m,d[C>>2]=A-m)}function Uh(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;A=d[f>>2]|0,w=f+4|0,v=d[w>>2]|0,C=f+8|0,m=d[C>>2]|0,x=v+A|0,d[f>>2]=x,v=m+v|0,d[w>>2]=v,A=m+A|0,d[C>>2]=A,m=v-x|0,(x|0)<0?(A=A-x|0,d[w>>2]=m,d[C>>2]=A,d[f>>2]=0,v=0):(m=v,v=x),(m|0)<0&&(v=v-m|0,d[f>>2]=v,A=A-m|0,d[C>>2]=A,d[w>>2]=0,m=0),T=v-A|0,x=m-A|0,(A|0)<0?(d[f>>2]=T,d[w>>2]=x,d[C>>2]=0,v=T,A=0):x=m,m=(x|0)<(v|0)?x:v,m=(A|0)<(m|0)?A:m,!((m|0)<=0)&&(d[f>>2]=v-m,d[w>>2]=x-m,d[C>>2]=A-m)}function Bu(f){switch(f=f|0,f|0){case 1:{f=5;break}case 5:{f=4;break}case 4:{f=6;break}case 6:{f=2;break}case 2:{f=3;break}case 3:{f=1;break}}return f|0}function sl(f){switch(f=f|0,f|0){case 1:{f=3;break}case 3:{f=2;break}case 2:{f=6;break}case 6:{f=4;break}case 4:{f=5;break}case 5:{f=1;break}}return f|0}function f4(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;A=d[f>>2]|0,w=f+4|0,m=d[w>>2]|0,C=f+8|0,v=d[C>>2]|0,x=m+(A<<1)|0,d[f>>2]=x,m=v+(m<<1)|0,d[w>>2]=m,A=(v<<1)+A|0,d[C>>2]=A,v=m-x|0,(x|0)<0?(A=A-x|0,d[w>>2]=v,d[C>>2]=A,d[f>>2]=0,m=v,v=0):v=x,(m|0)<0&&(v=v-m|0,d[f>>2]=v,A=A-m|0,d[C>>2]=A,d[w>>2]=0,m=0),T=v-A|0,x=m-A|0,(A|0)<0?(d[f>>2]=T,d[w>>2]=x,d[C>>2]=0,v=T,A=0):x=m,m=(x|0)<(v|0)?x:v,m=(A|0)<(m|0)?A:m,!((m|0)<=0)&&(d[f>>2]=v-m,d[w>>2]=x-m,d[C>>2]=A-m)}function d4(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;x=d[f>>2]|0,w=f+4|0,A=d[w>>2]|0,C=f+8|0,m=d[C>>2]|0,v=(A<<1)+x|0,x=m+(x<<1)|0,d[f>>2]=x,d[w>>2]=v,A=(m<<1)+A|0,d[C>>2]=A,m=v-x|0,(x|0)<0?(A=A-x|0,d[w>>2]=m,d[C>>2]=A,d[f>>2]=0,x=0):m=v,(m|0)<0&&(x=x-m|0,d[f>>2]=x,A=A-m|0,d[C>>2]=A,d[w>>2]=0,m=0),T=x-A|0,v=m-A|0,(A|0)<0?(d[f>>2]=T,d[w>>2]=v,d[C>>2]=0,x=T,A=0):v=m,m=(v|0)<(x|0)?v:x,m=(A|0)<(m|0)?A:m,!((m|0)<=0)&&(d[f>>2]=x-m,d[w>>2]=v-m,d[C>>2]=A-m)}function PA(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0;return w=(d[f>>2]|0)-(d[A>>2]|0)|0,C=(w|0)<0,v=(d[f+4>>2]|0)-(d[A+4>>2]|0)-(C?w:0)|0,T=(v|0)<0,x=(C?0-w|0:0)+(d[f+8>>2]|0)-(d[A+8>>2]|0)+(T?0-v|0:0)|0,f=(x|0)<0,A=f?0:x,m=(T?0:v)-(f?x:0)|0,x=(C?0:w)-(T?v:0)-(f?x:0)|0,f=(m|0)<(x|0)?m:x,f=(A|0)<(f|0)?A:f,v=(f|0)>0,A=A-(v?f:0)|0,m=m-(v?f:0)|0,f=x-(v?f:0)|0,f=(f|0)>-1?f:0-f|0,m=(m|0)>-1?m:0-m|0,A=(A|0)>-1?A:0-A|0,A=(m|0)>(A|0)?m:A,((f|0)>(A|0)?f:A)|0}function m9(f,A){f=f|0,A=A|0;var m=0;m=d[f+8>>2]|0,d[A>>2]=(d[f>>2]|0)-m,d[A+4>>2]=(d[f+4>>2]|0)-m}function DA(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0;return v=d[f>>2]|0,d[A>>2]=v,x=d[f+4>>2]|0,w=A+4|0,d[w>>2]=x,C=A+8|0,d[C>>2]=0,m=(x|0)<(v|0),f=m?v:x,m=m?x:v,(m|0)<0&&((m|0)==-2147483648||((f|0)>0?(2147483647-f|0)<(m|0):(-2147483648-f|0)>(m|0))||((f|0)>-1?(f|-2147483648|0)>=(m|0):(f^-2147483648|0)<(m|0)))?(A=1,A|0):(f=x-v|0,(v|0)<0?(m=0-v|0,d[w>>2]=f,d[C>>2]=m,d[A>>2]=0,v=0):(f=x,m=0),(f|0)<0&&(v=v-f|0,d[A>>2]=v,m=m-f|0,d[C>>2]=m,d[w>>2]=0,f=0),T=v-m|0,x=f-m|0,(m|0)<0?(d[A>>2]=T,d[w>>2]=x,d[C>>2]=0,f=x,x=T,m=0):x=v,v=(f|0)<(x|0)?f:x,v=(m|0)<(v|0)?m:v,(v|0)<=0?(A=0,A|0):(d[A>>2]=x-v,d[w>>2]=f-v,d[C>>2]=m-v,A=0,A|0))}function A4(f){f=f|0;var A=0,m=0,v=0,x=0;A=f+8|0,x=d[A>>2]|0,m=x-(d[f>>2]|0)|0,d[f>>2]=m,v=f+4|0,f=(d[v>>2]|0)-x|0,d[v>>2]=f,d[A>>2]=0-(f+m)}function g9(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;m=d[f>>2]|0,A=0-m|0,d[f>>2]=A,w=f+8|0,d[w>>2]=0,C=f+4|0,v=d[C>>2]|0,x=v+m|0,(m|0)>0?(d[C>>2]=x,d[w>>2]=m,d[f>>2]=0,A=0,v=x):m=0,(v|0)<0?(T=A-v|0,d[f>>2]=T,m=m-v|0,d[w>>2]=m,d[C>>2]=0,x=T-m|0,A=0-m|0,(m|0)<0?(d[f>>2]=x,d[C>>2]=A,d[w>>2]=0,v=A,m=0):(v=0,x=T)):x=A,A=(v|0)<(x|0)?v:x,A=(m|0)<(A|0)?m:A,!((A|0)<=0)&&(d[f>>2]=x-A,d[C>>2]=v-A,d[w>>2]=m-A)}function _9(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0,V=0,ie=0;if(ie=Q,Q=Q+64|0,V=ie,C=ie+56|0,!(!0&(A&2013265920|0)==134217728&(!0&(v&2013265920|0)==134217728)))return x=5,Q=ie,x|0;if((f|0)==(m|0)&(A|0)==(v|0))return d[x>>2]=0,x=0,Q=ie,x|0;if(w=mt(f|0,A|0,52)|0,Z()|0,w=w&15,B=mt(m|0,v|0,52)|0,Z()|0,(w|0)!=(B&15|0))return x=12,Q=ie,x|0;if(T=w+-1|0,w>>>0>1){Ih(f,A,T,V)|0,Ih(m,v,T,C)|0,B=V,D=d[B>>2]|0,B=d[B+4>>2]|0;e:do if((D|0)==(d[C>>2]|0)&&(B|0)==(d[C+4>>2]|0)){w=(w^15)*3|0,T=mt(f|0,A|0,w|0)|0,Z()|0,T=T&7,w=mt(m|0,v|0,w|0)|0,Z()|0,w=w&7;do if((T|0)==0|(w|0)==0)d[x>>2]=1,T=0;else if((T|0)==7)T=5;else{if((T|0)==1|(w|0)==1&&Ai(D,B)|0){T=5;break}if((d[15536+(T<<2)>>2]|0)!=(w|0)&&(d[15568+(T<<2)>>2]|0)!=(w|0))break e;d[x>>2]=1,T=0}while(!1);return x=T,Q=ie,x|0}while(!1)}T=V,w=T+56|0;do d[T>>2]=0,T=T+4|0;while((T|0)<(w|0));return Di(f,A,1,V)|0,A=V,!((d[A>>2]|0)==(m|0)&&(d[A+4>>2]|0)==(v|0))&&(A=V+8|0,!((d[A>>2]|0)==(m|0)&&(d[A+4>>2]|0)==(v|0)))&&(A=V+16|0,!((d[A>>2]|0)==(m|0)&&(d[A+4>>2]|0)==(v|0)))&&(A=V+24|0,!((d[A>>2]|0)==(m|0)&&(d[A+4>>2]|0)==(v|0)))&&(A=V+32|0,!((d[A>>2]|0)==(m|0)&&(d[A+4>>2]|0)==(v|0)))&&(A=V+40|0,!((d[A>>2]|0)==(m|0)&&(d[A+4>>2]|0)==(v|0)))?(T=V+48|0,T=((d[T>>2]|0)==(m|0)?(d[T+4>>2]|0)==(v|0):0)&1):T=1,d[x>>2]=T,x=0,Q=ie,x|0}function p4(f,A,m,v,x){return f=f|0,A=A|0,m=m|0,v=v|0,x=x|0,m=Er(f,A,m,v)|0,(m|0)==7?(x=11,x|0):(v=yt(m|0,0,56)|0,A=A&-2130706433|(Z()|0)|268435456,d[x>>2]=f|v,d[x+4>>2]=A,x=0,x|0)}function v9(f,A,m){return f=f|0,A=A|0,m=m|0,!0&(A&2013265920|0)==268435456?(d[m>>2]=f,d[m+4>>2]=A&-2130706433|134217728,m=0,m|0):(m=6,m|0)}function y9(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0;return x=Q,Q=Q+16|0,v=x,d[v>>2]=0,!0&(A&2013265920|0)==268435456?(T=mt(f|0,A|0,56)|0,Z()|0,v=Jn(f,A&-2130706433|134217728,T&7,v,m)|0,Q=x,v|0):(v=6,Q=x,v|0)}function x9(f,A){f=f|0,A=A|0;var m=0;switch(m=mt(f|0,A|0,56)|0,Z()|0,m&7){case 0:case 7:return m=0,m|0}return m=A&-2130706433|134217728,!(!0&(A&2013265920|0)==268435456)||!0&(A&117440512|0)==16777216&(Ai(f,m)|0)!=0?(m=0,m|0):(m=BA(f,m)|0,m|0)}function q9(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0;return x=Q,Q=Q+16|0,v=x,!0&(A&2013265920|0)==268435456?(T=A&-2130706433|134217728,w=m,d[w>>2]=f,d[w+4>>2]=T,d[v>>2]=0,A=mt(f|0,A|0,56)|0,Z()|0,v=Jn(f,T,A&7,v,m+8|0)|0,Q=x,v|0):(v=6,Q=x,v|0)}function b9(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0;return x=(Ai(f,A)|0)==0,A=A&-2130706433,v=m,d[v>>2]=x?f:0,d[v+4>>2]=x?A|285212672:0,v=m+8|0,d[v>>2]=f,d[v+4>>2]=A|301989888,v=m+16|0,d[v>>2]=f,d[v+4>>2]=A|318767104,v=m+24|0,d[v>>2]=f,d[v+4>>2]=A|335544320,v=m+32|0,d[v>>2]=f,d[v+4>>2]=A|352321536,m=m+40|0,d[m>>2]=f,d[m+4>>2]=A|369098752,0}function Oh(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0;return w=Q,Q=Q+16|0,x=w,T=A&-2130706433|134217728,!0&(A&2013265920|0)==268435456?(v=mt(f|0,A|0,56)|0,Z()|0,v=C4(f,T,v&7)|0,(v|0)==-1?(d[m>>2]=0,T=6,Q=w,T|0):(Ro(f,T,x)|0&&qt(27795,26932,282,26947),A=mt(f|0,A|0,52)|0,Z()|0,A=A&15,Ai(f,T)|0?LA(x,A,v,2,m):Bh(x,A,v,2,m),T=0,Q=w,T|0)):(T=6,Q=w,T|0)}function S9(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0;v=Q,Q=Q+16|0,x=v,T9(f,A,m,x),Lh(x,m+4|0),Q=v}function T9(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0;if(C=Q,Q=Q+16|0,D=C,w9(f,m,D),T=+Nu(+(1-+K[D>>3]*.5)),T<1e-16){d[v>>2]=0,d[v+4>>2]=0,d[v+8>>2]=0,d[v+12>>2]=0,Q=C;return}if(D=d[m>>2]|0,x=+K[15920+(D*24|0)>>3],x=+Qa(x-+Qa(+S4(15600+(D<<4)|0,f))),ga(A)|0?w=+Qa(x+-.3334731722518321):w=x,x=+Es(+T)*2.618033988749896,(A|0)>0){f=0;do x=x*2.6457513110645907,f=f+1|0;while((f|0)!=(A|0))}T=+jn(+w)*x,K[v>>3]=T,w=+Yt(+w)*x,K[v+8>>3]=w,Q=C}function w9(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0;if(T=Q,Q=Q+32|0,x=T,g0(f,x),d[A>>2]=0,K[m>>3]=5,v=+Zi(16400,x),v<+K[m>>3]&&(d[A>>2]=0,K[m>>3]=v),v=+Zi(16424,x),v<+K[m>>3]&&(d[A>>2]=1,K[m>>3]=v),v=+Zi(16448,x),v<+K[m>>3]&&(d[A>>2]=2,K[m>>3]=v),v=+Zi(16472,x),v<+K[m>>3]&&(d[A>>2]=3,K[m>>3]=v),v=+Zi(16496,x),v<+K[m>>3]&&(d[A>>2]=4,K[m>>3]=v),v=+Zi(16520,x),v<+K[m>>3]&&(d[A>>2]=5,K[m>>3]=v),v=+Zi(16544,x),v<+K[m>>3]&&(d[A>>2]=6,K[m>>3]=v),v=+Zi(16568,x),v<+K[m>>3]&&(d[A>>2]=7,K[m>>3]=v),v=+Zi(16592,x),v<+K[m>>3]&&(d[A>>2]=8,K[m>>3]=v),v=+Zi(16616,x),v<+K[m>>3]&&(d[A>>2]=9,K[m>>3]=v),v=+Zi(16640,x),v<+K[m>>3]&&(d[A>>2]=10,K[m>>3]=v),v=+Zi(16664,x),v<+K[m>>3]&&(d[A>>2]=11,K[m>>3]=v),v=+Zi(16688,x),v<+K[m>>3]&&(d[A>>2]=12,K[m>>3]=v),v=+Zi(16712,x),v<+K[m>>3]&&(d[A>>2]=13,K[m>>3]=v),v=+Zi(16736,x),v<+K[m>>3]&&(d[A>>2]=14,K[m>>3]=v),v=+Zi(16760,x),v<+K[m>>3]&&(d[A>>2]=15,K[m>>3]=v),v=+Zi(16784,x),v<+K[m>>3]&&(d[A>>2]=16,K[m>>3]=v),v=+Zi(16808,x),v<+K[m>>3]&&(d[A>>2]=17,K[m>>3]=v),v=+Zi(16832,x),v<+K[m>>3]&&(d[A>>2]=18,K[m>>3]=v),v=+Zi(16856,x),!(v<+K[m>>3])){Q=T;return}d[A>>2]=19,K[m>>3]=v,Q=T}function Iu(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0;if(T=+ju(f),T<1e-16){A=15600+(A<<4)|0,d[x>>2]=d[A>>2],d[x+4>>2]=d[A+4>>2],d[x+8>>2]=d[A+8>>2],d[x+12>>2]=d[A+12>>2];return}if(w=+Re(+ +K[f+8>>3],+ +K[f>>3]),(m|0)>0){f=0;do T=T*.37796447300922725,f=f+1|0;while((f|0)!=(m|0))}C=T*.3333333333333333,v?(m=(ga(m)|0)==0,T=+oe(+((m?C:C*.37796447300922725)*.381966011250105))):(T=+oe(+(T*.381966011250105)),ga(m)|0&&(w=+Qa(w+.3334731722518321))),T4(15600+(A<<4)|0,+Qa(+K[15920+(A*24|0)>>3]-w),T,x)}function A0(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0;v=Q,Q=Q+16|0,x=v,Lu(f+4|0,x),Iu(x,d[f>>2]|0,A,0,m),Q=v}function LA(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0,xt=0,Vt=0,gt=0,Ft=0,$t=0,Ln=0,tn=0,Ht=0,vt=0,xn=0,oi=0,wn=0;if(xn=Q,Q=Q+272|0,T=xn+256|0,Ue=xn+240|0,tn=xn,Ht=xn+224|0,vt=xn+208|0,Ce=xn+176|0,qe=xn+160|0,xt=xn+192|0,Vt=xn+144|0,gt=xn+128|0,Ft=xn+112|0,$t=xn+96|0,Ln=xn+80|0,d[T>>2]=A,d[Ue>>2]=d[f>>2],d[Ue+4>>2]=d[f+4>>2],d[Ue+8>>2]=d[f+8>>2],d[Ue+12>>2]=d[f+12>>2],UA(Ue,T,tn),d[x>>2]=0,Ue=v+m+((v|0)==5&1)|0,(Ue|0)<=(m|0)){Q=xn;return}D=d[T>>2]|0,B=Ht+4|0,V=Ce+4|0,ie=m+5|0,Ae=16880+(D<<2)|0,he=16960+(D<<2)|0,fe=gt+8|0,xe=Ft+8|0,Ee=$t+8|0,ze=vt+4|0,C=m;e:for(;;){w=tn+(((C|0)%5|0)<<4)|0,d[vt>>2]=d[w>>2],d[vt+4>>2]=d[w+4>>2],d[vt+8>>2]=d[w+8>>2],d[vt+12>>2]=d[w+12>>2];do;while((Fu(vt,D,0,1)|0)==2);if((C|0)>(m|0)&(ga(A)|0)!=0){if(d[Ce>>2]=d[vt>>2],d[Ce+4>>2]=d[vt+4>>2],d[Ce+8>>2]=d[vt+8>>2],d[Ce+12>>2]=d[vt+12>>2],Lu(B,qe),v=d[Ce>>2]|0,T=d[17040+(v*80|0)+(d[Ht>>2]<<2)>>2]|0,d[Ce>>2]=d[18640+(v*80|0)+(T*20|0)>>2],w=d[18640+(v*80|0)+(T*20|0)+16>>2]|0,(w|0)>0){f=0;do h4(V),f=f+1|0;while((f|0)<(w|0))}switch(w=18640+(v*80|0)+(T*20|0)+4|0,d[xt>>2]=d[w>>2],d[xt+4>>2]=d[w+4>>2],d[xt+8>>2]=d[w+8>>2],Fc(xt,(d[Ae>>2]|0)*3|0),Jr(V,xt,V),Mr(V),Lu(V,Vt),oi=+(d[he>>2]|0),K[gt>>3]=oi*3,K[fe>>3]=0,wn=oi*-1.5,K[Ft>>3]=wn,K[xe>>3]=oi*2.598076211353316,K[$t>>3]=wn,K[Ee>>3]=oi*-2.598076211353316,d[17040+((d[Ce>>2]|0)*80|0)+(d[vt>>2]<<2)>>2]|0){case 1:{f=Ft,v=gt;break}case 3:{f=$t,v=Ft;break}case 2:{f=gt,v=$t;break}default:{f=12;break e}}t2(qe,Vt,v,f,Ln),Iu(Ln,d[Ce>>2]|0,D,1,x+8+(d[x>>2]<<4)|0),d[x>>2]=(d[x>>2]|0)+1}if((C|0)<(ie|0)&&(Lu(ze,Ce),Iu(Ce,d[vt>>2]|0,D,1,x+8+(d[x>>2]<<4)|0),d[x>>2]=(d[x>>2]|0)+1),d[Ht>>2]=d[vt>>2],d[Ht+4>>2]=d[vt+4>>2],d[Ht+8>>2]=d[vt+8>>2],d[Ht+12>>2]=d[vt+12>>2],C=C+1|0,(C|0)>=(Ue|0)){f=3;break}}if((f|0)==3){Q=xn;return}else(f|0)==12&&qt(26970,27017,572,27027)}function UA(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0;D=Q,Q=Q+128|0,v=D+64|0,x=D,T=v,w=20240,C=T+60|0;do d[T>>2]=d[w>>2],T=T+4|0,w=w+4|0;while((T|0)<(C|0));T=x,w=20304,C=T+60|0;do d[T>>2]=d[w>>2],T=T+4|0,w=w+4|0;while((T|0)<(C|0));C=(ga(d[A>>2]|0)|0)==0,v=C?v:x,x=f+4|0,f4(x),d4(x),ga(d[A>>2]|0)|0&&(Ou(x),d[A>>2]=(d[A>>2]|0)+1),d[m>>2]=d[f>>2],A=m+4|0,Jr(x,v,A),Mr(A),d[m+16>>2]=d[f>>2],A=m+20|0,Jr(x,v+12|0,A),Mr(A),d[m+32>>2]=d[f>>2],A=m+36|0,Jr(x,v+24|0,A),Mr(A),d[m+48>>2]=d[f>>2],A=m+52|0,Jr(x,v+36|0,A),Mr(A),d[m+64>>2]=d[f>>2],m=m+68|0,Jr(x,v+48|0,m),Mr(m),Q=D}function Fu(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0;if(fe=Q,Q=Q+32|0,Ae=fe+12|0,C=fe,he=f+4|0,ie=d[16960+(A<<2)>>2]|0,V=(v|0)!=0,ie=V?ie*3|0:ie,x=d[he>>2]|0,B=f+8|0,w=d[B>>2]|0,V){if(T=f+12|0,v=d[T>>2]|0,x=w+x+v|0,(x|0)==(ie|0))return he=1,Q=fe,he|0;D=T}else D=f+12|0,v=d[D>>2]|0,x=w+x+v|0;if((x|0)<=(ie|0))return he=0,Q=fe,he|0;do if((v|0)>0){if(v=d[f>>2]|0,(w|0)>0){T=18640+(v*80|0)+60|0,v=f;break}v=18640+(v*80|0)+40|0,m?(Du(Ae,ie,0,0),d0(he,Ae,C),Uh(C),Jr(C,Ae,he),T=v,v=f):(T=v,v=f)}else T=18640+((d[f>>2]|0)*80|0)+20|0,v=f;while(!1);if(d[v>>2]=d[T>>2],x=T+16|0,(d[x>>2]|0)>0){v=0;do h4(he),v=v+1|0;while((v|0)<(d[x>>2]|0))}return f=T+4|0,d[Ae>>2]=d[f>>2],d[Ae+4>>2]=d[f+4>>2],d[Ae+8>>2]=d[f+8>>2],A=d[16880+(A<<2)>>2]|0,Fc(Ae,V?A*3|0:A),Jr(he,Ae,he),Mr(he),V?v=((d[B>>2]|0)+(d[he>>2]|0)+(d[D>>2]|0)|0)==(ie|0)?1:2:v=2,he=v,Q=fe,he|0}function m4(f,A){f=f|0,A=A|0;var m=0;do m=Fu(f,A,0,1)|0;while((m|0)==2);return m|0}function Bh(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0,xt=0,Vt=0,gt=0,Ft=0,$t=0,Ln=0,tn=0;if($t=Q,Q=Q+240|0,T=$t+224|0,xt=$t+208|0,Vt=$t,gt=$t+192|0,Ft=$t+176|0,Ee=$t+160|0,ze=$t+144|0,Ue=$t+128|0,Ce=$t+112|0,qe=$t+96|0,d[T>>2]=A,d[xt>>2]=d[f>>2],d[xt+4>>2]=d[f+4>>2],d[xt+8>>2]=d[f+8>>2],d[xt+12>>2]=d[f+12>>2],OA(xt,T,Vt),d[x>>2]=0,xe=v+m+((v|0)==6&1)|0,(xe|0)<=(m|0)){Q=$t;return}D=d[T>>2]|0,B=m+6|0,V=16960+(D<<2)|0,ie=ze+8|0,Ae=Ue+8|0,he=Ce+8|0,fe=gt+4|0,w=0,C=m,v=-1;e:for(;;){if(T=(C|0)%6|0,f=Vt+(T<<4)|0,d[gt>>2]=d[f>>2],d[gt+4>>2]=d[f+4>>2],d[gt+8>>2]=d[f+8>>2],d[gt+12>>2]=d[f+12>>2],f=w,w=Fu(gt,D,0,1)|0,(C|0)>(m|0)&(ga(A)|0)!=0&&(f|0)!=1&&(d[gt>>2]|0)!=(v|0)){switch(Lu(Vt+(((T+5|0)%6|0)<<4)+4|0,Ft),Lu(Vt+(T<<4)+4|0,Ee),Ln=+(d[V>>2]|0),K[ze>>3]=Ln*3,K[ie>>3]=0,tn=Ln*-1.5,K[Ue>>3]=tn,K[Ae>>3]=Ln*2.598076211353316,K[Ce>>3]=tn,K[he>>3]=Ln*-2.598076211353316,T=d[xt>>2]|0,d[17040+(T*80|0)+(((v|0)==(T|0)?d[gt>>2]|0:v)<<2)>>2]|0){case 1:{f=Ue,v=ze;break}case 3:{f=Ce,v=Ue;break}case 2:{f=ze,v=Ce;break}default:{f=8;break e}}t2(Ft,Ee,v,f,qe),!(n2(Ft,qe)|0)&&!(n2(Ee,qe)|0)&&(Iu(qe,d[xt>>2]|0,D,1,x+8+(d[x>>2]<<4)|0),d[x>>2]=(d[x>>2]|0)+1)}if((C|0)<(B|0)&&(Lu(fe,Ft),Iu(Ft,d[gt>>2]|0,D,1,x+8+(d[x>>2]<<4)|0),d[x>>2]=(d[x>>2]|0)+1),C=C+1|0,(C|0)>=(xe|0)){f=3;break}else v=d[gt>>2]|0}if((f|0)==3){Q=$t;return}else(f|0)==8&&qt(27054,27017,737,27099)}function OA(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0;D=Q,Q=Q+160|0,v=D+80|0,x=D,T=v,w=20368,C=T+72|0;do d[T>>2]=d[w>>2],T=T+4|0,w=w+4|0;while((T|0)<(C|0));T=x,w=20448,C=T+72|0;do d[T>>2]=d[w>>2],T=T+4|0,w=w+4|0;while((T|0)<(C|0));C=(ga(d[A>>2]|0)|0)==0,v=C?v:x,x=f+4|0,f4(x),d4(x),ga(d[A>>2]|0)|0&&(Ou(x),d[A>>2]=(d[A>>2]|0)+1),d[m>>2]=d[f>>2],A=m+4|0,Jr(x,v,A),Mr(A),d[m+16>>2]=d[f>>2],A=m+20|0,Jr(x,v+12|0,A),Mr(A),d[m+32>>2]=d[f>>2],A=m+36|0,Jr(x,v+24|0,A),Mr(A),d[m+48>>2]=d[f>>2],A=m+52|0,Jr(x,v+36|0,A),Mr(A),d[m+64>>2]=d[f>>2],A=m+68|0,Jr(x,v+48|0,A),Mr(A),d[m+80>>2]=d[f>>2],m=m+84|0,Jr(x,v+60|0,m),Mr(m),Q=D}function zc(f,A){return f=f|0,A=A|0,A=mt(f|0,A|0,52)|0,Z()|0,A&15|0}function g4(f,A){return f=f|0,A=A|0,A=mt(f|0,A|0,45)|0,Z()|0,A&127|0}function BA(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0;return!(!0&(A&-16777216|0)==134217728)||(v=mt(f|0,A|0,52)|0,Z()|0,v=v&15,m=mt(f|0,A|0,45)|0,Z()|0,m=m&127,m>>>0>121)?(f=0,f|0):(w=(v^15)*3|0,x=mt(f|0,A|0,w|0)|0,w=yt(x|0,Z()|0,w|0)|0,x=Z()|0,T=Ir(-1227133514,-1171,w|0,x|0)|0,!((w&613566756&T|0)==0&(x&4681&(Z()|0)|0)==0)||(w=(v*3|0)+19|0,T=yt(~f|0,~A|0,w|0)|0,w=mt(T|0,Z()|0,w|0)|0,!((v|0)==15|(w|0)==0&(Z()|0)==0))?(w=0,w|0):!(ft[20528+m>>0]|0)||(A=A&8191,(f|0)==0&(A|0)==0)?(w=1,w|0):(w=Zh(f|0,A|0)|0,Z()|0,((63-w|0)%3|0|0)!=0|0))}function IA(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0;if(x=yt(A|0,0,52)|0,T=Z()|0,m=yt(m|0,0,45)|0,m=T|(Z()|0)|134225919,(A|0)<1){T=-1,v=m,A=f,d[A>>2]=T,f=f+4|0,d[f>>2]=v;return}for(T=1,x=-1;w=(15-T|0)*3|0,C=yt(7,0,w|0)|0,m=m&~(Z()|0),w=yt(v|0,0,w|0)|0,x=x&~C|w,m=m|(Z()|0),(T|0)!=(A|0);)T=T+1|0;C=f,w=C,d[w>>2]=x,C=C+4|0,d[C>>2]=m}function Ih(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0;if(T=mt(f|0,A|0,52)|0,Z()|0,T=T&15,m>>>0>15)return v=4,v|0;if((T|0)<(m|0))return v=12,v|0;if((T|0)==(m|0))return d[v>>2]=f,d[v+4>>2]=A,v=0,v|0;if(x=yt(m|0,0,52)|0,x=x|f,f=Z()|0|A&-15728641,(T|0)>(m|0))do A=yt(7,0,(14-m|0)*3|0)|0,m=m+1|0,x=A|x,f=Z()|0|f;while((m|0)<(T|0));return d[v>>2]=x,d[v+4>>2]=f,v=0,v|0}function Gc(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0;if(T=mt(f|0,A|0,52)|0,Z()|0,T=T&15,!((m|0)<16&(T|0)<=(m|0)))return v=4,v|0;x=m-T|0,m=mt(f|0,A|0,45)|0,Z()|0;e:do if(!(Wi(m&127)|0))m=Za(7,0,x,((x|0)<0)<<31>>31)|0,x=Z()|0;else{t:do if(T|0){for(m=1;w=yt(7,0,(15-m|0)*3|0)|0,!!((w&f|0)==0&((Z()|0)&A|0)==0);)if(m>>>0<T>>>0)m=m+1|0;else break t;m=Za(7,0,x,((x|0)<0)<<31>>31)|0,x=Z()|0;break e}while(!1);m=Za(7,0,x,((x|0)<0)<<31>>31)|0,m=xr(m|0,Z()|0,5,0)|0,m=zt(m|0,Z()|0,-5,-1)|0,m=Uo(m|0,Z()|0,6,0)|0,m=zt(m|0,Z()|0,1,0)|0,x=Z()|0}while(!1);return w=v,d[w>>2]=m,d[w+4>>2]=x,w=0,w|0}function Ai(f,A){f=f|0,A=A|0;var m=0,v=0,x=0;if(x=mt(f|0,A|0,45)|0,Z()|0,!(Wi(x&127)|0))return x=0,x|0;x=mt(f|0,A|0,52)|0,Z()|0,x=x&15;e:do if(!x)m=0;else for(v=1;;){if(m=mt(f|0,A|0,(15-v|0)*3|0)|0,Z()|0,m=m&7,m|0)break e;if(v>>>0<x>>>0)v=v+1|0;else{m=0;break}}while(!1);return x=(m|0)==0&1,x|0}function p0(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0;if(w=Q,Q=Q+16|0,T=w,zu(T,f,A,m),A=T,f=d[A>>2]|0,A=d[A+4>>2]|0,(f|0)==0&(A|0)==0)return Q=w,0;x=0,m=0;do C=v+(x<<3)|0,d[C>>2]=f,d[C+4>>2]=A,x=zt(x|0,m|0,1,0)|0,m=Z()|0,zh(T),C=T,f=d[C>>2]|0,A=d[C+4>>2]|0;while(!((f|0)==0&(A|0)==0));return Q=w,0}function _4(f,A,m,v){return f=f|0,A=A|0,m=m|0,v=v|0,(v|0)<(m|0)?(m=A,v=f,ot(m|0),v|0):(m=yt(-1,-1,((v-m|0)*3|0)+3|0)|0,v=yt(~m|0,~(Z()|0)|0,(15-v|0)*3|0)|0,m=~(Z()|0)&A,v=~v&f,ot(m|0),v|0)}function m0(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0;return x=mt(f|0,A|0,52)|0,Z()|0,x=x&15,(m|0)<16&(x|0)<=(m|0)?((x|0)<(m|0)&&(x=yt(-1,-1,((m+-1-x|0)*3|0)+3|0)|0,x=yt(~x|0,~(Z()|0)|0,(15-m|0)*3|0)|0,A=~(Z()|0)&A,f=~x&f),x=yt(m|0,0,52)|0,m=A&-15728641|(Z()|0),d[v>>2]=f|x,d[v+4>>2]=m,v=0,v|0):(v=4,v|0)}function v4(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0,xt=0,Vt=0,gt=0,Ft=0,$t=0,Ln=0,tn=0,Ht=0,vt=0;if((m|0)==0&(v|0)==0)return vt=0,vt|0;if(x=f,T=d[x>>2]|0,x=d[x+4>>2]|0,!0&(x&15728640|0)==0){if(!((v|0)>0|(v|0)==0&m>>>0>0)||(vt=A,d[vt>>2]=T,d[vt+4>>2]=x,(m|0)==1&(v|0)==0))return vt=0,vt|0;x=1,T=0;do tn=f+(x<<3)|0,Ht=d[tn+4>>2]|0,vt=A+(x<<3)|0,d[vt>>2]=d[tn>>2],d[vt+4>>2]=Ht,x=zt(x|0,T|0,1,0)|0,T=Z()|0;while((T|0)<(v|0)|(T|0)==(v|0)&x>>>0<m>>>0);return x=0,x|0}if(Ln=m<<3,Ht=Lo(Ln)|0,!Ht)return vt=13,vt|0;if(Yu(Ht|0,f|0,Ln|0)|0,tn=xa(m,8)|0,!tn)return dn(Ht),vt=13,vt|0;e:for(;;){x=Ht,B=d[x>>2]|0,x=d[x+4>>2]|0,Ft=mt(B|0,x|0,52)|0,Z()|0,Ft=Ft&15,$t=Ft+-1|0,gt=(Ft|0)!=0,Vt=(v|0)>0|(v|0)==0&m>>>0>0;t:do if(gt&Vt){if(Ue=yt($t|0,0,52)|0,Ce=Z()|0,$t>>>0>15){if(!((B|0)==0&(x|0)==0)){vt=16;break e}for(T=0,f=0;;){if(T=zt(T|0,f|0,1,0)|0,f=Z()|0,!((f|0)<(v|0)|(f|0)==(v|0)&T>>>0<m>>>0))break t;if(w=Ht+(T<<3)|0,xt=d[w>>2]|0,w=d[w+4>>2]|0,!((xt|0)==0&(w|0)==0)){x=w,vt=16;break e}}}for(C=B,f=x,T=0,w=0;;){if(!((C|0)==0&(f|0)==0)){if(!(!0&(f&117440512|0)==0)){vt=21;break e}if(V=mt(C|0,f|0,52)|0,Z()|0,V=V&15,(V|0)<($t|0)){x=12,vt=27;break e}if((V|0)!=($t|0)&&(C=C|Ue,f=f&-15728641|Ce,V>>>0>=Ft>>>0)){D=$t;do xt=yt(7,0,(14-D|0)*3|0)|0,D=D+1|0,C=xt|C,f=Z()|0|f;while(D>>>0<V>>>0)}if(Ae=Qu(C|0,f|0,m|0,v|0)|0,he=Z()|0,D=tn+(Ae<<3)|0,V=D,ie=d[V>>2]|0,V=d[V+4>>2]|0,!((ie|0)==0&(V|0)==0)){Ee=0,ze=0;do{if((Ee|0)>(v|0)|(Ee|0)==(v|0)&ze>>>0>m>>>0){vt=31;break e}if((ie|0)==(C|0)&(V&-117440513|0)==(f|0)){fe=mt(ie|0,V|0,56)|0,Z()|0,fe=fe&7,xe=fe+1|0,xt=mt(ie|0,V|0,45)|0,Z()|0;n:do if(!(Wi(xt&127)|0))V=7;else{if(ie=mt(ie|0,V|0,52)|0,Z()|0,ie=ie&15,!ie){V=6;break}for(V=1;;){if(xt=yt(7,0,(15-V|0)*3|0)|0,!((xt&C|0)==0&((Z()|0)&f|0)==0)){V=7;break n}if(V>>>0<ie>>>0)V=V+1|0;else{V=6;break}}}while(!1);if((fe+2|0)>>>0>V>>>0){vt=41;break e}xt=yt(xe|0,0,56)|0,f=Z()|0|f&-117440513,qe=D,d[qe>>2]=0,d[qe+4>>2]=0,C=xt|C}else Ae=zt(Ae|0,he|0,1,0)|0,Ae=Kc(Ae|0,Z()|0,m|0,v|0)|0,he=Z()|0;ze=zt(ze|0,Ee|0,1,0)|0,Ee=Z()|0,D=tn+(Ae<<3)|0,V=D,ie=d[V>>2]|0,V=d[V+4>>2]|0}while(!((ie|0)==0&(V|0)==0))}xt=D,d[xt>>2]=C,d[xt+4>>2]=f}if(T=zt(T|0,w|0,1,0)|0,w=Z()|0,!((w|0)<(v|0)|(w|0)==(v|0)&T>>>0<m>>>0))break t;f=Ht+(T<<3)|0,C=d[f>>2]|0,f=d[f+4>>2]|0}}while(!1);if(xt=zt(m|0,v|0,5,0)|0,qe=Z()|0,qe>>>0<0|(qe|0)==0&xt>>>0<11){vt=85;break}if(xt=Uo(m|0,v|0,6,0)|0,Z()|0,xt=xa(xt,8)|0,!xt){vt=48;break}do if(Vt){for(xe=0,f=0,fe=0,Ee=0;;){if(V=tn+(xe<<3)|0,w=V,T=d[w>>2]|0,w=d[w+4>>2]|0,(T|0)==0&(w|0)==0)qe=fe;else{ie=mt(T|0,w|0,56)|0,Z()|0,ie=ie&7,C=ie+1|0,Ae=w&-117440513,qe=mt(T|0,w|0,45)|0,Z()|0;t:do if(Wi(qe&127)|0){if(he=mt(T|0,w|0,52)|0,Z()|0,he=he&15,he|0)for(D=1;;){if(qe=yt(7,0,(15-D|0)*3|0)|0,!((T&qe|0)==0&(Ae&(Z()|0)|0)==0))break t;if(D>>>0<he>>>0)D=D+1|0;else break}w=yt(C|0,0,56)|0,T=w|T,w=Z()|0|Ae,C=V,d[C>>2]=T,d[C+4>>2]=w,C=ie+2|0}while(!1);(C|0)==7?(qe=xt+(f<<3)|0,d[qe>>2]=T,d[qe+4>>2]=w&-117440513,f=zt(f|0,fe|0,1,0)|0,qe=Z()|0):qe=fe}if(xe=zt(xe|0,Ee|0,1,0)|0,Ee=Z()|0,(Ee|0)<(v|0)|(Ee|0)==(v|0)&xe>>>0<m>>>0)fe=qe;else break}if(Vt){if(ze=$t>>>0>15,Ue=yt($t|0,0,52)|0,Ce=Z()|0,!gt){for(T=0,D=0,C=0,w=0;(B|0)==0&(x|0)==0||($t=A+(T<<3)|0,d[$t>>2]=B,d[$t+4>>2]=x,T=zt(T|0,D|0,1,0)|0,D=Z()|0),C=zt(C|0,w|0,1,0)|0,w=Z()|0,!!((w|0)<(v|0)|(w|0)==(v|0)&C>>>0<m>>>0);)x=Ht+(C<<3)|0,B=d[x>>2]|0,x=d[x+4>>2]|0;x=qe;break}for(T=0,D=0,w=0,C=0;;){do if(!((B|0)==0&(x|0)==0)){if(he=mt(B|0,x|0,52)|0,Z()|0,he=he&15,ze|(he|0)<($t|0)){vt=80;break e}if((he|0)!=($t|0)){if(V=B|Ue,ie=x&-15728641|Ce,he>>>0>=Ft>>>0){Ae=$t;do gt=yt(7,0,(14-Ae|0)*3|0)|0,Ae=Ae+1|0,V=gt|V,ie=Z()|0|ie;while(Ae>>>0<he>>>0)}}else V=B,ie=x;fe=Qu(V|0,ie|0,m|0,v|0)|0,Ae=0,he=0,Ee=Z()|0;do{if((Ae|0)>(v|0)|(Ae|0)==(v|0)&he>>>0>m>>>0){vt=81;break e}if(gt=tn+(fe<<3)|0,xe=d[gt+4>>2]|0,(xe&-117440513|0)==(ie|0)&&(d[gt>>2]|0)==(V|0)){vt=65;break}gt=zt(fe|0,Ee|0,1,0)|0,fe=Kc(gt|0,Z()|0,m|0,v|0)|0,Ee=Z()|0,he=zt(he|0,Ae|0,1,0)|0,Ae=Z()|0,gt=tn+(fe<<3)|0}while(!((d[gt>>2]|0)==(V|0)&&(d[gt+4>>2]|0)==(ie|0)));if((vt|0)==65&&(vt=0,!0&(xe&117440512|0)==100663296))break;gt=A+(T<<3)|0,d[gt>>2]=B,d[gt+4>>2]=x,T=zt(T|0,D|0,1,0)|0,D=Z()|0}while(!1);if(w=zt(w|0,C|0,1,0)|0,C=Z()|0,!((C|0)<(v|0)|(C|0)==(v|0)&w>>>0<m>>>0))break;x=Ht+(w<<3)|0,B=d[x>>2]|0,x=d[x+4>>2]|0}x=qe}else T=0,x=qe}else T=0,f=0,x=0;while(!1);if(Oo(tn|0,0,Ln|0)|0,Yu(Ht|0,xt|0,f<<3|0)|0,dn(xt),(f|0)==0&(x|0)==0){vt=89;break}else A=A+(T<<3)|0,v=x,m=f}if((vt|0)==16)!0&(x&117440512|0)==0?(x=4,vt=27):vt=21;else if((vt|0)==31)qt(27795,27122,529,27132);else{if((vt|0)==41)return dn(Ht),dn(tn),vt=10,vt|0;if((vt|0)==48)return dn(Ht),dn(tn),vt=13,vt|0;(vt|0)==80?qt(27795,27122,620,27132):(vt|0)==81?qt(27795,27122,632,27132):(vt|0)==85&&(Yu(A|0,Ht|0,m<<3|0)|0,vt=89)}return(vt|0)==21?(dn(Ht),dn(tn),vt=5,vt|0):(vt|0)==27?(dn(Ht),dn(tn),vt=x,vt|0):(vt|0)==89?(dn(Ht),dn(tn),vt=0,vt|0):0}function y4(f,A,m,v,x,T,w){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0,T=T|0,w=w|0;var C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0;if(xe=Q,Q=Q+16|0,fe=xe,!((m|0)>0|(m|0)==0&A>>>0>0))return fe=0,Q=xe,fe|0;if((w|0)>=16)return fe=12,Q=xe,fe|0;Ae=0,he=0,ie=0,C=0;e:for(;;){if(B=f+(Ae<<3)|0,D=d[B>>2]|0,B=d[B+4>>2]|0,V=mt(D|0,B|0,52)|0,Z()|0,(V&15|0)>(w|0)){C=12,D=11;break}if(zu(fe,D,B,w),V=fe,B=d[V>>2]|0,V=d[V+4>>2]|0,(B|0)==0&(V|0)==0)D=ie;else{D=ie;do{if(!((C|0)<(T|0)|(C|0)==(T|0)&D>>>0<x>>>0)){D=10;break e}ie=v+(D<<3)|0,d[ie>>2]=B,d[ie+4>>2]=V,D=zt(D|0,C|0,1,0)|0,C=Z()|0,zh(fe),ie=fe,B=d[ie>>2]|0,V=d[ie+4>>2]|0}while(!((B|0)==0&(V|0)==0))}if(Ae=zt(Ae|0,he|0,1,0)|0,he=Z()|0,(he|0)<(m|0)|(he|0)==(m|0)&Ae>>>0<A>>>0)ie=D;else{C=0,D=11;break}}return(D|0)==10?(fe=14,Q=xe,fe|0):(D|0)==11?(Q=xe,C|0):0}function FA(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0;Ae=Q,Q=Q+16|0,ie=Ae;e:do if((m|0)>0|(m|0)==0&A>>>0>0){for(B=0,w=0,T=0,V=0;;){if(D=f+(B<<3)|0,C=d[D>>2]|0,D=d[D+4>>2]|0,!((C|0)==0&(D|0)==0)&&(D=(Gc(C,D,v,ie)|0)==0,C=ie,w=zt(d[C>>2]|0,d[C+4>>2]|0,w|0,T|0)|0,T=Z()|0,!D)){T=12;break}if(B=zt(B|0,V|0,1,0)|0,V=Z()|0,!((V|0)<(m|0)|(V|0)==(m|0)&B>>>0<A>>>0))break e}return Q=Ae,T|0}else w=0,T=0;while(!1);return d[x>>2]=w,d[x+4>>2]=T,x=0,Q=Ae,x|0}function kA(f,A){return f=f|0,A=A|0,A=mt(f|0,A|0,52)|0,Z()|0,A&1|0}function Ms(f,A){f=f|0,A=A|0;var m=0,v=0,x=0;if(x=mt(f|0,A|0,52)|0,Z()|0,x=x&15,!x)return x=0,x|0;for(v=1;;){if(m=mt(f|0,A|0,(15-v|0)*3|0)|0,Z()|0,m=m&7,m|0){v=5;break}if(v>>>0<x>>>0)v=v+1|0;else{m=0,v=5;break}}return(v|0)==5?m|0:0}function Fh(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0,D=0;if(D=mt(f|0,A|0,52)|0,Z()|0,D=D&15,!D)return C=A,D=f,ot(C|0),D|0;for(C=1,m=0;;){T=(15-C|0)*3|0,v=yt(7,0,T|0)|0,x=Z()|0,w=mt(f|0,A|0,T|0)|0,Z()|0,T=yt(Bu(w&7)|0,0,T|0)|0,w=Z()|0,f=T|f&~v,A=w|A&~x;e:do if(!m)if((T&v|0)==0&(w&x|0)==0)m=0;else if(v=mt(f|0,A|0,52)|0,Z()|0,v=v&15,!v)m=1;else{m=1;t:for(;;){switch(w=mt(f|0,A|0,(15-m|0)*3|0)|0,Z()|0,w&7){case 1:break t;case 0:break;default:{m=1;break e}}if(m>>>0<v>>>0)m=m+1|0;else{m=1;break e}}for(m=1;;)if(w=(15-m|0)*3|0,x=mt(f|0,A|0,w|0)|0,Z()|0,T=yt(7,0,w|0)|0,A=A&~(Z()|0),w=yt(Bu(x&7)|0,0,w|0)|0,f=f&~T|w,A=A|(Z()|0),m>>>0<v>>>0)m=m+1|0;else{m=1;break}}while(!1);if(C>>>0<D>>>0)C=C+1|0;else break}return ot(A|0),f|0}function kl(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0;if(v=mt(f|0,A|0,52)|0,Z()|0,v=v&15,!v)return m=A,v=f,ot(m|0),v|0;for(m=1;T=(15-m|0)*3|0,w=mt(f|0,A|0,T|0)|0,Z()|0,x=yt(7,0,T|0)|0,A=A&~(Z()|0),T=yt(Bu(w&7)|0,0,T|0)|0,f=T|f&~x,A=Z()|0|A,m>>>0<v>>>0;)m=m+1|0;return ot(A|0),f|0}function E9(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0,D=0;if(D=mt(f|0,A|0,52)|0,Z()|0,D=D&15,!D)return C=A,D=f,ot(C|0),D|0;for(C=1,m=0;;){T=(15-C|0)*3|0,v=yt(7,0,T|0)|0,x=Z()|0,w=mt(f|0,A|0,T|0)|0,Z()|0,T=yt(sl(w&7)|0,0,T|0)|0,w=Z()|0,f=T|f&~v,A=w|A&~x;e:do if(!m)if((T&v|0)==0&(w&x|0)==0)m=0;else if(v=mt(f|0,A|0,52)|0,Z()|0,v=v&15,!v)m=1;else{m=1;t:for(;;){switch(w=mt(f|0,A|0,(15-m|0)*3|0)|0,Z()|0,w&7){case 1:break t;case 0:break;default:{m=1;break e}}if(m>>>0<v>>>0)m=m+1|0;else{m=1;break e}}for(m=1;;)if(x=(15-m|0)*3|0,T=yt(7,0,x|0)|0,w=A&~(Z()|0),A=mt(f|0,A|0,x|0)|0,Z()|0,A=yt(sl(A&7)|0,0,x|0)|0,f=f&~T|A,A=w|(Z()|0),m>>>0<v>>>0)m=m+1|0;else{m=1;break}}while(!1);if(C>>>0<D>>>0)C=C+1|0;else break}return ot(A|0),f|0}function zA(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0;if(v=mt(f|0,A|0,52)|0,Z()|0,v=v&15,!v)return m=A,v=f,ot(m|0),v|0;for(m=1;w=(15-m|0)*3|0,T=yt(7,0,w|0)|0,x=A&~(Z()|0),A=mt(f|0,A|0,w|0)|0,Z()|0,A=yt(sl(A&7)|0,0,w|0)|0,f=A|f&~T,A=Z()|0|x,m>>>0<v>>>0;)m=m+1|0;return ot(A|0),f|0}function M9(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0;if(D=Q,Q=Q+64|0,C=D+40|0,v=D+24|0,x=D+12|0,T=D,yt(A|0,0,52)|0,m=Z()|0|134225919,!A)return(d[f+4>>2]|0)>2||(d[f+8>>2]|0)>2||(d[f+12>>2]|0)>2?(w=0,C=0,ot(w|0),Q=D,C|0):(yt(a0(f)|0,0,45)|0,w=Z()|0|m,C=-1,ot(w|0),Q=D,C|0);if(d[C>>2]=d[f>>2],d[C+4>>2]=d[f+4>>2],d[C+8>>2]=d[f+8>>2],d[C+12>>2]=d[f+12>>2],w=C+4|0,(A|0)>0)for(f=-1;d[v>>2]=d[w>>2],d[v+4>>2]=d[w+4>>2],d[v+8>>2]=d[w+8>>2],A&1?(p9(w),d[x>>2]=d[w>>2],d[x+4>>2]=d[w+4>>2],d[x+8>>2]=d[w+8>>2],kc(x)):(u4(w),d[x>>2]=d[w>>2],d[x+4>>2]=d[w+4>>2],d[x+8>>2]=d[w+8>>2],Ou(x)),d0(v,x,T),Mr(T),V=(15-A|0)*3|0,B=yt(7,0,V|0)|0,m=m&~(Z()|0),V=yt(Uu(T)|0,0,V|0)|0,f=V|f&~B,m=Z()|0|m,(A|0)>1;)A=A+-1|0;else f=-1;e:do if((d[w>>2]|0)<=2&&(d[C+8>>2]|0)<=2&&(d[C+12>>2]|0)<=2){if(v=a0(C)|0,A=yt(v|0,0,45)|0,A=A|f,f=Z()|0|m&-1040385,T=RA(C)|0,!(Wi(v)|0)){if((T|0)<=0)break;for(x=0;;){if(v=mt(A|0,f|0,52)|0,Z()|0,v=v&15,v)for(m=1;V=(15-m|0)*3|0,C=mt(A|0,f|0,V|0)|0,Z()|0,B=yt(7,0,V|0)|0,f=f&~(Z()|0),V=yt(Bu(C&7)|0,0,V|0)|0,A=A&~B|V,f=f|(Z()|0),m>>>0<v>>>0;)m=m+1|0;if(x=x+1|0,(x|0)==(T|0))break e}}x=mt(A|0,f|0,52)|0,Z()|0,x=x&15;t:do if(x){m=1;n:for(;;){switch(V=mt(A|0,f|0,(15-m|0)*3|0)|0,Z()|0,V&7){case 1:break n;case 0:break;default:break t}if(m>>>0<x>>>0)m=m+1|0;else break t}if(Pu(v,d[C>>2]|0)|0)for(m=1;C=(15-m|0)*3|0,B=yt(7,0,C|0)|0,V=f&~(Z()|0),f=mt(A|0,f|0,C|0)|0,Z()|0,f=yt(sl(f&7)|0,0,C|0)|0,A=A&~B|f,f=V|(Z()|0),m>>>0<x>>>0;)m=m+1|0;else for(m=1;V=(15-m|0)*3|0,C=mt(A|0,f|0,V|0)|0,Z()|0,B=yt(7,0,V|0)|0,f=f&~(Z()|0),V=yt(Bu(C&7)|0,0,V|0)|0,A=A&~B|V,f=f|(Z()|0),m>>>0<x>>>0;)m=m+1|0}while(!1);if((T|0)>0){m=0;do A=Fh(A,f)|0,f=Z()|0,m=m+1|0;while((m|0)!=(T|0))}}else A=0,f=0;while(!1);return B=f,V=A,ot(B|0),Q=D,V|0}function ga(f){return f=f|0,(f|0)%2|0|0}function GA(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0;return x=Q,Q=Q+16|0,v=x,A>>>0>15?(v=4,Q=x,v|0):(d[f+4>>2]&2146435072|0)==2146435072||(d[f+8+4>>2]&2146435072|0)==2146435072?(v=3,Q=x,v|0):(S9(f,A,v),A=M9(v,A)|0,v=Z()|0,d[m>>2]=A,d[m+4>>2]=v,(A|0)==0&(v|0)==0&&qt(27795,27122,959,27145),v=0,Q=x,v|0)}function Rs(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0;if(x=m+4|0,T=mt(f|0,A|0,52)|0,Z()|0,T=T&15,w=mt(f|0,A|0,45)|0,Z()|0,v=(T|0)==0,Wi(w&127)|0){if(v)return w=1,w|0;v=1}else{if(v)return w=0,w|0;(d[x>>2]|0)==0&&(d[m+8>>2]|0)==0?v=(d[m+12>>2]|0)!=0&1:v=1}for(m=1;m&1?kc(x):Ou(x),w=mt(f|0,A|0,(15-m|0)*3|0)|0,Z()|0,c4(x,w&7),m>>>0<T>>>0;)m=m+1|0;return v|0}function Ro(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0;if(V=Q,Q=Q+16|0,D=V,B=mt(f|0,A|0,45)|0,Z()|0,B=B&127,B>>>0>121)return d[m>>2]=0,d[m+4>>2]=0,d[m+8>>2]=0,d[m+12>>2]=0,B=5,Q=V,B|0;e:do if((Wi(B)|0)!=0&&(T=mt(f|0,A|0,52)|0,Z()|0,T=T&15,(T|0)!=0)){v=1;t:for(;;){switch(C=mt(f|0,A|0,(15-v|0)*3|0)|0,Z()|0,C&7){case 5:break t;case 0:break;default:{v=A;break e}}if(v>>>0<T>>>0)v=v+1|0;else{v=A;break e}}for(x=1,v=A;A=(15-x|0)*3|0,w=yt(7,0,A|0)|0,C=v&~(Z()|0),v=mt(f|0,v|0,A|0)|0,Z()|0,v=yt(sl(v&7)|0,0,A|0)|0,f=f&~w|v,v=C|(Z()|0),x>>>0<T>>>0;)x=x+1|0}else v=A;while(!1);if(C=7696+(B*28|0)|0,d[m>>2]=d[C>>2],d[m+4>>2]=d[C+4>>2],d[m+8>>2]=d[C+8>>2],d[m+12>>2]=d[C+12>>2],!(Rs(f,v,m)|0))return B=0,Q=V,B|0;if(w=m+4|0,d[D>>2]=d[w>>2],d[D+4>>2]=d[w+4>>2],d[D+8>>2]=d[w+8>>2],T=mt(f|0,v|0,52)|0,Z()|0,C=T&15,T&1?(Ou(w),T=C+1|0):T=C,!(Wi(B)|0))v=0;else{e:do if(!C)v=0;else for(A=1;;){if(x=mt(f|0,v|0,(15-A|0)*3|0)|0,Z()|0,x=x&7,x|0){v=x;break e}if(A>>>0<C>>>0)A=A+1|0;else{v=0;break}}while(!1);v=(v|0)==4&1}if(!(Fu(m,T,v,0)|0))(T|0)!=(C|0)&&(d[w>>2]=d[D>>2],d[w+4>>2]=d[D+4>>2],d[w+8>>2]=d[D+8>>2]);else{if(Wi(B)|0)do;while((Fu(m,T,0,0)|0)!=0);(T|0)!=(C|0)&&u4(w)}return B=0,Q=V,B|0}function zl(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0;return T=Q,Q=Q+16|0,v=T,x=Ro(f,A,v)|0,x|0?(Q=T,x|0):(x=mt(f|0,A|0,52)|0,Z()|0,A0(v,x&15,m),x=0,Q=T,x|0)}function ku(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0;if(w=Q,Q=Q+16|0,T=w,v=Ro(f,A,T)|0,v|0)return T=v,Q=w,T|0;v=mt(f|0,A|0,45)|0,Z()|0,v=(Wi(v&127)|0)==0,x=mt(f|0,A|0,52)|0,Z()|0,x=x&15;e:do if(!v){if(x|0)for(v=1;;){if(C=yt(7,0,(15-v|0)*3|0)|0,!((C&f|0)==0&((Z()|0)&A|0)==0))break e;if(v>>>0<x>>>0)v=v+1|0;else break}return LA(T,x,0,5,m),C=0,Q=w,C|0}while(!1);return Bh(T,x,0,6,m),C=0,Q=w,C|0}function x4(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0;if(x=mt(f|0,A|0,45)|0,Z()|0,!(Wi(x&127)|0))return x=2,d[m>>2]=x,0;if(x=mt(f|0,A|0,52)|0,Z()|0,x=x&15,!x)return x=5,d[m>>2]=x,0;for(v=1;;){if(T=yt(7,0,(15-v|0)*3|0)|0,!((T&f|0)==0&((Z()|0)&A|0)==0)){v=2,f=6;break}if(v>>>0<x>>>0)v=v+1|0;else{v=5,f=6;break}}return(f|0)==6&&(d[m>>2]=v),0}function VA(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0;ie=Q,Q=Q+128|0,B=ie+112|0,T=ie+96|0,V=ie,x=mt(f|0,A|0,52)|0,Z()|0,C=x&15,d[B>>2]=C,w=mt(f|0,A|0,45)|0,Z()|0,w=w&127;e:do if(Wi(w)|0){if(C|0)for(v=1;;){if(D=yt(7,0,(15-v|0)*3|0)|0,!((D&f|0)==0&((Z()|0)&A|0)==0)){x=0;break e}if(v>>>0<C>>>0)v=v+1|0;else break}if(x&1)x=1;else return D=yt(C+1|0,0,52)|0,V=Z()|0|A&-15728641,B=yt(7,0,(14-C|0)*3|0)|0,V=VA((D|f)&~B,V&~(Z()|0),m)|0,Q=ie,V|0}else x=0;while(!1);if(v=Ro(f,A,T)|0,!v){x?(UA(T,B,V),D=5):(OA(T,B,V),D=6);e:do if(Wi(w)|0)if(!C)f=5;else for(v=1;;){if(w=yt(7,0,(15-v|0)*3|0)|0,!((w&f|0)==0&((Z()|0)&A|0)==0)){f=2;break e}if(v>>>0<C>>>0)v=v+1|0;else{f=5;break}}else f=2;while(!1);Oo(m|0,-1,f<<2|0)|0;e:do if(x)for(T=0;;){if(w=V+(T<<4)|0,m4(w,d[B>>2]|0)|0,w=d[w>>2]|0,C=d[m>>2]|0,(C|0)==-1|(C|0)==(w|0))v=m;else{x=0;do{if(x=x+1|0,x>>>0>=f>>>0){v=1;break e}v=m+(x<<2)|0,C=d[v>>2]|0}while(!((C|0)==-1|(C|0)==(w|0)))}if(d[v>>2]=w,T=T+1|0,T>>>0>=D>>>0){v=0;break}}else for(T=0;;){if(w=V+(T<<4)|0,Fu(w,d[B>>2]|0,0,1)|0,w=d[w>>2]|0,C=d[m>>2]|0,(C|0)==-1|(C|0)==(w|0))v=m;else{x=0;do{if(x=x+1|0,x>>>0>=f>>>0){v=1;break e}v=m+(x<<2)|0,C=d[v>>2]|0}while(!((C|0)==-1|(C|0)==(w|0)))}if(d[v>>2]=w,T=T+1|0,T>>>0>=D>>>0){v=0;break}}while(!1)}return V=v,Q=ie,V|0}function HA(){return 12}function jA(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0,D=0;if(f>>>0>15)return C=4,C|0;if(yt(f|0,0,52)|0,C=Z()|0|134225919,!f){m=0,v=0;do Wi(v)|0&&(yt(v|0,0,45)|0,w=C|(Z()|0),f=A+(m<<3)|0,d[f>>2]=-1,d[f+4>>2]=w,m=m+1|0),v=v+1|0;while((v|0)!=122);return m=0,m|0}m=0,w=0;do{if(Wi(w)|0){for(yt(w|0,0,45)|0,v=1,x=-1,T=C|(Z()|0);D=yt(7,0,(15-v|0)*3|0)|0,x=x&~D,T=T&~(Z()|0),(v|0)!=(f|0);)v=v+1|0;D=A+(m<<3)|0,d[D>>2]=x,d[D+4>>2]=T,m=m+1|0}w=w+1|0}while((w|0)!=122);return m=0,m|0}function Vc(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0;if(Ue=Q,Q=Q+16|0,Ee=Ue,ze=mt(f|0,A|0,52)|0,Z()|0,ze=ze&15,m>>>0>15)return ze=4,Q=Ue,ze|0;if((ze|0)<(m|0))return ze=12,Q=Ue,ze|0;if((ze|0)!=(m|0))if(T=yt(m|0,0,52)|0,T=T|f,C=Z()|0|A&-15728641,(ze|0)>(m|0)){D=m;do xe=yt(7,0,(14-D|0)*3|0)|0,D=D+1|0,T=xe|T,C=Z()|0|C;while((D|0)<(ze|0));xe=T}else xe=T;else xe=f,C=A;fe=mt(xe|0,C|0,45)|0,Z()|0;e:do if(Wi(fe&127)|0){if(D=mt(xe|0,C|0,52)|0,Z()|0,D=D&15,D|0)for(T=1;;){if(fe=yt(7,0,(15-T|0)*3|0)|0,!((fe&xe|0)==0&((Z()|0)&C|0)==0)){B=33;break e}if(T>>>0<D>>>0)T=T+1|0;else break}if(fe=v,d[fe>>2]=0,d[fe+4>>2]=0,(ze|0)>(m|0)){for(fe=A&-15728641,he=ze;;){if(Ae=he,he=he+-1|0,he>>>0>15|(ze|0)<(he|0)){B=19;break}if((ze|0)!=(he|0))if(T=yt(he|0,0,52)|0,T=T|f,D=Z()|0|fe,(ze|0)<(Ae|0))ie=T;else{B=he;do ie=yt(7,0,(14-B|0)*3|0)|0,B=B+1|0,T=ie|T,D=Z()|0|D;while((B|0)<(ze|0));ie=T}else ie=f,D=A;if(V=mt(ie|0,D|0,45)|0,Z()|0,!(Wi(V&127)|0))T=0;else{V=mt(ie|0,D|0,52)|0,Z()|0,V=V&15;t:do if(!V)T=0;else for(B=1;;){if(T=mt(ie|0,D|0,(15-B|0)*3|0)|0,Z()|0,T=T&7,T|0)break t;if(B>>>0<V>>>0)B=B+1|0;else{T=0;break}}while(!1);T=(T|0)==0&1}if(D=mt(f|0,A|0,(15-Ae|0)*3|0)|0,Z()|0,D=D&7,(D|0)==7){x=5,B=42;break}if(T=(T|0)!=0,(D|0)==1&T){x=5,B=42;break}if(ie=D+(((D|0)!=0&T)<<31>>31)|0,ie|0&&(B=ze-Ae|0,B=Za(7,0,B,((B|0)<0)<<31>>31)|0,V=Z()|0,T?(T=xr(B|0,V|0,5,0)|0,T=zt(T|0,Z()|0,-5,-1)|0,T=Uo(T|0,Z()|0,6,0)|0,T=zt(T|0,Z()|0,1,0)|0,D=Z()|0):(T=B,D=V),Ae=ie+-1|0,Ae=xr(B|0,V|0,Ae|0,((Ae|0)<0)<<31>>31|0)|0,Ae=zt(T|0,D|0,Ae|0,Z()|0)|0,ie=Z()|0,V=v,V=zt(Ae|0,ie|0,d[V>>2]|0,d[V+4>>2]|0)|0,ie=Z()|0,Ae=v,d[Ae>>2]=V,d[Ae+4>>2]=ie),(he|0)<=(m|0)){B=37;break}}if((B|0)==19)qt(27795,27122,1276,27158);else if((B|0)==37){w=v,x=d[w+4>>2]|0,w=d[w>>2]|0;break}else if((B|0)==42)return Q=Ue,x|0}else x=0,w=0}else B=33;while(!1);e:do if((B|0)==33)if(fe=v,d[fe>>2]=0,d[fe+4>>2]=0,(ze|0)>(m|0)){for(T=ze;;){if(x=mt(f|0,A|0,(15-T|0)*3|0)|0,Z()|0,x=x&7,(x|0)==7){x=5;break}if(w=ze-T|0,w=Za(7,0,w,((w|0)<0)<<31>>31)|0,x=xr(w|0,Z()|0,x|0,0)|0,w=Z()|0,fe=v,w=zt(d[fe>>2]|0,d[fe+4>>2]|0,x|0,w|0)|0,x=Z()|0,fe=v,d[fe>>2]=w,d[fe+4>>2]=x,T=T+-1|0,(T|0)<=(m|0))break e}return Q=Ue,x|0}else x=0,w=0;while(!1);return Gc(xe,C,ze,Ee)|0&&qt(27795,27122,1236,27173),ze=Ee,Ee=d[ze+4>>2]|0,((x|0)>-1|(x|0)==-1&w>>>0>4294967295)&((Ee|0)>(x|0)|((Ee|0)==(x|0)?(d[ze>>2]|0)>>>0>w>>>0:0))?(ze=0,Q=Ue,ze|0):(qt(27795,27122,1316,27158),0)}function WA(f,A,m,v,x,T){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0,T=T|0;var w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0;if(ie=Q,Q=Q+16|0,w=ie,x>>>0>15)return T=4,Q=ie,T|0;if(C=mt(m|0,v|0,52)|0,Z()|0,C=C&15,(C|0)>(x|0))return T=12,Q=ie,T|0;if(Gc(m,v,x,w)|0&&qt(27795,27122,1236,27173),V=w,B=d[V+4>>2]|0,!(((A|0)>-1|(A|0)==-1&f>>>0>4294967295)&((B|0)>(A|0)|((B|0)==(A|0)?(d[V>>2]|0)>>>0>f>>>0:0))))return T=2,Q=ie,T|0;V=x-C|0,x=yt(x|0,0,52)|0,D=Z()|0|v&-15728641,B=T,d[B>>2]=x|m,d[B+4>>2]=D,B=mt(m|0,v|0,45)|0,Z()|0;e:do if(Wi(B&127)|0){if(C|0)for(w=1;;){if(B=yt(7,0,(15-w|0)*3|0)|0,!((B&m|0)==0&((Z()|0)&v|0)==0))break e;if(w>>>0<C>>>0)w=w+1|0;else break}if((V|0)<1)return T=0,Q=ie,T|0;for(B=C^15,v=-1,D=1,w=1;;){C=V-D|0,C=Za(7,0,C,((C|0)<0)<<31>>31)|0,m=Z()|0;do if(w)if(w=xr(C|0,m|0,5,0)|0,w=zt(w|0,Z()|0,-5,-1)|0,w=Uo(w|0,Z()|0,6,0)|0,x=Z()|0,(A|0)>(x|0)|(A|0)==(x|0)&f>>>0>w>>>0){A=zt(f|0,A|0,-1,-1)|0,A=Ir(A|0,Z()|0,w|0,x|0)|0,w=Z()|0,Ae=T,fe=d[Ae>>2]|0,Ae=d[Ae+4>>2]|0,xe=(B+v|0)*3|0,he=yt(7,0,xe|0)|0,Ae=Ae&~(Z()|0),v=Uo(A|0,w|0,C|0,m|0)|0,f=Z()|0,x=zt(v|0,f|0,2,0)|0,xe=yt(x|0,Z()|0,xe|0)|0,Ae=Z()|0|Ae,x=T,d[x>>2]=xe|fe&~he,d[x+4>>2]=Ae,f=xr(v|0,f|0,C|0,m|0)|0,f=Ir(A|0,w|0,f|0,Z()|0)|0,w=0,A=Z()|0;break}else{xe=T,he=d[xe>>2]|0,xe=d[xe+4>>2]|0,fe=yt(7,0,(B+v|0)*3|0)|0,xe=xe&~(Z()|0),w=T,d[w>>2]=he&~fe,d[w+4>>2]=xe,w=1;break}else he=T,x=d[he>>2]|0,he=d[he+4>>2]|0,v=(B+v|0)*3|0,Ae=yt(7,0,v|0)|0,he=he&~(Z()|0),xe=Uo(f|0,A|0,C|0,m|0)|0,w=Z()|0,v=yt(xe|0,w|0,v|0)|0,he=Z()|0|he,fe=T,d[fe>>2]=v|x&~Ae,d[fe+4>>2]=he,w=xr(xe|0,w|0,C|0,m|0)|0,f=Ir(f|0,A|0,w|0,Z()|0)|0,w=0,A=Z()|0;while(!1);if((V|0)>(D|0))v=~D,D=D+1|0;else{A=0;break}}return Q=ie,A|0}while(!1);if((V|0)<1)return xe=0,Q=ie,xe|0;for(x=C^15,w=1;;)if(fe=V-w|0,fe=Za(7,0,fe,((fe|0)<0)<<31>>31)|0,xe=Z()|0,D=T,m=d[D>>2]|0,D=d[D+4>>2]|0,C=(x-w|0)*3|0,v=yt(7,0,C|0)|0,D=D&~(Z()|0),Ae=Uo(f|0,A|0,fe|0,xe|0)|0,he=Z()|0,C=yt(Ae|0,he|0,C|0)|0,D=Z()|0|D,B=T,d[B>>2]=C|m&~v,d[B+4>>2]=D,xe=xr(Ae|0,he|0,fe|0,xe|0)|0,f=Ir(f|0,A|0,xe|0,Z()|0)|0,A=Z()|0,(V|0)<=(w|0)){A=0;break}else w=w+1|0;return Q=ie,A|0}function zu(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0;x=mt(A|0,m|0,52)|0,Z()|0,x=x&15,(A|0)==0&(m|0)==0|((v|0)>15|(x|0)>(v|0))?(T=-1,A=-1,m=0,x=0):(A=_4(A,m,x+1|0,v)|0,w=(Z()|0)&-15728641,m=yt(v|0,0,52)|0,m=A|m,w=w|(Z()|0),A=(Ai(m,w)|0)==0,T=x,A=A?-1:v,x=w),w=f,d[w>>2]=m,d[w+4>>2]=x,d[f+8>>2]=T,d[f+12>>2]=A}function kh(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0;if(x=mt(f|0,A|0,52)|0,Z()|0,x=x&15,T=v+8|0,d[T>>2]=x,(f|0)==0&(A|0)==0|((m|0)>15|(x|0)>(m|0))){m=v,d[m>>2]=0,d[m+4>>2]=0,d[T>>2]=-1,d[v+12>>2]=-1;return}if(f=_4(f,A,x+1|0,m)|0,T=(Z()|0)&-15728641,x=yt(m|0,0,52)|0,x=f|x,T=T|(Z()|0),f=v,d[f>>2]=x,d[f+4>>2]=T,f=v+12|0,Ai(x,T)|0){d[f>>2]=m;return}else{d[f>>2]=-1;return}}function zh(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0;if(m=f,A=d[m>>2]|0,m=d[m+4>>2]|0,!((A|0)==0&(m|0)==0)&&(v=mt(A|0,m|0,52)|0,Z()|0,v=v&15,C=yt(1,0,(v^15)*3|0)|0,A=zt(C|0,Z()|0,A|0,m|0)|0,m=Z()|0,C=f,d[C>>2]=A,d[C+4>>2]=m,C=f+8|0,w=d[C>>2]|0,!((v|0)<(w|0)))){for(D=f+12|0,T=v;;){if((T|0)==(w|0)){v=5;break}if(B=(T|0)==(d[D>>2]|0),x=(15-T|0)*3|0,v=mt(A|0,m|0,x|0)|0,Z()|0,v=v&7,B&((v|0)==1&!0)){v=7;break}if(!((v|0)==7&!0)){v=10;break}if(B=yt(1,0,x|0)|0,A=zt(A|0,m|0,B|0,Z()|0)|0,m=Z()|0,B=f,d[B>>2]=A,d[B+4>>2]=m,(T|0)>(w|0))T=T+-1|0;else{v=10;break}}if((v|0)==5){B=f,d[B>>2]=0,d[B+4>>2]=0,d[C>>2]=-1,d[D>>2]=-1;return}else if((v|0)==7){w=yt(1,0,x|0)|0,w=zt(A|0,m|0,w|0,Z()|0)|0,C=Z()|0,B=f,d[B>>2]=w,d[B+4>>2]=C,d[D>>2]=T+-1;return}else if((v|0)==10)return}}function Qa(f){f=+f;var A=0;return A=f<0?f+6.283185307179586:f,+(f>=6.283185307179586?A+-6.283185307179586:A)}function Ya(f,A){return f=f|0,A=A|0,+An(+(+K[f>>3]-+K[A>>3]))<17453292519943298e-27?(A=+An(+(+K[f+8>>3]-+K[A+8>>3]))<17453292519943298e-27,A|0):(A=0,A|0)}function Cs(f,A){switch(f=+f,A=A|0,A|0){case 1:{f=f<0?f+6.283185307179586:f;break}case 2:{f=f>0?f+-6.283185307179586:f;break}}return+f}function q4(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0;return x=+K[A>>3],v=+K[f>>3],T=+Yt(+((x-v)*.5)),m=+Yt(+((+K[A+8>>3]-+K[f+8>>3])*.5)),m=T*T+m*(+jn(+x)*+jn(+v)*m),+(+Re(+ +In(+m),+ +In(+(1-m)))*2)}function Ka(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0;return x=+K[A>>3],v=+K[f>>3],T=+Yt(+((x-v)*.5)),m=+Yt(+((+K[A+8>>3]-+K[f+8>>3])*.5)),m=T*T+m*(+jn(+x)*+jn(+v)*m),+(+Re(+ +In(+m),+ +In(+(1-m)))*2*6371.007180918475)}function b4(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0;return x=+K[A>>3],v=+K[f>>3],T=+Yt(+((x-v)*.5)),m=+Yt(+((+K[A+8>>3]-+K[f+8>>3])*.5)),m=T*T+m*(+jn(+x)*+jn(+v)*m),+(+Re(+ +In(+m),+ +In(+(1-m)))*2*6371.007180918475*1e3)}function S4(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0;return T=+K[A>>3],v=+jn(+T),x=+K[A+8>>3]-+K[f+8>>3],w=v*+Yt(+x),m=+K[f>>3],+ +Re(+w,+(+Yt(+T)*+jn(+m)-+jn(+x)*(v*+Yt(+m))))}function T4(f,A,m,v){f=f|0,A=+A,m=+m,v=v|0;var x=0,T=0,w=0,C=0;if(m<1e-16){d[v>>2]=d[f>>2],d[v+4>>2]=d[f+4>>2],d[v+8>>2]=d[f+8>>2],d[v+12>>2]=d[f+12>>2];return}T=A<0?A+6.283185307179586:A,T=A>=6.283185307179586?T+-6.283185307179586:T;do if(T<1e-16)A=+K[f>>3]+m,K[v>>3]=A,x=v;else{if(x=+An(+(T+-3.141592653589793))<1e-16,A=+K[f>>3],x){A=A-m,K[v>>3]=A,x=v;break}if(w=+jn(+m),m=+Yt(+m),A=w*+Yt(+A)+ +jn(+T)*(m*+jn(+A)),A=A>1?1:A,A=+il(+(A<-1?-1:A)),K[v>>3]=A,+An(+(A+-1.5707963267948966))<1e-16){K[v>>3]=1.5707963267948966,K[v+8>>3]=0;return}if(+An(+(A+1.5707963267948966))<1e-16){K[v>>3]=-1.5707963267948966,K[v+8>>3]=0;return}if(C=1/+jn(+A),T=m*+Yt(+T)*C,m=+K[f>>3],A=C*((w-+Yt(+A)*+Yt(+m))/+jn(+m)),w=T>1?1:T,A=A>1?1:A,A=+K[f+8>>3]+ +Re(+(w<-1?-1:w),+(A<-1?-1:A)),A>3.141592653589793)do A=A+-6.283185307179586;while(A>3.141592653589793);if(A<-3.141592653589793)do A=A+6.283185307179586;while(A<-3.141592653589793);K[v+8>>3]=A;return}while(!1);if(+An(+(A+-1.5707963267948966))<1e-16){K[x>>3]=1.5707963267948966,K[v+8>>3]=0;return}if(+An(+(A+1.5707963267948966))<1e-16){K[x>>3]=-1.5707963267948966,K[v+8>>3]=0;return}if(A=+K[f+8>>3],A>3.141592653589793)do A=A+-6.283185307179586;while(A>3.141592653589793);if(A<-3.141592653589793)do A=A+6.283185307179586;while(A<-3.141592653589793);K[v+8>>3]=A}function w4(f,A){return f=f|0,A=A|0,f>>>0>15?(A=4,A|0):(K[A>>3]=+K[20656+(f<<3)>>3],A=0,A|0)}function R9(f,A){return f=f|0,A=A|0,f>>>0>15?(A=4,A|0):(K[A>>3]=+K[20784+(f<<3)>>3],A=0,A|0)}function C9(f,A){return f=f|0,A=A|0,f>>>0>15?(A=4,A|0):(K[A>>3]=+K[20912+(f<<3)>>3],A=0,A|0)}function E4(f,A){return f=f|0,A=A|0,f>>>0>15?(A=4,A|0):(K[A>>3]=+K[21040+(f<<3)>>3],A=0,A|0)}function Gh(f,A){f=f|0,A=A|0;var m=0;return f>>>0>15?(A=4,A|0):(m=Za(7,0,f,((f|0)<0)<<31>>31)|0,m=xr(m|0,Z()|0,120,0)|0,f=Z()|0,d[A>>2]=m|2,d[A+4>>2]=f,A=0,A|0)}function Vh(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0;return Ae=+K[A>>3],V=+K[f>>3],D=+Yt(+((Ae-V)*.5)),T=+K[A+8>>3],B=+K[f+8>>3],w=+Yt(+((T-B)*.5)),C=+jn(+V),ie=+jn(+Ae),w=D*D+w*(ie*C*w),w=+Re(+ +In(+w),+ +In(+(1-w)))*2,D=+K[m>>3],Ae=+Yt(+((D-Ae)*.5)),v=+K[m+8>>3],T=+Yt(+((v-T)*.5)),x=+jn(+D),T=Ae*Ae+T*(ie*x*T),T=+Re(+ +In(+T),+ +In(+(1-T)))*2,D=+Yt(+((V-D)*.5)),v=+Yt(+((B-v)*.5)),v=D*D+v*(C*x*v),v=+Re(+ +In(+v),+ +In(+(1-v)))*2,x=(w+T+v)*.5,+(+oe(+ +In(+(+Es(+(x*.5))*+Es(+((x-w)*.5))*+Es(+((x-T)*.5))*+Es(+((x-v)*.5)))))*4)}function aa(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0;if(C=Q,Q=Q+192|0,T=C+168|0,w=C,x=zl(f,A,T)|0,x|0)return m=x,Q=C,m|0;if(ku(f,A,w)|0&&qt(27795,27190,415,27199),A=d[w>>2]|0,(A|0)>0){if(v=+Vh(w+8|0,w+8+(((A|0)!=1&1)<<4)|0,T)+0,(A|0)!=1){f=1;do x=f,f=f+1|0,v=v+ +Vh(w+8+(x<<4)|0,w+8+(((f|0)%(A|0)|0)<<4)|0,T);while((f|0)<(A|0))}}else v=0;return K[m>>3]=v,m=0,Q=C,m|0}function M4(f,A,m){return f=f|0,A=A|0,m=m|0,f=aa(f,A,m)|0,f|0||(K[m>>3]=+K[m>>3]*6371.007180918475*6371.007180918475),f|0}function _a(f,A,m){return f=f|0,A=A|0,m=m|0,f=aa(f,A,m)|0,f|0||(K[m>>3]=+K[m>>3]*6371.007180918475*6371.007180918475*1e3*1e3),f|0}function va(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0;if(C=Q,Q=Q+176|0,w=C,f=Oh(f,A,w)|0,f|0)return w=f,Q=C,w|0;if(K[m>>3]=0,f=d[w>>2]|0,(f|0)<=1)return w=0,Q=C,w|0;A=f+-1|0,f=0,v=+K[w+8>>3],x=+K[w+16>>3],T=0;do f=f+1|0,B=v,v=+K[w+8+(f<<4)>>3],V=+Yt(+((v-B)*.5)),D=x,x=+K[w+8+(f<<4)+8>>3],D=+Yt(+((x-D)*.5)),D=V*V+D*(+jn(+v)*+jn(+B)*D),T=T+ +Re(+ +In(+D),+ +In(+(1-D)))*2;while((f|0)<(A|0));return K[m>>3]=T,w=0,Q=C,w|0}function Hc(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0;if(C=Q,Q=Q+176|0,w=C,f=Oh(f,A,w)|0,f|0)return w=f,T=+K[m>>3],T=T*6371.007180918475,K[m>>3]=T,Q=C,w|0;if(K[m>>3]=0,f=d[w>>2]|0,(f|0)<=1)return w=0,T=0,T=T*6371.007180918475,K[m>>3]=T,Q=C,w|0;A=f+-1|0,f=0,v=+K[w+8>>3],x=+K[w+16>>3],T=0;do f=f+1|0,B=v,v=+K[w+8+(f<<4)>>3],V=+Yt(+((v-B)*.5)),D=x,x=+K[w+8+(f<<4)+8>>3],D=+Yt(+((x-D)*.5)),D=V*V+D*(+jn(+B)*+jn(+v)*D),T=T+ +Re(+ +In(+D),+ +In(+(1-D)))*2;while((f|0)!=(A|0));return K[m>>3]=T,w=0,V=T,V=V*6371.007180918475,K[m>>3]=V,Q=C,w|0}function $A(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0;if(C=Q,Q=Q+176|0,w=C,f=Oh(f,A,w)|0,f|0)return w=f,T=+K[m>>3],T=T*6371.007180918475,T=T*1e3,K[m>>3]=T,Q=C,w|0;if(K[m>>3]=0,f=d[w>>2]|0,(f|0)<=1)return w=0,T=0,T=T*6371.007180918475,T=T*1e3,K[m>>3]=T,Q=C,w|0;A=f+-1|0,f=0,v=+K[w+8>>3],x=+K[w+16>>3],T=0;do f=f+1|0,B=v,v=+K[w+8+(f<<4)>>3],V=+Yt(+((v-B)*.5)),D=x,x=+K[w+8+(f<<4)+8>>3],D=+Yt(+((x-D)*.5)),D=V*V+D*(+jn(+B)*+jn(+v)*D),T=T+ +Re(+ +In(+D),+ +In(+(1-D)))*2;while((f|0)!=(A|0));return K[m>>3]=T,w=0,V=T,V=V*6371.007180918475,V=V*1e3,K[m>>3]=V,Q=C,w|0}function Hh(f){f=f|0;var A=0,m=0,v=0;return A=xa(1,12)|0,A||qt(27280,27235,49,27293),m=f+4|0,v=d[m>>2]|0,v|0?(v=v+8|0,d[v>>2]=A,d[m>>2]=A,A|0):(d[f>>2]|0&&qt(27310,27235,61,27333),v=f,d[v>>2]=A,d[m>>2]=A,A|0)}function jh(f,A){f=f|0,A=A|0;var m=0,v=0;return v=Lo(24)|0,v||qt(27347,27235,78,27361),d[v>>2]=d[A>>2],d[v+4>>2]=d[A+4>>2],d[v+8>>2]=d[A+8>>2],d[v+12>>2]=d[A+12>>2],d[v+16>>2]=0,A=f+4|0,m=d[A>>2]|0,m|0?(d[m+16>>2]=v,d[A>>2]=v,v|0):(d[f>>2]|0&&qt(27376,27235,82,27361),d[f>>2]=v,d[A>>2]=v,v|0)}function Wh(f){f=f|0;var A=0,m=0,v=0,x=0;if(f)for(v=1;;){if(A=d[f>>2]|0,A|0)do{if(m=d[A>>2]|0,m|0)do x=m,m=d[m+16>>2]|0,dn(x);while((m|0)!=0);x=A,A=d[A+8>>2]|0,dn(x)}while((A|0)!=0);if(A=f,f=d[f+8>>2]|0,v||dn(A),f)v=0;else break}}function jc(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0,xt=0,Vt=0,gt=0,Ft=0,$t=0,Ln=0,tn=0,Ht=0,vt=0,xn=0,oi=0,wn=0;if(x=f+8|0,d[x>>2]|0)return wn=1,wn|0;if(v=d[f>>2]|0,!v)return wn=0,wn|0;A=v,m=0;do m=m+1|0,A=d[A+8>>2]|0;while((A|0)!=0);if(m>>>0<2)return wn=0,wn|0;xn=Lo(m<<2)|0,xn||qt(27396,27235,317,27415),vt=Lo(m<<5)|0,vt||qt(27437,27235,321,27415),d[f>>2]=0,Vt=f+4|0,d[Vt>>2]=0,d[x>>2]=0,m=0,Ht=0,xt=0,ie=0;e:for(;;){if(V=d[v>>2]|0,V){T=0,w=V;do{if(D=+K[w+8>>3],A=w,w=d[w+16>>2]|0,B=(w|0)==0,x=B?V:w,C=+K[x+8>>3],+An(+(D-C))>3.141592653589793){wn=14;break}T=T+(C-D)*(+K[A>>3]+ +K[x>>3])}while(!B);if((wn|0)==14){wn=0,T=0,A=V;do qe=+K[A+8>>3],tn=A+16|0,Ln=d[tn>>2]|0,Ln=(Ln|0)==0?V:Ln,Ce=+K[Ln+8>>3],T=T+(+K[A>>3]+ +K[Ln>>3])*((Ce<0?Ce+6.283185307179586:Ce)-(qe<0?qe+6.283185307179586:qe)),A=d[((A|0)==0?v:tn)>>2]|0;while((A|0)!=0)}T>0?(d[xn+(Ht<<2)>>2]=v,Ht=Ht+1|0,x=xt,A=ie):wn=19}else wn=19;if((wn|0)==19){wn=0;do if(m){if(A=m+8|0,d[A>>2]|0){wn=21;break e}if(m=xa(1,12)|0,!m){wn=23;break e}d[A>>2]=m,x=m+4|0,w=m,A=ie}else if(ie){x=Vt,w=ie+8|0,A=v,m=f;break}else if(d[f>>2]|0){wn=27;break e}else{x=Vt,w=f,A=v,m=f;break}while(!1);if(d[w>>2]=v,d[x>>2]=v,w=vt+(xt<<5)|0,B=d[v>>2]|0,B){for(V=vt+(xt<<5)+8|0,K[V>>3]=17976931348623157e292,ie=vt+(xt<<5)+24|0,K[ie>>3]=17976931348623157e292,K[w>>3]=-17976931348623157e292,Ae=vt+(xt<<5)+16|0,K[Ae>>3]=-17976931348623157e292,ze=17976931348623157e292,Ue=-17976931348623157e292,x=0,he=B,D=17976931348623157e292,xe=17976931348623157e292,Ee=-17976931348623157e292,C=-17976931348623157e292;T=+K[he>>3],qe=+K[he+8>>3],he=d[he+16>>2]|0,fe=(he|0)==0,Ce=+K[(fe?B:he)+8>>3],T<D&&(K[V>>3]=T,D=T),qe<xe&&(K[ie>>3]=qe,xe=qe),T>Ee?K[w>>3]=T:T=Ee,qe>C&&(K[Ae>>3]=qe,C=qe),ze=qe>0&qe<ze?qe:ze,Ue=qe<0&qe>Ue?qe:Ue,x=x|+An(+(qe-Ce))>3.141592653589793,!fe;)Ee=T;x&&(K[Ae>>3]=Ue,K[ie>>3]=ze)}else d[w>>2]=0,d[w+4>>2]=0,d[w+8>>2]=0,d[w+12>>2]=0,d[w+16>>2]=0,d[w+20>>2]=0,d[w+24>>2]=0,d[w+28>>2]=0;x=xt+1|0}if(tn=v+8|0,v=d[tn>>2]|0,d[tn>>2]=0,v)xt=x,ie=A;else{wn=45;break}}if((wn|0)==21)qt(27213,27235,35,27247);else if((wn|0)==23)qt(27267,27235,37,27247);else if((wn|0)==27)qt(27310,27235,61,27333);else if((wn|0)==45){e:do if((Ht|0)>0){for(tn=(x|0)==0,$t=x<<2,Ln=(f|0)==0,Ft=0,A=0;;){if(gt=d[xn+(Ft<<2)>>2]|0,tn)wn=73;else{if(xt=Lo($t)|0,!xt){wn=50;break}if(Vt=Lo($t)|0,!Vt){wn=52;break}t:do if(Ln)m=0;else{for(x=0,m=0,w=f;v=vt+(x<<5)|0,XA(d[w>>2]|0,v,d[gt>>2]|0)|0?(d[xt+(m<<2)>>2]=w,d[Vt+(m<<2)>>2]=v,fe=m+1|0):fe=m,w=d[w+8>>2]|0,w;)x=x+1|0,m=fe;if((fe|0)>0)if(v=d[xt>>2]|0,(fe|0)==1)m=v;else for(Ae=0,he=-1,m=v,ie=v;;){for(B=d[ie>>2]|0,v=0,w=0;x=d[d[xt+(w<<2)>>2]>>2]|0,(x|0)==(B|0)?V=v:V=v+((XA(x,d[Vt+(w<<2)>>2]|0,d[B>>2]|0)|0)&1)|0,w=w+1|0,(w|0)!=(fe|0);)v=V;if(x=(V|0)>(he|0),m=x?ie:m,v=Ae+1|0,(v|0)==(fe|0))break t;Ae=v,he=x?V:he,ie=d[xt+(v<<2)>>2]|0}else m=0}while(!1);if(dn(xt),dn(Vt),m){if(x=m+4|0,v=d[x>>2]|0,v)m=v+8|0;else if(d[m>>2]|0){wn=70;break}d[m>>2]=gt,d[x>>2]=gt}else wn=73}if((wn|0)==73){if(wn=0,A=d[gt>>2]|0,A|0)do Vt=A,A=d[A+16>>2]|0,dn(Vt);while((A|0)!=0);dn(gt),A=1}if(Ft=Ft+1|0,(Ft|0)>=(Ht|0)){oi=A;break e}}(wn|0)==50?qt(27452,27235,249,27471):(wn|0)==52?qt(27490,27235,252,27471):(wn|0)==70&&qt(27310,27235,61,27333)}else oi=0;while(!1);return dn(xn),dn(vt),wn=oi,wn|0}return 0}function XA(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0;if(!(Mo(A,m)|0)||(A=Ph(A)|0,v=+K[m>>3],x=+K[m+8>>3],x=A&x<0?x+6.283185307179586:x,f=d[f>>2]|0,!f))return f=0,f|0;if(A){A=0,B=x,m=f;e:for(;;){for(;w=+K[m>>3],x=+K[m+8>>3],m=m+16|0,V=d[m>>2]|0,V=(V|0)==0?f:V,T=+K[V>>3],C=+K[V+8>>3],w>T?(D=w,w=C):(D=T,T=w,w=x,x=C),v=v==T|v==D?v+2220446049250313e-31:v,!!(v<T|v>D);)if(m=d[m>>2]|0,!m){m=22;break e}if(C=w<0?w+6.283185307179586:w,w=x<0?x+6.283185307179586:x,B=C==B|w==B?B+-2220446049250313e-31:B,D=C+(w-C)*((v-T)/(D-T)),(D<0?D+6.283185307179586:D)>B&&(A=A^1),m=d[m>>2]|0,!m){m=22;break}}if((m|0)==22)return A|0}else{A=0,B=x,m=f;e:for(;;){for(;w=+K[m>>3],x=+K[m+8>>3],m=m+16|0,V=d[m>>2]|0,V=(V|0)==0?f:V,T=+K[V>>3],C=+K[V+8>>3],w>T?(D=w,w=C):(D=T,T=w,w=x,x=C),v=v==T|v==D?v+2220446049250313e-31:v,!!(v<T|v>D);)if(m=d[m>>2]|0,!m){m=22;break e}if(B=w==B|x==B?B+-2220446049250313e-31:B,w+(x-w)*((v-T)/(D-T))>B&&(A=A^1),m=d[m>>2]|0,!m){m=22;break}}if((m|0)==22)return A|0}return 0}function ya(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0;if(Ue=Q,Q=Q+32|0,ze=Ue+16|0,Ee=Ue,T=mt(f|0,A|0,52)|0,Z()|0,T=T&15,he=mt(m|0,v|0,52)|0,Z()|0,(T|0)!=(he&15|0))return ze=12,Q=Ue,ze|0;if(B=mt(f|0,A|0,45)|0,Z()|0,B=B&127,V=mt(m|0,v|0,45)|0,Z()|0,V=V&127,B>>>0>121|V>>>0>121)return ze=5,Q=Ue,ze|0;if(he=(B|0)!=(V|0),he){if(C=o0(B,V)|0,(C|0)==7)return ze=1,Q=Ue,ze|0;D=o0(V,B)|0,(D|0)==7?qt(27514,27538,161,27548):(fe=C,w=D)}else fe=0,w=0;ie=Wi(B)|0,Ae=Wi(V)|0,d[ze>>2]=0,d[ze+4>>2]=0,d[ze+8>>2]=0,d[ze+12>>2]=0;do if(fe){if(V=d[4272+(B*28|0)+(fe<<2)>>2]|0,C=(V|0)>0,Ae)if(C){B=0,D=m,C=v;do D=E9(D,C)|0,C=Z()|0,w=sl(w)|0,(w|0)==1&&(w=sl(1)|0),B=B+1|0;while((B|0)!=(V|0));V=w,B=D,D=C}else V=w,B=m,D=v;else if(C){B=0,D=m,C=v;do D=zA(D,C)|0,C=Z()|0,w=sl(w)|0,B=B+1|0;while((B|0)!=(V|0));V=w,B=D,D=C}else V=w,B=m,D=v;if(Rs(B,D,ze)|0,he||qt(27563,27538,191,27548),C=(ie|0)!=0,w=(Ae|0)!=0,C&w&&qt(27590,27538,192,27548),C){if(w=Ms(f,A)|0,(w|0)==7){T=5;break}if(ft[22e3+(w*7|0)+fe>>0]|0){T=1;break}D=d[21168+(w*28|0)+(fe<<2)>>2]|0,B=D}else if(w){if(w=Ms(B,D)|0,(w|0)==7){T=5;break}if(ft[22e3+(w*7|0)+V>>0]|0){T=1;break}B=0,D=d[21168+(V*28|0)+(w<<2)>>2]|0}else B=0,D=0;if((B|D|0)<0)T=5;else{if((D|0)>0){C=ze+4|0,w=0;do Uh(C),w=w+1|0;while((w|0)!=(D|0))}if(d[Ee>>2]=0,d[Ee+4>>2]=0,d[Ee+8>>2]=0,c4(Ee,fe),T|0)for(;ga(T)|0?kc(Ee):Ou(Ee),(T|0)>1;)T=T+-1|0;if((B|0)>0){T=0;do Uh(Ee),T=T+1|0;while((T|0)!=(B|0))}xe=ze+4|0,Jr(xe,Ee,xe),Mr(xe),xe=51}}else if(Rs(m,v,ze)|0,(ie|0)!=0&(Ae|0)!=0)if((V|0)!=(B|0)&&qt(27621,27538,261,27548),w=Ms(f,A)|0,T=Ms(m,v)|0,(w|0)==7|(T|0)==7)T=5;else if(ft[22e3+(w*7|0)+T>>0]|0)T=1;else if(w=d[21168+(w*28|0)+(T<<2)>>2]|0,(w|0)>0){C=ze+4|0,T=0;do Uh(C),T=T+1|0;while((T|0)!=(w|0));xe=51}else xe=51;else xe=51;while(!1);return(xe|0)==51&&(T=ze+4|0,d[x>>2]=d[T>>2],d[x+4>>2]=d[T+4>>2],d[x+8>>2]=d[T+8>>2],T=0),ze=T,Q=Ue,ze|0}function Gu(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0;if(xe=Q,Q=Q+48|0,B=xe+36|0,w=xe+24|0,C=xe+12|0,D=xe,x=mt(f|0,A|0,52)|0,Z()|0,x=x&15,Ae=mt(f|0,A|0,45)|0,Z()|0,Ae=Ae&127,Ae>>>0>121)return v=5,Q=xe,v|0;if(V=Wi(Ae)|0,yt(x|0,0,52)|0,Ee=Z()|0|134225919,T=v,d[T>>2]=-1,d[T+4>>2]=Ee,!x)return x=Uu(m)|0,(x|0)==7||(x=Nh(Ae,x)|0,(x|0)==127)?(Ee=1,Q=xe,Ee|0):(he=yt(x|0,0,45)|0,fe=Z()|0,Ae=v,fe=d[Ae+4>>2]&-1040385|fe,Ee=v,d[Ee>>2]=d[Ae>>2]|he,d[Ee+4>>2]=fe,Ee=0,Q=xe,Ee|0);for(d[B>>2]=d[m>>2],d[B+4>>2]=d[m+4>>2],d[B+8>>2]=d[m+8>>2],m=x;;){if(T=m,m=m+-1|0,d[w>>2]=d[B>>2],d[w+4>>2]=d[B+4>>2],d[w+8>>2]=d[B+8>>2],ga(T)|0){if(x=l4(B)|0,x|0){m=13;break}d[C>>2]=d[B>>2],d[C+4>>2]=d[B+4>>2],d[C+8>>2]=d[B+8>>2],kc(C)}else{if(x=A9(B)|0,x|0){m=13;break}d[C>>2]=d[B>>2],d[C+4>>2]=d[B+4>>2],d[C+8>>2]=d[B+8>>2],Ou(C)}if(d0(w,C,D),Mr(D),x=v,Ue=d[x>>2]|0,x=d[x+4>>2]|0,Ce=(15-T|0)*3|0,ze=yt(7,0,Ce|0)|0,x=x&~(Z()|0),Ce=yt(Uu(D)|0,0,Ce|0)|0,x=Z()|0|x,Ee=v,d[Ee>>2]=Ce|Ue&~ze,d[Ee+4>>2]=x,(T|0)<=1){m=14;break}}e:do if((m|0)!=13&&(m|0)==14)if((d[B>>2]|0)<=1&&(d[B+4>>2]|0)<=1&&(d[B+8>>2]|0)<=1){m=Uu(B)|0,x=Nh(Ae,m)|0,(x|0)==127?D=0:D=Wi(x)|0;t:do if(m){if(V){if(x=Ms(f,A)|0,(x|0)==7){x=5;break e}if(T=d[21376+(x*28|0)+(m<<2)>>2]|0,(T|0)>0){x=m,m=0;do x=Bu(x)|0,m=m+1|0;while((m|0)!=(T|0))}else x=m;if((x|0)==1){x=9;break e}m=Nh(Ae,x)|0,(m|0)==127&&qt(27648,27538,411,27678),Wi(m)|0?qt(27693,27538,412,27678):(fe=m,he=T,ie=x)}else fe=x,he=0,ie=m;if(C=d[4272+(Ae*28|0)+(ie<<2)>>2]|0,(C|0)<=-1&&qt(27724,27538,419,27678),!D){if((he|0)<0){x=5;break e}if(he|0){T=v,x=0,m=d[T>>2]|0,T=d[T+4>>2]|0;do m=kl(m,T)|0,T=Z()|0,Ce=v,d[Ce>>2]=m,d[Ce+4>>2]=T,x=x+1|0;while((x|0)<(he|0))}if((C|0)<=0){x=fe,m=58;break}for(T=v,x=0,m=d[T>>2]|0,T=d[T+4>>2]|0;;)if(m=kl(m,T)|0,T=Z()|0,Ce=v,d[Ce>>2]=m,d[Ce+4>>2]=T,x=x+1|0,(x|0)==(C|0)){x=fe,m=58;break t}}if(w=o0(fe,Ae)|0,(w|0)==7&&qt(27514,27538,428,27678),x=v,m=d[x>>2]|0,x=d[x+4>>2]|0,(C|0)>0){T=0;do m=kl(m,x)|0,x=Z()|0,Ce=v,d[Ce>>2]=m,d[Ce+4>>2]=x,T=T+1|0;while((T|0)!=(C|0))}if(x=Ms(m,x)|0,(x|0)==7&&qt(27795,27538,440,27678),m=MA(fe)|0,m=d[(m?21792:21584)+(w*28|0)+(x<<2)>>2]|0,(m|0)<0&&qt(27795,27538,454,27678),!m)x=fe,m=58;else{w=v,x=0,T=d[w>>2]|0,w=d[w+4>>2]|0;do T=Fh(T,w)|0,w=Z()|0,Ce=v,d[Ce>>2]=T,d[Ce+4>>2]=w,x=x+1|0;while((x|0)<(m|0));x=fe,m=58}}else if((V|0)!=0&(D|0)!=0){if(m=Ms(f,A)|0,T=v,T=Ms(d[T>>2]|0,d[T+4>>2]|0)|0,(m|0)==7|(T|0)==7){x=5;break e}if(T=d[21376+(m*28|0)+(T<<2)>>2]|0,(T|0)<0){x=5;break e}if(!T)m=59;else{C=v,m=0,w=d[C>>2]|0,C=d[C+4>>2]|0;do w=kl(w,C)|0,C=Z()|0,Ce=v,d[Ce>>2]=w,d[Ce+4>>2]=C,m=m+1|0;while((m|0)<(T|0));m=58}}else m=58;while(!1);if((m|0)==58&&D&&(m=59),(m|0)==59&&(Ce=v,(Ms(d[Ce>>2]|0,d[Ce+4>>2]|0)|0)==1)){x=9;break}Ce=v,ze=d[Ce>>2]|0,Ce=d[Ce+4>>2]&-1040385,Ue=yt(x|0,0,45)|0,Ce=Ce|(Z()|0),x=v,d[x>>2]=ze|Ue,d[x+4>>2]=Ce,x=0}else x=1;while(!1);return Ce=x,Q=xe,Ce|0}function N9(f,A,m,v,x,T){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0,T=T|0;var w=0,C=0;return C=Q,Q=Q+16|0,w=C,x?f=15:(f=ya(f,A,m,v,w)|0,f||(m9(w,T),f=0)),Q=C,f|0}function oa(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0;return w=Q,Q=Q+16|0,T=w,v?m=15:(m=DA(m,T)|0,m||(m=Gu(f,A,T,x)|0)),Q=w,m|0}function QA(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0;return D=Q,Q=Q+32|0,w=D+12|0,C=D,T=ya(f,A,f,A,w)|0,T|0?(C=T,Q=D,C|0):(f=ya(f,A,m,v,C)|0,f|0?(C=f,Q=D,C|0):(w=PA(w,C)|0,C=x,d[C>>2]=w,d[C+4>>2]=((w|0)<0)<<31>>31,C=0,Q=D,C|0))}function al(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0;return D=Q,Q=Q+32|0,w=D+12|0,C=D,T=ya(f,A,f,A,w)|0,!T&&(T=ya(f,A,m,v,C)|0,!T)?(v=PA(w,C)|0,v=zt(v|0,((v|0)<0)<<31>>31|0,1,0)|0,w=Z()|0,C=x,d[C>>2]=v,d[C+4>>2]=w,C=0,Q=D,C|0):(C=T,Q=D,C|0)}function R4(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0,xt=0,Vt=0,gt=0,Ft=0;if(gt=Q,Q=Q+48|0,xt=gt+24|0,w=gt+12|0,Vt=gt,T=ya(f,A,f,A,xt)|0,!T&&(T=ya(f,A,m,v,w)|0,!T)){Ce=PA(xt,w)|0,qe=((Ce|0)<0)<<31>>31,d[xt>>2]=0,d[xt+4>>2]=0,d[xt+8>>2]=0,d[w>>2]=0,d[w+4>>2]=0,d[w+8>>2]=0,ya(f,A,f,A,xt)|0&&qt(27795,27538,692,27747),ya(f,A,m,v,w)|0&&qt(27795,27538,697,27747),A4(xt),A4(w),V=(Ce|0)==0?0:1/+(Ce|0),m=d[xt>>2]|0,xe=V*+((d[w>>2]|0)-m|0),Ee=xt+4|0,v=d[Ee>>2]|0,ze=V*+((d[w+4>>2]|0)-v|0),Ue=xt+8|0,T=d[Ue>>2]|0,V=V*+((d[w+8>>2]|0)-T|0),d[Vt>>2]=m,ie=Vt+4|0,d[ie>>2]=v,Ae=Vt+8|0,d[Ae>>2]=T;e:do if((Ce|0)<0)T=0;else for(he=0,fe=0;;){D=+(fe>>>0)+4294967296*+(he|0),Ft=xe*D+ +(m|0),C=ze*D+ +(v|0),D=V*D+ +(T|0),m=~~+Hl(+Ft),w=~~+Hl(+C),T=~~+Hl(+D),Ft=+An(+(+(m|0)-Ft)),C=+An(+(+(w|0)-C)),D=+An(+(+(T|0)-D));do if(Ft>C&Ft>D)m=0-(w+T)|0,v=w;else if(B=0-m|0,C>D){v=B-T|0;break}else{v=w,T=B-w|0;break}while(!1);if(d[Vt>>2]=m,d[ie>>2]=v,d[Ae>>2]=T,g9(Vt),T=Gu(f,A,Vt,x+(fe<<3)|0)|0,T|0)break e;if(!((he|0)<(qe|0)|(he|0)==(qe|0)&fe>>>0<Ce>>>0)){T=0;break e}m=zt(fe|0,he|0,1,0)|0,v=Z()|0,he=v,fe=m,m=d[xt>>2]|0,v=d[Ee>>2]|0,T=d[Ue>>2]|0}while(!1);return Vt=T,Q=gt,Vt|0}return Vt=T,Q=gt,Vt|0}function Za(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0;if((m|0)==0&(v|0)==0)return x=0,T=1,ot(x|0),T|0;T=f,x=A,f=1,A=0;do w=(m&1|0)==0&!0,f=xr((w?1:T)|0,(w?0:x)|0,f|0,A|0)|0,A=Z()|0,m=N4(m|0,v|0,1)|0,v=Z()|0,T=xr(T|0,x|0,T|0,x|0)|0,x=Z()|0;while(!((m|0)==0&(v|0)==0));return ot(A|0),f|0}function ol(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0;C=Q,Q=Q+16|0,T=C,w=mt(f|0,A|0,52)|0,Z()|0,w=w&15;do if(w){if(x=zl(f,A,T)|0,!x){B=+K[T>>3],D=1/+jn(+B),V=+K[25968+(w<<3)>>3],K[m>>3]=B+V,K[m+8>>3]=B-V,B=+K[T+8>>3],D=V*D,K[m+16>>3]=D+B,K[m+24>>3]=B-D;break}return w=x,Q=C,w|0}else{if(x=mt(f|0,A|0,45)|0,Z()|0,x=x&127,x>>>0>121)return w=5,Q=C,w|0;T=22064+(x<<5)|0,d[m>>2]=d[T>>2],d[m+4>>2]=d[T+4>>2],d[m+8>>2]=d[T+8>>2],d[m+12>>2]=d[T+12>>2],d[m+16>>2]=d[T+16>>2],d[m+20>>2]=d[T+20>>2],d[m+24>>2]=d[T+24>>2],d[m+28>>2]=d[T+28>>2];break}while(!1);return js(m,v?1.4:1.1),v=26096+(w<<3)|0,(d[v>>2]|0)==(f|0)&&(d[v+4>>2]|0)==(A|0)&&(K[m>>3]=1.5707963267948966),w=26224+(w<<3)|0,(d[w>>2]|0)==(f|0)&&(d[w+4>>2]|0)==(A|0)&&(K[m+8>>3]=-1.5707963267948966),+K[m>>3]!=1.5707963267948966&&+K[m+8>>3]!=-1.5707963267948966?(w=0,Q=C,w|0):(K[m+16>>3]=3.141592653589793,K[m+24>>3]=-3.141592653589793,w=0,Q=C,w|0)}function YA(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0;B=Q,Q=Q+48|0,w=B+32|0,T=B+40|0,C=B,IA(w,0,0,0),D=d[w>>2]|0,w=d[w+4>>2]|0;do if(m>>>0<=15){if(x=hs(v)|0,x|0){v=C,d[v>>2]=0,d[v+4>>2]=0,d[C+8>>2]=x,d[C+12>>2]=-1,v=C+16|0,D=C+29|0,d[v>>2]=0,d[v+4>>2]=0,d[v+8>>2]=0,ft[v+12>>0]=0,ft[D>>0]=ft[T>>0]|0,ft[D+1>>0]=ft[T+1>>0]|0,ft[D+2>>0]=ft[T+2>>0]|0;break}if(x=xa((d[A+8>>2]|0)+1|0,32)|0,x){ll(A,x),V=C,d[V>>2]=D,d[V+4>>2]=w,d[C+8>>2]=0,d[C+12>>2]=m,d[C+16>>2]=v,d[C+20>>2]=A,d[C+24>>2]=x,ft[C+28>>0]=0,D=C+29|0,ft[D>>0]=ft[T>>0]|0,ft[D+1>>0]=ft[T+1>>0]|0,ft[D+2>>0]=ft[T+2>>0]|0;break}else{v=C,d[v>>2]=0,d[v+4>>2]=0,d[C+8>>2]=13,d[C+12>>2]=-1,v=C+16|0,D=C+29|0,d[v>>2]=0,d[v+4>>2]=0,d[v+8>>2]=0,ft[v+12>>0]=0,ft[D>>0]=ft[T>>0]|0,ft[D+1>>0]=ft[T+1>>0]|0,ft[D+2>>0]=ft[T+2>>0]|0;break}}else D=C,d[D>>2]=0,d[D+4>>2]=0,d[C+8>>2]=4,d[C+12>>2]=-1,D=C+16|0,V=C+29|0,d[D>>2]=0,d[D+4>>2]=0,d[D+8>>2]=0,ft[D+12>>0]=0,ft[V>>0]=ft[T>>0]|0,ft[V+1>>0]=ft[T+1>>0]|0,ft[V+2>>0]=ft[T+2>>0]|0;while(!1);Wc(C),d[f>>2]=d[C>>2],d[f+4>>2]=d[C+4>>2],d[f+8>>2]=d[C+8>>2],d[f+12>>2]=d[C+12>>2],d[f+16>>2]=d[C+16>>2],d[f+20>>2]=d[C+20>>2],d[f+24>>2]=d[C+24>>2],d[f+28>>2]=d[C+28>>2],Q=B}function Wc(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0;if(qe=Q,Q=Q+336|0,he=qe+168|0,fe=qe,v=f,m=d[v>>2]|0,v=d[v+4>>2]|0,(m|0)==0&(v|0)==0){Q=qe;return}if(A=f+28|0,ft[A>>0]|0?(m=Vu(m,v)|0,v=Z()|0):ft[A>>0]=1,Ce=f+20|0,!(d[d[Ce>>2]>>2]|0)){A=f+24|0,m=d[A>>2]|0,m|0&&dn(m),Ue=f,d[Ue>>2]=0,d[Ue+4>>2]=0,d[f+8>>2]=0,d[Ce>>2]=0,d[f+12>>2]=-1,d[f+16>>2]=0,d[A>>2]=0,Q=qe;return}Ue=f+16|0,A=d[Ue>>2]|0,x=A&15;e:do if((m|0)==0&(v|0)==0)ze=f+24|0;else{xe=f+12|0,ie=(x|0)==3,V=A&255,D=(x|1|0)==3,Ae=f+24|0,B=(x+-1|0)>>>0<3,w=(x|2|0)==3,C=fe+8|0;t:for(;;){if(T=mt(m|0,v|0,52)|0,Z()|0,T=T&15,(T|0)==(d[xe>>2]|0)){switch(V&15){case 0:case 2:case 3:{if(x=zl(m,v,he)|0,x|0){Ee=15;break t}if(Ja(d[Ce>>2]|0,d[Ae>>2]|0,he)|0){Ee=19;break t}break}}if(D&&(x=d[(d[Ce>>2]|0)+4>>2]|0,d[he>>2]=d[x>>2],d[he+4>>2]=d[x+4>>2],d[he+8>>2]=d[x+8>>2],d[he+12>>2]=d[x+12>>2],Mo(26832,he)|0)){if(GA(d[(d[Ce>>2]|0)+4>>2]|0,T,fe)|0){Ee=25;break}if(x=fe,(d[x>>2]|0)==(m|0)&&(d[x+4>>2]|0)==(v|0)){Ee=29;break}}if(B){if(x=ku(m,v,he)|0,x|0){Ee=32;break}if(ol(m,v,fe,0)|0){Ee=36;break}if(w&&Co(d[Ce>>2]|0,d[Ae>>2]|0,he,fe)|0){Ee=42;break}if(D&&KA(d[Ce>>2]|0,d[Ae>>2]|0,he,fe)|0){Ee=42;break}}if(ie){if(A=ol(m,v,he,1)|0,x=d[Ae>>2]|0,A|0){Ee=45;break}if(c0(x,he)|0){if(h0(fe,he),NA(he,d[Ae>>2]|0)|0){Ee=53;break}if(Ja(d[Ce>>2]|0,d[Ae>>2]|0,C)|0){Ee=53;break}if(KA(d[Ce>>2]|0,d[Ae>>2]|0,fe,he)|0){Ee=53;break}}}}do if((T|0)<(d[xe>>2]|0)){if(A=ol(m,v,he,1)|0,x=d[Ae>>2]|0,A|0){Ee=58;break t}if(!(c0(x,he)|0)){Ee=73;break}if(NA(d[Ae>>2]|0,he)|0&&(h0(fe,he),Co(d[Ce>>2]|0,d[Ae>>2]|0,fe,he)|0)){Ee=65;break t}if(m=m0(m,v,T+1|0,fe)|0,m|0){Ee=67;break t}v=fe,m=d[v>>2]|0,v=d[v+4>>2]|0}else Ee=73;while(!1);if((Ee|0)==73&&(Ee=0,m=Vu(m,v)|0,v=Z()|0),(m|0)==0&(v|0)==0){ze=Ae;break e}}switch(Ee|0){case 15:{A=d[Ae>>2]|0,A|0&&dn(A),Ee=f,d[Ee>>2]=0,d[Ee+4>>2]=0,d[Ce>>2]=0,d[xe>>2]=-1,d[Ue>>2]=0,d[Ae>>2]=0,d[f+8>>2]=x,Ee=20;break}case 19:{d[f>>2]=m,d[f+4>>2]=v,Ee=20;break}case 25:{qt(27795,27761,470,27772);break}case 29:{d[f>>2]=m,d[f+4>>2]=v,Q=qe;return}case 32:{A=d[Ae>>2]|0,A|0&&dn(A),ze=f,d[ze>>2]=0,d[ze+4>>2]=0,d[Ce>>2]=0,d[xe>>2]=-1,d[Ue>>2]=0,d[Ae>>2]=0,d[f+8>>2]=x,Q=qe;return}case 36:{qt(27795,27761,493,27772);break}case 42:{d[f>>2]=m,d[f+4>>2]=v,Q=qe;return}case 45:{x|0&&dn(x),Ee=f,d[Ee>>2]=0,d[Ee+4>>2]=0,d[Ce>>2]=0,d[xe>>2]=-1,d[Ue>>2]=0,d[Ae>>2]=0,d[f+8>>2]=A,Ee=55;break}case 53:{d[f>>2]=m,d[f+4>>2]=v,Ee=55;break}case 58:{x|0&&dn(x),Ee=f,d[Ee>>2]=0,d[Ee+4>>2]=0,d[Ce>>2]=0,d[xe>>2]=-1,d[Ue>>2]=0,d[Ae>>2]=0,d[f+8>>2]=A,Ee=71;break}case 65:{d[f>>2]=m,d[f+4>>2]=v,Ee=71;break}case 67:{A=d[Ae>>2]|0,A|0&&dn(A),ze=f,d[ze>>2]=0,d[ze+4>>2]=0,d[Ce>>2]=0,d[xe>>2]=-1,d[Ue>>2]=0,d[Ae>>2]=0,d[f+8>>2]=m,Q=qe;return}}if((Ee|0)==20){Q=qe;return}else if((Ee|0)==55){Q=qe;return}else if((Ee|0)==71){Q=qe;return}}while(!1);A=d[ze>>2]|0,A|0&&dn(A),Ee=f,d[Ee>>2]=0,d[Ee+4>>2]=0,d[f+8>>2]=0,d[Ce>>2]=0,d[f+12>>2]=-1,d[Ue>>2]=0,d[ze>>2]=0,Q=qe}function Vu(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0;ie=Q,Q=Q+16|0,V=ie,v=mt(f|0,A|0,52)|0,Z()|0,v=v&15,m=mt(f|0,A|0,45)|0,Z()|0;do if(v){for(;m=yt(v+4095|0,0,52)|0,x=Z()|0|A&-15728641,T=(15-v|0)*3|0,w=yt(7,0,T|0)|0,C=Z()|0,m=m|f|w,x=x|C,D=mt(f|0,A|0,T|0)|0,Z()|0,D=D&7,v=v+-1|0,!(D>>>0<6);)if(v)A=x,f=m;else{B=4;break}if((B|0)==4){m=mt(m|0,x|0,45)|0,Z()|0;break}return V=(D|0)==0&(Ai(m,x)|0)!=0,V=yt((V?2:1)+D|0,0,T|0)|0,B=Z()|0|A&~C,V=V|f&~w,ot(B|0),Q=ie,V|0}while(!1);return m=m&127,m>>>0>120?(B=0,V=0,ot(B|0),Q=ie,V|0):(IA(V,0,m+1|0,0),B=d[V+4>>2]|0,V=d[V>>2]|0,ot(B|0),Q=ie,V|0)}function $c(f,A,m,v,x,T){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0,T=T|0;var w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0;Ee=Q,Q=Q+160|0,ie=Ee+80|0,C=Ee+64|0,Ae=Ee+112|0,xe=Ee,YA(ie,f,A,m),B=ie,zu(C,d[B>>2]|0,d[B+4>>2]|0,A),B=C,D=d[B>>2]|0,B=d[B+4>>2]|0,w=d[ie+8>>2]|0,he=Ae+4|0,d[he>>2]=d[ie>>2],d[he+4>>2]=d[ie+4>>2],d[he+8>>2]=d[ie+8>>2],d[he+12>>2]=d[ie+12>>2],d[he+16>>2]=d[ie+16>>2],d[he+20>>2]=d[ie+20>>2],d[he+24>>2]=d[ie+24>>2],d[he+28>>2]=d[ie+28>>2],he=xe,d[he>>2]=D,d[he+4>>2]=B,he=xe+8|0,d[he>>2]=w,f=xe+12|0,A=Ae,m=f+36|0;do d[f>>2]=d[A>>2],f=f+4|0,A=A+4|0;while((f|0)<(m|0));if(Ae=xe+48|0,d[Ae>>2]=d[C>>2],d[Ae+4>>2]=d[C+4>>2],d[Ae+8>>2]=d[C+8>>2],d[Ae+12>>2]=d[C+12>>2],(D|0)==0&(B|0)==0)return xe=w,Q=Ee,xe|0;m=xe+16|0,V=xe+24|0,ie=xe+28|0,w=0,C=0,A=D,f=B;do{if(!((w|0)<(x|0)|(w|0)==(x|0)&C>>>0<v>>>0)){fe=4;break}if(B=C,C=zt(C|0,w|0,1,0)|0,w=Z()|0,B=T+(B<<3)|0,d[B>>2]=A,d[B+4>>2]=f,zh(Ae),f=Ae,A=d[f>>2]|0,f=d[f+4>>2]|0,(A|0)==0&(f|0)==0){if(Wc(m),A=m,f=d[A>>2]|0,A=d[A+4>>2]|0,(f|0)==0&(A|0)==0){fe=10;break}kh(f,A,d[ie>>2]|0,Ae),f=Ae,A=d[f>>2]|0,f=d[f+4>>2]|0}B=xe,d[B>>2]=A,d[B+4>>2]=f}while(!((A|0)==0&(f|0)==0));return(fe|0)==4?(f=xe+40|0,A=d[f>>2]|0,A|0&&dn(A),fe=xe+16|0,d[fe>>2]=0,d[fe+4>>2]=0,d[V>>2]=0,d[xe+36>>2]=0,d[ie>>2]=-1,d[xe+32>>2]=0,d[f>>2]=0,kh(0,0,0,Ae),d[xe>>2]=0,d[xe+4>>2]=0,d[he>>2]=0,xe=14,Q=Ee,xe|0):((fe|0)==10&&(d[xe>>2]=0,d[xe+4>>2]=0,d[he>>2]=d[V>>2]),xe=d[he>>2]|0,Q=Ee,xe|0)}function $h(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0;if(ie=Q,Q=Q+48|0,D=ie+32|0,C=ie+40|0,B=ie,!(d[f>>2]|0))return V=v,d[V>>2]=0,d[V+4>>2]=0,V=0,Q=ie,V|0;IA(D,0,0,0),w=D,x=d[w>>2]|0,w=d[w+4>>2]|0;do if(A>>>0>15)V=B,d[V>>2]=0,d[V+4>>2]=0,d[B+8>>2]=4,d[B+12>>2]=-1,V=B+16|0,m=B+29|0,d[V>>2]=0,d[V+4>>2]=0,d[V+8>>2]=0,ft[V+12>>0]=0,ft[m>>0]=ft[C>>0]|0,ft[m+1>>0]=ft[C+1>>0]|0,ft[m+2>>0]=ft[C+2>>0]|0,m=4,V=9;else{if(m=hs(m)|0,m|0){D=B,d[D>>2]=0,d[D+4>>2]=0,d[B+8>>2]=m,d[B+12>>2]=-1,D=B+16|0,V=B+29|0,d[D>>2]=0,d[D+4>>2]=0,d[D+8>>2]=0,ft[D+12>>0]=0,ft[V>>0]=ft[C>>0]|0,ft[V+1>>0]=ft[C+1>>0]|0,ft[V+2>>0]=ft[C+2>>0]|0,V=9;break}if(m=xa((d[f+8>>2]|0)+1|0,32)|0,!m){V=B,d[V>>2]=0,d[V+4>>2]=0,d[B+8>>2]=13,d[B+12>>2]=-1,V=B+16|0,m=B+29|0,d[V>>2]=0,d[V+4>>2]=0,d[V+8>>2]=0,ft[V+12>>0]=0,ft[m>>0]=ft[C>>0]|0,ft[m+1>>0]=ft[C+1>>0]|0,ft[m+2>>0]=ft[C+2>>0]|0,m=13,V=9;break}ll(f,m),he=B,d[he>>2]=x,d[he+4>>2]=w,w=B+8|0,d[w>>2]=0,d[B+12>>2]=A,d[B+20>>2]=f,d[B+24>>2]=m,ft[B+28>>0]=0,x=B+29|0,ft[x>>0]=ft[C>>0]|0,ft[x+1>>0]=ft[C+1>>0]|0,ft[x+2>>0]=ft[C+2>>0]|0,d[B+16>>2]=3,Ae=+u0(m),Ae=Ae*+rl(m),T=+An(+ +K[m>>3]),T=Ae/+jn(+ +v0(+T,+ +An(+ +K[m+8>>3])))*6371.007180918475*6371.007180918475,x=B+12|0,m=d[x>>2]|0;e:do if((m|0)>0)do{if(w4(m+-1|0,D)|0,!(T/+K[D>>3]>10))break e;he=d[x>>2]|0,m=he+-1|0,d[x>>2]=m}while((he|0)>1);while(!1);if(Wc(B),x=v,d[x>>2]=0,d[x+4>>2]=0,x=B,m=d[x>>2]|0,x=d[x+4>>2]|0,!((m|0)==0&(x|0)==0))do Gc(m,x,A,D)|0,C=D,f=v,C=zt(d[f>>2]|0,d[f+4>>2]|0,d[C>>2]|0,d[C+4>>2]|0)|0,f=Z()|0,he=v,d[he>>2]=C,d[he+4>>2]=f,Wc(B),he=B,m=d[he>>2]|0,x=d[he+4>>2]|0;while(!((m|0)==0&(x|0)==0));m=d[w>>2]|0}while(!1);return he=m,Q=ie,he|0}function Gl(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0;if(!(Mo(A,m)|0)||(A=Ph(A)|0,v=+K[m>>3],x=+K[m+8>>3],x=A&x<0?x+6.283185307179586:x,Ae=d[f>>2]|0,(Ae|0)<=0))return Ae=0,Ae|0;if(ie=d[f+4>>2]|0,A){A=0,V=x,m=-1,f=0;e:for(;;){for(B=f;w=+K[ie+(B<<4)>>3],x=+K[ie+(B<<4)+8>>3],f=(m+2|0)%(Ae|0)|0,T=+K[ie+(f<<4)>>3],C=+K[ie+(f<<4)+8>>3],w>T?(D=w,w=C):(D=T,T=w,w=x,x=C),v=v==T|v==D?v+2220446049250313e-31:v,!!(v<T|v>D);)if(m=B+1|0,(m|0)>=(Ae|0)){m=22;break e}else f=B,B=m,m=f;if(C=w<0?w+6.283185307179586:w,w=x<0?x+6.283185307179586:x,V=C==V|w==V?V+-2220446049250313e-31:V,D=C+(w-C)*((v-T)/(D-T)),(D<0?D+6.283185307179586:D)>V&&(A=A^1),f=B+1|0,(f|0)>=(Ae|0)){m=22;break}else m=B}if((m|0)==22)return A|0}else{A=0,V=x,m=-1,f=0;e:for(;;){for(B=f;w=+K[ie+(B<<4)>>3],x=+K[ie+(B<<4)+8>>3],f=(m+2|0)%(Ae|0)|0,T=+K[ie+(f<<4)>>3],C=+K[ie+(f<<4)+8>>3],w>T?(D=w,w=C):(D=T,T=w,w=x,x=C),v=v==T|v==D?v+2220446049250313e-31:v,!!(v<T|v>D);)if(m=B+1|0,(m|0)>=(Ae|0)){m=22;break e}else f=B,B=m,m=f;if(V=w==V|x==V?V+-2220446049250313e-31:V,w+(x-w)*((v-T)/(D-T))>V&&(A=A^1),f=B+1|0,(f|0)>=(Ae|0)){m=22;break}else m=B}if((m|0)==22)return A|0}return 0}function la(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0;if(fe=d[f>>2]|0,!fe){d[A>>2]=0,d[A+4>>2]=0,d[A+8>>2]=0,d[A+12>>2]=0,d[A+16>>2]=0,d[A+20>>2]=0,d[A+24>>2]=0,d[A+28>>2]=0;return}if(xe=A+8|0,K[xe>>3]=17976931348623157e292,Ee=A+24|0,K[Ee>>3]=17976931348623157e292,K[A>>3]=-17976931348623157e292,ze=A+16|0,K[ze>>3]=-17976931348623157e292,!((fe|0)<=0)){for(Ae=d[f+4>>2]|0,B=17976931348623157e292,V=-17976931348623157e292,ie=0,f=-1,T=17976931348623157e292,w=17976931348623157e292,D=-17976931348623157e292,v=-17976931348623157e292,he=0;m=+K[Ae+(he<<4)>>3],C=+K[Ae+(he<<4)+8>>3],f=f+2|0,x=+K[Ae+(((f|0)==(fe|0)?0:f)<<4)+8>>3],m<T&&(K[xe>>3]=m,T=m),C<w&&(K[Ee>>3]=C,w=C),m>D?K[A>>3]=m:m=D,C>v&&(K[ze>>3]=C,v=C),B=C>0&C<B?C:B,V=C<0&C>V?C:V,ie=ie|+An(+(C-x))>3.141592653589793,f=he+1|0,(f|0)!=(fe|0);)Ue=he,D=m,he=f,f=Ue;ie&&(K[ze>>3]=V,K[Ee>>3]=B)}}function hs(f){return f=f|0,(f>>>0<4?0:15)|0}function ll(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0,xt=0,Vt=0,gt=0;if(fe=d[f>>2]|0,fe){if(xe=A+8|0,K[xe>>3]=17976931348623157e292,Ee=A+24|0,K[Ee>>3]=17976931348623157e292,K[A>>3]=-17976931348623157e292,ze=A+16|0,K[ze>>3]=-17976931348623157e292,(fe|0)>0){for(x=d[f+4>>2]|0,Ae=17976931348623157e292,he=-17976931348623157e292,v=0,m=-1,D=17976931348623157e292,B=17976931348623157e292,ie=-17976931348623157e292,w=-17976931348623157e292,Ue=0;T=+K[x+(Ue<<4)>>3],V=+K[x+(Ue<<4)+8>>3],Vt=m+2|0,C=+K[x+(((Vt|0)==(fe|0)?0:Vt)<<4)+8>>3],T<D&&(K[xe>>3]=T,D=T),V<B&&(K[Ee>>3]=V,B=V),T>ie?K[A>>3]=T:T=ie,V>w&&(K[ze>>3]=V,w=V),Ae=V>0&V<Ae?V:Ae,he=V<0&V>he?V:he,v=v|+An(+(V-C))>3.141592653589793,m=Ue+1|0,(m|0)!=(fe|0);)Vt=Ue,ie=T,Ue=m,m=Vt;v&&(K[ze>>3]=he,K[Ee>>3]=Ae)}}else d[A>>2]=0,d[A+4>>2]=0,d[A+8>>2]=0,d[A+12>>2]=0,d[A+16>>2]=0,d[A+20>>2]=0,d[A+24>>2]=0,d[A+28>>2]=0;if(Vt=f+8|0,m=d[Vt>>2]|0,!((m|0)<=0)){xt=f+12|0,qe=0;do if(x=d[xt>>2]|0,v=qe,qe=qe+1|0,Ee=A+(qe<<5)|0,ze=d[x+(v<<3)>>2]|0,ze){if(Ue=A+(qe<<5)+8|0,K[Ue>>3]=17976931348623157e292,f=A+(qe<<5)+24|0,K[f>>3]=17976931348623157e292,K[Ee>>3]=-17976931348623157e292,Ce=A+(qe<<5)+16|0,K[Ce>>3]=-17976931348623157e292,(ze|0)>0){for(fe=d[x+(v<<3)+4>>2]|0,Ae=17976931348623157e292,he=-17976931348623157e292,x=0,v=-1,xe=0,D=17976931348623157e292,B=17976931348623157e292,V=-17976931348623157e292,w=-17976931348623157e292;T=+K[fe+(xe<<4)>>3],ie=+K[fe+(xe<<4)+8>>3],v=v+2|0,C=+K[fe+(((v|0)==(ze|0)?0:v)<<4)+8>>3],T<D&&(K[Ue>>3]=T,D=T),ie<B&&(K[f>>3]=ie,B=ie),T>V?K[Ee>>3]=T:T=V,ie>w&&(K[Ce>>3]=ie,w=ie),Ae=ie>0&ie<Ae?ie:Ae,he=ie<0&ie>he?ie:he,x=x|+An(+(ie-C))>3.141592653589793,v=xe+1|0,(v|0)!=(ze|0);)gt=xe,xe=v,V=T,v=gt;x&&(K[Ce>>3]=he,K[f>>3]=Ae)}}else d[Ee>>2]=0,d[Ee+4>>2]=0,d[Ee+8>>2]=0,d[Ee+12>>2]=0,d[Ee+16>>2]=0,d[Ee+20>>2]=0,d[Ee+24>>2]=0,d[Ee+28>>2]=0,m=d[Vt>>2]|0;while((qe|0)<(m|0))}}function Ja(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0;if(!(Gl(f,A,m)|0))return x=0,x|0;if(x=f+8|0,(d[x>>2]|0)<=0)return x=1,x|0;for(v=f+12|0,f=0;;){if(T=f,f=f+1|0,Gl((d[v>>2]|0)+(T<<3)|0,A+(f<<5)|0,m)|0){f=0,v=6;break}if((f|0)>=(d[x>>2]|0)){f=1,v=6;break}}return(v|0)==6?f|0:0}function Co(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0;if(B=Q,Q=Q+16|0,C=B,w=m+8|0,!(Gl(f,A,w)|0))return D=0,Q=B,D|0;D=f+8|0;e:do if((d[D>>2]|0)>0){for(T=f+12|0,x=0;;){if(V=x,x=x+1|0,Gl((d[T>>2]|0)+(V<<3)|0,A+(x<<5)|0,w)|0){x=0;break}if((x|0)>=(d[D>>2]|0))break e}return Q=B,x|0}while(!1);if(No(f,A,m,v)|0)return V=0,Q=B,V|0;d[C>>2]=d[m>>2],d[C+4>>2]=w,x=d[D>>2]|0;e:do if((x|0)>0)for(f=f+12|0,w=0,T=x;;){if(x=d[f>>2]|0,(d[x+(w<<3)>>2]|0)>0){if(Gl(C,v,d[x+(w<<3)+4>>2]|0)|0){x=0;break e}if(x=w+1|0,No((d[f>>2]|0)+(w<<3)|0,A+(x<<5)|0,m,v)|0){x=0;break e}T=d[D>>2]|0}else x=w+1|0;if((x|0)<(T|0))w=x;else{x=1;break}}else x=1;while(!1);return V=x,Q=B,V|0}function No(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0,xt=0,Vt=0,gt=0,Ft=0;if(Vt=Q,Q=Q+176|0,Ue=Vt+172|0,x=Vt+168|0,Ce=Vt,!(c0(A,v)|0))return f=0,Q=Vt,f|0;if(Dh(A,v,Ue,x),Yu(Ce|0,m|0,168)|0,(d[m>>2]|0)>0){A=0;do gt=Ce+8+(A<<4)+8|0,ze=+Cs(+K[gt>>3],d[x>>2]|0),K[gt>>3]=ze,A=A+1|0;while((A|0)<(d[m>>2]|0))}xe=+K[v>>3],Ee=+K[v+8>>3],ze=+Cs(+K[v+16>>3],d[x>>2]|0),he=+Cs(+K[v+24>>3],d[x>>2]|0);e:do if((d[f>>2]|0)>0){if(v=f+4|0,x=d[Ce>>2]|0,(x|0)<=0){for(A=0;;)if(A=A+1|0,(A|0)>=(d[f>>2]|0)){A=0;break e}}for(m=0;;){if(A=d[v>>2]|0,Ae=+K[A+(m<<4)>>3],fe=+Cs(+K[A+(m<<4)+8>>3],d[Ue>>2]|0),A=d[v>>2]|0,m=m+1|0,gt=(m|0)%(d[f>>2]|0)|0,T=+K[A+(gt<<4)>>3],w=+Cs(+K[A+(gt<<4)+8>>3],d[Ue>>2]|0),!(Ae>=xe)|!(T>=xe)&&!(Ae<=Ee)|!(T<=Ee)&&!(fe<=he)|!(w<=he)&&!(fe>=ze)|!(w>=ze)){ie=T-Ae,B=w-fe,A=0;do if(Ft=A,A=A+1|0,gt=(A|0)==(x|0)?0:A,T=+K[Ce+8+(Ft<<4)+8>>3],w=+K[Ce+8+(gt<<4)+8>>3]-T,C=+K[Ce+8+(Ft<<4)>>3],D=+K[Ce+8+(gt<<4)>>3]-C,V=ie*w-B*D,V!=0&&(qe=fe-T,xt=Ae-C,D=(qe*D-w*xt)/V,!(D<0|D>1))&&(V=(ie*qe-B*xt)/V,V>=0&V<=1)){A=1;break e}while((A|0)<(x|0))}if((m|0)>=(d[f>>2]|0)){A=0;break}}}else A=0;while(!1);return Ft=A,Q=Vt,Ft|0}function KA(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0;if(No(f,A,m,v)|0)return T=1,T|0;if(T=f+8|0,(d[T>>2]|0)<=0)return T=0,T|0;for(x=f+12|0,f=0;;){if(w=f,f=f+1|0,No((d[x>>2]|0)+(w<<3)|0,A+(f<<5)|0,m,v)|0){f=1,x=6;break}if((f|0)>=(d[T>>2]|0)){f=0,x=6;break}}return(x|0)==6?f|0:0}function ZA(){return 8}function JA(){return 16}function Ns(){return 168}function dr(){return 8}function _i(){return 16}function Hu(){return 12}function Po(){return 8}function e2(f){return f=f|0,+(+((d[f>>2]|0)>>>0)+4294967296*+(d[f+4>>2]|0))}function ju(f){f=f|0;var A=0,m=0;return m=+K[f>>3],A=+K[f+8>>3],+ +In(+(m*m+A*A))}function t2(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0;B=+K[f>>3],D=+K[A>>3]-B,C=+K[f+8>>3],w=+K[A+8>>3]-C,ie=+K[m>>3],T=+K[v>>3]-ie,Ae=+K[m+8>>3],V=+K[v+8>>3]-Ae,T=(T*(C-Ae)-(B-ie)*V)/(D*V-w*T),K[x>>3]=B+D*T,K[x+8>>3]=C+w*T}function n2(f,A){return f=f|0,A=A|0,+An(+(+K[f>>3]-+K[A>>3]))<11920928955078125e-23?(A=+An(+(+K[f+8>>3]-+K[A+8>>3]))<11920928955078125e-23,A|0):(A=0,A|0)}function Zi(f,A){f=f|0,A=A|0;var m=0,v=0,x=0;return x=+K[f>>3]-+K[A>>3],v=+K[f+8>>3]-+K[A+8>>3],m=+K[f+16>>3]-+K[A+16>>3],+(x*x+v*v+m*m)}function g0(f,A){f=f|0,A=A|0;var m=0,v=0,x=0;m=+K[f>>3],v=+jn(+m),m=+Yt(+m),K[A+16>>3]=m,m=+K[f+8>>3],x=v*+jn(+m),K[A>>3]=x,m=v*+Yt(+m),K[A+8>>3]=m}function C4(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0;if(T=Q,Q=Q+16|0,x=T,v=Ai(f,A)|0,(m+-1|0)>>>0>5||(v=(v|0)!=0,(m|0)==1&v))return x=-1,Q=T,x|0;do if(ul(f,A,x)|0)v=-1;else if(v){v=((d[26352+(m<<2)>>2]|0)+5-(d[x>>2]|0)|0)%5|0;break}else{v=((d[26384+(m<<2)>>2]|0)+6-(d[x>>2]|0)|0)%6|0;break}while(!1);return x=v,Q=T,x|0}function ul(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0,B=0;if(B=Q,Q=Q+32|0,w=B+16|0,C=B,v=Ro(f,A,w)|0,v|0)return m=v,Q=B,m|0;T=g4(f,A)|0,D=Ms(f,A)|0,CA(T,C),v=Ic(T,d[w>>2]|0)|0;e:do if(Wi(T)|0){do switch(T|0){case 4:{f=0;break}case 14:{f=1;break}case 24:{f=2;break}case 38:{f=3;break}case 49:{f=4;break}case 58:{f=5;break}case 63:{f=6;break}case 72:{f=7;break}case 83:{f=8;break}case 97:{f=9;break}case 107:{f=10;break}case 117:{f=11;break}default:{v=1;break e}}while(!1);if(x=d[26416+(f*24|0)+8>>2]|0,A=d[26416+(f*24|0)+16>>2]|0,f=d[w>>2]|0,(f|0)!=(d[C>>2]|0)&&(C=MA(T)|0,f=d[w>>2]|0,C|(f|0)==(A|0)&&(v=(v+1|0)%6|0)),(D|0)==3&(f|0)==(A|0)){v=(v+5|0)%6|0,x=22;break}(D|0)==5&(f|0)==(x|0)&&(v=(v+1|0)%6|0),x=22}else x=22;while(!1);return(x|0)==22&&(d[m>>2]=v,v=0),m=v,Q=B,m|0}function Ws(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0;if(Ce=Q,Q=Q+32|0,Ue=Ce+24|0,Ee=Ce+20|0,fe=Ce+8|0,he=Ce+16|0,Ae=Ce,D=(Ai(f,A)|0)==0,D=D?6:5,V=mt(f|0,A|0,52)|0,Z()|0,V=V&15,D>>>0<=m>>>0)return v=2,Q=Ce,v|0;ie=(V|0)==0,!ie&&(xe=yt(7,0,(V^15)*3|0)|0,(xe&f|0)==0&((Z()|0)&A|0)==0)?x=m:T=4;e:do if((T|0)==4){if(x=(Ai(f,A)|0)!=0,((x?4:5)|0)<(m|0)||ul(f,A,Ue)|0||(T=(d[Ue>>2]|0)+m|0,x?x=26704+(((T|0)%5|0)<<2)|0:x=26736+(((T|0)%6|0)<<2)|0,xe=d[x>>2]|0,(xe|0)==7))return v=1,Q=Ce,v|0;d[Ee>>2]=0,x=Jn(f,A,xe,Ee,fe)|0;do if(!x){if(C=fe,B=d[C>>2]|0,C=d[C+4>>2]|0,w=C>>>0<A>>>0|(C|0)==(A|0)&B>>>0<f>>>0,T=w?B:f,w=w?C:A,!ie&&(ie=yt(7,0,(V^15)*3|0)|0,(B&ie|0)==0&(C&(Z()|0)|0)==0))x=m;else{if(C=(m+-1+D|0)%(D|0)|0,x=Ai(f,A)|0,(C|0)<0&&qt(27795,27797,246,27806),D=(x|0)!=0,((D?4:5)|0)<(C|0)&&qt(27795,27797,246,27806),ul(f,A,Ue)|0&&qt(27795,27797,246,27806),x=(d[Ue>>2]|0)+C|0,D?x=26704+(((x|0)%5|0)<<2)|0:x=26736+(((x|0)%6|0)<<2)|0,C=d[x>>2]|0,(C|0)==7&&qt(27795,27797,246,27806),d[he>>2]=0,x=Jn(f,A,C,he,Ae)|0,x|0)break;B=Ae,D=d[B>>2]|0,B=d[B+4>>2]|0;do if(B>>>0<w>>>0|(B|0)==(w|0)&D>>>0<T>>>0){if(Ai(D,B)|0?T=Er(D,B,f,A)|0:T=d[26800+((((d[he>>2]|0)+(d[26768+(C<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,x=Ai(D,B)|0,(T+-1|0)>>>0>5){x=-1,T=D,w=B;break}if(x=(x|0)!=0,(T|0)==1&x){x=-1,T=D,w=B;break}do if(ul(D,B,Ue)|0)x=-1;else if(x){x=((d[26352+(T<<2)>>2]|0)+5-(d[Ue>>2]|0)|0)%5|0;break}else{x=((d[26384+(T<<2)>>2]|0)+6-(d[Ue>>2]|0)|0)%6|0;break}while(!1);T=D,w=B}else x=m;while(!1);C=fe,B=d[C>>2]|0,C=d[C+4>>2]|0}if((T|0)==(B|0)&(w|0)==(C|0)){if(D=(Ai(B,C)|0)!=0,D?f=Er(B,C,f,A)|0:f=d[26800+((((d[Ee>>2]|0)+(d[26768+(xe<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,x=Ai(B,C)|0,(f+-1|0)>>>0<=5&&(ze=(x|0)!=0,!((f|0)==1&ze)))do if(ul(B,C,Ue)|0)x=-1;else if(ze){x=((d[26352+(f<<2)>>2]|0)+5-(d[Ue>>2]|0)|0)%5|0;break}else{x=((d[26384+(f<<2)>>2]|0)+6-(d[Ue>>2]|0)|0)%6|0;break}while(!1);else x=-1;x=x+1|0,x=(x|0)==6|D&(x|0)==5?0:x}A=w,f=T;break e}while(!1);return v=x,Q=Ce,v|0}while(!1);return ze=yt(x|0,0,56)|0,Ue=Z()|0|A&-2130706433|536870912,d[v>>2]=ze|f,d[v+4>>2]=Ue,v=0,Q=Ce,v|0}function Wu(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0;return T=(Ai(f,A)|0)==0,v=Ws(f,A,0,m)|0,x=(v|0)==0,T?!x||(v=Ws(f,A,1,m+8|0)|0,v|0)||(v=Ws(f,A,2,m+16|0)|0,v|0)||(v=Ws(f,A,3,m+24|0)|0,v|0)||(v=Ws(f,A,4,m+32|0)|0,v)?(T=v,T|0):Ws(f,A,5,m+40|0)|0:!x||(v=Ws(f,A,1,m+8|0)|0,v|0)||(v=Ws(f,A,2,m+16|0)|0,v|0)||(v=Ws(f,A,3,m+24|0)|0,v|0)||(v=Ws(f,A,4,m+32|0)|0,v|0)?(T=v,T|0):(T=m+40|0,d[T>>2]=0,d[T+4>>2]=0,T=0,T|0)}function cl(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0,C=0,D=0;return D=Q,Q=Q+192|0,x=D,T=D+168|0,w=mt(f|0,A|0,56)|0,Z()|0,w=w&7,C=A&-2130706433|134217728,v=Ro(f,C,T)|0,v|0?(C=v,Q=D,C|0):(A=mt(f|0,A|0,52)|0,Z()|0,A=A&15,Ai(f,C)|0?LA(T,A,w,1,x):Bh(T,A,w,1,x),C=x+8|0,d[m>>2]=d[C>>2],d[m+4>>2]=d[C+4>>2],d[m+8>>2]=d[C+8>>2],d[m+12>>2]=d[C+12>>2],C=0,Q=D,C|0)}function Vl(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0;return x=Q,Q=Q+16|0,m=x,!(!0&(A&2013265920|0)==536870912)||(v=A&-2130706433|134217728,!(BA(f,v)|0))?(v=0,Q=x,v|0):(T=mt(f|0,A|0,56)|0,Z()|0,T=(Ws(f,v,T&7,m)|0)==0,v=m,v=T&((d[v>>2]|0)==(f|0)?(d[v+4>>2]|0)==(A|0):0)&1,Q=x,v|0)}function Do(f,A,m){f=f|0,A=A|0,m=m|0;var v=0;(A|0)>0?(v=xa(A,4)|0,d[f>>2]=v,v||qt(27819,27842,40,27856)):d[f>>2]=0,d[f+4>>2]=A,d[f+8>>2]=0,d[f+12>>2]=m}function Xh(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0;x=f+4|0,T=f+12|0,w=f+8|0;e:for(;;){for(m=d[x>>2]|0,A=0;;){if((A|0)>=(m|0))break e;if(v=d[f>>2]|0,C=d[v+(A<<2)>>2]|0,!C)A=A+1|0;else break}A=v+(~~(+An(+(+Hs(10,+ +(15-(d[T>>2]|0)|0))*(+K[C>>3]+ +K[C+8>>3])))%+(m|0))>>>0<<2)|0,m=d[A>>2]|0;t:do if(m|0){if(v=C+32|0,(m|0)==(C|0))d[A>>2]=d[v>>2];else{if(m=m+32|0,A=d[m>>2]|0,!A)break;for(;(A|0)!=(C|0);)if(m=A+32|0,A=d[m>>2]|0,!A)break t;d[m>>2]=d[v>>2]}dn(C),d[w>>2]=(d[w>>2]|0)+-1}while(!1)}dn(d[f>>2]|0)}function Qh(f){f=f|0;var A=0,m=0,v=0;for(v=d[f+4>>2]|0,m=0;;){if((m|0)>=(v|0)){A=0,m=4;break}if(A=d[(d[f>>2]|0)+(m<<2)>>2]|0,!A)m=m+1|0;else{m=4;break}}return(m|0)==4?A|0:0}function Xc(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0;if(m=~~(+An(+(+Hs(10,+ +(15-(d[f+12>>2]|0)|0))*(+K[A>>3]+ +K[A+8>>3])))%+(d[f+4>>2]|0))>>>0,m=(d[f>>2]|0)+(m<<2)|0,v=d[m>>2]|0,!v)return T=1,T|0;T=A+32|0;do if((v|0)!=(A|0)){if(m=d[v+32>>2]|0,!m)return T=1,T|0;for(x=m;;){if((x|0)==(A|0)){x=8;break}if(m=d[x+32>>2]|0,m)v=x,x=m;else{m=1,x=10;break}}if((x|0)==8){d[v+32>>2]=d[T>>2];break}else if((x|0)==10)return m|0}else d[m>>2]=d[T>>2];while(!1);return dn(A),T=f+8|0,d[T>>2]=(d[T>>2]|0)+-1,T=0,T|0}function Yh(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0;T=Lo(40)|0,T||qt(27872,27842,98,27885),d[T>>2]=d[A>>2],d[T+4>>2]=d[A+4>>2],d[T+8>>2]=d[A+8>>2],d[T+12>>2]=d[A+12>>2],x=T+16|0,d[x>>2]=d[m>>2],d[x+4>>2]=d[m+4>>2],d[x+8>>2]=d[m+8>>2],d[x+12>>2]=d[m+12>>2],d[T+32>>2]=0,x=~~(+An(+(+Hs(10,+ +(15-(d[f+12>>2]|0)|0))*(+K[A>>3]+ +K[A+8>>3])))%+(d[f+4>>2]|0))>>>0,x=(d[f>>2]|0)+(x<<2)|0,v=d[x>>2]|0;do if(!v)d[x>>2]=T;else{for(;!(Ya(v,A)|0&&Ya(v+16|0,m)|0);)if(x=d[v+32>>2]|0,v=(x|0)==0?v:x,!(d[v+32>>2]|0)){w=10;break}if((w|0)==10){d[v+32>>2]=T;break}return dn(T),w=v,w|0}while(!1);return w=f+8|0,d[w>>2]=(d[w>>2]|0)+1,w=T,w|0}function $u(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0;if(x=~~(+An(+(+Hs(10,+ +(15-(d[f+12>>2]|0)|0))*(+K[A>>3]+ +K[A+8>>3])))%+(d[f+4>>2]|0))>>>0,x=d[(d[f>>2]|0)+(x<<2)>>2]|0,!x)return m=0,m|0;if(!m){for(f=x;;){if(Ya(f,A)|0){v=10;break}if(f=d[f+32>>2]|0,!f){f=0,v=10;break}}if((v|0)==10)return f|0}for(f=x;;){if(Ya(f,A)|0&&Ya(f+16|0,m)|0){v=10;break}if(f=d[f+32>>2]|0,!f){f=0,v=10;break}}return(v|0)==10?f|0:0}function fs(f,A){f=f|0,A=A|0;var m=0;if(m=~~(+An(+(+Hs(10,+ +(15-(d[f+12>>2]|0)|0))*(+K[A>>3]+ +K[A+8>>3])))%+(d[f+4>>2]|0))>>>0,f=d[(d[f>>2]|0)+(m<<2)>>2]|0,!f)return m=0,m|0;for(;;){if(Ya(f,A)|0){A=5;break}if(f=d[f+32>>2]|0,!f){f=0,A=5;break}}return(A|0)==5?f|0:0}function Kh(){return 27904}function hl(f){return f=+f,~~+Jh(+f)|0}function Lo(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0,xe=0,Ee=0,ze=0,Ue=0,Ce=0,qe=0,xt=0;xt=Q,Q=Q+16|0,Ae=xt;do if(f>>>0<245){if(B=f>>>0<11?16:f+11&-8,f=B>>>3,ie=d[6977]|0,m=ie>>>f,m&3|0)return A=(m&1^1)+f|0,f=27948+(A<<1<<2)|0,m=f+8|0,v=d[m>>2]|0,x=v+8|0,T=d[x>>2]|0,(T|0)==(f|0)?d[6977]=ie&~(1<<A):(d[T+12>>2]=f,d[m>>2]=T),qe=A<<3,d[v+4>>2]=qe|3,qe=v+qe+4|0,d[qe>>2]=d[qe>>2]|1,qe=x,Q=xt,qe|0;if(V=d[6979]|0,B>>>0>V>>>0){if(m|0)return A=2<<f,A=m<<f&(A|0-A),A=(A&0-A)+-1|0,C=A>>>12&16,A=A>>>C,m=A>>>5&8,A=A>>>m,T=A>>>2&4,A=A>>>T,f=A>>>1&2,A=A>>>f,v=A>>>1&1,v=(m|C|T|f|v)+(A>>>v)|0,A=27948+(v<<1<<2)|0,f=A+8|0,T=d[f>>2]|0,C=T+8|0,m=d[C>>2]|0,(m|0)==(A|0)?(f=ie&~(1<<v),d[6977]=f):(d[m+12>>2]=A,d[f>>2]=m,f=ie),qe=v<<3,w=qe-B|0,d[T+4>>2]=B|3,x=T+B|0,d[x+4>>2]=w|1,d[T+qe>>2]=w,V|0&&(v=d[6982]|0,A=V>>>3,m=27948+(A<<1<<2)|0,A=1<<A,f&A?(f=m+8|0,A=d[f>>2]|0):(d[6977]=f|A,A=m,f=m+8|0),d[f>>2]=v,d[A+12>>2]=v,d[v+8>>2]=A,d[v+12>>2]=m),d[6979]=w,d[6982]=x,qe=C,Q=xt,qe|0;if(T=d[6978]|0,T){for(m=(T&0-T)+-1|0,x=m>>>12&16,m=m>>>x,v=m>>>5&8,m=m>>>v,w=m>>>2&4,m=m>>>w,C=m>>>1&2,m=m>>>C,D=m>>>1&1,D=d[28212+((v|x|w|C|D)+(m>>>D)<<2)>>2]|0,m=D,C=D,D=(d[D+4>>2]&-8)-B|0;f=d[m+16>>2]|0,!(!f&&(f=d[m+20>>2]|0,!f));)w=(d[f+4>>2]&-8)-B|0,x=w>>>0<D>>>0,m=f,C=x?f:C,D=x?w:D;if(w=C+B|0,w>>>0>C>>>0){x=d[C+24>>2]|0,A=d[C+12>>2]|0;do if((A|0)==(C|0)){if(f=C+20|0,A=d[f>>2]|0,!A&&(f=C+16|0,A=d[f>>2]|0,!A)){m=0;break}for(;;)if(v=A+20|0,m=d[v>>2]|0,m)A=m,f=v;else if(v=A+16|0,m=d[v>>2]|0,m)A=m,f=v;else break;d[f>>2]=0,m=A}else m=d[C+8>>2]|0,d[m+12>>2]=A,d[A+8>>2]=m,m=A;while(!1);do if(x|0){if(A=d[C+28>>2]|0,f=28212+(A<<2)|0,(C|0)==(d[f>>2]|0)){if(d[f>>2]=m,!m){d[6978]=T&~(1<<A);break}}else if(qe=x+16|0,d[((d[qe>>2]|0)==(C|0)?qe:x+20|0)>>2]=m,!m)break;d[m+24>>2]=x,A=d[C+16>>2]|0,A|0&&(d[m+16>>2]=A,d[A+24>>2]=m),A=d[C+20>>2]|0,A|0&&(d[m+20>>2]=A,d[A+24>>2]=m)}while(!1);return D>>>0<16?(qe=D+B|0,d[C+4>>2]=qe|3,qe=C+qe+4|0,d[qe>>2]=d[qe>>2]|1):(d[C+4>>2]=B|3,d[w+4>>2]=D|1,d[w+D>>2]=D,V|0&&(v=d[6982]|0,A=V>>>3,m=27948+(A<<1<<2)|0,A=1<<A,A&ie?(f=m+8|0,A=d[f>>2]|0):(d[6977]=A|ie,A=m,f=m+8|0),d[f>>2]=v,d[A+12>>2]=v,d[v+8>>2]=A,d[v+12>>2]=m),d[6979]=D,d[6982]=w),qe=C+8|0,Q=xt,qe|0}else ie=B}else ie=B}else ie=B}else if(f>>>0<=4294967231)if(f=f+11|0,B=f&-8,v=d[6978]|0,v){x=0-B|0,f=f>>>8,f?B>>>0>16777215?D=31:(ie=(f+1048320|0)>>>16&8,xe=f<<ie,C=(xe+520192|0)>>>16&4,xe=xe<<C,D=(xe+245760|0)>>>16&2,D=14-(C|ie|D)+(xe<<D>>>15)|0,D=B>>>(D+7|0)&1|D<<1):D=0,m=d[28212+(D<<2)>>2]|0;e:do if(!m)m=0,f=0,xe=61;else for(f=0,C=B<<((D|0)==31?0:25-(D>>>1)|0),T=0;;){if(w=(d[m+4>>2]&-8)-B|0,w>>>0<x>>>0)if(w)f=m,x=w;else{f=m,x=0,xe=65;break e}if(xe=d[m+20>>2]|0,m=d[m+16+(C>>>31<<2)>>2]|0,T=(xe|0)==0|(xe|0)==(m|0)?T:xe,m)C=C<<1;else{m=T,xe=61;break}}while(!1);if((xe|0)==61){if((m|0)==0&(f|0)==0){if(f=2<<D,f=(f|0-f)&v,!f){ie=B;break}ie=(f&0-f)+-1|0,w=ie>>>12&16,ie=ie>>>w,T=ie>>>5&8,ie=ie>>>T,C=ie>>>2&4,ie=ie>>>C,D=ie>>>1&2,ie=ie>>>D,m=ie>>>1&1,f=0,m=d[28212+((T|w|C|D|m)+(ie>>>m)<<2)>>2]|0}m?xe=65:(C=f,w=x)}if((xe|0)==65)for(T=m;;)if(ie=(d[T+4>>2]&-8)-B|0,m=ie>>>0<x>>>0,x=m?ie:x,f=m?T:f,m=d[T+16>>2]|0,m||(m=d[T+20>>2]|0),m)T=m;else{C=f,w=x;break}if((C|0)!=0&&w>>>0<((d[6979]|0)-B|0)>>>0&&(V=C+B|0,V>>>0>C>>>0)){T=d[C+24>>2]|0,A=d[C+12>>2]|0;do if((A|0)==(C|0)){if(f=C+20|0,A=d[f>>2]|0,!A&&(f=C+16|0,A=d[f>>2]|0,!A)){A=0;break}for(;;)if(x=A+20|0,m=d[x>>2]|0,m)A=m,f=x;else if(x=A+16|0,m=d[x>>2]|0,m)A=m,f=x;else break;d[f>>2]=0}else qe=d[C+8>>2]|0,d[qe+12>>2]=A,d[A+8>>2]=qe;while(!1);do if(T){if(f=d[C+28>>2]|0,m=28212+(f<<2)|0,(C|0)==(d[m>>2]|0)){if(d[m>>2]=A,!A){v=v&~(1<<f),d[6978]=v;break}}else if(qe=T+16|0,d[((d[qe>>2]|0)==(C|0)?qe:T+20|0)>>2]=A,!A)break;d[A+24>>2]=T,f=d[C+16>>2]|0,f|0&&(d[A+16>>2]=f,d[f+24>>2]=A),f=d[C+20>>2]|0,f&&(d[A+20>>2]=f,d[f+24>>2]=A)}while(!1);e:do if(w>>>0<16)qe=w+B|0,d[C+4>>2]=qe|3,qe=C+qe+4|0,d[qe>>2]=d[qe>>2]|1;else{if(d[C+4>>2]=B|3,d[V+4>>2]=w|1,d[V+w>>2]=w,A=w>>>3,w>>>0<256){m=27948+(A<<1<<2)|0,f=d[6977]|0,A=1<<A,f&A?(f=m+8|0,A=d[f>>2]|0):(d[6977]=f|A,A=m,f=m+8|0),d[f>>2]=V,d[A+12>>2]=V,d[V+8>>2]=A,d[V+12>>2]=m;break}if(A=w>>>8,A?w>>>0>16777215?m=31:(Ce=(A+1048320|0)>>>16&8,qe=A<<Ce,Ue=(qe+520192|0)>>>16&4,qe=qe<<Ue,m=(qe+245760|0)>>>16&2,m=14-(Ue|Ce|m)+(qe<<m>>>15)|0,m=w>>>(m+7|0)&1|m<<1):m=0,A=28212+(m<<2)|0,d[V+28>>2]=m,f=V+16|0,d[f+4>>2]=0,d[f>>2]=0,f=1<<m,!(v&f)){d[6978]=v|f,d[A>>2]=V,d[V+24>>2]=A,d[V+12>>2]=V,d[V+8>>2]=V;break}A=d[A>>2]|0;t:do if((d[A+4>>2]&-8|0)!=(w|0)){for(v=w<<((m|0)==31?0:25-(m>>>1)|0);m=A+16+(v>>>31<<2)|0,f=d[m>>2]|0,!!f;)if((d[f+4>>2]&-8|0)==(w|0)){A=f;break t}else v=v<<1,A=f;d[m>>2]=V,d[V+24>>2]=A,d[V+12>>2]=V,d[V+8>>2]=V;break e}while(!1);Ce=A+8|0,qe=d[Ce>>2]|0,d[qe+12>>2]=V,d[Ce>>2]=V,d[V+8>>2]=qe,d[V+12>>2]=A,d[V+24>>2]=0}while(!1);return qe=C+8|0,Q=xt,qe|0}else ie=B}else ie=B;else ie=-1;while(!1);if(m=d[6979]|0,m>>>0>=ie>>>0)return A=m-ie|0,f=d[6982]|0,A>>>0>15?(qe=f+ie|0,d[6982]=qe,d[6979]=A,d[qe+4>>2]=A|1,d[f+m>>2]=A,d[f+4>>2]=ie|3):(d[6979]=0,d[6982]=0,d[f+4>>2]=m|3,qe=f+m+4|0,d[qe>>2]=d[qe>>2]|1),qe=f+8|0,Q=xt,qe|0;if(w=d[6980]|0,w>>>0>ie>>>0)return Ue=w-ie|0,d[6980]=Ue,qe=d[6983]|0,Ce=qe+ie|0,d[6983]=Ce,d[Ce+4>>2]=Ue|1,d[qe+4>>2]=ie|3,qe=qe+8|0,Q=xt,qe|0;if(d[7095]|0?f=d[7097]|0:(d[7097]=4096,d[7096]=4096,d[7098]=-1,d[7099]=-1,d[7100]=0,d[7088]=0,d[7095]=Ae&-16^1431655768,f=4096),C=ie+48|0,D=ie+47|0,T=f+D|0,x=0-f|0,B=T&x,B>>>0<=ie>>>0||(f=d[7087]|0,f|0&&(V=d[7085]|0,Ae=V+B|0,Ae>>>0<=V>>>0|Ae>>>0>f>>>0)))return qe=0,Q=xt,qe|0;e:do if(d[7088]&4)A=0,xe=143;else{m=d[6983]|0;t:do if(m){for(v=28356;Ae=d[v>>2]|0,!(Ae>>>0<=m>>>0&&(Ae+(d[v+4>>2]|0)|0)>>>0>m>>>0);)if(f=d[v+8>>2]|0,f)v=f;else{xe=128;break t}if(A=T-w&x,A>>>0<2147483647)if(f=fl(A|0)|0,(f|0)==((d[v>>2]|0)+(d[v+4>>2]|0)|0)){if((f|0)!=-1){w=A,T=f,xe=145;break e}}else v=f,xe=136;else A=0}else xe=128;while(!1);do if((xe|0)==128)if(m=fl(0)|0,(m|0)!=-1&&(A=m,he=d[7096]|0,fe=he+-1|0,A=((fe&A|0)==0?0:(fe+A&0-he)-A|0)+B|0,he=d[7085]|0,fe=A+he|0,A>>>0>ie>>>0&A>>>0<2147483647)){if(Ae=d[7087]|0,Ae|0&&fe>>>0<=he>>>0|fe>>>0>Ae>>>0){A=0;break}if(f=fl(A|0)|0,(f|0)==(m|0)){w=A,T=m,xe=145;break e}else v=f,xe=136}else A=0;while(!1);do if((xe|0)==136){if(m=0-A|0,!(C>>>0>A>>>0&(A>>>0<2147483647&(v|0)!=-1)))if((v|0)==-1){A=0;break}else{w=A,T=v,xe=145;break e}if(f=d[7097]|0,f=D-A+f&0-f,f>>>0>=2147483647){w=A,T=v,xe=145;break e}if((fl(f|0)|0)==-1){fl(m|0)|0,A=0;break}else{w=f+A|0,T=v,xe=145;break e}}while(!1);d[7088]=d[7088]|4,xe=143}while(!1);if((xe|0)==143&&B>>>0<2147483647&&(Ue=fl(B|0)|0,fe=fl(0)|0,Ee=fe-Ue|0,ze=Ee>>>0>(ie+40|0)>>>0,!((Ue|0)==-1|ze^1|Ue>>>0<fe>>>0&((Ue|0)!=-1&(fe|0)!=-1)^1))&&(w=ze?Ee:A,T=Ue,xe=145),(xe|0)==145){A=(d[7085]|0)+w|0,d[7085]=A,A>>>0>(d[7086]|0)>>>0&&(d[7086]=A),D=d[6983]|0;e:do if(D){for(A=28356;;){if(f=d[A>>2]|0,m=d[A+4>>2]|0,(T|0)==(f+m|0)){xe=154;break}if(v=d[A+8>>2]|0,v)A=v;else break}if((xe|0)==154&&(Ce=A+4|0,(d[A+12>>2]&8|0)==0)&&T>>>0>D>>>0&f>>>0<=D>>>0){d[Ce>>2]=m+w,qe=(d[6980]|0)+w|0,Ue=D+8|0,Ue=(Ue&7|0)==0?0:0-Ue&7,Ce=D+Ue|0,Ue=qe-Ue|0,d[6983]=Ce,d[6980]=Ue,d[Ce+4>>2]=Ue|1,d[D+qe+4>>2]=40,d[6984]=d[7099];break}for(T>>>0<(d[6981]|0)>>>0&&(d[6981]=T),m=T+w|0,A=28356;;){if((d[A>>2]|0)==(m|0)){xe=162;break}if(f=d[A+8>>2]|0,f)A=f;else break}if((xe|0)==162&&(d[A+12>>2]&8|0)==0){d[A>>2]=T,V=A+4|0,d[V>>2]=(d[V>>2]|0)+w,V=T+8|0,V=T+((V&7|0)==0?0:0-V&7)|0,A=m+8|0,A=m+((A&7|0)==0?0:0-A&7)|0,B=V+ie|0,C=A-V-ie|0,d[V+4>>2]=ie|3;t:do if((D|0)==(A|0))qe=(d[6980]|0)+C|0,d[6980]=qe,d[6983]=B,d[B+4>>2]=qe|1;else{if((d[6982]|0)==(A|0)){qe=(d[6979]|0)+C|0,d[6979]=qe,d[6982]=B,d[B+4>>2]=qe|1,d[B+qe>>2]=qe;break}if(f=d[A+4>>2]|0,(f&3|0)==1){w=f&-8,v=f>>>3;n:do if(f>>>0<256)if(f=d[A+8>>2]|0,m=d[A+12>>2]|0,(m|0)==(f|0)){d[6977]=d[6977]&~(1<<v);break}else{d[f+12>>2]=m,d[m+8>>2]=f;break}else{T=d[A+24>>2]|0,f=d[A+12>>2]|0;do if((f|0)==(A|0)){if(m=A+16|0,v=m+4|0,f=d[v>>2]|0,f)m=v;else if(f=d[m>>2]|0,!f){f=0;break}for(;;)if(x=f+20|0,v=d[x>>2]|0,v)f=v,m=x;else if(x=f+16|0,v=d[x>>2]|0,v)f=v,m=x;else break;d[m>>2]=0}else qe=d[A+8>>2]|0,d[qe+12>>2]=f,d[f+8>>2]=qe;while(!1);if(!T)break;m=d[A+28>>2]|0,v=28212+(m<<2)|0;do if((d[v>>2]|0)!=(A|0)){if(qe=T+16|0,d[((d[qe>>2]|0)==(A|0)?qe:T+20|0)>>2]=f,!f)break n}else{if(d[v>>2]=f,f|0)break;d[6978]=d[6978]&~(1<<m);break n}while(!1);if(d[f+24>>2]=T,m=A+16|0,v=d[m>>2]|0,v|0&&(d[f+16>>2]=v,d[v+24>>2]=f),m=d[m+4>>2]|0,!m)break;d[f+20>>2]=m,d[m+24>>2]=f}while(!1);A=A+w|0,x=w+C|0}else x=C;if(A=A+4|0,d[A>>2]=d[A>>2]&-2,d[B+4>>2]=x|1,d[B+x>>2]=x,A=x>>>3,x>>>0<256){m=27948+(A<<1<<2)|0,f=d[6977]|0,A=1<<A,f&A?(f=m+8|0,A=d[f>>2]|0):(d[6977]=f|A,A=m,f=m+8|0),d[f>>2]=B,d[A+12>>2]=B,d[B+8>>2]=A,d[B+12>>2]=m;break}A=x>>>8;do if(!A)v=0;else{if(x>>>0>16777215){v=31;break}Ce=(A+1048320|0)>>>16&8,qe=A<<Ce,Ue=(qe+520192|0)>>>16&4,qe=qe<<Ue,v=(qe+245760|0)>>>16&2,v=14-(Ue|Ce|v)+(qe<<v>>>15)|0,v=x>>>(v+7|0)&1|v<<1}while(!1);if(A=28212+(v<<2)|0,d[B+28>>2]=v,f=B+16|0,d[f+4>>2]=0,d[f>>2]=0,f=d[6978]|0,m=1<<v,!(f&m)){d[6978]=f|m,d[A>>2]=B,d[B+24>>2]=A,d[B+12>>2]=B,d[B+8>>2]=B;break}A=d[A>>2]|0;n:do if((d[A+4>>2]&-8|0)!=(x|0)){for(v=x<<((v|0)==31?0:25-(v>>>1)|0);m=A+16+(v>>>31<<2)|0,f=d[m>>2]|0,!!f;)if((d[f+4>>2]&-8|0)==(x|0)){A=f;break n}else v=v<<1,A=f;d[m>>2]=B,d[B+24>>2]=A,d[B+12>>2]=B,d[B+8>>2]=B;break t}while(!1);Ce=A+8|0,qe=d[Ce>>2]|0,d[qe+12>>2]=B,d[Ce>>2]=B,d[B+8>>2]=qe,d[B+12>>2]=A,d[B+24>>2]=0}while(!1);return qe=V+8|0,Q=xt,qe|0}for(A=28356;f=d[A>>2]|0,!(f>>>0<=D>>>0&&(qe=f+(d[A+4>>2]|0)|0,qe>>>0>D>>>0));)A=d[A+8>>2]|0;x=qe+-47|0,f=x+8|0,f=x+((f&7|0)==0?0:0-f&7)|0,x=D+16|0,f=f>>>0<x>>>0?D:f,A=f+8|0,m=w+-40|0,Ue=T+8|0,Ue=(Ue&7|0)==0?0:0-Ue&7,Ce=T+Ue|0,Ue=m-Ue|0,d[6983]=Ce,d[6980]=Ue,d[Ce+4>>2]=Ue|1,d[T+m+4>>2]=40,d[6984]=d[7099],m=f+4|0,d[m>>2]=27,d[A>>2]=d[7089],d[A+4>>2]=d[7090],d[A+8>>2]=d[7091],d[A+12>>2]=d[7092],d[7089]=T,d[7090]=w,d[7092]=0,d[7091]=A,A=f+24|0;do Ce=A,A=A+4|0,d[A>>2]=7;while((Ce+8|0)>>>0<qe>>>0);if((f|0)!=(D|0)){if(T=f-D|0,d[m>>2]=d[m>>2]&-2,d[D+4>>2]=T|1,d[f>>2]=T,A=T>>>3,T>>>0<256){m=27948+(A<<1<<2)|0,f=d[6977]|0,A=1<<A,f&A?(f=m+8|0,A=d[f>>2]|0):(d[6977]=f|A,A=m,f=m+8|0),d[f>>2]=D,d[A+12>>2]=D,d[D+8>>2]=A,d[D+12>>2]=m;break}if(A=T>>>8,A?T>>>0>16777215?v=31:(Ce=(A+1048320|0)>>>16&8,qe=A<<Ce,Ue=(qe+520192|0)>>>16&4,qe=qe<<Ue,v=(qe+245760|0)>>>16&2,v=14-(Ue|Ce|v)+(qe<<v>>>15)|0,v=T>>>(v+7|0)&1|v<<1):v=0,m=28212+(v<<2)|0,d[D+28>>2]=v,d[D+20>>2]=0,d[x>>2]=0,A=d[6978]|0,f=1<<v,!(A&f)){d[6978]=A|f,d[m>>2]=D,d[D+24>>2]=m,d[D+12>>2]=D,d[D+8>>2]=D;break}A=d[m>>2]|0;t:do if((d[A+4>>2]&-8|0)!=(T|0)){for(v=T<<((v|0)==31?0:25-(v>>>1)|0);m=A+16+(v>>>31<<2)|0,f=d[m>>2]|0,!!f;)if((d[f+4>>2]&-8|0)==(T|0)){A=f;break t}else v=v<<1,A=f;d[m>>2]=D,d[D+24>>2]=A,d[D+12>>2]=D,d[D+8>>2]=D;break e}while(!1);Ce=A+8|0,qe=d[Ce>>2]|0,d[qe+12>>2]=D,d[Ce>>2]=D,d[D+8>>2]=qe,d[D+12>>2]=A,d[D+24>>2]=0}}else qe=d[6981]|0,(qe|0)==0|T>>>0<qe>>>0&&(d[6981]=T),d[7089]=T,d[7090]=w,d[7092]=0,d[6986]=d[7095],d[6985]=-1,d[6990]=27948,d[6989]=27948,d[6992]=27956,d[6991]=27956,d[6994]=27964,d[6993]=27964,d[6996]=27972,d[6995]=27972,d[6998]=27980,d[6997]=27980,d[7e3]=27988,d[6999]=27988,d[7002]=27996,d[7001]=27996,d[7004]=28004,d[7003]=28004,d[7006]=28012,d[7005]=28012,d[7008]=28020,d[7007]=28020,d[7010]=28028,d[7009]=28028,d[7012]=28036,d[7011]=28036,d[7014]=28044,d[7013]=28044,d[7016]=28052,d[7015]=28052,d[7018]=28060,d[7017]=28060,d[7020]=28068,d[7019]=28068,d[7022]=28076,d[7021]=28076,d[7024]=28084,d[7023]=28084,d[7026]=28092,d[7025]=28092,d[7028]=28100,d[7027]=28100,d[7030]=28108,d[7029]=28108,d[7032]=28116,d[7031]=28116,d[7034]=28124,d[7033]=28124,d[7036]=28132,d[7035]=28132,d[7038]=28140,d[7037]=28140,d[7040]=28148,d[7039]=28148,d[7042]=28156,d[7041]=28156,d[7044]=28164,d[7043]=28164,d[7046]=28172,d[7045]=28172,d[7048]=28180,d[7047]=28180,d[7050]=28188,d[7049]=28188,d[7052]=28196,d[7051]=28196,qe=w+-40|0,Ue=T+8|0,Ue=(Ue&7|0)==0?0:0-Ue&7,Ce=T+Ue|0,Ue=qe-Ue|0,d[6983]=Ce,d[6980]=Ue,d[Ce+4>>2]=Ue|1,d[T+qe+4>>2]=40,d[6984]=d[7099];while(!1);if(A=d[6980]|0,A>>>0>ie>>>0)return Ue=A-ie|0,d[6980]=Ue,qe=d[6983]|0,Ce=qe+ie|0,d[6983]=Ce,d[Ce+4>>2]=Ue|1,d[qe+4>>2]=ie|3,qe=qe+8|0,Q=xt,qe|0}return qe=Kh()|0,d[qe>>2]=12,qe=0,Q=xt,qe|0}function dn(f){f=f|0;var A=0,m=0,v=0,x=0,T=0,w=0,C=0,D=0;if(f){m=f+-8|0,x=d[6981]|0,f=d[f+-4>>2]|0,A=f&-8,D=m+A|0;do if(f&1)C=m,w=m;else{if(v=d[m>>2]|0,!(f&3)||(w=m+(0-v)|0,T=v+A|0,w>>>0<x>>>0))return;if((d[6982]|0)==(w|0)){if(f=D+4|0,A=d[f>>2]|0,(A&3|0)!=3){C=w,A=T;break}d[6979]=T,d[f>>2]=A&-2,d[w+4>>2]=T|1,d[w+T>>2]=T;return}if(m=v>>>3,v>>>0<256)if(f=d[w+8>>2]|0,A=d[w+12>>2]|0,(A|0)==(f|0)){d[6977]=d[6977]&~(1<<m),C=w,A=T;break}else{d[f+12>>2]=A,d[A+8>>2]=f,C=w,A=T;break}x=d[w+24>>2]|0,f=d[w+12>>2]|0;do if((f|0)==(w|0)){if(A=w+16|0,m=A+4|0,f=d[m>>2]|0,f)A=m;else if(f=d[A>>2]|0,!f){f=0;break}for(;;)if(v=f+20|0,m=d[v>>2]|0,m)f=m,A=v;else if(v=f+16|0,m=d[v>>2]|0,m)f=m,A=v;else break;d[A>>2]=0}else C=d[w+8>>2]|0,d[C+12>>2]=f,d[f+8>>2]=C;while(!1);if(x){if(A=d[w+28>>2]|0,m=28212+(A<<2)|0,(d[m>>2]|0)==(w|0)){if(d[m>>2]=f,!f){d[6978]=d[6978]&~(1<<A),C=w,A=T;break}}else if(C=x+16|0,d[((d[C>>2]|0)==(w|0)?C:x+20|0)>>2]=f,!f){C=w,A=T;break}d[f+24>>2]=x,A=w+16|0,m=d[A>>2]|0,m|0&&(d[f+16>>2]=m,d[m+24>>2]=f),A=d[A+4>>2]|0,A?(d[f+20>>2]=A,d[A+24>>2]=f,C=w,A=T):(C=w,A=T)}else C=w,A=T}while(!1);if(!(w>>>0>=D>>>0)&&(f=D+4|0,v=d[f>>2]|0,!!(v&1))){if(v&2)d[f>>2]=v&-2,d[C+4>>2]=A|1,d[w+A>>2]=A,x=A;else{if((d[6983]|0)==(D|0)){if(D=(d[6980]|0)+A|0,d[6980]=D,d[6983]=C,d[C+4>>2]=D|1,(C|0)!=(d[6982]|0))return;d[6982]=0,d[6979]=0;return}if((d[6982]|0)==(D|0)){D=(d[6979]|0)+A|0,d[6979]=D,d[6982]=w,d[C+4>>2]=D|1,d[w+D>>2]=D;return}x=(v&-8)+A|0,m=v>>>3;do if(v>>>0<256)if(A=d[D+8>>2]|0,f=d[D+12>>2]|0,(f|0)==(A|0)){d[6977]=d[6977]&~(1<<m);break}else{d[A+12>>2]=f,d[f+8>>2]=A;break}else{T=d[D+24>>2]|0,f=d[D+12>>2]|0;do if((f|0)==(D|0)){if(A=D+16|0,m=A+4|0,f=d[m>>2]|0,f)A=m;else if(f=d[A>>2]|0,!f){m=0;break}for(;;)if(v=f+20|0,m=d[v>>2]|0,m)f=m,A=v;else if(v=f+16|0,m=d[v>>2]|0,m)f=m,A=v;else break;d[A>>2]=0,m=f}else m=d[D+8>>2]|0,d[m+12>>2]=f,d[f+8>>2]=m,m=f;while(!1);if(T|0){if(f=d[D+28>>2]|0,A=28212+(f<<2)|0,(d[A>>2]|0)==(D|0)){if(d[A>>2]=m,!m){d[6978]=d[6978]&~(1<<f);break}}else if(v=T+16|0,d[((d[v>>2]|0)==(D|0)?v:T+20|0)>>2]=m,!m)break;d[m+24>>2]=T,f=D+16|0,A=d[f>>2]|0,A|0&&(d[m+16>>2]=A,d[A+24>>2]=m),f=d[f+4>>2]|0,f|0&&(d[m+20>>2]=f,d[f+24>>2]=m)}}while(!1);if(d[C+4>>2]=x|1,d[w+x>>2]=x,(C|0)==(d[6982]|0)){d[6979]=x;return}}if(f=x>>>3,x>>>0<256){m=27948+(f<<1<<2)|0,A=d[6977]|0,f=1<<f,A&f?(A=m+8|0,f=d[A>>2]|0):(d[6977]=A|f,f=m,A=m+8|0),d[A>>2]=C,d[f+12>>2]=C,d[C+8>>2]=f,d[C+12>>2]=m;return}f=x>>>8,f?x>>>0>16777215?v=31:(w=(f+1048320|0)>>>16&8,D=f<<w,T=(D+520192|0)>>>16&4,D=D<<T,v=(D+245760|0)>>>16&2,v=14-(T|w|v)+(D<<v>>>15)|0,v=x>>>(v+7|0)&1|v<<1):v=0,f=28212+(v<<2)|0,d[C+28>>2]=v,d[C+20>>2]=0,d[C+16>>2]=0,A=d[6978]|0,m=1<<v;e:do if(!(A&m))d[6978]=A|m,d[f>>2]=C,d[C+24>>2]=f,d[C+12>>2]=C,d[C+8>>2]=C;else{f=d[f>>2]|0;t:do if((d[f+4>>2]&-8|0)!=(x|0)){for(v=x<<((v|0)==31?0:25-(v>>>1)|0);m=f+16+(v>>>31<<2)|0,A=d[m>>2]|0,!!A;)if((d[A+4>>2]&-8|0)==(x|0)){f=A;break t}else v=v<<1,f=A;d[m>>2]=C,d[C+24>>2]=f,d[C+12>>2]=C,d[C+8>>2]=C;break e}while(!1);w=f+8|0,D=d[w>>2]|0,d[D+12>>2]=C,d[w>>2]=C,d[C+8>>2]=D,d[C+12>>2]=f,d[C+24>>2]=0}while(!1);if(D=(d[6985]|0)+-1|0,d[6985]=D,!(D|0)){for(f=28364;f=d[f>>2]|0,f;)f=f+8|0;d[6985]=-1}}}}function xa(f,A){f=f|0,A=A|0;var m=0;return f?(m=Ve(A,f)|0,(A|f)>>>0>65535&&(m=((m>>>0)/(f>>>0)|0|0)==(A|0)?m:-1)):m=0,f=Lo(m)|0,!f||!(d[f+-4>>2]&3)||Oo(f|0,0,m|0)|0,f|0}function zt(f,A,m,v){return f=f|0,A=A|0,m=m|0,v=v|0,m=f+m>>>0,ot(A+v+(m>>>0<f>>>0|0)>>>0|0),m|0|0}function Ir(f,A,m,v){return f=f|0,A=A|0,m=m|0,v=v|0,v=A-v-(m>>>0>f>>>0|0)>>>0,ot(v|0),f-m>>>0|0|0}function Qc(f){return f=f|0,(f?31-(Rt(f^f-1)|0)|0:32)|0}function Xu(f,A,m,v,x){f=f|0,A=A|0,m=m|0,v=v|0,x=x|0;var T=0,w=0,C=0,D=0,B=0,V=0,ie=0,Ae=0,he=0,fe=0;if(V=f,D=A,B=D,w=m,Ae=v,C=Ae,!B)return T=(x|0)!=0,C?T?(d[x>>2]=f|0,d[x+4>>2]=A&0,Ae=0,x=0,ot(Ae|0),x|0):(Ae=0,x=0,ot(Ae|0),x|0):(T&&(d[x>>2]=(V>>>0)%(w>>>0),d[x+4>>2]=0),Ae=0,x=(V>>>0)/(w>>>0)>>>0,ot(Ae|0),x|0);T=(C|0)==0;do if(w){if(!T){if(T=(Rt(C|0)|0)-(Rt(B|0)|0)|0,T>>>0<=31){ie=T+1|0,C=31-T|0,A=T-31>>31,w=ie,f=V>>>(ie>>>0)&A|B<<C,A=B>>>(ie>>>0)&A,T=0,C=V<<C;break}return x?(d[x>>2]=f|0,d[x+4>>2]=D|A&0,Ae=0,x=0,ot(Ae|0),x|0):(Ae=0,x=0,ot(Ae|0),x|0)}if(T=w-1|0,T&w|0){C=(Rt(w|0)|0)+33-(Rt(B|0)|0)|0,fe=64-C|0,ie=32-C|0,D=ie>>31,he=C-32|0,A=he>>31,w=C,f=ie-1>>31&B>>>(he>>>0)|(B<<ie|V>>>(C>>>0))&A,A=A&B>>>(C>>>0),T=V<<fe&D,C=(B<<fe|V>>>(he>>>0))&D|V<<ie&C-33>>31;break}return x|0&&(d[x>>2]=T&V,d[x+4>>2]=0),(w|0)==1?(he=D|A&0,fe=f|0|0,ot(he|0),fe|0):(fe=Qc(w|0)|0,he=B>>>(fe>>>0)|0,fe=B<<32-fe|V>>>(fe>>>0)|0,ot(he|0),fe|0)}else{if(T)return x|0&&(d[x>>2]=(B>>>0)%(w>>>0),d[x+4>>2]=0),he=0,fe=(B>>>0)/(w>>>0)>>>0,ot(he|0),fe|0;if(!V)return x|0&&(d[x>>2]=0,d[x+4>>2]=(B>>>0)%(C>>>0)),he=0,fe=(B>>>0)/(C>>>0)>>>0,ot(he|0),fe|0;if(T=C-1|0,!(T&C))return x|0&&(d[x>>2]=f|0,d[x+4>>2]=T&B|A&0),he=0,fe=B>>>((Qc(C|0)|0)>>>0),ot(he|0),fe|0;if(T=(Rt(C|0)|0)-(Rt(B|0)|0)|0,T>>>0<=30){A=T+1|0,C=31-T|0,w=A,f=B<<C|V>>>(A>>>0),A=B>>>(A>>>0),T=0,C=V<<C;break}return x?(d[x>>2]=f|0,d[x+4>>2]=D|A&0,he=0,fe=0,ot(he|0),fe|0):(he=0,fe=0,ot(he|0),fe|0)}while(!1);if(!w)B=C,D=0,C=0;else{ie=m|0|0,V=Ae|v&0,B=zt(ie|0,V|0,-1,-1)|0,m=Z()|0,D=C,C=0;do v=D,D=T>>>31|D<<1,T=C|T<<1,v=f<<1|v>>>31|0,Ae=f>>>31|A<<1|0,Ir(B|0,m|0,v|0,Ae|0)|0,fe=Z()|0,he=fe>>31|((fe|0)<0?-1:0)<<1,C=he&1,f=Ir(v|0,Ae|0,he&ie|0,(((fe|0)<0?-1:0)>>31|((fe|0)<0?-1:0)<<1)&V|0)|0,A=Z()|0,w=w-1|0;while((w|0)!=0);B=D,D=0}return w=0,x|0&&(d[x>>2]=f,d[x+4>>2]=A),he=(T|0)>>>31|(B|w)<<1|(w<<1|T>>>31)&0|D,fe=(T<<1|0)&-2|C,ot(he|0),fe|0}function Uo(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0;return B=A>>31|((A|0)<0?-1:0)<<1,D=((A|0)<0?-1:0)>>31|((A|0)<0?-1:0)<<1,T=v>>31|((v|0)<0?-1:0)<<1,x=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,C=Ir(B^f|0,D^A|0,B|0,D|0)|0,w=Z()|0,f=T^B,A=x^D,Ir((Xu(C,w,Ir(T^m|0,x^v|0,T|0,x|0)|0,Z()|0,0)|0)^f|0,(Z()|0)^A|0,f|0,A|0)|0}function Yc(f,A){f=f|0,A=A|0;var m=0,v=0,x=0,T=0;return T=f&65535,x=A&65535,m=Ve(x,T)|0,v=f>>>16,f=(m>>>16)+(Ve(x,v)|0)|0,x=A>>>16,A=Ve(x,T)|0,ot((f>>>16)+(Ve(x,v)|0)+(((f&65535)+A|0)>>>16)|0),f+A<<16|m&65535|0|0}function xr(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0;return x=f,T=m,m=Yc(x,T)|0,f=Z()|0,ot((Ve(A,T)|0)+(Ve(v,x)|0)+f|f&0|0),m|0|0|0}function Kc(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0,w=0,C=0,D=0,B=0;return x=Q,Q=Q+16|0,C=x|0,w=A>>31|((A|0)<0?-1:0)<<1,T=((A|0)<0?-1:0)>>31|((A|0)<0?-1:0)<<1,B=v>>31|((v|0)<0?-1:0)<<1,D=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,f=Ir(w^f|0,T^A|0,w|0,T|0)|0,A=Z()|0,Xu(f,A,Ir(B^m|0,D^v|0,B|0,D|0)|0,Z()|0,C)|0,v=Ir(d[C>>2]^w|0,d[C+4>>2]^T|0,w|0,T|0)|0,m=Z()|0,Q=x,ot(m|0),v|0}function Qu(f,A,m,v){f=f|0,A=A|0,m=m|0,v=v|0;var x=0,T=0;return T=Q,Q=Q+16|0,x=T|0,Xu(f,A,m,v,x)|0,Q=T,ot(d[x+4>>2]|0),d[x>>2]|0|0}function N4(f,A,m){return f=f|0,A=A|0,m=m|0,(m|0)<32?(ot(A>>m|0),f>>>m|(A&(1<<m)-1)<<32-m):(ot(((A|0)<0?-1:0)|0),A>>m-32|0)}function mt(f,A,m){return f=f|0,A=A|0,m=m|0,(m|0)<32?(ot(A>>>m|0),f>>>m|(A&(1<<m)-1)<<32-m):(ot(0),A>>>m-32|0)}function yt(f,A,m){return f=f|0,A=A|0,m=m|0,(m|0)<32?(ot(A<<m|(f&(1<<m)-1<<32-m)>>>32-m|0),f<<m):(ot(f<<m-32|0),0)}function Zh(f,A,m){return f=f|0,A=A|0,A=Rt(A)|0,(A|0)==32&&(A=A+(Rt(f)|0)|0),ot(0),A|0}function _0(f,A){return f=+f,A=+A,f!=f?+A:A!=A?+f:+bt(+f,+A)}function v0(f,A){return f=+f,A=+A,f!=f?+A:A!=A?+f:+Le(+f,+A)}function Hl(f){return f=+f,f>=0?+ji(f+.5):+He(f-.5)}function Yu(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0;if((m|0)>=8192)return Kn(f|0,A|0,m|0)|0,f|0;if(T=f|0,x=f+m|0,(f&3)==(A&3)){for(;f&3;){if(!m)return T|0;ft[f>>0]=ft[A>>0]|0,f=f+1|0,A=A+1|0,m=m-1|0}for(m=x&-4|0,v=m-64|0;(f|0)<=(v|0);)d[f>>2]=d[A>>2],d[f+4>>2]=d[A+4>>2],d[f+8>>2]=d[A+8>>2],d[f+12>>2]=d[A+12>>2],d[f+16>>2]=d[A+16>>2],d[f+20>>2]=d[A+20>>2],d[f+24>>2]=d[A+24>>2],d[f+28>>2]=d[A+28>>2],d[f+32>>2]=d[A+32>>2],d[f+36>>2]=d[A+36>>2],d[f+40>>2]=d[A+40>>2],d[f+44>>2]=d[A+44>>2],d[f+48>>2]=d[A+48>>2],d[f+52>>2]=d[A+52>>2],d[f+56>>2]=d[A+56>>2],d[f+60>>2]=d[A+60>>2],f=f+64|0,A=A+64|0;for(;(f|0)<(m|0);)d[f>>2]=d[A>>2],f=f+4|0,A=A+4|0}else for(m=x-4|0;(f|0)<(m|0);)ft[f>>0]=ft[A>>0]|0,ft[f+1>>0]=ft[A+1>>0]|0,ft[f+2>>0]=ft[A+2>>0]|0,ft[f+3>>0]=ft[A+3>>0]|0,f=f+4|0,A=A+4|0;for(;(f|0)<(x|0);)ft[f>>0]=ft[A>>0]|0,f=f+1|0,A=A+1|0;return T|0}function Oo(f,A,m){f=f|0,A=A|0,m=m|0;var v=0,x=0,T=0,w=0;if(T=f+m|0,A=A&255,(m|0)>=67){for(;f&3;)ft[f>>0]=A,f=f+1|0;for(v=T&-4|0,w=A|A<<8|A<<16|A<<24,x=v-64|0;(f|0)<=(x|0);)d[f>>2]=w,d[f+4>>2]=w,d[f+8>>2]=w,d[f+12>>2]=w,d[f+16>>2]=w,d[f+20>>2]=w,d[f+24>>2]=w,d[f+28>>2]=w,d[f+32>>2]=w,d[f+36>>2]=w,d[f+40>>2]=w,d[f+44>>2]=w,d[f+48>>2]=w,d[f+52>>2]=w,d[f+56>>2]=w,d[f+60>>2]=w,f=f+64|0;for(;(f|0)<(v|0);)d[f>>2]=w,f=f+4|0}for(;(f|0)<(T|0);)ft[f>>0]=A,f=f+1|0;return T-m|0}function Jh(f){return f=+f,f>=0?+ji(f+.5):+He(f-.5)}function fl(f){f=f|0;var A=0,m=0,v=0;return v=en()|0,m=d[Yn>>2]|0,A=m+f|0,(f|0)>0&(A|0)<(m|0)|(A|0)<0?(sr(A|0)|0,ln(12),-1):(A|0)>(v|0)&&!(di(A|0)|0)?(ln(12),-1):(d[Yn>>2]=A,m|0)}return{___divdi3:Uo,___muldi3:xr,___remdi3:Kc,___uremdi3:Qu,_areNeighborCells:_9,_bitshift64Ashr:N4,_bitshift64Lshr:mt,_bitshift64Shl:yt,_calloc:xa,_cellAreaKm2:M4,_cellAreaM2:_a,_cellAreaRads2:aa,_cellToBoundary:ku,_cellToCenterChild:m0,_cellToChildPos:Vc,_cellToChildren:p0,_cellToChildrenSize:Gc,_cellToLatLng:zl,_cellToLocalIj:N9,_cellToParent:Ih,_cellToVertex:Ws,_cellToVertexes:Wu,_cellsToDirectedEdge:p4,_cellsToLinkedMultiPolygon:EA,_childPosToCell:WA,_compactCells:v4,_destroyLinkedMultiPolygon:Wh,_directedEdgeToBoundary:Oh,_directedEdgeToCells:q9,_edgeLengthKm:Hc,_edgeLengthM:$A,_edgeLengthRads:va,_emscripten_replace_memory:ri,_free:dn,_getBaseCellNumber:g4,_getDirectedEdgeDestination:y9,_getDirectedEdgeOrigin:v9,_getHexagonAreaAvgKm2:w4,_getHexagonAreaAvgM2:R9,_getHexagonEdgeLengthAvgKm:C9,_getHexagonEdgeLengthAvgM:E4,_getIcosahedronFaces:VA,_getNumCells:Gh,_getPentagons:jA,_getRes0Cells:l0,_getResolution:zc,_greatCircleDistanceKm:Ka,_greatCircleDistanceM:b4,_greatCircleDistanceRads:q4,_gridDisk:Di,_gridDiskDistances:To,_gridDistance:QA,_gridPathCells:R4,_gridPathCellsSize:al,_gridRingUnsafe:Zr,_i64Add:zt,_i64Subtract:Ir,_isPentagon:Ai,_isResClassIII:kA,_isValidCell:BA,_isValidDirectedEdge:x9,_isValidVertex:Vl,_latLngToCell:GA,_llvm_ctlz_i64:Zh,_llvm_maxnum_f64:_0,_llvm_minnum_f64:v0,_llvm_round_f64:Hl,_localIjToCell:oa,_malloc:Lo,_maxFaceCount:x4,_maxGridDiskSize:Fl,_maxPolygonToCellsSize:wo,_maxPolygonToCellsSizeExperimental:$h,_memcpy:Yu,_memset:Oo,_originToDirectedEdges:b9,_pentagonCount:HA,_polygonToCells:r4,_polygonToCellsExperimental:$c,_readInt64AsDoubleFromPointer:e2,_res0CellCount:a4,_round:Jh,_sbrk:fl,_sizeOfCellBoundary:Ns,_sizeOfCoordIJ:Po,_sizeOfGeoLoop:dr,_sizeOfGeoPolygon:_i,_sizeOfH3Index:ZA,_sizeOfLatLng:JA,_sizeOfLinkedGeoPolygon:Hu,_uncompactCells:y4,_uncompactCellsSize:FA,_vertexToLatLng:cl,establishStackSpace:cs,stackAlloc:hn,stackRestore:fi,stackSave:fr}}(qn,Ei,$);e.___divdi3=pe.___divdi3,e.___muldi3=pe.___muldi3,e.___remdi3=pe.___remdi3,e.___uremdi3=pe.___uremdi3,e._areNeighborCells=pe._areNeighborCells,e._bitshift64Ashr=pe._bitshift64Ashr,e._bitshift64Lshr=pe._bitshift64Lshr,e._bitshift64Shl=pe._bitshift64Shl,e._calloc=pe._calloc,e._cellAreaKm2=pe._cellAreaKm2,e._cellAreaM2=pe._cellAreaM2,e._cellAreaRads2=pe._cellAreaRads2,e._cellToBoundary=pe._cellToBoundary,e._cellToCenterChild=pe._cellToCenterChild,e._cellToChildPos=pe._cellToChildPos,e._cellToChildren=pe._cellToChildren,e._cellToChildrenSize=pe._cellToChildrenSize,e._cellToLatLng=pe._cellToLatLng,e._cellToLocalIj=pe._cellToLocalIj,e._cellToParent=pe._cellToParent,e._cellToVertex=pe._cellToVertex,e._cellToVertexes=pe._cellToVertexes,e._cellsToDirectedEdge=pe._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=pe._cellsToLinkedMultiPolygon,e._childPosToCell=pe._childPosToCell,e._compactCells=pe._compactCells,e._destroyLinkedMultiPolygon=pe._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=pe._directedEdgeToBoundary,e._directedEdgeToCells=pe._directedEdgeToCells,e._edgeLengthKm=pe._edgeLengthKm,e._edgeLengthM=pe._edgeLengthM,e._edgeLengthRads=pe._edgeLengthRads;var It=e._emscripten_replace_memory=pe._emscripten_replace_memory;e._free=pe._free,e._getBaseCellNumber=pe._getBaseCellNumber,e._getDirectedEdgeDestination=pe._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=pe._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=pe._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=pe._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=pe._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=pe._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=pe._getIcosahedronFaces,e._getNumCells=pe._getNumCells,e._getPentagons=pe._getPentagons,e._getRes0Cells=pe._getRes0Cells,e._getResolution=pe._getResolution,e._greatCircleDistanceKm=pe._greatCircleDistanceKm,e._greatCircleDistanceM=pe._greatCircleDistanceM,e._greatCircleDistanceRads=pe._greatCircleDistanceRads,e._gridDisk=pe._gridDisk,e._gridDiskDistances=pe._gridDiskDistances,e._gridDistance=pe._gridDistance,e._gridPathCells=pe._gridPathCells,e._gridPathCellsSize=pe._gridPathCellsSize,e._gridRingUnsafe=pe._gridRingUnsafe,e._i64Add=pe._i64Add,e._i64Subtract=pe._i64Subtract,e._isPentagon=pe._isPentagon,e._isResClassIII=pe._isResClassIII,e._isValidCell=pe._isValidCell,e._isValidDirectedEdge=pe._isValidDirectedEdge,e._isValidVertex=pe._isValidVertex,e._latLngToCell=pe._latLngToCell,e._llvm_ctlz_i64=pe._llvm_ctlz_i64,e._llvm_maxnum_f64=pe._llvm_maxnum_f64,e._llvm_minnum_f64=pe._llvm_minnum_f64,e._llvm_round_f64=pe._llvm_round_f64,e._localIjToCell=pe._localIjToCell,e._malloc=pe._malloc,e._maxFaceCount=pe._maxFaceCount,e._maxGridDiskSize=pe._maxGridDiskSize,e._maxPolygonToCellsSize=pe._maxPolygonToCellsSize,e._maxPolygonToCellsSizeExperimental=pe._maxPolygonToCellsSizeExperimental,e._memcpy=pe._memcpy,e._memset=pe._memset,e._originToDirectedEdges=pe._originToDirectedEdges,e._pentagonCount=pe._pentagonCount,e._polygonToCells=pe._polygonToCells,e._polygonToCellsExperimental=pe._polygonToCellsExperimental,e._readInt64AsDoubleFromPointer=pe._readInt64AsDoubleFromPointer,e._res0CellCount=pe._res0CellCount,e._round=pe._round,e._sbrk=pe._sbrk,e._sizeOfCellBoundary=pe._sizeOfCellBoundary,e._sizeOfCoordIJ=pe._sizeOfCoordIJ,e._sizeOfGeoLoop=pe._sizeOfGeoLoop,e._sizeOfGeoPolygon=pe._sizeOfGeoPolygon,e._sizeOfH3Index=pe._sizeOfH3Index,e._sizeOfLatLng=pe._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=pe._sizeOfLinkedGeoPolygon,e._uncompactCells=pe._uncompactCells,e._uncompactCellsSize=pe._uncompactCellsSize,e._vertexToLatLng=pe._vertexToLatLng,e.establishStackSpace=pe.establishStackSpace;var Ye=e.stackAlloc=pe.stackAlloc,dt=e.stackRestore=pe.stackRestore,Gt=e.stackSave=pe.stackSave;if(e.asm=pe,e.cwrap=P,e.setValue=q,e.getValue=S,ce){Ne(ce)||(ce=s(ce));{Pt();var Ot=function(Ie){Ie.byteLength&&(Ie=new Uint8Array(Ie)),ne.set(Ie,y),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,at()},Tn=function(){a(ce,Ot,function(){throw"could not load memory initializer "+ce})},Pi=kn(ce);if(Pi)Ot(Pi.buffer);else if(e.memoryInitializerRequest){var yr=function(){var Ie=e.memoryInitializerRequest,Je=Ie.response;if(Ie.status!==200&&Ie.status!==0){var Et=kn(e.memoryInitializerRequestURL);if(Et)Je=Et.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+Ie.status+", retrying "+ce),Tn();return}}Ot(Je)};e.memoryInitializerRequest.response?setTimeout(yr,0):e.memoryInitializerRequest.addEventListener("load",yr)}else Tn()}}var ii;nt=function Ie(){ii||ws(),ii||(nt=Ie)};function ws(Ie){if(st>0||(ht(),st>0))return;function Je(){ii||(ii=!0,!R&&(wt(),kt(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Ct()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),Je()},1)):Je()}e.run=ws;function rr(Ie){throw e.onAbort&&e.onAbort(Ie),Ie+="",o(Ie),u(Ie),R=!0,"abort("+Ie+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=rr,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return ws(),i}(typeof ui=="object"?ui:{}),Rn="number",gn=Rn,z2=Rn,En=Rn,Mn=Rn,gs=Rn,Wt=Rn,see=[["sizeOfH3Index",Rn],["sizeOfLatLng",Rn],["sizeOfCellBoundary",Rn],["sizeOfGeoLoop",Rn],["sizeOfGeoPolygon",Rn],["sizeOfLinkedGeoPolygon",Rn],["sizeOfCoordIJ",Rn],["readInt64AsDoubleFromPointer",Rn],["isValidCell",z2,[En,Mn]],["latLngToCell",gn,[Rn,Rn,gs,Wt]],["cellToLatLng",gn,[En,Mn,Wt]],["cellToBoundary",gn,[En,Mn,Wt]],["maxGridDiskSize",gn,[Rn,Wt]],["gridDisk",gn,[En,Mn,Rn,Wt]],["gridDiskDistances",gn,[En,Mn,Rn,Wt,Wt]],["gridRingUnsafe",gn,[En,Mn,Rn,Wt]],["maxPolygonToCellsSize",gn,[Wt,gs,Rn,Wt]],["polygonToCells",gn,[Wt,gs,Rn,Wt]],["maxPolygonToCellsSizeExperimental",gn,[Wt,gs,Rn,Wt]],["polygonToCellsExperimental",gn,[Wt,gs,Rn,Rn,Rn,Wt]],["cellsToLinkedMultiPolygon",gn,[Wt,Rn,Wt]],["destroyLinkedMultiPolygon",null,[Wt]],["compactCells",gn,[Wt,Wt,Rn,Rn]],["uncompactCells",gn,[Wt,Rn,Rn,Wt,Rn,gs]],["uncompactCellsSize",gn,[Wt,Rn,Rn,gs,Wt]],["isPentagon",z2,[En,Mn]],["isResClassIII",z2,[En,Mn]],["getBaseCellNumber",Rn,[En,Mn]],["getResolution",Rn,[En,Mn]],["maxFaceCount",gn,[En,Mn,Wt]],["getIcosahedronFaces",gn,[En,Mn,Wt]],["cellToParent",gn,[En,Mn,gs,Wt]],["cellToChildren",gn,[En,Mn,gs,Wt]],["cellToCenterChild",gn,[En,Mn,gs,Wt]],["cellToChildrenSize",gn,[En,Mn,gs,Wt]],["cellToChildPos",gn,[En,Mn,gs,Wt]],["childPosToCell",gn,[Rn,Rn,En,Mn,gs,Wt]],["areNeighborCells",gn,[En,Mn,En,Mn,Wt]],["cellsToDirectedEdge",gn,[En,Mn,En,Mn,Wt]],["getDirectedEdgeOrigin",gn,[En,Mn,Wt]],["getDirectedEdgeDestination",gn,[En,Mn,Wt]],["isValidDirectedEdge",z2,[En,Mn]],["directedEdgeToCells",gn,[En,Mn,Wt]],["originToDirectedEdges",gn,[En,Mn,Wt]],["directedEdgeToBoundary",gn,[En,Mn,Wt]],["gridDistance",gn,[En,Mn,En,Mn,Wt]],["gridPathCells",gn,[En,Mn,En,Mn,Wt]],["gridPathCellsSize",gn,[En,Mn,En,Mn,Wt]],["cellToLocalIj",gn,[En,Mn,En,Mn,Rn,Wt]],["localIjToCell",gn,[En,Mn,Wt,Rn,Wt]],["getHexagonAreaAvgM2",gn,[gs,Wt]],["getHexagonAreaAvgKm2",gn,[gs,Wt]],["getHexagonEdgeLengthAvgM",gn,[gs,Wt]],["getHexagonEdgeLengthAvgKm",gn,[gs,Wt]],["greatCircleDistanceM",Rn,[Wt,Wt]],["greatCircleDistanceKm",Rn,[Wt,Wt]],["greatCircleDistanceRads",Rn,[Wt,Wt]],["cellAreaM2",gn,[En,Mn,Wt]],["cellAreaKm2",gn,[En,Mn,Wt]],["cellAreaRads2",gn,[En,Mn,Wt]],["edgeLengthM",gn,[En,Mn,Wt]],["edgeLengthKm",gn,[En,Mn,Wt]],["edgeLengthRads",gn,[En,Mn,Wt]],["getNumCells",gn,[gs,Wt]],["getRes0Cells",gn,[Wt]],["res0CellCount",Rn],["getPentagons",gn,[Rn,Wt]],["pentagonCount",Rn],["cellToVertex",gn,[En,Mn,Rn,Wt]],["cellToVertexes",gn,[En,Mn,Wt]],["vertexToLatLng",gn,[En,Mn,Wt]],["isValidVertex",z2,[En,Mn]]],aee=0,oee=1,lee=2,uee=3,JP=4,cee=5,hee=6,fee=7,dee=8,Aee=9,pee=10,mee=11,gee=12,_ee=13,vee=14,yee=15,Gs={};Gs[aee]="Success";Gs[oee]="The operation failed but a more specific error is not available";Gs[lee]="Argument was outside of acceptable range";Gs[uee]="Latitude or longitude arguments were outside of acceptable range";Gs[JP]="Resolution argument was outside of acceptable range";Gs[cee]="Cell argument was not valid";Gs[hee]="Directed edge argument was not valid";Gs[fee]="Undirected edge argument was not valid";Gs[dee]="Vertex argument was not valid";Gs[Aee]="Pentagon distortion was encountered";Gs[pee]="Duplicate input";Gs[mee]="Cell arguments were not neighbors";Gs[gee]="Cell arguments had incompatible resolutions";Gs[_ee]="Memory allocation failed";Gs[vee]="Bounds of provided memory were insufficient";Gs[yee]="Mode or flags argument was not valid";var xee=1e3,eD=1001,tD=1002,P5={};P5[xee]="Unknown unit";P5[eD]="Array length out of bounds";P5[tD]="Got unexpected null value for H3 index";var qee="Unknown error";function nD(i,e,t){var n=t&&"value"in t,r=new Error((i[e]||qee)+" (code: "+e+(n?", value: "+t.value:"")+")");return r.code=e,r}function iD(i,e){var t=arguments.length===2?{value:e}:{};return nD(Gs,i,t)}function rD(i,e){var t=arguments.length===2?{value:e}:{};return nD(P5,i,t)}function h3(i){if(i!==0)throw iD(i)}var Va={};see.forEach(function(e){Va[e[0]]=ui.cwrap.apply(ui,e)});var dd=16,f3=4,rA=8,bee=8,Q8=Va.sizeOfH3Index(),Ix=Va.sizeOfLatLng(),See=Va.sizeOfCellBoundary(),Tee=Va.sizeOfGeoPolygon(),bp=Va.sizeOfGeoLoop();Va.sizeOfLinkedGeoPolygon();Va.sizeOfCoordIJ();function wee(i){if(typeof i!="number"||i<0||i>15||Math.floor(i)!==i)throw iD(JP,i);return i}function Eee(i){if(!i)throw rD(tD);return i}var Mee=Math.pow(2,32)-1;function Ree(i){if(i>Mee)throw rD(eD,i);return i}var Cee=/[^0-9a-fA-F]/;function sD(i){if(Array.isArray(i)&&i.length===2&&Number.isInteger(i[0])&&Number.isInteger(i[1]))return i;if(typeof i!="string"||Cee.test(i))return[0,0];var e=parseInt(i.substring(0,i.length-8),dd),t=parseInt(i.substring(i.length-8),dd);return[t,e]}function BM(i){if(i>=0)return i.toString(dd);i=i&2147483647;var e=aD(8,i.toString(dd)),t=(parseInt(e[0],dd)+8).toString(dd);return e=t+e.substring(1),e}function Nee(i,e){return BM(e)+aD(8,BM(i))}function aD(i,e){for(var t=i-e.length,n="",r=0;r<t;r++)n+="0";return n=n+e,n}function IM(i,e,t){for(var n=i.length,r=ui._calloc(n,Ix),s=t?1:0,a=t?0:1,o=0;o<n*2;o+=2)ui.HEAPF64.set([i[o/2][s],i[o/2][a]].map(cD),r/rA+o);return ui.HEAPU32.set([n,r],e/f3),e}function Pee(i,e){var t=i.length-1,n=ui._calloc(Tee),r=0,s=r+bp,a=s+f3;IM(i[0],n+r,e);var o;if(t>0){o=ui._calloc(t,bp);for(var u=0;u<t;u++)IM(i[u+1],o+bp*u,e)}return ui.setValue(n+s,t,"i32"),ui.setValue(n+a,o,"i32"),n}function Dee(i){var e=0,t=e+bp,n=t+f3,r=f3;ui._free(ui.getValue(i+e+r,"i8*"));var s=ui.getValue(i+t,"i32");if(s>0){for(var a=ui.getValue(i+n,"i32"),o=0;o<s;o++)ui._free(ui.getValue(a+bp*o+r,"i8*"));ui._free(a)}ui._free(i)}function oD(i,e){e===void 0&&(e=0);var t=ui.getValue(i+Q8*e,"i32"),n=ui.getValue(i+Q8*e+f3,"i32");return n?Nee(t,n):null}function Lee(i){return Va.readInt64AsDoubleFromPointer(i)}function Uee(i,e){for(var t=[],n=0;n<e;n++){var r=oD(i,n);r!==null&&t.push(r)}return t}function Y8(i){return kee(ui.getValue(i,"double"))}function Oee(i){return[Y8(i),Y8(i+rA)]}function Bee(i){return[Y8(i+rA),Y8(i)]}function Iee(i,e,t){for(var n=ui.getValue(i,"i32"),r=i+rA,s=[],a=Bee,o=0;o<n*2;o+=2)s.push(a(r+rA*o));return s.push(s[0]),s}function Fee(i,e,t){var n=ui._malloc(Ix);ui.HEAPF64.set([i,e].map(cD),n/rA);var r=ui._malloc(Q8);try{return h3(Va.latLngToCell(n,t,r)),Eee(oD(r))}finally{ui._free(r),ui._free(n)}}function lD(i){var e=ui._malloc(Ix),t=sD(i),n=t[0],r=t[1];try{return h3(Va.cellToLatLng(n,r,e)),Oee(e)}finally{ui._free(e)}}function uD(i,e){var t=ui._malloc(See),n=sD(i),r=n[0],s=n[1];try{return h3(Va.cellToBoundary(r,s,t)),Iee(t,e,e)}finally{ui._free(t)}}function FM(i,e,t){if(wee(e),t=!!t,i.length===0||i[0].length===0)return[];var n=typeof i[0][0]=="number"?[i]:i,r=Pee(n,t),s=ui._malloc(bee);try{h3(Va.maxPolygonToCellsSize(r,e,0,s));var a=Ree(Lee(s)),o=ui._calloc(a,Q8);try{return h3(Va.polygonToCells(r,e,0,o)),Uee(o,a)}finally{ui._free(o)}}finally{ui._free(s),Dee(r)}}function cD(i){return i*Math.PI/180}function kee(i){return i*180/Math.PI}function zee(i){return i=Math.max(0,Math.min(1,i)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+i*(1172.33-i*(10793.56-i*(33300.12-i*(38394.49-i*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+i*(557.33+i*(1225.33-i*(3574.96-i*(1073.77+i*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+i*(3211.1-i*(15327.97-i*(27814-i*(22569.18-i*6838.66)))))))+")"}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Gee=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class Vee{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=Gee,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}getRenderObjectData(e){let t=this.renderObjects.get(e);if(t===void 0){const{geometry:n,material:r,object:s}=e;if(t={material:this.getMaterialData(r),geometry:{id:n.id,attributes:this.getAttributesData(n.attributes),indexVersion:n.index?n.index.version:null,drawRange:{start:n.drawRange.start,count:n.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(t.center=s.center.clone()),s.morphTargetInfluences&&(t.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),t.material.transmission>0){const{width:a,height:o}=e.context;t.bufferWidth=a,t.bufferHeight=o}this.renderObjects.set(e,t)}return t}getAttributesData(e){const t={};for(const n in e){const r=e[n];t[n]={version:r.version}}return t}containsNode(e){const t=e.material;for(const n in t)if(t[n]&&t[n].isNode)return!0;return e.renderer.nodes.modelViewMatrix!==null||e.renderer.nodes.modelNormalViewMatrix!==null}getMaterialData(e){const t={};for(const n of this.refreshUniforms){const r=e[n];r!=null&&(typeof r=="object"&&r.clone!==void 0?r.isTexture===!0?t[n]={id:r.id,version:r.version}:t[n]=r.clone():t[n]=r)}return t}equals(e){const{object:t,material:n,geometry:r}=e,s=this.getRenderObjectData(e);if(s.worldMatrix.equals(t.matrixWorld)!==!0)return s.worldMatrix.copy(t.matrixWorld),!1;const a=s.material;for(const R in a){const M=a[R],E=n[R];if(M.equals!==void 0){if(M.equals(E)===!1)return M.copy(E),!1}else if(E.isTexture===!0){if(M.id!==E.id||M.version!==E.version)return M.id=E.id,M.version=E.version,!1}else if(M!==E)return a[R]=E,!1}if(a.transmission>0){const{width:R,height:M}=e.context;if(s.bufferWidth!==R||s.bufferHeight!==M)return s.bufferWidth=R,s.bufferHeight=M,!1}const o=s.geometry,u=r.attributes,c=o.attributes,p=Object.keys(c),g=Object.keys(u);if(o.id!==r.id)return o.id=r.id,!1;if(p.length!==g.length)return s.geometry.attributes=this.getAttributesData(u),!1;for(const R of p){const M=c[R],E=u[R];if(E===void 0)return delete c[R],!1;if(M.version!==E.version)return M.version=E.version,!1}const y=r.index,q=o.indexVersion,S=y?y.version:null;if(q!==S)return o.indexVersion=S,!1;if(o.drawRange.start!==r.drawRange.start||o.drawRange.count!==r.drawRange.count)return o.drawRange.start=r.drawRange.start,o.drawRange.count=r.drawRange.count,!1;if(s.morphTargetInfluences){let R=!1;for(let M=0;M<s.morphTargetInfluences.length;M++)s.morphTargetInfluences[M]!==t.morphTargetInfluences[M]&&(R=!0);if(R)return!0}return s.center&&s.center.equals(t.center)===!1?(s.center.copy(t.center),!0):(e.bundle!==null&&(s.version=e.bundle.version),!0)}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;const{renderId:n}=t;if(this.renderId!==n)return this.renderId=n,!0;const r=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return r||s?!1:this.equals(e)!==!0}}function d3(i,e=0){let t=3735928559^e,n=1103547991^e;if(i instanceof Array)for(let r=0,s;r<i.length;r++)s=i[r],t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);else for(let r=0,s;r<i.length;r++)s=i.charCodeAt(r),t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}const hD=i=>d3(i),D5=i=>d3(i),A3=(...i)=>d3(i);function fD(i,e=!1){const t=[];i.isNode===!0&&(t.push(i.id),i=i.getSelf());for(const{property:n,childNode:r}of K8(i))t.push(d3(n.slice(0,-4)),r.getCacheKey(e));return d3(t)}function*K8(i,e=!1){for(const t in i){if(t.startsWith("_")===!0)continue;const n=i[t];if(Array.isArray(n)===!0)for(let r=0;r<n.length;r++){const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}else if(n&&n.isNode===!0)yield{property:t,childNode:n};else if(typeof n=="object")for(const r in n){const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}}}const Hee=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),kM=new WeakMap;function dD(i){return Hee.get(i)}function Z8(i){if(/[iu]?vec\d/.test(i))return i.startsWith("ivec")?Int32Array:i.startsWith("uvec")?Uint32Array:Float32Array;if(/mat\d/.test(i)||/float/.test(i))return Float32Array;if(/uint/.test(i))return Uint32Array;if(/int/.test(i))return Int32Array;throw new Error(`THREE.NodeUtils: Unsupported type: ${i}`)}function Fx(i){if(/float|int|uint/.test(i))return 1;if(/vec2/.test(i))return 2;if(/vec3/.test(i))return 3;if(/vec4/.test(i)||/mat2/.test(i))return 4;if(/mat3/.test(i))return 9;if(/mat4/.test(i))return 16;console.error("THREE.TSL: Unsupported type:",i)}function B1(i){if(i==null)return null;const e=typeof i;return i.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":i.isVector2===!0?"vec2":i.isVector3===!0?"vec3":i.isVector4===!0?"vec4":i.isMatrix2===!0?"mat2":i.isMatrix3===!0?"mat3":i.isMatrix4===!0?"mat4":i.isColor===!0?"color":i instanceof ArrayBuffer?"ArrayBuffer":null}function AD(i,...e){const t=i?i.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),i==="color"?new Xt(...e):t==="vec2"?new rt(...e):t==="vec3"?new le(...e):t==="vec4"?new sn(...e):t==="mat2"?new E5(...e):t==="mat3"?new Cn(...e):t==="mat4"?new yn(...e):i==="bool"?e[0]||!1:i==="float"||i==="int"||i==="uint"?e[0]||0:i==="string"?e[0]||"":i==="ArrayBuffer"?gD(e[0]):null}function pD(i){let e=kM.get(i);return e===void 0&&(e={},kM.set(i,e)),e}function mD(i){let e="";const t=new Uint8Array(i);for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function gD(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0)).buffer}const Vv={VERTEX:"vertex",FRAGMENT:"fragment"},Pn={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},jee={BOOLEAN:"bool",INTEGER:"int",FLOAT:"float",VECTOR2:"vec2",VECTOR3:"vec3",VECTOR4:"vec4",MATRIX2:"mat2",MATRIX3:"mat3",MATRIX4:"mat4"},ea={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},_D=["fragment","vertex"],Hv=["setup","analyze","generate"],jv=[..._D,"compute"],Sh=["x","y","z","w"];let Wee=0;class un extends Eu{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=Pn.NONE,this.updateBeforeType=Pn.NONE,this.updateAfterType=Pn.NONE,this.uuid=Qd.generateUUID(),this.version=0,this.global=!1,this.isNode=!0,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:Wee++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,Pn.FRAME)}onRenderUpdate(e){return this.onUpdate(e,Pn.RENDER)}onObjectUpdate(e){return this.onUpdate(e,Pn.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of K8(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=A3(fD(this,e),this.customCacheKey()),this._cacheKeyVersion=this.version),this._cacheKey}customCacheKey(){return 0}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getMemberType(){return"void"}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}setup(e){const t=e.getNodeProperties(this);let n=0;for(const r of this.getChildren())t["node"+n++]=r;return t.outputNode||null}analyze(e){if(e.increaseUsage(this)===1){const n=e.getNodeProperties(this);for(const r of Object.values(n))r&&r.isNode===!0&&r.build(e)}}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);if(n&&n.isNode===!0)return n.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const n=this.getShared(e);if(this!==n)return n.build(e,t);e.addNode(this),e.addChain(this);let r=null;const s=e.getBuildStage();if(s==="setup"){this.updateReference(e);const a=e.getNodeProperties(this);if(a.initialized!==!0){a.initialized=!0;const o=this.setup(e),u=o&&o.isNode===!0;for(const c of Object.values(a))c&&c.isNode===!0&&c.build(e);u&&o.build(e),a.outputNode=o}}else if(s==="analyze")this.analyze(e);else if(s==="generate")if(this.generate.length===1){const o=this.getNodeType(e),u=e.getDataFromNode(this);r=u.snippet,r===void 0?u.generated===void 0?(u.generated=!0,r=this.generate(e)||"",u.snippet=r):(console.warn("THREE.Node: Recursion detected.",this),r=""):u.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),r=e.format(r,o,t)}else r=this.generate(e,t)||"";return e.removeChain(this),e.addSequentialNode(this),r}getSerializeChildren(){return K8(this)}serialize(e){const t=this.getSerializeChildren(),n={};for(const{property:r,index:s,childNode:a}of t)s!==void 0?(n[r]===void 0&&(n[r]=Number.isInteger(s)?[]:{}),n[r][s]=a.toJSON(e.meta).uuid):n[r]=a.toJSON(e.meta).uuid;Object.keys(n).length>0&&(e.inputNodes=n)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){const r=[];for(const s of e.inputNodes[n])r.push(t[s]);this[n]=r}else if(typeof e.inputNodes[n]=="object"){const r={};for(const s in e.inputNodes[n]){const a=e.inputNodes[n][s];r[s]=t[a]}this[n]=r}else{const r=e.inputNodes[n];this[n]=t[r]}}}toJSON(e){const{uuid:t,type:n}=this,r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[t];s===void 0&&(s={uuid:t,type:n,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},r!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function a(o){const u=[];for(const c in o){const p=o[c];delete p.metadata,u.push(p)}return u}if(r){const o=a(e.textures),u=a(e.images),c=a(e.nodes);o.length>0&&(s.textures=o),u.length>0&&(s.images=u),c.length>0&&(s.nodes=c)}return s}}class Th extends un{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.indexNode.getNodeType(e),n=this.node.build(e),r=this.indexNode.build(e,!e.isVector(t)&&e.isInteger(t)?t:"uint");return`${n}[ ${r} ]`}}class vD extends un{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let n=null;for(const r of this.convertTo.split("|"))(n===null||e.getTypeLength(t)===e.getTypeLength(r))&&(n=r);return n}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const n=this.node,r=this.getNodeType(e),s=n.build(e,r);return e.format(s,r,t)}}class wr extends un{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const r=e.getVectorType(this.getNodeType(e,t)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,r,t);if(r!=="void"&&t!=="void"&&this.hasDependencies(e)){const a=super.build(e,r),o=e.getVarFromNode(this,null,r),u=e.getPropertyName(o);return e.addLineFlowCode(`${u} = ${a}`,this),s.snippet=a,s.propertyName=u,e.format(s.propertyName,r,t)}}return super.build(e,t)}}class $ee extends wr{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,n)=>t+e.getTypeLength(n.getNodeType(e)),0))}generate(e,t){const n=this.getNodeType(e),r=e.getTypeLength(n),s=this.nodes,a=e.getComponentType(n),o=[];let u=0;for(const p of s){if(u>=r){console.error(`THREE.TSL: Length of parameters exceeds maximum length of function '${n}()' type.`);break}let g=p.getNodeType(e),y=e.getTypeLength(g),q;u+y>r&&(console.error(`THREE.TSL: Length of '${n}()' data exceeds maximum length of output type.`),y=r-u,g=e.getTypeFromLength(y)),u+=y,q=p.build(e,g);const S=e.getComponentType(g);S!==a&&(q=e.format(q,S,a)),o.push(q)}const c=`${e.getType(n)}( ${o.join(", ")} )`;return e.format(c,n,t)}}const Xee=Sh.join("");class Wv extends un{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(Sh.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,t){const n=this.node,r=e.getTypeLength(n.getNodeType(e));let s=null;if(r>1){let a=null;this.getVectorLength()>=r&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const u=n.build(e,a);this.components.length===r&&this.components===Xee.slice(0,this.components.length)?s=e.format(u,a,t):s=e.format(`${u}.${this.components}`,this.getNodeType(e),t)}else s=n.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class Qee extends wr{static get type(){return"SetNode"}constructor(e,t,n){super(),this.sourceNode=e,this.components=t,this.targetNode=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:n,targetNode:r}=this,s=this.getNodeType(e),a=e.getComponentType(r.getNodeType(e)),o=e.getTypeFromLength(n.length,a),u=r.build(e,o),c=t.build(e,s),p=e.getTypeLength(s),g=[];for(let y=0;y<p;y++){const q=Sh[y];q===n[0]?(g.push(u),y+=n.length-1):g.push(c+"."+q)}return`${e.getType(s)}( ${g.join(", ")} )`}}class Yee extends wr{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:n}=this,r=this.getNodeType(e),s=n.build(e),a=e.getVarFromNode(this),o=e.getPropertyName(a);e.addLineFlowCode(o+" = "+s,this);const u=e.getTypeLength(r),c=[];let p=0;for(let g=0;g<u;g++){const y=Sh[g];y===t[p]?(c.push("1.0 - "+(o+"."+y)),p++):c.push(o+"."+y)}return`${e.getType(r)}( ${c.join(", ")} )`}}class kx extends un{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?B1(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=B1(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=mD(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?AD(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const zM=/float|u?int/;class Il extends kx{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const n=this.getNodeType(e);return zM.test(n)&&zM.test(t)?e.generateConst(t,this.value):e.format(this.generateConst(e),n,t)}}class Kee extends un{static get type(){return"MemberNode"}constructor(e,t){super(),this.node=e,this.property=t,this.isMemberNode=!0}getNodeType(e){return this.node.getMemberType(e,this.property)}generate(e){return this.node.build(e)+"."+this.property}}let sA=null;const Ad=new Map;function Ze(i,e){if(Ad.has(i)){console.warn(`THREE.TSL: Redefinition of method chaining '${i}'.`);return}if(typeof e!="function")throw new Error(`THREE.TSL: Node element ${i} is not a function`);Ad.set(i,e)}const yD=i=>i.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),GM=i=>yD(i).split("").sort().join(""),xD={setup(i,e){const t=e.shift();return i(k3(t),...e)},get(i,e,t){if(typeof e=="string"&&i[e]===void 0){if(i.isStackNode!==!0&&e==="assign")return(...n)=>(sA.assign(t,...n),t);if(Ad.has(e)){const n=Ad.get(e);return i.isStackNode?(...r)=>t.add(n(...r)):(...r)=>n(t,...r)}else{if(e==="self")return i;if(e.endsWith("Assign")&&Ad.has(e.slice(0,e.length-6))){const n=Ad.get(e.slice(0,e.length-6));return i.isStackNode?(...r)=>t.assign(r[0],n(...r)):(...r)=>t.assign(n(t,...r))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=yD(e),et(new Wv(t,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=GM(e.slice(3).toLowerCase()),n=>et(new Qee(i,e,n));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=GM(e.slice(4).toLowerCase()),()=>et(new Yee(et(i),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),et(new Wv(i,e));if(/^\d+$/.test(e)===!0)return et(new Th(t,new Il(Number(e),"uint")));if(/^get$/.test(e)===!0)return n=>et(new Kee(t,n))}}}return Reflect.get(i,e,t)},set(i,e,t,n){return typeof e=="string"&&i[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(n[e].assign(t),!0):Reflect.set(i,e,t,n)}},Hg=new WeakMap,VM=new WeakMap,Zee=function(i,e=null){const t=B1(i);if(t==="node"){let n=Hg.get(i);return n===void 0&&(n=new Proxy(i,xD),Hg.set(i,n),Hg.set(n,n)),n}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return et($v(i,e));if(t==="shader")return De(i)}return i},Jee=function(i,e=null){for(const t in i)i[t]=et(i[t],e);return i},ete=function(i,e=null){const t=i.length;for(let n=0;n<t;n++)i[n]=et(i[n],e);return i},tte=function(i,e=null,t=null,n=null){const r=p=>et(n!==null?Object.assign(p,n):p);let s,a=e,o,u;function c(p){let g;return a?g=/[a-z]/i.test(a)?a+"()":a:g=i.type,o!==void 0&&p.length<o?(console.error(`THREE.TSL: "${g}" parameter length is less than minimum required.`),p.concat(new Array(o-p.length).fill(0))):u!==void 0&&p.length>u?(console.error(`THREE.TSL: "${g}" parameter length exceeds limit.`),p.slice(0,u)):p}return e===null?s=(...p)=>r(new i(...lh(c(p)))):t!==null?(t=et(t),s=(...p)=>r(new i(e,...lh(c(p)),t))):s=(...p)=>r(new i(e,...lh(c(p)))),s.setParameterLength=(...p)=>(p.length===1?o=u=p[0]:p.length===2&&([o,u]=p),s),s.setName=p=>(a=p,s),s},nte=function(i,...e){return et(new i(...lh(e)))};class ite extends un{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getMemberType(e,t){return this.getOutputNode(e).getMemberType(e,t)}call(e){const{shaderNode:t,inputNodes:n}=this,r=e.getNodeProperties(t);if(r.onceOutput)return r.onceOutput;let s=null;if(t.layout){let a=VM.get(e.constructor);a===void 0&&(a=new WeakMap,VM.set(e.constructor,a));let o=a.get(t);o===void 0&&(o=et(e.buildFunctionNode(t)),a.set(t,o)),e.addInclude(o),s=et(o.call(n))}else{const a=t.jsFunc,o=n!==null||a.length>1?a(n||[],e):a(e);s=et(o)}return t.once&&(r.onceOutput=s),s}getOutputNode(e){const t=e.getNodeProperties(this);return t.outputNode===null&&(t.outputNode=this.setupOutput(e)),t.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,t){return this.getOutputNode(e).build(e,t)}}class rte extends un{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return k3(e),et(new ite(this,e))}setup(){return this.call()}}const ste=[!1,!0],ate=[0,1,2,3],ote=[-1,-2],qD=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],zx=new Map;for(const i of ste)zx.set(i,new Il(i));const Gx=new Map;for(const i of ate)Gx.set(i,new Il(i,"uint"));const Vx=new Map([...Gx].map(i=>new Il(i.value,"int")));for(const i of ote)Vx.set(i,new Il(i,"int"));const L5=new Map([...Vx].map(i=>new Il(i.value)));for(const i of qD)L5.set(i,new Il(i));for(const i of qD)L5.set(-i,new Il(-i));const U5={bool:zx,uint:Gx,ints:Vx,float:L5},HM=new Map([...zx,...L5]),$v=(i,e)=>HM.has(i)?HM.get(i):i.isNode===!0?i:new Il(i,e),lte=i=>{try{return i.getNodeType()}catch{return}},Kr=function(i,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(i)&&t.every(r=>typeof r!="object"))&&(t=[AD(i,...t)]),t.length===1&&e!==null&&e.has(t[0]))return et(e.get(t[0]));if(t.length===1){const r=$v(t[0],i);return lte(r)===i?et(r):et(new vD(r,i))}const n=t.map(r=>$v(r));return et(new $ee(n,i))}},p3=i=>typeof i=="object"&&i!==null?i.value:i,bD=i=>i!=null?i.nodeType||i.convertTo||(typeof i=="string"?i:null):null;function Sp(i,e){return new Proxy(new rte(i,e),xD)}const et=(i,e=null)=>Zee(i,e),k3=(i,e=null)=>new Jee(i,e),lh=(i,e=null)=>new ete(i,e),tt=(...i)=>new tte(...i),Mt=(...i)=>new nte(...i);let ute=0;const De=(i,e=null)=>{let t=null;e!==null&&(typeof e=="object"?t=e.return:(typeof e=="string"?t=e:console.error("THREE.TSL: Invalid layout type."),e=null));const n=new Sp(i,t),r=(...s)=>{let a;return k3(s),s[0]&&s[0].isNode?a=[...s]:a=s[0],n.call(a)};if(r.shaderNode=n,r.setLayout=s=>(n.setLayout(s),r),r.once=()=>(n.once=!0,r),e!==null){if(typeof e.inputs!="object"){const s={name:"fn"+ute++,type:t,inputs:[]};for(const a in e)a!=="return"&&s.inputs.push({name:a,type:e[a]});e=s}r.setLayout(e)}return r},cte=(...i)=>(console.warn("THREE.TSL: tslFn() has been renamed to Fn()."),De(...i));Ze("toGlobal",i=>(i.global=!0,i));const m3=i=>{sA=i},Hx=()=>sA,On=(...i)=>sA.If(...i);function SD(i){return sA&&sA.add(i),i}Ze("append",SD);const TD=new Kr("color"),de=new Kr("float",U5.float),ve=new Kr("int",U5.ints),Lt=new Kr("uint",U5.uint),Pc=new Kr("bool",U5.bool),At=new Kr("vec2"),is=new Kr("ivec2"),wD=new Kr("uvec2"),ED=new Kr("bvec2"),Te=new Kr("vec3"),MD=new Kr("ivec3"),xA=new Kr("uvec3"),jx=new Kr("bvec3"),Jt=new Kr("vec4"),RD=new Kr("ivec4"),CD=new Kr("uvec4"),ND=new Kr("bvec4"),O5=new Kr("mat2"),ra=new Kr("mat3"),uh=new Kr("mat4"),hte=(i="")=>et(new Il(i,"string")),fte=i=>et(new Il(i,"ArrayBuffer"));Ze("toColor",TD);Ze("toFloat",de);Ze("toInt",ve);Ze("toUint",Lt);Ze("toBool",Pc);Ze("toVec2",At);Ze("toIVec2",is);Ze("toUVec2",wD);Ze("toBVec2",ED);Ze("toVec3",Te);Ze("toIVec3",MD);Ze("toUVec3",xA);Ze("toBVec3",jx);Ze("toVec4",Jt);Ze("toIVec4",RD);Ze("toUVec4",CD);Ze("toBVec4",ND);Ze("toMat2",O5);Ze("toMat3",ra);Ze("toMat4",uh);const PD=tt(Th).setParameterLength(2),DD=(i,e)=>et(new vD(et(i),e)),dte=(i,e)=>et(new Wv(et(i),e));Ze("element",PD);Ze("convert",DD);class jM extends wr{static get type(){return"ArrayNode"}constructor(e,t,n=null){super(e),this.count=t,this.values=n,this.isArrayNode=!0}getNodeType(e){return this.nodeType===null&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){const t=this.getNodeType(e);return e.generateArray(t,this.count,this.values)}}const LD=(...i)=>{let e;if(i.length===1){const t=i[0];e=new jM(null,t.length,t)}else{const t=i[0],n=i[1];e=new jM(t,n)}return et(e)};Ze("toArray",(i,e)=>LD(Array(e).fill(i)));class UD extends un{static get type(){return"UniformGroupNode"}constructor(e,t=!1,n=1){super("string"),this.name=e,this.shared=t,this.order=n,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const OD=i=>new UD(i),B5=(i,e=0)=>new UD(i,!0,e),BD=B5("frame"),fn=B5("render"),Wx=OD("object");class z3 extends kx{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=Wx}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){const n=this.getSelf();return e=e.bind(n),super.onUpdate(r=>{const s=e(r,n);s!==void 0&&(this.value=s)},t)}generate(e,t){const n=this.getNodeType(e),r=this.getUniformHash(e);let s=e.getNodeFromHash(r);s===void 0&&(e.setHashNode(this,r),s=this);const a=s.getInputType(e),o=e.getUniformFromNode(s,a,e.shaderStage,this.name||e.context.label),u=e.getPropertyName(o);return e.context.label!==void 0&&delete e.context.label,e.format(u,n,t)}}const Zt=(i,e)=>{const t=bD(e||i),n=i&&i.isNode===!0?i.node&&i.node.value||i.value:i;return et(new z3(n,t))};class wi extends un{static get type(){return"PropertyNode"}constructor(e,t=null,n=!1){super(e),this.name=t,this.varying=n,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const qA=(i,e)=>et(new wi(i,e)),g3=(i,e)=>et(new wi(i,e,!0)),qi=Mt(wi,"vec4","DiffuseColor"),Xv=Mt(wi,"vec3","EmissiveColor"),ru=Mt(wi,"float","Roughness"),_3=Mt(wi,"float","Metalness"),J8=Mt(wi,"float","Clearcoat"),v3=Mt(wi,"float","ClearcoatRoughness"),th=Mt(wi,"vec3","Sheen"),I5=Mt(wi,"float","SheenRoughness"),F5=Mt(wi,"float","Iridescence"),$x=Mt(wi,"float","IridescenceIOR"),Xx=Mt(wi,"float","IridescenceThickness"),e5=Mt(wi,"float","AlphaT"),C1=Mt(wi,"float","Anisotropy"),Tp=Mt(wi,"vec3","AnisotropyT"),ch=Mt(wi,"vec3","AnisotropyB"),Ea=Mt(wi,"color","SpecularColor"),y3=Mt(wi,"float","SpecularF90"),t5=Mt(wi,"float","Shininess"),Td=Mt(wi,"vec4","Output"),t8=Mt(wi,"float","dashSize"),Qv=Mt(wi,"float","gapSize"),Ate=Mt(wi,"float","pointWidth"),wp=Mt(wi,"float","IOR"),n5=Mt(wi,"float","Transmission"),Qx=Mt(wi,"float","Thickness"),Yx=Mt(wi,"float","AttenuationDistance"),Kx=Mt(wi,"color","AttenuationColor"),Zx=Mt(wi,"float","Dispersion");class pte extends wr{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const n=e.getTypeLength(t.node.getNodeType(e));return Sh.join("").slice(0,n)!==t.components}return!1}generate(e,t){const{targetNode:n,sourceNode:r}=this,s=this.needsSplitAssign(e),a=n.getNodeType(e),o=n.context({assign:!0}).build(e),u=r.build(e,a),c=r.getNodeType(e),p=e.getDataFromNode(this);let g;if(p.initialized===!0)t!=="void"&&(g=o);else if(s){const y=e.getVarFromNode(this,null,a),q=e.getPropertyName(y);e.addLineFlowCode(`${q} = ${u}`,this);const S=n.node.context({assign:!0}).build(e);for(let R=0;R<n.components.length;R++){const M=n.components[R];e.addLineFlowCode(`${S}.${M} = ${q}[ ${R} ]`,this)}t!=="void"&&(g=o)}else g=`${o} = ${u}`,(t==="void"||c==="void")&&(e.addLineFlowCode(g,this),t!=="void"&&(g=o));return p.initialized=!0,e.format(g,a,t)}}const ID=tt(pte).setParameterLength(2);Ze("assign",ID);class mte extends wr{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],n=this.functionNode,r=n.getInputs(e),s=this.parameters,a=(u,c)=>{const p=c.type,g=p==="pointer";let y;return g?y="&"+u.build(e):y=u.build(e,p),y};if(Array.isArray(s)){if(s.length>r.length)console.error("THREE.TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),s.length=r.length;else if(s.length<r.length)for(console.error("THREE.TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");s.length<r.length;)s.push(de(0));for(let u=0;u<s.length;u++)t.push(a(s[u],r[u]))}else for(const u of r){const c=s[u.name];c!==void 0?t.push(a(c,u)):(console.error(`THREE.TSL: Input '${u.name}' not found in 'Fn()'.`),t.push(a(de(0),u)))}return`${n.build(e,"property")}( ${t.join(", ")} )`}}const FD=(i,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?lh(e):k3(e[0]),et(new mte(et(i),e)));Ze("call",FD);class vr extends wr{static get type(){return"OperatorNode"}constructor(e,t,n,...r){if(super(),r.length>0){let s=new vr(e,t,n);for(let a=0;a<r.length-1;a++)s=new vr(e,s,r[a]);t=s,n=r[r.length-1]}this.op=e,this.aNode=t,this.bNode=n,this.isOperatorNode=!0}getNodeType(e,t){const n=this.op,r=this.aNode,s=this.bNode,a=r.getNodeType(e),o=typeof s<"u"?s.getNodeType(e):null;if(a==="void"||o==="void")return"void";if(n==="%")return a;if(n==="~"||n==="&"||n==="|"||n==="^"||n===">>"||n==="<<")return e.getIntegerType(a);if(n==="!"||n==="=="||n==="!="||n==="&&"||n==="||"||n==="^^")return"bool";if(n==="<"||n===">"||n==="<="||n===">="){const u=t?e.getTypeLength(t):Math.max(e.getTypeLength(a),e.getTypeLength(o));return u>1?`bvec${u}`:"bool"}else{if(e.isMatrix(a)){if(o==="float")return a;if(e.isVector(o))return e.getVectorFromMatrix(a);if(e.isMatrix(o))return a}else if(e.isMatrix(o)){if(a==="float")return o;if(e.isVector(a))return e.getVectorFromMatrix(o)}return e.getTypeLength(o)>e.getTypeLength(a)?o:a}}generate(e,t){const n=this.op,r=this.aNode,s=this.bNode,a=this.getNodeType(e,t);let o=null,u=null;a!=="void"?(o=r.getNodeType(e),u=typeof s<"u"?s.getNodeType(e):null,n==="<"||n===">"||n==="<="||n===">="||n==="=="||n==="!="?e.isVector(o)?u=o:o!==u&&(o=u="float"):n===">>"||n==="<<"?(o=a,u=e.changeComponentType(u,"uint")):n==="%"?(o=a,u=e.isInteger(o)&&e.isInteger(u)?u:o):e.isMatrix(o)?u==="float"?u="float":e.isVector(u)?u=e.getVectorFromMatrix(o):e.isMatrix(u)||(o=u=a):e.isMatrix(u)?o==="float"?o="float":e.isVector(o)?o=e.getVectorFromMatrix(u):o=u=a:o=u=a):o=u=a;const c=r.build(e,o),p=typeof s<"u"?s.build(e,u):null,g=e.getTypeLength(t),y=e.getFunctionOperator(n);if(t!=="void"){const q=e.renderer.coordinateSystem===Pa;if(n==="==")return q?g>1?e.format(`${e.getMethod("equal",t)}( ${c}, ${p} )`,a,t):e.format(`( ${c} ${n} ${p} )`,a,t):g>1||!e.isVector(o)?e.format(`( ${c} == ${p} )`,a,t):e.format(`all( ${c} == ${p} )`,a,t);if(n==="<"&&g>1)return q?e.format(`${e.getMethod("lessThan",t)}( ${c}, ${p} )`,a,t):e.format(`( ${c} < ${p} )`,a,t);if(n==="<="&&g>1)return q?e.format(`${e.getMethod("lessThanEqual",t)}( ${c}, ${p} )`,a,t):e.format(`( ${c} <= ${p} )`,a,t);if(n===">"&&g>1)return q?e.format(`${e.getMethod("greaterThan",t)}( ${c}, ${p} )`,a,t):e.format(`( ${c} > ${p} )`,a,t);if(n===">="&&g>1)return q?e.format(`${e.getMethod("greaterThanEqual",t)}( ${c}, ${p} )`,a,t):e.format(`( ${c} >= ${p} )`,a,t);if(n==="%")return e.isInteger(u)?e.format(`( ${c} % ${p} )`,a,t):e.format(`${e.getMethod("mod",a)}( ${c}, ${p} )`,a,t);if(n==="!"||n==="~")return e.format(`(${n}${c})`,o,t);if(y)return e.format(`${y}( ${c}, ${p} )`,a,t);if(e.isMatrix(o)&&u==="float")return e.format(`( ${p} ${n} ${c} )`,a,t);if(o==="float"&&e.isMatrix(u))return e.format(`${c} ${n} ${p}`,a,t);{let S=`( ${c} ${n} ${p} )`;return!q&&a==="bool"&&e.isVector(o)&&e.isVector(u)&&(S=`all${S}`),e.format(S,a,t)}}else if(o!=="void")return y?e.format(`${y}( ${c}, ${p} )`,a,t):e.isMatrix(o)&&u==="float"?e.format(`${p} ${n} ${c}`,a,t):e.format(`${c} ${n} ${p}`,a,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Vr=tt(vr,"+").setParameterLength(2,1/0).setName("add"),hi=tt(vr,"-").setParameterLength(2,1/0).setName("sub"),Dn=tt(vr,"*").setParameterLength(2,1/0).setName("mul"),Ol=tt(vr,"/").setParameterLength(2,1/0).setName("div"),G3=tt(vr,"%").setParameterLength(2).setName("mod"),Jx=tt(vr,"==").setParameterLength(2).setName("equal"),kD=tt(vr,"!=").setParameterLength(2).setName("notEqual"),zD=tt(vr,"<").setParameterLength(2).setName("lessThan"),eq=tt(vr,">").setParameterLength(2).setName("greaterThan"),GD=tt(vr,"<=").setParameterLength(2).setName("lessThanEqual"),VD=tt(vr,">=").setParameterLength(2).setName("greaterThanEqual"),HD=tt(vr,"&&").setParameterLength(2,1/0).setName("and"),jD=tt(vr,"||").setParameterLength(2,1/0).setName("or"),WD=tt(vr,"!").setParameterLength(1).setName("not"),$D=tt(vr,"^^").setParameterLength(2).setName("xor"),XD=tt(vr,"&").setParameterLength(2).setName("bitAnd"),QD=tt(vr,"~").setParameterLength(2).setName("bitNot"),YD=tt(vr,"|").setParameterLength(2).setName("bitOr"),KD=tt(vr,"^").setParameterLength(2).setName("bitXor"),ZD=tt(vr,"<<").setParameterLength(2).setName("shiftLeft"),JD=tt(vr,">>").setParameterLength(2).setName("shiftRight");Ze("add",Vr);Ze("sub",hi);Ze("mul",Dn);Ze("div",Ol);Ze("mod",G3);Ze("equal",Jx);Ze("notEqual",kD);Ze("lessThan",zD);Ze("greaterThan",eq);Ze("lessThanEqual",GD);Ze("greaterThanEqual",VD);Ze("and",HD);Ze("or",jD);Ze("not",WD);Ze("xor",$D);Ze("bitAnd",XD);Ze("bitNot",QD);Ze("bitOr",YD);Ze("bitXor",KD);Ze("shiftLeft",ZD);Ze("shiftRight",JD);const eL=(i,e)=>(console.warn('THREE.TSL: "remainder()" is deprecated. Use "mod( int( ... ) )" instead.'),G3(i,e)),tL=(i,e)=>(console.warn('THREE.TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),G3(ve(i),ve(e)));Ze("remainder",eL);Ze("modInt",tL);class Oe extends wr{static get type(){return"MathNode"}constructor(e,t,n=null,r=null){if(super(),(e===Oe.MAX||e===Oe.MIN)&&arguments.length>3){let s=new Oe(e,t,n);for(let a=2;a<arguments.length-1;a++)s=new Oe(e,s,arguments[a]);t=s,n=arguments[arguments.length-1],r=null}this.method=e,this.aNode=t,this.bNode=n,this.cNode=r,this.isMathNode=!0}getInputType(e){const t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,r=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),a=e.isMatrix(n)?0:e.getTypeLength(n),o=e.isMatrix(r)?0:e.getTypeLength(r);return s>a&&s>o?t:a>o?n:o>s?r:t}getNodeType(e){const t=this.method;return t===Oe.LENGTH||t===Oe.DISTANCE||t===Oe.DOT?"float":t===Oe.CROSS?"vec3":t===Oe.ALL||t===Oe.ANY?"bool":t===Oe.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}generate(e,t){let n=this.method;const r=this.getNodeType(e),s=this.getInputType(e),a=this.aNode,o=this.bNode,u=this.cNode,c=e.renderer.coordinateSystem;if(n===Oe.TRANSFORM_DIRECTION){let p=a,g=o;e.isMatrix(p.getNodeType(e))?g=Jt(Te(g),0):p=Jt(Te(p),0);const y=Dn(p,g).xyz;return Dc(y).build(e,t)}else{if(n===Oe.NEGATE)return e.format("( - "+a.build(e,s)+" )",r,t);if(n===Oe.ONE_MINUS)return hi(1,a).build(e,t);if(n===Oe.RECIPROCAL)return Ol(1,a).build(e,t);if(n===Oe.DIFFERENCE)return Yi(hi(a,o)).build(e,t);{const p=[];return n===Oe.CROSS?p.push(a.build(e,r),o.build(e,r)):c===Pa&&n===Oe.STEP?p.push(a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":s),o.build(e,s)):c===Pa&&(n===Oe.MIN||n===Oe.MAX)?p.push(a.build(e,s),o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":s)):n===Oe.REFRACT?p.push(a.build(e,s),o.build(e,s),u.build(e,"float")):n===Oe.MIX?p.push(a.build(e,s),o.build(e,s),u.build(e,e.getTypeLength(u.getNodeType(e))===1?"float":s)):(c===mu&&n===Oe.ATAN&&o!==null&&(n="atan2"),p.push(a.build(e,s)),o!==null&&p.push(o.build(e,s)),u!==null&&p.push(u.build(e,s))),e.format(`${e.getMethod(n,r)}( ${p.join(", ")} )`,r,t)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Oe.ALL="all";Oe.ANY="any";Oe.RADIANS="radians";Oe.DEGREES="degrees";Oe.EXP="exp";Oe.EXP2="exp2";Oe.LOG="log";Oe.LOG2="log2";Oe.SQRT="sqrt";Oe.INVERSE_SQRT="inversesqrt";Oe.FLOOR="floor";Oe.CEIL="ceil";Oe.NORMALIZE="normalize";Oe.FRACT="fract";Oe.SIN="sin";Oe.COS="cos";Oe.TAN="tan";Oe.ASIN="asin";Oe.ACOS="acos";Oe.ATAN="atan";Oe.ABS="abs";Oe.SIGN="sign";Oe.LENGTH="length";Oe.NEGATE="negate";Oe.ONE_MINUS="oneMinus";Oe.DFDX="dFdx";Oe.DFDY="dFdy";Oe.ROUND="round";Oe.RECIPROCAL="reciprocal";Oe.TRUNC="trunc";Oe.FWIDTH="fwidth";Oe.TRANSPOSE="transpose";Oe.BITCAST="bitcast";Oe.EQUALS="equals";Oe.MIN="min";Oe.MAX="max";Oe.STEP="step";Oe.REFLECT="reflect";Oe.DISTANCE="distance";Oe.DIFFERENCE="difference";Oe.DOT="dot";Oe.CROSS="cross";Oe.POW="pow";Oe.TRANSFORM_DIRECTION="transformDirection";Oe.MIX="mix";Oe.CLAMP="clamp";Oe.REFRACT="refract";Oe.SMOOTHSTEP="smoothstep";Oe.FACEFORWARD="faceforward";const nL=de(1e-6),gte=de(1e6),i5=de(Math.PI),_te=de(Math.PI*2),iL=tt(Oe,Oe.ALL).setParameterLength(1),rL=tt(Oe,Oe.ANY).setParameterLength(1),sL=tt(Oe,Oe.RADIANS).setParameterLength(1),aL=tt(Oe,Oe.DEGREES).setParameterLength(1),tq=tt(Oe,Oe.EXP).setParameterLength(1),aA=tt(Oe,Oe.EXP2).setParameterLength(1),k5=tt(Oe,Oe.LOG).setParameterLength(1),du=tt(Oe,Oe.LOG2).setParameterLength(1),Ru=tt(Oe,Oe.SQRT).setParameterLength(1),nq=tt(Oe,Oe.INVERSE_SQRT).setParameterLength(1),Au=tt(Oe,Oe.FLOOR).setParameterLength(1),z5=tt(Oe,Oe.CEIL).setParameterLength(1),Dc=tt(Oe,Oe.NORMALIZE).setParameterLength(1),Bc=tt(Oe,Oe.FRACT).setParameterLength(1),go=tt(Oe,Oe.SIN).setParameterLength(1),pc=tt(Oe,Oe.COS).setParameterLength(1),oL=tt(Oe,Oe.TAN).setParameterLength(1),lL=tt(Oe,Oe.ASIN).setParameterLength(1),uL=tt(Oe,Oe.ACOS).setParameterLength(1),iq=tt(Oe,Oe.ATAN).setParameterLength(1,2),Yi=tt(Oe,Oe.ABS).setParameterLength(1),x3=tt(Oe,Oe.SIGN).setParameterLength(1),Sc=tt(Oe,Oe.LENGTH).setParameterLength(1),cL=tt(Oe,Oe.NEGATE).setParameterLength(1),hL=tt(Oe,Oe.ONE_MINUS).setParameterLength(1),rq=tt(Oe,Oe.DFDX).setParameterLength(1),sq=tt(Oe,Oe.DFDY).setParameterLength(1),fL=tt(Oe,Oe.ROUND).setParameterLength(1),dL=tt(Oe,Oe.RECIPROCAL).setParameterLength(1),aq=tt(Oe,Oe.TRUNC).setParameterLength(1),AL=tt(Oe,Oe.FWIDTH).setParameterLength(1),pL=tt(Oe,Oe.TRANSPOSE).setParameterLength(1),vte=tt(Oe,Oe.BITCAST).setParameterLength(2),mL=(i,e)=>(console.warn('THREE.TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),Jx(i,e)),Ha=tt(Oe,Oe.MIN).setParameterLength(2,1/0),Br=tt(Oe,Oe.MAX).setParameterLength(2,1/0),G5=tt(Oe,Oe.STEP).setParameterLength(2),gL=tt(Oe,Oe.REFLECT).setParameterLength(2),_L=tt(Oe,Oe.DISTANCE).setParameterLength(2),vL=tt(Oe,Oe.DIFFERENCE).setParameterLength(2),e0=tt(Oe,Oe.DOT).setParameterLength(2),V5=tt(Oe,Oe.CROSS).setParameterLength(2),Nl=tt(Oe,Oe.POW).setParameterLength(2),oq=tt(Oe,Oe.POW,2).setParameterLength(1),yL=tt(Oe,Oe.POW,3).setParameterLength(1),xL=tt(Oe,Oe.POW,4).setParameterLength(1),qL=tt(Oe,Oe.TRANSFORM_DIRECTION).setParameterLength(2),bL=i=>Dn(x3(i),Nl(Yi(i),1/3)),lq=i=>e0(i,i),Si=tt(Oe,Oe.MIX).setParameterLength(3),_u=(i,e=0,t=1)=>et(new Oe(Oe.CLAMP,et(i),et(e),et(t))),SL=i=>_u(i),uq=tt(Oe,Oe.REFRACT).setParameterLength(3),vu=tt(Oe,Oe.SMOOTHSTEP).setParameterLength(3),cq=tt(Oe,Oe.FACEFORWARD).setParameterLength(3),TL=De(([i])=>{const n=43758.5453,r=e0(i.xy,At(12.9898,78.233)),s=G3(r,i5);return Bc(go(s).mul(n))}),wL=(i,e,t)=>Si(e,t,i),EL=(i,e,t)=>vu(e,t,i),ML=(i,e)=>(console.warn('THREE.TSL: "atan2" is overloaded. Use "atan" instead.'),iq(i,e)),yte=cq,xte=nq;Ze("all",iL);Ze("any",rL);Ze("equals",mL);Ze("radians",sL);Ze("degrees",aL);Ze("exp",tq);Ze("exp2",aA);Ze("log",k5);Ze("log2",du);Ze("sqrt",Ru);Ze("inverseSqrt",nq);Ze("floor",Au);Ze("ceil",z5);Ze("normalize",Dc);Ze("fract",Bc);Ze("sin",go);Ze("cos",pc);Ze("tan",oL);Ze("asin",lL);Ze("acos",uL);Ze("atan",iq);Ze("abs",Yi);Ze("sign",x3);Ze("length",Sc);Ze("lengthSq",lq);Ze("negate",cL);Ze("oneMinus",hL);Ze("dFdx",rq);Ze("dFdy",sq);Ze("round",fL);Ze("reciprocal",dL);Ze("trunc",aq);Ze("fwidth",AL);Ze("atan2",ML);Ze("min",Ha);Ze("max",Br);Ze("step",G5);Ze("reflect",gL);Ze("distance",_L);Ze("dot",e0);Ze("cross",V5);Ze("pow",Nl);Ze("pow2",oq);Ze("pow3",yL);Ze("pow4",xL);Ze("transformDirection",qL);Ze("mix",wL);Ze("clamp",_u);Ze("refract",uq);Ze("smoothstep",EL);Ze("faceForward",cq);Ze("difference",vL);Ze("saturate",SL);Ze("cbrt",bL);Ze("transpose",pL);Ze("rand",TL);class qte extends un{static get type(){return"ConditionalNode"}constructor(e,t,n=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=n}getNodeType(e){const{ifNode:t,elseNode:n}=e.getNodeProperties(this);if(t===void 0)return this.setup(e),this.getNodeType(e);const r=t.getNodeType(e);if(n!==null){const s=n.getNodeType(e);if(e.getTypeLength(s)>e.getTypeLength(r))return s}return r}setup(e){const t=this.condNode.cache(),n=this.ifNode.cache(),r=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(n).parentNodeBlock=s,r!==null&&(e.getDataFromNode(r).parentNodeBlock=s);const a=e.getNodeProperties(this);a.condNode=t,a.ifNode=n.context({nodeBlock:n}),a.elseNode=r?r.context({nodeBlock:r}):null}generate(e,t){const n=this.getNodeType(e),r=e.getDataFromNode(this);if(r.nodeProperty!==void 0)return r.nodeProperty;const{condNode:s,ifNode:a,elseNode:o}=e.getNodeProperties(this),u=e.currentFunctionNode,c=t!=="void",p=c?qA(n).build(e):"";r.nodeProperty=p;const g=s.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${g} ) {

`).addFlowTab();let y=a.build(e,n);if(y&&(c?y=p+" = "+y+";":(y="return "+y+";",u===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),y="// "+y))),e.removeFlowTab().addFlowCode(e.tab+"	"+y+`

`+e.tab+"}"),o!==null){e.addFlowCode(` else {

`).addFlowTab();let q=o.build(e,n);q&&(c?q=p+" = "+q+";":(q="return "+q+";",u===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),q="// "+q))),e.removeFlowTab().addFlowCode(e.tab+"	"+q+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(p,n,t)}}const Fs=tt(qte).setParameterLength(2,3);Ze("select",Fs);const RL=(...i)=>(console.warn("THREE.TSL: cond() has been renamed to select()."),Fs(...i));Ze("cond",RL);class CL extends un{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value});const n=this.node.build(e);return e.setContext(t),n}generate(e,t){const n=e.getContext();e.setContext({...e.context,...this.value});const r=this.node.build(e,t);return e.setContext(n),r}}const H5=tt(CL).setParameterLength(1,2),NL=(i,e)=>H5(i,{label:e});Ze("context",H5);Ze("label",NL);class n8 extends un{static get type(){return"VarNode"}constructor(e,t=null,n=!1){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0,this.readOnly=n}getMemberType(e,t){return this.node.getMemberType(e,t)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:t,name:n,readOnly:r}=this,{renderer:s}=e,a=s.backend.isWebGPUBackend===!0;let o=!1,u=!1;r&&(o=e.isDeterministic(t),u=a?r:o);const c=e.getVectorType(this.getNodeType(e)),p=t.build(e,c),g=e.getVarFromNode(this,n,c,void 0,u),y=e.getPropertyName(g);let q=y;if(u)if(a)q=o?`const ${y}`:`let ${y}`;else{const S=e.getArrayCount(t);q=`const ${e.getVar(g.type,y,S)}`}return e.addLineFlowCode(`${q} = ${p}`,this),y}}const hq=tt(n8),PL=(i,e=null)=>hq(i,e).append(),DL=(i,e=null)=>hq(i,e,!0).append();Ze("toVar",PL);Ze("toConst",DL);const LL=i=>(console.warn('TSL: "temp( node )" is deprecated. Use "Var( node )" or "node.toVar()" instead.'),hq(i));Ze("temp",LL);class bte extends un{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let n=t.varying;if(n===void 0){const r=this.name,s=this.getNodeType(e);t.varying=n=e.getVaryingFromNode(this,r,s),t.node=this.node}return n.needsInterpolation||(n.needsInterpolation=e.shaderStage==="fragment"),n}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const t=e.getNodeProperties(this),n=this.setupVarying(e),r=e.shaderStage==="fragment"&&t.reassignPosition===!0&&e.context.needsPositionReassign;if(t.propertyName===void 0||r){const s=this.getNodeType(e),a=e.getPropertyName(n,Vv.VERTEX);e.flowNodeFromShaderStage(Vv.VERTEX,this.node,s,a),t.propertyName=a,r?t.reassignPosition=!1:t.reassignPosition===void 0&&e.context.isPositionNodeInput&&(t.reassignPosition=!0)}return e.getPropertyName(n)}}const sa=tt(bte).setParameterLength(1,2),UL=i=>sa(i);Ze("toVarying",sa);Ze("toVertexStage",UL);Ze("varying",(...i)=>(console.warn("THREE.TSL: .varying() has been renamed to .toVarying()."),sa(...i)));Ze("vertexStage",(...i)=>(console.warn("THREE.TSL: .vertexStage() has been renamed to .toVertexStage()."),sa(...i)));const OL=De(([i])=>{const e=i.mul(.9478672986).add(.0521327014).pow(2.4),t=i.mul(.0773993808),n=i.lessThanEqual(.04045);return Si(e,t,n)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),BL=De(([i])=>{const e=i.pow(.41666).mul(1.055).sub(.055),t=i.mul(12.92),n=i.lessThanEqual(.0031308);return Si(e,t,n)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),V3="WorkingColorSpace",fq="OutputColorSpace";class H3 extends wr{static get type(){return"ColorSpaceNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.source=t,this.target=n}resolveColorSpace(e,t){return t===V3?Hn.workingColorSpace:t===fq?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{colorNode:t}=this,n=this.resolveColorSpace(e,this.source),r=this.resolveColorSpace(e,this.target);let s=t;return Hn.enabled===!1||n===r||!n||!r||(Hn.getTransfer(n)===Ri&&(s=Jt(OL(s.rgb),s.a)),Hn.getPrimaries(n)!==Hn.getPrimaries(r)&&(s=Jt(ra(Hn._getMatrix(new Cn,n,r)).mul(s.rgb),s.a)),Hn.getTransfer(r)===Ri&&(s=Jt(BL(s.rgb),s.a))),s}}const IL=i=>et(new H3(et(i),V3,fq)),FL=i=>et(new H3(et(i),fq,V3)),kL=(i,e)=>et(new H3(et(i),V3,e)),j5=(i,e)=>et(new H3(et(i),e,V3)),Ste=(i,e,t)=>et(new H3(et(i),e,t));Ze("toOutputColorSpace",IL);Ze("toWorkingColorSpace",FL);Ze("workingToColorSpace",kL);Ze("colorSpaceToWorking",j5);let Tte=class extends Th{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}};class zL extends un{static get type(){return"ReferenceBaseNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.updateType=Pn.OBJECT}setGroup(e){return this.group=e,this}element(e){return et(new Tte(this,et(e)))}setNodeType(e){const t=Zt(null,e).getSelf();this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const wte=(i,e,t)=>et(new zL(i,e,t));class Ete extends zL{static get type(){return"RendererReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.renderer=n,this.setGroup(fn)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const GL=(i,e,t=null)=>et(new Ete(i,e,t));class Mte extends wr{static get type(){return"ToneMappingNode"}constructor(e,t=HL,n=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=n}customCacheKey(){return A3(this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,n=this.toneMapping;if(n===za)return t;let r=null;const s=e.renderer.library.getToneMappingFunction(n);return s!==null?r=Jt(s(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),r=t),r}}const VL=(i,e,t)=>et(new Mte(i,et(e),et(t))),HL=GL("toneMappingExposure","float");Ze("toneMapping",(i,e,t)=>VL(e,t,i));class Rte extends kx{static get type(){return"BufferAttributeNode"}constructor(e,t=null,n=0,r=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=n,this.bufferOffset=r,this.usage=f8,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),n=this.value,r=e.getTypeLength(t),s=this.bufferStride||r,a=this.bufferOffset,o=n.isInterleavedBuffer===!0?n:new cx(n,s),u=new ou(o,r,a);o.setUsage(this.usage),this.attribute=u,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),r=e.getPropertyName(n);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=r,s=r):s=sa(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const j3=(i,e=null,t=0,n=0)=>et(new Rte(i,e,t,n)),jL=(i,e=null,t=0,n=0)=>j3(i,e,t,n).setUsage(ld),r5=(i,e=null,t=0,n=0)=>j3(i,e,t,n).setInstanced(!0),Yv=(i,e=null,t=0,n=0)=>jL(i,e,t,n).setInstanced(!0);Ze("toAttribute",i=>j3(i.value));class Cte extends un{static get type(){return"ComputeNode"}constructor(e,t,n=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=n,this.dispatchCount=0,this.version=1,this.name="",this.updateBeforeType=Pn.OBJECT,this.onInitFunction=null,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}label(e){return this.name=e,this}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let n=t[0];for(let r=1;r<t.length;r++)n*=t[r];this.dispatchCount=Math.ceil(e/n)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){const t=this.computeNode.setup(e);if(t){const n=e.getNodeProperties(this);n.outputComputeNode=t.outputNode,t.outputNode=null}return t}generate(e,t){const{shaderStage:n}=e;if(n==="compute"){const r=this.computeNode.build(e,"void");r!==""&&e.addLineFlowCode(r,this)}else{const s=e.getNodeProperties(this).outputComputeNode;if(s)return s.build(e,t)}}}const WL=(i,e,t)=>et(new Cte(et(i),e,t));Ze("compute",WL);class Nte extends un{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){const t=e.getCache(),n=e.getCacheFromNode(this,this.parent);e.setCache(n);const r=this.node.getNodeType(e);return e.setCache(t),r}build(e,...t){const n=e.getCache(),r=e.getCacheFromNode(this,this.parent);e.setCache(r);const s=this.node.build(e,...t);return e.setCache(n),s}}const Ep=(i,e)=>et(new Nte(et(i),e));Ze("cache",Ep);class Pte extends un{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const $L=tt(Pte).setParameterLength(2);Ze("bypass",$L);class XL extends un{static get type(){return"RemapNode"}constructor(e,t,n,r=de(0),s=de(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=n,this.outLowNode=r,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:n,outLowNode:r,outHighNode:s,doClamp:a}=this;let o=e.sub(t).div(n.sub(t));return a===!0&&(o=o.clamp()),o.mul(s.sub(r)).add(r)}}const QL=tt(XL,null,null,{doClamp:!1}).setParameterLength(3,5),YL=tt(XL).setParameterLength(3,5);Ze("remap",QL);Ze("remapClamp",YL);class i8 extends un{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const n=this.getNodeType(e),r=this.snippet;if(n==="void")e.addLineFlowCode(r,this);else return e.format(r,n,t)}}const Y1=tt(i8).setParameterLength(1,2),KL=i=>(i?Fs(i,Y1("discard")):Y1("discard")).append(),Dte=()=>Y1("return").append();Ze("discard",KL);class Lte extends wr{static get type(){return"RenderOutputNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=n,this.isRenderOutputNode=!0}setup({context:e}){let t=this.colorNode||e.color;const n=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||za,r=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||_o;return n!==za&&(t=t.toneMapping(n)),r!==_o&&r!==Hn.workingColorSpace&&(t=t.workingToColorSpace(r)),t}}const ZL=(i,e=null,t=null)=>et(new Lte(et(i),e,t));Ze("renderOutput",ZL);class Ute extends wr{static get type(){return"DebugNode"}constructor(e,t=null){super(),this.node=e,this.callback=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){const t=this.callback,n=this.node.build(e);let r="";return r+=`// #--- TSL Debug ---#
`,r+=e.flow.code.replace(/^\t/mg,"")+`
`,r+="/* ... */ "+n+` /* ... */
`,r+=`// #-----------------#
`,t!==null?t(r):console.log(r),n}}const JL=(i,e=null)=>et(new Ute(et(i),e));Ze("debug",JL);function Ote(i){console.warn("THREE.TSL: AddNodeElement has been removed in favor of tree-shaking. Trying add",i)}class eU extends un{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){const r=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(r)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),n=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const s=e.geometry.getAttribute(t),a=e.getTypeFromAttribute(s),o=e.getAttribute(t,a);return e.shaderStage==="vertex"?e.format(o.name,a,n):sa(this).build(e,n)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(n)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const yu=(i,e)=>et(new eU(i,e)),hr=(i=0)=>yu("uv"+(i>0?i:""),"vec2");class Bte extends un{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const n=this.textureNode.build(e,"property"),r=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${n}, ${r} )`,this.getNodeType(e),t)}}const V1=tt(Bte).setParameterLength(1,2);class Ite extends z3{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=Pn.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&n.width!==void 0){const{width:r,height:s}=n;this.value=Math.log2(Math.max(r,s))}}}const tU=tt(Ite).setParameterLength(1);class xu extends z3{static get type(){return"TextureNode"}constructor(e,t=null,n=null,r=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=n,this.biasNode=r,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=Pn.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===Qi?"uvec4":this.value.type===qs?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return hr(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=Zt(this.value.matrix)),this._matrixUniform.mul(Te(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?Pn.RENDER:Pn.NONE,this}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.image instanceof ImageBitmap&&n.flipY===!0||n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0||n.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(ve(V1(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;const n=this.value;if(!n||n.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");let r=this.uvNode;(r===null||e.context.forceUVContext===!0)&&e.context.getUV&&(r=e.context.getUV(this)),r||(r=this.getDefaultUV()),this.updateMatrix===!0&&(r=this.getTransformedUV(r)),r=this.setupUV(e,r);let s=this.levelNode;s===null&&e.context.getTextureLevel&&(s=e.context.getTextureLevel(this)),t.uvNode=r,t.levelNode=s,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,t,n,r,s,a,o,u){const c=this.value;let p;return r?p=e.generateTextureLevel(c,t,n,r,a):s?p=e.generateTextureBias(c,t,n,s,a):u?p=e.generateTextureGrad(c,t,n,u,a):o?p=e.generateTextureCompare(c,t,n,o,a):this.sampler===!1?p=e.generateTextureLoad(c,t,n,a):p=e.generateTexture(c,t,n,a),p}generate(e,t){const n=this.value,r=e.getNodeProperties(this),s=super.generate(e,"property");if(/^sampler/.test(t))return s+"_sampler";if(e.isReference(t))return s;{const a=e.getDataFromNode(this);let o=a.propertyName;if(o===void 0){const{uvNode:p,levelNode:g,biasNode:y,compareNode:q,depthNode:S,gradNode:R}=r,M=this.generateUV(e,p),E=g?g.build(e,"float"):null,U=y?y.build(e,"float"):null,P=S?S.build(e,"int"):null,O=q?q.build(e,"float"):null,F=R?[R[0].build(e,"vec2"),R[1].build(e,"vec2")]:null,I=e.getVarFromNode(this);o=e.getPropertyName(I);const z=this.generateSnippet(e,s,M,E,U,P,O,F);e.addLineFlowCode(`${o} = ${z}`,this),a.snippet=z,a.propertyName=o}let u=o;const c=this.getNodeType(e);return e.needsToWorkingColorSpace(n)&&(u=j5(Y1(u,c),n.colorSpace).setup(e).build(e,c)),e.format(u,c,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return console.warn("THREE.TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const t=this.clone();return t.uvNode=et(e),t.referenceNode=this.getSelf(),et(t)}blur(e){const t=this.clone();t.biasNode=et(e).mul(tU(t)),t.referenceNode=this.getSelf();const n=t.value;return(n&&n.generateMipmaps===!1||n.minFilter===nr||n.magFilter===nr)&&(console.warn("THREE.TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),t.biasNode=null),et(t)}level(e){const t=this.clone();return t.levelNode=et(e),t.referenceNode=this.getSelf(),et(t)}size(e){return V1(this,e)}bias(e){const t=this.clone();return t.biasNode=et(e),t.referenceNode=this.getSelf(),et(t)}compare(e){const t=this.clone();return t.compareNode=et(e),t.referenceNode=this.getSelf(),et(t)}grad(e,t){const n=this.clone();return n.gradNode=[et(e),et(t)],n.referenceNode=this.getSelf(),et(n)}depth(e){const t=this.clone();return t.depthNode=et(e),t.referenceNode=this.getSelf(),et(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const Zn=tt(xu).setParameterLength(1,4),Nr=(...i)=>Zn(...i).setSampler(!1),Fte=i=>(i.isNode===!0?i:Zn(i)).convert("sampler"),kte=i=>(i.isNode===!0?i:Zn(i)).convert("samplerComparison");class dq extends z3{static get type(){return"BufferNode"}constructor(e,t,n=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=n}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const W3=(i,e,t)=>et(new dq(i,e,t));class zte extends Th{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),n=this.getNodeType(),r=this.node.getPaddedType();return e.format(t,r,n)}}class nU extends dq{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null),this.array=e,this.elementType=t===null?B1(e[0]):t,this.paddedType=this.getPaddedType(),this.updateType=Pn.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let t="vec4";return e==="mat2"?t="mat2":/mat/.test(e)===!0?t="mat4":e.charAt(0)==="i"?t="ivec4":e.charAt(0)==="u"&&(t="uvec4"),t}update(){const{array:e,value:t}=this,n=this.elementType;if(n==="float"||n==="int"||n==="uint")for(let r=0;r<e.length;r++){const s=r*4;t[s]=e[r]}else if(n==="color")for(let r=0;r<e.length;r++){const s=r*4,a=e[r];t[s]=a.r,t[s+1]=a.g,t[s+2]=a.b||0}else if(n==="mat2")for(let r=0;r<e.length;r++){const s=r*4,a=e[r];t[s]=a.elements[0],t[s+1]=a.elements[1],t[s+2]=a.elements[2],t[s+3]=a.elements[3]}else if(n==="mat3")for(let r=0;r<e.length;r++){const s=r*16,a=e[r];t[s]=a.elements[0],t[s+1]=a.elements[1],t[s+2]=a.elements[2],t[s+4]=a.elements[3],t[s+5]=a.elements[4],t[s+6]=a.elements[5],t[s+8]=a.elements[6],t[s+9]=a.elements[7],t[s+10]=a.elements[8],t[s+15]=1}else if(n==="mat4")for(let r=0;r<e.length;r++){const s=r*16,a=e[r];for(let o=0;o<a.elements.length;o++)t[s+o]=a.elements[o]}else for(let r=0;r<e.length;r++){const s=r*4,a=e[r];t[s]=a.x,t[s+1]=a.y,t[s+2]=a.z||0,t[s+3]=a.w||0}}setup(e){const t=this.array.length,n=this.elementType;let r=Float32Array;const s=this.paddedType,a=e.getTypeLength(s);return n.charAt(0)==="i"&&(r=Int32Array),n.charAt(0)==="u"&&(r=Uint32Array),this.value=new r(t*a),this.bufferCount=t,this.bufferType=s,super.setup(e)}element(e){return et(new zte(this,et(e)))}}const El=(i,e)=>et(new nU(i,e)),Gte=(i,e)=>(console.warn("THREE.TSL: uniforms() has been renamed to uniformArray()."),et(new nU(i,e))),Aq=Zt(0,"uint").setGroup(B5("cameraIndex")).toVarying("v_cameraIndex"),D1=Zt("float").label("cameraNear").setGroup(fn).onRenderUpdate(({camera:i})=>i.near),L1=Zt("float").label("cameraFar").setGroup(fn).onRenderUpdate(({camera:i})=>i.far),wh=De(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.projectionMatrix);e=El(t).setGroup(fn).label("cameraProjectionMatrices").element(Aq).toVar("cameraProjectionMatrix")}else e=Zt("mat4").label("cameraProjectionMatrix").setGroup(fn).onRenderUpdate(({camera:t})=>t.projectionMatrix);return e}).once()(),Vte=Zt("mat4").label("cameraProjectionMatrixInverse").setGroup(fn).onRenderUpdate(({camera:i})=>i.projectionMatrixInverse),$a=De(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.matrixWorldInverse);e=El(t).setGroup(fn).label("cameraViewMatrices").element(Aq).toVar("cameraViewMatrix")}else e=Zt("mat4").label("cameraViewMatrix").setGroup(fn).onRenderUpdate(({camera:t})=>t.matrixWorldInverse);return e}).once()(),Hte=Zt("mat4").label("cameraWorldMatrix").setGroup(fn).onRenderUpdate(({camera:i})=>i.matrixWorld),jte=Zt("mat3").label("cameraNormalMatrix").setGroup(fn).onRenderUpdate(({camera:i})=>i.normalMatrix),iU=Zt(new le).label("cameraPosition").setGroup(fn).onRenderUpdate(({camera:i},e)=>e.value.setFromMatrixPosition(i.matrixWorld)),WM=new Z1;class ni extends un{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=Pn.OBJECT,this._uniformNode=new z3(null)}getNodeType(){const e=this.scope;if(e===ni.WORLD_MATRIX)return"mat4";if(e===ni.POSITION||e===ni.VIEW_POSITION||e===ni.DIRECTION||e===ni.SCALE)return"vec3";if(e===ni.RADIUS)return"float"}update(e){const t=this.object3d,n=this._uniformNode,r=this.scope;if(r===ni.WORLD_MATRIX)n.value=t.matrixWorld;else if(r===ni.POSITION)n.value=n.value||new le,n.value.setFromMatrixPosition(t.matrixWorld);else if(r===ni.SCALE)n.value=n.value||new le,n.value.setFromMatrixScale(t.matrixWorld);else if(r===ni.DIRECTION)n.value=n.value||new le,t.getWorldDirection(n.value);else if(r===ni.VIEW_POSITION){const s=e.camera;n.value=n.value||new le,n.value.setFromMatrixPosition(t.matrixWorld),n.value.applyMatrix4(s.matrixWorldInverse)}else if(r===ni.RADIUS){const s=e.object.geometry;s.boundingSphere===null&&s.computeBoundingSphere(),WM.copy(s.boundingSphere).applyMatrix4(t.matrixWorld),n.value=WM.radius}}generate(e){const t=this.scope;return t===ni.WORLD_MATRIX?this._uniformNode.nodeType="mat4":t===ni.POSITION||t===ni.VIEW_POSITION||t===ni.DIRECTION||t===ni.SCALE?this._uniformNode.nodeType="vec3":t===ni.RADIUS&&(this._uniformNode.nodeType="float"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}ni.WORLD_MATRIX="worldMatrix";ni.POSITION="position";ni.SCALE="scale";ni.VIEW_POSITION="viewPosition";ni.DIRECTION="direction";ni.RADIUS="radius";const Wte=tt(ni,ni.DIRECTION).setParameterLength(1),$te=tt(ni,ni.WORLD_MATRIX).setParameterLength(1),rU=tt(ni,ni.POSITION).setParameterLength(1),Xte=tt(ni,ni.SCALE).setParameterLength(1),Qte=tt(ni,ni.VIEW_POSITION).setParameterLength(1),Yte=tt(ni,ni.RADIUS).setParameterLength(1);class Jo extends ni{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}const Kte=Mt(Jo,Jo.DIRECTION),Wo=Mt(Jo,Jo.WORLD_MATRIX),Zte=Mt(Jo,Jo.POSITION),Jte=Mt(Jo,Jo.SCALE),ene=Mt(Jo,Jo.VIEW_POSITION),tne=Mt(Jo,Jo.RADIUS),sU=Zt(new Cn).onObjectUpdate(({object:i},e)=>e.value.getNormalMatrix(i.matrixWorld)),nne=Zt(new yn).onObjectUpdate(({object:i},e)=>e.value.copy(i.matrixWorld).invert()),Eh=De(i=>i.renderer.nodes.modelViewMatrix||aU).once()().toVar("modelViewMatrix"),aU=$a.mul(Wo),ine=De(i=>(i.context.isHighPrecisionModelViewMatrix=!0,Zt("mat4").onObjectUpdate(({object:e,camera:t})=>e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld)))).once()().toVar("highpModelViewMatrix"),rne=De(i=>{const e=i.context.isHighPrecisionModelViewMatrix;return Zt("mat3").onObjectUpdate(({object:t,camera:n})=>(e!==!0&&t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix)))}).once()().toVar("highpModelNormalViewMatrix"),$3=yu("position","vec3"),Lr=$3.toVarying("positionLocal"),s5=$3.toVarying("positionPrevious"),Tc=Wo.mul(Lr).xyz.toVarying("v_positionWorld").context({needsPositionReassign:!0}),pq=Lr.transformDirection(Wo).toVarying("v_positionWorldDirection").normalize().toVar("positionWorldDirection").context({needsPositionReassign:!0}),zr=De(i=>i.context.setupPositionView(),"vec3").once()().toVarying("v_positionView").context({needsPositionReassign:!0}),ar=zr.negate().toVarying("v_positionViewDirection").normalize().toVar("positionViewDirection");class sne extends un{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:t,material:n}=e;return t.coordinateSystem===Pa&&n.side===Oi?"false":e.getFrontFacing()}}const oU=Mt(sne),X3=de(oU).mul(2).sub(1),W5=yu("normal","vec3"),ja=De(i=>i.geometry.hasAttribute("normal")===!1?(console.warn('THREE.TSL: Vertex attribute "normal" not found on geometry.'),Te(0,1,0)):W5,"vec3").once()().toVar("normalLocal"),lU=zr.dFdx().cross(zr.dFdy()).normalize().toVar("normalFlat"),el=De(i=>{let e;return i.material.flatShading===!0?e=lU:e=sa(mq(ja),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),$5=sa(el.transformDirection($a),"v_normalWorld").normalize().toVar("normalWorld"),Dr=De(i=>i.context.setupNormal().context({getUV:null}),"vec3").once()().mul(X3).toVar("transformedNormalView"),X5=Dr.transformDirection($a).toVar("transformedNormalWorld"),pd=De(i=>i.context.setupClearcoatNormal().context({getUV:null}),"vec3").once()().mul(X3).toVar("transformedClearcoatNormalView"),uU=De(([i,e=Wo])=>{const t=ra(e),n=i.div(Te(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(n).xyz}),mq=De(([i],e)=>{const t=e.renderer.nodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(i);const n=sU.mul(i);return $a.transformDirection(n)}),$M=new ks,jg=new yn,cU=Zt(0).onReference(({material:i})=>i).onObjectUpdate(({material:i})=>i.refractionRatio),r8=Zt(1).onReference(({material:i})=>i).onObjectUpdate(function({material:i,scene:e}){return i.envMap?i.envMapIntensity:e.environmentIntensity}),gq=Zt(new yn).onReference(function(i){return i.material}).onObjectUpdate(function({material:i,scene:e}){const t=e.environment!==null&&i.envMap===null?e.environmentRotation:i.envMapRotation;return t?($M.copy(t),jg.makeRotationFromEuler($M)):jg.identity(),jg}),hU=ar.negate().reflect(Dr),fU=ar.negate().refract(Dr,cU),dU=hU.transformDirection($a).toVar("reflectVector"),AU=fU.transformDirection($a).toVar("reflectVector");class ane extends xu{static get type(){return"CubeTextureNode"}constructor(e,t=null,n=null,r=null){super(e,t,n,r),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===Yo?dU:e.mapping===Ko?AU:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),Te(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return(e.renderer.coordinateSystem===mu||!n.isRenderTargetTexture)&&(t=Te(t.x.negate(),t.yz)),gq.mul(t)}generateUV(e,t){return t.build(e,"vec3")}}const oA=tt(ane).setParameterLength(1,4).setName("cubeTexture");class one extends Th{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}}class Q5 extends un{static get type(){return"ReferenceNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.name=null,this.updateType=Pn.OBJECT}element(e){return et(new one(this,et(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let t=null;this.count!==null?t=W3(null,e,this.count):Array.isArray(this.getValueFromReference())?t=El(null,e):e==="texture"?t=Zn(null):e==="cubeTexture"?t=oA(null):t=Zt(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.label(this.name),this.node=t.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const zi=(i,e,t)=>et(new Q5(i,e,t)),Kv=(i,e,t,n)=>et(new Q5(i,e,n,t));class lne extends Q5{static get type(){return"MaterialReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.material=n,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const _c=(i,e,t=null)=>et(new lne(i,e,t)),Y5=De(i=>(i.geometry.hasAttribute("tangent")===!1&&i.geometry.computeTangents(),yu("tangent","vec4")))(),Q3=Y5.xyz.toVar("tangentLocal"),Y3=Eh.mul(Jt(Q3,0)).xyz.toVarying("v_tangentView").normalize().toVar("tangentView"),pU=Y3.transformDirection($a).toVarying("v_tangentWorld").normalize().toVar("tangentWorld"),_q=Y3.toVar("transformedTangentView"),une=_q.transformDirection($a).normalize().toVar("transformedTangentWorld"),K3=i=>i.mul(Y5.w).xyz,cne=sa(K3(W5.cross(Y5)),"v_bitangentGeometry").normalize().toVar("bitangentGeometry"),hne=sa(K3(ja.cross(Q3)),"v_bitangentLocal").normalize().toVar("bitangentLocal"),mU=sa(K3(el.cross(Y3)),"v_bitangentView").normalize().toVar("bitangentView"),fne=sa(K3($5.cross(pU)),"v_bitangentWorld").normalize().toVar("bitangentWorld"),gU=K3(Dr.cross(_q)).normalize().toVar("transformedBitangentView"),dne=gU.transformDirection($a).normalize().toVar("transformedBitangentWorld"),nh=ra(Y3,mU,el),_U=ar.mul(nh),Ane=(i,e)=>i.sub(_U.mul(e)),vU=(()=>{let i=ch.cross(ar);return i=i.cross(ch).normalize(),i=Si(i,Dr,C1.mul(ru.oneMinus()).oneMinus().pow2().pow2()).normalize(),i})(),pne=De(i=>{const{eye_pos:e,surf_norm:t,mapN:n,uv:r}=i,s=e.dFdx(),a=e.dFdy(),o=r.dFdx(),u=r.dFdy(),c=t,p=a.cross(c),g=c.cross(s),y=p.mul(o.x).add(g.mul(u.x)),q=p.mul(o.y).add(g.mul(u.y)),S=y.dot(y).max(q.dot(q)),R=X3.mul(S.inverseSqrt());return Vr(y.mul(n.x,R),q.mul(n.y,R),c.mul(n.z)).normalize()});class mne extends wr{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=wc}setup(e){const{normalMapType:t,scaleNode:n}=this;let r=this.node.mul(2).sub(1);n!==null&&(r=Te(r.xy.mul(n),r.z));let s=null;return t===dN?s=mq(r):t===wc&&(e.hasGeometryAttribute("tangent")===!0?s=nh.mul(r).normalize():s=pne({eye_pos:zr,surf_norm:el,mapN:r,uv:hr()})),s}}const Zv=tt(mne).setParameterLength(1,2),gne=De(({textureNode:i,bumpScale:e})=>{const t=r=>i.cache().context({getUV:s=>r(s.uvNode||hr()),forceUVContext:!0}),n=de(t(r=>r));return At(de(t(r=>r.add(r.dFdx()))).sub(n),de(t(r=>r.add(r.dFdy()))).sub(n)).mul(e)}),_ne=De(i=>{const{surf_pos:e,surf_norm:t,dHdxy:n}=i,r=e.dFdx().normalize(),s=e.dFdy().normalize(),a=t,o=s.cross(a),u=a.cross(r),c=r.dot(o).mul(X3),p=c.sign().mul(n.x.mul(o).add(n.y.mul(u)));return c.abs().mul(t).sub(p).normalize()});class vne extends wr{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=gne({textureNode:this.textureNode,bumpScale:e});return _ne({surf_pos:zr,surf_norm:el,dHdxy:t})}}const yU=tt(vne).setParameterLength(1,2),XM=new Map;class Ke extends un{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let n=XM.get(e);return n===void 0&&(n=_c(e,t),XM.set(e,n)),n}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,n=this.scope;let r=null;if(n===Ke.COLOR){const s=t.color!==void 0?this.getColor(n):Te();t.map&&t.map.isTexture===!0?r=s.mul(this.getTexture("map")):r=s}else if(n===Ke.OPACITY){const s=this.getFloat(n);t.alphaMap&&t.alphaMap.isTexture===!0?r=s.mul(this.getTexture("alpha")):r=s}else if(n===Ke.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?r=this.getTexture("specular").r:r=de(1);else if(n===Ke.SPECULAR_INTENSITY){const s=this.getFloat(n);t.specularIntensityMap&&t.specularIntensityMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s}else if(n===Ke.SPECULAR_COLOR){const s=this.getColor(n);t.specularColorMap&&t.specularColorMap.isTexture===!0?r=s.mul(this.getTexture(n).rgb):r=s}else if(n===Ke.ROUGHNESS){const s=this.getFloat(n);t.roughnessMap&&t.roughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).g):r=s}else if(n===Ke.METALNESS){const s=this.getFloat(n);t.metalnessMap&&t.metalnessMap.isTexture===!0?r=s.mul(this.getTexture(n).b):r=s}else if(n===Ke.EMISSIVE){const s=this.getFloat("emissiveIntensity"),a=this.getColor(n).mul(s);t.emissiveMap&&t.emissiveMap.isTexture===!0?r=a.mul(this.getTexture(n)):r=a}else if(n===Ke.NORMAL)t.normalMap?(r=Zv(this.getTexture("normal"),this.getCache("normalScale","vec2")),r.normalMapType=t.normalMapType):t.bumpMap?r=yU(this.getTexture("bump").r,this.getFloat("bumpScale")):r=el;else if(n===Ke.CLEARCOAT){const s=this.getFloat(n);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===Ke.CLEARCOAT_ROUGHNESS){const s=this.getFloat(n);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===Ke.CLEARCOAT_NORMAL)t.clearcoatNormalMap?r=Zv(this.getTexture(n),this.getCache(n+"Scale","vec2")):r=el;else if(n===Ke.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?r=s.mul(this.getTexture("sheenColor").rgb):r=s}else if(n===Ke.SHEEN_ROUGHNESS){const s=this.getFloat(n);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s,r=r.clamp(.07,1)}else if(n===Ke.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const s=this.getTexture(n);r=O5(rd.x,rd.y,rd.y.negate(),rd.x).mul(s.rg.mul(2).sub(At(1)).normalize().mul(s.b))}else r=rd;else if(n===Ke.IRIDESCENCE_THICKNESS){const s=zi("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const a=zi("0","float",t.iridescenceThicknessRange);r=s.sub(a).mul(this.getTexture(n).g).add(a)}else r=s}else if(n===Ke.TRANSMISSION){const s=this.getFloat(n);t.transmissionMap?r=s.mul(this.getTexture(n).r):r=s}else if(n===Ke.THICKNESS){const s=this.getFloat(n);t.thicknessMap?r=s.mul(this.getTexture(n).g):r=s}else if(n===Ke.IOR)r=this.getFloat(n);else if(n===Ke.LIGHT_MAP)r=this.getTexture(n).rgb.mul(this.getFloat("lightMapIntensity"));else if(n===Ke.AO)r=this.getTexture(n).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const s=this.getNodeType(e);r=this.getCache(n,s)}return r}}Ke.ALPHA_TEST="alphaTest";Ke.COLOR="color";Ke.OPACITY="opacity";Ke.SHININESS="shininess";Ke.SPECULAR="specular";Ke.SPECULAR_STRENGTH="specularStrength";Ke.SPECULAR_INTENSITY="specularIntensity";Ke.SPECULAR_COLOR="specularColor";Ke.REFLECTIVITY="reflectivity";Ke.ROUGHNESS="roughness";Ke.METALNESS="metalness";Ke.NORMAL="normal";Ke.CLEARCOAT="clearcoat";Ke.CLEARCOAT_ROUGHNESS="clearcoatRoughness";Ke.CLEARCOAT_NORMAL="clearcoatNormal";Ke.EMISSIVE="emissive";Ke.ROTATION="rotation";Ke.SHEEN="sheen";Ke.SHEEN_ROUGHNESS="sheenRoughness";Ke.ANISOTROPY="anisotropy";Ke.IRIDESCENCE="iridescence";Ke.IRIDESCENCE_IOR="iridescenceIOR";Ke.IRIDESCENCE_THICKNESS="iridescenceThickness";Ke.IOR="ior";Ke.TRANSMISSION="transmission";Ke.THICKNESS="thickness";Ke.ATTENUATION_DISTANCE="attenuationDistance";Ke.ATTENUATION_COLOR="attenuationColor";Ke.LINE_SCALE="scale";Ke.LINE_DASH_SIZE="dashSize";Ke.LINE_GAP_SIZE="gapSize";Ke.LINE_WIDTH="linewidth";Ke.LINE_DASH_OFFSET="dashOffset";Ke.POINT_SIZE="size";Ke.DISPERSION="dispersion";Ke.LIGHT_MAP="light";Ke.AO="ao";const xU=Mt(Ke,Ke.ALPHA_TEST),qU=Mt(Ke,Ke.COLOR),bU=Mt(Ke,Ke.SHININESS),SU=Mt(Ke,Ke.EMISSIVE),vq=Mt(Ke,Ke.OPACITY),TU=Mt(Ke,Ke.SPECULAR),Jv=Mt(Ke,Ke.SPECULAR_INTENSITY),wU=Mt(Ke,Ke.SPECULAR_COLOR),Mp=Mt(Ke,Ke.SPECULAR_STRENGTH),s8=Mt(Ke,Ke.REFLECTIVITY),EU=Mt(Ke,Ke.ROUGHNESS),MU=Mt(Ke,Ke.METALNESS),RU=Mt(Ke,Ke.NORMAL),CU=Mt(Ke,Ke.CLEARCOAT),NU=Mt(Ke,Ke.CLEARCOAT_ROUGHNESS),PU=Mt(Ke,Ke.CLEARCOAT_NORMAL),DU=Mt(Ke,Ke.ROTATION),LU=Mt(Ke,Ke.SHEEN),UU=Mt(Ke,Ke.SHEEN_ROUGHNESS),OU=Mt(Ke,Ke.ANISOTROPY),BU=Mt(Ke,Ke.IRIDESCENCE),IU=Mt(Ke,Ke.IRIDESCENCE_IOR),FU=Mt(Ke,Ke.IRIDESCENCE_THICKNESS),kU=Mt(Ke,Ke.TRANSMISSION),zU=Mt(Ke,Ke.THICKNESS),GU=Mt(Ke,Ke.IOR),VU=Mt(Ke,Ke.ATTENUATION_DISTANCE),HU=Mt(Ke,Ke.ATTENUATION_COLOR),jU=Mt(Ke,Ke.LINE_SCALE),WU=Mt(Ke,Ke.LINE_DASH_SIZE),$U=Mt(Ke,Ke.LINE_GAP_SIZE),yne=Mt(Ke,Ke.LINE_WIDTH),XU=Mt(Ke,Ke.LINE_DASH_OFFSET),QU=Mt(Ke,Ke.POINT_SIZE),YU=Mt(Ke,Ke.DISPERSION),yq=Mt(Ke,Ke.LIGHT_MAP),KU=Mt(Ke,Ke.AO),rd=Zt(new rt).onReference(function(i){return i.material}).onRenderUpdate(function({material:i}){this.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation))}),xq=De(i=>i.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class or extends un{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const t=this.getNodeType(e),n=this.scope;let r;if(n===or.VERTEX)r=e.getVertexIndex();else if(n===or.INSTANCE)r=e.getInstanceIndex();else if(n===or.DRAW)r=e.getDrawIndex();else if(n===or.INVOCATION_LOCAL)r=e.getInvocationLocalIndex();else if(n===or.INVOCATION_SUBGROUP)r=e.getInvocationSubgroupIndex();else if(n===or.SUBGROUP)r=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+n);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=r:s=sa(this).build(e,t),s}}or.VERTEX="vertex";or.INSTANCE="instance";or.SUBGROUP="subgroup";or.INVOCATION_LOCAL="invocationLocal";or.INVOCATION_SUBGROUP="invocationSubgroup";or.DRAW="draw";const ZU=Mt(or,or.VERTEX),H1=Mt(or,or.INSTANCE),xne=Mt(or,or.SUBGROUP),qne=Mt(or,or.INVOCATION_SUBGROUP),bne=Mt(or,or.INVOCATION_LOCAL),JU=Mt(or,or.DRAW);class eO extends un{static get type(){return"InstanceNode"}constructor(e,t,n){super("void"),this.count=e,this.instanceMatrix=t,this.instanceColor=n,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=Pn.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{count:t,instanceMatrix:n,instanceColor:r}=this;let{instanceMatrixNode:s,instanceColorNode:a}=this;if(s===null){if(t<=1e3)s=W3(n.array,"mat4",Math.max(t,1)).element(H1);else{const u=new g8(n.array,16,1);this.buffer=u;const c=n.usage===ld?Yv:r5,p=[c(u,"vec4",16,0),c(u,"vec4",16,4),c(u,"vec4",16,8),c(u,"vec4",16,12)];s=uh(...p)}this.instanceMatrixNode=s}if(r&&a===null){const u=new G1(r.array,3),c=r.usage===ld?Yv:r5;this.bufferColor=u,a=Te(c(u,"vec3",3,0)),this.instanceColorNode=a}const o=s.mul(Lr).xyz;if(Lr.assign(o),e.hasGeometryAttribute("normal")){const u=uU(ja,s);ja.assign(u)}this.instanceColorNode!==null&&g3("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==ld&&this.buffer!==null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==ld&&this.bufferColor!==null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}const Sne=tt(eO).setParameterLength(3);class Tne extends eO{static get type(){return"InstancedMeshNode"}constructor(e){const{count:t,instanceMatrix:n,instanceColor:r}=e;super(t,n,r),this.instancedMesh=e}}const tO=tt(Tne).setParameterLength(1);class wne extends un{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=H1:this.batchingIdNode=JU);const n=De(([S])=>{const R=ve(V1(Nr(this.batchMesh._indirectTexture),0).x),M=ve(S).mod(R),E=ve(S).div(R);return Nr(this.batchMesh._indirectTexture,is(M,E)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(ve(this.batchingIdNode)),r=this.batchMesh._matricesTexture,s=ve(V1(Nr(r),0).x),a=de(n).mul(4).toInt().toVar(),o=a.mod(s),u=a.div(s),c=uh(Nr(r,is(o,u)),Nr(r,is(o.add(1),u)),Nr(r,is(o.add(2),u)),Nr(r,is(o.add(3),u))),p=this.batchMesh._colorsTexture;if(p!==null){const R=De(([M])=>{const E=ve(V1(Nr(p),0).x),U=M,P=U.mod(E),O=U.div(E);return Nr(p,is(P,O)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(n);g3("vec3","vBatchColor").assign(R)}const g=ra(c);Lr.assign(c.mul(Lr));const y=ja.div(Te(g[0].dot(g[0]),g[1].dot(g[1]),g[2].dot(g[2]))),q=g.mul(y).xyz;ja.assign(q),e.hasGeometryAttribute("tangent")&&Q3.mulAssign(g)}}const nO=tt(wne).setParameterLength(1);class Ene extends Th{static get type(){return"StorageArrayElementNode"}constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}getMemberType(e,t){const n=this.storageBufferNode.structTypeNode;return n?n.getMemberType(e,t):"void"}setup(e){return e.isAvailable("storageBuffer")===!1&&this.node.isPBO===!0&&e.setupPBO(this.node),super.setup(e)}generate(e,t){let n;const r=e.context.assign;if(e.isAvailable("storageBuffer")===!1?this.node.isPBO===!0&&r!==!0&&(this.node.value.isInstancedBufferAttribute||e.shaderStage!=="compute")?n=e.generatePBO(this):n=this.node.build(e):n=super.generate(e),r!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}const Mne=tt(Ene).setParameterLength(2);class Rne extends dq{static get type(){return"StorageBufferNode"}constructor(e,t=null,n=0){let r,s=null;t&&t.isStruct?(r="struct",s=t.layout):t===null&&(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)?(r=dD(e.itemSize),n=e.count):r=t,super(e,r,n),this.isStorageBufferNode=!0,this.structTypeNode=s,this.access=ea.READ_WRITE,this.isAtomic=!1,this.isPBO=!1,this._attribute=null,this._varying=null,this.global=!0,e.isStorageBufferAttribute!==!0&&e.isStorageInstancedBufferAttribute!==!0&&(e.isInstancedBufferAttribute?e.isStorageInstancedBufferAttribute=!0:e.isStorageBufferAttribute=!0)}getHash(e){if(this.bufferCount===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getInputType(){return this.value.isIndirectStorageBufferAttribute?"indirectStorageBuffer":"storageBuffer"}element(e){return Mne(this,e)}setPBO(e){return this.isPBO=e,this}getPBO(){return this.isPBO}setAccess(e){return this.access=e,this}toReadOnly(){return this.setAccess(ea.READ_ONLY)}setAtomic(e){return this.isAtomic=e,this}toAtomic(){return this.setAtomic(!0)}getAttributeData(){return this._attribute===null&&(this._attribute=j3(this.value),this._varying=sa(this._attribute)),{attribute:this._attribute,varying:this._varying}}getNodeType(e){if(this.structTypeNode!==null)return this.structTypeNode.getNodeType(e);if(e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.getNodeType(e);const{attribute:t}=this.getAttributeData();return t.getNodeType(e)}generate(e){if(this.structTypeNode!==null&&this.structTypeNode.build(e),e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.generate(e);const{attribute:t,varying:n}=this.getAttributeData(),r=n.build(e);return e.registerTransform(r,t),r}}const hh=(i,e=null,t=0)=>et(new Rne(i,e,t)),Cne=(i,e,t)=>(console.warn('THREE.TSL: "storageObject()" is deprecated. Use "storage().setPBO( true )" instead.'),hh(i,e,t).setPBO(!0)),QM=new WeakMap;class iO extends un{static get type(){return"SkinningNode"}constructor(e){super("void"),this.skinnedMesh=e,this.updateType=Pn.OBJECT,this.skinIndexNode=yu("skinIndex","uvec4"),this.skinWeightNode=yu("skinWeight","vec4"),this.bindMatrixNode=zi("bindMatrix","mat4"),this.bindMatrixInverseNode=zi("bindMatrixInverse","mat4"),this.boneMatricesNode=Kv("skeleton.boneMatrices","mat4",e.skeleton.bones.length),this.positionNode=Lr,this.toPositionNode=Lr,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=this.positionNode){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:a}=this,o=e.element(n.x),u=e.element(n.y),c=e.element(n.z),p=e.element(n.w),g=s.mul(t),y=Vr(o.mul(r.x).mul(g),u.mul(r.y).mul(g),c.mul(r.z).mul(g),p.mul(r.w).mul(g));return a.mul(y).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=ja){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:a}=this,o=e.element(n.x),u=e.element(n.y),c=e.element(n.z),p=e.element(n.w);let g=Vr(r.x.mul(o),r.y.mul(u),r.z.mul(c),r.w.mul(p));return g=a.mul(g).mul(s),g.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=Kv("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,s5)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")||pD(e.object).useVelocity===!0}setup(e){this.needsPreviousBoneMatrices(e)&&s5.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(this.toPositionNode&&this.toPositionNode.assign(t),e.hasGeometryAttribute("normal")){const n=this.getSkinnedNormal();ja.assign(n),e.hasGeometryAttribute("tangent")&&Q3.assign(n)}return t}generate(e,t){if(t!=="void")return super.generate(e,t)}update(e){const t=e.object&&e.object.skeleton?e.object.skeleton:this.skinnedMesh.skeleton;QM.get(t)!==e.frameId&&(QM.set(t,e.frameId),this.previousBoneMatricesNode!==null&&t.previousBoneMatrices.set(t.boneMatrices),t.update())}}const rO=i=>et(new iO(i)),Nne=(i,e=null)=>{const t=new iO(i);return t.positionNode=hh(new G1(i.geometry.getAttribute("position").array,3),"vec3").setPBO(!0).toReadOnly().element(H1).toVar(),t.skinIndexNode=hh(new G1(new Uint32Array(i.geometry.getAttribute("skinIndex").array),4),"uvec4").setPBO(!0).toReadOnly().element(H1).toVar(),t.skinWeightNode=hh(new G1(i.geometry.getAttribute("skinWeight").array,4),"vec4").setPBO(!0).toReadOnly().element(H1).toVar(),t.bindMatrixNode=Zt(i.bindMatrix,"mat4"),t.bindMatrixInverseNode=Zt(i.bindMatrixInverse,"mat4"),t.boneMatricesNode=W3(i.skeleton.boneMatrices,"mat4",i.skeleton.bones.length),t.toPositionNode=e,et(t)};class Pne extends un{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const n={};for(let s=0,a=this.params.length-1;s<a;s++){const o=this.params[s],u=o.isNode!==!0&&o.name||this.getVarName(s),c=o.isNode!==!0&&o.type||"int";n[u]=Y1(u,c)}const r=e.addStack();return t.returnsNode=this.params[this.params.length-1](n,r,e),t.stackNode=r,e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),n=this.params,r=t.stackNode;for(let o=0,u=n.length-1;o<u;o++){const c=n[o];let p=!1,g=null,y=null,q=null,S=null,R=null,M=null;c.isNode?c.getNodeType(e)==="bool"?(p=!0,S="bool",y=c.build(e,S)):(S="int",q=this.getVarName(o),g="0",y=c.build(e,S),R="<"):(S=c.type||"int",q=c.name||this.getVarName(o),g=c.start,y=c.end,R=c.condition,M=c.update,typeof g=="number"?g=e.generateConst(S,g):g&&g.isNode&&(g=g.build(e,S)),typeof y=="number"?y=e.generateConst(S,y):y&&y.isNode&&(y=y.build(e,S)),g!==void 0&&y===void 0?(g=g+" - 1",y="0",R=">="):y!==void 0&&g===void 0&&(g="0",R="<"),R===void 0&&(Number(g)>Number(y)?R=">=":R="<"));let E;if(p)E=`while ( ${y} )`;else{const U={start:g,end:y},P=U.start,O=U.end;let F="",I="",z="";M||(S==="int"||S==="uint"?R.includes("<")?M="++":M="--":R.includes("<")?M="+= 1.":M="-= 1."),F+=e.getVar(S,q)+" = "+P,I+=q+" "+R+" "+O,z+=q+" "+M,E=`for ( ${F}; ${I}; ${z} )`}e.addFlowCode((o===0?`
`:"")+e.tab+E+` {

`).addFlowTab()}const s=r.build(e,"void"),a=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let o=0,u=this.params.length-1;o<u;o++)e.addFlowCode((o===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),a}}const Ti=(...i)=>et(new Pne(lh(i,"int"))).append(),Dne=()=>Y1("continue").append(),sO=()=>Y1("break").append(),Lne=(...i)=>(console.warn("THREE.TSL: loop() has been renamed to Loop()."),Ti(...i)),Wg=new WeakMap,lo=new sn,YM=De(({bufferMap:i,influence:e,stride:t,width:n,depth:r,offset:s})=>{const a=ve(ZU).mul(t).add(s),o=a.div(n),u=a.sub(o.mul(n));return Nr(i,is(u,o)).depth(r).xyz.mul(e)});function Une(i){const e=i.morphAttributes.position!==void 0,t=i.morphAttributes.normal!==void 0,n=i.morphAttributes.color!==void 0,r=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,s=r!==void 0?r.length:0;let a=Wg.get(i);if(a===void 0||a.count!==s){let E=function(){R.dispose(),Wg.delete(i),i.removeEventListener("dispose",E)};a!==void 0&&a.texture.dispose();const o=i.morphAttributes.position||[],u=i.morphAttributes.normal||[],c=i.morphAttributes.color||[];let p=0;e===!0&&(p=1),t===!0&&(p=2),n===!0&&(p=3);let g=i.attributes.position.count*p,y=1;const q=4096;g>q&&(y=Math.ceil(g/q),g=q);const S=new Float32Array(g*y*4*s),R=new ax(S,g,y,s);R.type=kr,R.needsUpdate=!0;const M=p*4;for(let U=0;U<s;U++){const P=o[U],O=u[U],F=c[U],I=g*y*4*U;for(let z=0;z<P.count;z++){const j=z*M;e===!0&&(lo.fromBufferAttribute(P,z),S[I+j+0]=lo.x,S[I+j+1]=lo.y,S[I+j+2]=lo.z,S[I+j+3]=0),t===!0&&(lo.fromBufferAttribute(O,z),S[I+j+4]=lo.x,S[I+j+5]=lo.y,S[I+j+6]=lo.z,S[I+j+7]=0),n===!0&&(lo.fromBufferAttribute(F,z),S[I+j+8]=lo.x,S[I+j+9]=lo.y,S[I+j+10]=lo.z,S[I+j+11]=F.itemSize===4?lo.w:1)}}a={count:s,texture:R,stride:p,size:new rt(g,y)},Wg.set(i,a),i.addEventListener("dispose",E)}return a}class One extends un{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=Zt(1),this.updateType=Pn.OBJECT}setup(e){const{geometry:t}=e,n=t.morphAttributes.position!==void 0,r=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,s=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,a=s!==void 0?s.length:0,{texture:o,stride:u,size:c}=Une(t);n===!0&&Lr.mulAssign(this.morphBaseInfluence),r===!0&&ja.mulAssign(this.morphBaseInfluence);const p=ve(c.width);Ti(a,({i:g})=>{const y=de(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?y.assign(Nr(this.mesh.morphTexture,is(ve(g).add(1),ve(H1))).r):y.assign(zi("morphTargetInfluences","float").element(g).toVar()),On(y.notEqual(0),()=>{n===!0&&Lr.addAssign(YM({bufferMap:o,influence:y,stride:u,width:p,depth:g,offset:ve(0)})),r===!0&&ja.addAssign(YM({bufferMap:o,influence:y,stride:u,width:p,depth:g,offset:ve(1)}))})})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,n)=>t+n,0)}}const aO=tt(One).setParameterLength(1);class bA extends un{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class Bne extends bA{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class Ine extends CL{static get type(){return"LightingContextNode"}constructor(e,t=null,n=null,r=null){super(e),this.lightingModel=t,this.backdropNode=n,this.backdropAlphaNode=r,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,n=Te().toVar("directDiffuse"),r=Te().toVar("directSpecular"),s=Te().toVar("indirectDiffuse"),a=Te().toVar("indirectSpecular"),o={directDiffuse:n,directSpecular:r,indirectDiffuse:s,indirectSpecular:a};return{radiance:Te().toVar("radiance"),irradiance:Te().toVar("irradiance"),iblIrradiance:Te().toVar("iblIrradiance"),ambientOcclusion:de(1).toVar("ambientOcclusion"),reflectedLight:o,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const oO=tt(Ine);class Fne extends bA{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let G2,V2;class Xr extends un{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===Xr.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=Pn.NONE;return(this.scope===Xr.SIZE||this.scope===Xr.VIEWPORT)&&(e=Pn.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===Xr.VIEWPORT?t!==null?V2.copy(t.viewport):(e.getViewport(V2),V2.multiplyScalar(e.getPixelRatio())):t!==null?(G2.width=t.width,G2.height=t.height):e.getDrawingBufferSize(G2)}setup(){const e=this.scope;let t=null;return e===Xr.SIZE?t=Zt(G2||(G2=new rt)):e===Xr.VIEWPORT?t=Zt(V2||(V2=new sn)):t=At(Z3.div(q3)),t}generate(e){if(this.scope===Xr.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const n=e.getNodeProperties(q3).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${n}.y - ${t}.y )`}return t}return super.generate(e)}}Xr.COORDINATE="coordinate";Xr.VIEWPORT="viewport";Xr.SIZE="size";Xr.UV="uv";const qu=Mt(Xr,Xr.UV),q3=Mt(Xr,Xr.SIZE),Z3=Mt(Xr,Xr.COORDINATE),wd=Mt(Xr,Xr.VIEWPORT),lO=wd.zw,uO=Z3.sub(wd.xy),kne=uO.div(lO),zne=De(()=>(console.warn('THREE.TSL: "viewportResolution" is deprecated. Use "screenSize" instead.'),q3),"vec2").once()(),Gne=De(()=>(console.warn('THREE.TSL: "viewportTopLeft" is deprecated. Use "screenUV" instead.'),qu),"vec2").once()(),Vne=De(()=>(console.warn('THREE.TSL: "viewportBottomLeft" is deprecated. Use "screenUV.flipY()" instead.'),qu.flipY()),"vec2").once()(),H2=new rt;class K5 extends xu{static get type(){return"ViewportTextureNode"}constructor(e=qu,t=null,n=null){n===null&&(n=new xN,n.minFilter=Na),super(n,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=Pn.FRAME}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(H2);const n=this.value;(n.image.width!==H2.width||n.image.height!==H2.height)&&(n.image.width=H2.width,n.image.height=H2.height,n.needsUpdate=!0);const r=n.generateMipmaps;n.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(n),n.generateMipmaps=r}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const Hne=tt(K5).setParameterLength(0,3),qq=tt(K5,null,null,{generateMipmaps:!0}).setParameterLength(0,3);let $g=null;class jne extends K5{static get type(){return"ViewportDepthTextureNode"}constructor(e=qu,t=null){$g===null&&($g=new qo),super(e,t,$g)}}const bq=tt(jne).setParameterLength(0,2);class Oa extends un{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===Oa.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,n=this.valueNode;let r=null;if(t===Oa.DEPTH_BASE)n!==null&&(r=hO().assign(n));else if(t===Oa.DEPTH)e.isPerspectiveCamera?r=cO(zr.z,D1,L1):r=Ed(zr.z,D1,L1);else if(t===Oa.LINEAR_DEPTH)if(n!==null)if(e.isPerspectiveCamera){const s=Sq(n,D1,L1);r=Ed(s,D1,L1)}else r=n;else r=Ed(zr.z,D1,L1);return r}}Oa.DEPTH_BASE="depthBase";Oa.DEPTH="depth";Oa.LINEAR_DEPTH="linearDepth";const Ed=(i,e,t)=>i.add(e).div(e.sub(t)),Wne=(i,e,t)=>e.sub(t).mul(i).sub(e),cO=(i,e,t)=>e.add(i).mul(t).div(t.sub(e).mul(i)),Sq=(i,e,t)=>e.mul(t).div(t.sub(e).mul(i).sub(t)),Tq=(i,e,t)=>{e=e.max(1e-6).toVar();const n=du(i.negate().div(e)),r=du(t.div(e));return n.div(r)},$ne=(i,e,t)=>{const n=i.mul(k5(t.div(e)));return de(Math.E).pow(n).mul(e).negate()},hO=tt(Oa,Oa.DEPTH_BASE),wq=Mt(Oa,Oa.DEPTH),a5=tt(Oa,Oa.LINEAR_DEPTH).setParameterLength(0,1),Xne=a5(bq());wq.assign=i=>hO(i);class Qne extends un{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const Yne=tt(Qne).setParameterLength(1);class Qo extends un{static get type(){return"ClippingNode"}constructor(e=Qo.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{intersectionPlanes:n,unionPlanes:r}=t;return this.hardwareClipping=e.material.hardwareClipping,this.scope===Qo.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(n,r):this.scope===Qo.HARDWARE?this.setupHardwareClipping(r,e):this.setupDefault(n,r)}setupAlphaToCoverage(e,t){return De(()=>{const n=de().toVar("distanceToPlane"),r=de().toVar("distanceToGradient"),s=de(1).toVar("clipOpacity"),a=t.length;if(this.hardwareClipping===!1&&a>0){const u=El(t);Ti(a,({i:c})=>{const p=u.element(c);n.assign(zr.dot(p.xyz).negate().add(p.w)),r.assign(n.fwidth().div(2)),s.mulAssign(vu(r.negate(),r,n))})}const o=e.length;if(o>0){const u=El(e),c=de(1).toVar("intersectionClipOpacity");Ti(o,({i:p})=>{const g=u.element(p);n.assign(zr.dot(g.xyz).negate().add(g.w)),r.assign(n.fwidth().div(2)),c.mulAssign(vu(r.negate(),r,n).oneMinus())}),s.mulAssign(c.oneMinus())}qi.a.mulAssign(s),qi.a.equal(0).discard()})()}setupDefault(e,t){return De(()=>{const n=t.length;if(this.hardwareClipping===!1&&n>0){const s=El(t);Ti(n,({i:a})=>{const o=s.element(a);zr.dot(o.xyz).greaterThan(o.w).discard()})}const r=e.length;if(r>0){const s=El(e),a=Pc(!0).toVar("clipped");Ti(r,({i:o})=>{const u=s.element(o);a.assign(zr.dot(u.xyz).greaterThan(u.w).and(a))}),a.discard()}})()}setupHardwareClipping(e,t){const n=e.length;return t.enableHardwareClipping(n),De(()=>{const r=El(e),s=Yne(t.getClipDistance());Ti(n,({i:a})=>{const o=r.element(a),u=zr.dot(o.xyz).sub(o.w).negate();s.element(a).assign(u)})})()}}Qo.ALPHA_TO_COVERAGE="alphaToCoverage";Qo.DEFAULT="default";Qo.HARDWARE="hardware";const Kne=()=>et(new Qo),Zne=()=>et(new Qo(Qo.ALPHA_TO_COVERAGE)),Jne=()=>et(new Qo(Qo.HARDWARE)),eie=.05,KM=De(([i])=>Bc(Dn(1e4,go(Dn(17,i.x).add(Dn(.1,i.y)))).mul(Vr(.1,Yi(go(Dn(13,i.y).add(i.x))))))),ZM=De(([i])=>KM(At(KM(i.xy),i.z))),tie=De(([i])=>{const e=Br(Sc(rq(i.xyz)),Sc(sq(i.xyz))),t=de(1).div(de(eie).mul(e)).toVar("pixScale"),n=At(aA(Au(du(t))),aA(z5(du(t)))),r=At(ZM(Au(n.x.mul(i.xyz))),ZM(Au(n.y.mul(i.xyz)))),s=Bc(du(t)),a=Vr(Dn(s.oneMinus(),r.x),Dn(s,r.y)),o=Ha(s,s.oneMinus()),u=Te(a.mul(a).div(Dn(2,o).mul(hi(1,o))),a.sub(Dn(.5,o)).div(hi(1,o)),hi(1,hi(1,a).mul(hi(1,a)).div(Dn(2,o).mul(hi(1,o))))),c=a.lessThan(o.oneMinus()).select(a.lessThan(o).select(u.x,u.y),u.z);return _u(c,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class Hr extends na{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.shadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+fD(this)}build(e){this.setup(e)}setupObserver(e){return new Vee(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);const t=e.renderer,n=t.getRenderTarget();e.addStack();const r=this.vertexNode||this.setupVertex(e);e.stack.outputNode=r,this.setupHardwareClipping(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let s;const a=this.setupClipping(e);if((this.depthWrite===!0||this.depthTest===!0)&&(n!==null?n.depthBuffer===!0&&this.setupDepth(e):t.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const o=this.setupLighting(e);a!==null&&e.stack.add(a);const u=Jt(o,qi.a).max(0);s=this.setupOutput(e,u),Td.assign(s);const c=this.outputNode!==null;if(c&&(s=this.outputNode),n!==null){const p=t.getMRT(),g=this.mrtNode;p!==null?(c&&Td.assign(s),s=p,g!==null&&(s=p.merge(g))):g!==null&&(s=g)}}else{let o=this.fragmentNode;o.isOutputStructNode!==!0&&(o=Jt(o)),s=this.setupOutput(e,o)}e.stack.outputNode=s,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:t,intersectionPlanes:n}=e.clippingContext;let r=null;if(t.length>0||n.length>0){const s=e.renderer.samples;this.alphaToCoverage&&s>1?r=Zne():e.stack.add(Kne())}return r}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const t=e.clippingContext.unionPlanes.length;t>0&&t<=8&&e.isAvailable("clipDistance")&&(e.stack.add(Jne()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:t,camera:n}=e;let r=this.depthNode;if(r===null){const s=t.getMRT();s&&s.has("depth")?r=s.get("depth"):t.logarithmicDepthBuffer===!0&&(n.isPerspectiveCamera?r=Tq(zr.z,D1,L1):r=Ed(zr.z,D1,L1))}r!==null&&wq.assign(r).append()}setupPositionView(){return Eh.mul(Lr).xyz}setupModelViewProjection(){return wh.mul(zr)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),xq}setupPosition(e){const{object:t,geometry:n}=e;if((n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color)&&aO(t).append(),t.isSkinnedMesh===!0&&rO(t).append(),this.displacementMap){const r=_c("displacementMap","texture"),s=_c("displacementScale","float"),a=_c("displacementBias","float");Lr.addAssign(ja.normalize().mul(r.x.mul(s).add(a)))}return t.isBatchedMesh&&nO(t).append(),t.isInstancedMesh&&t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&tO(t).append(),this.positionNode!==null&&Lr.assign(this.positionNode.context({isPositionNodeInput:!0})),Lr}setupDiffuseColor({object:e,geometry:t}){let n=this.colorNode?Jt(this.colorNode):qU;this.vertexColors===!0&&t.hasAttribute("color")&&(n=Jt(n.xyz.mul(yu("color","vec3")),n.a)),e.instanceColor&&(n=g3("vec3","vInstanceColor").mul(n)),e.isBatchedMesh&&e._colorsTexture&&(n=g3("vec3","vBatchColor").mul(n)),qi.assign(n);const r=this.opacityNode?de(this.opacityNode):vq;if(qi.a.assign(qi.a.mul(r)),this.alphaTestNode!==null||this.alphaTest>0){const s=this.alphaTestNode!==null?de(this.alphaTestNode):xU;qi.a.lessThanEqual(s).discard()}this.alphaHash===!0&&qi.a.lessThan(tie(Lr)).discard(),this.transparent===!1&&this.blending===ka&&this.alphaToCoverage===!1&&qi.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?Te(0):qi.rgb}setupNormal(){return this.normalNode?Te(this.normalNode):RU}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?_c("envMap","cubeTexture"):_c("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new Fne(yq)),t}setupLights(e){const t=[],n=this.setupEnvironment(e);n&&n.isLightingNode&&t.push(n);const r=this.setupLightMap(e);if(r&&r.isLightingNode&&t.push(r),this.aoNode!==null||e.material.aoMap){const a=this.aoNode!==null?this.aoNode:KU;t.push(new Bne(a))}let s=this.lightsNode||e.lightsNode;return t.length>0&&(s=e.renderer.lighting.createNode([...s.getLights(),...t])),s}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:n,backdropAlphaNode:r,emissiveNode:s}=this,o=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let u=this.setupOutgoingLight(e);if(o&&o.getScope().hasLights){const c=this.setupLightingModel(e)||null;u=oO(o,c,n,r)}else n!==null&&(u=Te(r!==null?Si(u,n,r):n));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(Xv.assign(Te(s||SU)),u=u.add(Xv)),u}setupFog(e,t){const n=e.fogNode;return n&&(Td.assign(t),t=Jt(n)),t}setupOutput(e,t){return this.fog===!0&&(t=this.setupFog(e,t)),t}setDefaultValues(e){for(const n in e){const r=e[n];this[n]===void 0&&(this[n]=r,r&&r.clone&&(this[n]=r.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const n in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,n)===void 0&&t[n].get!==void 0&&Object.defineProperty(this.constructor.prototype,n,t[n])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const n=na.prototype.toJSON.call(this,e),r=K8(this);n.inputNodes={};for(const{property:a,childNode:o}of r)n.inputNodes[a]=o.toJSON(e).uuid;function s(a){const o=[];for(const u in a){const c=a[u];delete c.metadata,o.push(c)}return o}if(t){const a=s(e.textures),o=s(e.images),u=s(e.nodes);a.length>0&&(n.textures=a),o.length>0&&(n.images=o),u.length>0&&(n.nodes=u)}return n}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.shadowPositionNode=e.shadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const nie=new vA;class iie extends Hr{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(nie),this.setValues(e)}}const rie=new zG;class sie extends Hr{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(rie),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?de(this.offsetNode):XU,t=this.dashScaleNode?de(this.dashScaleNode):jU,n=this.dashSizeNode?de(this.dashSizeNode):WU,r=this.gapSizeNode?de(this.gapSizeNode):$U;t8.assign(n),Qv.assign(r);const s=sa(yu("lineDistance").mul(t));(e?s.add(e):s).mod(t8.add(Qv)).greaterThan(t8).discard()}}let Xg=null;class aie extends K5{static get type(){return"ViewportSharedTextureNode"}constructor(e=qu,t=null){Xg===null&&(Xg=new xN),super(e,t,Xg)}updateReference(){return this}}const oie=tt(aie).setParameterLength(0,2),fO=i=>et(i).mul(.5).add(.5),lie=i=>et(i).mul(2).sub(1),uie=new BG;class cie extends Hr{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(uie),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?de(this.opacityNode):vq;qi.assign(j5(Jt(fO(Dr),e),nn))}}class hie extends wr{static get type(){return"EquirectUVNode"}constructor(e=pq){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,t=e.z.atan(e.x).mul(1/(Math.PI*2)).add(.5),n=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return At(t,n)}}const Eq=tt(hie).setParameterLength(0,1);class dO extends vN{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const n=t.minFilter,r=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new J1(5,5,5),a=Eq(pq),o=new Hr;o.colorNode=Zn(t,a,0),o.side=Oi,o.blending=Fa;const u=new yi(s,o),c=new b5;c.add(u),t.minFilter===Na&&(t.minFilter=rs);const p=new _N(1,10,this),g=e.getMRT();return e.setMRT(null),p.update(e,c),e.setMRT(g),t.minFilter=n,t.currentGenerateMipmaps=r,u.geometry.dispose(),u.material.dispose(),this}}const Rp=new WeakMap;class fie extends wr{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=oA(null);const t=new q5;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=Pn.RENDER}updateBefore(e){const{renderer:t,material:n}=e,r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){const s=r.isTextureNode?r.value:n[r.property];if(s&&s.isTexture){const a=s.mapping;if(a===W1||a===$1){if(Rp.has(s)){const o=Rp.get(s);JM(o,s.mapping),this._cubeTexture=o}else{const o=s.image;if(die(o)){const u=new dO(o.height);u.fromEquirectangularTexture(t,s),JM(u.texture,s.mapping),this._cubeTexture=u.texture,Rp.set(s,u.texture),s.addEventListener("dispose",AO)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function die(i){return i==null?!1:i.height>0}function AO(i){const e=i.target;e.removeEventListener("dispose",AO);const t=Rp.get(e);t!==void 0&&(Rp.delete(e),t.dispose())}function JM(i,e){e===W1?i.mapping=Yo:e===$1&&(i.mapping=Ko)}const pO=tt(fie).setParameterLength(1);class Mq extends bA{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=pO(this.envNode)}}class Aie extends bA{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=de(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class Z5{start(e){e.lightsNode.setupLights(e,e.lightsNode.getLightNodes(e)),this.indirect(e)}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class mO extends Z5{constructor(){super()}indirect({context:e}){const t=e.ambientOcclusion,n=e.reflectedLight,r=e.irradianceLightMap;n.indirectDiffuse.assign(Jt(0)),r?n.indirectDiffuse.addAssign(r):n.indirectDiffuse.addAssign(Jt(1,1,1,0)),n.indirectDiffuse.mulAssign(t),n.indirectDiffuse.mulAssign(qi.rgb)}finish(e){const{material:t,context:n}=e,r=n.outgoingLight,s=e.context.environment;if(s)switch(t.combine){case M3:r.rgb.assign(Si(r.rgb,r.rgb.mul(s.rgb),Mp.mul(s8)));break;case sN:r.rgb.assign(Si(r.rgb,s.rgb,Mp.mul(s8)));break;case aN:r.rgb.addAssign(s.rgb.mul(Mp.mul(s8)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",t.combine);break}}}const pie=new jo;class mie extends Hr{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(pie),this.setValues(e)}setupNormal(){return el}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new Mq(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new Aie(yq)),t}setupOutgoingLight(){return qi.rgb}setupLightingModel(){return new mO}}const lA=De(({f0:i,f90:e,dotVH:t})=>{const n=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return i.mul(n.oneMinus()).add(e.mul(n))}),qh=De(i=>i.diffuseColor.mul(1/Math.PI)),gie=()=>de(.25),_ie=De(({dotNH:i})=>t5.mul(de(.5)).add(1).mul(de(1/Math.PI)).mul(i.pow(t5))),vie=De(({lightDirection:i})=>{const e=i.add(ar).normalize(),t=Dr.dot(e).clamp(),n=ar.dot(e).clamp(),r=lA({f0:Ea,f90:1,dotVH:n}),s=gie(),a=_ie({dotNH:t});return r.mul(s).mul(a)});class gO extends mO{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=Dr.dot(e).clamp().mul(t);n.directDiffuse.addAssign(s.mul(qh({diffuseColor:qi.rgb}))),this.specular===!0&&n.directSpecular.addAssign(s.mul(vie({lightDirection:e})).mul(Mp))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:r}=e.context;r.indirectDiffuse.addAssign(n.mul(qh({diffuseColor:qi}))),r.indirectDiffuse.mulAssign(t)}}const yie=new Oc;class xie extends Hr{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(yie),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new Mq(t):null}setupLightingModel(){return new gO(!1)}}const qie=new DN;class bie extends Hr{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(qie),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new Mq(t):null}setupLightingModel(){return new gO}setupVariants(){const e=(this.shininessNode?de(this.shininessNode):bU).max(1e-4);t5.assign(e);const t=this.specularNode||TU;Ea.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const _O=De(i=>{if(i.geometry.hasAttribute("normal")===!1)return de(0);const e=el.dFdx().abs().max(el.dFdy().abs());return e.x.max(e.y).max(e.z)}),Rq=De(i=>{const{roughness:e}=i,t=_O();let n=e.max(.0525);return n=n.add(t),n=n.min(1),n}),vO=De(({alpha:i,dotNL:e,dotNV:t})=>{const n=i.pow2(),r=e.mul(n.add(n.oneMinus().mul(t.pow2())).sqrt()),s=t.mul(n.add(n.oneMinus().mul(e.pow2())).sqrt());return Ol(.5,r.add(s).max(nL))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),Sie=De(({alphaT:i,alphaB:e,dotTV:t,dotBV:n,dotTL:r,dotBL:s,dotNV:a,dotNL:o})=>{const u=o.mul(Te(i.mul(t),e.mul(n),a).length()),c=a.mul(Te(i.mul(r),e.mul(s),o).length());return Ol(.5,u.add(c)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),yO=De(({alpha:i,dotNH:e})=>{const t=i.pow2(),n=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(n.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),Tie=de(1/Math.PI),wie=De(({alphaT:i,alphaB:e,dotNH:t,dotTH:n,dotBH:r})=>{const s=i.mul(e),a=Te(e.mul(n),i.mul(r),s.mul(t)),o=a.dot(a),u=s.div(o);return Tie.mul(s.mul(u.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),ey=De(i=>{const{lightDirection:e,f0:t,f90:n,roughness:r,f:s,USE_IRIDESCENCE:a,USE_ANISOTROPY:o}=i,u=i.normalView||Dr,c=r.pow2(),p=e.add(ar).normalize(),g=u.dot(e).clamp(),y=u.dot(ar).clamp(),q=u.dot(p).clamp(),S=ar.dot(p).clamp();let R=lA({f0:t,f90:n,dotVH:S}),M,E;if(p3(a)&&(R=F5.mix(R,s)),p3(o)){const U=Tp.dot(e),P=Tp.dot(ar),O=Tp.dot(p),F=ch.dot(e),I=ch.dot(ar),z=ch.dot(p);M=Sie({alphaT:e5,alphaB:c,dotTV:P,dotBV:I,dotTL:U,dotBL:F,dotNV:y,dotNL:g}),E=wie({alphaT:e5,alphaB:c,dotNH:q,dotTH:O,dotBH:z})}else M=vO({alpha:c,dotNL:g,dotNV:y}),E=yO({alpha:c,dotNH:q});return R.mul(M).mul(E)}),Cq=De(({roughness:i,dotNV:e})=>{const t=Jt(-1,-.0275,-.572,.022),n=Jt(1,.0425,1.04,-.04),r=i.mul(t).add(n),s=r.x.mul(r.x).min(e.mul(-9.28).exp2()).mul(r.x).add(r.y);return At(-1.04,1.04).mul(s).add(r.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),xO=De(i=>{const{dotNV:e,specularColor:t,specularF90:n,roughness:r}=i,s=Cq({dotNV:e,roughness:r});return t.mul(s.x).add(n.mul(s.y))}),qO=De(({f:i,f90:e,dotVH:t})=>{const n=t.oneMinus().saturate(),r=n.mul(n),s=n.mul(r,r).clamp(0,.9999);return i.sub(Te(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),Eie=De(({roughness:i,dotNH:e})=>{const t=i.pow2(),n=de(1).div(t),s=e.pow2().oneMinus().max(.0078125);return de(2).add(n).mul(s.pow(n.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),Mie=De(({dotNV:i,dotNL:e})=>de(1).div(de(4).mul(e.add(i).sub(e.mul(i))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),Rie=De(({lightDirection:i})=>{const e=i.add(ar).normalize(),t=Dr.dot(i).clamp(),n=Dr.dot(ar).clamp(),r=Dr.dot(e).clamp(),s=Eie({roughness:I5,dotNH:r}),a=Mie({dotNV:n,dotNL:t});return th.mul(s).mul(a)}),Cie=De(({N:i,V:e,roughness:t})=>{const s=.0078125,a=i.dot(e).saturate(),o=At(t,a.oneMinus().sqrt());return o.assign(o.mul(.984375).add(s)),o}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),Nie=De(({f:i})=>{const e=i.length();return Br(e.mul(e).add(i.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),o6=De(({v1:i,v2:e})=>{const t=i.dot(e),n=t.abs().toVar(),r=n.mul(.0145206).add(.4965155).mul(n).add(.8543985).toVar(),s=n.add(4.1616724).mul(n).add(3.417594).toVar(),a=r.div(s),o=t.greaterThan(0).select(a,Br(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(a));return i.cross(e).mul(o)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),eR=De(({N:i,V:e,P:t,mInv:n,p0:r,p1:s,p2:a,p3:o})=>{const u=s.sub(r).toVar(),c=o.sub(r).toVar(),p=u.cross(c),g=Te().toVar();return On(p.dot(t.sub(r)).greaterThanEqual(0),()=>{const y=e.sub(i.mul(e.dot(i))).normalize(),q=i.cross(y).negate(),S=n.mul(ra(y,q,i).transpose()).toVar(),R=S.mul(r.sub(t)).normalize().toVar(),M=S.mul(s.sub(t)).normalize().toVar(),E=S.mul(a.sub(t)).normalize().toVar(),U=S.mul(o.sub(t)).normalize().toVar(),P=Te(0).toVar();P.addAssign(o6({v1:R,v2:M})),P.addAssign(o6({v1:M,v2:E})),P.addAssign(o6({v1:E,v2:U})),P.addAssign(o6({v1:U,v2:R})),g.assign(Te(Nie({f:P})))}),g}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),J5=1/6,bO=i=>Dn(J5,Dn(i,Dn(i,i.negate().add(3)).sub(3)).add(1)),ty=i=>Dn(J5,Dn(i,Dn(i,Dn(3,i).sub(6))).add(4)),SO=i=>Dn(J5,Dn(i,Dn(i,Dn(-3,i).add(3)).add(3)).add(1)),ny=i=>Dn(J5,Nl(i,3)),tR=i=>bO(i).add(ty(i)),nR=i=>SO(i).add(ny(i)),iR=i=>Vr(-1,ty(i).div(bO(i).add(ty(i)))),rR=i=>Vr(1,ny(i).div(SO(i).add(ny(i)))),sR=(i,e,t)=>{const n=i.uvNode,r=Dn(n,e.zw).add(.5),s=Au(r),a=Bc(r),o=tR(a.x),u=nR(a.x),c=iR(a.x),p=rR(a.x),g=iR(a.y),y=rR(a.y),q=At(s.x.add(c),s.y.add(g)).sub(.5).mul(e.xy),S=At(s.x.add(p),s.y.add(g)).sub(.5).mul(e.xy),R=At(s.x.add(c),s.y.add(y)).sub(.5).mul(e.xy),M=At(s.x.add(p),s.y.add(y)).sub(.5).mul(e.xy),E=tR(a.y).mul(Vr(o.mul(i.sample(q).level(t)),u.mul(i.sample(S).level(t)))),U=nR(a.y).mul(Vr(o.mul(i.sample(R).level(t)),u.mul(i.sample(M).level(t))));return E.add(U)},TO=De(([i,e=de(3)])=>{const t=At(i.size(ve(e))),n=At(i.size(ve(e.add(1)))),r=Ol(1,t),s=Ol(1,n),a=sR(i,Jt(r,t),Au(e)),o=sR(i,Jt(s,n),z5(e));return Bc(e).mix(a,o)}),aR=De(([i,e,t,n,r])=>{const s=Te(uq(e.negate(),Dc(i),Ol(1,n))),a=Te(Sc(r[0].xyz),Sc(r[1].xyz),Sc(r[2].xyz));return Dc(s).mul(t.mul(a))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),Pie=De(([i,e])=>i.mul(_u(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),Die=qq(),Lie=qq(),oR=De(([i,e,t],{material:n})=>{const s=(n.side===Oi?Die:Lie).sample(i),a=du(q3.x).mul(Pie(e,t));return TO(s,a)}),lR=De(([i,e,t])=>(On(t.notEqual(0),()=>{const n=k5(e).negate().div(t);return tq(n.negate().mul(i))}),Te(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),Uie=De(([i,e,t,n,r,s,a,o,u,c,p,g,y,q,S])=>{let R,M;if(S){R=Jt().toVar(),M=Te().toVar();const F=p.sub(1).mul(S.mul(.025)),I=Te(p.sub(F),p,p.add(F));Ti({start:0,end:3},({i:z})=>{const j=I.element(z),k=aR(i,e,g,j,o),G=a.add(k),$=c.mul(u.mul(Jt(G,1))),te=At($.xy.div($.w)).toVar();te.addAssign(1),te.divAssign(2),te.assign(At(te.x,te.y.oneMinus()));const ne=oR(te,t,j);R.element(z).assign(ne.element(z)),R.a.addAssign(ne.a),M.element(z).assign(n.element(z).mul(lR(Sc(k),y,q).element(z)))}),R.a.divAssign(3)}else{const F=aR(i,e,g,p,o),I=a.add(F),z=c.mul(u.mul(Jt(I,1))),j=At(z.xy.div(z.w)).toVar();j.addAssign(1),j.divAssign(2),j.assign(At(j.x,j.y.oneMinus())),R=oR(j,t,p),M=n.mul(lR(Sc(F),y,q))}const E=M.rgb.mul(R.rgb),U=i.dot(e).clamp(),P=Te(xO({dotNV:U,specularColor:r,specularF90:s,roughness:t})),O=M.r.add(M.g,M.b).div(3);return Jt(P.oneMinus().mul(E),R.a.oneMinus().mul(O).oneMinus())}),Oie=ra(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),Bie=i=>{const e=i.sqrt();return Te(1).add(e).div(Te(1).sub(e))},uR=(i,e)=>i.sub(e).div(i.add(e)).pow2(),Iie=(i,e)=>{const t=i.mul(2*Math.PI*1e-9),n=Te(54856e-17,44201e-17,52481e-17),r=Te(1681e3,1795300,2208400),s=Te(43278e5,93046e5,66121e5),a=de(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let o=n.mul(s.mul(2*Math.PI).sqrt()).mul(r.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return o=Te(o.x.add(a),o.y,o.z).div(10685e-11),Oie.mul(o)},Fie=De(({outsideIOR:i,eta2:e,cosTheta1:t,thinFilmThickness:n,baseF0:r})=>{const s=Si(i,e,vu(0,.03,n)),o=i.div(s).pow2().mul(t.pow2().oneMinus()).oneMinus();On(o.lessThan(0),()=>Te(1));const u=o.sqrt(),c=uR(s,i),p=lA({f0:c,f90:1,dotVH:t}),g=p.oneMinus(),y=s.lessThan(i).select(Math.PI,0),q=de(Math.PI).sub(y),S=Bie(r.clamp(0,.9999)),R=uR(S,s.toVec3()),M=lA({f0:R,f90:1,dotVH:u}),E=Te(S.x.lessThan(s).select(Math.PI,0),S.y.lessThan(s).select(Math.PI,0),S.z.lessThan(s).select(Math.PI,0)),U=s.mul(n,u,2),P=Te(q).add(E),O=p.mul(M).clamp(1e-5,.9999),F=O.sqrt(),I=g.pow2().mul(M).div(Te(1).sub(O)),j=p.add(I).toVar(),k=I.sub(g).toVar();return Ti({start:1,end:2,condition:"<=",name:"m"},({m:G})=>{k.mulAssign(F);const $=Iie(de(G).mul(U),de(G).mul(P)).mul(2);j.addAssign(k.mul($))}),j.max(Te(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),kie=De(({normal:i,viewDir:e,roughness:t})=>{const n=i.dot(e).saturate(),r=t.pow2(),s=Fs(t.lessThan(.25),de(-339.2).mul(r).add(de(161.4).mul(t)).sub(25.9),de(-8.48).mul(r).add(de(14.3).mul(t)).sub(9.95)),a=Fs(t.lessThan(.25),de(44).mul(r).sub(de(23.7).mul(t)).add(3.26),de(1.97).mul(r).sub(de(3.27).mul(t)).add(.72));return Fs(t.lessThan(.25),0,de(.1).mul(t).sub(.025)).add(s.mul(n).add(a).exp()).mul(1/Math.PI).saturate()}),Qg=Te(.04),Yg=de(1);class wO extends Z5{constructor(e=!1,t=!1,n=!1,r=!1,s=!1,a=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=n,this.anisotropy=r,this.transmission=s,this.dispersion=a,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=Te().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=Te().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=Te().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=Te().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=Te().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=Dr.dot(ar).clamp();this.iridescenceFresnel=Fie({outsideIOR:de(1),eta2:$x,cosTheta1:t,thinFilmThickness:Xx,baseF0:Ea}),this.iridescenceF0=qO({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=Tc,n=iU.sub(Tc).normalize(),r=X5,s=e.context;s.backdrop=Uie(r,n,ru,qi,Ea,y3,t,Wo,$a,wh,wp,Qx,Kx,Yx,this.dispersion?Zx:null),s.backdropAlpha=n5,qi.a.mulAssign(Si(1,s.backdrop.a,n5))}super.start(e)}computeMultiscattering(e,t,n){const r=Dr.dot(ar).clamp(),s=Cq({roughness:ru,dotNV:r}),o=(this.iridescenceF0?F5.mix(Ea,this.iridescenceF0):Ea).mul(s.x).add(n.mul(s.y)),c=s.x.add(s.y).oneMinus(),p=Ea.add(Ea.oneMinus().mul(.047619)),g=o.mul(p).div(c.mul(p).oneMinus());e.addAssign(o),t.addAssign(g.mul(c))}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=Dr.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(Rie({lightDirection:e}))),this.clearcoat===!0){const o=pd.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(o.mul(ey({lightDirection:e,f0:Qg,f90:Yg,roughness:v3,normalView:pd})))}n.directDiffuse.addAssign(s.mul(qh({diffuseColor:qi.rgb}))),n.directSpecular.addAssign(s.mul(ey({lightDirection:e,f0:Ea,f90:1,roughness:ru,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:n,halfHeight:r,reflectedLight:s,ltc_1:a,ltc_2:o}){const u=t.add(n).sub(r),c=t.sub(n).sub(r),p=t.sub(n).add(r),g=t.add(n).add(r),y=Dr,q=ar,S=zr.toVar(),R=Cie({N:y,V:q,roughness:ru}),M=a.sample(R).toVar(),E=o.sample(R).toVar(),U=ra(Te(M.x,0,M.y),Te(0,1,0),Te(M.z,0,M.w)).toVar(),P=Ea.mul(E.x).add(Ea.oneMinus().mul(E.y)).toVar();s.directSpecular.addAssign(e.mul(P).mul(eR({N:y,V:q,P:S,mInv:U,p0:u,p1:c,p2:p,p3:g}))),s.directDiffuse.addAssign(e.mul(qi).mul(eR({N:y,V:q,P:S,mInv:ra(1,0,0,0,1,0,0,0,1),p0:u,p1:c,p2:p,p3:g})))}indirect(e){this.indirectDiffuse(e),this.indirectSpecular(e),this.ambientOcclusion(e)}indirectDiffuse(e){const{irradiance:t,reflectedLight:n}=e.context;n.indirectDiffuse.addAssign(t.mul(qh({diffuseColor:qi})))}indirectSpecular(e){const{radiance:t,iblIrradiance:n,reflectedLight:r}=e.context;if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(n.mul(th,kie({normal:Dr,viewDir:ar,roughness:I5}))),this.clearcoat===!0){const p=pd.dot(ar).clamp(),g=xO({dotNV:p,specularColor:Qg,specularF90:Yg,roughness:v3});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(g))}const s=Te().toVar("singleScattering"),a=Te().toVar("multiScattering"),o=n.mul(1/Math.PI);this.computeMultiscattering(s,a,y3);const u=s.add(a),c=qi.mul(u.r.max(u.g).max(u.b).oneMinus());r.indirectSpecular.addAssign(t.mul(s)),r.indirectSpecular.addAssign(a.mul(o)),r.indirectDiffuse.addAssign(c.mul(o))}ambientOcclusion(e){const{ambientOcclusion:t,reflectedLight:n}=e.context,s=Dr.dot(ar).clamp().add(t),a=ru.mul(-16).oneMinus().negate().exp2(),o=t.sub(s.pow(a).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(t),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(t),n.indirectDiffuse.mulAssign(t),n.indirectSpecular.mulAssign(o)}finish({context:e}){const{outgoingLight:t}=e;if(this.clearcoat===!0){const n=pd.dot(ar).clamp(),r=lA({dotVH:n,f0:Qg,f90:Yg}),s=t.mul(J8.mul(r).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(J8));t.assign(s)}if(this.sheen===!0){const n=th.r.max(th.g).max(th.b).mul(.157).oneMinus(),r=t.mul(n).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(r)}}}const cR=de(1),iy=de(-2),l6=de(.8),Kg=de(-1),u6=de(.4),Zg=de(2),c6=de(.305),Jg=de(3),hR=de(.21),zie=de(4),fR=de(4),Gie=de(16),Vie=De(([i])=>{const e=Te(Yi(i)).toVar(),t=de(-1).toVar();return On(e.x.greaterThan(e.z),()=>{On(e.x.greaterThan(e.y),()=>{t.assign(Fs(i.x.greaterThan(0),0,3))}).Else(()=>{t.assign(Fs(i.y.greaterThan(0),1,4))})}).Else(()=>{On(e.z.greaterThan(e.y),()=>{t.assign(Fs(i.z.greaterThan(0),2,5))}).Else(()=>{t.assign(Fs(i.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),Hie=De(([i,e])=>{const t=At().toVar();return On(e.equal(0),()=>{t.assign(At(i.z,i.y).div(Yi(i.x)))}).ElseIf(e.equal(1),()=>{t.assign(At(i.x.negate(),i.z.negate()).div(Yi(i.y)))}).ElseIf(e.equal(2),()=>{t.assign(At(i.x.negate(),i.y).div(Yi(i.z)))}).ElseIf(e.equal(3),()=>{t.assign(At(i.z.negate(),i.y).div(Yi(i.x)))}).ElseIf(e.equal(4),()=>{t.assign(At(i.x.negate(),i.z).div(Yi(i.y)))}).Else(()=>{t.assign(At(i.x,i.y).div(Yi(i.z)))}),Dn(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),jie=De(([i])=>{const e=de(0).toVar();return On(i.greaterThanEqual(l6),()=>{e.assign(cR.sub(i).mul(Kg.sub(iy)).div(cR.sub(l6)).add(iy))}).ElseIf(i.greaterThanEqual(u6),()=>{e.assign(l6.sub(i).mul(Zg.sub(Kg)).div(l6.sub(u6)).add(Kg))}).ElseIf(i.greaterThanEqual(c6),()=>{e.assign(u6.sub(i).mul(Jg.sub(Zg)).div(u6.sub(c6)).add(Zg))}).ElseIf(i.greaterThanEqual(hR),()=>{e.assign(c6.sub(i).mul(zie.sub(Jg)).div(c6.sub(hR)).add(Jg))}).Else(()=>{e.assign(de(-2).mul(du(Dn(1.16,i))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),EO=De(([i,e])=>{const t=i.toVar();t.assign(Dn(2,t).sub(1));const n=Te(t,1).toVar();return On(e.equal(0),()=>{n.assign(n.zyx)}).ElseIf(e.equal(1),()=>{n.assign(n.xzy),n.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{n.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{n.assign(n.zyx),n.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{n.assign(n.xzy),n.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{n.z.mulAssign(-1)}),n}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),MO=De(([i,e,t,n,r,s])=>{const a=de(t),o=Te(e),u=_u(jie(a),iy,s),c=Bc(u),p=Au(u),g=Te(ry(i,o,p,n,r,s)).toVar();return On(c.notEqual(0),()=>{const y=Te(ry(i,o,p.add(1),n,r,s)).toVar();g.assign(Si(g,y,c))}),g}),ry=De(([i,e,t,n,r,s])=>{const a=de(t).toVar(),o=Te(e),u=de(Vie(o)).toVar(),c=de(Br(fR.sub(a),0)).toVar();a.assign(Br(a,fR));const p=de(aA(a)).toVar(),g=At(Hie(o,u).mul(p.sub(2)).add(1)).toVar();return On(u.greaterThan(2),()=>{g.y.addAssign(p),u.subAssign(3)}),g.x.addAssign(u.mul(p)),g.x.addAssign(c.mul(Dn(3,Gie))),g.y.addAssign(Dn(4,aA(s).sub(p))),g.x.mulAssign(n),g.y.mulAssign(r),i.sample(g).grad(At(),At())}),e_=De(({envMap:i,mipInt:e,outputDirection:t,theta:n,axis:r,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:o})=>{const u=pc(n),c=t.mul(u).add(r.cross(t).mul(go(n))).add(r.mul(r.dot(t).mul(u.oneMinus())));return ry(i,c,e,s,a,o)}),RO=De(({n:i,latitudinal:e,poleAxis:t,outputDirection:n,weights:r,samples:s,dTheta:a,mipInt:o,envMap:u,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:p,CUBEUV_MAX_MIP:g})=>{const y=Te(Fs(e,t,V5(t,n))).toVar();On(y.equal(Te(0)),()=>{y.assign(Te(n.z,0,n.x.negate()))}),y.assign(Dc(y));const q=Te().toVar();return q.addAssign(r.element(0).mul(e_({theta:0,axis:y,outputDirection:n,mipInt:o,envMap:u,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:p,CUBEUV_MAX_MIP:g}))),Ti({start:ve(1),end:i},({i:S})=>{On(S.greaterThanEqual(s),()=>{sO()});const R=de(a.mul(de(S))).toVar();q.addAssign(r.element(S).mul(e_({theta:R.mul(-1),axis:y,outputDirection:n,mipInt:o,envMap:u,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:p,CUBEUV_MAX_MIP:g}))),q.addAssign(r.element(S).mul(e_({theta:R,axis:y,outputDirection:n,mipInt:o,envMap:u,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:p,CUBEUV_MAX_MIP:g})))}),Jt(q,1)}),md=4,dR=[.125,.215,.35,.446,.526,.582],$0=20,t_=new O3(-1,1,1,-1,0,1),Wie=new bs(90,1),AR=new Xt;let n_=null,i_=0,r_=0;const V0=(1+Math.sqrt(5))/2,If=1/V0,pR=[new le(-V0,If,0),new le(V0,If,0),new le(-If,0,V0),new le(If,0,V0),new le(0,V0,-If),new le(0,V0,If),new le(-1,1,-1),new le(1,1,-1),new le(-1,1,1),new le(1,1,1)],$ie=new le,CO=new WeakMap,Xie=[3,1,5,0,4,2],s_=EO(hr(),yu("faceIndex")).normalize(),Nq=Te(s_.x,s_.y,s_.z);class Qie{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,t=0,n=.1,r=100,s={}){const{size:a=256,position:o=$ie,renderTarget:u=null}=s;if(this._setSize(a),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const p=u||this._allocateTargets();return s.renderTarget=p,this.fromSceneAsync(e,t,n,r,s),p}n_=this._renderer.getRenderTarget(),i_=this._renderer.getActiveCubeFace(),r_=this._renderer.getActiveMipmapLevel();const c=u||this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,n,r,c,o),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}async fromSceneAsync(e,t=0,n=.1,r=100,s={}){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,t,n,r,s)}fromEquirectangular(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTargets();return this.fromEquirectangularAsync(e,n),n}return this._fromTexture(e,t)}async fromEquirectangularAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}fromCubemap(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTargets();return this.fromCubemapAsync(e,t),n}return this._fromTexture(e,t)}async fromCubemapAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=gR(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_R(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===Yo||e.mapping===Ko?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(n_,i_,r_),e.scissorTest=!1,h6(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSizeFromTexture(e),n_=this._renderer.getRenderTarget(),i_=this._renderer.getActiveCubeFace(),r_=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:rs,minFilter:rs,generateMipmaps:!1,type:Ss,format:Or,colorSpace:Pl},r=mR(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mR(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=Yie(s)),this._blurMaterial=Kie(s,e,t)}return r}async _compileMaterial(e){const t=new yi(this._lodPlanes[0],e);await this._renderer.compile(t,t_)}_sceneToCubeUV(e,t,n,r,s){const a=Wie;a.near=t,a.far=n;const o=[1,1,1,1,-1,1],u=[1,-1,1,-1,1,-1],c=this._renderer,p=c.autoClear;c.getClearColor(AR),c.autoClear=!1;let g=this._backgroundBox;if(g===null){const S=new jo({name:"PMREM.Background",side:Oi,depthWrite:!1,depthTest:!1});g=new yi(new J1,S)}let y=!1;const q=e.background;q?q.isColor&&(g.material.color.copy(q),e.background=null,y=!0):(g.material.color.copy(AR),y=!0),c.setRenderTarget(r),c.clear(),y&&c.render(g,a);for(let S=0;S<6;S++){const R=S%3;R===0?(a.up.set(0,o[S],0),a.position.set(s.x,s.y,s.z),a.lookAt(s.x+u[S],s.y,s.z)):R===1?(a.up.set(0,0,o[S]),a.position.set(s.x,s.y,s.z),a.lookAt(s.x,s.y+u[S],s.z)):(a.up.set(0,o[S],0),a.position.set(s.x,s.y,s.z),a.lookAt(s.x,s.y,s.z+u[S]));const M=this._cubeSize;h6(r,R*M,S>2?M:0,M,M),c.render(e,a)}c.autoClear=p,e.background=q}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Yo||e.mapping===Ko;r?this._cubemapMaterial===null&&(this._cubemapMaterial=gR(e)):this._equirectMaterial===null&&(this._equirectMaterial=_R(e));const s=r?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const a=this._lodMeshes[0];a.material=s;const o=this._cubeSize;h6(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,t_)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=pR[(r-s-1)%pR.length];this._blur(e,s-1,s,a,o)}t.autoClear=n}_blur(e,t,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,o){const u=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,g=this._lodMeshes[r];g.material=c;const y=CO.get(c),q=this._sizeLods[n]-1,S=isFinite(s)?Math.PI/(2*q):2*Math.PI/(2*$0-1),R=s/S,M=isFinite(s)?1+Math.floor(p*R):$0;M>$0&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${$0}`);const E=[];let U=0;for(let z=0;z<$0;++z){const j=z/R,k=Math.exp(-j*j/2);E.push(k),z===0?U+=k:z<M&&(U+=2*k)}for(let z=0;z<E.length;z++)E[z]=E[z]/U;e.texture.frame=(e.texture.frame||0)+1,y.envMap.value=e.texture,y.samples.value=M,y.weights.array=E,y.latitudinal.value=a==="latitudinal"?1:0,o&&(y.poleAxis.value=o);const{_lodMax:P}=this;y.dTheta.value=S,y.mipInt.value=P-n;const O=this._sizeLods[r],F=3*O*(r>P-md?r-P+md:0),I=4*(this._cubeSize-O);h6(t,F,I,3*O,2*O),u.setRenderTarget(t),u.render(g,t_)}}function Yie(i){const e=[],t=[],n=[],r=[];let s=i;const a=i-md+1+dR.length;for(let o=0;o<a;o++){const u=Math.pow(2,s);t.push(u);let c=1/u;o>i-md?c=dR[o-i+md-1]:o===0&&(c=0),n.push(c);const p=1/(u-2),g=-p,y=1+p,q=[g,g,y,g,y,y,g,g,y,y,g,y],S=6,R=6,M=3,E=2,U=1,P=new Float32Array(M*R*S),O=new Float32Array(E*R*S),F=new Float32Array(U*R*S);for(let z=0;z<S;z++){const j=z%3*2/3-1,k=z>2?0:-1,G=[j,k,0,j+2/3,k,0,j+2/3,k+1,0,j,k,0,j+2/3,k+1,0,j,k+1,0],$=Xie[z];P.set(G,M*R*$),O.set(q,E*R*$);const te=[$,$,$,$,$,$];F.set(te,U*R*$)}const I=new Ii;I.setAttribute("position",new _r(P,M)),I.setAttribute("uv",new _r(O,E)),I.setAttribute("faceIndex",new _r(F,U)),e.push(I),r.push(new yi(I,null)),s>md&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n,lodMeshes:r}}function mR(i,e,t){const n=new Lc(i,e,t);return n.texture.mapping=dh,n.texture.name="PMREM.cubeUv",n.texture.isPMREMTexture=!0,n.scissorTest=!0,n}function h6(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function Pq(i){const e=new Hr;return e.depthTest=!1,e.depthWrite=!1,e.blending=Fa,e.name=`PMREM_${i}`,e}function Kie(i,e,t){const n=El(new Array($0).fill(0)),r=Zt(new le(0,1,0)),s=Zt(0),a=de($0),o=Zt(0),u=Zt(1),c=Zn(null),p=Zt(0),g=de(1/e),y=de(1/t),q=de(i),S={n:a,latitudinal:o,weights:n,poleAxis:r,outputDirection:Nq,dTheta:s,samples:u,envMap:c,mipInt:p,CUBEUV_TEXEL_WIDTH:g,CUBEUV_TEXEL_HEIGHT:y,CUBEUV_MAX_MIP:q},R=Pq("blur");return R.fragmentNode=RO({...S,latitudinal:o.equal(1)}),CO.set(R,S),R}function gR(i){const e=Pq("cubemap");return e.fragmentNode=oA(i,Nq),e}function _R(i){const e=Pq("equirect");return e.fragmentNode=Zn(i,Eq(Nq),0),e}const vR=new WeakMap;function Zie(i){const e=Math.log2(i)-2,t=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:t,maxMip:e}}function Jie(i,e,t){const n=ere(e);let r=n.get(i);if((r!==void 0?r.pmremVersion:-1)!==i.pmremVersion){const a=i.image;if(i.isCubeTexture)if(nre(a))r=t.fromCubemap(i,r);else return null;else if(ire(a))r=t.fromEquirectangular(i,r);else return null;r.pmremVersion=i.pmremVersion,n.set(i,r)}return r.texture}function ere(i){let e=vR.get(i);return e===void 0&&(e=new WeakMap,vR.set(i,e)),e}class tre extends wr{static get type(){return"PMREMNode"}constructor(e,t=null,n=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=n,this._generator=null;const r=new ss;r.isRenderTargetTexture=!0,this._texture=Zn(r),this._width=Zt(0),this._height=Zt(0),this._maxMip=Zt(0),this.updateBeforeType=Pn.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=Zie(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(e){let t=this._pmrem;const n=t?t.pmremVersion:-1,r=this._value;n!==r.pmremVersion&&(r.isPMREMTexture===!0?t=r:t=Jie(r,e.renderer,this._generator),t!==null&&(this._pmrem=t,this.updateFromTexture(t)))}setup(e){this._generator===null&&(this._generator=new Qie(e.renderer)),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this)),t=gq.mul(Te(t.x,t.y.negate(),t.z));let n=this.levelNode;return n===null&&e.context.getTextureLevel&&(n=e.context.getTextureLevel(this)),MO(this._texture,t,n,this._width,this._height,this._maxMip)}dispose(){super.dispose(),this._generator!==null&&this._generator.dispose()}}function nre(i){if(i==null)return!1;let e=0;const t=6;for(let n=0;n<t;n++)i[n]!==void 0&&e++;return e===t}function ire(i){return i==null?!1:i.height>0}const Dq=tt(tre).setParameterLength(1,3),yR=new WeakMap;class rre extends bA{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let n=this.envNode;if(n.isTextureNode||n.isMaterialReferenceNode){const g=n.isTextureNode?n.value:t[n.property];let y=yR.get(g);y===void 0&&(y=Dq(g),yR.set(g,y)),n=y}const s=t.useAnisotropy===!0||t.anisotropy>0?vU:Dr,a=n.context(xR(ru,s)).mul(r8),o=n.context(sre(X5)).mul(Math.PI).mul(r8),u=Ep(a),c=Ep(o);e.context.radiance.addAssign(u),e.context.iblIrradiance.addAssign(c);const p=e.context.lightingModel.clearcoatRadiance;if(p){const g=n.context(xR(v3,pd)).mul(r8),y=Ep(g);p.addAssign(y)}}}const xR=(i,e)=>{let t=null;return{getUV:()=>(t===null&&(t=ar.negate().reflect(e),t=i.mul(i).mix(t,e).normalize(),t=t.transformDirection($a)),t),getTextureLevel:()=>i}},sre=i=>({getUV:()=>i,getTextureLevel:()=>de(1)}),are=new PN;class NO extends Hr{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(are),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new rre(t):null}setupLightingModel(){return new wO}setupSpecular(){const e=Si(Te(.04),qi.rgb,_3);Ea.assign(e),y3.assign(1)}setupVariants(){const e=this.metalnessNode?de(this.metalnessNode):MU;_3.assign(e);let t=this.roughnessNode?de(this.roughnessNode):EU;t=Rq({roughness:t}),ru.assign(t),this.setupSpecular(),qi.assign(Jt(qi.rgb.mul(e.oneMinus()),qi.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const ore=new UG;class lre extends NO{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(ore),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?de(this.iorNode):GU;wp.assign(e),Ea.assign(Si(Ha(oq(wp.sub(1).div(wp.add(1))).mul(wU),Te(1)).mul(Jv),qi.rgb,_3)),y3.assign(Si(Jv,1,_3))}setupLightingModel(){return new wO(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?de(this.clearcoatNode):CU,n=this.clearcoatRoughnessNode?de(this.clearcoatRoughnessNode):NU;J8.assign(t),v3.assign(Rq({roughness:n}))}if(this.useSheen){const t=this.sheenNode?Te(this.sheenNode):LU,n=this.sheenRoughnessNode?de(this.sheenRoughnessNode):UU;th.assign(t),I5.assign(n)}if(this.useIridescence){const t=this.iridescenceNode?de(this.iridescenceNode):BU,n=this.iridescenceIORNode?de(this.iridescenceIORNode):IU,r=this.iridescenceThicknessNode?de(this.iridescenceThicknessNode):FU;F5.assign(t),$x.assign(n),Xx.assign(r)}if(this.useAnisotropy){const t=(this.anisotropyNode?At(this.anisotropyNode):OU).toVar();C1.assign(t.length()),On(C1.equal(0),()=>{t.assign(At(1,0))}).Else(()=>{t.divAssign(At(C1)),C1.assign(C1.saturate())}),e5.assign(C1.pow2().mix(ru.pow2(),1)),Tp.assign(nh[0].mul(t.x).add(nh[1].mul(t.y))),ch.assign(nh[1].mul(t.x).sub(nh[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?de(this.transmissionNode):kU,n=this.thicknessNode?de(this.thicknessNode):zU,r=this.attenuationDistanceNode?de(this.attenuationDistanceNode):VU,s=this.attenuationColorNode?Te(this.attenuationColorNode):HU;if(n5.assign(t),Qx.assign(n),Yx.assign(r),Kx.assign(s),this.useDispersion){const a=this.dispersionNode?de(this.dispersionNode):YU;Zx.assign(a)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?Te(this.clearcoatNormalNode):PU}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const ure=De(({normal:i,lightDirection:e,builder:t})=>{const n=i.dot(e),r=At(n.mul(.5).add(.5),0);if(t.material.gradientMap){const s=_c("gradientMap","texture").context({getUV:()=>r});return Te(s.r)}else{const s=r.fwidth().mul(.5);return Si(Te(.7),Te(1),vu(de(.7).sub(s.x),de(.7).add(s.x),r.x))}});class cre extends Z5{direct({lightDirection:e,lightColor:t,reflectedLight:n},r){const s=ure({normal:W5,lightDirection:e,builder:r}).mul(t);n.directDiffuse.addAssign(s.mul(qh({diffuseColor:qi.rgb})))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:r}=e.context;r.indirectDiffuse.addAssign(n.mul(qh({diffuseColor:qi}))),r.indirectDiffuse.mulAssign(t)}}const hre=new OG;class fre extends Hr{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(hre),this.setValues(e)}setupLightingModel(){return new cre}}class dre extends wr{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=Te(ar.z,0,ar.x.negate()).normalize(),t=ar.cross(e);return At(e.dot(Dr),t.dot(Dr)).mul(.495).add(.5)}}const PO=Mt(dre),Are=new kG;class pre extends Hr{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(Are),this.setValues(e)}setupVariants(e){const t=PO;let n;e.material.matcap?n=_c("matcap","texture").context({getUV:()=>t}):n=Te(Si(.2,.8,t.y)),qi.rgb.mulAssign(n.rgb)}}class mre extends wr{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:n}=this;if(this.getNodeType(e)==="vec2"){const s=t.cos(),a=t.sin();return O5(s,a,a.negate(),s).mul(n)}else{const s=t,a=uh(Jt(1,0,0,0),Jt(0,pc(s.x),go(s.x).negate(),0),Jt(0,go(s.x),pc(s.x),0),Jt(0,0,0,1)),o=uh(Jt(pc(s.y),0,go(s.y),0),Jt(0,1,0,0),Jt(go(s.y).negate(),0,pc(s.y),0),Jt(0,0,0,1)),u=uh(Jt(pc(s.z),go(s.z).negate(),0,0),Jt(go(s.z),pc(s.z),0,0),Jt(0,0,1,0),Jt(0,0,0,1));return a.mul(o).mul(u).mul(Jt(n,1)).xyz}}}const e9=tt(mre).setParameterLength(2),gre=new Kz;class DO extends Hr{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.transparent=!0,this.setDefaultValues(gre),this.setValues(e)}setupPositionView(e){const{object:t,camera:n}=e,r=this.sizeAttenuation,{positionNode:s,rotationNode:a,scaleNode:o}=this,u=Eh.mul(Te(s||0));let c=At(Wo[0].xyz.length(),Wo[1].xyz.length());if(o!==null&&(c=c.mul(At(o))),r===!1)if(n.isPerspectiveCamera)c=c.mul(u.z.negate());else{const q=de(2).div(wh.element(1).element(1));c=c.mul(q.mul(2))}let p=$3.xy;if(t.center&&t.center.isVector2===!0){const q=wte("center","vec2",t);p=p.sub(q.sub(.5))}p=p.mul(c);const g=de(a||DU),y=e9(p,g);return Jt(u.xy.add(y),u.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}const _re=new hx;class vre extends DO{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(_re),this.setValues(e)}setupPositionView(){const{positionNode:e}=this;return Eh.mul(Te(e||Lr)).xyz}setupVertex(e){const t=super.setupVertex(e);if(e.material.isNodeMaterial!==!0)return t;const{rotationNode:n,scaleNode:r,sizeNode:s}=this,a=$3.xy.toVar(),o=wd.z.div(wd.w);if(n&&n.isNode){const c=de(n);a.assign(e9(a,c))}let u=s!==null?At(s):QU;return this.sizeAttenuation===!0&&(u=u.mul(u.div(zr.z.negate()))),r&&r.isNode&&(u=u.mul(At(r))),a.mulAssign(u.mul(2)),a.assign(a.div(wd.z)),a.y.assign(a.y.mul(o)),a.assign(a.mul(t.w)),t.addAssign(Jt(a,0,0)),t}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}class yre extends Z5{constructor(){super(),this.shadowNode=de(1).toVar("shadowMask")}direct({lightNode:e}){this.shadowNode.mulAssign(e.shadowNode)}finish({context:e}){qi.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(qi.rgb)}}const xre=new LG;class qre extends Hr{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.transparent=!0,this.setDefaultValues(xre),this.setValues(e)}setupLightingModel(){return new yre}}qA("vec3");qA("vec3");qA("vec3");class bre{constructor(e,t){this.nodes=e,this.info=t,this._context=self,this._animationLoop=null,this._requestId=null}start(){const e=(t,n)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(t,n)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class bu{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let n=this.weakMap;for(let r=0;r<e.length-1;r++){const s=e[r];n.has(s)===!1&&n.set(s,new WeakMap),n=n.get(s)}return n.set(e[e.length-1],t),this}delete(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return!1;return t.delete(e[e.length-1])}}let Sre=0;function Tre(i){const e=Object.keys(i);let t=Object.getPrototypeOf(i);for(;t;){const n=Object.getOwnPropertyDescriptors(t);for(const r in n)if(n[r]!==void 0){const s=n[r];s&&typeof s.get=="function"&&e.push(r)}t=Object.getPrototypeOf(t)}return e}class wre{constructor(e,t,n,r,s,a,o,u,c,p){this.id=Sre++,this._nodes=e,this._geometries=t,this.renderer=n,this.object=r,this.material=s,this.scene=a,this.camera=o,this.lightsNode=u,this.context=c,this.geometry=r.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=p,this.clippingContextCacheKey=p!==null?p.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(const t of this.getBindings())if(t.name===e)return t}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,n=[],r=new Set;for(const s of e){const a=s.node&&s.node.attribute?s.node.attribute:t.getAttribute(s.name);if(a===void 0)continue;n.push(a);const o=a.isInterleavedBufferAttribute?a.data:a;r.add(o)}return this.attributes=n,this.vertexBuffers=Array.from(r.values()),n}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:n,group:r,drawRange:s}=this,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),o=this.getIndex(),u=o!==null,c=n.isInstancedBufferGeometry?n.instanceCount:e.count>1?e.count:1;if(c===0)return null;if(a.instanceCount=c,e.isBatchedMesh===!0)return a;let p=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(p=2);let g=s.start*p,y=(s.start+s.count)*p;r!==null&&(g=Math.max(g,r.start*p),y=Math.min(y,(r.start+r.count)*p));const q=n.attributes.position;let S=1/0;u?S=o.count:q!=null&&(S=q.count),g=Math.max(g,0),y=Math.min(y,S);const R=y-g;return R<0||R===1/0?null:(a.vertexCount=R,a.firstVertex=g,a)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const n of Object.keys(e.attributes).sort()){const r=e.attributes[n];t+=n+",",r.data&&(t+=r.data.stride+","),r.offset&&(t+=r.offset+","),r.itemSize&&(t+=r.itemSize+","),r.normalized&&(t+="n,")}for(const n of Object.keys(e.morphAttributes).sort()){const r=e.morphAttributes[n];t+="morph-"+n+",";for(let s=0,a=r.length;s<a;s++){const o=r[s];t+=o.id+","}}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t}=this;let n=t.customProgramCacheKey();for(const r of Tre(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(r))continue;const s=t[r];let a;if(s!==null){const o=typeof s;o==="number"?a=s!==0?"1":"0":o==="object"?(a="{",s.isTexture&&(a+=s.mapping),a+="}"):a=String(s)}else a=String(s);n+=a+","}return n+=this.clippingContextCacheKey+",",e.geometry&&(n+=this.getGeometryCacheKey()),e.skeleton&&(n+=e.skeleton.bones.length+","),e.isBatchedMesh&&(n+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(n+=e._colorsTexture.uuid+",")),e.count>1&&(n+=e.uuid+","),n+=e.receiveShadow+",",hD(n)}get needsGeometryUpdate(){return this.geometry.id!==this.object.geometry.id}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return this.material.isShadowPassMaterial!==!0&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=A3(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=A3(e,1)),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const P0=[];class Ere{constructor(e,t,n,r,s,a){this.renderer=e,this.nodes=t,this.geometries=n,this.pipelines=r,this.bindings=s,this.info=a,this.chainMaps={}}get(e,t,n,r,s,a,o,u){const c=this.getChainMap(u);P0[0]=e,P0[1]=t,P0[2]=a,P0[3]=s;let p=c.get(P0);return p===void 0?(p=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,n,r,s,a,o,u),c.set(P0,p)):(p.updateClipping(o),p.needsGeometryUpdate&&p.setGeometry(e.geometry),(p.version!==t.version||p.needsUpdate)&&(p.initialCacheKey!==p.getCacheKey()?(p.dispose(),p=this.get(e,t,n,r,s,a,o,u)):p.version=t.version)),P0.length=0,p}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new bu)}dispose(){this.chainMaps={}}createRenderObject(e,t,n,r,s,a,o,u,c,p,g){const y=this.getChainMap(g),q=new wre(e,t,n,r,s,a,o,u,c,p);return q.onDispose=()=>{this.pipelines.delete(q),this.bindings.delete(q),this.nodes.delete(q),y.delete(q.getChainArray())},q}}class t0{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t=null;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const $o={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},U1=16,Mre=211,Rre=212;class Cre extends t0{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==null&&this.backend.destroyAttribute(e),t}update(e,t){const n=this.get(e);if(n.version===void 0)t===$o.VERTEX?this.backend.createAttribute(e):t===$o.INDEX?this.backend.createIndexAttribute(e):t===$o.STORAGE?this.backend.createStorageAttribute(e):t===$o.INDIRECT&&this.backend.createIndirectStorageAttribute(e),n.version=this._getBufferAttribute(e).version;else{const r=this._getBufferAttribute(e);(n.version<r.version||r.usage===ld)&&(this.backend.updateAttribute(e),n.version=r.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function LO(i){return i.index!==null?i.index.version:i.attributes.position.version}function qR(i){const e=[],t=i.index,n=i.attributes.position;if(t!==null){const s=t.array;for(let a=0,o=s.length;a<o;a+=3){const u=s[a+0],c=s[a+1],p=s[a+2];e.push(u,c,c,p,p,u)}}else{const s=n.array;for(let a=0,o=s.length/3-1;a<o;a+=3){const u=a+0,c=a+1,p=a+2;e.push(u,c,c,p,p,u)}}const r=new(rx(e)?ux:lx)(e,1);return r.version=LO(i),r}class Nre extends t0{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,n=this.get(t);n.initialized=!0,this.info.memory.geometries++;const r=()=>{this.info.memory.geometries--;const s=t.index,a=e.getAttributes();s!==null&&this.attributes.delete(s);for(const u of a)this.attributes.delete(u);const o=this.wireframes.get(t);o!==void 0&&this.attributes.delete(o),t.removeEventListener("dispose",r)};t.addEventListener("dispose",r)}updateAttributes(e){const t=e.getAttributes();for(const s of t)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,$o.STORAGE):this.updateAttribute(s,$o.VERTEX);const n=this.getIndex(e);n!==null&&this.updateAttribute(n,$o.INDEX);const r=e.geometry.indirect;r!==null&&this.updateAttribute(r,$o.INDIRECT)}updateAttribute(e,t){const n=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,n)):this.attributeCall.get(e.data)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e.data,n),this.attributeCall.set(e,n)):this.attributeCall.get(e)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e,n))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:t,material:n}=e;let r=t.index;if(n.wireframe===!0){const s=this.wireframes;let a=s.get(t);a===void 0?(a=qR(t),s.set(t,a)):a.version!==LO(t)&&(this.attributes.delete(a),a=qR(t),s.set(t,a)),r=a}return r}}class Pre{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,t,n){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=n*(t/3):e.isPoints?this.render.points+=n*t:e.isLineSegments?this.render.lines+=n*(t/2):e.isLine?this.render.lines+=n*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class UO{constructor(e){this.cacheKey=e,this.usedTimes=0}}class Dre extends UO{constructor(e,t,n){super(e),this.vertexProgram=t,this.fragmentProgram=n}}class Lre extends UO{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let Ure=0;class a_{constructor(e,t,n,r=null,s=null){this.id=Ure++,this.code=e,this.stage=t,this.name=n,this.transforms=r,this.attributes=s,this.usedTimes=0}}class Ore extends t0{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:n}=this,r=this.get(e);if(this._needsComputeUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const a=this.nodes.getForCompute(e);let o=this.programs.compute.get(a.computeShader);o===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),o=new a_(a.computeShader,"compute",e.name,a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,o),n.createProgram(o));const u=this._getComputeCacheKey(e,o);let c=this.caches.get(u);c===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),c=this._getComputePipeline(e,o,u,t)),c.usedTimes++,o.usedTimes++,r.version=e.version,r.pipeline=c}return r.pipeline}getForRender(e,t=null){const{backend:n}=this,r=this.get(e);if(this._needsRenderUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const a=e.getNodeBuilderState(),o=e.material?e.material.name:"";let u=this.programs.vertex.get(a.vertexShader);u===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),u=new a_(a.vertexShader,"vertex",o),this.programs.vertex.set(a.vertexShader,u),n.createProgram(u));let c=this.programs.fragment.get(a.fragmentShader);c===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),c=new a_(a.fragmentShader,"fragment",o),this.programs.fragment.set(a.fragmentShader,c),n.createProgram(c));const p=this._getRenderCacheKey(e,u,c);let g=this.caches.get(p);g===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),g=this._getRenderPipeline(e,u,c,p,t)):e.pipeline=g,g.usedTimes++,u.usedTimes++,c.usedTimes++,r.pipeline=g}return r.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,n,r){n=n||this._getComputeCacheKey(e,t);let s=this.caches.get(n);return s===void 0&&(s=new Lre(n,t),this.caches.set(n,s),this.backend.createComputePipeline(s,r)),s}_getRenderPipeline(e,t,n,r,s){r=r||this._getRenderCacheKey(e,t,n);let a=this.caches.get(r);return a===void 0&&(a=new Dre(r,t,n),this.caches.set(r,a),e.pipeline=a,this.backend.createRenderPipeline(e,s)),a}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,n){return t.id+","+n.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,n=e.stage;this.programs[n].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class Bre extends t0{constructor(e,t,n,r,s,a){super(),this.backend=e,this.textures=n,this.pipelines=s,this.attributes=r,this.nodes=t,this.info=a,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),r.bindGroup=n)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),r.bindGroup=n)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const n=t.attribute,r=n.isIndirectStorageBufferAttribute?$o.INDIRECT:$o.STORAGE;this.attributes.update(n,r)}}_update(e,t){const{backend:n}=this;let r=!1,s=!0,a=0,o=0;for(const u of e.bindings)if(!(u.isNodeUniformsGroup&&this.nodes.updateGroup(u)===!1)){if(u.isStorageBuffer){const c=u.attribute,p=c.isIndirectStorageBufferAttribute?$o.INDIRECT:$o.STORAGE;this.attributes.update(c,p)}if(u.isUniformBuffer)u.update()&&n.updateBinding(u);else if(u.isSampler)u.update();else if(u.isSampledTexture){const c=this.textures.get(u.texture);u.needsBindingsUpdate(c.generation)&&(r=!0);const p=u.update(),g=u.texture;p&&this.textures.updateTexture(g);const y=n.get(g);if(y.externalTexture!==void 0||c.isDefaultTexture?s=!1:(a=a*10+g.id,o+=g.version),n.isWebGPUBackend===!0&&y.texture===void 0&&y.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",u,p,g,u.textureNode.value,r),this.textures.updateTexture(g),r=!0),g.isStorageTexture===!0){const q=this.get(g);u.store===!0?q.needsMipmap=!0:this.textures.needsMipmaps(g)&&q.needsMipmap===!0&&(this.backend.generateMipmaps(g),q.needsMipmap=!1)}}}r===!0&&this.backend.updateBindings(e,t,s?a:0,o)}}function Ire(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function bR(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function SR(i){return(i.transmission>0||i.transmissionNode)&&i.side===Qr&&i.forceSinglePass===!1}class Fre{constructor(e,t,n){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(t,n),this.lightsArray=[],this.scene=t,this.camera=n,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,n,r,s,a,o){let u=this.renderItems[this.renderItemsIndex];return u===void 0?(u={id:e.id,object:e,geometry:t,material:n,groupOrder:r,renderOrder:e.renderOrder,z:s,group:a,clippingContext:o},this.renderItems[this.renderItemsIndex]=u):(u.id=e.id,u.object=e,u.geometry=t,u.material=n,u.groupOrder=r,u.renderOrder=e.renderOrder,u.z=s,u.group=a,u.clippingContext=o),this.renderItemsIndex++,u}push(e,t,n,r,s,a,o){const u=this.getNextRenderItem(e,t,n,r,s,a,o);e.occlusionTest===!0&&this.occlusionQueryCount++,n.transparent===!0||n.transmission>0?(SR(n)&&this.transparentDoublePass.push(u),this.transparent.push(u)):this.opaque.push(u)}unshift(e,t,n,r,s,a,o){const u=this.getNextRenderItem(e,t,n,r,s,a,o);n.transparent===!0||n.transmission>0?(SR(n)&&this.transparentDoublePass.unshift(u),this.transparent.unshift(u)):this.opaque.unshift(u)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||Ire),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(t||bR),this.transparent.length>1&&this.transparent.sort(t||bR)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const n=this.renderItems[e];if(n.id===null)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.groupOrder=null,n.renderOrder=null,n.z=null,n.group=null,n.clippingContext=null}}}const j2=[];class kre{constructor(e){this.lighting=e,this.lists=new bu}get(e,t){const n=this.lists;j2[0]=e,j2[1]=t;let r=n.get(j2);return r===void 0&&(r=new Fre(this.lighting,e,t),n.set(j2,r)),j2.length=0,r}dispose(){this.lists=new bu}}let zre=0;class Gre{constructor(){this.id=zre++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new sn,this.scissor=!1,this.scissorValue=new sn,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return OO(this)}}function OO(i){const{textures:e,activeCubeFace:t}=i,n=[t];for(const r of e)n.push(r.id);return D5(n)}const W2=[],Vre=new b5,Hre=new P3;class jre{constructor(){this.chainMaps={}}get(e,t,n=null){W2[0]=e,W2[1]=t;let r;if(n===null)r="default";else{const o=n.texture.format;r=`${n.textures.length}:${o}:${n.samples}:${n.depthBuffer}:${n.stencilBuffer}`}const s=this._getChainMap(r);let a=s.get(W2);return a===void 0&&(a=new Gre,s.set(W2,a)),W2.length=0,n!==null&&(a.sampleCount=n.samples===0?1:n.samples),a}getForClear(e=null){return this.get(Vre,Hre,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new bu)}dispose(){this.chainMaps={}}}const Wre=new le;class $re extends t0{constructor(e,t,n){super(),this.renderer=e,this.backend=t,this.info=n}updateRenderTarget(e,t=0){const n=this.get(e),r=e.samples===0?1:e.samples,s=n.depthTextureMips||(n.depthTextureMips={}),a=e.textures,o=this.getSize(a[0]),u=o.width>>t,c=o.height>>t;let p=e.depthTexture||s[t];const g=e.depthBuffer===!0||e.stencilBuffer===!0;let y=!1;p===void 0&&g&&(p=new qo,p.format=e.stencilBuffer?xo:yo,p.type=e.stencilBuffer?vo:Qi,p.image.width=u,p.image.height=c,s[t]=p),(n.width!==o.width||o.height!==n.height)&&(y=!0,p&&(p.needsUpdate=!0,p.image.width=u,p.image.height=c)),n.width=o.width,n.height=o.height,n.textures=a,n.depthTexture=p||null,n.depth=e.depthBuffer,n.stencil=e.stencilBuffer,n.renderTarget=e,n.sampleCount!==r&&(y=!0,p&&(p.needsUpdate=!0),n.sampleCount=r);const q={sampleCount:r};if(e.isXRRenderTarget!==!0){for(let S=0;S<a.length;S++){const R=a[S];y&&(R.needsUpdate=!0),this.updateTexture(R,q)}p&&this.updateTexture(p,q)}if(n.initialized!==!0){n.initialized=!0;const S=()=>{e.removeEventListener("dispose",S);for(let R=0;R<a.length;R++)this._destroyTexture(a[R]);p&&this._destroyTexture(p),this.delete(e)};e.addEventListener("dispose",S)}}updateTexture(e,t={}){const n=this.get(e);if(n.initialized===!0&&n.version===e.version)return;const r=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(r&&n.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const c=this.renderer.getRenderTarget();c?e.type=c.texture.type:e.type=Ur}const{width:a,height:o,depth:u}=this.getSize(e);if(t.width=a,t.height=o,t.depth=u,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,a,o):1,r||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,t),n.generation=e.version;else if(n.initialized!==!0&&s.createSampler(e),e.version>0){const p=e.image;if(p===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(p.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const g=[];for(const y of e.images)g.push(y);t.images=g}else t.image=p;(n.isDefaultTexture===void 0||n.isDefaultTexture===!0)&&(s.createTexture(e,t),n.isDefaultTexture=!1,n.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,t),t.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),n.isDefaultTexture=!0,n.generation=e.version;if(n.initialized!==!0){n.initialized=!0,n.generation=e.version,this.info.memory.textures++;const c=()=>{e.removeEventListener("dispose",c),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",c)}n.version=e.version}getSize(e,t=Wre){let n=e.images?e.images[0]:e.image;return n?(n.image!==void 0&&(n=n.image),t.width=n.width||1,t.height=n.height||1,t.depth=e.isCubeTexture?6:n.depth||1):t.width=t.height=t.depth=1,t}getMipLevels(e,t,n){let r;return e.isCompressedTexture?e.mipmaps?r=e.mipmaps.length:r=1:r=Math.floor(Math.log2(Math.max(t,n)))+1,r}needsMipmaps(e){return this.isEnvironmentTexture(e)||e.isCompressedTexture===!0||e.generateMipmaps}isEnvironmentTexture(e){const t=e.mapping;return t===W1||t===$1||t===Yo||t===Ko}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}class Lq extends Xt{constructor(e,t,n,r=1){super(e,t,n),this.a=r}set(e,t,n,r=1){return this.a=r,super.set(e,t,n)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class BO extends wi{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}const Xre=(i,e)=>et(new BO(i,e));class Qre extends un{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}getMemberType(e,t){return this.outputNode?this.outputNode.getMemberType(e,t):"void"}add(e){return this.nodes.push(e),this}If(e,t){const n=new Sp(t);return this._currentCond=Fs(e,n),this.add(this._currentCond)}ElseIf(e,t){const n=new Sp(t),r=Fs(e,n);return this._currentCond.elseNode=r,this._currentCond=r,this}Else(e){return this._currentCond.elseNode=new Sp(e),this}build(e,...t){const n=Hx();m3(this);for(const r of this.nodes)r.build(e,"void");return m3(n),this.outputNode?this.outputNode.build(e,...t):super.build(e,...t)}else(...e){return console.warn("THREE.TSL: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("THREE.TSL: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const a8=tt(Qre).setParameterLength(0,1);function Yre(i){return Object.entries(i).map(([e,t])=>typeof t=="string"?{name:e,type:t,atomic:!1}:{name:e,type:t.type,atomic:t.atomic||!1})}class Kre extends un{static get type(){return"StructTypeNode"}constructor(e,t=null){super("struct"),this.membersLayout=Yre(e),this.name=t,this.isStructLayoutNode=!0}getLength(){let e=0;for(const t of this.membersLayout)e+=Fx(t.type);return e}getMemberType(e,t){const n=this.membersLayout.find(r=>r.name===t);return n?n.type:"void"}getNodeType(e){return e.getStructTypeFromNode(this,this.membersLayout,this.name).name}setup(e){e.addInclude(this)}generate(e){return this.getNodeType(e)}}class Zre extends un{static get type(){return"StructNode"}constructor(e,t){super("vec3"),this.structLayoutNode=e,this.values=t,this.isStructNode=!0}getNodeType(e){return this.structLayoutNode.getNodeType(e)}getMemberType(e,t){return this.structLayoutNode.getMemberType(e,t)}generate(e){const t=e.getVarFromNode(this),n=t.type,r=e.getPropertyName(t);return e.addLineFlowCode(`${r} = ${e.generateStruct(n,this.structLayoutNode.membersLayout,this.values)}`,this),t.name}}const Jre=(i,e=null)=>{const t=new Kre(i,e),n=(...r)=>{let s=null;if(r.length>0)if(r[0].isNode){s={};const a=Object.keys(i);for(let o=0;o<r.length;o++)s[a[o]]=r[o]}else s=r[0];return et(new Zre(t,s))};return n.layout=t,n.isStruct=!0,n};class IO extends un{static get type(){return"OutputStructNode"}constructor(...e){super(),this.members=e,this.isOutputStructNode=!0}getNodeType(e){const t=e.getNodeProperties(this);if(t.membersLayout===void 0){const n=this.members,r=[];for(let s=0;s<n.length;s++){const a="m"+s,o=n[s].getNodeType(e);r.push({name:a,type:o,index:s})}t.membersLayout=r,t.structType=e.getOutputStructTypeFromNode(this,t.membersLayout)}return t.structType.name}generate(e){const t=e.getOutputStructName(),n=this.members,r=t!==""?t+".":"";for(let s=0;s<n.length;s++){const a=n[s].build(e);e.addLineFlowCode(`${r}m${s} = ${a}`,this)}return t}}const ese=tt(IO);function FO(i,e){for(let t=0;t<i.length;t++)if(i[t].name===e)return t;return-1}class tse extends IO{static get type(){return"MRTNode"}constructor(e){super(),this.outputNodes=e,this.isMRTNode=!0}has(e){return this.outputNodes[e]!==void 0}get(e){return this.outputNodes[e]}merge(e){const t={...this.outputNodes,...e.outputNodes};return kO(t)}setup(e){const t=this.outputNodes,n=e.renderer.getRenderTarget(),r=[],s=n.textures;for(const a in t){const o=FO(s,a);r[o]=Jt(t[a])}return this.members=r,super.setup(e)}}const kO=tt(tse),nse=De(([i])=>{const e=i.toUint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).toFloat().mul(1/2**32)}),sy=(i,e)=>Nl(Dn(4,i.mul(hi(1,i))),e),ise=(i,e)=>i.lessThan(.5)?sy(i.mul(2),e).div(2):hi(1,sy(Dn(hi(1,i),2),e).div(2)),rse=(i,e,t)=>Nl(Ol(Nl(i,e),Vr(Nl(i,e),Nl(hi(1,i),t))),1/e),sse=(i,e)=>go(i5.mul(e.mul(i).sub(1))).div(i5.mul(e.mul(i).sub(1))),mc=De(([i])=>i.fract().sub(.5).abs()).setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]}),ase=De(([i])=>Te(mc(i.z.add(mc(i.y.mul(1)))),mc(i.z.add(mc(i.x.mul(1)))),mc(i.y.add(mc(i.x.mul(1)))))).setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),ose=De(([i,e,t])=>{const n=Te(i).toVar(),r=de(1.4).toVar(),s=de(0).toVar(),a=Te(n).toVar();return Ti({start:de(0),end:de(3),type:"float",condition:"<="},()=>{const o=Te(ase(a.mul(2))).toVar();n.addAssign(o.add(t.mul(de(.1).mul(e)))),a.mulAssign(1.8),r.mulAssign(1.5),n.mulAssign(1.2);const u=de(mc(n.z.add(mc(n.x.add(mc(n.y)))))).toVar();s.addAssign(u.div(r)),a.addAssign(.14)}),s}).setLayout({name:"triNoise3D",type:"float",inputs:[{name:"position",type:"vec3"},{name:"speed",type:"float"},{name:"time",type:"float"}]});class lse extends un{static get type(){return"FunctionOverloadingNode"}constructor(e=[],...t){super(),this.functionNodes=e,this.parametersNodes=t,this._candidateFnCall=null,this.global=!0}getNodeType(){return this.functionNodes[0].shaderNode.layout.type}setup(e){const t=this.parametersNodes;let n=this._candidateFnCall;if(n===null){let r=null,s=-1;for(const a of this.functionNodes){const u=a.shaderNode.layout;if(u===null)throw new Error("FunctionOverloadingNode: FunctionNode must be a layout.");const c=u.inputs;if(t.length===c.length){let p=0;for(let g=0;g<t.length;g++){const y=t[g],q=c[g];y.getNodeType(e)===q.type?p++:p=0}p>s&&(r=a,s=p)}}this._candidateFnCall=n=r(...t)}return n}}const use=tt(lse),Vs=i=>(...e)=>use(i,...e),Mh=Zt(0).setGroup(fn).onRenderUpdate(i=>i.time),zO=Zt(0).setGroup(fn).onRenderUpdate(i=>i.deltaTime),cse=Zt(0,"uint").setGroup(fn).onRenderUpdate(i=>i.frameId),hse=(i=1)=>(console.warn('TSL: timerLocal() is deprecated. Use "time" instead.'),Mh.mul(i)),fse=(i=1)=>(console.warn('TSL: timerGlobal() is deprecated. Use "time" instead.'),Mh.mul(i)),dse=(i=1)=>(console.warn('TSL: timerDelta() is deprecated. Use "deltaTime" instead.'),zO.mul(i)),Ase=(i=Mh)=>i.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5),pse=(i=Mh)=>i.fract().round(),mse=(i=Mh)=>i.add(.5).fract().mul(2).sub(1).abs(),gse=(i=Mh)=>i.fract(),_se=De(([i,e,t=At(.5)])=>e9(i.sub(t),e).add(t)),vse=De(([i,e,t=At(.5)])=>{const n=i.sub(t),r=n.dot(n),a=r.mul(r).mul(e);return i.add(n.mul(a))}),yse=De(({position:i=null,horizontal:e=!0,vertical:t=!1})=>{let n;i!==null?(n=Wo.toVar(),n[3][0]=i.x,n[3][1]=i.y,n[3][2]=i.z):n=Wo;const r=$a.mul(n);return p3(e)&&(r[0][0]=Wo[0].length(),r[0][1]=0,r[0][2]=0),p3(t)&&(r[1][0]=0,r[1][1]=Wo[1].length(),r[1][2]=0),r[2][0]=0,r[2][1]=0,r[2][2]=1,wh.mul(r).mul(Lr)}),xse=De(([i=null])=>{const e=a5();return a5(bq(i)).sub(e).lessThan(0).select(qu,i)});class qse extends un{static get type(){return"SpriteSheetUVNode"}constructor(e,t=hr(),n=de(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=n}setup(){const{frameNode:e,uvNode:t,countNode:n}=this,{width:r,height:s}=n,a=e.mod(r.mul(s)).floor(),o=a.mod(r),u=s.sub(a.add(1).div(r).ceil()),c=n.reciprocal(),p=At(o,u);return t.add(p).mul(c)}}const bse=tt(qse).setParameterLength(3);class Sse extends un{static get type(){return"TriplanarTexturesNode"}constructor(e,t=null,n=null,r=de(1),s=Lr,a=ja){super("vec4"),this.textureXNode=e,this.textureYNode=t,this.textureZNode=n,this.scaleNode=r,this.positionNode=s,this.normalNode=a}setup(){const{textureXNode:e,textureYNode:t,textureZNode:n,scaleNode:r,positionNode:s,normalNode:a}=this;let o=a.abs().normalize();o=o.div(o.dot(Te(1)));const u=s.yz.mul(r),c=s.zx.mul(r),p=s.xy.mul(r),g=e.value,y=t!==null?t.value:g,q=n!==null?n.value:g,S=Zn(g,u).mul(o.x),R=Zn(y,c).mul(o.y),M=Zn(q,p).mul(o.z);return Vr(S,R,M)}}const GO=tt(Sse).setParameterLength(1,6),Tse=(...i)=>GO(...i),Ff=new tu,D0=new le,kf=new le,o_=new le,$2=new yn,f6=new le(0,0,-1),Ql=new sn,X2=new le,d6=new le,Q2=new sn,A6=new rt,o5=new Lc,wse=qu.flipX();o5.depthTexture=new qo(1,1);let l_=!1;class Uq extends xu{static get type(){return"ReflectorNode"}constructor(e={}){super(e.defaultTexture||o5.texture,wse),this._reflectorBaseNode=e.reflector||new Ese(this,e),this._depthNode=null,this.setUpdateMatrix(!1)}get reflector(){return this._reflectorBaseNode}get target(){return this._reflectorBaseNode.target}getDepthNode(){if(this._depthNode===null){if(this._reflectorBaseNode.depth!==!0)throw new Error("THREE.ReflectorNode: Depth node can only be requested when the reflector is created with { depth: true }. ");this._depthNode=et(new Uq({defaultTexture:o5.depthTexture,reflector:this._reflectorBaseNode}))}return this._depthNode}setup(e){return e.object.isQuadMesh||this._reflectorBaseNode.build(e),super.setup(e)}clone(){const e=new this.constructor(this.reflectorNode);return e._reflectorBaseNode=this._reflectorBaseNode,e}}class Ese extends un{static get type(){return"ReflectorBaseNode"}constructor(e,t={}){super();const{target:n=new ur,resolution:r=1,generateMipmaps:s=!1,bounces:a=!0,depth:o=!1}=t;this.textureNode=e,this.target=n,this.resolution=r,this.generateMipmaps=s,this.bounces=a,this.depth=o,this.updateBeforeType=a?Pn.RENDER:Pn.FRAME,this.virtualCameras=new WeakMap,this.renderTargets=new WeakMap,this.forceUpdate=!1}_updateResolution(e,t){const n=this.resolution;t.getDrawingBufferSize(A6),e.setSize(Math.round(A6.width*n),Math.round(A6.height*n))}setup(e){return this._updateResolution(o5,e.renderer),super.setup(e)}getVirtualCamera(e){let t=this.virtualCameras.get(e);return t===void 0&&(t=e.clone(),this.virtualCameras.set(e,t)),t}getRenderTarget(e){let t=this.renderTargets.get(e);return t===void 0&&(t=new Lc(0,0,{type:Ss}),this.generateMipmaps===!0&&(t.texture.minFilter=jk,t.texture.generateMipmaps=!0),this.depth===!0&&(t.depthTexture=new qo),this.renderTargets.set(e,t)),t}updateBefore(e){if(this.bounces===!1&&l_)return!1;l_=!0;const{scene:t,camera:n,renderer:r,material:s}=e,{target:a}=this,o=this.getVirtualCamera(n),u=this.getRenderTarget(o);if(r.getDrawingBufferSize(A6),this._updateResolution(u,r),kf.setFromMatrixPosition(a.matrixWorld),o_.setFromMatrixPosition(n.matrixWorld),$2.extractRotation(a.matrixWorld),D0.set(0,0,1),D0.applyMatrix4($2),X2.subVectors(kf,o_),X2.dot(D0)>0===!0&&this.forceUpdate===!1)return;X2.reflect(D0).negate(),X2.add(kf),$2.extractRotation(n.matrixWorld),f6.set(0,0,-1),f6.applyMatrix4($2),f6.add(o_),d6.subVectors(kf,f6),d6.reflect(D0).negate(),d6.add(kf),o.coordinateSystem=n.coordinateSystem,o.position.copy(X2),o.up.set(0,1,0),o.up.applyMatrix4($2),o.up.reflect(D0),o.lookAt(d6),o.near=n.near,o.far=n.far,o.updateMatrixWorld(),o.projectionMatrix.copy(n.projectionMatrix),Ff.setFromNormalAndCoplanarPoint(D0,kf),Ff.applyMatrix4(o.matrixWorldInverse),Ql.set(Ff.normal.x,Ff.normal.y,Ff.normal.z,Ff.constant);const p=o.projectionMatrix;Q2.x=(Math.sign(Ql.x)+p.elements[8])/p.elements[0],Q2.y=(Math.sign(Ql.y)+p.elements[9])/p.elements[5],Q2.z=-1,Q2.w=(1+p.elements[10])/p.elements[14],Ql.multiplyScalar(1/Ql.dot(Q2));const g=0;p.elements[2]=Ql.x,p.elements[6]=Ql.y,p.elements[10]=r.coordinateSystem===mu?Ql.z-g:Ql.z+1-g,p.elements[14]=Ql.w,this.textureNode.value=u.texture,this.depth===!0&&(this.textureNode.getDepthNode().value=u.depthTexture),s.visible=!1;const y=r.getRenderTarget(),q=r.getMRT(),S=r.autoClear;r.setMRT(null),r.setRenderTarget(u),r.autoClear=!0,r.render(t,o),r.setMRT(q),r.setRenderTarget(y),r.autoClear=S,s.visible=!0,l_=!1,this.forceUpdate=!1}}const Mse=i=>et(new Uq(i)),u_=new O3(-1,1,1,-1,0,1);class Rse extends Ii{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new mi([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new mi(t,2))}}const Cse=new Rse;class Oq extends yi{constructor(e=null){super(Cse,e),this.camera=u_,this.isQuadMesh=!0}async renderAsync(e){return e.renderAsync(this,u_)}render(e){e.render(this,u_)}}const Nse=new rt;class Pse extends xu{static get type(){return"RTTNode"}constructor(e,t=null,n=null,r={type:Ss}){const s=new Lc(t,n,r);super(s.texture,hr()),this.node=e,this.width=t,this.height=n,this.pixelRatio=1,this.renderTarget=s,this.textureNeedsUpdate=!0,this.autoUpdate=!0,this._rttNode=null,this._quadMesh=new Oq(new Hr),this.updateBeforeType=Pn.RENDER}get autoSize(){return this.width===null}setup(e){return this._rttNode=this.node.context(e.getSharedContext()),this._quadMesh.material.name="RTT",this._quadMesh.material.needsUpdate=!0,super.setup(e)}setSize(e,t){this.width=e,this.height=t;const n=e*this.pixelRatio,r=t*this.pixelRatio;this.renderTarget.setSize(n,r),this.textureNeedsUpdate=!0}setPixelRatio(e){this.pixelRatio=e,this.setSize(this.width,this.height)}updateBefore({renderer:e}){if(this.textureNeedsUpdate===!1&&this.autoUpdate===!1)return;if(this.textureNeedsUpdate=!1,this.autoSize===!0){this.pixelRatio=e.getPixelRatio();const n=e.getSize(Nse);this.setSize(n.width,n.height)}this._quadMesh.material.fragmentNode=this._rttNode;const t=e.getRenderTarget();e.setRenderTarget(this.renderTarget),this._quadMesh.render(e),e.setRenderTarget(t)}clone(){const e=new xu(this.value,this.uvNode,this.levelNode);return e.sampler=this.sampler,e.referenceNode=this,e}}const VO=(i,...e)=>et(new Pse(et(i),...e)),Dse=(i,...e)=>i.isTextureNode?i:i.isPassNode?i.getTextureNode():VO(i,...e),sd=De(([i,e,t],n)=>{let r;n.renderer.coordinateSystem===mu?(i=At(i.x,i.y.oneMinus()).mul(2).sub(1),r=Jt(Te(i,e),1)):r=Jt(Te(i.x,i.y.oneMinus(),e).mul(2).sub(1),1);const s=Jt(t.mul(r));return s.xyz.div(s.w)}),Lse=De(([i,e])=>{const t=e.mul(Jt(i,1)),n=t.xy.div(t.w).mul(.5).add(.5).toVar();return At(n.x,n.y.oneMinus())}),Use=De(([i,e,t])=>{const n=V1(Nr(e)),r=is(i.mul(n)).toVar(),s=Nr(e,r).toVar(),a=Nr(e,r.sub(is(2,0))).toVar(),o=Nr(e,r.sub(is(1,0))).toVar(),u=Nr(e,r.add(is(1,0))).toVar(),c=Nr(e,r.add(is(2,0))).toVar(),p=Nr(e,r.add(is(0,2))).toVar(),g=Nr(e,r.add(is(0,1))).toVar(),y=Nr(e,r.sub(is(0,1))).toVar(),q=Nr(e,r.sub(is(0,2))).toVar(),S=Yi(hi(de(2).mul(o).sub(a),s)).toVar(),R=Yi(hi(de(2).mul(u).sub(c),s)).toVar(),M=Yi(hi(de(2).mul(g).sub(p),s)).toVar(),E=Yi(hi(de(2).mul(y).sub(q),s)).toVar(),U=sd(i,s,t).toVar(),P=S.lessThan(R).select(U.sub(sd(i.sub(At(de(1).div(n.x),0)),o,t)),U.negate().add(sd(i.add(At(de(1).div(n.x),0)),u,t))),O=M.lessThan(E).select(U.sub(sd(i.add(At(0,de(1).div(n.y))),g,t)),U.negate().add(sd(i.sub(At(0,de(1).div(n.y))),y,t)));return Dc(V5(P,O))});class o8 extends G1{constructor(e,t,n=Float32Array){const r=ArrayBuffer.isView(e)?e:new n(e*t);super(r,t),this.isStorageInstancedBufferAttribute=!0}}class Ose extends _r{constructor(e,t,n=Float32Array){const r=ArrayBuffer.isView(e)?e:new n(e*t);super(r,t),this.isStorageBufferAttribute=!0}}const Bse=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=Z8("float")):(t=Fx(e),n=Z8(e));const r=new Ose(i,t,n);return hh(r,e,i)},Ise=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=Z8("float")):(t=Fx(e),n=Z8(e));const r=new o8(i,t,n);return hh(r,e,i)};class Fse extends eU{static get type(){return"VertexColorNode"}constructor(e=0){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const t=this.getAttributeName(e),n=e.hasGeometryAttribute(t);let r;return n===!0?r=super.generate(e):r=e.generateConst(this.nodeType,new sn(1,1,1,1)),r}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const kse=i=>et(new Fse(i));class zse extends un{static get type(){return"PointUVNode"}constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}const Gse=Mt(zse),Y2=new ks,c_=new yn;class Ba extends un{static get type(){return"SceneNode"}constructor(e=Ba.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,n=this.scene!==null?this.scene:e.scene;let r;return t===Ba.BACKGROUND_BLURRINESS?r=zi("backgroundBlurriness","float",n):t===Ba.BACKGROUND_INTENSITY?r=zi("backgroundIntensity","float",n):t===Ba.BACKGROUND_ROTATION?r=Zt("mat4").label("backgroundRotation").setGroup(fn).onRenderUpdate(()=>{const s=n.background;return s!==null&&s.isTexture&&s.mapping!==jy?(Y2.copy(n.backgroundRotation),Y2.x*=-1,Y2.y*=-1,Y2.z*=-1,c_.makeRotationFromEuler(Y2)):c_.identity(),c_}):console.error("THREE.SceneNode: Unknown scope:",t),r}}Ba.BACKGROUND_BLURRINESS="backgroundBlurriness";Ba.BACKGROUND_INTENSITY="backgroundIntensity";Ba.BACKGROUND_ROTATION="backgroundRotation";const HO=Mt(Ba,Ba.BACKGROUND_BLURRINESS),ay=Mt(Ba,Ba.BACKGROUND_INTENSITY),jO=Mt(Ba,Ba.BACKGROUND_ROTATION);class Vse extends xu{static get type(){return"StorageTextureNode"}constructor(e,t,n=null){super(e,t),this.storeNode=n,this.isStorageTextureNode=!0,this.access=ea.WRITE_ONLY}getInputType(){return"storageTexture"}setup(e){super.setup(e);const t=e.getNodeProperties(this);t.storeNode=this.storeNode}setAccess(e){return this.access=e,this}generate(e,t){let n;return this.storeNode!==null?n=this.generateStore(e):n=super.generate(e,t),n}toReadWrite(){return this.setAccess(ea.READ_WRITE)}toReadOnly(){return this.setAccess(ea.READ_ONLY)}toWriteOnly(){return this.setAccess(ea.WRITE_ONLY)}generateStore(e){const t=e.getNodeProperties(this),{uvNode:n,storeNode:r}=t,s=super.generate(e,"property"),a=n.build(e,"uvec2"),o=r.build(e,"vec4"),u=e.generateTextureStore(e,s,a,o);e.addLineFlowCode(u,this)}}const WO=tt(Vse).setParameterLength(1,3),Hse=(i,e,t)=>{const n=WO(i,e,t);return t!==null&&n.append(),n},jse=De(({texture:i,uv:e})=>{const n=Te().toVar();return On(e.x.lessThan(1e-4),()=>{n.assign(Te(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{n.assign(Te(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{n.assign(Te(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{n.assign(Te(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{n.assign(Te(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{n.assign(Te(0,0,-1))}).Else(()=>{const s=i.sample(e.add(Te(-.01,0,0))).r.sub(i.sample(e.add(Te(.01,0,0))).r),a=i.sample(e.add(Te(0,-.01,0))).r.sub(i.sample(e.add(Te(0,.01,0))).r),o=i.sample(e.add(Te(0,0,-.01))).r.sub(i.sample(e.add(Te(0,0,.01))).r);n.assign(Te(s,a,o))}),n.normalize()});class Wse extends xu{static get type(){return"Texture3DNode"}constructor(e,t=null,n=null){super(e,t,n),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return Te(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(ve(V1(this,this.levelNode).y).sub(t.y).sub(1))),t}generateUV(e,t){return t.build(e,"vec3")}normal(e){return jse({texture:this,uv:e})}}const $se=tt(Wse).setParameterLength(1,3);class Xse extends Q5{static get type(){return"UserDataNode"}constructor(e,t,n=null){super(e,t,n),this.userData=n}updateReference(e){return this.reference=this.userData!==null?this.userData:e.object.userData,this.reference}}const Qse=(i,e,t)=>et(new Xse(i,e,t)),TR=new WeakMap;class Yse extends wr{static get type(){return"VelocityNode"}constructor(){super("vec2"),this.projectionMatrix=null,this.updateType=Pn.OBJECT,this.updateAfterType=Pn.OBJECT,this.previousModelWorldMatrix=Zt(new yn),this.previousProjectionMatrix=Zt(new yn).setGroup(fn),this.previousCameraViewMatrix=Zt(new yn)}setProjectionMatrix(e){this.projectionMatrix=e}update({frameId:e,camera:t,object:n}){const r=wR(n);this.previousModelWorldMatrix.value.copy(r);const s=$O(t);s.frameId!==e&&(s.frameId=e,s.previousProjectionMatrix===void 0?(s.previousProjectionMatrix=new yn,s.previousCameraViewMatrix=new yn,s.currentProjectionMatrix=new yn,s.currentCameraViewMatrix=new yn,s.previousProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.previousCameraViewMatrix.copy(t.matrixWorldInverse)):(s.previousProjectionMatrix.copy(s.currentProjectionMatrix),s.previousCameraViewMatrix.copy(s.currentCameraViewMatrix)),s.currentProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.currentCameraViewMatrix.copy(t.matrixWorldInverse),this.previousProjectionMatrix.value.copy(s.previousProjectionMatrix),this.previousCameraViewMatrix.value.copy(s.previousCameraViewMatrix))}updateAfter({object:e}){wR(e).copy(e.matrixWorld)}setup(){const e=this.projectionMatrix===null?wh:Zt(this.projectionMatrix),t=this.previousCameraViewMatrix.mul(this.previousModelWorldMatrix),n=e.mul(Eh).mul(Lr),r=this.previousProjectionMatrix.mul(t).mul(s5),s=n.xy.div(n.w),a=r.xy.div(r.w);return hi(s,a)}}function $O(i){let e=TR.get(i);return e===void 0&&(e={},TR.set(i,e)),e}function wR(i,e=0){const t=$O(i);let n=t[e];return n===void 0&&(t[e]=n=new yn),n}const Kse=Mt(Yse),XO=De(([i,e])=>Ha(1,i.oneMinus().div(e)).oneMinus()).setLayout({name:"blendBurn",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),QO=De(([i,e])=>Ha(i.div(e.oneMinus()),1)).setLayout({name:"blendDodge",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),YO=De(([i,e])=>i.oneMinus().mul(e.oneMinus()).oneMinus()).setLayout({name:"blendScreen",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),KO=De(([i,e])=>Si(i.mul(2).mul(e),i.oneMinus().mul(2).mul(e.oneMinus()).oneMinus(),G5(.5,i))).setLayout({name:"blendOverlay",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),Zse=De(([i,e])=>{const t=e.a.add(i.a.mul(e.a.oneMinus()));return Jt(e.rgb.mul(e.a).add(i.rgb.mul(i.a).mul(e.a.oneMinus())).div(t),t)}).setLayout({name:"blendColor",type:"vec4",inputs:[{name:"base",type:"vec4"},{name:"blend",type:"vec4"}]}),Jse=(...i)=>(console.warn('THREE.TSL: "burn" has been renamed. Use "blendBurn" instead.'),XO(i)),eae=(...i)=>(console.warn('THREE.TSL: "dodge" has been renamed. Use "blendDodge" instead.'),QO(i)),tae=(...i)=>(console.warn('THREE.TSL: "screen" has been renamed. Use "blendScreen" instead.'),YO(i)),nae=(...i)=>(console.warn('THREE.TSL: "overlay" has been renamed. Use "blendOverlay" instead.'),KO(i)),iae=De(([i])=>Bq(i.rgb)),rae=De(([i,e=de(1)])=>e.mix(Bq(i.rgb),i.rgb)),sae=De(([i,e=de(1)])=>{const t=Vr(i.r,i.g,i.b).div(3),n=i.r.max(i.g.max(i.b)),r=n.sub(t).mul(e).mul(-3);return Si(i.rgb,n,r)}),aae=De(([i,e=de(1)])=>{const t=Te(.57735,.57735,.57735),n=e.cos();return Te(i.rgb.mul(n).add(t.cross(i.rgb).mul(e.sin()).add(t.mul(e0(t,i.rgb).mul(n.oneMinus())))))}),Bq=(i,e=Te(Hn.getLuminanceCoefficients(new le)))=>e0(i,e),oae=De(([i,e=Te(1),t=Te(0),n=Te(1),r=de(1),s=Te(Hn.getLuminanceCoefficients(new le,Pl))])=>{const a=i.rgb.dot(Te(s)),o=Br(i.rgb.mul(e).add(t),0).toVar(),u=o.pow(n).toVar();return On(o.r.greaterThan(0),()=>{o.r.assign(u.r)}),On(o.g.greaterThan(0),()=>{o.g.assign(u.g)}),On(o.b.greaterThan(0),()=>{o.b.assign(u.b)}),o.assign(a.add(o.sub(a).mul(r))),Jt(o.rgb,i.a)});class lae extends wr{static get type(){return"PosterizeNode"}constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}const uae=tt(lae).setParameterLength(2),p6=new rt;class ZO extends xu{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class ER extends ZO{static get type(){return"PassMultipleTextureNode"}constructor(e,t,n=!1){super(e,null),this.textureName=t,this.previousTexture=n}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class Su extends wr{static get type(){return"PassNode"}constructor(e,t,n,r={}){super("vec4"),this.scope=e,this.scene=t,this.camera=n,this.options=r,this._pixelRatio=1,this._width=1,this._height=1;const s=new qo;s.isRenderTargetTexture=!0,s.name="depth";const a=new Lc(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Ss,...r});a.texture.name="output",a.depthTexture=s,this.renderTarget=a,this._textures={output:a.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=Zt(0),this._cameraFar=Zt(0),this._mrt=null,this._layers=null,this._resolution=1,this.isPassNode=!0,this.updateBeforeType=Pn.FRAME}setResolution(e){return this._resolution=e,this}getResolution(){return this._resolution}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const n=this._textures[e],r=this.renderTarget.textures.indexOf(n);this.renderTarget.textures[r]=t,this._textures[e]=t,this._previousTextures[e]=n,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(t=et(new ER(this,e)),t.updateTexture(),this._textureNodes[e]=t),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),t=et(new ER(this,e,!0)),t.updateTexture(),this._previousTextureNodes[e]=t),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar;this._viewZNodes[e]=t=Sq(this.getTextureNode(e),n,r)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=t=Ed(s,n,r)}return t}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.texture.type=e.getColorBufferType(),this.scope===Su.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:n}=this;let r,s;const a=t.getOutputRenderTarget();a&&a.isXRRenderTarget===!0?(s=1,r=t.xr.getCamera(),t.xr.updateCamera(r),p6.set(a.width,a.height)):(r=this.camera,s=t.getPixelRatio(),t.getSize(p6)),this._pixelRatio=s,this.setSize(p6.width,p6.height);const o=t.getRenderTarget(),u=t.getMRT(),c=r.layers.mask;this._cameraNear.value=r.near,this._cameraFar.value=r.far,this._layers!==null&&(r.layers.mask=this._layers.mask);for(const p in this._previousTextures)this.toggleTexture(p);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(n,r),t.setRenderTarget(o),t.setMRT(u),r.layers.mask=c}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio*this._resolution,r=this._height*this._pixelRatio*this._resolution;this.renderTarget.setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}Su.COLOR="color";Su.DEPTH="depth";const cae=(i,e,t)=>et(new Su(Su.COLOR,i,e,t)),hae=(i,e)=>et(new ZO(i,e)),fae=(i,e,t)=>et(new Su(Su.DEPTH,i,e,t));class dae extends Su{static get type(){return"ToonOutlinePassNode"}constructor(e,t,n,r,s){super(Su.COLOR,e,t),this.colorNode=n,this.thicknessNode=r,this.alphaNode=s,this._materialCache=new WeakMap}updateBefore(e){const{renderer:t}=e,n=t.getRenderObjectFunction();t.setRenderObjectFunction((r,s,a,o,u,c,p,g)=>{if((u.isMeshToonMaterial||u.isMeshToonNodeMaterial)&&u.wireframe===!1){const y=this._getOutlineMaterial(u);t.renderObject(r,s,a,o,y,c,p,g)}t.renderObject(r,s,a,o,u,c,p,g)}),super.updateBefore(e),t.setRenderObjectFunction(n)}_createMaterial(){const e=new Hr;e.isMeshToonOutlineMaterial=!0,e.name="Toon_Outline",e.side=Oi;const t=ja.negate(),n=wh.mul(Eh),r=de(1),s=n.mul(Jt(Lr,1)),a=n.mul(Jt(Lr.add(t),1)),o=Dc(s.sub(a));return e.vertexNode=s.add(o.mul(this.thicknessNode).mul(s.w).mul(r)),e.colorNode=Jt(this.colorNode,this.alphaNode),e}_getOutlineMaterial(e){let t=this._materialCache.get(e);return t===void 0&&(t=this._createMaterial(),this._materialCache.set(e,t)),t}}const Aae=(i,e,t=new Xt(0,0,0),n=.003,r=1)=>et(new dae(i,e,et(t),et(n),et(r))),JO=De(([i,e])=>i.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),eB=De(([i,e])=>(i=i.mul(e),i.div(i.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),tB=De(([i,e])=>{i=i.mul(e),i=i.sub(.004).max(0);const t=i.mul(i.mul(6.2).add(.5)),n=i.mul(i.mul(6.2).add(1.7)).add(.06);return t.div(n).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),pae=De(([i])=>{const e=i.mul(i.add(.0245786)).sub(90537e-9),t=i.mul(i.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),nB=De(([i,e])=>{const t=ra(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),n=ra(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return i=i.mul(e).div(.6),i=t.mul(i),i=pae(i),i=n.mul(i),i.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),mae=ra(Te(1.6605,-.1246,-.0182),Te(-.5876,1.1329,-.1006),Te(-.0728,-.0083,1.1187)),gae=ra(Te(.6274,.0691,.0164),Te(.3293,.9195,.088),Te(.0433,.0113,.8956)),_ae=De(([i])=>{const e=Te(i).toVar(),t=Te(e.mul(e)).toVar(),n=Te(t.mul(t)).toVar();return de(15.5).mul(n.mul(t)).sub(Dn(40.14,n.mul(e))).add(Dn(31.96,n).sub(Dn(6.868,t.mul(e))).add(Dn(.4298,t).add(Dn(.1191,e).sub(.00232))))}),iB=De(([i,e])=>{const t=Te(i).toVar(),n=ra(Te(.856627153315983,.137318972929847,.11189821299995),Te(.0951212405381588,.761241990602591,.0767994186031903),Te(.0482516061458583,.101439036467562,.811302368396859)),r=ra(Te(1.1271005818144368,-.1413297634984383,-.14132976349843826),Te(-.11060664309660323,1.157823702216272,-.11060664309660294),Te(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=de(-12.47393),a=de(4.026069);return t.mulAssign(e),t.assign(gae.mul(t)),t.assign(n.mul(t)),t.assign(Br(t,1e-10)),t.assign(du(t)),t.assign(t.sub(s).div(a.sub(s))),t.assign(_u(t,0,1)),t.assign(_ae(t)),t.assign(r.mul(t)),t.assign(Nl(Br(Te(0),t),Te(2.2))),t.assign(mae.mul(t)),t.assign(_u(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),rB=De(([i,e])=>{const t=de(.76),n=de(.15);i=i.mul(e);const r=Ha(i.r,Ha(i.g,i.b)),s=Fs(r.lessThan(.08),r.sub(Dn(6.25,r.mul(r))),.04);i.subAssign(s);const a=Br(i.r,Br(i.g,i.b));On(a.lessThan(t),()=>i);const o=hi(1,t),u=hi(1,o.mul(o).div(a.add(o.sub(t))));i.mulAssign(u.div(a));const c=hi(1,Ol(1,n.mul(a.sub(u)).add(1)));return Si(i,Te(u),c)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class $r extends un{static get type(){return"CodeNode"}constructor(e="",t=[],n=""){super("code"),this.isCodeNode=!0,this.code=e,this.includes=t,this.language=n}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const r of t)r.build(e);const n=e.getCodeFromNode(this,this.getNodeType(e));return n.code=this.code,n.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}const t9=tt($r).setParameterLength(1,3),vae=(i,e)=>t9(i,e,"js"),yae=(i,e)=>t9(i,e,"wgsl"),xae=(i,e)=>t9(i,e,"glsl");class sB extends $r{static get type(){return"FunctionNode"}constructor(e="",t=[],n=""){super(e,t,n)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let n=t.nodeFunction;return n===void 0&&(n=e.parser.parseFunction(this.code),t.nodeFunction=n),n}generate(e,t){super.generate(e);const n=this.getNodeFunction(e),r=n.name,s=n.type,a=e.getCodeFromNode(this,s);r!==""&&(a.name=r);const o=e.getPropertyName(a),u=this.getNodeFunction(e).getCode(o);return a.code=u+`
`,t==="property"?o:e.format(`${o}()`,s,t)}}const aB=(i,e=[],t="")=>{for(let s=0;s<e.length;s++){const a=e[s];typeof a=="function"&&(e[s]=a.functionNode)}const n=et(new sB(i,e,t)),r=(...s)=>n.call(...s);return r.functionNode=n,r},qae=(i,e)=>aB(i,e,"glsl"),bae=(i,e)=>aB(i,e,"wgsl");class Sae extends un{static get type(){return"ScriptableValueNode"}constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outputType=null,this.events=new Eu,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(e){this._value!==e&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&this._cache===null&&this.inputType==="URL"&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&e.value!==null&&e.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof e.value=="string"||this.inputType==="Number"&&typeof e.value=="number"||this.inputType==="Vector2"&&e.value.isVector2||this.inputType==="Vector3"&&e.value.isVector3||this.inputType==="Vector4"&&e.value.isVector4||this.inputType==="Color"&&e.value.isColor||this.inputType==="Matrix3"&&e.value.isMatrix3||this.inputType==="Matrix4"&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:de()}serialize(e){super.serialize(e),this.value!==null?this.inputType==="ArrayBuffer"?e.value=mD(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;e.value!==null&&(e.inputType==="ArrayBuffer"?t=gD(e.value):e.inputType==="Texture"?t=e.meta.textures[e.value]:t=e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const l8=tt(Sae).setParameterLength(1);class oB extends Map{get(e,t=null,...n){if(this.has(e))return super.get(e);if(t!==null){const r=t(...n);return this.set(e,r),r}}}class Tae{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const u8=new oB;class wae extends un{static get type(){return"ScriptableNode"}constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new oB,this._output=l8(null),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const n=this._outputs;return n[e]===void 0?n[e]=l8(t):n[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const n=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),n[e]=t,n[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),n[e]=t,n[e].events.addEventListener("refresh",this.onRefresh)):n[e]===void 0?(n[e]=l8(t),n[e].events.addEventListener("refresh",this.onRefresh)):n[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){const r=this.getObject()[e];if(typeof r=="function")return r(...t)}async callAsync(e,...t){const r=this.getObject()[e];if(typeof r=="function")return r.constructor.name==="AsyncFunction"?await r(...t):r(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){e!==null?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const e=()=>this.refresh(),t=(c,p)=>this.setOutput(c,p),n=new Tae(this),r=u8.get("THREE"),s=u8.get("TSL"),a=this.getMethod(),o=[n,this._local,u8,e,t,r,s];this._object=a(...o);const u=this._object.layout;if(u&&(u.cache===!1&&this._local.clear(),this._output.outputType=u.outputType||null,Array.isArray(u.elements)))for(const c of u.elements){const p=c.id||c.name;c.inputType&&(this.getParameter(p)===void 0&&this.setParameter(p,null),this.getParameter(p).inputType=c.inputType),c.outputType&&(this.getOutput(p)===void 0&&this.setOutput(p,null),this.getOutput(p).outputType=c.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let n=this.parameters[t];n.isScriptableNode&&(n=n.getDefaultOutput()),n.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:de()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const e=["parameters","local","global","refresh","setOutput","THREE","TSL"],n=["layout","init","main","dispose"].join(", "),r="var "+n+`; var output = {};
`,s=`
return { ...output, `+n+" };",a=r+this.codeNode.code+s;return this._method=new Function(...e,a),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}getCacheKey(e){const t=[hD(this.source),this.getDefaultOutputNode().getCacheKey(e)];for(const n in this.parameters)t.push(this.parameters[n].getCacheKey(e));return D5(t)}set needsUpdate(e){e===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const Eae=tt(wae).setParameterLength(1,2);function lB(i){let e;const t=i.context.getViewZ;return t!==void 0&&(e=t(this)),(e||zr.z).negate()}const Iq=De(([i,e],t)=>{const n=lB(t);return vu(i,e,n)}),Fq=De(([i],e)=>{const t=lB(e);return i.mul(i,t,t).negate().exp().oneMinus()}),b3=De(([i,e])=>Jt(e.toFloat().mix(Td.rgb,i.toVec3()),Td.a));function Mae(i,e,t){return console.warn('THREE.TSL: "rangeFog( color, near, far )" is deprecated. Use "fog( color, rangeFogFactor( near, far ) )" instead.'),b3(i,Iq(e,t))}function Rae(i,e){return console.warn('THREE.TSL: "densityFog( color, density )" is deprecated. Use "fog( color, densityFogFactor( density ) )" instead.'),b3(i,Fq(e))}let L0=null,U0=null;class Cae extends un{static get type(){return"RangeNode"}constructor(e=de(),t=de()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(B1(this.minNode.value)),n=e.getTypeLength(B1(this.maxNode.value));return t>n?t:n}getNodeType(e){return e.object.count>1?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let n=null;if(t.count>1){const r=this.minNode.value,s=this.maxNode.value,a=e.getTypeLength(B1(r)),o=e.getTypeLength(B1(s));L0=L0||new sn,U0=U0||new sn,L0.setScalar(0),U0.setScalar(0),a===1?L0.setScalar(r):r.isColor?L0.set(r.r,r.g,r.b,1):L0.set(r.x,r.y,r.z||0,r.w||0),o===1?U0.setScalar(s):s.isColor?U0.set(s.r,s.g,s.b,1):U0.set(s.x,s.y,s.z||0,s.w||0);const u=4,c=u*t.count,p=new Float32Array(c);for(let y=0;y<c;y++){const q=y%u,S=L0.getComponent(q),R=U0.getComponent(q);p[y]=Qd.lerp(S,R,Math.random())}const g=this.getNodeType(e);if(t.count<=4096)n=W3(p,"vec4",t.count).element(H1).convert(g);else{const y=new G1(p,4);e.geometry.setAttribute("__range"+this.id,y),n=r5(y).convert(g)}}else n=de(0);return n}}const Nae=tt(Cae).setParameterLength(2);class Pae extends un{static get type(){return"ComputeBuiltinNode"}constructor(e,t){super(t),this._builtinName=e}getHash(e){return this.getBuiltinName(e)}getNodeType(){return this.nodeType}setBuiltinName(e){return this._builtinName=e,this}getBuiltinName(){return this._builtinName}hasBuiltin(e){return e.hasBuiltin(this._builtinName)}generate(e,t){const n=this.getBuiltinName(e),r=this.getNodeType(e);return e.shaderStage==="compute"?e.format(n,r,t):(console.warn(`ComputeBuiltinNode: Compute built-in value ${n} can not be accessed in the ${e.shaderStage} stage`),e.generateConst(r))}serialize(e){super.serialize(e),e.global=this.global,e._builtinName=this._builtinName}deserialize(e){super.deserialize(e),this.global=e.global,this._builtinName=e._builtinName}}const J3=(i,e)=>et(new Pae(i,e)),Dae=J3("numWorkgroups","uvec3"),Lae=J3("workgroupId","uvec3"),Uae=J3("globalId","uvec3"),Oae=J3("localId","uvec3"),Bae=J3("subgroupSize","uint");class Iae extends un{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:n}=e;n.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}const kq=tt(Iae),Fae=()=>kq("workgroup").append(),kae=()=>kq("storage").append(),zae=()=>kq("texture").append();class Gae extends Th{constructor(e,t){super(e,t),this.isWorkgroupInfoElementNode=!0}generate(e,t){let n;const r=e.context.assign;if(n=super.generate(e),r!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}class Vae extends un{constructor(e,t,n=0){super(t),this.bufferType=t,this.bufferCount=n,this.isWorkgroupInfoNode=!0,this.elementType=t,this.scope=e}label(e){return this.name=e,this}setScope(e){return this.scope=e,this}getElementType(){return this.elementType}getInputType(){return`${this.scope}Array`}element(e){return et(new Gae(this,e))}generate(e){return e.getScopedArray(this.name||`${this.scope}Array_${this.id}`,this.scope.toLowerCase(),this.bufferType,this.bufferCount)}}const Hae=(i,e)=>et(new Vae("Workgroup",i,e));class us extends wr{static get type(){return"AtomicFunctionNode"}constructor(e,t,n){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=n}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=this.method,n=this.getNodeType(e),r=this.getInputType(e),s=this.pointerNode,a=this.valueNode,o=[];o.push(`&${s.build(e,r)}`),a!==null&&o.push(a.build(e,r));const u=`${e.getMethod(t,n)}( ${o.join(", ")} )`;return a!==null&&e.addLineFlowCode(u,this),u}}us.ATOMIC_LOAD="atomicLoad";us.ATOMIC_STORE="atomicStore";us.ATOMIC_ADD="atomicAdd";us.ATOMIC_SUB="atomicSub";us.ATOMIC_MAX="atomicMax";us.ATOMIC_MIN="atomicMin";us.ATOMIC_AND="atomicAnd";us.ATOMIC_OR="atomicOr";us.ATOMIC_XOR="atomicXor";const jae=tt(us),Cu=(i,e,t)=>{const n=jae(i,e,t);return n.append(),n},Wae=i=>Cu(us.ATOMIC_LOAD,i,null),$ae=(i,e)=>Cu(us.ATOMIC_STORE,i,e),Xae=(i,e)=>Cu(us.ATOMIC_ADD,i,e),Qae=(i,e)=>Cu(us.ATOMIC_SUB,i,e),Yae=(i,e)=>Cu(us.ATOMIC_MAX,i,e),Kae=(i,e)=>Cu(us.ATOMIC_MIN,i,e),Zae=(i,e)=>Cu(us.ATOMIC_AND,i,e),Jae=(i,e)=>Cu(us.ATOMIC_OR,i,e),eoe=(i,e)=>Cu(us.ATOMIC_XOR,i,e);let m6;function n9(i){m6=m6||new WeakMap;let e=m6.get(i);return e===void 0&&m6.set(i,e={}),e}function zq(i){const e=n9(i);return e.shadowMatrix||(e.shadowMatrix=Zt("mat4").setGroup(fn).onRenderUpdate(()=>(i.castShadow!==!0&&i.shadow.updateMatrices(i),i.shadow.matrix)))}function uB(i,e=Tc){const t=zq(i).mul(e);return t.xyz.div(t.w)}function Gq(i){const e=n9(i);return e.position||(e.position=Zt(new le).setGroup(fn).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.matrixWorld)))}function cB(i){const e=n9(i);return e.targetPosition||(e.targetPosition=Zt(new le).setGroup(fn).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.target.matrixWorld)))}function Vq(i){const e=n9(i);return e.viewPosition||(e.viewPosition=Zt(new le).setGroup(fn).onRenderUpdate(({camera:t},n)=>{n.value=n.value||new le,n.value.setFromMatrixPosition(i.matrixWorld),n.value.applyMatrix4(t.matrixWorldInverse)}))}const Hq=i=>$a.transformDirection(Gq(i).sub(cB(i))),toe=i=>i.sort((e,t)=>e.id-t.id),noe=(i,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===i)return t;return null},h_=new WeakMap;class jq extends un{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=Te().toVar(),this.totalSpecularNode=Te().toVar(),this.outgoingLightNode=Te().toVar(),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){const e=[],t=this._lights;for(let n=0;n<t.length;n++)e.push(t[n].id);return D5(e)}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const n of this._lightNodes)t.push(n.getSelf().getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getDataFromNode(this);for(const n of t.nodes)n.build(e)}setupLightsNode(e){const t=[],n=this._lightNodes,r=toe(this._lights),s=e.renderer.library;for(const a of r)if(a.isNode)t.push(et(a));else{let o=null;if(n!==null&&(o=noe(a.id,n)),o===null){const u=s.getLightNodeClass(a.constructor);if(u===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${a.constructor.name}`);continue}let c=null;h_.has(a)?c=h_.get(a):(c=et(new u(a)),h_.set(a,c)),t.push(c)}}this._lightNodes=t}setupDirectLight(e,t,n){const{lightingModel:r,reflectedLight:s}=e.context;r.direct({...n,lightNode:t,reflectedLight:s},e)}setupDirectRectAreaLight(e,t,n){const{lightingModel:r,reflectedLight:s}=e.context;r.directRectArea({...n,lightNode:t,reflectedLight:s},e)}setupLights(e,t){for(const n of t)n.build(e)}getLightNodes(e){return this._lightNodes===null&&this.setupLightsNode(e),this._lightNodes}setup(e){const t=e.lightsNode;e.lightsNode=this;let n=this.outgoingLightNode;const r=e.context,s=r.lightingModel,a=e.getDataFromNode(this);if(s){const{totalDiffuseNode:o,totalSpecularNode:u}=this;r.outgoingLight=n;const c=e.addStack();a.nodes=c.nodes,s.start(e);const{backdrop:p,backdropAlpha:g}=r,{directDiffuse:y,directSpecular:q,indirectDiffuse:S,indirectSpecular:R}=r.reflectedLight;let M=y.add(S);p!==null&&(g!==null?M=Te(g.mix(M,p)):M=Te(p),r.material.transparent=!0),o.assign(M),u.assign(q.add(R)),n.assign(o.add(u)),s.finish(e),n=n.bypass(e.removeStack())}else a.nodes=[];return e.lightsNode=t,n}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const ioe=(i=[])=>et(new jq).setLights(i);class roe extends un{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=Pn.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({context:e,material:t}){Wq.assign(t.shadowPositionNode||e.shadowPositionWorld||Tc)}dispose(){this.updateBeforeType=Pn.NONE}}const Wq=qA("vec3","shadowPositionWorld");function soe(i,e={}){return e.toneMapping=i.toneMapping,e.toneMappingExposure=i.toneMappingExposure,e.outputColorSpace=i.outputColorSpace,e.renderTarget=i.getRenderTarget(),e.activeCubeFace=i.getActiveCubeFace(),e.activeMipmapLevel=i.getActiveMipmapLevel(),e.renderObjectFunction=i.getRenderObjectFunction(),e.pixelRatio=i.getPixelRatio(),e.mrt=i.getMRT(),e.clearColor=i.getClearColor(e.clearColor||new Xt),e.clearAlpha=i.getClearAlpha(),e.autoClear=i.autoClear,e.scissorTest=i.getScissorTest(),e}function aoe(i,e){return e=soe(i,e),i.setMRT(null),i.setRenderObjectFunction(null),i.setClearColor(0,1),i.autoClear=!0,e}function ooe(i,e){i.toneMapping=e.toneMapping,i.toneMappingExposure=e.toneMappingExposure,i.outputColorSpace=e.outputColorSpace,i.setRenderTarget(e.renderTarget,e.activeCubeFace,e.activeMipmapLevel),i.setRenderObjectFunction(e.renderObjectFunction),i.setPixelRatio(e.pixelRatio),i.setMRT(e.mrt),i.setClearColor(e.clearColor,e.clearAlpha),i.autoClear=e.autoClear,i.setScissorTest(e.scissorTest)}function loe(i,e={}){return e.background=i.background,e.backgroundNode=i.backgroundNode,e.overrideMaterial=i.overrideMaterial,e}function uoe(i,e){return e=loe(i,e),i.background=null,i.backgroundNode=null,i.overrideMaterial=null,e}function coe(i,e){i.background=e.background,i.backgroundNode=e.backgroundNode,i.overrideMaterial=e.overrideMaterial}function hoe(i,e,t){return t=aoe(i,t),t=uoe(e,t),t}function foe(i,e,t){ooe(i,t),coe(e,t)}const MR=new WeakMap,doe=De(([i,e,t])=>{let n=Tc.sub(i).length();return n=n.sub(e).div(t.sub(e)),n=n.saturate(),n}),Aoe=i=>{const e=i.shadow.camera,t=zi("near","float",e).setGroup(fn),n=zi("far","float",e).setGroup(fn),r=rU(i);return doe(r,t,n)},poe=i=>{let e=MR.get(i);if(e===void 0){const t=i.isPointLight?Aoe(i):null;e=new Hr,e.colorNode=Jt(0,0,0,1),e.depthNode=t,e.isShadowPassMaterial=!0,e.name="ShadowMaterial",e.fog=!1,MR.set(i,e)}return e},hB=De(({depthTexture:i,shadowCoord:e})=>Zn(i,e.xy).compare(e.z)),fB=De(({depthTexture:i,shadowCoord:e,shadow:t})=>{const n=(R,M)=>Zn(i,R).compare(M),r=zi("mapSize","vec2",t).setGroup(fn),s=zi("radius","float",t).setGroup(fn),a=At(1).div(r),o=a.x.negate().mul(s),u=a.y.negate().mul(s),c=a.x.mul(s),p=a.y.mul(s),g=o.div(2),y=u.div(2),q=c.div(2),S=p.div(2);return Vr(n(e.xy.add(At(o,u)),e.z),n(e.xy.add(At(0,u)),e.z),n(e.xy.add(At(c,u)),e.z),n(e.xy.add(At(g,y)),e.z),n(e.xy.add(At(0,y)),e.z),n(e.xy.add(At(q,y)),e.z),n(e.xy.add(At(o,0)),e.z),n(e.xy.add(At(g,0)),e.z),n(e.xy,e.z),n(e.xy.add(At(q,0)),e.z),n(e.xy.add(At(c,0)),e.z),n(e.xy.add(At(g,S)),e.z),n(e.xy.add(At(0,S)),e.z),n(e.xy.add(At(q,S)),e.z),n(e.xy.add(At(o,p)),e.z),n(e.xy.add(At(0,p)),e.z),n(e.xy.add(At(c,p)),e.z)).mul(1/17)}),dB=De(({depthTexture:i,shadowCoord:e,shadow:t})=>{const n=(p,g)=>Zn(i,p).compare(g),r=zi("mapSize","vec2",t).setGroup(fn),s=At(1).div(r),a=s.x,o=s.y,u=e.xy,c=Bc(u.mul(r).add(.5));return u.subAssign(c.mul(s)),Vr(n(u,e.z),n(u.add(At(a,0)),e.z),n(u.add(At(0,o)),e.z),n(u.add(s),e.z),Si(n(u.add(At(a.negate(),0)),e.z),n(u.add(At(a.mul(2),0)),e.z),c.x),Si(n(u.add(At(a.negate(),o)),e.z),n(u.add(At(a.mul(2),o)),e.z),c.x),Si(n(u.add(At(0,o.negate())),e.z),n(u.add(At(0,o.mul(2))),e.z),c.y),Si(n(u.add(At(a,o.negate())),e.z),n(u.add(At(a,o.mul(2))),e.z),c.y),Si(Si(n(u.add(At(a.negate(),o.negate())),e.z),n(u.add(At(a.mul(2),o.negate())),e.z),c.x),Si(n(u.add(At(a.negate(),o.mul(2))),e.z),n(u.add(At(a.mul(2),o.mul(2))),e.z),c.x),c.y)).mul(1/9)}),AB=De(({depthTexture:i,shadowCoord:e})=>{const t=de(1).toVar(),n=Zn(i).sample(e.xy).rg,r=G5(e.z,n.x);return On(r.notEqual(de(1)),()=>{const s=e.z.sub(n.x),a=Br(0,n.y.mul(n.y));let o=a.div(a.add(s.mul(s)));o=_u(hi(o,.3).div(.95-.3)),t.assign(_u(Br(r,o)))}),t}),moe=De(({samples:i,radius:e,size:t,shadowPass:n})=>{const r=de(0).toVar(),s=de(0).toVar(),a=i.lessThanEqual(de(1)).select(de(0),de(2).div(i.sub(1))),o=i.lessThanEqual(de(1)).select(de(0),de(-1));Ti({start:ve(0),end:ve(i),type:"int",condition:"<"},({i:c})=>{const p=o.add(de(c).mul(a)),g=n.sample(Vr(Z3.xy,At(0,p).mul(e)).div(t)).x;r.addAssign(g),s.addAssign(g.mul(g))}),r.divAssign(i),s.divAssign(i);const u=Ru(s.sub(r.mul(r)));return At(r,u)}),goe=De(({samples:i,radius:e,size:t,shadowPass:n})=>{const r=de(0).toVar(),s=de(0).toVar(),a=i.lessThanEqual(de(1)).select(de(0),de(2).div(i.sub(1))),o=i.lessThanEqual(de(1)).select(de(0),de(-1));Ti({start:ve(0),end:ve(i),type:"int",condition:"<"},({i:c})=>{const p=o.add(de(c).mul(a)),g=n.sample(Vr(Z3.xy,At(p,0).mul(e)).div(t));r.addAssign(g.x),s.addAssign(Vr(g.y.mul(g.y),g.x.mul(g.x)))}),r.divAssign(i),s.divAssign(i);const u=Ru(s.sub(r.mul(r)));return At(r,u)}),_oe=[hB,fB,dB,AB];let f_;const g6=new Oq;class pB extends roe{static get type(){return"ShadowNode"}constructor(e,t=null){super(e),this.shadow=t||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this._cameraFrameId=new WeakMap,this.isShadowNode=!0}setupShadowFilter(e,{filterFn:t,depthTexture:n,shadowCoord:r,shadow:s}){const a=r.x.greaterThanEqual(0).and(r.x.lessThanEqual(1)).and(r.y.greaterThanEqual(0)).and(r.y.lessThanEqual(1)).and(r.z.lessThanEqual(1)),o=t({depthTexture:n,shadowCoord:r,shadow:s});return a.select(o,de(1))}setupShadowCoord(e,t){const{shadow:n}=this,{renderer:r}=e,s=zi("bias","float",n).setGroup(fn);let a=t,o;if(n.camera.isOrthographicCamera||r.logarithmicDepthBuffer!==!0)a=a.xyz.div(a.w),o=a.z,r.coordinateSystem===mu&&(o=o.mul(2).sub(1));else{const u=a.w;a=a.xy.div(u);const c=zi("near","float",n.camera).setGroup(fn),p=zi("far","float",n.camera).setGroup(fn);o=Tq(u.negate(),c,p)}return a=Te(a.x,a.y.oneMinus(),o.add(s)),a}getShadowFilterFn(e){return _oe[e]}setupShadow(e){const{renderer:t}=e,{light:n,shadow:r}=this,s=t.shadowMap.type,a=new qo(r.mapSize.width,r.mapSize.height);a.compareFunction=v5;const o=e.createRenderTarget(r.mapSize.width,r.mapSize.height);if(o.depthTexture=a,r.camera.updateProjectionMatrix(),s===ho){a.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:mh,type:Ss}),this.vsmShadowMapHorizontal=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:mh,type:Ss});const E=Zn(a),U=Zn(this.vsmShadowMapVertical.texture),P=zi("blurSamples","float",r).setGroup(fn),O=zi("radius","float",r).setGroup(fn),F=zi("mapSize","vec2",r).setGroup(fn);let I=this.vsmMaterialVertical||(this.vsmMaterialVertical=new Hr);I.fragmentNode=moe({samples:P,radius:O,size:F,shadowPass:E}).context(e.getSharedContext()),I.name="VSMVertical",I=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new Hr),I.fragmentNode=goe({samples:P,radius:O,size:F,shadowPass:U}).context(e.getSharedContext()),I.name="VSMHorizontal"}const u=zi("intensity","float",r).setGroup(fn),c=zi("normalBias","float",r).setGroup(fn),p=zq(n).mul(Wq.add(X5.mul(c))),g=this.setupShadowCoord(e,p),y=r.filterNode||this.getShadowFilterFn(t.shadowMap.type)||null;if(y===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const q=s===ho?this.vsmShadowMapHorizontal.texture:a,S=this.setupShadowFilter(e,{filterFn:y,shadowTexture:o.texture,depthTexture:q,shadowCoord:g,shadow:r}),R=Zn(o.texture,g),M=Si(1,S.rgb.mix(R,1),u.mul(R.a)).toVar();return this.shadowMap=o,this.shadow.map=o,M}setup(e){if(e.renderer.shadowMap.enabled!==!1)return De(()=>{let t=this._node;return this.setupShadowPosition(e),t===null&&(this._node=t=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(t=e.material.receivedShadowNode(t)),t})()}renderShadow(e){const{shadow:t,shadowMap:n,light:r}=this,{renderer:s,scene:a}=e;t.updateMatrices(r),n.setSize(t.mapSize.width,t.mapSize.height),s.render(a,t.camera)}updateShadow(e){const{shadowMap:t,light:n,shadow:r}=this,{renderer:s,scene:a,camera:o}=e,u=s.shadowMap.type,c=t.depthTexture.version;this._depthVersionCached=c,r.camera.layers.mask=o.layers.mask;const p=s.getRenderObjectFunction(),g=s.getMRT(),y=g?g.has("velocity"):!1;f_=hoe(s,a,f_),a.overrideMaterial=poe(n),s.setRenderObjectFunction((q,S,R,M,E,U,...P)=>{(q.castShadow===!0||q.receiveShadow&&u===ho)&&(y&&(pD(q).useVelocity=!0),q.onBeforeShadow(s,q,o,r.camera,M,S.overrideMaterial,U),s.renderObject(q,S,R,M,E,U,...P),q.onAfterShadow(s,q,o,r.camera,M,S.overrideMaterial,U))}),s.setRenderTarget(t),this.renderShadow(e),s.setRenderObjectFunction(p),n.isPointLight!==!0&&u===ho&&this.vsmPass(s),foe(s,a,f_)}vsmPass(e){const{shadow:t}=this;this.vsmShadowMapVertical.setSize(t.mapSize.width,t.mapSize.height),this.vsmShadowMapHorizontal.setSize(t.mapSize.width,t.mapSize.height),e.setRenderTarget(this.vsmShadowMapVertical),g6.material=this.vsmMaterialVertical,g6.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),g6.material=this.vsmMaterialHorizontal,g6.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),super.dispose()}updateBefore(e){const{shadow:t}=this;let n=t.needsUpdate||t.autoUpdate;n&&(this._cameraFrameId[e.camera]===e.frameId&&(n=!1),this._cameraFrameId[e.camera]=e.frameId),n&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}}const mB=(i,e)=>et(new pB(i,e)),voe=new Xt,bl=De(([i,e])=>{const t=i.toVar(),n=Yi(t),r=Ol(1,Br(n.x,Br(n.y,n.z)));n.mulAssign(r),t.mulAssign(r.mul(e.mul(2).oneMinus()));const s=At(t.xy).toVar(),o=e.mul(1.5).oneMinus();return On(n.z.greaterThanEqual(o),()=>{On(t.z.greaterThan(0),()=>{s.x.assign(hi(4,t.x))})}).ElseIf(n.x.greaterThanEqual(o),()=>{const u=x3(t.x);s.x.assign(t.z.mul(u).add(u.mul(2)))}).ElseIf(n.y.greaterThanEqual(o),()=>{const u=x3(t.y);s.x.assign(t.x.add(u.mul(2)).add(2)),s.y.assign(t.z.mul(u).sub(2))}),At(.125,.25).mul(s).add(At(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),gB=De(({depthTexture:i,bd3D:e,dp:t,texelSize:n})=>Zn(i,bl(e,n.y)).compare(t)),_B=De(({depthTexture:i,bd3D:e,dp:t,texelSize:n,shadow:r})=>{const s=zi("radius","float",r).setGroup(fn),a=At(-1,1).mul(s).mul(n.y);return Zn(i,bl(e.add(a.xyy),n.y)).compare(t).add(Zn(i,bl(e.add(a.yyy),n.y)).compare(t)).add(Zn(i,bl(e.add(a.xyx),n.y)).compare(t)).add(Zn(i,bl(e.add(a.yyx),n.y)).compare(t)).add(Zn(i,bl(e,n.y)).compare(t)).add(Zn(i,bl(e.add(a.xxy),n.y)).compare(t)).add(Zn(i,bl(e.add(a.yxy),n.y)).compare(t)).add(Zn(i,bl(e.add(a.xxx),n.y)).compare(t)).add(Zn(i,bl(e.add(a.yxx),n.y)).compare(t)).mul(1/9)}),yoe=De(({filterFn:i,depthTexture:e,shadowCoord:t,shadow:n})=>{const r=t.xyz.toVar(),s=r.length(),a=Zt("float").setGroup(fn).onRenderUpdate(()=>n.camera.near),o=Zt("float").setGroup(fn).onRenderUpdate(()=>n.camera.far),u=zi("bias","float",n).setGroup(fn),c=Zt(n.mapSize).setGroup(fn),p=de(1).toVar();return On(s.sub(o).lessThanEqual(0).and(s.sub(a).greaterThanEqual(0)),()=>{const g=s.sub(a).div(o.sub(a)).toVar();g.addAssign(u);const y=r.normalize(),q=At(1).div(c.mul(At(4,2)));p.assign(i({depthTexture:e,bd3D:y,dp:g,texelSize:q,shadow:n}))}),p}),RR=new sn,zf=new rt,K2=new rt;class xoe extends pB{static get type(){return"PointShadowNode"}constructor(e,t=null){super(e,t)}getShadowFilterFn(e){return e===Ik?gB:_B}setupShadowCoord(e,t){return t}setupShadowFilter(e,{filterFn:t,shadowTexture:n,depthTexture:r,shadowCoord:s,shadow:a}){return yoe({filterFn:t,shadowTexture:n,depthTexture:r,shadowCoord:s,shadow:a})}renderShadow(e){const{shadow:t,shadowMap:n,light:r}=this,{renderer:s,scene:a}=e,o=t.getFrameExtents();K2.copy(t.mapSize),K2.multiply(o),n.setSize(K2.width,K2.height),zf.copy(t.mapSize);const u=s.autoClear,c=s.getClearColor(voe),p=s.getClearAlpha();s.autoClear=!1,s.setClearColor(t.clearColor,t.clearAlpha),s.clear();const g=t.getViewportCount();for(let y=0;y<g;y++){const q=t.getViewport(y),S=zf.x*q.x,R=K2.y-zf.y-zf.y*q.y;RR.set(S,R,zf.x*q.z,zf.y*q.w),n.viewport.copy(RR),t.updateMatrices(r,y),s.render(a,t.camera)}s.autoClear=u,s.setClearColor(c,p)}}const vB=(i,e)=>et(new xoe(i,e));class Rh extends bA{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Xt,this.colorNode=e&&e.colorNode||Zt(this.color).setGroup(fn),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=Pn.FRAME}customCacheKey(){return A3(this.light.id,this.light.castShadow?1:0)}getHash(){return this.light.uuid}getLightVector(e){return Vq(this.light).sub(e.context.positionView||zr)}setupDirect(){}setupDirectRectArea(){}setupShadowNode(){return mB(this.light)}setupShadow(e){const{renderer:t}=e;if(t.shadowMap.enabled===!1)return;let n=this.shadowColorNode;if(n===null){const r=this.light.shadow.shadowNode;let s;r!==void 0?s=et(r):s=this.setupShadowNode(),this.shadowNode=s,this.shadowColorNode=n=this.colorNode.mul(s),this.baseColorNode=this.colorNode}this.colorNode=n}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null);const t=this.setupDirect(e),n=this.setupDirectRectArea(e);t&&e.lightsNode.setupDirectLight(e,this,t),n&&e.lightsNode.setupDirectRectAreaLight(e,this,n)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const $q=De(({lightDistance:i,cutoffDistance:e,decayExponent:t})=>{const n=i.pow(t).max(.01).reciprocal();return e.greaterThan(0).select(n.mul(i.div(e).pow4().oneMinus().clamp().pow2()),n)}),yB=({color:i,lightVector:e,cutoffDistance:t,decayExponent:n})=>{const r=e.normalize(),s=e.length(),a=$q({lightDistance:s,cutoffDistance:t,decayExponent:n}),o=i.mul(a);return{lightDirection:r,lightColor:o}};class qoe extends Rh{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=Zt(0).setGroup(fn),this.decayExponentNode=Zt(2).setGroup(fn)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setupShadowNode(){return vB(this.light)}setupDirect(e){return yB({color:this.colorNode,lightVector:this.getLightVector(e),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode})}}const boe=De(([i=hr()])=>{const e=i.mul(2),t=e.x.floor(),n=e.y.floor();return t.add(n).mod(2).sign()}),Soe=De(([i=hr()],{renderer:e,material:t})=>{const n=de(1).toVar(),r=lq(i.mul(2).sub(1));if(t.alphaToCoverage&&e.samples>1){const s=de(r.fwidth()).toVar();n.assign(vu(s.oneMinus(),s.add(1),r).oneMinus())}else r.greaterThan(1).discard();return n}),Cp=De(([i,e,t])=>{const n=de(t).toVar(),r=de(e).toVar(),s=Pc(i).toVar();return Fs(s,r,n)}).setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]}),l5=De(([i,e])=>{const t=Pc(e).toVar(),n=de(i).toVar();return Fs(t,n.negate(),n)}).setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]}),Gr=De(([i])=>{const e=de(i).toVar();return ve(Au(e))}).setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]}),cr=De(([i,e])=>{const t=de(i).toVar();return e.assign(Gr(t)),t.sub(de(e))}),Toe=De(([i,e,t,n,r,s])=>{const a=de(s).toVar(),o=de(r).toVar(),u=de(n).toVar(),c=de(t).toVar(),p=de(e).toVar(),g=de(i).toVar(),y=de(hi(1,o)).toVar();return hi(1,a).mul(g.mul(y).add(p.mul(o))).add(a.mul(c.mul(y).add(u.mul(o))))}).setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]}),woe=De(([i,e,t,n,r,s])=>{const a=de(s).toVar(),o=de(r).toVar(),u=Te(n).toVar(),c=Te(t).toVar(),p=Te(e).toVar(),g=Te(i).toVar(),y=de(hi(1,o)).toVar();return hi(1,a).mul(g.mul(y).add(p.mul(o))).add(a.mul(c.mul(y).add(u.mul(o))))}).setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]}),xB=Vs([Toe,woe]),Eoe=De(([i,e,t,n,r,s,a,o,u,c,p])=>{const g=de(p).toVar(),y=de(c).toVar(),q=de(u).toVar(),S=de(o).toVar(),R=de(a).toVar(),M=de(s).toVar(),E=de(r).toVar(),U=de(n).toVar(),P=de(t).toVar(),O=de(e).toVar(),F=de(i).toVar(),I=de(hi(1,q)).toVar(),z=de(hi(1,y)).toVar();return de(hi(1,g)).toVar().mul(z.mul(F.mul(I).add(O.mul(q))).add(y.mul(P.mul(I).add(U.mul(q))))).add(g.mul(z.mul(E.mul(I).add(M.mul(q))).add(y.mul(R.mul(I).add(S.mul(q))))))}).setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),Moe=De(([i,e,t,n,r,s,a,o,u,c,p])=>{const g=de(p).toVar(),y=de(c).toVar(),q=de(u).toVar(),S=Te(o).toVar(),R=Te(a).toVar(),M=Te(s).toVar(),E=Te(r).toVar(),U=Te(n).toVar(),P=Te(t).toVar(),O=Te(e).toVar(),F=Te(i).toVar(),I=de(hi(1,q)).toVar(),z=de(hi(1,y)).toVar();return de(hi(1,g)).toVar().mul(z.mul(F.mul(I).add(O.mul(q))).add(y.mul(P.mul(I).add(U.mul(q))))).add(g.mul(z.mul(E.mul(I).add(M.mul(q))).add(y.mul(R.mul(I).add(S.mul(q))))))}).setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),qB=Vs([Eoe,Moe]),Roe=De(([i,e,t])=>{const n=de(t).toVar(),r=de(e).toVar(),s=Lt(i).toVar(),a=Lt(s.bitAnd(Lt(7))).toVar(),o=de(Cp(a.lessThan(Lt(4)),r,n)).toVar(),u=de(Dn(2,Cp(a.lessThan(Lt(4)),n,r))).toVar();return l5(o,Pc(a.bitAnd(Lt(1)))).add(l5(u,Pc(a.bitAnd(Lt(2)))))}).setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]}),Coe=De(([i,e,t,n])=>{const r=de(n).toVar(),s=de(t).toVar(),a=de(e).toVar(),o=Lt(i).toVar(),u=Lt(o.bitAnd(Lt(15))).toVar(),c=de(Cp(u.lessThan(Lt(8)),a,s)).toVar(),p=de(Cp(u.lessThan(Lt(4)),s,Cp(u.equal(Lt(12)).or(u.equal(Lt(14))),a,r))).toVar();return l5(c,Pc(u.bitAnd(Lt(1)))).add(l5(p,Pc(u.bitAnd(Lt(2)))))}).setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),xs=Vs([Roe,Coe]),Noe=De(([i,e,t])=>{const n=de(t).toVar(),r=de(e).toVar(),s=xA(i).toVar();return Te(xs(s.x,r,n),xs(s.y,r,n),xs(s.z,r,n))}).setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]}),Poe=De(([i,e,t,n])=>{const r=de(n).toVar(),s=de(t).toVar(),a=de(e).toVar(),o=xA(i).toVar();return Te(xs(o.x,a,s,r),xs(o.y,a,s,r),xs(o.z,a,s,r))}).setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),Go=Vs([Noe,Poe]),Doe=De(([i])=>{const e=de(i).toVar();return Dn(.6616,e)}).setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]}),Loe=De(([i])=>{const e=de(i).toVar();return Dn(.982,e)}).setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]}),Uoe=De(([i])=>{const e=Te(i).toVar();return Dn(.6616,e)}).setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),bB=Vs([Doe,Uoe]),Ooe=De(([i])=>{const e=Te(i).toVar();return Dn(.982,e)}).setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),SB=Vs([Loe,Ooe]),po=De(([i,e])=>{const t=ve(e).toVar(),n=Lt(i).toVar();return n.shiftLeft(t).bitOr(n.shiftRight(ve(32).sub(t)))}).setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]}),TB=De(([i,e,t])=>{i.subAssign(t),i.bitXorAssign(po(t,ve(4))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(po(i,ve(6))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(po(e,ve(8))),e.addAssign(i),i.subAssign(t),i.bitXorAssign(po(t,ve(16))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(po(i,ve(19))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(po(e,ve(4))),e.addAssign(i)}),e4=De(([i,e,t])=>{const n=Lt(t).toVar(),r=Lt(e).toVar(),s=Lt(i).toVar();return n.bitXorAssign(r),n.subAssign(po(r,ve(14))),s.bitXorAssign(n),s.subAssign(po(n,ve(11))),r.bitXorAssign(s),r.subAssign(po(s,ve(25))),n.bitXorAssign(r),n.subAssign(po(r,ve(16))),s.bitXorAssign(n),s.subAssign(po(n,ve(4))),r.bitXorAssign(s),r.subAssign(po(s,ve(14))),n.bitXorAssign(r),n.subAssign(po(r,ve(24))),n}).setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]}),ta=De(([i])=>{const e=Lt(i).toVar();return de(e).div(de(Lt(ve(4294967295))))}).setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]}),pu=De(([i])=>{const e=de(i).toVar();return e.mul(e).mul(e).mul(e.mul(e.mul(6).sub(15)).add(10))}).setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]}),Boe=De(([i])=>{const e=ve(i).toVar(),t=Lt(Lt(1)).toVar(),n=Lt(Lt(ve(3735928559)).add(t.shiftLeft(Lt(2))).add(Lt(13))).toVar();return e4(n.add(Lt(e)),n,n)}).setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]}),Ioe=De(([i,e])=>{const t=ve(e).toVar(),n=ve(i).toVar(),r=Lt(Lt(2)).toVar(),s=Lt().toVar(),a=Lt().toVar(),o=Lt().toVar();return s.assign(a.assign(o.assign(Lt(ve(3735928559)).add(r.shiftLeft(Lt(2))).add(Lt(13))))),s.addAssign(Lt(n)),a.addAssign(Lt(t)),e4(s,a,o)}).setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Foe=De(([i,e,t])=>{const n=ve(t).toVar(),r=ve(e).toVar(),s=ve(i).toVar(),a=Lt(Lt(3)).toVar(),o=Lt().toVar(),u=Lt().toVar(),c=Lt().toVar();return o.assign(u.assign(c.assign(Lt(ve(3735928559)).add(a.shiftLeft(Lt(2))).add(Lt(13))))),o.addAssign(Lt(s)),u.addAssign(Lt(r)),c.addAssign(Lt(n)),e4(o,u,c)}).setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),koe=De(([i,e,t,n])=>{const r=ve(n).toVar(),s=ve(t).toVar(),a=ve(e).toVar(),o=ve(i).toVar(),u=Lt(Lt(4)).toVar(),c=Lt().toVar(),p=Lt().toVar(),g=Lt().toVar();return c.assign(p.assign(g.assign(Lt(ve(3735928559)).add(u.shiftLeft(Lt(2))).add(Lt(13))))),c.addAssign(Lt(o)),p.addAssign(Lt(a)),g.addAssign(Lt(s)),TB(c,p,g),c.addAssign(Lt(r)),e4(c,p,g)}).setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]}),zoe=De(([i,e,t,n,r])=>{const s=ve(r).toVar(),a=ve(n).toVar(),o=ve(t).toVar(),u=ve(e).toVar(),c=ve(i).toVar(),p=Lt(Lt(5)).toVar(),g=Lt().toVar(),y=Lt().toVar(),q=Lt().toVar();return g.assign(y.assign(q.assign(Lt(ve(3735928559)).add(p.shiftLeft(Lt(2))).add(Lt(13))))),g.addAssign(Lt(c)),y.addAssign(Lt(u)),q.addAssign(Lt(o)),TB(g,y,q),g.addAssign(Lt(a)),y.addAssign(Lt(s)),e4(g,y,q)}).setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]}),Ni=Vs([Boe,Ioe,Foe,koe,zoe]),Goe=De(([i,e])=>{const t=ve(e).toVar(),n=ve(i).toVar(),r=Lt(Ni(n,t)).toVar(),s=xA().toVar();return s.x.assign(r.bitAnd(ve(255))),s.y.assign(r.shiftRight(ve(8)).bitAnd(ve(255))),s.z.assign(r.shiftRight(ve(16)).bitAnd(ve(255))),s}).setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Voe=De(([i,e,t])=>{const n=ve(t).toVar(),r=ve(e).toVar(),s=ve(i).toVar(),a=Lt(Ni(s,r,n)).toVar(),o=xA().toVar();return o.x.assign(a.bitAnd(ve(255))),o.y.assign(a.shiftRight(ve(8)).bitAnd(ve(255))),o.z.assign(a.shiftRight(ve(16)).bitAnd(ve(255))),o}).setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),Vo=Vs([Goe,Voe]),Hoe=De(([i])=>{const e=At(i).toVar(),t=ve().toVar(),n=ve().toVar(),r=de(cr(e.x,t)).toVar(),s=de(cr(e.y,n)).toVar(),a=de(pu(r)).toVar(),o=de(pu(s)).toVar(),u=de(xB(xs(Ni(t,n),r,s),xs(Ni(t.add(ve(1)),n),r.sub(1),s),xs(Ni(t,n.add(ve(1))),r,s.sub(1)),xs(Ni(t.add(ve(1)),n.add(ve(1))),r.sub(1),s.sub(1)),a,o)).toVar();return bB(u)}).setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]}),joe=De(([i])=>{const e=Te(i).toVar(),t=ve().toVar(),n=ve().toVar(),r=ve().toVar(),s=de(cr(e.x,t)).toVar(),a=de(cr(e.y,n)).toVar(),o=de(cr(e.z,r)).toVar(),u=de(pu(s)).toVar(),c=de(pu(a)).toVar(),p=de(pu(o)).toVar(),g=de(qB(xs(Ni(t,n,r),s,a,o),xs(Ni(t.add(ve(1)),n,r),s.sub(1),a,o),xs(Ni(t,n.add(ve(1)),r),s,a.sub(1),o),xs(Ni(t.add(ve(1)),n.add(ve(1)),r),s.sub(1),a.sub(1),o),xs(Ni(t,n,r.add(ve(1))),s,a,o.sub(1)),xs(Ni(t.add(ve(1)),n,r.add(ve(1))),s.sub(1),a,o.sub(1)),xs(Ni(t,n.add(ve(1)),r.add(ve(1))),s,a.sub(1),o.sub(1)),xs(Ni(t.add(ve(1)),n.add(ve(1)),r.add(ve(1))),s.sub(1),a.sub(1),o.sub(1)),u,c,p)).toVar();return SB(g)}).setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]}),Xq=Vs([Hoe,joe]),Woe=De(([i])=>{const e=At(i).toVar(),t=ve().toVar(),n=ve().toVar(),r=de(cr(e.x,t)).toVar(),s=de(cr(e.y,n)).toVar(),a=de(pu(r)).toVar(),o=de(pu(s)).toVar(),u=Te(xB(Go(Vo(t,n),r,s),Go(Vo(t.add(ve(1)),n),r.sub(1),s),Go(Vo(t,n.add(ve(1))),r,s.sub(1)),Go(Vo(t.add(ve(1)),n.add(ve(1))),r.sub(1),s.sub(1)),a,o)).toVar();return bB(u)}).setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),$oe=De(([i])=>{const e=Te(i).toVar(),t=ve().toVar(),n=ve().toVar(),r=ve().toVar(),s=de(cr(e.x,t)).toVar(),a=de(cr(e.y,n)).toVar(),o=de(cr(e.z,r)).toVar(),u=de(pu(s)).toVar(),c=de(pu(a)).toVar(),p=de(pu(o)).toVar(),g=Te(qB(Go(Vo(t,n,r),s,a,o),Go(Vo(t.add(ve(1)),n,r),s.sub(1),a,o),Go(Vo(t,n.add(ve(1)),r),s,a.sub(1),o),Go(Vo(t.add(ve(1)),n.add(ve(1)),r),s.sub(1),a.sub(1),o),Go(Vo(t,n,r.add(ve(1))),s,a,o.sub(1)),Go(Vo(t.add(ve(1)),n,r.add(ve(1))),s.sub(1),a,o.sub(1)),Go(Vo(t,n.add(ve(1)),r.add(ve(1))),s,a.sub(1),o.sub(1)),Go(Vo(t.add(ve(1)),n.add(ve(1)),r.add(ve(1))),s.sub(1),a.sub(1),o.sub(1)),u,c,p)).toVar();return SB(g)}).setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),Qq=Vs([Woe,$oe]),Xoe=De(([i])=>{const e=de(i).toVar(),t=ve(Gr(e)).toVar();return ta(Ni(t))}).setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]}),Qoe=De(([i])=>{const e=At(i).toVar(),t=ve(Gr(e.x)).toVar(),n=ve(Gr(e.y)).toVar();return ta(Ni(t,n))}).setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]}),Yoe=De(([i])=>{const e=Te(i).toVar(),t=ve(Gr(e.x)).toVar(),n=ve(Gr(e.y)).toVar(),r=ve(Gr(e.z)).toVar();return ta(Ni(t,n,r))}).setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]}),Koe=De(([i])=>{const e=Jt(i).toVar(),t=ve(Gr(e.x)).toVar(),n=ve(Gr(e.y)).toVar(),r=ve(Gr(e.z)).toVar(),s=ve(Gr(e.w)).toVar();return ta(Ni(t,n,r,s))}).setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]}),Zoe=Vs([Xoe,Qoe,Yoe,Koe]),Joe=De(([i])=>{const e=de(i).toVar(),t=ve(Gr(e)).toVar();return Te(ta(Ni(t,ve(0))),ta(Ni(t,ve(1))),ta(Ni(t,ve(2))))}).setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]}),ele=De(([i])=>{const e=At(i).toVar(),t=ve(Gr(e.x)).toVar(),n=ve(Gr(e.y)).toVar();return Te(ta(Ni(t,n,ve(0))),ta(Ni(t,n,ve(1))),ta(Ni(t,n,ve(2))))}).setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),tle=De(([i])=>{const e=Te(i).toVar(),t=ve(Gr(e.x)).toVar(),n=ve(Gr(e.y)).toVar(),r=ve(Gr(e.z)).toVar();return Te(ta(Ni(t,n,r,ve(0))),ta(Ni(t,n,r,ve(1))),ta(Ni(t,n,r,ve(2))))}).setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),nle=De(([i])=>{const e=Jt(i).toVar(),t=ve(Gr(e.x)).toVar(),n=ve(Gr(e.y)).toVar(),r=ve(Gr(e.z)).toVar(),s=ve(Gr(e.w)).toVar();return Te(ta(Ni(t,n,r,s,ve(0))),ta(Ni(t,n,r,s,ve(1))),ta(Ni(t,n,r,s,ve(2))))}).setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]}),wB=Vs([Joe,ele,tle,nle]),u5=De(([i,e,t,n])=>{const r=de(n).toVar(),s=de(t).toVar(),a=ve(e).toVar(),o=Te(i).toVar(),u=de(0).toVar(),c=de(1).toVar();return Ti(a,()=>{u.addAssign(c.mul(Xq(o))),c.mulAssign(r),o.mulAssign(s)}),u}).setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),EB=De(([i,e,t,n])=>{const r=de(n).toVar(),s=de(t).toVar(),a=ve(e).toVar(),o=Te(i).toVar(),u=Te(0).toVar(),c=de(1).toVar();return Ti(a,()=>{u.addAssign(c.mul(Qq(o))),c.mulAssign(r),o.mulAssign(s)}),u}).setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),ile=De(([i,e,t,n])=>{const r=de(n).toVar(),s=de(t).toVar(),a=ve(e).toVar(),o=Te(i).toVar();return At(u5(o,a,s,r),u5(o.add(Te(ve(19),ve(193),ve(17))),a,s,r))}).setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),rle=De(([i,e,t,n])=>{const r=de(n).toVar(),s=de(t).toVar(),a=ve(e).toVar(),o=Te(i).toVar(),u=Te(EB(o,a,s,r)).toVar(),c=de(u5(o.add(Te(ve(19),ve(193),ve(17))),a,s,r)).toVar();return Jt(u,c)}).setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),sle=De(([i,e,t,n,r,s,a])=>{const o=ve(a).toVar(),u=de(s).toVar(),c=ve(r).toVar(),p=ve(n).toVar(),g=ve(t).toVar(),y=ve(e).toVar(),q=At(i).toVar(),S=Te(wB(At(y.add(p),g.add(c)))).toVar(),R=At(S.x,S.y).toVar();R.subAssign(.5),R.mulAssign(u),R.addAssign(.5);const M=At(At(de(y),de(g)).add(R)).toVar(),E=At(M.sub(q)).toVar();return On(o.equal(ve(2)),()=>Yi(E.x).add(Yi(E.y))),On(o.equal(ve(3)),()=>Br(Yi(E.x),Yi(E.y))),e0(E,E)}).setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),ale=De(([i,e,t,n,r,s,a,o,u])=>{const c=ve(u).toVar(),p=de(o).toVar(),g=ve(a).toVar(),y=ve(s).toVar(),q=ve(r).toVar(),S=ve(n).toVar(),R=ve(t).toVar(),M=ve(e).toVar(),E=Te(i).toVar(),U=Te(wB(Te(M.add(q),R.add(y),S.add(g)))).toVar();U.subAssign(.5),U.mulAssign(p),U.addAssign(.5);const P=Te(Te(de(M),de(R),de(S)).add(U)).toVar(),O=Te(P.sub(E)).toVar();return On(c.equal(ve(2)),()=>Yi(O.x).add(Yi(O.y)).add(Yi(O.z))),On(c.equal(ve(3)),()=>Br(Br(Yi(O.x),Yi(O.y)),Yi(O.z))),e0(O,O)}).setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),SA=Vs([sle,ale]),ole=De(([i,e,t])=>{const n=ve(t).toVar(),r=de(e).toVar(),s=At(i).toVar(),a=ve().toVar(),o=ve().toVar(),u=At(cr(s.x,a),cr(s.y,o)).toVar(),c=de(1e6).toVar();return Ti({start:-1,end:ve(1),name:"x",condition:"<="},({x:p})=>{Ti({start:-1,end:ve(1),name:"y",condition:"<="},({y:g})=>{const y=de(SA(u,p,g,a,o,r,n)).toVar();c.assign(Ha(c,y))})}),On(n.equal(ve(0)),()=>{c.assign(Ru(c))}),c}).setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),lle=De(([i,e,t])=>{const n=ve(t).toVar(),r=de(e).toVar(),s=At(i).toVar(),a=ve().toVar(),o=ve().toVar(),u=At(cr(s.x,a),cr(s.y,o)).toVar(),c=At(1e6,1e6).toVar();return Ti({start:-1,end:ve(1),name:"x",condition:"<="},({x:p})=>{Ti({start:-1,end:ve(1),name:"y",condition:"<="},({y:g})=>{const y=de(SA(u,p,g,a,o,r,n)).toVar();On(y.lessThan(c.x),()=>{c.y.assign(c.x),c.x.assign(y)}).ElseIf(y.lessThan(c.y),()=>{c.y.assign(y)})})}),On(n.equal(ve(0)),()=>{c.assign(Ru(c))}),c}).setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),ule=De(([i,e,t])=>{const n=ve(t).toVar(),r=de(e).toVar(),s=At(i).toVar(),a=ve().toVar(),o=ve().toVar(),u=At(cr(s.x,a),cr(s.y,o)).toVar(),c=Te(1e6,1e6,1e6).toVar();return Ti({start:-1,end:ve(1),name:"x",condition:"<="},({x:p})=>{Ti({start:-1,end:ve(1),name:"y",condition:"<="},({y:g})=>{const y=de(SA(u,p,g,a,o,r,n)).toVar();On(y.lessThan(c.x),()=>{c.z.assign(c.y),c.y.assign(c.x),c.x.assign(y)}).ElseIf(y.lessThan(c.y),()=>{c.z.assign(c.y),c.y.assign(y)}).ElseIf(y.lessThan(c.z),()=>{c.z.assign(y)})})}),On(n.equal(ve(0)),()=>{c.assign(Ru(c))}),c}).setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),cle=De(([i,e,t])=>{const n=ve(t).toVar(),r=de(e).toVar(),s=Te(i).toVar(),a=ve().toVar(),o=ve().toVar(),u=ve().toVar(),c=Te(cr(s.x,a),cr(s.y,o),cr(s.z,u)).toVar(),p=de(1e6).toVar();return Ti({start:-1,end:ve(1),name:"x",condition:"<="},({x:g})=>{Ti({start:-1,end:ve(1),name:"y",condition:"<="},({y})=>{Ti({start:-1,end:ve(1),name:"z",condition:"<="},({z:q})=>{const S=de(SA(c,g,y,q,a,o,u,r,n)).toVar();p.assign(Ha(p,S))})})}),On(n.equal(ve(0)),()=>{p.assign(Ru(p))}),p}).setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),hle=Vs([ole,cle]),fle=De(([i,e,t])=>{const n=ve(t).toVar(),r=de(e).toVar(),s=Te(i).toVar(),a=ve().toVar(),o=ve().toVar(),u=ve().toVar(),c=Te(cr(s.x,a),cr(s.y,o),cr(s.z,u)).toVar(),p=At(1e6,1e6).toVar();return Ti({start:-1,end:ve(1),name:"x",condition:"<="},({x:g})=>{Ti({start:-1,end:ve(1),name:"y",condition:"<="},({y})=>{Ti({start:-1,end:ve(1),name:"z",condition:"<="},({z:q})=>{const S=de(SA(c,g,y,q,a,o,u,r,n)).toVar();On(S.lessThan(p.x),()=>{p.y.assign(p.x),p.x.assign(S)}).ElseIf(S.lessThan(p.y),()=>{p.y.assign(S)})})})}),On(n.equal(ve(0)),()=>{p.assign(Ru(p))}),p}).setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),dle=Vs([lle,fle]),Ale=De(([i,e,t])=>{const n=ve(t).toVar(),r=de(e).toVar(),s=Te(i).toVar(),a=ve().toVar(),o=ve().toVar(),u=ve().toVar(),c=Te(cr(s.x,a),cr(s.y,o),cr(s.z,u)).toVar(),p=Te(1e6,1e6,1e6).toVar();return Ti({start:-1,end:ve(1),name:"x",condition:"<="},({x:g})=>{Ti({start:-1,end:ve(1),name:"y",condition:"<="},({y})=>{Ti({start:-1,end:ve(1),name:"z",condition:"<="},({z:q})=>{const S=de(SA(c,g,y,q,a,o,u,r,n)).toVar();On(S.lessThan(p.x),()=>{p.z.assign(p.y),p.y.assign(p.x),p.x.assign(S)}).ElseIf(S.lessThan(p.y),()=>{p.z.assign(p.y),p.y.assign(S)}).ElseIf(S.lessThan(p.z),()=>{p.z.assign(S)})})})}),On(n.equal(ve(0)),()=>{p.assign(Ru(p))}),p}).setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),ple=Vs([ule,Ale]),mle=De(([i])=>{const e=i.y,t=i.z,n=Te().toVar();return On(e.lessThan(1e-4),()=>{n.assign(Te(t,t,t))}).Else(()=>{let r=i.x;r=r.sub(Au(r)).mul(6).toVar();const s=ve(aq(r)),a=r.sub(de(s)),o=t.mul(e.oneMinus()),u=t.mul(e.mul(a).oneMinus()),c=t.mul(e.mul(a.oneMinus()).oneMinus());On(s.equal(ve(0)),()=>{n.assign(Te(t,c,o))}).ElseIf(s.equal(ve(1)),()=>{n.assign(Te(u,t,o))}).ElseIf(s.equal(ve(2)),()=>{n.assign(Te(o,t,c))}).ElseIf(s.equal(ve(3)),()=>{n.assign(Te(o,u,t))}).ElseIf(s.equal(ve(4)),()=>{n.assign(Te(c,o,t))}).Else(()=>{n.assign(Te(t,o,u))})}),n}).setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]}),gle=De(([i])=>{const e=Te(i).toVar(),t=de(e.x).toVar(),n=de(e.y).toVar(),r=de(e.z).toVar(),s=de(Ha(t,Ha(n,r))).toVar(),a=de(Br(t,Br(n,r))).toVar(),o=de(a.sub(s)).toVar(),u=de().toVar(),c=de().toVar(),p=de().toVar();return p.assign(a),On(a.greaterThan(0),()=>{c.assign(o.div(a))}).Else(()=>{c.assign(0)}),On(c.lessThanEqual(0),()=>{u.assign(0)}).Else(()=>{On(t.greaterThanEqual(a),()=>{u.assign(n.sub(r).div(o))}).ElseIf(n.greaterThanEqual(a),()=>{u.assign(Vr(2,r.sub(t).div(o)))}).Else(()=>{u.assign(Vr(4,t.sub(n).div(o)))}),u.mulAssign(1/6),On(u.lessThan(0),()=>{u.addAssign(1)})}),Te(u,c,p)}).setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]}),_le=De(([i])=>{const e=Te(i).toVar(),t=jx(eq(e,Te(.04045))).toVar(),n=Te(e.div(12.92)).toVar(),r=Te(Nl(Br(e.add(Te(.055)),Te(0)).div(1.055),Te(2.4))).toVar();return Si(n,r,t)}).setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),MB=(i,e)=>{i=de(i),e=de(e);const t=At(e.dFdx(),e.dFdy()).length().mul(.7071067811865476);return vu(i.sub(t),i.add(t),e)},RB=(i,e,t,n)=>Si(i,e,t[n].clamp()),vle=(i,e,t=hr())=>RB(i,e,t,"x"),yle=(i,e,t=hr())=>RB(i,e,t,"y"),CB=(i,e,t,n,r)=>Si(i,e,MB(t,n[r])),xle=(i,e,t,n=hr())=>CB(i,e,t,n,"x"),qle=(i,e,t,n=hr())=>CB(i,e,t,n,"y"),ble=(i=1,e=0,t=hr())=>t.mul(i).add(e),Sle=(i,e=1)=>(i=de(i),i.abs().pow(e).mul(i.sign())),Tle=(i,e=1,t=.5)=>de(i).sub(t).mul(e).add(t),wle=(i=hr(),e=1,t=0)=>Xq(i.convert("vec2|vec3")).mul(e).add(t),Ele=(i=hr(),e=1,t=0)=>Qq(i.convert("vec2|vec3")).mul(e).add(t),Mle=(i=hr(),e=1,t=0)=>(i=i.convert("vec2|vec3"),Jt(Qq(i),Xq(i.add(At(19,73)))).mul(e).add(t)),Rle=(i=hr(),e=1)=>hle(i.convert("vec2|vec3"),e,ve(1)),Cle=(i=hr(),e=1)=>dle(i.convert("vec2|vec3"),e,ve(1)),Nle=(i=hr(),e=1)=>ple(i.convert("vec2|vec3"),e,ve(1)),Ple=(i=hr())=>Zoe(i.convert("vec2|vec3")),Dle=(i=hr(),e=3,t=2,n=.5,r=1)=>u5(i,ve(e),t,n).mul(r),Lle=(i=hr(),e=3,t=2,n=.5,r=1)=>ile(i,ve(e),t,n).mul(r),Ule=(i=hr(),e=3,t=2,n=.5,r=1)=>EB(i,ve(e),t,n).mul(r),Ole=(i=hr(),e=3,t=2,n=.5,r=1)=>rle(i,ve(e),t,n).mul(r),Ble=De(([i,e,t])=>{const n=Dc(i).toVar(),r=hi(de(.5).mul(e.sub(t)),Tc).div(n).toVar(),s=hi(de(-.5).mul(e.sub(t)),Tc).div(n).toVar(),a=Te().toVar();a.x=n.x.greaterThan(de(0)).select(r.x,s.x),a.y=n.y.greaterThan(de(0)).select(r.y,s.y),a.z=n.z.greaterThan(de(0)).select(r.z,s.z);const o=Ha(Ha(a.x,a.y),a.z).toVar();return Tc.add(n.mul(o)).toVar().sub(t)}),NB=De(([i,e])=>{const t=i.x,n=i.y,r=i.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(n)),s=s.add(e.element(2).mul(2*.511664).mul(r)),s=s.add(e.element(3).mul(2*.511664).mul(t)),s=s.add(e.element(4).mul(2*.429043).mul(t).mul(n)),s=s.add(e.element(5).mul(2*.429043).mul(n).mul(r)),s=s.add(e.element(6).mul(r.mul(r).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(t).mul(r)),s=s.add(e.element(8).mul(.429043).mul(Dn(t,t).sub(Dn(n,n)))),s});var H=Object.freeze({__proto__:null,BRDF_GGX:ey,BRDF_Lambert:qh,BasicPointShadowFilter:gB,BasicShadowFilter:hB,Break:sO,Const:DL,Continue:Dne,DFGApprox:Cq,D_GGX:yO,Discard:KL,EPSILON:nL,F_Schlick:lA,Fn:De,INFINITY:gte,If:On,Loop:Ti,NodeAccess:ea,NodeShaderStage:Vv,NodeType:jee,NodeUpdateType:Pn,PCFShadowFilter:fB,PCFSoftShadowFilter:dB,PI:i5,PI2:_te,PointShadowFilter:_B,Return:Dte,Schlick_to_F0:qO,ScriptableNodeResources:u8,ShaderNode:Sp,TBNViewMatrix:nh,VSMShadowFilter:AB,V_GGX_SmithCorrelated:vO,Var:PL,abs:Yi,acesFilmicToneMapping:nB,acos:uL,add:Vr,addMethodChaining:Ze,addNodeElement:Ote,agxToneMapping:iB,all:iL,alphaT:e5,and:HD,anisotropy:C1,anisotropyB:ch,anisotropyT:Tp,any:rL,append:SD,array:LD,arrayBuffer:fte,asin:lL,assign:ID,atan:iq,atan2:ML,atomicAdd:Xae,atomicAnd:Zae,atomicFunc:Cu,atomicLoad:Wae,atomicMax:Yae,atomicMin:Kae,atomicOr:Jae,atomicStore:$ae,atomicSub:Qae,atomicXor:eoe,attenuationColor:Kx,attenuationDistance:Yx,attribute:yu,attributeArray:Bse,backgroundBlurriness:HO,backgroundIntensity:ay,backgroundRotation:jO,batch:nO,billboarding:yse,bitAnd:XD,bitNot:QD,bitOr:YD,bitXor:KD,bitangentGeometry:cne,bitangentLocal:hne,bitangentView:mU,bitangentWorld:fne,bitcast:vte,blendBurn:XO,blendColor:Zse,blendDodge:QO,blendOverlay:KO,blendScreen:YO,blur:RO,bool:Pc,buffer:W3,bufferAttribute:j3,bumpMap:yU,burn:Jse,bvec2:ED,bvec3:jx,bvec4:ND,bypass:$L,cache:Ep,call:FD,cameraFar:L1,cameraIndex:Aq,cameraNear:D1,cameraNormalMatrix:jte,cameraPosition:iU,cameraProjectionMatrix:wh,cameraProjectionMatrixInverse:Vte,cameraViewMatrix:$a,cameraWorldMatrix:Hte,cbrt:bL,cdl:oae,ceil:z5,checker:boe,cineonToneMapping:tB,clamp:_u,clearcoat:J8,clearcoatRoughness:v3,code:t9,color:TD,colorSpaceToWorking:j5,colorToDirection:lie,compute:WL,computeSkinning:Nne,cond:RL,context:H5,convert:DD,convertColorSpace:Ste,convertToTexture:Dse,cos:pc,cross:V5,cubeTexture:oA,cubeToUV:bl,dFdx:rq,dFdy:sq,dashSize:t8,debug:JL,defaultBuildStages:Hv,defaultShaderStages:_D,defined:p3,degrees:aL,deltaTime:zO,densityFog:Rae,densityFogFactor:Fq,depth:wq,depthPass:fae,difference:vL,diffuseColor:qi,directPointLight:yB,directionToColor:fO,dispersion:Zx,distance:_L,div:Ol,dodge:eae,dot:e0,drawIndex:JU,dynamicBufferAttribute:jL,element:PD,emissive:Xv,equal:Jx,equals:mL,equirectUV:Eq,exp:tq,exp2:aA,expression:Y1,faceDirection:X3,faceForward:cq,faceforward:yte,float:de,floor:Au,fog:b3,fract:Bc,frameGroup:BD,frameId:cse,frontFacing:oU,fwidth:AL,gain:ise,gapSize:Qv,getConstNodeType:bD,getCurrentStack:Hx,getDirection:EO,getDistanceAttenuation:$q,getGeometryRoughness:_O,getNormalFromDepth:Use,getParallaxCorrectNormal:Ble,getRoughness:Rq,getScreenPosition:Lse,getShIrradianceAt:NB,getTextureIndex:FO,getViewPosition:sd,globalId:Uae,glsl:xae,glslFn:qae,grayscale:iae,greaterThan:eq,greaterThanEqual:VD,hash:nse,highpModelNormalViewMatrix:rne,highpModelViewMatrix:ine,hue:aae,instance:Sne,instanceIndex:H1,instancedArray:Ise,instancedBufferAttribute:r5,instancedDynamicBufferAttribute:Yv,instancedMesh:tO,int:ve,inverseSqrt:nq,inversesqrt:xte,invocationLocalIndex:bne,invocationSubgroupIndex:qne,ior:wp,iridescence:F5,iridescenceIOR:$x,iridescenceThickness:Xx,ivec2:is,ivec3:MD,ivec4:RD,js:vae,label:NL,length:Sc,lengthSq:lq,lessThan:zD,lessThanEqual:GD,lightPosition:Gq,lightProjectionUV:uB,lightShadowMatrix:zq,lightTargetDirection:Hq,lightTargetPosition:cB,lightViewPosition:Vq,lightingContext:oO,lights:ioe,linearDepth:a5,linearToneMapping:JO,localId:Oae,log:k5,log2:du,logarithmicDepthToViewZ:$ne,loop:Lne,luminance:Bq,mat2:O5,mat3:ra,mat4:uh,matcapUV:PO,materialAO:KU,materialAlphaTest:xU,materialAnisotropy:OU,materialAnisotropyVector:rd,materialAttenuationColor:HU,materialAttenuationDistance:VU,materialClearcoat:CU,materialClearcoatNormal:PU,materialClearcoatRoughness:NU,materialColor:qU,materialDispersion:YU,materialEmissive:SU,materialEnvIntensity:r8,materialEnvRotation:gq,materialIOR:GU,materialIridescence:BU,materialIridescenceIOR:IU,materialIridescenceThickness:FU,materialLightMap:yq,materialLineDashOffset:XU,materialLineDashSize:WU,materialLineGapSize:$U,materialLineScale:jU,materialLineWidth:yne,materialMetalness:MU,materialNormal:RU,materialOpacity:vq,materialPointSize:QU,materialReference:_c,materialReflectivity:s8,materialRefractionRatio:cU,materialRotation:DU,materialRoughness:EU,materialSheen:LU,materialSheenRoughness:UU,materialShininess:bU,materialSpecular:TU,materialSpecularColor:wU,materialSpecularIntensity:Jv,materialSpecularStrength:Mp,materialThickness:zU,materialTransmission:kU,max:Br,maxMipLevel:tU,mediumpModelViewMatrix:aU,metalness:_3,min:Ha,mix:Si,mixElement:wL,mod:G3,modInt:tL,modelDirection:Kte,modelNormalMatrix:sU,modelPosition:Zte,modelRadius:tne,modelScale:Jte,modelViewMatrix:Eh,modelViewPosition:ene,modelViewProjection:xq,modelWorldMatrix:Wo,modelWorldMatrixInverse:nne,morphReference:aO,mrt:kO,mul:Dn,mx_aastep:MB,mx_cell_noise_float:Ple,mx_contrast:Tle,mx_fractal_noise_float:Dle,mx_fractal_noise_vec2:Lle,mx_fractal_noise_vec3:Ule,mx_fractal_noise_vec4:Ole,mx_hsvtorgb:mle,mx_noise_float:wle,mx_noise_vec3:Ele,mx_noise_vec4:Mle,mx_ramplr:vle,mx_ramptb:yle,mx_rgbtohsv:gle,mx_safepower:Sle,mx_splitlr:xle,mx_splittb:qle,mx_srgb_texture_to_lin_rec709:_le,mx_transform_uv:ble,mx_worley_noise_float:Rle,mx_worley_noise_vec2:Cle,mx_worley_noise_vec3:Nle,negate:cL,neutralToneMapping:rB,nodeArray:lh,nodeImmutable:Mt,nodeObject:et,nodeObjects:k3,nodeProxy:tt,normalFlat:lU,normalGeometry:W5,normalLocal:ja,normalMap:Zv,normalView:el,normalWorld:$5,normalize:Dc,not:WD,notEqual:kD,numWorkgroups:Dae,objectDirection:Wte,objectGroup:Wx,objectPosition:rU,objectRadius:Yte,objectScale:Xte,objectViewPosition:Qte,objectWorldMatrix:$te,oneMinus:hL,or:jD,orthographicDepthToViewZ:Wne,oscSawtooth:gse,oscSine:Ase,oscSquare:pse,oscTriangle:mse,output:Td,outputStruct:ese,overlay:nae,overloadingFn:Vs,parabola:sy,parallaxDirection:_U,parallaxUV:Ane,parameter:Xre,pass:cae,passTexture:hae,pcurve:rse,perspectiveDepthToViewZ:Sq,pmremTexture:Dq,pointShadow:vB,pointUV:Gse,pointWidth:Ate,positionGeometry:$3,positionLocal:Lr,positionPrevious:s5,positionView:zr,positionViewDirection:ar,positionWorld:Tc,positionWorldDirection:pq,posterize:uae,pow:Nl,pow2:oq,pow3:yL,pow4:xL,property:qA,radians:sL,rand:TL,range:Nae,rangeFog:Mae,rangeFogFactor:Iq,reciprocal:dL,reference:zi,referenceBuffer:Kv,reflect:gL,reflectVector:dU,reflectView:hU,reflector:Mse,refract:uq,refractVector:AU,refractView:fU,reinhardToneMapping:eB,remainder:eL,remap:QL,remapClamp:YL,renderGroup:fn,renderOutput:ZL,rendererReference:GL,rotate:e9,rotateUV:_se,roughness:ru,round:fL,rtt:VO,sRGBTransferEOTF:OL,sRGBTransferOETF:BL,sampler:Fte,samplerComparison:kte,saturate:SL,saturation:rae,screen:tae,screenCoordinate:Z3,screenSize:q3,screenUV:qu,scriptable:Eae,scriptableValue:l8,select:Fs,setCurrentStack:m3,shaderStages:jv,shadow:mB,shadowPositionWorld:Wq,shapeCircle:Soe,sharedUniformGroup:B5,sheen:th,sheenRoughness:I5,shiftLeft:ZD,shiftRight:JD,shininess:t5,sign:x3,sin:go,sinc:sse,skinning:rO,smoothstep:vu,smoothstepElement:EL,specularColor:Ea,specularF90:y3,spherizeUV:vse,split:dte,spritesheetUV:bse,sqrt:Ru,stack:a8,step:G5,storage:hh,storageBarrier:kae,storageObject:Cne,storageTexture:WO,string:hte,struct:Jre,sub:hi,subgroupIndex:xne,subgroupSize:Bae,tan:oL,tangentGeometry:Y5,tangentLocal:Q3,tangentView:Y3,tangentWorld:pU,temp:LL,texture:Zn,texture3D:$se,textureBarrier:zae,textureBicubic:TO,textureCubeUV:MO,textureLoad:Nr,textureSize:V1,textureStore:Hse,thickness:Qx,time:Mh,timerDelta:dse,timerGlobal:fse,timerLocal:hse,toOutputColorSpace:IL,toWorkingColorSpace:FL,toneMapping:VL,toneMappingExposure:HL,toonOutlinePass:Aae,transformDirection:qL,transformNormal:uU,transformNormalToView:mq,transformedBentNormalView:vU,transformedBitangentView:gU,transformedBitangentWorld:dne,transformedClearcoatNormalView:pd,transformedNormalView:Dr,transformedNormalWorld:X5,transformedTangentView:_q,transformedTangentWorld:une,transmission:n5,transpose:pL,triNoise3D:ose,triplanarTexture:Tse,triplanarTextures:GO,trunc:aq,tslFn:cte,uint:Lt,uniform:Zt,uniformArray:El,uniformGroup:OD,uniforms:Gte,userData:Qse,uv:hr,uvec2:wD,uvec3:xA,uvec4:CD,varying:sa,varyingProperty:g3,vec2:At,vec3:Te,vec4:Jt,vectorComponents:Sh,velocity:Kse,vertexColor:kse,vertexIndex:ZU,vertexStage:UL,vibrance:sae,viewZToLogarithmicDepth:Tq,viewZToOrthographicDepth:Ed,viewZToPerspectiveDepth:cO,viewport:wd,viewportBottomLeft:Vne,viewportCoordinate:uO,viewportDepthTexture:bq,viewportLinearDepth:Xne,viewportMipTexture:qq,viewportResolution:zne,viewportSafeUV:xse,viewportSharedTexture:oie,viewportSize:lO,viewportTexture:Hne,viewportTopLeft:Gne,viewportUV:kne,wgsl:yae,wgslFn:bae,workgroupArray:Hae,workgroupBarrier:Fae,workgroupId:Lae,workingToColorSpace:kL,xor:$D});const _l=new Lq;class Ile extends t0{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,n){const r=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let a=!1;if(s===null)r._clearColor.getRGB(_l),_l.a=r._clearColor.a;else if(s.isColor===!0)s.getRGB(_l),_l.a=1,a=!0;else if(s.isNode===!0){const u=this.get(e),c=s;_l.copy(r._clearColor);let p=u.backgroundMesh;if(p===void 0){const y=H5(Jt(c).mul(ay),{getUV:()=>jO.mul($5),getTextureLevel:()=>HO});let q=xq;q=q.setZ(q.w);const S=new Hr;S.name="Background.material",S.side=Oi,S.depthTest=!1,S.depthWrite=!1,S.allowOverride=!1,S.fog=!1,S.lights=!1,S.vertexNode=q,S.colorNode=y,u.backgroundMeshNode=y,u.backgroundMesh=p=new yi(new Mu(1,32,32),S),p.frustumCulled=!1,p.name="Background.mesh",p.onBeforeRender=function(R,M,E){this.matrixWorld.copyPosition(E.matrixWorld)}}const g=c.getCacheKey();u.backgroundCacheKey!==g&&(u.backgroundMeshNode.node=Jt(c).mul(ay),u.backgroundMeshNode.needsUpdate=!0,p.material.needsUpdate=!0,u.backgroundCacheKey=g),t.unshift(p,p.geometry,p.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);const o=r.xr.getEnvironmentBlendMode();if(o==="additive"?_l.set(0,0,0,1):o==="alpha-blend"&&_l.set(0,0,0,0),r.autoClear===!0||a===!0){const u=n.clearColorValue;u.r=_l.r,u.g=_l.g,u.b=_l.b,u.a=_l.a,(r.backend.isWebGLBackend===!0||r.alpha===!0)&&(u.r*=u.a,u.g*=u.a,u.b*=u.a),n.depthClearValue=r._clearDepth,n.stencilClearValue=r._clearStencil,n.clearColor=r.autoClearColor===!0,n.clearDepth=r.autoClearDepth===!0,n.clearStencil=r.autoClearStencil===!0}else n.clearColor=!1,n.clearDepth=!1,n.clearStencil=!1}}let Fle=0;class oy{constructor(e="",t=[],n=0,r=[]){this.name=e,this.bindings=t,this.index=n,this.bindingsReference=r,this.id=Fle++}}class kle{constructor(e,t,n,r,s,a,o,u,c,p=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=n,this.transforms=p,this.nodeAttributes=r,this.bindings=s,this.updateNodes=a,this.updateBeforeNodes=o,this.updateAfterNodes=u,this.observer=c,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const r=new oy(t.name,[],t.index,t);e.push(r);for(const s of t.bindings)r.bindings.push(s.clone())}else e.push(t);return e}}class CR{constructor(e,t,n=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=n}}class zle{constructor(e,t,n){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=n.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class PB{constructor(e,t,n=!1,r=null){this.isNodeVar=!0,this.name=e,this.type=t,this.readOnly=n,this.count=r}}class Gle extends PB{constructor(e,t){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0}}class Vle{constructor(e,t,n=""){this.name=e,this.type=t,this.code=n,Object.defineProperty(this,"isNodeCode",{value:!0})}}let Hle=0;class d_{constructor(e=null){this.id=Hle++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class jle{constructor(e,t){this.name=e,this.members=t,this.output=!1}}class n0{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class Wle extends n0{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class $le extends n0{constructor(e,t=new rt){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class Xle extends n0{constructor(e,t=new le){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class Qle extends n0{constructor(e,t=new sn){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class Yle extends n0{constructor(e,t=new Xt){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class Kle extends n0{constructor(e,t=new E5){super(e,t),this.isMatrix2Uniform=!0,this.boundary=16,this.itemSize=4}}class Zle extends n0{constructor(e,t=new Cn){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class Jle extends n0{constructor(e,t=new yn){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class eue extends Wle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class tue extends $le{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class nue extends Xle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class iue extends Qle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class rue extends Yle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class sue extends Kle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class aue extends Zle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class oue extends Jle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const NR=new WeakMap,lue=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),_6=i=>/e/g.test(i)?String(i).replace(/\+/g,""):(i=Number(i),i+(i%1?"":".0"));class DB{constructor(e,t,n){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=n,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.declarations={},this.flow={code:""},this.chaining=[],this.stack=a8(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new d_,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null}getBindGroupsCache(){let e=NR.get(this.renderer);return e===void 0&&(e=new bu,NR.set(this.renderer,e)),e}createRenderTarget(e,t,n){return new Lc(e,t,n)}createCubeRenderTarget(e,t){return new dO(e,t)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,t){const n=this.getBindGroupsCache(),r=[];let s=!0;for(const o of t)r.push(o),s=s&&o.groupNode.shared!==!0;let a;return s?(a=n.get(r),a===void 0&&(a=new oy(e,r,this.bindingsIndexes[e].group,r),n.set(r,a))):a=new oy(e,r,this.bindingsIndexes[e].group,r),a}getBindGroupArray(e,t){const n=this.bindings[t];let r=n[e];return r===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),n[e]=r=[]),r}getBindings(){let e=this.bindGroups;if(e===null){const t={},n=this.bindings;for(const r of jv)for(const s in n[r]){const a=n[r][s];(t[s]||(t[s]=[])).push(...a)}e=[];for(const r in t){const s=t[r],a=this._getBindGroup(r,s);e.push(a)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,n)=>t.bindings[0].groupNode.order-n.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const n=e[t];this.bindingsIndexes[n.name].group=t,n.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==Pn.NONE&&this.updateNodes.push(e.getSelf());for(const e of this.sequentialNodes){const t=e.getUpdateBeforeType(),n=e.getUpdateAfterType();t!==Pn.NONE&&this.updateBeforeNodes.push(e.getSelf()),n!==Pn.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===rs||e.magFilter===vd||e.magFilter===yc||e.magFilter===Na||e.minFilter===rs||e.minFilter===vd||e.minFilter===yc||e.minFilter===Na}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const n=this.getDataFromNode(e);return n.cache===void 0&&(n.cache=new d_(t?this.getCache():null)),n.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateArrayDeclaration(e,t){return this.getType(e)+"[ "+t+" ]"}generateArray(e,t,n=null){let r=this.generateArrayDeclaration(e,t)+"( ";for(let s=0;s<t;s++){const a=n?n[s]:null;a!==null?r+=a.build(this,e):r+=this.generateConst(e),s<t-1&&(r+=", ")}return r+=" )",r}generateStruct(e,t,n=null){const r=[];for(const s of t){const{name:a,type:o}=s;n&&n[a]&&n[a].isNode?r.push(n[a].build(this,o)):r.push(this.generateConst(o))}return e+"( "+r.join(", ")+" )"}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new Xt:e==="vec2"?t=new rt:e==="vec3"?t=new le:e==="vec4"&&(t=new sn)),e==="float")return _6(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${_6(t.r)}, ${_6(t.g)}, ${_6(t.b)} )`;const n=this.getTypeLength(e),r=this.getComponentType(e),s=a=>this.generateConst(r,a);if(n===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(n===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(n===4&&e!=="mat2")return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(n>=4&&t&&(t.isMatrix2||t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(n>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const n=this.attributes;for(const s of n)if(s.name===e)return s;const r=new CR(e,t);return this.registerDeclaration(r),n.push(r),r}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="samplerComparison"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===qs)return"int";if(t===Qi)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;let n=dD(e);const r=t==="float"?"":t[0];return/mat2/.test(t)===!0&&(n=n.replace("vec","mat")),r+n}getTypeFromArray(e){return lue.get(e.constructor)}isInteger(e){return/int|uint|(i|u)vec/.test(e)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const n=t.array,r=e.itemSize,s=e.normalized;let a;return!(e instanceof mN)&&s!==!0&&(a=this.getTypeFromArray(n)),this.getTypeFromLength(r,a)}getTypeLength(e){const t=this.getVectorType(e),n=/vec([2-4])/.exec(t);return n!==null?Number(n[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=a8(this.stack),this.stacks.push(Hx()||this.stack),m3(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,m3(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,n=null){n=n===null?e.isGlobal(this)?this.globalCache:this.cache:n;let r=n.getData(e);return r===void 0&&(r={},n.setData(e,r)),r[t]===void 0&&(r[t]={}),r[t]}getNodeProperties(e,t="any"){const n=this.getDataFromNode(e,t);return n.properties||(n.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const n=this.getDataFromNode(e);let r=n.bufferAttribute;if(r===void 0){const s=this.uniforms.index++;r=new CR("nodeAttribute"+s,t,e),this.bufferAttributes.push(r),n.bufferAttribute=r}return r}getStructTypeFromNode(e,t,n=null,r=this.shaderStage){const s=this.getDataFromNode(e,r,this.globalCache);let a=s.structType;if(a===void 0){const o=this.structs.index++;n===null&&(n="StructType"+o),a=new jle(n,t),this.structs[r].push(a),s.structType=a}return a}getOutputStructTypeFromNode(e,t){const n=this.getStructTypeFromNode(e,t,"OutputType","fragment");return n.output=!0,n}getUniformFromNode(e,t,n=this.shaderStage,r=null){const s=this.getDataFromNode(e,n,this.globalCache);let a=s.uniform;if(a===void 0){const o=this.uniforms.index++;a=new zle(r||"nodeUniform"+o,t,e),this.uniforms[n].push(a),this.registerDeclaration(a),s.uniform=a}return a}getArrayCount(e){let t=null;return e.isArrayNode?t=e.count:e.isVarNode&&e.node.isArrayNode&&(t=e.node.count),t}getVarFromNode(e,t=null,n=e.getNodeType(this),r=this.shaderStage,s=!1){const a=this.getDataFromNode(e,r);let o=a.variable;if(o===void 0){const u=s?"_const":"_var",c=this.vars[r]||(this.vars[r]=[]),p=this.vars[u]||(this.vars[u]=0);t===null&&(t=(s?"nodeConst":"nodeVar")+p,this.vars[u]++);const g=this.getArrayCount(e);o=new PB(t,n,s,g),s||c.push(o),this.registerDeclaration(o),a.variable=o}return o}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0)&&(e.cNode?this.isDeterministic(e.cNode):!0);if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0);if(e.isArrayNode){if(e.values!==null){for(const t of e.values)if(!this.isDeterministic(t))return!1}return!0}else if(e.isConstNode)return!0;return!1}getVaryingFromNode(e,t=null,n=e.getNodeType(this)){const r=this.getDataFromNode(e,"any");let s=r.varying;if(s===void 0){const a=this.varyings,o=a.length;t===null&&(t="nodeVarying"+o),s=new Gle(t,n),a.push(s),this.registerDeclaration(s),r.varying=s}return s}registerDeclaration(e){const t=this.shaderStage,n=this.declarations[t]||(this.declarations[t]={}),r=this.getPropertyName(e);let s=1,a=r;for(;n[a]!==void 0;)a=r+"_"+s++;n[a]=e,s>1&&(e.name=a,console.warn(`THREE.TSL: Declaration name '${r}' of '${e.type}' already in use. Renamed to '${a}'.`))}getCodeFromNode(e,t,n=this.shaderStage){const r=this.getDataFromNode(e);let s=r.code;if(s===void 0){const a=this.codes[n]||(this.codes[n]=[]),o=a.length;s=new Vle("nodeCode"+o,t),a.push(s),r.code=s}return s}addFlowCodeHierarchy(e,t){const{flowCodes:n,flowCodeBlock:r}=this.getDataFromNode(e);let s=!0,a=t;for(;a;){if(r.get(a)===!0){s=!1;break}a=this.getDataFromNode(a).parentNodeBlock}if(s)for(const o of n)this.addLineFlowCode(o)}addLineFlowCodeBlock(e,t,n){const r=this.getDataFromNode(e),s=r.flowCodes||(r.flowCodes=[]),a=r.flowCodeBlock||(r.flowCodeBlock=new WeakMap);s.push(t),a.set(n,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),n=this.flowChildNode(e,t);return this.flowsData.set(e,n),n}addInclude(e){this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(e)}buildFunctionNode(e){const t=new sB,n=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=n,t}flowShaderNode(e){const t=e.layout,n={[Symbol.iterator](){let a=0;const o=Object.values(this);return{next:()=>({value:o[a],done:a++>=o.length})}}};for(const a of t.inputs)n[a.name]=new BO(a.type,a.name);e.layout=null;const r=e.call(n),s=this.flowStagesNode(r,t.type);return e.layout=t,s}flowStagesNode(e,t=null){const n=this.flow,r=this.vars,s=this.declarations,a=this.cache,o=this.buildStage,u=this.stack,c={code:""};this.flow=c,this.vars={},this.declarations={},this.cache=new d_,this.stack=a8();for(const p of Hv)this.setBuildStage(p),c.result=e.build(this,t);return c.vars=this.getVars(this.shaderStage),this.flow=n,this.vars=r,this.declarations=s,this.cache=a,this.stack=u,this.setBuildStage(o),c}getFunctionOperator(){return null}buildFunctionCode(){console.warn("Abstract function.")}flowChildNode(e,t=null){const n=this.flow,r={code:""};return this.flow=r,r.result=e.build(this,t),this.flow=n,r}flowNodeFromShaderStage(e,t,n=null,r=null){const s=this.shaderStage;this.setShaderStage(e);const a=this.flowChildNode(t,n);return r!==null&&(a.code+=`${this.tab+r} = ${a.result};
`),this.flowCode[e]=this.flowCode[e]+a.code,this.setShaderStage(s),a}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t,n=null){return`${n!==null?this.generateArrayDeclaration(e,n):this.getType(e)} ${t}`}getVars(e){let t="";const n=this.vars[e];if(n!==void 0)for(const r of n)t+=`${this.getVar(r.type,r.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let n="";if(t!==void 0)for(const r of t)n+=r.code+`
`;return n}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:t,renderer:n}=this;if(t!==null){let r=n.library.fromMaterial(t);r===null&&(console.error(`NodeMaterial: Material "${t.type}" is not compatible.`),r=new Hr),r.build(this)}else this.addFlow("compute",e);for(const r of Hv){this.setBuildStage(r),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of jv){this.setShaderStage(s);const a=this.flowNodes[s];for(const o of a)r==="generate"?this.flowNode(o):o.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float"||t==="int"||t==="uint")return new eue(e);if(t==="vec2"||t==="ivec2"||t==="uvec2")return new tue(e);if(t==="vec3"||t==="ivec3"||t==="uvec3")return new nue(e);if(t==="vec4"||t==="ivec4"||t==="uvec4")return new iue(e);if(t==="color")return new rue(e);if(t==="mat2")return new sue(e);if(t==="mat3")return new aue(e);if(t==="mat4")return new oue(e);throw new Error(`Uniform "${t}" not declared.`)}format(e,t,n){if(t=this.getVectorType(t),n=this.getVectorType(n),t===n||n===null||this.isReference(n))return e;const r=this.getTypeLength(t),s=this.getTypeLength(n);return r===16&&s===9?`${this.getType(n)}( ${e}[ 0 ].xyz, ${e}[ 1 ].xyz, ${e}[ 2 ].xyz )`:r===9&&s===4?`${this.getType(n)}( ${e}[ 0 ].xy, ${e}[ 1 ].xy )`:r>4||s>4||s===0?e:r===s?`${this.getType(n)}( ${e} )`:r>s?this.format(`${e}.${"xyz".slice(0,s)}`,this.getTypeFromLength(s,this.getComponentType(t)),n):s===4&&r>1?`${this.getType(n)}( ${this.format(e,t,"vec3")}, 1.0 )`:r===2?`${this.getType(n)}( ${this.format(e,t,"vec2")}, 0.0 )`:(r===1&&s>1&&t!==this.getComponentType(n)&&(e=`${this.getType(this.getComponentType(n))}( ${e} )`),`${this.getType(n)}( ${e} )`)}getSignature(){return`// Three.js r${pA} - Node System
`}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}}class PR{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let n=e.get(t);return n===void 0&&(n={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,n)),n}updateBeforeNode(e){const t=e.getUpdateBeforeType(),n=e.updateReference(this);if(t===Pn.FRAME){const{frameMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.frameId&&e.updateBefore(this)!==!1&&r.set(n,this.frameId)}else if(t===Pn.RENDER){const{renderMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.renderId&&e.updateBefore(this)!==!1&&r.set(n,this.renderId)}else t===Pn.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),n=e.updateReference(this);if(t===Pn.FRAME){const{frameMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.frameId&&e.updateAfter(this)!==!1&&r.set(n,this.frameId)}else if(t===Pn.RENDER){const{renderMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.renderId&&e.updateAfter(this)!==!1&&r.set(n,this.renderId)}else t===Pn.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),n=e.updateReference(this);if(t===Pn.FRAME){const{frameMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.frameId&&e.update(this)!==!1&&r.set(n,this.frameId)}else if(t===Pn.RENDER){const{renderMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.renderId&&e.update(this)!==!1&&r.set(n,this.renderId)}else t===Pn.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class Yq{constructor(e,t,n=null,r="",s=!1){this.type=e,this.name=t,this.count=n,this.qualifier=r,this.isConst=s}}Yq.isNodeFunctionInput=!0;class uue extends Rh{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setupDirect(){const e=this.colorNode;return{lightDirection:Hq(this.light),lightColor:e}}}const A_=new yn,v6=new yn;let Z2=null;class cue extends Rh{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=Zt(new le).setGroup(fn),this.halfWidth=Zt(new le).setGroup(fn),this.updateType=Pn.RENDER}update(e){super.update(e);const{light:t}=this,n=e.camera.matrixWorldInverse;v6.identity(),A_.copy(t.matrixWorld),A_.premultiply(n),v6.extractRotation(A_),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4(v6),this.halfHeight.value.applyMatrix4(v6)}setupDirectRectArea(e){let t,n;e.isAvailable("float32Filterable")?(t=Zn(Z2.LTC_FLOAT_1),n=Zn(Z2.LTC_FLOAT_2)):(t=Zn(Z2.LTC_HALF_1),n=Zn(Z2.LTC_HALF_2));const{colorNode:r,light:s}=this,a=Vq(s);return{lightColor:r,lightPosition:a,halfWidth:this.halfWidth,halfHeight:this.halfHeight,ltc_1:t,ltc_2:n}}static setLTC(e){Z2=e}}class LB extends Rh{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=Zt(0).setGroup(fn),this.penumbraCosNode=Zt(0).setGroup(fn),this.cutoffDistanceNode=Zt(0).setGroup(fn),this.decayExponentNode=Zt(0).setGroup(fn)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e){const{coneCosNode:t,penumbraCosNode:n}=this;return vu(t,n,e)}setupDirect(e){const{colorNode:t,cutoffDistanceNode:n,decayExponentNode:r,light:s}=this,a=this.getLightVector(e),o=a.normalize(),u=o.dot(Hq(s)),c=this.getSpotAttenuation(u),p=a.length(),g=$q({lightDistance:p,cutoffDistance:n,decayExponent:r});let y=t.mul(c).mul(g);if(s.map){const q=uB(s,e.context.positionWorld),S=Zn(s.map,q.xy).onRenderUpdate(()=>s.map);y=q.mul(2).sub(1).abs().lessThan(1).all().select(y.mul(S),y)}return{lightColor:y,lightDirection:o}}}class hue extends LB{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e){const t=this.light.iesMap;let n=null;if(t&&t.isTexture===!0){const r=e.acos().mul(1/Math.PI);n=Zn(t,At(r,0),0).r}else n=super.getSpotAttenuation(e);return n}}class fue extends Rh{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class due extends Rh{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=Gq(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=Zt(new Xt).setGroup(fn)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:n,lightDirectionNode:r}=this,a=el.dot(r).mul(.5).add(.5),o=Si(n,t,a);e.context.irradiance.addAssign(o)}}class Aue extends Rh{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let n=0;n<9;n++)t.push(new le);this.lightProbe=El(t)}update(e){const{light:t}=this;super.update(e);for(let n=0;n<9;n++)this.lightProbe.array[n].copy(t.sh.coefficients[n]).multiplyScalar(t.intensity)}setup(e){const t=NB($5,this.lightProbe);e.context.irradiance.addAssign(t)}}class UB{parseFunction(){console.warn("Abstract function.")}}class Kq{constructor(e,t,n="",r=""){this.type=e,this.inputs=t,this.name=n,this.precision=r}getCode(){console.warn("Abstract function.")}}Kq.isNodeFunction=!0;const pue=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,mue=/[a-z_0-9]+/ig,DR="#pragma main",gue=i=>{i=i.trim();const e=i.indexOf(DR),t=e!==-1?i.slice(e+DR.length):i,n=t.match(pue);if(n!==null&&n.length===5){const r=n[4],s=[];let a=null;for(;(a=mue.exec(r))!==null;)s.push(a);const o=[];let u=0;for(;u<s.length;){const S=s[u][0]==="const";S===!0&&u++;let R=s[u][0];R==="in"||R==="out"||R==="inout"?u++:R="";const M=s[u++][0];let E=Number.parseInt(s[u][0]);Number.isNaN(E)===!1?u++:E=null;const U=s[u++][0];o.push(new Yq(M,U,E,R,S))}const c=t.substring(n[0].length),p=n[3]!==void 0?n[3]:"",g=n[2],y=n[1]!==void 0?n[1]:"",q=e!==-1?i.slice(0,e):"";return{type:g,inputs:o,name:p,precision:y,inputsCode:r,blockCode:c,headerCode:q}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class _ue extends Kq{constructor(e){const{type:t,inputs:n,name:r,precision:s,inputsCode:a,blockCode:o,headerCode:u}=gue(e);super(t,n,r,s),this.inputsCode=a,this.blockCode=o,this.headerCode=u}getCode(e=this.name){let t;const n=this.blockCode;if(n!==""){const{type:r,inputsCode:s,headerCode:a,precision:o}=this;let u=`${r} ${e} ( ${s.trim()} )`;o!==""&&(u=`${o} ${u}`),t=a+u+n}else t="";return t}}class vue extends UB{parseFunction(e){return new _ue(e)}}const LR=new WeakMap,Yl=[],Gf=[];class yue extends t0{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new PR,this.nodeBuilderCache=new Map,this.callHashCache=new bu,this.groupsData=new bu,this.cacheLib={}}updateGroup(e){const t=e.groupNode,n=t.name;if(n===Wx.name)return!0;if(n===fn.name){const s=this.get(e),a=this.nodeFrame.renderId;return s.renderId!==a?(s.renderId=a,!0):!1}if(n===BD.name){const s=this.get(e),a=this.nodeFrame.frameId;return s.frameId!==a?(s.frameId=a,!0):!1}Yl[0]=t,Yl[1]=e;let r=this.groupsData.get(Yl);return r===void 0&&this.groupsData.set(Yl,r={}),Yl.length=0,r.version!==t.version?(r.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const{nodeBuilderCache:r}=this,s=this.getForRenderCacheKey(e);if(n=r.get(s),n===void 0){const a=this.backend.createNodeBuilder(e.object,this.renderer);a.scene=e.scene,a.material=e.material,a.camera=e.camera,a.context.material=e.material,a.lightsNode=e.lightsNode,a.environmentNode=this.getEnvironmentNode(e.scene),a.fogNode=this.getFogNode(e.scene),a.clippingContext=e.clippingContext,a.build(),n=this._createNodeBuilderState(a),r.set(s,n)}n.usedTimes++,t.nodeBuilderState=n}return n}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const r=this.backend.createNodeBuilder(e,this.renderer);r.build(),n=this._createNodeBuilderState(r),t.nodeBuilderState=n}return n}_createNodeBuilderState(e){return new kle(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let t=null;if(e.environmentNode&&e.environmentNode.isNode)t=e.environmentNode;else{const n=this.get(e);n.environmentNode&&(t=n.environmentNode)}return t}getBackgroundNode(e){this.updateBackground(e);let t=null;if(e.backgroundNode&&e.backgroundNode.isNode)t=e.backgroundNode;else{const n=this.get(e);n.backgroundNode&&(t=n.backgroundNode)}return t}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){Yl[0]=e,Yl[1]=t;const n=this.renderer.info.calls,r=this.callHashCache.get(Yl)||{};if(r.callId!==n){const s=this.getEnvironmentNode(e),a=this.getFogNode(e);t&&Gf.push(t.getCacheKey(!0)),s&&Gf.push(s.getCacheKey()),a&&Gf.push(a.getCacheKey()),Gf.push(this.renderer.shadowMap.enabled?1:0),r.callId=n,r.cacheKey=D5(Gf),this.callHashCache.set(Yl,r),Gf.length=0}return Yl.length=0,r.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),n=e.background;if(n){const r=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==n||r){const s=this.getCacheNode("background",n,()=>{if(n.isCubeTexture===!0||n.mapping===W1||n.mapping===$1||n.mapping===dh){if(e.backgroundBlurriness>0||n.mapping===dh)return Dq(n);{let a;return n.isCubeTexture===!0?a=oA(n):a=Zn(n),pO(a)}}else{if(n.isTexture===!0)return Zn(n,qu.flipY()).setUpdateMatrix(!0);n.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",n)}},r);t.backgroundNode=s,t.background=n,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}getCacheNode(e,t,n,r=!1){const s=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap);let a=s.get(t);return(a===void 0||r)&&(a=n(),s.set(t,a)),a}updateFog(e){const t=this.get(e),n=e.fog;if(n){if(t.fog!==n){const r=this.getCacheNode("fog",n,()=>{if(n.isFogExp2){const s=zi("color","color",n).setGroup(fn),a=zi("density","float",n).setGroup(fn);return b3(s,Fq(a))}else if(n.isFog){const s=zi("color","color",n).setGroup(fn),a=zi("near","float",n).setGroup(fn),o=zi("far","float",n).setGroup(fn);return b3(s,Iq(a,o))}else console.error("THREE.Renderer: Unsupported fog configuration.",n)});t.fogNode=r,t.fog=n}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),n=e.environment;if(n){if(t.environment!==n){const r=this.getCacheNode("environment",n,()=>{if(n.isCubeTexture===!0)return oA(n);if(n.isTexture===!0)return Zn(n);console.error("Nodes: Unsupported environment configuration.",n)});t.environmentNode=r,t.environment=n}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,n=null,r=null,s=null){const a=this.nodeFrame;return a.renderer=e,a.scene=t,a.object=n,a.camera=r,a.material=s,a}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace}hasOutputChange(e){return LR.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,n=this.getOutputCacheKey(),r=Zn(e,qu).renderOutput(t.toneMapping,t.currentColorSpace);return LR.set(e,n),r}updateBefore(e){const t=e.getNodeBuilderState();for(const n of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(n)}updateAfter(e){const t=e.getNodeBuilderState();for(const n of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(n)}updateForCompute(e){const t=this.getNodeFrame(),n=this.getForCompute(e);for(const r of n.updateNodes)t.updateNode(r)}updateForRender(e){const t=this.getNodeFrameForRender(e),n=e.getNodeBuilderState();for(const r of n.updateNodes)t.updateNode(r)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new PR,this.nodeBuilderCache=new Map,this.cacheLib={}}}const p_=new tu;class c5{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new Cn,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,e!==null&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,t,n){const r=e.length;for(let s=0;s<r;s++){p_.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const a=t[n+s],o=p_.normal;a.x=-o.x,a.y=-o.y,a.z=-o.z,a.w=p_.constant}}updateGlobal(e,t){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,t){let n=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==t.clipIntersection&&(this.clipIntersection=t.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const r=t.clippingPlanes,s=r.length;let a,o;if(this.clipIntersection?(a=this.intersectionPlanes,o=e.intersectionPlanes.length):(a=this.unionPlanes,o=e.unionPlanes.length),a.length!==o+s){a.length=o+s;for(let u=0;u<s;u++)a[o+u]=new sn;n=!0}this.projectPlanes(r,a,o),n&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let t=this.clippingGroupContexts.get(e);return t===void 0&&(t=new c5(this),this.clippingGroupContexts.set(e,t)),t.update(this,e),t}get unionClippingCount(){return this.unionPlanes.length}}class xue{constructor(e,t){this.bundleGroup=e,this.camera=t}}const J2=[];class que{constructor(){this.bundles=new bu}get(e,t){const n=this.bundles;J2[0]=e,J2[1]=t;let r=n.get(J2);return r===void 0&&(r=new xue(e,t),n.set(J2,r)),J2.length=0,r}dispose(){this.bundles=new bu}}class OB{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const n=this.getMaterialNodeClass(e.type);if(n!==null){t=new n;for(const r in e)t[r]=e[r]}return t}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);n.set(t,e)}addClass(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);n.set(t,e)}}const bue=new jq,ep=[];class Sue extends bu{constructor(){super()}createNode(e=[]){return new jq().setLights(e)}getNode(e,t){if(e.isQuadMesh)return bue;ep[0]=e,ep[1]=t;let n=this.get(ep);return n===void 0&&(n=this.createNode(),this.set(ep,n)),ep.length=0,n}}class Ap extends Lc{constructor(e=1,t=1,n={}){super(e,t,n),this.isXRRenderTarget=!0,this.hasExternalTextures=!1,this.autoAllocateDepthBuffer=!0}copy(e){return super.copy(e),this.hasExternalTextures=e.hasExternalTextures,this.autoAllocateDepthBuffer=e.autoAllocateDepthBuffer,this}}const UR=new le,OR=new le;class Tue extends Eu{constructor(e){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new bs,this._cameraL.viewport=new sn,this._cameraR=new bs,this._cameraR.viewport=new sn,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new BN,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._xrRenderTarget=null,this._layers=[],this._supportsLayers=!1,this._createXRLayer=Nue.bind(this),this._gl=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new rt,this._onSessionEvent=Mue.bind(this),this._onSessionEnd=Rue.bind(this),this._onInputSourcesChange=Cue.bind(this),this._onAnimationFrame=Pue.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._useLayers=typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(!(this._glProjLayer===null&&this._glBaseLayer===null))return this._foveation}setFoveation(e){this._foveation=e,this._glProjLayer!==null&&(this._glProjLayer.fixedFoveation=e),this._glBaseLayer!==null&&this._glBaseLayer.fixedFoveation!==void 0&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(this._session!==null)return this._session.environmentBlendMode}getFrame(){return this._xrFrame}createQuadLayer(e,t,n,r,s,a,o,u=[]){const c=new L3(e,t),p=new Ap(s,a,{format:Or,type:Ur,depthTexture:new qo(s,a,u.stencil?vo:Qi,void 0,void 0,void 0,void 0,void 0,void 0,u.stencil?xo:yo),stencilBuffer:u.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),g=new jo({color:16777215,side:Ia});g.map=p.texture,g.map.offset.y=1,g.map.repeat.y=-1;const y=new yi(c,g);y.position.copy(n),y.quaternion.copy(r);const q={type:"quad",width:e,height:t,translation:n,quaternion:r,pixelwidth:s,pixelheight:a,plane:y,material:g,rendercall:o,renderTarget:p};if(this._layers.push(q),this._session!==null){q.plane.material=new jo({color:16777215,side:Ia}),q.plane.material.blending=_d,q.plane.material.blendEquation=Zs,q.plane.material.blendSrc=dc,q.plane.material.blendDst=dc,q.xrlayer=this._createXRLayer(q);const S=this._session.renderState.layers;S.unshift(q.xrlayer),this._session.updateRenderState({layers:S})}else p.isXRRenderTarget=!1;return y}createCylinderLayer(e,t,n,r,s,a,o,u,c=[]){const p=new w5(e,e,e*t/n,64,64,!0,Math.PI-t/2,t),g=new Ap(a,o,{format:Or,type:Ur,depthTexture:new qo(a,o,c.stencil?vo:Qi,void 0,void 0,void 0,void 0,void 0,void 0,c.stencil?xo:yo),stencilBuffer:c.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),y=new jo({color:16777215,side:Oi});y.map=g.texture,y.map.offset.y=1,y.map.repeat.y=-1;const q=new yi(p,y);q.position.copy(r),q.quaternion.copy(s);const S={type:"cylinder",radius:e,centralAngle:t,aspectratio:n,translation:r,quaternion:s,pixelwidth:a,pixelheight:o,plane:q,material:y,rendercall:u,renderTarget:g};if(this._layers.push(S),this._session!==null){S.plane.material=new jo({color:16777215,side:Oi}),S.plane.material.blending=_d,S.plane.material.blendEquation=Zs,S.plane.material.blendSrc=dc,S.plane.material.blendDst=dc,S.xrlayer=this._createXRLayer(S);const R=this._session.renderState.layers;R.unshift(S.xrlayer),this._session.updateRenderState({layers:R})}else g.isXRRenderTarget=!1;return q}renderLayers(){const e=new le,t=new Ul,n=this.isPresenting;this.isPresenting=!1;for(const r of this._layers){if(r.renderTarget.isXRRenderTarget=this._session!==null,r.renderTarget.hasExternalTextures=r.renderTarget.isXRRenderTarget,r.renderTarget.autoAllocateDepthBuffer=!r.renderTarget.isXRRenderTarget,r.renderTarget.isXRRenderTarget&&this._supportsLayers){r.xrlayer.transform=new XRRigidTransform(r.plane.getWorldPosition(e),r.plane.getWorldQuaternion(t));const s=this._glBinding.getSubImage(r.xrlayer,this._xrFrame);this._renderer.backend.setXRRenderTargetTextures(r.renderTarget,s.colorTexture,s.depthStencilTexture)}this._renderer.setRenderTarget(r.renderTarget),r.rendercall()}this.isPresenting=n,this._renderer.setRenderTarget(null)}getSession(){return this._session}async setSession(e){const t=this._renderer,n=t.backend;this._gl=t.getContext();const r=this._gl,s=r.getContextAttributes();if(this._session=e,e!==null){if(n.isWebGPUBackend===!0)throw new Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await n.makeXRCompatible(),this._currentPixelRatio=t.getPixelRatio(),t.getSize(this._currentSize),this._currentAnimationContext=t._animation.getContext(),this._currentAnimationLoop=t._animation.getAnimationLoop(),t._animation.stop(),this._useLayers===!0){let a=null,o=null,u=null;t.depth&&(u=t.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,a=t.stencil?xo:yo,o=t.stencil?vo:Qi);const c={colorFormat:r.RGBA8,depthFormat:u,scaleFactor:this._framebufferScaleFactor},p=new XRWebGLBinding(e,r),g=p.createProjectionLayer(c),y=[g];if(this._glBinding=p,this._glProjLayer=g,t.setPixelRatio(1),t.setSize(g.textureWidth,g.textureHeight,!1),this._xrRenderTarget=new Ap(g.textureWidth,g.textureHeight,{format:Or,type:Ur,colorSpace:t.outputColorSpace,depthTexture:new qo(g.textureWidth,g.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,a),stencilBuffer:t.stencil,samples:s.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1}),this._xrRenderTarget.hasExternalTextures=!0,this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),this._supportsLayers=e.enabledFeatures.includes("layers"),this._supportsLayers)for(const q of this._layers)q.plane.material=new jo({color:16777215,side:q.type==="cylinder"?Oi:Ia}),q.plane.material.blending=_d,q.plane.material.blendEquation=Zs,q.plane.material.blendSrc=dc,q.plane.material.blendDst=dc,q.xrlayer=this._createXRLayer(q),y.unshift(q.xrlayer);e.updateRenderState({layers:y})}else{const a={antialias:t.samples>0,alpha:!0,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()},o=new XRWebGLLayer(e,r,a);this._glBaseLayer=o,e.updateRenderState({baseLayer:o}),t.setPixelRatio(1),t.setSize(o.framebufferWidth,o.framebufferHeight,!1),this._xrRenderTarget=new Ap(o.framebufferWidth,o.framebufferHeight,{format:Or,type:Ur,colorSpace:t.outputColorSpace,stencilBuffer:t.stencil,resolveDepthBuffer:o.ignoreDepthValues===!1,resolveStencilBuffer:o.ignoreDepthValues===!1})}this.setFoveation(this.getFoveation()),t._animation.setAnimationLoop(this._onAnimationFrame),t._animation.setContext(e),t._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){const t=this._session;if(t===null)return;const n=e.near,r=e.far,s=this._cameraXR,a=this._cameraL,o=this._cameraR;s.near=o.near=a.near=n,s.far=o.far=a.far=r,(this._currentDepthNear!==s.near||this._currentDepthFar!==s.far)&&(t.updateRenderState({depthNear:s.near,depthFar:s.far}),this._currentDepthNear=s.near,this._currentDepthFar=s.far),a.layers.mask=e.layers.mask|2,o.layers.mask=e.layers.mask|4,s.layers.mask=a.layers.mask|o.layers.mask;const u=e.parent,c=s.cameras;BR(s,u);for(let p=0;p<c.length;p++)BR(c[p],u);c.length===2?wue(s,a,o):s.projectionMatrix.copy(a.projectionMatrix),Eue(e,s,u)}_getController(e){let t=this._controllers[e];return t===void 0&&(t=new j6,this._controllers[e]=t),t}}function wue(i,e,t){UR.setFromMatrixPosition(e.matrixWorld),OR.setFromMatrixPosition(t.matrixWorld);const n=UR.distanceTo(OR),r=e.projectionMatrix.elements,s=t.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),u=(r[9]+1)/r[5],c=(r[9]-1)/r[5],p=(r[8]-1)/r[0],g=(s[8]+1)/s[0],y=a*p,q=a*g,S=n/(-p+g),R=S*-p;if(e.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.translateX(R),i.translateZ(S),i.matrixWorld.compose(i.position,i.quaternion,i.scale),i.matrixWorldInverse.copy(i.matrixWorld).invert(),r[10]===-1)i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const M=a+S,E=o+S,U=y-R,P=q+(n-R),O=u*o/E*M,F=c*o/E*M;i.projectionMatrix.makePerspective(U,P,O,F,M,E),i.projectionMatrixInverse.copy(i.projectionMatrix).invert()}}function BR(i,e){e===null?i.matrixWorld.copy(i.matrix):i.matrixWorld.multiplyMatrices(e.matrixWorld,i.matrix),i.matrixWorldInverse.copy(i.matrixWorld).invert()}function Eue(i,e,t){t===null?i.matrix.copy(e.matrixWorld):(i.matrix.copy(t.matrixWorld),i.matrix.invert(),i.matrix.multiply(e.matrixWorld)),i.matrix.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld(!0),i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse),i.isPerspectiveCamera&&(i.fov=gh*2*Math.atan(1/i.projectionMatrix.elements[5]),i.zoom=1)}function Mue(i){const e=this._controllerInputSources.indexOf(i.inputSource);if(e===-1)return;const t=this._controllers[e];if(t!==void 0){const n=this.getReferenceSpace();t.update(i.inputSource,i.frame,n),t.dispatchEvent({type:i.type,data:i.inputSource})}}function Rue(){const i=this._session,e=this._renderer;i.removeEventListener("select",this._onSessionEvent),i.removeEventListener("selectstart",this._onSessionEvent),i.removeEventListener("selectend",this._onSessionEvent),i.removeEventListener("squeeze",this._onSessionEvent),i.removeEventListener("squeezestart",this._onSessionEvent),i.removeEventListener("squeezeend",this._onSessionEvent),i.removeEventListener("end",this._onSessionEnd),i.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let t=0;t<this._controllers.length;t++){const n=this._controllerInputSources[t];n!==null&&(this._controllerInputSources[t]=null,this._controllers[t].disconnect(n))}if(this._currentDepthNear=null,this._currentDepthFar=null,e.backend.setXRTarget(null),e.setOutputRenderTarget(null),e.setRenderTarget(null),this._session=null,this._xrRenderTarget=null,this._supportsLayers===!0)for(const t of this._layers)t.renderTarget=new Ap(t.pixelwidth,t.pixelheight,{format:Or,type:Ur,depthTexture:new qo(t.pixelwidth,t.pixelheight,t.stencilBuffer?vo:Qi,void 0,void 0,void 0,void 0,void 0,void 0,t.stencilBuffer?xo:yo),stencilBuffer:t.stencilBuffer,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),t.renderTarget.isXRRenderTarget=!1,t.plane.material=t.material,t.material.map=t.renderTarget.texture,delete t.xrlayer;this.isPresenting=!1,e._animation.stop(),e._animation.setAnimationLoop(this._currentAnimationLoop),e._animation.setContext(this._currentAnimationContext),e._animation.start(),e.setPixelRatio(this._currentPixelRatio),e.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function Cue(i){const e=this._controllers,t=this._controllerInputSources;for(let n=0;n<i.removed.length;n++){const r=i.removed[n],s=t.indexOf(r);s>=0&&(t[s]=null,e[s].disconnect(r))}for(let n=0;n<i.added.length;n++){const r=i.added[n];let s=t.indexOf(r);if(s===-1){for(let o=0;o<e.length;o++)if(o>=t.length){t.push(r),s=o;break}else if(t[o]===null){t[o]=r,s=o;break}if(s===-1)break}const a=e[s];a&&a.connect(r)}}function Nue(i){return i.type==="quad"?this._glBinding.createQuadLayer({transform:new XRRigidTransform(i.translation,i.quaternion),depthFormat:this._gl.DEPTH_COMPONENT,width:i.width/2,height:i.height/2,space:this._referenceSpace,viewPixelWidth:i.pixelwidth,viewPixelHeight:i.pixelheight}):this._glBinding.createCylinderLayer({transform:new XRRigidTransform(i.translation,i.quaternion),depthFormat:this._gl.DEPTH_COMPONENT,radius:i.radius,centralAngle:i.centralAngle,aspectRatio:i.aspectRatio,space:this._referenceSpace,viewPixelWidth:i.pixelwidth,viewPixelHeight:i.pixelheight})}function Pue(i,e){if(e===void 0)return;const t=this._cameraXR,n=this._renderer,r=n.backend,s=this._glBaseLayer,a=this.getReferenceSpace(),o=e.getViewerPose(a);if(this._xrFrame=e,o!==null){const u=o.views;this._glBaseLayer!==null&&r.setXRTarget(s.framebuffer);let c=!1;u.length!==t.cameras.length&&(t.cameras.length=0,c=!0);for(let p=0;p<u.length;p++){const g=u[p];let y;if(this._useLayers===!0){const S=this._glBinding.getViewSubImage(this._glProjLayer,g);y=S.viewport,p===0&&r.setXRRenderTargetTextures(this._xrRenderTarget,S.colorTexture,this._glProjLayer.ignoreDepthValues?void 0:S.depthStencilTexture)}else y=s.getViewport(g);let q=this._cameras[p];q===void 0&&(q=new bs,q.layers.enable(p),q.viewport=new sn,this._cameras[p]=q),q.matrix.fromArray(g.transform.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale),q.projectionMatrix.fromArray(g.projectionMatrix),q.projectionMatrixInverse.copy(q.projectionMatrix).invert(),q.viewport.set(y.x,y.y,y.width,y.height),p===0&&(t.matrix.copy(q.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale)),c===!0&&t.cameras.push(q)}n.setOutputRenderTarget(this._xrRenderTarget)}for(let u=0;u<this._controllers.length;u++){const c=this._controllerInputSources[u],p=this._controllers[u];c!==null&&p!==void 0&&p.update(c,e,a)}this._currentAnimationLoop&&this._currentAnimationLoop(i,e),e.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:e}),this._xrFrame=null}const IR=new b5,y6=new rt,m_=new sn,g_=new D3,x6=new yn,q1=new sn;class Due{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:n=!1,alpha:r=!0,depth:s=!0,stencil:a=!1,antialias:o=!1,samples:u=0,getFallback:c=null,colorBufferType:p=Ss}=t;this.domElement=e.getDomElement(),this.backend=e,this.samples=u||o===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=r,this.logarithmicDepthBuffer=n,this.outputColorSpace=nn,this.toneMapping=za,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=a,this.info=new Pre,this.nodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new OB,this.lighting=new Sue,this._getFallback=c,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new sn(0,0,this._width,this._height),this._scissor=new sn(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new Oq(new Hr),this._quad.material.name="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const g=this.alpha===!0?0:1;this._clearColor=new Lq(0,0,0,g),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._outputRenderTarget=null,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._colorBufferType=p,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:Ly},this.xr=new Tue(this),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(y,q,S)=>{await this.compileAsync(y,q);const R=this._renderLists.get(y,q),M=this._renderContexts.get(y,q,this._renderTarget),E=y.overrideMaterial||S.material,U=this._objects.get(S,E,y,q,R.lightsNode,M,M.clippingContext),{fragmentShader:P,vertexShader:O}=U.getNodeBuilderState();return{fragmentShader:P,vertexShader:O}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let n=this.backend;try{await n.init(this)}catch(r){if(this._getFallback!==null)try{this.backend=n=this._getFallback(r),await n.init(this)}catch(s){t(s);return}else{t(r);return}}this._nodes=new yue(this,n),this._animation=new bre(this._nodes,this.info),this._attributes=new Cre(n),this._background=new Ile(this,this._nodes),this._geometries=new Nre(this._attributes,this.info),this._textures=new $re(this,n,this.info),this._pipelines=new Ore(n,this._nodes),this._bindings=new Bre(n,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new Ere(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new kre(this.lighting),this._bundles=new que,this._renderContexts=new jre,this._animation.start(),this._initialized=!0,e(this)}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,n=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const r=this._nodes.nodeFrame,s=r.renderId,a=this._currentRenderContext,o=this._currentRenderObjectFunction,u=this._compilationPromises,c=e.isScene===!0?e:IR;n===null&&(n=e);const p=this._renderTarget,g=this._renderContexts.get(n,t,p),y=this._activeMipmapLevel,q=[];this._currentRenderContext=g,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=q,r.renderId++,r.update(),g.depth=this.depth,g.stencil=this.stencil,g.clippingContext||(g.clippingContext=new c5),g.clippingContext.updateGlobal(c,t),c.onBeforeRender(this,e,t,p);const S=this._renderLists.get(e,t);if(S.begin(),this._projectObject(e,t,0,S,g.clippingContext),n!==e&&n.traverseVisible(function(P){P.isLight&&P.layers.test(t.layers)&&S.pushLight(P)}),S.finish(),p!==null){this._textures.updateRenderTarget(p,y);const P=this._textures.get(p);g.textures=P.textures,g.depthTexture=P.depthTexture}else g.textures=null,g.depthTexture=null;this._background.update(c,S,g);const R=S.opaque,M=S.transparent,E=S.transparentDoublePass,U=S.lightsNode;this.opaque===!0&&R.length>0&&this._renderObjects(R,t,c,U),this.transparent===!0&&M.length>0&&this._renderTransparents(M,E,t,c,U),r.renderId=s,this._currentRenderContext=a,this._currentRenderObjectFunction=o,this._compilationPromises=u,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(q)}async renderAsync(e,t){this._initialized===!1&&await this.init(),this._renderScene(e,t)}async waitForGPU(){await this.backend.waitForGPU()}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getColorBufferType(){return this._colorBufferType}_onDeviceLost(e){let t=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(t+=`
Reason: ${e.reason}`),console.error(t),this._isDeviceLost=!0}_renderBundle(e,t,n){const{bundleGroup:r,camera:s,renderList:a}=e,o=this._currentRenderContext,u=this._bundles.get(r,s),c=this.backend.get(u);c.renderContexts===void 0&&(c.renderContexts=new Set);const p=r.version!==c.version,g=c.renderContexts.has(o)===!1||p;if(c.renderContexts.add(o),g){this.backend.beginBundle(o),(c.renderObjects===void 0||p)&&(c.renderObjects=[]),this._currentRenderBundle=u;const{transparentDoublePass:y,transparent:q,opaque:S}=a;this.opaque===!0&&S.length>0&&this._renderObjects(S,s,t,n),this.transparent===!0&&q.length>0&&this._renderTransparents(q,y,s,t,n),this._currentRenderBundle=null,this.backend.finishBundle(o,u),c.version=r.version}else{const{renderObjects:y}=c;for(let q=0,S=y.length;q<S;q++){const R=y[q];this._nodes.needsRefresh(R)&&(this._nodes.updateBefore(R),this._nodes.updateForRender(R),this._bindings.updateForRender(R),this._nodes.updateAfter(R))}}this.backend.addBundle(o,u)}render(e,t){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this;if(e!==za===!1&&t!==Pl===!1)return null;const{width:s,height:a}=this.getDrawingBufferSize(y6),{depth:o,stencil:u}=this;let c=this._frameBufferTarget;return c===null&&(c=new Lc(s,a,{depthBuffer:o,stencilBuffer:u,type:this._colorBufferType,format:Or,colorSpace:Pl,generateMipmaps:!1,minFilter:rs,magFilter:rs,samples:this.samples}),c.isPostProcessingRenderTarget=!0,this._frameBufferTarget=c),c.depthBuffer=o,c.stencilBuffer=u,c.setSize(s,a),c.viewport.copy(this._viewport),c.scissor.copy(this._scissor),c.viewport.multiplyScalar(this._pixelRatio),c.scissor.multiplyScalar(this._pixelRatio),c.scissorTest=this._scissorTest,c}_renderScene(e,t,n=!0){if(this._isDeviceLost===!0)return;const r=n?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,a=s.renderId,o=this._currentRenderContext,u=this._currentRenderObjectFunction,c=e.isScene===!0?e:IR,p=this._renderTarget||this._outputRenderTarget,g=this._activeCubeFace,y=this._activeMipmapLevel;let q;r!==null?(q=r,this.setRenderTarget(q)):q=p;const S=this._renderContexts.get(e,t,q);this._currentRenderContext=S,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const R=this.coordinateSystem,M=this.xr;if(t.coordinateSystem!==R&&M.isPresenting===!1&&(t.coordinateSystem=R,t.updateProjectionMatrix(),t.isArrayCamera))for(const te of t.cameras)te.coordinateSystem=R,te.updateProjectionMatrix();e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),M.enabled===!0&&M.isPresenting===!0&&(M.cameraAutoUpdate===!0&&M.updateCamera(t),t=M.getCamera());let E=this._viewport,U=this._scissor,P=this._pixelRatio;q!==null&&(E=q.viewport,U=q.scissor,P=1),this.getDrawingBufferSize(y6),m_.set(0,0,y6.width,y6.height);const O=E.minDepth===void 0?0:E.minDepth,F=E.maxDepth===void 0?1:E.maxDepth;S.viewportValue.copy(E).multiplyScalar(P).floor(),S.viewportValue.width>>=y,S.viewportValue.height>>=y,S.viewportValue.minDepth=O,S.viewportValue.maxDepth=F,S.viewport=S.viewportValue.equals(m_)===!1,S.scissorValue.copy(U).multiplyScalar(P).floor(),S.scissor=this._scissorTest&&S.scissorValue.equals(m_)===!1,S.scissorValue.width>>=y,S.scissorValue.height>>=y,S.clippingContext||(S.clippingContext=new c5),S.clippingContext.updateGlobal(c,t),c.onBeforeRender(this,e,t,q),x6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),g_.setFromProjectionMatrix(x6,R);const I=this._renderLists.get(e,t);if(I.begin(),this._projectObject(e,t,0,I,S.clippingContext),I.finish(),this.sortObjects===!0&&I.sort(this._opaqueSort,this._transparentSort),q!==null){this._textures.updateRenderTarget(q,y);const te=this._textures.get(q);S.textures=te.textures,S.depthTexture=te.depthTexture,S.width=te.width,S.height=te.height,S.renderTarget=q,S.depth=q.depthBuffer,S.stencil=q.stencilBuffer}else S.textures=null,S.depthTexture=null,S.width=this.domElement.width,S.height=this.domElement.height,S.depth=this.depth,S.stencil=this.stencil;S.width>>=y,S.height>>=y,S.activeCubeFace=g,S.activeMipmapLevel=y,S.occlusionQueryCount=I.occlusionQueryCount,this._background.update(c,I,S),this.backend.beginRender(S);const{bundles:z,lightsNode:j,transparentDoublePass:k,transparent:G,opaque:$}=I;return z.length>0&&this._renderBundles(z,c,j),this.opaque===!0&&$.length>0&&this._renderObjects($,t,c,j),this.transparent===!0&&G.length>0&&this._renderTransparents(G,k,t,c,j),this.backend.finishRender(S),s.renderId=a,this._currentRenderContext=o,this._currentRenderObjectFunction=u,r!==null&&(this.setRenderTarget(p,g,y),this._renderOutput(q)),c.onAfterRender(this,e,t,q),S}_renderOutput(e){const t=this._quad;this._nodes.hasOutputChange(e.texture)&&(t.material.fragmentNode=this._nodes.getOutputNode(e.texture),t.material.needsUpdate=!0);const n=this.autoClear,r=this.xr.enabled;this.autoClear=!1,this.xr.enabled=!1,this._renderScene(t,t.camera,!1),this.autoClear=n,this.xr.enabled=r}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,t,n){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this._pixelRatio=n,this.domElement.width=Math.floor(e*n),this.domElement.height=Math.floor(t*n),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setSize(e,t,n=!0){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),n===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,n,r){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,n,r)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,n,r,s=0,a=1){const o=this._viewport;e.isVector4?o.copy(e):o.set(e,t,n,r),o.minDepth=s,o.maxDepth=a}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,n=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,n);const r=this._renderTarget||this._getFrameBufferTarget();let s=null;if(r!==null){this._textures.updateRenderTarget(r);const a=this._textures.get(r);s=this._renderContexts.getForClear(r),s.textures=a.textures,s.depthTexture=a.depthTexture,s.width=a.width,s.height=a.height,s.renderTarget=r,s.depth=r.depthBuffer,s.stencil=r.stencilBuffer,s.clearColorValue=this.backend.getClearColor(),s.activeCubeFace=this.getActiveCubeFace(),s.activeMipmapLevel=this.getActiveMipmapLevel()}this.backend.clear(e,t,n,s),r!==null&&this._renderTarget===null&&this._renderOutput(r)}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,n=!0){this._initialized===!1&&await this.init(),this.clear(e,t,n)}async clearColorAsync(){this.clearAsync(!0,!1,!1)}async clearDepthAsync(){this.clearAsync(!1,!0,!1)}async clearStencilAsync(){this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this.isOutputTarget?this.toneMapping:za}get currentColorSpace(){return this.isOutputTarget?this.outputColorSpace:Pl}get isOutputTarget(){return this._renderTarget===this._outputRenderTarget||this._renderTarget===null}dispose(){this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this._frameBufferTarget!==null&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{e!==null&&e.dispose()}),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,n=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=n}getRenderTarget(){return this._renderTarget}setOutputRenderTarget(e){this._outputRenderTarget=e}getOutputRenderTarget(){return this._outputRenderTarget}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e){if(this._isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const t=this._nodes.nodeFrame,n=t.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,t.renderId=this.info.calls;const r=this.backend,s=this._pipelines,a=this._bindings,o=this._nodes,u=Array.isArray(e)?e:[e];if(u[0]===void 0||u[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");r.beginCompute(e);for(const c of u){if(s.has(c)===!1){const y=()=>{c.removeEventListener("dispose",y),s.delete(c),a.delete(c),o.delete(c)};c.addEventListener("dispose",y);const q=c.onInitFunction;q!==null&&q.call(c,{renderer:this})}o.updateForCompute(c),a.updateForCompute(c);const p=a.getForCompute(c),g=s.getForCompute(c,p);r.compute(e,c,p,g)}r.finishCompute(e),t.renderId=n}async computeAsync(e){this._initialized===!1&&await this.init(),this.compute(e)}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}async resolveTimestampsAsync(e="render"){return this._initialized===!1&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){this._initialized===!1&&console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),this._textures.updateTexture(e)}copyFramebufferToTexture(e,t=null){if(t!==null)if(t.isVector2)t=q1.set(t.x,t.y,e.image.width,e.image.height).floor();else if(t.isVector4)t=q1.copy(t).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else t=q1.set(0,0,e.image.width,e.image.height);let n=this._currentRenderContext,r;n!==null?r=n.renderTarget:(r=this._renderTarget||this._getFrameBufferTarget(),r!==null&&(this._textures.updateRenderTarget(r),n=this._textures.get(r))),this._textures.updateTexture(e,{renderTarget:r}),this.backend.copyFramebufferToTexture(e,n,t)}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,n,r,s,a)}async readRenderTargetPixelsAsync(e,t,n,r,s,a=0,o=0){return this.backend.copyTextureToBuffer(e.textures[a],t,n,r,s,o)}_projectObject(e,t,n,r,s){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)r.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||g_.intersectsSprite(e)){this.sortObjects===!0&&q1.setFromMatrixPosition(e.matrixWorld).applyMatrix4(x6);const{geometry:u,material:c}=e;c.visible&&r.push(e,u,c,n,q1.z,null,s)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||g_.intersectsObject(e))){const{geometry:u,material:c}=e;if(this.sortObjects===!0&&(u.boundingSphere===null&&u.computeBoundingSphere(),q1.copy(u.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(x6)),Array.isArray(c)){const p=u.groups;for(let g=0,y=p.length;g<y;g++){const q=p[g],S=c[q.materialIndex];S&&S.visible&&r.push(e,u,S,n,q1.z,q,s)}}else c.visible&&r.push(e,u,c,n,q1.z,null,s)}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const u=r;r=this._renderLists.get(e,t),r.begin(),u.pushBundle({bundleGroup:e,camera:t,renderList:r}),r.finish()}const o=e.children;for(let u=0,c=o.length;u<c;u++)this._projectObject(o[u],t,n,r,s)}_renderBundles(e,t,n){for(const r of e)this._renderBundle(r,t,n)}_renderTransparents(e,t,n,r,s){if(t.length>0){for(const{material:a}of t)a.side=Oi;this._renderObjects(t,n,r,s,"backSide");for(const{material:a}of t)a.side=Ia;this._renderObjects(e,n,r,s);for(const{material:a}of t)a.side=Qr}else this._renderObjects(e,n,r,s)}_renderObjects(e,t,n,r,s=null){for(let a=0,o=e.length;a<o;a++){const{object:u,geometry:c,material:p,group:g,clippingContext:y}=e[a];this._currentRenderObjectFunction(u,n,t,c,p,g,r,y,s)}}renderObject(e,t,n,r,s,a,o,u=null,c=null){let p,g,y;if(e.onBeforeRender(this,t,n,r,s,a),s.allowOverride===!0&&t.overrideMaterial!==null){const q=t.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(p=q.positionNode,q.positionNode=s.positionNode),q.alphaTest=s.alphaTest,q.alphaMap=s.alphaMap,q.transparent=s.transparent||s.transmission>0,q.isShadowPassMaterial&&(q.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(y=q.depthNode,q.depthNode=s.depthNode),s.castShadowNode&&s.castShadowNode.isNode&&(g=q.colorNode,q.colorNode=s.castShadowNode)),s=q}s.transparent===!0&&s.side===Qr&&s.forceSinglePass===!1?(s.side=Oi,this._handleObjectFunction(e,s,t,n,o,a,u,"backSide"),s.side=Ia,this._handleObjectFunction(e,s,t,n,o,a,u,c),s.side=Qr):this._handleObjectFunction(e,s,t,n,o,a,u,c),p!==void 0&&(t.overrideMaterial.positionNode=p),y!==void 0&&(t.overrideMaterial.depthNode=y),g!==void 0&&(t.overrideMaterial.colorNode=g),e.onAfterRender(this,t,n,r,s,a)}_renderObjectDirect(e,t,n,r,s,a,o,u){const c=this._objects.get(e,t,n,r,s,this._currentRenderContext,o,u);c.drawRange=e.geometry.drawRange,c.group=a;const p=this._nodes.needsRefresh(c);p&&(this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c)),this._pipelines.updateForRender(c),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(c),c.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(c,this.info),p&&this._nodes.updateAfter(c)}_createObjectPipeline(e,t,n,r,s,a,o,u){const c=this._objects.get(e,t,n,r,s,this._currentRenderContext,o,u);c.drawRange=e.geometry.drawRange,c.group=a,this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c),this._pipelines.getForRender(c,this._compilationPromises),this._nodes.updateAfter(c)}get compile(){return this.compileAsync}}class Zq{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function Lue(i){return i+(U1-i%U1)%U1}let BB=class extends Zq{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return Lue(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}};class IB extends BB{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let Uue=0;class FB extends IB{constructor(e,t){super("UniformBuffer_"+Uue++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class Oue extends IB{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){let e=0;for(let t=0,n=this.uniforms.length;t<n;t++){const r=this.uniforms[t],{boundary:s,itemSize:a}=r,o=e%U1,u=U1-o;o!==0&&u-s<0?e+=U1-o:o%s!==0&&(e+=o%s),r.offset=e/this.bytesPerElement,e+=a*this.bytesPerElement}return Math.ceil(e/U1)*U1}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s]!==r){const o=this._getBufferForType(a);o[s]=n[s]=r,t=!0}return t}updateVector2(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y){const o=this._getBufferForType(a);o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,t=!0}return t}updateVector3(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z){const o=this._getBufferForType(a);o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,o[s+2]=n[s+2]=r.z,t=!0}return t}updateVector4(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z||n[s+4]!==r.w){const o=this._getBufferForType(a);o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,o[s+2]=n[s+2]=r.z,o[s+3]=n[s+3]=r.w,t=!0}return t}updateColor(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset;if(n[s+0]!==r.r||n[s+1]!==r.g||n[s+2]!==r.b){const a=this.buffer;a[s+0]=n[s+0]=r.r,a[s+1]=n[s+1]=r.g,a[s+2]=n[s+2]=r.b,t=!0}return t}updateMatrix3(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;if(n[s+0]!==r[0]||n[s+1]!==r[1]||n[s+2]!==r[2]||n[s+4]!==r[3]||n[s+5]!==r[4]||n[s+6]!==r[5]||n[s+8]!==r[6]||n[s+9]!==r[7]||n[s+10]!==r[8]){const a=this.buffer;a[s+0]=n[s+0]=r[0],a[s+1]=n[s+1]=r[1],a[s+2]=n[s+2]=r[2],a[s+4]=n[s+4]=r[3],a[s+5]=n[s+5]=r[4],a[s+6]=n[s+6]=r[5],a[s+8]=n[s+8]=r[6],a[s+9]=n[s+9]=r[7],a[s+10]=n[s+10]=r[8],t=!0}return t}updateMatrix4(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;return Iue(n,r,s)===!1&&(this.buffer.set(r,s),Bue(n,r,s),t=!0),t}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function Bue(i,e,t){for(let n=0,r=e.length;n<r;n++)i[t+n]=e[n]}function Iue(i,e,t){for(let n=0,r=e.length;n<r;n++)if(i[t+n]!==e[n])return!1;return!0}let Fue=0;class kB extends Oue{constructor(e,t){super(e),this.id=Fue++,this.groupNode=t,this.isNodeUniformsGroup=!0}}let kue=0;class zue extends Zq{constructor(e,t){super(e),this.id=kue++,this.texture=t,this.version=t?t.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:t}=this;return e!==this.generation?(this.generation=e,!0):t.isVideoTexture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}}class i9 extends zue{constructor(e,t,n,r=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n,this.access=r}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class zB extends i9{constructor(e,t,n,r=null){super(e,t,n,r),this.isSampledCubeTexture=!0}}class GB extends i9{constructor(e,t,n,r=null){super(e,t,n,r),this.isSampledTexture3D=!0}}const Gue={textureDimensions:"textureSize",equals:"equal"},Vue={low:"lowp",medium:"mediump",high:"highp"},FR={swizzleAssign:!0,storageBuffer:!1},kR=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
`;class Hue extends DB{constructor(e,t){super(e,t,new vue),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]}}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==_o}getMethod(e){return Gue[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const a of t.inputs)r.push(this.getType(a.type)+" "+a.name);return`${this.getType(t.type)} ${t.name}( ${r.join(", ")} ) {

	${n.vars}

${n.code}
	return ${n.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const n=t.array,r=t.count*t.itemSize,{itemSize:s}=t,a=t.array.constructor.name.toLowerCase().includes("int");let o=a?mA:C3;s===2?o=a?gA:mh:s===3?o=a?Wk:R3:s===4&&(o=a?_A:Or);const u={Float32Array:kr,Uint8Array:Ur,Uint16Array:Ml,Uint32Array:Qi,Int8Array:ih,Int16Array:rh,Int32Array:qs,Uint8ClampedArray:Ur},c=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(r/s))));let p=Math.ceil(r/s/c);c*p*s<r&&p++;const g=c*p*s,y=new n.constructor(g);y.set(n,0),t.array=y;const q=new Zz(t.array,c,p,o,u[t.array.constructor.name]||kr);q.needsUpdate=!0,q.isPBOTexture=!0;const S=new xu(q,null,null);S.setPrecision("high"),t.pboNode=S,t.pbo=S.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:n}=e,r=t.value;if(this.renderer.backend.has(r)){const p=this.renderer.backend.get(r);p.pbo=r.pbo}const s=this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.label),a=this.getPropertyName(s);this.increaseUsage(n);const o=n.build(this,"uint"),u=this.getDataFromNode(e);let c=u.propertyName;if(c===void 0){const p=this.getVarFromNode(e);c=this.getPropertyName(p);const g=this.getDataFromNode(t);let y=g.propertySizeName;y===void 0&&(y=c+"Size",this.getVarFromNode(t,y,"uint"),this.addLineFlowCode(`${y} = uint( textureSize( ${a}, 0 ).x )`,e),g.propertySizeName=y);const{itemSize:q}=r,S="."+Sh.join("").slice(0,q),R=`ivec2(${o} % ${y}, ${o} / ${y})`,M=this.generateTextureLoad(null,a,R,null,"0");let E="vec4";r.pbo.type===Qi?E="uvec4":r.pbo.type===qs&&(E="ivec4"),this.addLineFlowCode(`${c} = ${E}(${M})${S}`,e),u.propertyName=c}return c}generateTextureLoad(e,t,n,r,s="0"){return r?`texelFetch( ${t}, ivec3( ${n}, ${r} ), ${s} )`:`texelFetch( ${t}, ${n}, ${s} )`}generateTexture(e,t,n,r){return e.isDepthTexture?`texture( ${t}, ${n} ).x`:(r&&(n=`vec3( ${n}, ${r} )`),`texture( ${t}, ${n} )`)}generateTextureLevel(e,t,n,r){return`textureLod( ${t}, ${n}, ${r} )`}generateTextureBias(e,t,n,r){return`texture( ${t}, ${n}, ${r} )`}generateTextureGrad(e,t,n,r){return`textureGrad( ${t}, ${n}, ${r[0]}, ${r[1]} )`}generateTextureCompare(e,t,n,r,s,a=this.shaderStage){if(a==="fragment")return`texture( ${t}, vec3( ${n}, ${r} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${a} shader.`)}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`${this.getVar(r.type,r.name,r.count)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],n=[],r={};for(const a of t){let o=null,u=!1;if(a.type==="texture"||a.type==="texture3D"){const p=a.node.value;let g="";(p.isDataTexture===!0||p.isData3DTexture===!0)&&(p.type===Qi?g="u":p.type===qs&&(g="i")),a.type==="texture3D"?o=`${g}sampler3D ${a.name};`:p.compareFunction?o=`sampler2DShadow ${a.name};`:p.isDataArrayTexture===!0||p.isCompressedArrayTexture===!0?o=`${g}sampler2DArray ${a.name};`:o=`${g}sampler2D ${a.name};`}else if(a.type==="cubeTexture")o=`samplerCube ${a.name};`;else if(a.type==="buffer"){const p=a.node,g=this.getType(p.bufferType),y=p.bufferCount,q=y>0?y:"";o=`${p.name} {
	${g} ${a.name}[${q}];
};
`}else o=`${this.getVectorType(a.type)} ${this.getPropertyName(a,e)};`,u=!0;const c=a.node.precision;if(c!==null&&(o=Vue[c]+" "+o),u){o="	"+o;const p=a.groupNode.name;(r[p]||(r[p]=[])).push(o)}else o="uniform "+o,n.push(o)}let s="";for(const a in r){const o=r[a];s+=this._getGLSLUniformStruct(e+"_"+a,o.join(`
`))+`
`}return s+=n.join(`
`),s}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==qs){let n=e;e.isInterleavedBufferAttribute&&(n=e.data);const r=n.array;r instanceof Uint32Array||r instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const n=this.getAttributesArray();let r=0;for(const s of n)t+=`layout( location = ${r++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[];for(const n of e.members)t.push(`	${n.type} ${n.name};`);return t.join(`
`)}getStructs(e){const t=[],n=this.structs[e],r=[];for(const s of n)if(s.output)for(const a of s.members)r.push(`layout( location = ${a.index} ) out ${a.type} ${a.name};`);else{let a="struct "+s.name+` {
`;a+=this.getStructMembers(s),a+=`
};
`,t.push(a)}return r.length===0&&r.push("layout( location = 0 ) out vec4 fragColor;"),`
`+r.join(`
`)+`

`+t.join(`
`)}getVaryings(e){let t="";const n=this.varyings;if(e==="vertex"||e==="compute")for(const r of n){e==="compute"&&(r.needsInterpolation=!0);const s=this.getType(r.type);if(r.needsInterpolation){const a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${a}out ${s} ${r.name};
`}else t+=`${s} ${r.name};
`}else if(e==="fragment"){for(const r of n)if(r.needsInterpolation){const s=this.getType(r.type),a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${a}in ${s} ${r.name};
`}}for(const r of this.builtins[e])t+=`${r};
`;return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((n,r)=>n*r,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,n=this.shaderStage){const r=this.extensions[n]||(this.extensions[n]=new Map);r.has(e)===!1&&r.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const r=this.renderer.backend.extensions;this.object.isBatchedMesh&&r.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const n=this.extensions[e];if(n!==void 0)for(const{name:r,behavior:s}of n.values())t.push(`#extension ${r} : ${s}`);return t.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let t=FR[e];if(t===void 0){let n;switch(t=!1,e){case"float32Filterable":n="OES_texture_float_linear";break;case"clipDistance":n="WEBGL_clip_cull_distance";break}if(n!==void 0){const r=this.renderer.backend.extensions;r.has(n)&&(r.get(n),t=!0)}FR[e]=t}return t}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let n=0;n<e.length;n++){const r=e[n],s=this.getPropertyName(r.attributeNode);s&&(t+=`${r.varyingName} = ${s};
	`)}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${kR}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
${kR}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

// structs
${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let n=`// code

`;n+=this.flowCode[t];const r=this.flowNodes[t],s=r[r.length-1];for(const o of r){const u=this.getFlowData(o),c=o.name;c&&(n.length>0&&(n+=`
`),n+=`	// flow -> ${c}
	`),n+=`${u.code}
	`,o===s&&t!=="compute"&&(n+=`// result
	`,t==="vertex"?(n+="gl_Position = ",n+=`${u.result};`):t==="fragment"&&(o.outputNode.isOutputStructNode||(n+="fragColor = ",n+=`${u.result};`)))}const a=e[t];a.extensions=this.getExtensions(t),a.uniforms=this.getUniforms(t),a.attributes=this.getAttributes(t),a.varyings=this.getVaryings(t),a.vars=this.getVars(t),a.structs=this.getStructs(t),a.codes=this.getCodes(t),a.transforms=this.getTransforms(t),a.flow=n}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),a=this.getDataFromNode(e,n,this.globalCache);let o=a.uniformGPU;if(o===void 0){const u=e.groupNode,c=u.name,p=this.getBindGroupArray(c,n);if(t==="texture")o=new i9(s.name,s.node,u),p.push(o);else if(t==="cubeTexture")o=new zB(s.name,s.node,u),p.push(o);else if(t==="texture3D")o=new GB(s.name,s.node,u),p.push(o);else if(t==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const g=new FB(e,u);g.name=e.name,p.push(g),o=g}else{const g=this.uniformGroups[n]||(this.uniformGroups[n]={});let y=g[c];y===void 0&&(y=new kB(n+"_"+c,u),g[c]=y,p.push(y)),o=this.getNodeUniform(s,t),y.addUniform(o)}a.uniformGPU=o}return s}}let __=null,Vf=null;class VB{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={render:null,compute:null},this.trackTimestamp=e.trackTimestamp===!0}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}destroySampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp){Dl("WebGPURenderer: Timestamp tracking is disabled.");return}const t=this.timestampQueryPool[e];if(!t){Dl(`WebGPURenderer: No timestamp query pool for type '${e}' found.`);return}const n=await t.resolveQueriesAsync();return this.renderer.info[e].timestamp=n,n}async waitForGPU(){}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return __=__||new rt,this.renderer.getDrawingBufferSize(__)}setScissorTest(){}getClearColor(){const e=this.renderer;return Vf=Vf||new Lq,e.getClearColor(Vf),Vf.getRGB(Vf),Vf}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:AN(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${pA} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let jue=0;class Wue{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class $ue{constructor(e){this.backend=e}createAttribute(e,t){const n=this.backend,{gl:r}=n,s=e.array,a=e.usage||r.STATIC_DRAW,o=e.isInterleavedBufferAttribute?e.data:e,u=n.get(o);let c=u.bufferGPU;c===void 0&&(c=this._createBuffer(r,t,s,a),u.bufferGPU=c,u.bufferType=t,u.version=o.version);let p;if(s instanceof Float32Array)p=r.FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?p=r.HALF_FLOAT:p=r.UNSIGNED_SHORT;else if(s instanceof Int16Array)p=r.SHORT;else if(s instanceof Uint32Array)p=r.UNSIGNED_INT;else if(s instanceof Int32Array)p=r.INT;else if(s instanceof Int8Array)p=r.BYTE;else if(s instanceof Uint8Array)p=r.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)p=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let g={bufferGPU:c,bufferType:t,type:p,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:p===r.INT||p===r.UNSIGNED_INT||e.gpuType===qs,id:jue++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const y=this._createBuffer(r,t,s,a);g=new Wue(g,y)}n.set(e,g)}updateAttribute(e){const t=this.backend,{gl:n}=t,r=e.array,s=e.isInterleavedBufferAttribute?e.data:e,a=t.get(s),o=a.bufferType,u=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(n.bindBuffer(o,a.bufferGPU),u.length===0)n.bufferSubData(o,0,r);else{for(let c=0,p=u.length;c<p;c++){const g=u[c];n.bufferSubData(o,g.start*r.BYTES_PER_ELEMENT,r,g.start,g.count)}s.clearUpdateRanges()}n.bindBuffer(o,null),a.version=s.version}destroyAttribute(e){const t=this.backend,{gl:n}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const r=t.get(e);n.deleteBuffer(r.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:n}=t,r=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=t.get(r),a=e.array,o=a.byteLength;n.bindBuffer(n.COPY_READ_BUFFER,s);const u=n.createBuffer();n.bindBuffer(n.COPY_WRITE_BUFFER,u),n.bufferData(n.COPY_WRITE_BUFFER,o,n.STREAM_READ),n.copyBufferSubData(n.COPY_READ_BUFFER,n.COPY_WRITE_BUFFER,0,0,o),await t.utils._clientWaitAsync();const c=new e.array.constructor(a.length);return n.bindBuffer(n.COPY_WRITE_BUFFER,u),n.getBufferSubData(n.COPY_WRITE_BUFFER,0,c),n.deleteBuffer(u),n.bindBuffer(n.COPY_READ_BUFFER,null),n.bindBuffer(n.COPY_WRITE_BUFFER,null),c.buffer}_createBuffer(e,t,n,r){const s=e.createBuffer();return e.bindBuffer(t,s),e.bufferData(t,n,r),e.bindBuffer(t,null),s}}let v_,tp;class Xue{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentVAO=null,this.currentIndex=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){const e=this.gl;v_={[Zs]:e.FUNC_ADD,[Uy]:e.FUNC_SUBTRACT,[Oy]:e.FUNC_REVERSE_SUBTRACT},tp={[dc]:e.ZERO,[By]:e.ONE,[Iy]:e.SRC_COLOR,[Up]:e.SRC_ALPHA,[Hy]:e.SRC_ALPHA_SATURATE,[Gy]:e.DST_COLOR,[ky]:e.DST_ALPHA,[Fy]:e.ONE_MINUS_SRC_COLOR,[Op]:e.ONE_MINUS_SRC_ALPHA,[Vy]:e.ONE_MINUS_DST_COLOR,[zy]:e.ONE_MINUS_DST_ALPHA};const t=e.getParameter(e.SCISSOR_BOX),n=e.getParameter(e.VIEWPORT);this.currentScissor=new sn().fromArray(t),this.currentViewport=new sn().fromArray(n),this._tempVec4=new sn}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==tN?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===X_?t.cullFace(t.BACK):e===nN?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:n}=this;e!==t&&(n.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,n,r,s,a,o,u){const{gl:c}=this;if(e===Fa){this.currentBlendingEnabled===!0&&(this.disable(c.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(c.BLEND),this.currentBlendingEnabled=!0),e!==_d){if(e!==this.currentBlending||u!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Zs||this.currentBlendEquationAlpha!==Zs)&&(c.blendEquation(c.FUNC_ADD),this.currentBlendEquation=Zs,this.currentBlendEquationAlpha=Zs),u)switch(e){case ka:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case Cd:c.blendFunc(c.ONE,c.ONE);break;case Nd:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case Pd:c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case ka:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case Cd:c.blendFunc(c.SRC_ALPHA,c.ONE);break;case Nd:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case Pd:c.blendFunc(c.ZERO,c.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=u}return}s=s||t,a=a||n,o=o||r,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(c.blendEquationSeparate(v_[t],v_[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(n!==this.currentBlendSrc||r!==this.currentBlendDst||a!==this.currentBlendSrcAlpha||o!==this.currentBlendDstAlpha)&&(c.blendFuncSeparate(tp[n],tp[r],tp[a],tp[o]),this.currentBlendSrc=n,this.currentBlendDst=r,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=o),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case Bp:t.depthFunc(t.NEVER);break;case Ip:t.depthFunc(t.ALWAYS);break;case Fp:t.depthFunc(t.LESS);break;case j1:t.depthFunc(t.LEQUAL);break;case kp:t.depthFunc(t.EQUAL);break;case zp:t.depthFunc(t.GEQUAL);break;case Gp:t.depthFunc(t.GREATER);break;case Vp:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}scissor(e,t,n,r){const s=this._tempVec4.set(e,t,n,r);if(this.currentScissor.equals(s)===!1){const{gl:a}=this;a.scissor(s.x,s.y,s.z,s.w),this.currentScissor.copy(s)}}viewport(e,t,n,r){const s=this._tempVec4.set(e,t,n,r);if(this.currentViewport.equals(s)===!1){const{gl:a}=this;a.viewport(s.x,s.y,s.z,s.w),this.currentViewport.copy(s)}}setScissorTest(e){const t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,n){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==n)&&(this.gl.stencilFunc(e,t,n),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=n)}setStencilOp(e,t,n){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==n)&&(this.gl.stencilOp(e,t,n),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=n)}setMaterial(e,t,n){const{gl:r}=this;e.side===Qr?this.disable(r.CULL_FACE):this.enable(r.CULL_FACE);let s=e.side===Oi;t&&(s=!s),this.setFlipSided(s),e.blending===ka&&e.transparent===!1?this.setBlending(Fa):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const a=e.stencilWrite;if(this.setStencilTest(a),a&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(r.SAMPLE_ALPHA_TO_COVERAGE):this.disable(r.SAMPLE_ALPHA_TO_COVERAGE),n>0&&this.currentClippingPlanes!==n)for(let u=0;u<8;u++)u<n?this.enable(12288+u):this.disable(12288+u)}setPolygonOffset(e,t,n){const{gl:r}=this;e?(this.enable(r.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==n)&&(r.polygonOffset(t,n),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=n)):this.disable(r.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}setVertexState(e,t=null){const n=this.gl;return this.currentVAO!==e||this.currentIndex!==t?(n.bindVertexArray(e),t!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),this.currentVAO=e,this.currentIndex=t,!0):!1}resetVertexState(){const e=this.gl;e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.currentVAO=null,this.currentIndex=null}bindFramebuffer(e,t){const{gl:n,currentBoundFramebuffers:r}=this;return r[e]!==t?(n.bindFramebuffer(e,t),r[e]=t,e===n.DRAW_FRAMEBUFFER&&(r[n.FRAMEBUFFER]=t),e===n.FRAMEBUFFER&&(r[n.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:n}=this;let r=[],s=!1;if(e.textures!==null){r=this.currentDrawbuffers.get(t),r===void 0&&(r=[],this.currentDrawbuffers.set(t,r));const a=e.textures;if(r.length!==a.length||r[0]!==n.COLOR_ATTACHMENT0){for(let o=0,u=a.length;o<u;o++)r[o]=n.COLOR_ATTACHMENT0+o;r.length=a.length,s=!0}}else r[0]!==n.BACK&&(r[0]=n.BACK,s=!0);s&&n.drawBuffers(r)}activeTexture(e){const{gl:t,currentTextureSlot:n,maxTextures:r}=this;e===void 0&&(e=t.TEXTURE0+r-1),n!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,n){const{gl:r,currentTextureSlot:s,currentBoundTextures:a,maxTextures:o}=this;n===void 0&&(s===null?n=r.TEXTURE0+o-1:n=s);let u=a[n];u===void 0&&(u={type:void 0,texture:void 0},a[n]=u),(u.type!==e||u.texture!==t)&&(s!==n&&(r.activeTexture(n),this.currentTextureSlot=n),r.bindTexture(e,t),u.type=e,u.texture=t)}bindBufferBase(e,t,n){const{gl:r}=this,s=`${e}-${t}`;return this.currentBoundBufferBases[s]!==n?(r.bindBufferBase(e,t,n),this.currentBoundBufferBases[s]=n,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:n}=this,r=n[t];r!==void 0&&r.type!==void 0&&(e.bindTexture(r.type,null),r.type=void 0,r.texture=void 0)}}class Que{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=_o){const{gl:n,extensions:r}=this;let s;if(e===Ur)return n.UNSIGNED_BYTE;if(e===m5)return n.UNSIGNED_SHORT_4_4_4_4;if(e===g5)return n.UNSIGNED_SHORT_5_5_5_1;if(e===_5)return n.UNSIGNED_INT_5_9_9_9_REV;if(e===ih)return n.BYTE;if(e===rh)return n.SHORT;if(e===Ml)return n.UNSIGNED_SHORT;if(e===qs)return n.INT;if(e===Qi)return n.UNSIGNED_INT;if(e===kr)return n.FLOAT;if(e===Ss)return n.HALF_FLOAT;if(e===$y)return n.ALPHA;if(e===R3)return n.RGB;if(e===Or)return n.RGBA;if(e===Xy)return n.LUMINANCE;if(e===Qy)return n.LUMINANCE_ALPHA;if(e===yo)return n.DEPTH_COMPONENT;if(e===xo)return n.DEPTH_STENCIL;if(e===C3)return n.RED;if(e===mA)return n.RED_INTEGER;if(e===mh)return n.RG;if(e===gA)return n.RG_INTEGER;if(e===_A)return n.RGBA_INTEGER;if(e===sh||e===F1||e===k1||e===z1)if(t===nn)if(s=r.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===sh)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===F1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===k1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===z1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=r.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===sh)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===F1)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===k1)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===z1)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===Hp||e===jp||e===Wp||e===$p)if(s=r.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===Hp)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===jp)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Wp)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===$p)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===Xp||e===Dd||e===Ld)if(s=r.get("WEBGL_compressed_texture_etc"),s!==null){if(e===Xp||e===Dd)return t===nn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===Ld)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===Ud||e===Od||e===Bd||e===Id||e===Fd||e===kd||e===zd||e===Gd||e===Vd||e===Hd||e===jd||e===Wd||e===$d||e===Xd)if(s=r.get("WEBGL_compressed_texture_astc"),s!==null){if(e===Ud)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===Od)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===Bd)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===Id)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===Fd)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===kd)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===zd)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===Gd)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===Vd)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===Hd)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===jd)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===Wd)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===$d)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Xd)return t===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===ah)if(s=r.get("EXT_texture_compression_bptc"),s!==null){if(e===ah)return t===nn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===Yy||e===Qp||e===Yp||e===Kp)if(s=r.get("EXT_texture_compression_rgtc"),s!==null){if(e===ah)return s.COMPRESSED_RED_RGTC1_EXT;if(e===Qp)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===Yp)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===Kp)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===vo?n.UNSIGNED_INT_24_8:n[e]!==void 0?n[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((n,r)=>{function s(){const a=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED){e.deleteSync(t),r();return}if(a===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(t),n()}s()})}}let zR=!1,q6,y_,GR;class Yue{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},zR===!1&&(this._init(),zR=!0)}_init(){const e=this.gl;q6={[Ah]:e.REPEAT,[au]:e.CLAMP_TO_EDGE,[ph]:e.MIRRORED_REPEAT},y_={[nr]:e.NEAREST,[Wy]:e.NEAREST_MIPMAP_NEAREST,[yc]:e.NEAREST_MIPMAP_LINEAR,[rs]:e.LINEAR,[vd]:e.LINEAR_MIPMAP_NEAREST,[Na]:e.LINEAR_MIPMAP_LINEAR},GR={[Ky]:e.NEVER,[nx]:e.ALWAYS,[v5]:e.LESS,[y5]:e.LEQUAL,[Zy]:e.EQUAL,[tx]:e.GEQUAL,[Jy]:e.GREATER,[ex]:e.NOTEQUAL}}getGLTextureType(e){const{gl:t}=this;let n;return e.isCubeTexture===!0?n=t.TEXTURE_CUBE_MAP:e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?n=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?n=t.TEXTURE_3D:n=t.TEXTURE_2D,n}getInternalFormat(e,t,n,r,s=!1){const{gl:a,extensions:o}=this;if(e!==null){if(a[e]!==void 0)return a[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let u=t;return t===a.RED&&(n===a.FLOAT&&(u=a.R32F),n===a.HALF_FLOAT&&(u=a.R16F),n===a.UNSIGNED_BYTE&&(u=a.R8),n===a.UNSIGNED_SHORT&&(u=a.R16),n===a.UNSIGNED_INT&&(u=a.R32UI),n===a.BYTE&&(u=a.R8I),n===a.SHORT&&(u=a.R16I),n===a.INT&&(u=a.R32I)),t===a.RED_INTEGER&&(n===a.UNSIGNED_BYTE&&(u=a.R8UI),n===a.UNSIGNED_SHORT&&(u=a.R16UI),n===a.UNSIGNED_INT&&(u=a.R32UI),n===a.BYTE&&(u=a.R8I),n===a.SHORT&&(u=a.R16I),n===a.INT&&(u=a.R32I)),t===a.RG&&(n===a.FLOAT&&(u=a.RG32F),n===a.HALF_FLOAT&&(u=a.RG16F),n===a.UNSIGNED_BYTE&&(u=a.RG8),n===a.UNSIGNED_SHORT&&(u=a.RG16),n===a.UNSIGNED_INT&&(u=a.RG32UI),n===a.BYTE&&(u=a.RG8I),n===a.SHORT&&(u=a.RG16I),n===a.INT&&(u=a.RG32I)),t===a.RG_INTEGER&&(n===a.UNSIGNED_BYTE&&(u=a.RG8UI),n===a.UNSIGNED_SHORT&&(u=a.RG16UI),n===a.UNSIGNED_INT&&(u=a.RG32UI),n===a.BYTE&&(u=a.RG8I),n===a.SHORT&&(u=a.RG16I),n===a.INT&&(u=a.RG32I)),t===a.RGB&&(n===a.FLOAT&&(u=a.RGB32F),n===a.HALF_FLOAT&&(u=a.RGB16F),n===a.UNSIGNED_BYTE&&(u=a.RGB8),n===a.UNSIGNED_SHORT&&(u=a.RGB16),n===a.UNSIGNED_INT&&(u=a.RGB32UI),n===a.BYTE&&(u=a.RGB8I),n===a.SHORT&&(u=a.RGB16I),n===a.INT&&(u=a.RGB32I),n===a.UNSIGNED_BYTE&&(u=r===nn&&s===!1?a.SRGB8:a.RGB8),n===a.UNSIGNED_SHORT_5_6_5&&(u=a.RGB565),n===a.UNSIGNED_SHORT_5_5_5_1&&(u=a.RGB5_A1),n===a.UNSIGNED_SHORT_4_4_4_4&&(u=a.RGB4),n===a.UNSIGNED_INT_5_9_9_9_REV&&(u=a.RGB9_E5)),t===a.RGB_INTEGER&&(n===a.UNSIGNED_BYTE&&(u=a.RGB8UI),n===a.UNSIGNED_SHORT&&(u=a.RGB16UI),n===a.UNSIGNED_INT&&(u=a.RGB32UI),n===a.BYTE&&(u=a.RGB8I),n===a.SHORT&&(u=a.RGB16I),n===a.INT&&(u=a.RGB32I)),t===a.RGBA&&(n===a.FLOAT&&(u=a.RGBA32F),n===a.HALF_FLOAT&&(u=a.RGBA16F),n===a.UNSIGNED_BYTE&&(u=a.RGBA8),n===a.UNSIGNED_SHORT&&(u=a.RGBA16),n===a.UNSIGNED_INT&&(u=a.RGBA32UI),n===a.BYTE&&(u=a.RGBA8I),n===a.SHORT&&(u=a.RGBA16I),n===a.INT&&(u=a.RGBA32I),n===a.UNSIGNED_BYTE&&(u=r===nn&&s===!1?a.SRGB8_ALPHA8:a.RGBA8),n===a.UNSIGNED_SHORT_4_4_4_4&&(u=a.RGBA4),n===a.UNSIGNED_SHORT_5_5_5_1&&(u=a.RGB5_A1)),t===a.RGBA_INTEGER&&(n===a.UNSIGNED_BYTE&&(u=a.RGBA8UI),n===a.UNSIGNED_SHORT&&(u=a.RGBA16UI),n===a.UNSIGNED_INT&&(u=a.RGBA32UI),n===a.BYTE&&(u=a.RGBA8I),n===a.SHORT&&(u=a.RGBA16I),n===a.INT&&(u=a.RGBA32I)),t===a.DEPTH_COMPONENT&&(n===a.UNSIGNED_SHORT&&(u=a.DEPTH_COMPONENT16),n===a.UNSIGNED_INT&&(u=a.DEPTH_COMPONENT24),n===a.FLOAT&&(u=a.DEPTH_COMPONENT32F)),t===a.DEPTH_STENCIL&&n===a.UNSIGNED_INT_24_8&&(u=a.DEPTH24_STENCIL8),(u===a.R16F||u===a.R32F||u===a.RG16F||u===a.RG32F||u===a.RGBA16F||u===a.RGBA32F)&&o.get("EXT_color_buffer_float"),u}setTextureParameters(e,t){const{gl:n,extensions:r,backend:s}=this;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,t.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texParameteri(e,n.TEXTURE_WRAP_S,q6[t.wrapS]),n.texParameteri(e,n.TEXTURE_WRAP_T,q6[t.wrapT]),(e===n.TEXTURE_3D||e===n.TEXTURE_2D_ARRAY)&&n.texParameteri(e,n.TEXTURE_WRAP_R,q6[t.wrapR]),n.texParameteri(e,n.TEXTURE_MAG_FILTER,y_[t.magFilter]);const a=t.mipmaps!==void 0&&t.mipmaps.length>0,o=t.minFilter===rs&&a?Na:t.minFilter;if(n.texParameteri(e,n.TEXTURE_MIN_FILTER,y_[o]),t.compareFunction&&(n.texParameteri(e,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(e,n.TEXTURE_COMPARE_FUNC,GR[t.compareFunction])),r.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===nr||t.minFilter!==yc&&t.minFilter!==Na||t.type===kr&&r.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const u=r.get("EXT_texture_filter_anisotropic");n.texParameterf(e,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:n,defaultTextures:r}=this,s=this.getGLTextureType(e);let a=r[s];a===void 0&&(a=t.createTexture(),n.state.bindTexture(s,a),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),r[s]=a),n.set(e,{textureGPU:a,glTextureType:s,isDefault:!0})}createTexture(e,t){const{gl:n,backend:r}=this,{levels:s,width:a,height:o,depth:u}=t,c=r.utils.convert(e.format,e.colorSpace),p=r.utils.convert(e.type),g=this.getInternalFormat(e.internalFormat,c,p,e.colorSpace,e.isVideoTexture),y=n.createTexture(),q=this.getGLTextureType(e);r.state.bindTexture(q,y),this.setTextureParameters(q,e),e.isDataArrayTexture||e.isCompressedArrayTexture?n.texStorage3D(n.TEXTURE_2D_ARRAY,s,g,a,o,u):e.isData3DTexture?n.texStorage3D(n.TEXTURE_3D,s,g,a,o,u):e.isVideoTexture||n.texStorage2D(q,s,g,a,o),r.set(e,{textureGPU:y,glTextureType:q,glFormat:c,glType:p,glInternalFormat:g})}copyBufferToTexture(e,t){const{gl:n,backend:r}=this,{textureGPU:s,glTextureType:a,glFormat:o,glType:u}=r.get(t),{width:c,height:p}=t.source.data;n.bindBuffer(n.PIXEL_UNPACK_BUFFER,e),r.state.bindTexture(a,s),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texSubImage2D(a,0,0,0,c,p,o,u,0),n.bindBuffer(n.PIXEL_UNPACK_BUFFER,null),r.state.unbindTexture()}updateTexture(e,t){const{gl:n}=this,{width:r,height:s}=t,{textureGPU:a,glTextureType:o,glFormat:u,glType:c,glInternalFormat:p}=this.backend.get(e);if(e.isRenderTargetTexture||a===void 0)return;const g=y=>y.isDataTexture?y.image.data:typeof HTMLImageElement<"u"&&y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&y instanceof ImageBitmap||y instanceof OffscreenCanvas?y:y.data;if(this.backend.state.bindTexture(o,a),this.setTextureParameters(o,e),e.isCompressedTexture){const y=e.mipmaps,q=t.image;for(let S=0;S<y.length;S++){const R=y[S];e.isCompressedArrayTexture?e.format!==n.RGBA?u!==null?n.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,S,0,0,0,R.width,R.height,q.depth,u,R.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texSubImage3D(n.TEXTURE_2D_ARRAY,S,0,0,0,R.width,R.height,q.depth,u,c,R.data):u!==null?n.compressedTexSubImage2D(n.TEXTURE_2D,S,0,0,R.width,R.height,u,R.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const y=t.images;for(let q=0;q<6;q++){const S=g(y[q]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+q,0,0,0,r,s,u,c,S)}}else if(e.isDataArrayTexture){const y=t.image;n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,y.width,y.height,y.depth,u,c,y.data)}else if(e.isData3DTexture){const y=t.image;n.texSubImage3D(n.TEXTURE_3D,0,0,0,0,y.width,y.height,y.depth,u,c,y.data)}else if(e.isVideoTexture)e.update(),n.texImage2D(o,0,p,u,c,t.image);else{const y=g(t.image);n.texSubImage2D(o,0,0,0,r,s,u,c,y)}}generateMipmaps(e){const{gl:t,backend:n}=this,{textureGPU:r,glTextureType:s}=n.get(e);n.state.bindTexture(s,r),t.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:t,backend:n}=this;if(e){const r=n.get(e);if(r.renderBufferStorageSetup=void 0,r.framebuffers){for(const s in r.framebuffers)t.deleteFramebuffer(r.framebuffers[s]);delete r.framebuffers}if(r.depthRenderbuffer&&(t.deleteRenderbuffer(r.depthRenderbuffer),delete r.depthRenderbuffer),r.stencilRenderbuffer&&(t.deleteRenderbuffer(r.stencilRenderbuffer),delete r.stencilRenderbuffer),r.msaaFrameBuffer&&(t.deleteFramebuffer(r.msaaFrameBuffer),delete r.msaaFrameBuffer),r.msaaRenderbuffers){for(let s=0;s<r.msaaRenderbuffers.length;s++)t.deleteRenderbuffer(r.msaaRenderbuffers[s]);delete r.msaaRenderbuffers}}}destroyTexture(e){const{gl:t,backend:n}=this,{textureGPU:r,renderTarget:s}=n.get(e);this.deallocateRenderBuffers(s),t.deleteTexture(r),n.delete(e)}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){const{gl:o,backend:u}=this,{state:c}=this.backend,{textureGPU:p,glTextureType:g,glType:y,glFormat:q}=u.get(t);c.bindTexture(g,p);let S,R,M,E,U,P,O,F,I;const z=e.isCompressedTexture?e.mipmaps[a]:e.image;if(n!==null)S=n.max.x-n.min.x,R=n.max.y-n.min.y,M=n.isBox3?n.max.z-n.min.z:1,E=n.min.x,U=n.min.y,P=n.isBox3?n.min.z:0;else{const ue=Math.pow(2,-s);S=Math.floor(z.width*ue),R=Math.floor(z.height*ue),e.isDataArrayTexture?M=z.depth:e.isData3DTexture?M=Math.floor(z.depth*ue):M=1,E=0,U=0,P=0}r!==null?(O=r.x,F=r.y,I=r.z):(O=0,F=0,I=0),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment);const j=o.getParameter(o.UNPACK_ROW_LENGTH),k=o.getParameter(o.UNPACK_IMAGE_HEIGHT),G=o.getParameter(o.UNPACK_SKIP_PIXELS),$=o.getParameter(o.UNPACK_SKIP_ROWS),te=o.getParameter(o.UNPACK_SKIP_IMAGES);o.pixelStorei(o.UNPACK_ROW_LENGTH,z.width),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,z.height),o.pixelStorei(o.UNPACK_SKIP_PIXELS,E),o.pixelStorei(o.UNPACK_SKIP_ROWS,U),o.pixelStorei(o.UNPACK_SKIP_IMAGES,P);const ne=t.isDataArrayTexture||t.isData3DTexture;if(e.isRenderTargetTexture||e.isDepthTexture){const ue=u.get(e),ae=u.get(t),W=u.get(ue.renderTarget),J=u.get(ae.renderTarget),re=W.framebuffers[ue.cacheKey],ge=J.framebuffers[ae.cacheKey];c.bindFramebuffer(o.READ_FRAMEBUFFER,re),c.bindFramebuffer(o.DRAW_FRAMEBUFFER,ge);let Y=o.COLOR_BUFFER_BIT;e.isDepthTexture&&(Y=o.DEPTH_BUFFER_BIT),o.blitFramebuffer(E,U,S,R,O,F,S,R,Y,o.NEAREST),c.bindFramebuffer(o.READ_FRAMEBUFFER,null),c.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}else ne?e.isDataTexture||e.isData3DTexture?o.texSubImage3D(g,a,O,F,I,S,R,M,q,y,z.data):t.isCompressedArrayTexture?o.compressedTexSubImage3D(g,a,O,F,I,S,R,M,q,z.data):o.texSubImage3D(g,a,O,F,I,S,R,M,q,y,z):e.isDataTexture?o.texSubImage2D(g,a,O,F,S,R,q,y,z.data):e.isCompressedTexture?o.compressedTexSubImage2D(g,a,O,F,z.width,z.height,q,z.data):o.texSubImage2D(g,a,O,F,S,R,q,y,z);o.pixelStorei(o.UNPACK_ROW_LENGTH,j),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,k),o.pixelStorei(o.UNPACK_SKIP_PIXELS,G),o.pixelStorei(o.UNPACK_SKIP_ROWS,$),o.pixelStorei(o.UNPACK_SKIP_IMAGES,te),a===0&&t.generateMipmaps&&o.generateMipmap(g),c.unbindTexture()}copyFramebufferToTexture(e,t,n){const{gl:r}=this,{state:s}=this.backend,{textureGPU:a}=this.backend.get(e),{x:o,y:u,z:c,w:p}=n,g=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,y=t.renderTarget?t.renderTarget.height:this.backend.getDrawingBufferSize().y;if(g){const q=o!==0||u!==0;let S,R;if(e.isDepthTexture===!0?(S=r.DEPTH_BUFFER_BIT,R=r.DEPTH_ATTACHMENT,t.stencil&&(S|=r.STENCIL_BUFFER_BIT)):(S=r.COLOR_BUFFER_BIT,R=r.COLOR_ATTACHMENT0),q){const M=this.backend.get(t.renderTarget),E=M.framebuffers[t.getCacheKey()],U=M.msaaFrameBuffer;s.bindFramebuffer(r.DRAW_FRAMEBUFFER,E),s.bindFramebuffer(r.READ_FRAMEBUFFER,U);const P=y-u-p;r.blitFramebuffer(o,P,o+c,P+p,o,P,o+c,P+p,S,r.NEAREST),s.bindFramebuffer(r.READ_FRAMEBUFFER,E),s.bindTexture(r.TEXTURE_2D,a),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,o,P,c,p),s.unbindTexture()}else{const M=r.createFramebuffer();s.bindFramebuffer(r.DRAW_FRAMEBUFFER,M),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,R,r.TEXTURE_2D,a,0),r.blitFramebuffer(0,0,c,p,0,0,c,p,S,r.NEAREST),r.deleteFramebuffer(M)}}else s.bindTexture(r.TEXTURE_2D,a),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,o,y-p-u,c,p),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t,n,r=!1){const{gl:s}=this,a=t.renderTarget,{depthTexture:o,depthBuffer:u,stencilBuffer:c,width:p,height:g}=a;if(s.bindRenderbuffer(s.RENDERBUFFER,e),u&&!c){let y=s.DEPTH_COMPONENT24;r===!0?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(s.RENDERBUFFER,a.samples,y,p,g):n>0?(o&&o.isDepthTexture&&o.type===s.FLOAT&&(y=s.DEPTH_COMPONENT32F),s.renderbufferStorageMultisample(s.RENDERBUFFER,n,y,p,g)):s.renderbufferStorage(s.RENDERBUFFER,y,p,g),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,e)}else u&&c&&(n>0?s.renderbufferStorageMultisample(s.RENDERBUFFER,n,s.DEPTH24_STENCIL8,p,g):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,p,g),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,e))}async copyTextureToBuffer(e,t,n,r,s,a){const{backend:o,gl:u}=this,{textureGPU:c,glFormat:p,glType:g}=this.backend.get(e),y=u.createFramebuffer();u.bindFramebuffer(u.READ_FRAMEBUFFER,y);const q=e.isCubeTexture?u.TEXTURE_CUBE_MAP_POSITIVE_X+a:u.TEXTURE_2D;u.framebufferTexture2D(u.READ_FRAMEBUFFER,u.COLOR_ATTACHMENT0,q,c,0);const S=this._getTypedArrayType(g),R=this._getBytesPerTexel(g,p),E=r*s*R,U=u.createBuffer();u.bindBuffer(u.PIXEL_PACK_BUFFER,U),u.bufferData(u.PIXEL_PACK_BUFFER,E,u.STREAM_READ),u.readPixels(t,n,r,s,p,g,0),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),await o.utils._clientWaitAsync();const P=new S(E/S.BYTES_PER_ELEMENT);return u.bindBuffer(u.PIXEL_PACK_BUFFER,U),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,P),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),u.deleteFramebuffer(y),P}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:n}=this;let r=0;if(e===n.UNSIGNED_BYTE&&(r=1),(e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5||e===n.UNSIGNED_SHORT||e===n.HALF_FLOAT)&&(r=2),(e===n.UNSIGNED_INT||e===n.FLOAT)&&(r=4),t===n.RGBA)return r*4;if(t===n.RGB)return r*3;if(t===n.ALPHA)return r}}class Kue{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class Zue{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const n=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const VR={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"};class Jue{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:n,mode:r,object:s,type:a,info:o,index:u}=this;u!==0?n.drawElements(r,t,a,e):n.drawArrays(r,e,t),o.update(s,t,1)}renderInstances(e,t,n){const{gl:r,mode:s,type:a,index:o,object:u,info:c}=this;n!==0&&(o!==0?r.drawElementsInstanced(s,t,a,e,n):r.drawArraysInstanced(s,e,t,n),c.update(u,t,n))}renderMultiDraw(e,t,n){const{extensions:r,mode:s,object:a,info:o}=this;if(n===0)return;const u=r.get("WEBGL_multi_draw");if(u===null)for(let c=0;c<n;c++)this.render(e[c],t[c]);else{this.index!==0?u.multiDrawElementsWEBGL(s,t,0,this.type,e,0,n):u.multiDrawArraysWEBGL(s,e,0,t,0,n);let c=0;for(let p=0;p<n;p++)c+=t[p];o.update(a,c,1)}}renderMultiDrawInstances(e,t,n,r){const{extensions:s,mode:a,object:o,info:u}=this;if(n===0)return;const c=s.get("WEBGL_multi_draw");if(c===null)for(let p=0;p<n;p++)this.renderInstances(e[p],t[p],r[p]);else{this.index!==0?c.multiDrawElementsInstancedWEBGL(a,t,0,this.type,e,0,r,0,n):c.multiDrawArraysInstancedWEBGL(a,e,0,t,0,r,0,n);let p=0;for(let g=0;g<n;g++)p+=t[g]*r[g];u.update(o,p,1)}}}class HB{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.pendingResolve=!1}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class ece extends HB{constructor(e,t,n=2048){if(super(n),this.gl=e,this.type=t,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){console.warn("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let r=0;r<this.maxQueries;r++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return Dl(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(t,"inactive"),this.queryOffsets.set(e.id,t),t}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e.id);if(t==null||this.activeQuery!==null)return;const n=this.queries[t];if(n)try{this.queryStates.get(t)==="inactive"&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,n),this.activeQuery=t,this.queryStates.set(t,"started"))}catch(r){console.error("Error in beginQuery:",r),this.activeQuery=null,this.queryStates.set(t,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e.id);if(t!=null&&this.activeQuery===t)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(t,"ended"),this.activeQuery=null}catch(n){console.error("Error in endQuery:",n),this.queryStates.set(t,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{const e=[];for(const[r,s]of this.queryStates)if(s==="ended"){const a=this.queries[r];e.push(this.resolveQuery(a))}if(e.length===0)return this.lastValue;const n=(await Promise.all(e)).reduce((r,s)=>r+s,0);return this.lastValue=n,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,n}catch(e){return console.error("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(t=>{if(this.isDisposed){t(this.lastValue);return}let n,r=!1;const s=()=>{n&&(clearTimeout(n),n=null)},a=u=>{r||(r=!0,s(),t(u))},o=()=>{if(this.isDisposed){a(this.lastValue);return}try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT)){a(this.lastValue);return}if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){n=setTimeout(o,1);return}const p=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);t(Number(p)/1e6)}catch(u){console.error("Error checking query:",u),t(this.lastValue)}};o()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,!!this.trackTimestamp)){for(const e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}class HR extends VB{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this._currentContext=null,this._knownBindings=new WeakSet,this._supportsInvalidateFramebuffer=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),this._xrFramebuffer=null}init(e){super.init(e);const t=this.parameters,n={antialias:e.samples>0,alpha:!0,depth:e.depth,stencil:e.stencil},r=t.context!==void 0?t.context:e.domElement.getContext("webgl2",n);function s(a){a.preventDefault();const o={api:"WebGL",message:a.statusMessage||"Unknown reason",reason:null,originalEvent:a};e.onDeviceLost(o)}this._onContextLost=s,e.domElement.addEventListener("webglcontextlost",s,!1),this.gl=r,this.extensions=new Kue(this),this.capabilities=new Zue(this),this.attributeUtils=new $ue(this),this.textureUtils=new Yue(this),this.bufferRenderer=new Jue(this),this.state=new Xue(this),this.utils=new Que(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile")}get coordinateSystem(){return Pa}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}async makeXRCompatible(){this.gl.getContextAttributes().xrCompatible!==!0&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFramebuffer=e}setXRRenderTargetTextures(e,t,n=null){const r=this.gl;if(this.set(e.texture,{textureGPU:t,glInternalFormat:r.RGBA8}),n!==null){const s=e.stencilBuffer?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:n,glInternalFormat:s}),this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e.autoAllocateDepthBuffer&&console.warn("THREE.WebGLBackend: Render-to-texture extension was disabled because an external texture was provided"),e.autoAllocateDepthBuffer=!1}}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const t=e.isComputeNode?"compute":"render";this.timestampQueryPool[t]||(this.timestampQueryPool[t]=new ece(this.gl,t,2048));const n=this.timestampQueryPool[t];n.allocateQueriesForContext(e)!==null&&n.beginQuery(e)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const t=e.isComputeNode?"compute":"render";this.timestampQueryPool[t].endQuery(e)}getContext(){return this.gl}beginRender(e){const{state:t,gl:n}=this,r=this.get(e);if(e.viewport?this.updateViewport(e):t.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),e.scissor){const{x:a,y:o,width:u,height:c}=e.scissorValue;t.scissor(a,e.height-c-o,u,c)}this.initTimestampQuery(e),r.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1);const s=e.occlusionQueryCount;s>0&&(r.currentOcclusionQueries=r.occlusionQueries,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,r.lastOcclusionObject=null,r.occlusionQueries=new Array(s),r.occlusionQueryObjects=new Array(s),r.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:n}=this,r=this.get(e),s=r.previousContext;n.resetVertexState();const a=e.occlusionQueryCount;a>0&&(a>r.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const o=e.textures;if(o!==null)for(let u=0;u<o.length;u++){const c=o[u];c.generateMipmaps&&this.generateMipmaps(c)}if(this._currentContext=s,e.textures!==null&&e.renderTarget){const u=this.get(e.renderTarget),{samples:c}=e.renderTarget;if(c>0&&this._useMultisampledRTT(e.renderTarget)===!1){const p=u.framebuffers[e.getCacheKey()],g=t.COLOR_BUFFER_BIT,y=u.msaaFrameBuffer,q=e.textures;n.bindFramebuffer(t.READ_FRAMEBUFFER,y),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,p);for(let S=0;S<q.length;S++)if(e.scissor){const{x:R,y:M,width:E,height:U}=e.scissorValue,P=e.height-U-M;t.blitFramebuffer(R,P,R+E,P+U,R,P,R+E,P+U,g,t.NEAREST),this._supportsInvalidateFramebuffer===!0&&t.invalidateSubFramebuffer(t.READ_FRAMEBUFFER,u.invalidationArray,R,P,E,U)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,g,t.NEAREST),this._supportsInvalidateFramebuffer===!0&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,u.invalidationArray)}}s!==null&&(this._setFramebuffer(s),s.viewport?this.updateViewport(s):n.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)),this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet,{gl:a}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const o=()=>{let u=0;for(let c=0;c<n.length;c++){const p=n[c];p!==null&&a.getQueryParameter(p,a.QUERY_RESULT_AVAILABLE)&&(a.getQueryParameter(p,a.QUERY_RESULT)===0&&s.add(r[c]),n[c]=null,a.deleteQuery(p),u++)}u<n.length?requestAnimationFrame(o):t.occluded=s};o()}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}updateViewport(e){const{state:t}=this,{x:n,y:r,width:s,height:a}=e.viewportValue;t.viewport(n,e.height-a-r,s,a)}setScissorTest(e){this.state.setScissorTest(e)}getClearColor(){const e=super.getClearColor();return e.r*=e.a,e.g*=e.a,e.b*=e.a,e}clear(e,t,n,r=null,s=!0){const{gl:a,renderer:o}=this;r===null&&(r={textures:null,clearColorValue:this.getClearColor()});let u=0;if(e&&(u|=a.COLOR_BUFFER_BIT),t&&(u|=a.DEPTH_BUFFER_BIT),n&&(u|=a.STENCIL_BUFFER_BIT),u!==0){let c;r.clearColorValue?c=r.clearColorValue:c=this.getClearColor();const p=o.getClearDepth(),g=o.getClearStencil();if(t&&this.state.setDepthMask(!0),r.textures===null)a.clearColor(c.r,c.g,c.b,c.a),a.clear(u);else{if(s&&this._setFramebuffer(r),e)for(let y=0;y<r.textures.length;y++)y===0?a.clearBufferfv(a.COLOR,y,[c.r,c.g,c.b,c.a]):a.clearBufferfv(a.COLOR,y,[0,0,0,1]);t&&n?a.clearBufferfi(a.DEPTH_STENCIL,0,p,g):t?a.clearBufferfv(a.DEPTH,0,[p]):n&&a.clearBufferiv(a.STENCIL,0,[g])}}}beginCompute(e){const{state:t,gl:n}=this;t.bindFramebuffer(n.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,t,n,r){const{state:s,gl:a}=this;this.discard===!1&&(a.enable(a.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:o,transformBuffers:u,attributes:c}=this.get(r),p=this._getVaoKey(c),g=this.vaoCache[p];g===void 0?this._createVao(c):s.setVertexState(g),s.useProgram(o),this._bindUniforms(n);const y=this._getTransformFeedback(u);a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,y),a.beginTransformFeedback(a.POINTS),c[0].isStorageInstancedBufferAttribute?a.drawArraysInstanced(a.POINTS,0,1,t.count):a.drawArrays(a.POINTS,0,t.count),a.endTransformFeedback(),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,null);for(let q=0;q<u.length;q++){const S=u[q];S.pbo&&this.textureUtils.copyBufferToTexture(S.transformBuffer,S.pbo),S.switchBuffers()}}finishCompute(e){const t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e),this._currentContext&&this._setFramebuffer(this._currentContext)}draw(e){const{object:t,pipeline:n,material:r,context:s,hardwareClippingPlanes:a}=e,{programGPU:o}=this.get(n),{gl:u,state:c}=this,p=this.get(s),g=e.getDrawParameters();if(g===null)return;this._bindUniforms(e.getBindings());const y=t.isMesh&&t.matrixWorld.determinant()<0;c.setMaterial(r,y,a),c.useProgram(o);const q=this.get(e);let S=q.staticVao;if(S===void 0||q.geometryId!==e.geometry.id){const z=this._getVaoKey(e.getAttributes());if(S=this.vaoCache[z],S===void 0){let j;({vaoGPU:S,staticVao:j}=this._createVao(e.getAttributes())),j&&(q.staticVao=S,q.geometryId=e.geometry.id)}}const R=e.getIndex(),M=R!==null?this.get(R).bufferGPU:null;c.setVertexState(S,M);const E=p.lastOcclusionObject;if(E!==t&&E!==void 0){if(E!==null&&E.occlusionTest===!0&&(u.endQuery(u.ANY_SAMPLES_PASSED),p.occlusionQueryIndex++),t.occlusionTest===!0){const z=u.createQuery();u.beginQuery(u.ANY_SAMPLES_PASSED,z),p.occlusionQueries[p.occlusionQueryIndex]=z,p.occlusionQueryObjects[p.occlusionQueryIndex]=t}p.lastOcclusionObject=t}const U=this.bufferRenderer;t.isPoints?U.mode=u.POINTS:t.isLineSegments?U.mode=u.LINES:t.isLine?U.mode=u.LINE_STRIP:t.isLineLoop?U.mode=u.LINE_LOOP:r.wireframe===!0?(c.setLineWidth(r.wireframeLinewidth*this.renderer.getPixelRatio()),U.mode=u.LINES):U.mode=u.TRIANGLES;const{vertexCount:P,instanceCount:O}=g;let{firstVertex:F}=g;if(U.object=t,R!==null){F*=R.array.BYTES_PER_ELEMENT;const z=this.get(R);U.index=R.count,U.type=z.type}else U.index=0;const I=()=>{t.isBatchedMesh?t._multiDrawInstances!==null?(Dl("THREE.WebGLBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),U.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances)):this.hasFeature("WEBGL_multi_draw")?U.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):Dl("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):O>1?U.renderInstances(F,P,O):U.render(F,P)};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const z=this.get(e.camera),j=e.camera.cameras,k=e.getBindingGroup("cameraIndex").bindings[0];if(z.indexesGPU===void 0||z.indexesGPU.length!==j.length){const te=new Uint32Array([0,0,0,0]),ne=[];for(let ue=0,ae=j.length;ue<ae;ue++){const W=u.createBuffer();te[0]=ue,u.bindBuffer(u.UNIFORM_BUFFER,W),u.bufferData(u.UNIFORM_BUFFER,te,u.STATIC_DRAW),ne.push(W)}z.indexesGPU=ne}const G=this.get(k),$=this.renderer.getPixelRatio();for(let te=0,ne=j.length;te<ne;te++){const ue=j[te];if(t.layers.test(ue.layers)){const ae=ue.viewport,W=ae.x*$,J=ae.y*$,re=ae.width*$,ge=ae.height*$;c.viewport(Math.floor(W),Math.floor(e.context.height-ge-J),Math.floor(re),Math.floor(ge)),c.bindBufferBase(u.UNIFORM_BUFFER,G.index,z.indexesGPU[te]),I()}}}else I()}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,r,s,a){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,a)}createSampler(){}destroySampler(){}createNodeBuilder(e,t){return new Hue(e,t)}createProgram(e){const t=this.gl,{stage:n,code:r}=e,s=n==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(s,r),t.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){const n=this.gl,r=e.pipeline,{fragmentProgram:s,vertexProgram:a}=r,o=n.createProgram(),u=this.get(s).shaderGPU,c=this.get(a).shaderGPU;if(n.attachShader(o,u),n.attachShader(o,c),n.linkProgram(o),this.set(r,{programGPU:o,fragmentShader:u,vertexShader:c}),t!==null&&this.parallel){const p=new Promise(g=>{const y=this.parallel,q=()=>{n.getProgramParameter(o,y.COMPLETION_STATUS_KHR)?(this._completeCompile(e,r),g()):requestAnimationFrame(q)};q()});t.push(p);return}this._completeCompile(e,r)}_handleSource(e,t){const n=e.split(`
`),r=[],s=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let o=s;o<a;o++){const u=o+1;r.push(`${u===t?">":" "} ${u}: ${n[o]}`)}return r.join(`
`)}_getShaderErrors(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),s=e.getShaderInfoLog(t).trim();if(r&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const o=parseInt(a[1]);return n.toUpperCase()+`

`+s+`

`+this._handleSource(e.getShaderSource(t),o)}else return s}_logProgramError(e,t,n){if(this.renderer.debug.checkShaderErrors){const r=this.gl,s=r.getProgramInfoLog(e).trim();if(r.getProgramParameter(e,r.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(r,e,n,t);else{const a=this._getShaderErrors(r,n,"vertex"),o=this._getShaderErrors(r,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(e,r.VALIDATE_STATUS)+`

Program Info Log: `+s+`
`+a+`
`+o)}else s!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",s)}}_completeCompile(e,t){const{state:n,gl:r}=this,s=this.get(t),{programGPU:a,fragmentShader:o,vertexShader:u}=s;r.getProgramParameter(a,r.LINK_STATUS)===!1&&this._logProgramError(a,o,u),n.useProgram(a);const c=e.getBindings();this._setupBindings(c,a),this.set(t,{programGPU:a})}createComputePipeline(e,t){const{state:n,gl:r}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:a}=e,o=r.createProgram(),u=this.get(s).shaderGPU,c=this.get(a).shaderGPU,p=a.transforms,g=[],y=[];for(let M=0;M<p.length;M++){const E=p[M];g.push(E.varyingName),y.push(E.attributeNode)}r.attachShader(o,u),r.attachShader(o,c),r.transformFeedbackVaryings(o,g,r.SEPARATE_ATTRIBS),r.linkProgram(o),r.getProgramParameter(o,r.LINK_STATUS)===!1&&this._logProgramError(o,u,c),n.useProgram(o),this._setupBindings(t,o);const q=a.attributes,S=[],R=[];for(let M=0;M<q.length;M++){const E=q[M].node.attribute;S.push(E),this.has(E)||this.attributeUtils.createAttribute(E,r.ARRAY_BUFFER)}for(let M=0;M<y.length;M++){const E=y[M].attribute;this.has(E)||this.attributeUtils.createAttribute(E,r.ARRAY_BUFFER);const U=this.get(E);R.push(U)}this.set(e,{programGPU:o,transformBuffers:R,attributes:S})}createBindings(e,t){if(this._knownBindings.has(t)===!1){this._knownBindings.add(t);let n=0,r=0;for(const s of t){this.set(s,{textures:r,uniformBuffers:n});for(const a of s.bindings)a.isUniformBuffer&&n++,a.isSampledTexture&&r++}}this.updateBindings(e,t)}updateBindings(e){const{gl:t}=this,n=this.get(e);let r=n.uniformBuffers,s=n.textures;for(const a of e.bindings)if(a.isUniformsGroup||a.isUniformBuffer){const o=a.buffer,u=t.createBuffer();t.bindBuffer(t.UNIFORM_BUFFER,u),t.bufferData(t.UNIFORM_BUFFER,o,t.DYNAMIC_DRAW),this.set(a,{index:r++,bufferGPU:u})}else if(a.isSampledTexture){const{textureGPU:o,glTextureType:u}=this.get(a.texture);this.set(a,{index:s++,textureGPU:o,glTextureType:u})}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const r=this.get(e).bufferGPU,s=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,s,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){const t=Object.keys(VR).filter(r=>VR[r]===e),n=this.extensions;for(let r=0;r<t.length;r++)if(n.has(t[r]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){this.textureUtils.copyTextureToTexture(e,t,n,r,s,a)}copyFramebufferToTexture(e,t,n){this.textureUtils.copyFramebufferToTexture(e,t,n)}_setFramebuffer(e){const{gl:t,state:n}=this;let r=null;if(e.textures!==null){const s=e.renderTarget,a=this.get(s),{samples:o,depthBuffer:u,stencilBuffer:c}=s,p=s.isWebGLCubeRenderTarget===!0,g=s.isRenderTarget3D===!0,y=s.isRenderTargetArray===!0,q=s.isXRRenderTarget===!0,S=q===!0&&s.hasExternalTextures===!0;let R=a.msaaFrameBuffer,M=a.depthRenderbuffer;const E=this.extensions.get("WEBGL_multisampled_render_to_texture"),U=this._useMultisampledRTT(s),P=OO(e);let O;if(p?(a.cubeFramebuffers||(a.cubeFramebuffers={}),O=a.cubeFramebuffers[P]):q&&S===!1?O=this._xrFramebuffer:(a.framebuffers||(a.framebuffers={}),O=a.framebuffers[P]),O===void 0){O=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,O);const F=e.textures;if(p){a.cubeFramebuffers[P]=O;const{textureGPU:I}=this.get(F[0]),z=this.renderer._activeCubeFace;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+z,I,0)}else{a.framebuffers[P]=O;for(let I=0;I<F.length;I++){const z=F[I],j=this.get(z);j.renderTarget=e.renderTarget,j.cacheKey=P;const k=t.COLOR_ATTACHMENT0+I;if(g||y){const G=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,k,j.textureGPU,0,G)}else S&&U?E.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,k,t.TEXTURE_2D,j.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,k,t.TEXTURE_2D,j.textureGPU,0)}n.drawBuffers(e,O)}if(s.isXRRenderTarget&&s.autoAllocateDepthBuffer===!0){const I=t.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(I,e,0,U),a.xrDepthRenderbuffer=I}else if(e.depthTexture!==null){const I=this.get(e.depthTexture),z=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;I.renderTarget=e.renderTarget,I.cacheKey=P,S&&U?E.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,z,t.TEXTURE_2D,I.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,z,t.TEXTURE_2D,I.textureGPU,0)}}else if(q&&S){n.bindFramebuffer(t.FRAMEBUFFER,O);const F=this.get(e.textures[0]);U?E.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,F.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,F.textureGPU,0);const I=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s.autoAllocateDepthBuffer===!0){const z=a.xrDepthRenderbuffer;t.bindRenderbuffer(t.RENDERBUFFER,z),t.framebufferRenderbuffer(t.FRAMEBUFFER,I,t.RENDERBUFFER,z)}else{const z=this.get(e.depthTexture);U?E.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,I,t.TEXTURE_2D,z.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,I,t.TEXTURE_2D,z.textureGPU,0)}}if(o>0&&U===!1){if(R===void 0){const F=[];R=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,R);const I=[],z=e.textures;for(let j=0;j<z.length;j++){if(I[j]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,I[j]),F.push(t.COLOR_ATTACHMENT0+j),u){const $=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;F.push($)}const k=e.textures[j],G=this.get(k);t.renderbufferStorageMultisample(t.RENDERBUFFER,o,G.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+j,t.RENDERBUFFER,I[j])}if(a.msaaFrameBuffer=R,a.msaaRenderbuffers=I,M===void 0){M=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(M,e,o),a.depthRenderbuffer=M;const j=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;F.push(j)}a.invalidationArray=F}r=a.msaaFrameBuffer}else r=O}n.bindFramebuffer(t.FRAMEBUFFER,r)}_getVaoKey(e){let t="";for(let n=0;n<e.length;n++){const r=this.get(e[n]);t+=":"+r.id}return t}_createVao(e){const{gl:t}=this,n=t.createVertexArray();let r="",s=!0;t.bindVertexArray(n);for(let a=0;a<e.length;a++){const o=e[a],u=this.get(o);r+=":"+u.id,t.bindBuffer(t.ARRAY_BUFFER,u.bufferGPU),t.enableVertexAttribArray(a),(o.isStorageBufferAttribute||o.isStorageInstancedBufferAttribute)&&(s=!1);let c,p;o.isInterleavedBufferAttribute===!0?(c=o.data.stride*u.bytesPerElement,p=o.offset*u.bytesPerElement):(c=0,p=0),u.isInteger?t.vertexAttribIPointer(a,o.itemSize,u.type,c,p):t.vertexAttribPointer(a,o.itemSize,u.type,o.normalized,c,p),o.isInstancedBufferAttribute&&!o.isInterleavedBufferAttribute?t.vertexAttribDivisor(a,o.meshPerAttribute):o.isInterleavedBufferAttribute&&o.data.isInstancedInterleavedBuffer&&t.vertexAttribDivisor(a,o.data.meshPerAttribute)}return t.bindBuffer(t.ARRAY_BUFFER,null),this.vaoCache[r]=n,{vaoGPU:n,staticVao:s}}_getTransformFeedback(e){let t="";for(let s=0;s<e.length;s++)t+=":"+e[s].id;let n=this.transformFeedbackCache[t];if(n!==void 0)return n;const{gl:r}=this;n=r.createTransformFeedback(),r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n);for(let s=0;s<e.length;s++){const a=e[s];r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,s,a.transformBuffer)}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=n,n}_setupBindings(e,t){const n=this.gl;for(const r of e)for(const s of r.bindings){const o=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const u=n.getUniformBlockIndex(t,s.name);n.uniformBlockBinding(t,u,o)}else if(s.isSampledTexture){const u=n.getUniformLocation(t,s.name);n.uniform1i(u,o)}}}_bindUniforms(e){const{gl:t,state:n}=this;for(const r of e)for(const s of r.bindings){const a=this.get(s),o=a.index;s.isUniformsGroup||s.isUniformBuffer?n.bindBufferBase(t.UNIFORM_BUFFER,o,a.bufferGPU):s.isSampledTexture&&n.bindTexture(a.glTextureType,a.textureGPU,t.TEXTURE0+o)}}_useMultisampledRTT(e){return e.samples>0&&this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e.autoAllocateDepthBuffer!==!1}dispose(){const e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const gd={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Us={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},vs={Store:"store"},er={Load:"load",Clear:"clear"},x_={CCW:"ccw"},q_={None:"none",Front:"front",Back:"back"},uA={Uint16:"uint16",Uint32:"uint32"},Se={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10UFloat:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},b_={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},X0={Linear:"linear",Nearest:"nearest"},Un={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},O0={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},jR={None:0,All:15},b1={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},S_={Storage:"storage",ReadOnlyStorage:"read-only-storage"},T_={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},Hf={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},WR={TwoD:"2d",ThreeD:"3d"},Ma={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},tce={All:"all"},b6={Vertex:"vertex",Instance:"instance"},ly={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"};class nce extends Zq{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.isSampler=!0}}class ice extends nce{constructor(e,t,n){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n}update(){this.texture=this.textureNode.value}}class rce extends BB{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let sce=0;class ace extends rce{constructor(e,t){super("StorageBuffer_"+sce++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:ea.READ_WRITE,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class oce extends t0{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,n=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:X0.Linear}),this.flipYSampler=e.createSampler({minFilter:X0.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:n}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:r})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:gd.TriangleStrip,stripIndexFormat:uA.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:gd.TriangleStrip,stripIndexFormat:uA.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,n=0){const r=t.format,{width:s,height:a}=t.size,o=this.getTransferPipeline(r),u=this.getFlipYPipeline(r),c=this.device.createTexture({size:{width:s,height:a,depthOrArrayLayers:1},format:r,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),p=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Ma.TwoD,baseArrayLayer:n}),g=c.createView({baseMipLevel:0,mipLevelCount:1,dimension:Ma.TwoD,baseArrayLayer:0}),y=this.device.createCommandEncoder({}),q=(S,R,M)=>{const E=S.getBindGroupLayout(0),U=this.device.createBindGroup({layout:E,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:R}]}),P=y.beginRenderPass({colorAttachments:[{view:M,loadOp:er.Clear,storeOp:vs.Store,clearValue:[0,0,0,0]}]});P.setPipeline(S),P.setBindGroup(0,U),P.draw(4,1,0,0),P.end()};q(o,p,g),q(u,g,p),this.device.queue.submit([y.finish()]),c.destroy()}generateMipmaps(e,t,n=0){const r=this.get(e);r.useCount===void 0&&(r.useCount=0,r.layers=[]);const s=r.layers[n]||this._mipmapCreateBundles(e,t,n),a=this.device.createCommandEncoder({});this._mipmapRunBundles(a,s),this.device.queue.submit([a.finish()]),r.useCount!==0&&(r.layers[n]=s),r.useCount++}_mipmapCreateBundles(e,t,n){const r=this.getTransferPipeline(t.format),s=r.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Ma.TwoD,baseArrayLayer:n});const o=[];for(let u=1;u<t.mipLevelCount;u++){const c=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),p=e.createView({baseMipLevel:u,mipLevelCount:1,dimension:Ma.TwoD,baseArrayLayer:n}),g={colorAttachments:[{view:p,loadOp:er.Clear,storeOp:vs.Store,clearValue:[0,0,0,0]}]},y=this.device.createRenderBundleEncoder({colorFormats:[t.format]});y.setPipeline(r),y.setBindGroup(0,c),y.draw(4,1,0,0),o.push({renderBundles:[y.finish()],passDescriptor:g}),a=p}return o}_mipmapRunBundles(e,t){const n=t.length;for(let r=0;r<n;r++){const s=t[r],a=e.beginRenderPass(s.passDescriptor);a.executeBundles(s.renderBundles),a.end()}}}const lce={[Ky]:"never",[v5]:"less",[Zy]:"equal",[y5]:"less-equal",[Jy]:"greater",[tx]:"greater-equal",[nx]:"always",[ex]:"not-equal"},uce=[0,1,3,2,4,5];class cce{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new qo,this.depthTexture.name="depthBuffer"}createSampler(e){const t=this.backend,n=t.device,r=t.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};s.magFilter===X0.Linear&&s.minFilter===X0.Linear&&s.mipmapFilter===X0.Linear&&(s.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(s.compare=lce[e.compareFunction]),r.sampler=n.createSampler(s)}createDefaultTexture(e){let t;const n=uy(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(n):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():t=this._getDefaultTextureGPU(n),this.backend.get(e).texture=t}createTexture(e,t={}){const n=this.backend,r=n.get(e);if(r.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:a,depth:o,levels:u}=t;e.isFramebufferTexture&&(t.renderTarget?t.format=this.backend.utils.getCurrentColorFormat(t.renderTarget):t.format=this.backend.utils.getPreferredCanvasFormat());const c=this._getDimension(e),p=e.internalFormat||t.format||uy(e,n.device);r.format=p;const{samples:g,primarySamples:y,isMSAA:q}=n.utils.getTextureSampleData(e);let S=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(S|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(S|=GPUTextureUsage.RENDER_ATTACHMENT);const R={label:e.name,size:{width:s,height:a,depthOrArrayLayers:o},mipLevelCount:u,sampleCount:y,dimension:c,format:p,usage:S};if(e.isVideoTexture){const M=e.source.data,E=new VideoFrame(M);R.size.width=E.displayWidth,R.size.height=E.displayHeight,E.close(),r.externalTexture=M}else{if(p===void 0){console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);return}r.texture=n.device.createTexture(R)}if(q){const M=Object.assign({},R);M.label=M.label+"-msaa",M.sampleCount=g,r.msaaTexture=n.device.createTexture(M)}r.initialized=!0,r.textureDescriptorGPU=R}destroyTexture(e){const t=this.backend,n=t.get(e);n.texture!==void 0&&n.texture.destroy(),n.msaaTexture!==void 0&&n.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const n=this.backend.get(e);delete n.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let n=0;n<6;n++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,n);else{const n=e.image.depth||1;for(let r=0;r<n;r++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,r)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:t,height:n}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:t,height:n,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,t=!1){const n=this.backend,{width:r,height:s}=n.getDrawingBufferSize(),a=this.depthTexture,o=n.get(a).texture;let u,c;if(t?(u=xo,c=vo):e&&(u=yo,c=Qi),o!==void 0){if(a.image.width===r&&a.image.height===s&&a.format===u&&a.type===c)return o;this.destroyTexture(a)}return a.name="depthBuffer",a.format=u,a.type=c,a.image.width=r,a.image.height=s,this.createTexture(a,{width:r,height:s}),n.get(a).texture}updateTexture(e,t){const n=this.backend.get(e),{textureDescriptorGPU:r}=n;if(!(e.isRenderTargetTexture||r===void 0)){if(e.isDataTexture)this._copyBufferToTexture(t.image,n.texture,r,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(let s=0;s<t.image.depth;s++)this._copyBufferToTexture(t.image,n.texture,r,s,e.flipY,s);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,n.texture,r);else if(e.isCubeTexture)this._copyCubeMapToTexture(t.images,n.texture,r,e.flipY);else if(e.isVideoTexture){const s=e.source.data;n.externalTexture=s}else this._copyImageToTexture(t.image,n.texture,r,0,e.flipY);n.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,t,n,r,s,a){const o=this.backend.device,u=this.backend.get(e),c=u.texture,p=u.textureDescriptorGPU.format,g=this._getBytesPerTexel(p);let y=r*g;y=Math.ceil(y/256)*256;const q=o.createBuffer({size:r*s*g,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),S=o.createCommandEncoder();S.copyTextureToBuffer({texture:c,origin:{x:t,y:n,z:a}},{buffer:q,bytesPerRow:y},{width:r,height:s});const R=this._getTypedArrayType(p);o.queue.submit([S.finish()]),await q.mapAsync(GPUMapMode.READ);const M=q.getMappedRange();return new R(M)}_isEnvironmentTexture(e){const t=e.mapping;return t===W1||t===$1||t===Yo||t===Ko}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new ss;n.minFilter=nr,n.magFilter=nr,this.createTexture(n,{width:1,height:1,format:e}),this.defaultTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new q5;n.minFilter=nr,n.magFilter=nr,this.createTexture(n,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const t={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),t)}return e}_copyCubeMapToTexture(e,t,n,r){for(let s=0;s<6;s++){const a=e[s],o=r===!0?uce[s]:s;a.isDataTexture?this._copyBufferToTexture(a.image,t,n,o,r):this._copyImageToTexture(a,t,n,o,r)}}_copyImageToTexture(e,t,n,r,s){this.backend.device.queue.copyExternalImageToTexture({source:e,flipY:s},{texture:t,mipLevel:0,origin:{x:0,y:0,z:r}},{width:e.width,height:e.height,depthOrArrayLayers:1})}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new oce(this.backend.device)),e}_generateMipmaps(e,t,n=0){this._getPassUtils().generateMipmaps(e,t,n)}_flipY(e,t,n=0){this._getPassUtils().flipY(e,t,n)}_copyBufferToTexture(e,t,n,r,s,a=0){const o=this.backend.device,u=e.data,c=this._getBytesPerTexel(n.format),p=e.width*c;o.queue.writeTexture({texture:t,mipLevel:0,origin:{x:0,y:0,z:r}},u,{offset:e.width*e.height*c*a,bytesPerRow:p},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,n,r)}_copyCompressedBufferToTexture(e,t,n){const r=this.backend.device,s=this._getBlockData(n.format),a=n.size.depthOrArrayLayers>1;for(let o=0;o<e.length;o++){const u=e[o],c=u.width,p=u.height,g=a?n.size.depthOrArrayLayers:1,y=Math.ceil(c/s.width)*s.byteLength,q=y*Math.ceil(p/s.height);for(let S=0;S<g;S++)r.queue.writeTexture({texture:t,mipLevel:o,origin:{x:0,y:0,z:S}},u.data,{offset:S*q,bytesPerRow:y,rowsPerImage:Math.ceil(p/s.height)},{width:Math.ceil(c/s.width)*s.width,height:Math.ceil(p/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===Se.BC1RGBAUnorm||e===Se.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===Se.BC2RGBAUnorm||e===Se.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Se.BC3RGBAUnorm||e===Se.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Se.BC4RUnorm||e===Se.BC4RSnorm)return{byteLength:8,width:4,height:4};if(e===Se.BC5RGUnorm||e===Se.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===Se.BC6HRGBUFloat||e===Se.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===Se.BC7RGBAUnorm||e===Se.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Se.ETC2RGB8Unorm||e===Se.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Se.ETC2RGB8A1Unorm||e===Se.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Se.ETC2RGBA8Unorm||e===Se.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Se.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===Se.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===Se.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===Se.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===Se.ASTC4x4Unorm||e===Se.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Se.ASTC5x4Unorm||e===Se.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===Se.ASTC5x5Unorm||e===Se.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===Se.ASTC6x5Unorm||e===Se.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===Se.ASTC6x6Unorm||e===Se.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===Se.ASTC8x5Unorm||e===Se.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===Se.ASTC8x6Unorm||e===Se.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===Se.ASTC8x8Unorm||e===Se.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===Se.ASTC10x5Unorm||e===Se.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===Se.ASTC10x6Unorm||e===Se.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===Se.ASTC10x8Unorm||e===Se.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===Se.ASTC10x10Unorm||e===Se.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===Se.ASTC12x10Unorm||e===Se.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===Se.ASTC12x12Unorm||e===Se.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=b_.ClampToEdge;return e===Ah?t=b_.Repeat:e===ph&&(t=b_.MirrorRepeat),t}_convertFilterMode(e){let t=X0.Linear;return(e===nr||e===Wy||e===yc)&&(t=X0.Nearest),t}_getBytesPerTexel(e){if(e===Se.R8Unorm||e===Se.R8Snorm||e===Se.R8Uint||e===Se.R8Sint)return 1;if(e===Se.R16Uint||e===Se.R16Sint||e===Se.R16Float||e===Se.RG8Unorm||e===Se.RG8Snorm||e===Se.RG8Uint||e===Se.RG8Sint)return 2;if(e===Se.R32Uint||e===Se.R32Sint||e===Se.R32Float||e===Se.RG16Uint||e===Se.RG16Sint||e===Se.RG16Float||e===Se.RGBA8Unorm||e===Se.RGBA8UnormSRGB||e===Se.RGBA8Snorm||e===Se.RGBA8Uint||e===Se.RGBA8Sint||e===Se.BGRA8Unorm||e===Se.BGRA8UnormSRGB||e===Se.RGB9E5UFloat||e===Se.RGB10A2Unorm||e===Se.RG11B10UFloat||e===Se.Depth32Float||e===Se.Depth24Plus||e===Se.Depth24PlusStencil8||e===Se.Depth32FloatStencil8)return 4;if(e===Se.RG32Uint||e===Se.RG32Sint||e===Se.RG32Float||e===Se.RGBA16Uint||e===Se.RGBA16Sint||e===Se.RGBA16Float)return 8;if(e===Se.RGBA32Uint||e===Se.RGBA32Sint||e===Se.RGBA32Float)return 16}_getTypedArrayType(e){if(e===Se.R8Uint)return Uint8Array;if(e===Se.R8Sint)return Int8Array;if(e===Se.R8Unorm)return Uint8Array;if(e===Se.R8Snorm)return Int8Array;if(e===Se.RG8Uint)return Uint8Array;if(e===Se.RG8Sint)return Int8Array;if(e===Se.RG8Unorm)return Uint8Array;if(e===Se.RG8Snorm)return Int8Array;if(e===Se.RGBA8Uint)return Uint8Array;if(e===Se.RGBA8Sint)return Int8Array;if(e===Se.RGBA8Unorm)return Uint8Array;if(e===Se.RGBA8Snorm)return Int8Array;if(e===Se.R16Uint)return Uint16Array;if(e===Se.R16Sint)return Int16Array;if(e===Se.RG16Uint)return Uint16Array;if(e===Se.RG16Sint)return Int16Array;if(e===Se.RGBA16Uint)return Uint16Array;if(e===Se.RGBA16Sint)return Int16Array;if(e===Se.R16Float||e===Se.RG16Float||e===Se.RGBA16Float)return Uint16Array;if(e===Se.R32Uint)return Uint32Array;if(e===Se.R32Sint)return Int32Array;if(e===Se.R32Float)return Float32Array;if(e===Se.RG32Uint)return Uint32Array;if(e===Se.RG32Sint)return Int32Array;if(e===Se.RG32Float)return Float32Array;if(e===Se.RGBA32Uint)return Uint32Array;if(e===Se.RGBA32Sint)return Int32Array;if(e===Se.RGBA32Float)return Float32Array;if(e===Se.BGRA8Unorm||e===Se.BGRA8UnormSRGB)return Uint8Array;if(e===Se.RGB10A2Unorm||e===Se.RGB9E5UFloat||e===Se.RG11B10UFloat)return Uint32Array;if(e===Se.Depth32Float)return Float32Array;if(e===Se.Depth24Plus||e===Se.Depth24PlusStencil8)return Uint32Array;if(e===Se.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.isData3DTexture?t=WR.ThreeD:t=WR.TwoD,t}}function uy(i,e=null){const t=i.format,n=i.type,r=i.colorSpace;let s;if(i.isCompressedTexture===!0||i.isCompressedArrayTexture===!0)switch(t){case F1:s=r===nn?Se.BC1RGBAUnormSRGB:Se.BC1RGBAUnorm;break;case k1:s=r===nn?Se.BC2RGBAUnormSRGB:Se.BC2RGBAUnorm;break;case z1:s=r===nn?Se.BC3RGBAUnormSRGB:Se.BC3RGBAUnorm;break;case Dd:s=r===nn?Se.ETC2RGB8UnormSRGB:Se.ETC2RGB8Unorm;break;case Ld:s=r===nn?Se.ETC2RGBA8UnormSRGB:Se.ETC2RGBA8Unorm;break;case Ud:s=r===nn?Se.ASTC4x4UnormSRGB:Se.ASTC4x4Unorm;break;case Od:s=r===nn?Se.ASTC5x4UnormSRGB:Se.ASTC5x4Unorm;break;case Bd:s=r===nn?Se.ASTC5x5UnormSRGB:Se.ASTC5x5Unorm;break;case Id:s=r===nn?Se.ASTC6x5UnormSRGB:Se.ASTC6x5Unorm;break;case Fd:s=r===nn?Se.ASTC6x6UnormSRGB:Se.ASTC6x6Unorm;break;case kd:s=r===nn?Se.ASTC8x5UnormSRGB:Se.ASTC8x5Unorm;break;case zd:s=r===nn?Se.ASTC8x6UnormSRGB:Se.ASTC8x6Unorm;break;case Gd:s=r===nn?Se.ASTC8x8UnormSRGB:Se.ASTC8x8Unorm;break;case Vd:s=r===nn?Se.ASTC10x5UnormSRGB:Se.ASTC10x5Unorm;break;case Hd:s=r===nn?Se.ASTC10x6UnormSRGB:Se.ASTC10x6Unorm;break;case jd:s=r===nn?Se.ASTC10x8UnormSRGB:Se.ASTC10x8Unorm;break;case Wd:s=r===nn?Se.ASTC10x10UnormSRGB:Se.ASTC10x10Unorm;break;case $d:s=r===nn?Se.ASTC12x10UnormSRGB:Se.ASTC12x10Unorm;break;case Xd:s=r===nn?Se.ASTC12x12UnormSRGB:Se.ASTC12x12Unorm;break;case Or:s=r===nn?Se.RGBA8UnormSRGB:Se.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case Or:switch(n){case ih:s=Se.RGBA8Snorm;break;case rh:s=Se.RGBA16Sint;break;case Ml:s=Se.RGBA16Uint;break;case Qi:s=Se.RGBA32Uint;break;case qs:s=Se.RGBA32Sint;break;case Ur:s=r===nn?Se.RGBA8UnormSRGB:Se.RGBA8Unorm;break;case Ss:s=Se.RGBA16Float;break;case kr:s=Se.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",n)}break;case R3:switch(n){case _5:s=Se.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",n)}break;case C3:switch(n){case ih:s=Se.R8Snorm;break;case rh:s=Se.R16Sint;break;case Ml:s=Se.R16Uint;break;case Qi:s=Se.R32Uint;break;case qs:s=Se.R32Sint;break;case Ur:s=Se.R8Unorm;break;case Ss:s=Se.R16Float;break;case kr:s=Se.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",n)}break;case mh:switch(n){case ih:s=Se.RG8Snorm;break;case rh:s=Se.RG16Sint;break;case Ml:s=Se.RG16Uint;break;case Qi:s=Se.RG32Uint;break;case qs:s=Se.RG32Sint;break;case Ur:s=Se.RG8Unorm;break;case Ss:s=Se.RG16Float;break;case kr:s=Se.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",n)}break;case yo:switch(n){case Ml:s=Se.Depth16Unorm;break;case Qi:s=Se.Depth24Plus;break;case kr:s=Se.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",n)}break;case xo:switch(n){case vo:s=Se.Depth24PlusStencil8;break;case kr:e&&e.features.has(ly.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),s=Se.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",n)}break;case mA:switch(n){case qs:s=Se.R32Sint;break;case Qi:s=Se.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",n)}break;case gA:switch(n){case qs:s=Se.RG32Sint;break;case Qi:s=Se.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",n)}break;case _A:switch(n){case qs:s=Se.RGBA32Sint;break;case Qi:s=Se.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",n)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return s}const hce=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,fce=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,$R={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},dce=i=>{i=i.trim();const e=i.match(hce);if(e!==null&&e.length===4){const t=e[2],n=[];let r=null;for(;(r=fce.exec(t))!==null;)n.push({name:r[1],type:r[2]});const s=[];for(let p=0;p<n.length;p++){const{name:g,type:y}=n[p];let q=y;q.startsWith("ptr")?q="pointer":(q.startsWith("texture")&&(q=y.split("<")[0]),q=$R[q]),s.push(new Yq(q,g))}const a=i.substring(e[0].length),o=e[3]||"void",u=e[1]!==void 0?e[1]:"";return{type:$R[o]||o,inputs:s,name:u,inputsCode:t,blockCode:a,outputType:o}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class Ace extends Kq{constructor(e){const{type:t,inputs:n,name:r,inputsCode:s,blockCode:a,outputType:o}=dce(e);super(t,n,r),this.inputsCode=s,this.blockCode=a,this.outputType=o}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class pce extends UB{parseFunction(e){return new Ace(e)}}const jf=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},mce={[ea.READ_ONLY]:"read",[ea.WRITE_ONLY]:"write",[ea.READ_WRITE]:"read_write"},XR={[Ah]:"repeat",[au]:"clamp",[ph]:"mirror"},S6={vertex:jf?jf.VERTEX:1,fragment:jf?jf.FRAGMENT:2,compute:jf?jf.COMPUTE:4},QR={instance:!0,swizzleAssign:!1,storageBuffer:!0},gce={"^^":"tsl_xor"},_ce={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},YR={},Ho={tsl_xor:new $r("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new $r("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new $r("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new $r("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new $r("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new $r("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new $r("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new $r("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new $r("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new $r("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new $r("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new $r("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new $r(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},pp={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};typeof navigator<"u"&&/Windows/g.test(navigator.userAgent)&&(Ho.pow_float=new $r("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),Ho.pow_vec2=new $r("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[Ho.pow_float]),Ho.pow_vec3=new $r("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[Ho.pow_float]),Ho.pow_vec4=new $r("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[Ho.pow_float]),pp.pow_float="tsl_pow_float",pp.pow_vec2="tsl_pow_vec2",pp.pow_vec3="tsl_pow_vec3",pp.pow_vec4="tsl_pow_vec4");let jB="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(jB+=`diagnostic( off, derivative_uniformity );
`);class vce extends DB{constructor(e,t){super(e,t,new pce),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==_o}_generateTextureSample(e,t,n,r,s=this.shaderStage){return s==="fragment"?r?`textureSample( ${t}, ${t}_sampler, ${n}, ${r} )`:`textureSample( ${t}, ${t}_sampler, ${n} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n):this.generateTextureLod(e,t,n,r,"0")}_generateVideoSample(e,t,n=this.shaderStage){if(n==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${t}.x, 1.0 - ${t}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${n} shader.`)}_generateTextureSampleLevel(e,t,n,r,s,a=this.shaderStage){return(a==="fragment"||a==="compute")&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${r} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,r):this.generateTextureLod(e,t,n,s,r)}generateWrapFunction(e){const t=`tsl_coord_${XR[e.wrapS]}S_${XR[e.wrapT]}_${e.isData3DTexture?"3d":"2d"}T`;let n=YR[t];if(n===void 0){const r=[],s=e.isData3DTexture?"vec3f":"vec2f";let a=`fn ${t}( coord : ${s} ) -> ${s} {

	return ${s}(
`;const o=(u,c)=>{u===Ah?(r.push(Ho.repeatWrapping_float),a+=`		tsl_repeatWrapping_float( coord.${c} )`):u===au?(r.push(Ho.clampWrapping_float),a+=`		tsl_clampWrapping_float( coord.${c} )`):u===ph?(r.push(Ho.mirrorWrapping_float),a+=`		tsl_mirrorWrapping_float( coord.${c} )`):(a+=`		coord.${c}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${u}" for vertex shader.`))};o(e.wrapS,"x"),a+=`,
`,o(e.wrapT,"y"),e.isData3DTexture&&(a+=`,
`,o(e.wrapR,"z")),a+=`
	);

}
`,YR[t]=n=new $r(a,r)}return n.build(this),t}generateArrayDeclaration(e,t){return`array< ${this.getType(e)}, ${t} >`}generateTextureDimension(e,t,n){const r=this.getDataFromNode(e,this.shaderStage,this.globalCache);r.dimensionsSnippet===void 0&&(r.dimensionsSnippet={});let s=r.dimensionsSnippet[n];if(r.dimensionsSnippet[n]===void 0){let a,o;const{primarySamples:u}=this.renderer.backend.utils.getTextureSampleData(e),c=u>1;e.isData3DTexture?o="vec3<u32>":o="vec2<u32>",c||e.isVideoTexture||e.isStorageTexture?a=t:a=`${t}${n?`, u32( ${n} )`:""}`,s=new n8(new i8(`textureDimensions( ${a} )`,o)),r.dimensionsSnippet[n]=s,(e.isDataArrayTexture||e.isData3DTexture)&&(r.arrayLayerCount=new n8(new i8(`textureNumLayers(${t})`,"u32"))),e.isTextureCube&&(r.cubeFaceCount=new n8(new i8("6u","u32")))}return s.build(this)}generateFilteredTexture(e,t,n,r="0u"){this._include("biquadraticTexture");const s=this.generateWrapFunction(e),a=this.generateTextureDimension(e,t,r);return`tsl_biquadraticTexture( ${t}, ${s}( ${n} ), ${a}, u32( ${r} ) )`}generateTextureLod(e,t,n,r,s="0u"){const a=this.generateWrapFunction(e),o=this.generateTextureDimension(e,t,s),u=e.isData3DTexture?"vec3":"vec2",c=`${u}<u32>(${a}(${n}) * ${u}<f32>(${o}))`;return this.generateTextureLoad(e,t,c,r,s)}generateTextureLoad(e,t,n,r,s="0u"){return e.isVideoTexture===!0||e.isStorageTexture===!0?`textureLoad( ${t}, ${n} )`:r?`textureLoad( ${t}, ${n}, ${r}, u32( ${s} ) )`:`textureLoad( ${t}, ${n}, u32( ${s} ) )`}generateTextureStore(e,t,n,r){return`textureStore( ${t}, ${n}, ${r} )`}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===kr||this.isSampleCompare(e)===!1&&e.minFilter===nr&&e.magFilter===nr||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,t,n,r,s=this.shaderStage){let a=null;return e.isVideoTexture===!0?a=this._generateVideoSample(t,n,s):this.isUnfilterable(e)?a=this.generateTextureLod(e,t,n,r,"0",s):a=this._generateTextureSample(e,t,n,r,s),a}generateTextureGrad(e,t,n,r,s,a=this.shaderStage){if(a==="fragment")return`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${r[0]}, ${r[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${a} shader.`)}generateTextureCompare(e,t,n,r,s,a=this.shaderStage){if(a==="fragment")return`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${a} shader.`)}generateTextureLevel(e,t,n,r,s,a=this.shaderStage){let o=null;return e.isVideoTexture===!0?o=this._generateVideoSample(t,n,a):o=this._generateTextureSampleLevel(e,t,n,r,s,a),o}generateTextureBias(e,t,n,r,s,a=this.shaderStage){if(a==="fragment")return`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${a} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const n=e.name,r=e.type;return r==="texture"||r==="cubeTexture"||r==="storageTexture"||r==="texture3D"?n:r==="buffer"||r==="storageBuffer"||r==="indirectStorageBuffer"?this.isCustomStruct(e)?n:n+".value":e.groupNode.name+"."+n}return super.getPropertyName(e)}getOutputStructName(){return"output"}getFunctionOperator(e){const t=gce[e];return t!==void 0?(this._include(t),t):null}getNodeAccess(e,t){return t!=="compute"?ea.READ_ONLY:e.access}getStorageAccess(e,t){return mce[this.getNodeAccess(e,t)]}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),a=this.getDataFromNode(e,n,this.globalCache);if(a.uniformGPU===void 0){let o;const u=e.groupNode,c=u.name,p=this.getBindGroupArray(c,n);if(t==="texture"||t==="cubeTexture"||t==="storageTexture"||t==="texture3D"){let g=null;const y=this.getNodeAccess(e,n);if(t==="texture"||t==="storageTexture"?g=new i9(s.name,s.node,u,y):t==="cubeTexture"?g=new zB(s.name,s.node,u,y):t==="texture3D"&&(g=new GB(s.name,s.node,u,y)),g.store=e.isStorageTextureNode===!0,g.setVisibility(S6[n]),(n==="fragment"||n==="compute")&&this.isUnfilterable(e.value)===!1&&g.store===!1){const q=new ice(`${s.name}_sampler`,s.node,u);q.setVisibility(S6[n]),p.push(q,g),o=[q,g]}else p.push(g),o=[g]}else if(t==="buffer"||t==="storageBuffer"||t==="indirectStorageBuffer"){const g=t==="buffer"?FB:ace,y=new g(e,u);y.setVisibility(S6[n]),p.push(y),o=y,s.name=r||"NodeBuffer_"+s.id}else{const g=this.uniformGroups[n]||(this.uniformGroups[n]={});let y=g[c];y===void 0&&(y=new kB(c,u),y.setVisibility(S6[n]),g[c]=y,p.push(y)),o=this.getNodeUniform(s,t),y.addUniform(o)}a.uniformGPU=o}return s}getBuiltin(e,t,n,r=this.shaderStage){const s=this.builtins[r]||(this.builtins[r]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:t,type:n}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const a of t.inputs)r.push(a.name+" : "+this.getType(a.type));let s=`fn ${t.name}( ${r.join(", ")} ) -> ${this.getType(t.type)} {
${n.vars}
${n.code}
`;return n.result&&(s+=`	return ${n.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],n=this.directives[e];if(n!==void 0)for(const r of n)t.push(`enable ${r};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const t=[],n=this.builtins[e];if(n!==void 0)for(const{name:r,property:s,type:a}of n.values())t.push(`@builtin( ${r} ) ${s} : ${a}`);return t.join(`,
	`)}getScopedArray(e,t,n,r){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:n,bufferCount:r}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:n,scope:r,bufferType:s,bufferCount:a}of this.scopedArrays.values()){const o=this.getType(s);t.push(`var<${r}> ${n}: array< ${o}, ${a} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const n=this.getBuiltins("attribute");n&&t.push(n);const r=this.getAttributesArray();for(let s=0,a=r.length;s<a;s++){const o=r[s],u=o.name,c=this.getType(o.type);t.push(`@location( ${s} ) ${u} : ${c}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[];for(const n of e.members){const r=e.output?"@location( "+n.index+" ) ":"";let s=this.getType(n.type);n.atomic&&(s="atomic< "+s+" >"),t.push(`	${r+n.name} : ${s}`)}return e.output&&t.push(`	${this.getBuiltins("output")}`),t.join(`,
`)}getStructs(e){let t="";const n=this.structs[e];if(n.length>0){const r=[];for(const s of n){let a=`struct ${s.name} {
`;a+=this.getStructMembers(s),a+=`
};`,r.push(a)}t=`
`+r.join(`

`)+`
`}return t}getVar(e,t,n=null){let r=`var ${t} : `;return n!==null?r+=this.generateArrayDeclaration(e,n):r+=this.getType(e),r}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`	${this.getVar(r.type,r.name,r.count)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,a=this.vars[e];for(let o=0;o<s.length;o++){const u=s[o];if(u.needsInterpolation){let c=`@location( ${o} )`;/^(int|uint|ivec|uvec)/.test(u.type)&&(c+=" @interpolate( flat )"),t.push(`${c} ${u.name} : ${this.getType(u.type)}`)}else e==="vertex"&&a.includes(u)===!1&&a.push(u)}}const n=this.getBuiltins(e);n&&t.push(n);const r=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+r):r}isCustomStruct(e){return e.value.isStorageBufferAttribute&&e.node.structTypeNode!==null}getUniforms(e){const t=this.uniforms[e],n=[],r=[],s=[],a={};for(const u of t){const c=u.groupNode.name,p=this.bindingsIndexes[c];if(u.type==="texture"||u.type==="cubeTexture"||u.type==="storageTexture"||u.type==="texture3D"){const g=u.node.value;(e==="fragment"||e==="compute")&&this.isUnfilterable(g)===!1&&u.node.isStorageTextureNode!==!0&&(this.isSampleCompare(g)?n.push(`@binding( ${p.binding++} ) @group( ${p.group} ) var ${u.name}_sampler : sampler_comparison;`):n.push(`@binding( ${p.binding++} ) @group( ${p.group} ) var ${u.name}_sampler : sampler;`));let y,q="";const{primarySamples:S}=this.renderer.backend.utils.getTextureSampleData(g);if(S>1&&(q="_multisampled"),g.isCubeTexture===!0)y="texture_cube<f32>";else if(g.isDataArrayTexture===!0||g.isCompressedArrayTexture===!0)y="texture_2d_array<f32>";else if(g.isDepthTexture===!0)y=`texture_depth${q}_2d`;else if(g.isVideoTexture===!0)y="texture_external";else if(g.isData3DTexture===!0)y="texture_3d<f32>";else if(u.node.isStorageTextureNode===!0){const R=uy(g),M=this.getStorageAccess(u.node,e);y=`texture_storage_2d<${R}, ${M}>`}else{const R=this.getComponentTypeFromTexture(g).charAt(0);y=`texture${q}_2d<${R}32>`}n.push(`@binding( ${p.binding++} ) @group( ${p.group} ) var ${u.name} : ${y};`)}else if(u.type==="buffer"||u.type==="storageBuffer"||u.type==="indirectStorageBuffer"){const g=u.node,y=this.getType(g.getNodeType(this)),q=g.bufferCount,S=q>0&&u.type==="buffer"?", "+q:"",R=g.isStorageBufferNode?`storage, ${this.getStorageAccess(g,e)}`:"uniform";if(this.isCustomStruct(u))r.push(`@binding( ${p.binding++} ) @group( ${p.group} ) var<${R}> ${u.name} : ${y};`);else{const E=`	value : array< ${g.isAtomic?`atomic<${y}>`:`${y}`}${S} >`;r.push(this._getWGSLStructBinding(u.name,E,R,p.binding++,p.group))}}else{const g=this.getType(this.getVectorType(u.type)),y=u.groupNode.name;(a[y]||(a[y]={index:p.binding++,id:p.group,snippets:[]})).snippets.push(`	${u.name} : ${g}`)}}for(const u in a){const c=a[u];s.push(this._getWGSLStructBinding(u,c.snippets.join(`,
`),"uniform",c.index,c.id))}let o=n.join(`
`);return o+=r.join(`
`),o+=s.join(`
`),o}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){this.shaderStage=t;const n=e[t];n.uniforms=this.getUniforms(t),n.attributes=this.getAttributes(t),n.varyings=this.getVaryings(t),n.structs=this.getStructs(t),n.vars=this.getVars(t),n.codes=this.getCodes(t),n.directives=this.getDirectives(t),n.scopedArrays=this.getScopedArrays(t);let r=`// code

`;r+=this.flowCode[t];const s=this.flowNodes[t],a=s[s.length-1],o=a.outputNode,u=o!==void 0&&o.isOutputStructNode===!0;for(const c of s){const p=this.getFlowData(c),g=c.name;if(g&&(r.length>0&&(r+=`
`),r+=`	// flow -> ${g}
`),r+=`${p.code}
	`,c===a&&t!=="compute"){if(r+=`// result

	`,t==="vertex")r+=`varyings.Vertex = ${p.result};`;else if(t==="fragment")if(u)n.returnType=o.getNodeType(this),n.structs+="var<private> output : "+n.returnType+";",r+=`return ${p.result};`;else{let y="	@location(0) color: vec4<f32>";const q=this.getBuiltins("output");q&&(y+=`,
	`+q),n.returnType="OutputStruct",n.structs+=this._getWGSLStruct("OutputStruct",y),n.structs+=`
var<private> output : OutputStruct;`,r+=`output.color = ${p.result};

	return output;`}}}n.flow=r}this.shaderStage=null,this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,t=null){let n;return t!==null&&(n=this._getWGSLMethod(e+"_"+t)),n===void 0&&(n=this._getWGSLMethod(e)),n||e}getType(e){return _ce[e]||e}isAvailable(e){let t=QR[e];return t===void 0&&(e==="float32Filterable"?t=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(t=this.renderer.hasFeature("clip-distances")),QR[e]=t),t}_getWGSLMethod(e){return Ho[e]!==void 0&&this._include(e),pp[e]}_include(e){const t=Ho[e];return t.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${jB}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${t} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x + globalId.y * numWorkgroups.x * u32(${t}) + globalId.z * numWorkgroups.x * numWorkgroups.y * u32(${t});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,n,r=0,s=0){const a=e+"Struct";return`${this._getWGSLStruct(a,t)}
@binding( ${r} ) @group( ${s} )
var<${n}> ${e} : ${a};`}}class yce{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=Se.Depth24PlusStencil8:e.depth&&(t=Se.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let t;if(e.isFramebufferTexture)t=1;else if(e.isDepthTexture&&!e.renderTarget){const s=this.backend.renderer,a=s.getRenderTarget();t=a?a.samples:s.samples}else e.renderTarget&&(t=e.renderTarget.samples);t=t||1;const n=t>1&&e.renderTarget!==null&&e.isDepthTexture!==!0&&e.isFramebufferTexture!==!0;return{samples:t,primarySamples:n?1:t,isMSAA:n}}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return gd.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return gd.LineList;if(e.isLine)return gd.LineStrip;if(e.isMesh)return gd.TriangleList}getSampleCount(e){let t=1;return e>1&&(t=Math.pow(2,Math.floor(Math.log2(e))),t===2&&(t=4)),t}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){const e=this.backend.parameters.outputType;if(e===void 0)return navigator.gpu.getPreferredCanvasFormat();if(e===Ur)return Se.BGRA8Unorm;if(e===Ss)return Se.RGBA16Float;throw new Error("Unsupported outputType")}}const xce=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),qce=new Map([[mN,["float16"]]]),bce=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class Sce{constructor(e){this.backend=e}createAttribute(e,t){const n=this._getBufferAttribute(e),r=this.backend,s=r.get(n);let a=s.buffer;if(a===void 0){const o=r.device;let u=n.array;if(e.normalized===!1){if(u.constructor===Int16Array||u.constructor===Int8Array)u=new Int32Array(u);else if((u.constructor===Uint16Array||u.constructor===Uint8Array)&&(u=new Uint32Array(u),t&GPUBufferUsage.INDEX))for(let p=0;p<u.length;p++)u[p]===65535&&(u[p]=4294967295)}if(n.array=u,(n.isStorageBufferAttribute||n.isStorageInstancedBufferAttribute)&&n.itemSize===3){u=new u.constructor(n.count*4);for(let p=0;p<n.count;p++)u.set(n.array.subarray(p*3,p*3+3),p*4);n.itemSize=4,n.array=u,s._force3to4BytesAlignment=!0}const c=u.byteLength+(4-u.byteLength%4)%4;a=o.createBuffer({label:n.name,size:c,usage:t,mappedAtCreation:!0}),new u.constructor(a.getMappedRange()).set(u),a.unmap(),s.buffer=a}}updateAttribute(e){const t=this._getBufferAttribute(e),n=this.backend,r=n.device,s=n.get(t),a=n.get(t).buffer;let o=t.array;if(s._force3to4BytesAlignment===!0){o=new o.constructor(t.count*4);for(let p=0;p<t.count;p++)o.set(t.array.subarray(p*3,p*3+3),p*4);t.array=o}const u=this._isTypedArray(o),c=t.updateRanges;if(c.length===0)r.queue.writeBuffer(a,0,o,0);else{const p=u?1:o.BYTES_PER_ELEMENT;for(let g=0,y=c.length;g<y;g++){const q=c[g];let S,R;if(s._force3to4BytesAlignment===!0){const E=Math.floor(q.start/3),U=Math.ceil(q.count/3);S=E*4*p,R=U*4*p}else S=q.start*p,R=q.count*p;const M=S*(u?o.BYTES_PER_ELEMENT:1);r.queue.writeBuffer(a,M,o,S,R)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),n=new Map;for(let r=0;r<t.length;r++){const s=t[r],a=s.array.BYTES_PER_ELEMENT,o=this._getBufferAttribute(s);let u=n.get(o);if(u===void 0){let g,y;s.isInterleavedBufferAttribute===!0?(g=s.data.stride*a,y=s.data.isInstancedInterleavedBuffer?b6.Instance:b6.Vertex):(g=s.itemSize*a,y=s.isInstancedBufferAttribute?b6.Instance:b6.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(g=4),u={arrayStride:g,attributes:[],stepMode:y},n.set(o,u)}const c=this._getVertexFormat(s),p=s.isInterleavedBufferAttribute===!0?s.offset*a:0;u.attributes.push({shaderLocation:r,offset:p,format:c})}return Array.from(n.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,n=t.device,s=t.get(this._getBufferAttribute(e)).buffer,a=s.size,o=n.createBuffer({label:`${e.name}_readback`,size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),u=n.createCommandEncoder({label:`readback_encoder_${e.name}`});u.copyBufferToBuffer(s,0,o,0,a);const c=u.finish();n.queue.submit([c]),await o.mapAsync(GPUMapMode.READ);const p=o.getMappedRange(),g=new e.array.constructor(p.slice(0));return o.unmap(),g.buffer}_getVertexFormat(e){const{itemSize:t,normalized:n}=e,r=e.array.constructor,s=e.constructor;let a;if(t===1)a=bce.get(r);else{const u=(qce.get(s)||xce.get(r))[n?1:0];if(u){const c=r.BYTES_PER_ELEMENT*t,g=Math.floor((c+3)/4)*4/r.BYTES_PER_ELEMENT;if(g%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");a=`${u}x${g}`}}return a||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),a}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class Tce{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const t=this.backend,n=t.device,r=[];let s=0;for(const a of e.bindings){const o={binding:s++,visibility:a.visibility};if(a.isUniformBuffer||a.isStorageBuffer){const u={};a.isStorageBuffer&&(a.visibility&4&&(a.access===ea.READ_WRITE||a.access===ea.WRITE_ONLY)?u.type=S_.Storage:u.type=S_.ReadOnlyStorage),o.buffer=u}else if(a.isSampler){const u={};a.texture.isDepthTexture&&a.texture.compareFunction!==null&&(u.type="comparison"),o.sampler=u}else if(a.isSampledTexture&&a.texture.isVideoTexture)o.externalTexture={};else if(a.isSampledTexture&&a.store){const u={};u.format=this.backend.get(a.texture).texture.format;const c=a.access;c===ea.READ_WRITE?u.access=T_.ReadWrite:c===ea.WRITE_ONLY?u.access=T_.WriteOnly:u.access=T_.ReadOnly,o.storageTexture=u}else if(a.isSampledTexture){const u={},{primarySamples:c}=t.utils.getTextureSampleData(a.texture);if(c>1&&(u.multisampled=!0,a.texture.isDepthTexture||(u.sampleType=Hf.UnfilterableFloat)),a.texture.isDepthTexture)u.sampleType=Hf.Depth;else if(a.texture.isDataTexture||a.texture.isDataArrayTexture||a.texture.isData3DTexture){const p=a.texture.type;p===qs?u.sampleType=Hf.SInt:p===Qi?u.sampleType=Hf.UInt:p===kr&&(this.backend.hasFeature("float32-filterable")?u.sampleType=Hf.Float:u.sampleType=Hf.UnfilterableFloat)}a.isSampledCubeTexture?u.viewDimension=Ma.Cube:a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?u.viewDimension=Ma.TwoDArray:a.isSampledTexture3D&&(u.viewDimension=Ma.ThreeD),o.texture=u}else console.error(`WebGPUBindingUtils: Unsupported binding "${a}".`);r.push(o)}return n.createBindGroupLayout({entries:r})}createBindings(e,t,n,r=0){const{backend:s,bindGroupLayoutCache:a}=this,o=s.get(e);let u=a.get(e.bindingsReference);u===void 0&&(u=this.createBindingsLayout(e),a.set(e.bindingsReference,u));let c;n>0&&(o.groups===void 0&&(o.groups=[],o.versions=[]),o.versions[n]===r&&(c=o.groups[n])),c===void 0&&(c=this.createBindGroup(e,u),n>0&&(o.groups[n]=c,o.versions[n]=r)),o.group=c,o.layout=u}updateBinding(e){const t=this.backend,n=t.device,r=e.buffer,s=t.get(e).buffer;n.queue.writeBuffer(s,0,r,0)}createBindGroupIndex(e,t){const r=this.backend.device,s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,a=e[0],o=r.createBuffer({label:"bindingCameraIndex_"+a,size:16,usage:s});r.queue.writeBuffer(o,0,e,0);const u=[{binding:0,resource:{buffer:o}}];return r.createBindGroup({label:"bindGroupCameraIndex_"+a,layout:t,entries:u})}createBindGroup(e,t){const n=this.backend,r=n.device;let s=0;const a=[];for(const o of e.bindings){if(o.isUniformBuffer){const u=n.get(o);if(u.buffer===void 0){const c=o.byteLength,p=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,g=r.createBuffer({label:"bindingBuffer_"+o.name,size:c,usage:p});u.buffer=g}a.push({binding:s,resource:{buffer:u.buffer}})}else if(o.isStorageBuffer){const u=n.get(o);if(u.buffer===void 0){const c=o.attribute;u.buffer=n.get(c).buffer}a.push({binding:s,resource:{buffer:u.buffer}})}else if(o.isSampler){const u=n.get(o.texture);a.push({binding:s,resource:u.sampler})}else if(o.isSampledTexture){const u=n.get(o.texture);let c;if(u.externalTexture!==void 0)c=r.importExternalTexture({source:u.externalTexture});else{const p=o.store?1:u.texture.mipLevelCount,g=`view-${u.texture.width}-${u.texture.height}-${p}`;if(c=u[g],c===void 0){const y=tce.All;let q;o.isSampledCubeTexture?q=Ma.Cube:o.isSampledTexture3D?q=Ma.ThreeD:o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?q=Ma.TwoDArray:q=Ma.TwoD,c=u[g]=u.texture.createView({aspect:y,dimension:q,mipLevelCount:p})}}a.push({binding:s,resource:c})}s++}return r.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:a})}}class wce{constructor(e){this.backend=e}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:n,material:r,geometry:s,pipeline:a}=e,{vertexProgram:o,fragmentProgram:u}=a,c=this.backend,p=c.device,g=c.utils,y=c.get(a),q=[];for(const ne of e.getBindings()){const ue=c.get(ne);q.push(ue.layout)}const S=c.attributeUtils.createShaderVertexBuffers(e);let R;r.transparent===!0&&r.blending!==Fa&&(R=this._getBlending(r));let M={};r.stencilWrite===!0&&(M={compare:this._getStencilCompare(r),failOp:this._getStencilOperation(r.stencilFail),depthFailOp:this._getStencilOperation(r.stencilZFail),passOp:this._getStencilOperation(r.stencilZPass)});const E=this._getColorWriteMask(r),U=[];if(e.context.textures!==null){const ne=e.context.textures;for(let ue=0;ue<ne.length;ue++){const ae=g.getTextureFormatGPU(ne[ue]);U.push({format:ae,blend:R,writeMask:E})}}else{const ne=g.getCurrentColorFormat(e.context);U.push({format:ne,blend:R,writeMask:E})}const P=c.get(o).module,O=c.get(u).module,F=this._getPrimitiveState(n,s,r),I=this._getDepthCompare(r),z=g.getCurrentDepthStencilFormat(e.context),j=this._getSampleCount(e.context),k={label:`renderPipeline_${r.name||r.type}_${r.id}`,vertex:Object.assign({},P,{buffers:S}),fragment:Object.assign({},O,{targets:U}),primitive:F,multisample:{count:j,alphaToCoverageEnabled:r.alphaToCoverage&&j>1},layout:p.createPipelineLayout({bindGroupLayouts:q})},G={},$=e.context.depth,te=e.context.stencil;if(($===!0||te===!0)&&($===!0&&(G.format=z,G.depthWriteEnabled=r.depthWrite,G.depthCompare=I),te===!0&&(G.stencilFront=M,G.stencilBack={},G.stencilReadMask=r.stencilFuncMask,G.stencilWriteMask=r.stencilWriteMask),r.polygonOffset===!0&&(G.depthBias=r.polygonOffsetUnits,G.depthBiasSlopeScale=r.polygonOffsetFactor,G.depthBiasClamp=0),k.depthStencil=G),t===null)y.pipeline=p.createRenderPipeline(k);else{const ne=new Promise(ue=>{p.createRenderPipelineAsync(k).then(ae=>{y.pipeline=ae,ue()})});t.push(ne)}}createBundleEncoder(e){const t=this.backend,{utils:n,device:r}=t,s=n.getCurrentDepthStencilFormat(e),a=n.getCurrentColorFormat(e),o=this._getSampleCount(e),u={label:"renderBundleEncoder",colorFormats:[a],depthStencilFormat:s,sampleCount:o};return r.createRenderBundleEncoder(u)}createComputePipeline(e,t){const n=this.backend,r=n.device,s=n.get(e.computeProgram).module,a=n.get(e),o=[];for(const u of t){const c=n.get(u);o.push(c.layout)}a.pipeline=r.createComputePipeline({compute:s,layout:r.createPipelineLayout({bindGroupLayouts:o})})}_getBlending(e){let t,n;const r=e.blending,s=e.blendSrc,a=e.blendDst,o=e.blendEquation;if(r===_d){const u=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,c=e.blendDstAlpha!==null?e.blendDstAlpha:a,p=e.blendEquationAlpha!==null?e.blendEquationAlpha:o;t={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(o)},n={srcFactor:this._getBlendFactor(u),dstFactor:this._getBlendFactor(c),operation:this._getBlendOperation(p)}}else{const u=e.premultipliedAlpha,c=(p,g,y,q)=>{t={srcFactor:p,dstFactor:g,operation:O0.Add},n={srcFactor:y,dstFactor:q,operation:O0.Add}};if(u)switch(r){case ka:c(Un.One,Un.OneMinusSrcAlpha,Un.One,Un.OneMinusSrcAlpha);break;case Cd:c(Un.One,Un.One,Un.One,Un.One);break;case Nd:c(Un.Zero,Un.OneMinusSrc,Un.Zero,Un.One);break;case Pd:c(Un.Zero,Un.Src,Un.Zero,Un.SrcAlpha);break}else switch(r){case ka:c(Un.SrcAlpha,Un.OneMinusSrcAlpha,Un.One,Un.OneMinusSrcAlpha);break;case Cd:c(Un.SrcAlpha,Un.One,Un.SrcAlpha,Un.One);break;case Nd:c(Un.Zero,Un.OneMinusSrc,Un.Zero,Un.One);break;case Pd:c(Un.Zero,Un.Src,Un.Zero,Un.Src);break}}if(t!==void 0&&n!==void 0)return{color:t,alpha:n};console.error("THREE.WebGPURenderer: Invalid blending: ",r)}_getBlendFactor(e){let t;switch(e){case dc:t=Un.Zero;break;case By:t=Un.One;break;case Iy:t=Un.Src;break;case Fy:t=Un.OneMinusSrc;break;case Up:t=Un.SrcAlpha;break;case Op:t=Un.OneMinusSrcAlpha;break;case Gy:t=Un.Dst;break;case Vy:t=Un.OneMinusDstColor;break;case ky:t=Un.DstAlpha;break;case zy:t=Un.OneMinusDstAlpha;break;case Hy:t=Un.SrcAlphaSaturated;break;case Mre:t=Un.Constant;break;case Rre:t=Un.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const n=e.stencilFunc;switch(n){case rz:t=Us.Never;break;case K_:t=Us.Always;break;case sz:t=Us.Less;break;case oz:t=Us.LessEqual;break;case az:t=Us.Equal;break;case cz:t=Us.GreaterEqual;break;case lz:t=Us.Greater;break;case uz:t=Us.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",n)}return t}_getStencilOperation(e){let t;switch(e){case k0:t=b1.Keep;break;case Kk:t=b1.Zero;break;case Zk:t=b1.Replace;break;case iz:t=b1.Invert;break;case Jk:t=b1.IncrementClamp;break;case ez:t=b1.DecrementClamp;break;case tz:t=b1.IncrementWrap;break;case nz:t=b1.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case Zs:t=O0.Add;break;case Uy:t=O0.Subtract;break;case Oy:t=O0.ReverseSubtract;break;case iN:t=O0.Min;break;case rN:t=O0.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,n){const r={},s=this.backend.utils;switch(r.topology=s.getPrimitiveTopology(e,n),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(r.stripIndexFormat=t.index.array instanceof Uint16Array?uA.Uint16:uA.Uint32),n.side){case Ia:r.frontFace=x_.CCW,r.cullMode=q_.Back;break;case Oi:r.frontFace=x_.CCW,r.cullMode=q_.Front;break;case Qr:r.frontFace=x_.CCW,r.cullMode=q_.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",n.side);break}return r}_getColorWriteMask(e){return e.colorWrite===!0?jR.All:jR.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=Us.Always;else{const n=e.depthFunc;switch(n){case Bp:t=Us.Never;break;case Ip:t=Us.Always;break;case Fp:t=Us.Less;break;case j1:t=Us.LessEqual;break;case kp:t=Us.Equal;break;case zp:t=Us.GreaterEqual;break;case Gp:t=Us.Greater;break;case Vp:t=Us.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",n)}}return t}}class Ece extends HB{constructor(e,t,n=2048){super(n),this.device=e,this.type=t,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${t}`});const r=this.maxQueries*8;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${t}`,size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${t}`,size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return Dl(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e.id,t),t}async resolveQueriesAsync(){if(!this.trackTimestamp||this.currentQueryIndex===0||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if(this.resultBuffer.mapState!=="unmapped")return this.lastValue;const e=new Map(this.queryOffsets),t=this.currentQueryIndex,n=t*8;this.currentQueryIndex=0,this.queryOffsets.clear();const r=this.device.createCommandEncoder();r.resolveQuerySet(this.querySet,0,t,this.resolveBuffer,0),r.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,n);const s=r.finish();if(this.device.queue.submit([s]),this.resultBuffer.mapState!=="unmapped")return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,n),this.isDisposed)return this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue;const a=new BigUint64Array(this.resultBuffer.getMappedRange(0,n));let o=0;for(const[,u]of e){const c=a[u],p=a[u+1],g=Number(p-c)/1e6;o+=g}return this.resultBuffer.unmap(),this.lastValue=o,o}catch(e){return console.error("Error resolving queries:",e),this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){console.error("Error waiting for pending resolve:",e)}if(this.resultBuffer&&this.resultBuffer.mapState==="mapped")try{this.resultBuffer.unmap()}catch(e){console.error("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class Mce extends VB{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new yce(this),this.attributeUtils=new Sce(this),this.bindingUtils=new Tce(this),this.pipelineUtils=new wce(this),this.textureUtils=new cce(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let n;if(t.device===void 0){const a={powerPreference:t.powerPreference},o=typeof navigator<"u"?await navigator.gpu.requestAdapter(a):null;if(o===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const u=Object.values(ly),c=[];for(const g of u)o.features.has(g)&&c.push(g);const p={requiredFeatures:c,requiredLimits:t.requiredLimits};n=await o.requestDevice(p)}else n=t.device;n.lost.then(a=>{const o={api:"WebGPU",message:a.message||"Unknown reason",reason:a.reason||null,originalEvent:a};e.onDeviceLost(o)});const r=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.device=n,this.context=r;const s=t.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(ly.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s}),this.updateSize()}get coordinateSystem(){return mu}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const n=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(n.depth,n.stencil).createView()});const r=e.colorAttachments[0];this.renderer.samples>0?r.view=this.colorBuffer.createView():r.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const t=e.colorAttachments[0];return this.renderer.samples>0?t.resolveTarget=this.context.getCurrentTexture().createView():t.view=this.context.getCurrentTexture().createView(),e}_getRenderPassDescriptor(e,t={}){const n=e.renderTarget,r=this.get(n);let s=r.descriptors;if(s===void 0||r.width!==n.width||r.height!==n.height||r.dimensions!==n.dimensions||r.activeMipmapLevel!==e.activeMipmapLevel||r.activeCubeFace!==e.activeCubeFace||r.samples!==n.samples){s={},r.descriptors=s;const c=()=>{n.removeEventListener("dispose",c),this.delete(n)};n.hasEventListener("dispose",c)===!1&&n.addEventListener("dispose",c)}const a=e.getCacheKey();let o=s[a];if(o===void 0){const c=e.textures,p=[];let g;for(let y=0;y<c.length;y++){const q=this.get(c[y]),S={label:`colorAttachment_${y}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:Ma.TwoD};n.isRenderTarget3D?(g=e.activeCubeFace,S.baseArrayLayer=0,S.dimension=Ma.ThreeD,S.depthOrArrayLayers=c[y].image.depth):n.isRenderTargetArray&&(S.dimension=Ma.TwoDArray,S.depthOrArrayLayers=c[y].image.depth);const R=q.texture.createView(S);let M,E;q.msaaTexture!==void 0?(M=q.msaaTexture.createView(),E=R):(M=R,E=void 0),p.push({view:M,resolveTarget:E,depthSlice:g})}if(o={textureViews:p},e.depth){const y=this.get(e.depthTexture);o.depthStencilView=y.texture.createView()}s[a]=o,r.width=n.width,r.height=n.height,r.samples=n.samples,r.activeMipmapLevel=e.activeMipmapLevel,r.activeCubeFace=e.activeCubeFace,r.dimensions=n.dimensions}const u={colorAttachments:[]};for(let c=0;c<o.textureViews.length;c++){const p=o.textureViews[c];let g={r:0,g:0,b:0,a:1};c===0&&t.clearValue&&(g=t.clearValue),u.colorAttachments.push({view:p.view,depthSlice:p.depthSlice,resolveTarget:p.resolveTarget,loadOp:t.loadOp||er.Load,storeOp:t.storeOp||vs.Store,clearValue:g})}return o.depthStencilView&&(u.depthStencilAttachment={view:o.depthStencilView}),u}beginRender(e){const t=this.get(e),n=this.device,r=e.occlusionQueryCount;let s;r>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=n.createQuerySet({type:"occlusion",count:r,label:`occlusionQuerySet_${e.id}`}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(r),t.lastOcclusionObject=null);let a;e.textures===null?a=this._getDefaultRenderPassDescriptor():a=this._getRenderPassDescriptor(e,{loadOp:er.Load}),this.initTimestampQuery(e,a),a.occlusionQuerySet=s;const o=a.depthStencilAttachment;if(e.textures!==null){const p=a.colorAttachments;for(let g=0;g<p.length;g++){const y=p[g];e.clearColor?(y.clearValue=g===0?e.clearColorValue:{r:0,g:0,b:0,a:1},y.loadOp=er.Clear,y.storeOp=vs.Store):(y.loadOp=er.Load,y.storeOp=vs.Store)}}else{const p=a.colorAttachments[0];e.clearColor?(p.clearValue=e.clearColorValue,p.loadOp=er.Clear,p.storeOp=vs.Store):(p.loadOp=er.Load,p.storeOp=vs.Store)}e.depth&&(e.clearDepth?(o.depthClearValue=e.clearDepthValue,o.depthLoadOp=er.Clear,o.depthStoreOp=vs.Store):(o.depthLoadOp=er.Load,o.depthStoreOp=vs.Store)),e.stencil&&(e.clearStencil?(o.stencilClearValue=e.clearStencilValue,o.stencilLoadOp=er.Clear,o.stencilStoreOp=vs.Store):(o.stencilLoadOp=er.Load,o.stencilStoreOp=vs.Store));const u=n.createCommandEncoder({label:"renderContext_"+e.id}),c=u.beginRenderPass(a);if(t.descriptor=a,t.encoder=u,t.currentPass=c,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){const{x:p,y:g,width:y,height:q}=e.scissorValue;c.setScissorRect(p,g,y,q)}}finishRender(e){const t=this.get(e),n=e.occlusionQueryCount;if(t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),n>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery(),t.currentPass.end(),n>0){const r=n*8;let s=this.occludedResolveCache.get(r);s===void 0&&(s=this.device.createBuffer({size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(r,s));const a=this.device.createBuffer({size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,n,s,0),t.encoder.copyBufferToBuffer(s,0,a,0,r),t.occlusionQueryBuffer=a,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const r=e.textures;for(let s=0;s<r.length;s++){const a=r[s];a.generateMipmaps===!0&&this.textureUtils.generateMipmaps(a)}}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await n.mapAsync(GPUMapMode.READ);const a=n.getMappedRange(),o=new BigUint64Array(a);for(let u=0;u<r.length;u++)o[u]===BigInt(0)&&s.add(r[u]);n.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e),{x:n,y:r,width:s,height:a,minDepth:o,maxDepth:u}=e.viewportValue;t.setViewport(n,r,s,a,o,u)}getClearColor(){const e=super.getClearColor();return this.renderer.alpha===!0&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),e}clear(e,t,n,r=null){const s=this.device,a=this.renderer;let o=[],u,c,p,g;if(e){const S=this.getClearColor();c={r:S.r,g:S.g,b:S.b,a:S.a}}if(r===null){p=a.depth,g=a.stencil;const S=this._getDefaultRenderPassDescriptor();if(e){o=S.colorAttachments;const R=o[0];R.clearValue=c,R.loadOp=er.Clear,R.storeOp=vs.Store}(p||g)&&(u=S.depthStencilAttachment)}else{p=r.depth,g=r.stencil;const S={loadOp:e?er.Clear:er.Load,clearValue:e?c:void 0};p&&(S.depthLoadOp=t?er.Clear:er.Load,S.depthClearValue=t?a.getClearDepth():void 0,S.depthStoreOp=vs.Store),g&&(S.stencilLoadOp=n?er.Clear:er.Load,S.stencilClearValue=n?a.getClearStencil():void 0,S.stencilStoreOp=vs.Store);const R=this._getRenderPassDescriptor(r,S);o=R.colorAttachments,u=R.depthStencilAttachment}p&&u&&u.depthLoadOp===void 0&&(t?(u.depthLoadOp=er.Clear,u.depthClearValue=a.getClearDepth(),u.depthStoreOp=vs.Store):(u.depthLoadOp=er.Load,u.depthStoreOp=vs.Store)),g&&u&&u.stencilLoadOp===void 0&&(n?(u.stencilLoadOp=er.Clear,u.stencilClearValue=a.getClearStencil(),u.stencilStoreOp=vs.Store):(u.stencilLoadOp=er.Load,u.stencilStoreOp=vs.Store));const y=s.createCommandEncoder({label:"clear"});y.beginRenderPass({colorAttachments:o,depthStencilAttachment:u}).end(),s.queue.submit([y.finish()])}beginCompute(e){const t=this.get(e),n={label:"computeGroup_"+e.id};this.initTimestampQuery(e,n),t.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(n)}compute(e,t,n,r){const{passEncoderGPU:s}=this.get(e),a=this.get(r).pipeline;s.setPipeline(a);for(let p=0,g=n.length;p<g;p++){const y=n[p],q=this.get(y);s.setBindGroup(p,q.group)}const o=this.device.limits.maxComputeWorkgroupsPerDimension,u=this.get(t);u.dispatchSize===void 0&&(u.dispatchSize={x:0,y:1,z:1});const{dispatchSize:c}=u;t.dispatchCount>o?(c.x=Math.min(t.dispatchCount,o),c.y=Math.ceil(t.dispatchCount/o)):c.x=t.dispatchCount,s.dispatchWorkgroups(c.x,c.y,c.z)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,t){const{object:n,material:r,context:s,pipeline:a}=e,o=e.getBindings(),u=this.get(s),c=this.get(a).pipeline,p=u.currentSets,g=u.currentPass,y=e.getDrawParameters();if(y===null)return;p.pipeline!==c&&(g.setPipeline(c),p.pipeline=c);const q=p.bindingGroups;for(let U=0,P=o.length;U<P;U++){const O=o[U],F=this.get(O);q[O.index]!==O.id&&(g.setBindGroup(O.index,F.group),q[O.index]=O.id)}const S=e.getIndex(),R=S!==null;if(R===!0&&p.index!==S){const U=this.get(S).buffer,P=S.array instanceof Uint16Array?uA.Uint16:uA.Uint32;g.setIndexBuffer(U,P),p.index=S}const M=e.getVertexBuffers();for(let U=0,P=M.length;U<P;U++){const O=M[U];if(p.attributes[U]!==O){const F=this.get(O).buffer;g.setVertexBuffer(U,F),p.attributes[U]=O}}if(u.occlusionQuerySet!==void 0){const U=u.lastOcclusionObject;U!==n&&(U!==null&&U.occlusionTest===!0&&(g.endOcclusionQuery(),u.occlusionQueryIndex++),n.occlusionTest===!0&&(g.beginOcclusionQuery(u.occlusionQueryIndex),u.occlusionQueryObjects[u.occlusionQueryIndex]=n),u.lastOcclusionObject=n)}s.stencil===!0&&r.stencilWrite===!0&&u.currentStencilRef!==r.stencilRef&&(g.setStencilReference(r.stencilRef),u.currentStencilRef=r.stencilRef);const E=()=>{if(n.isBatchedMesh===!0){const U=n._multiDrawStarts,P=n._multiDrawCounts,O=n._multiDrawCount,F=n._multiDrawInstances;F!==null&&Dl("THREE.WebGPUBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.");for(let I=0;I<O;I++){const z=F?F[I]:1,j=z>1?0:I;R===!0?g.drawIndexed(P[I],z,U[I]/S.array.BYTES_PER_ELEMENT,0,j):g.draw(P[I],z,U[I],j),t.update(n,P[I],z)}}else if(R===!0){const{vertexCount:U,instanceCount:P,firstVertex:O}=y,F=e.getIndirect();if(F!==null){const I=this.get(F).buffer;g.drawIndexedIndirect(I,0)}else g.drawIndexed(U,P,O,0,0);t.update(n,U,P)}else{const{vertexCount:U,instanceCount:P,firstVertex:O}=y,F=e.getIndirect();if(F!==null){const I=this.get(F).buffer;g.drawIndirect(I,0)}else g.draw(U,P,O,0);t.update(n,U,P)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const U=this.get(e.camera),P=e.camera.cameras,O=e.getBindingGroup("cameraIndex");if(U.indexesGPU===void 0||U.indexesGPU.length!==P.length){const I=this.get(O),z=[],j=new Uint32Array([0,0,0,0]);for(let k=0,G=P.length;k<G;k++){j[0]=k;const $=this.bindingUtils.createBindGroupIndex(j,I.layout);z.push($)}U.indexesGPU=z}const F=this.renderer.getPixelRatio();for(let I=0,z=P.length;I<z;I++){const j=P[I];if(n.layers.test(j.layers)){const k=j.viewport;g.setViewport(Math.floor(k.x*F),Math.floor(k.y*F),Math.floor(k.width*F),Math.floor(k.height*F),s.viewportValue.minDepth,s.viewportValue.maxDepth),g.setBindGroup(O.index,U.indexesGPU[I]),E()}}}else E()}needsRenderUpdate(e){const t=this.get(e),{object:n,material:r}=e,s=this.utils,a=s.getSampleCountRenderContext(e.context),o=s.getCurrentColorSpace(e.context),u=s.getCurrentColorFormat(e.context),c=s.getCurrentDepthStencilFormat(e.context),p=s.getPrimitiveTopology(n,r);let g=!1;return(t.material!==r||t.materialVersion!==r.version||t.transparent!==r.transparent||t.blending!==r.blending||t.premultipliedAlpha!==r.premultipliedAlpha||t.blendSrc!==r.blendSrc||t.blendDst!==r.blendDst||t.blendEquation!==r.blendEquation||t.blendSrcAlpha!==r.blendSrcAlpha||t.blendDstAlpha!==r.blendDstAlpha||t.blendEquationAlpha!==r.blendEquationAlpha||t.colorWrite!==r.colorWrite||t.depthWrite!==r.depthWrite||t.depthTest!==r.depthTest||t.depthFunc!==r.depthFunc||t.stencilWrite!==r.stencilWrite||t.stencilFunc!==r.stencilFunc||t.stencilFail!==r.stencilFail||t.stencilZFail!==r.stencilZFail||t.stencilZPass!==r.stencilZPass||t.stencilFuncMask!==r.stencilFuncMask||t.stencilWriteMask!==r.stencilWriteMask||t.side!==r.side||t.alphaToCoverage!==r.alphaToCoverage||t.sampleCount!==a||t.colorSpace!==o||t.colorFormat!==u||t.depthStencilFormat!==c||t.primitiveTopology!==p||t.clippingContextCacheKey!==e.clippingContextCacheKey)&&(t.material=r,t.materialVersion=r.version,t.transparent=r.transparent,t.blending=r.blending,t.premultipliedAlpha=r.premultipliedAlpha,t.blendSrc=r.blendSrc,t.blendDst=r.blendDst,t.blendEquation=r.blendEquation,t.blendSrcAlpha=r.blendSrcAlpha,t.blendDstAlpha=r.blendDstAlpha,t.blendEquationAlpha=r.blendEquationAlpha,t.colorWrite=r.colorWrite,t.depthWrite=r.depthWrite,t.depthTest=r.depthTest,t.depthFunc=r.depthFunc,t.stencilWrite=r.stencilWrite,t.stencilFunc=r.stencilFunc,t.stencilFail=r.stencilFail,t.stencilZFail=r.stencilZFail,t.stencilZPass=r.stencilZPass,t.stencilFuncMask=r.stencilFuncMask,t.stencilWriteMask=r.stencilWriteMask,t.side=r.side,t.alphaToCoverage=r.alphaToCoverage,t.sampleCount=a,t.colorSpace=o,t.colorFormat=u,t.depthStencilFormat=c,t.primitiveTopology=p,t.clippingContextCacheKey=e.clippingContextCacheKey,g=!0),g}getRenderCacheKey(e){const{object:t,material:n}=e,r=this.utils,s=e.context;return[n.transparent,n.blending,n.premultipliedAlpha,n.blendSrc,n.blendDst,n.blendEquation,n.blendSrcAlpha,n.blendDstAlpha,n.blendEquationAlpha,n.colorWrite,n.depthWrite,n.depthTest,n.depthFunc,n.stencilWrite,n.stencilFunc,n.stencilFail,n.stencilZFail,n.stencilZPass,n.stencilFuncMask,n.stencilWriteMask,n.side,r.getSampleCountRenderContext(s),r.getCurrentColorSpace(s),r.getCurrentColorFormat(s),r.getCurrentDepthStencilFormat(s),r.getPrimitiveTopology(t,n),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,r,s,a){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,a)}initTimestampQuery(e,t){if(!this.trackTimestamp)return;const n=e.isComputeNode?"compute":"render";this.timestampQueryPool[n]||(this.timestampQueryPool[n]=new Ece(this.device,n,2048));const r=this.timestampQueryPool[n],s=r.allocateQueriesForContext(e);t.timestampWrites={querySet:r.querySet,beginningOfPassWriteIndex:s,endOfPassWriteIndex:s+1}}createNodeBuilder(e,t){return new vce(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage+(e.name!==""?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const n=this.get(e),s=n.currentPass.finish();this.get(t).bundleGPU=s,n.currentSets=n._currentSets,n.currentPass=n._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e,t,n,r){this.bindingUtils.createBindings(e,t,n,r)}updateBindings(e,t,n,r){this.bindingUtils.createBindings(e,t,n,r)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){let o=0,u=0,c=0,p=0,g=0,y=0,q=e.image.width,S=e.image.height,R=1;n!==null&&(n.isBox3===!0?(p=n.min.x,g=n.min.y,y=n.min.z,q=n.max.x-n.min.x,S=n.max.y-n.min.y,R=n.max.z-n.min.z):(p=n.min.x,g=n.min.y,q=n.max.x-n.min.x,S=n.max.y-n.min.y,R=1)),r!==null&&(o=r.x,u=r.y,c=r.z||0);const M=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),E=this.get(e).texture,U=this.get(t).texture;M.copyTextureToTexture({texture:E,mipLevel:s,origin:{x:p,y:g,z:y}},{texture:U,mipLevel:a,origin:{x:o,y:u,z:c}},[q,S,R]),this.device.queue.submit([M.finish()]),a===0&&t.generateMipmaps&&this.textureUtils.generateMipmaps(t)}copyFramebufferToTexture(e,t,n){const r=this.get(t);let s=null;t.renderTarget?e.isDepthTexture?s=this.get(t.depthTexture).texture:s=this.get(t.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(t.depth,t.stencil):s=this.context.getCurrentTexture();const a=this.get(e).texture;if(s.format!==a.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,a.format);return}let o;if(r.currentPass?(r.currentPass.end(),o=r.encoder):o=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),o.copyTextureToTexture({texture:s,origin:[n.x,n.y,0]},{texture:a},[n.z,n.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e),r.currentPass){const{descriptor:u}=r;for(let c=0;c<u.colorAttachments.length;c++)u.colorAttachments[c].loadOp=er.Load;if(t.depth&&(u.depthStencilAttachment.depthLoadOp=er.Load),t.stencil&&(u.depthStencilAttachment.stencilLoadOp=er.Load),r.currentPass=o.beginRenderPass(u),r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.viewport&&this.updateViewport(t),t.scissor){const{x:c,y:p,width:g,height:y}=t.scissorValue;r.currentPass.setScissorRect(c,p,g,y)}}else this.device.queue.submit([o.finish()])}}class Rce extends LN{constructor(e,t,n,r,s,a){super(e,t,n,r,s,a),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class Cce extends OB{constructor(){super(),this.addMaterial(bie,"MeshPhongMaterial"),this.addMaterial(NO,"MeshStandardMaterial"),this.addMaterial(lre,"MeshPhysicalMaterial"),this.addMaterial(fre,"MeshToonMaterial"),this.addMaterial(mie,"MeshBasicMaterial"),this.addMaterial(xie,"MeshLambertMaterial"),this.addMaterial(cie,"MeshNormalMaterial"),this.addMaterial(pre,"MeshMatcapMaterial"),this.addMaterial(iie,"LineBasicMaterial"),this.addMaterial(sie,"LineDashedMaterial"),this.addMaterial(vre,"PointsMaterial"),this.addMaterial(DO,"SpriteMaterial"),this.addMaterial(qre,"ShadowMaterial"),this.addLight(qoe,YG),this.addLight(uue,UN),this.addLight(cue,ZG),this.addLight(LB,LN),this.addLight(fue,ON),this.addLight(due,$G),this.addLight(Aue,eV),this.addLight(hue,Rce),this.addToneMapping(JO,oN),this.addToneMapping(eB,lN),this.addToneMapping(tB,uN),this.addToneMapping(nB,cN),this.addToneMapping(iB,hN),this.addToneMapping(rB,fN)}}class WB extends Due{constructor(e={}){let t;e.forceWebGL?t=HR:(t=Mce,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new HR(e)));const n=new t(e);super(n,e),this.library=new Cce,this.isWebGPURenderer=!0}}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */H.BRDF_GGX;H.BRDF_Lambert;H.BasicShadowFilter;H.Break;H.Continue;H.DFGApprox;H.D_GGX;H.Discard;H.EPSILON;H.F_Schlick;const Nce=H.Fn;H.INFINITY;const Pce=H.If,Dce=H.Loop;H.NodeShaderStage;H.NodeType;H.NodeUpdateType;H.NodeAccess;H.PCFShadowFilter;H.PCFSoftShadowFilter;H.PI;H.PI2;H.Return;H.Schlick_to_F0;H.ScriptableNodeResources;H.ShaderNode;H.TBNViewMatrix;H.VSMShadowFilter;H.V_GGX_SmithCorrelated;H.abs;H.acesFilmicToneMapping;H.acos;H.add;H.addNodeElement;H.agxToneMapping;H.all;H.alphaT;H.and;H.anisotropy;H.anisotropyB;H.anisotropyT;H.any;H.append;H.array;H.arrayBuffer;const Lce=H.asin;H.assign;H.atan;H.atan2;H.atomicAdd;H.atomicAnd;H.atomicFunc;H.atomicMax;H.atomicMin;H.atomicOr;H.atomicStore;H.atomicSub;H.atomicXor;H.atomicLoad;H.attenuationColor;H.attenuationDistance;H.attribute;H.attributeArray;H.backgroundBlurriness;H.backgroundIntensity;H.backgroundRotation;H.batch;H.billboarding;H.bitAnd;H.bitNot;H.bitOr;H.bitXor;H.bitangentGeometry;H.bitangentLocal;H.bitangentView;H.bitangentWorld;H.bitcast;H.blendBurn;H.blendColor;H.blendDodge;H.blendOverlay;H.blendScreen;H.blur;H.bool;H.buffer;H.bufferAttribute;H.bumpMap;H.burn;H.bvec2;H.bvec3;H.bvec4;H.bypass;H.cache;H.call;H.cameraFar;H.cameraIndex;H.cameraNear;H.cameraNormalMatrix;H.cameraPosition;H.cameraProjectionMatrix;H.cameraProjectionMatrixInverse;H.cameraViewMatrix;H.cameraWorldMatrix;H.cbrt;H.cdl;H.ceil;H.checker;H.cineonToneMapping;H.clamp;H.clearcoat;H.clearcoatRoughness;H.code;H.color;H.colorSpaceToWorking;H.colorToDirection;H.compute;H.computeSkinning;H.cond;H.Const;H.context;H.convert;H.convertColorSpace;H.convertToTexture;const Uce=H.cos;H.cross;H.cubeTexture;H.dFdx;H.dFdy;H.dashSize;H.debug;H.defaultBuildStages;H.defaultShaderStages;H.defined;H.degrees;H.deltaTime;H.densityFog;H.densityFogFactor;H.depth;H.depthPass;H.difference;H.diffuseColor;H.directPointLight;H.directionToColor;H.dispersion;H.distance;H.div;H.dodge;H.dot;H.drawIndex;H.dynamicBufferAttribute;H.element;H.emissive;H.equal;H.equals;H.equirectUV;const Oce=H.exp;H.exp2;H.expression;H.faceDirection;H.faceForward;H.faceforward;const Bce=H.float;H.floor;H.fog;H.fract;H.frameGroup;H.frameId;H.frontFacing;H.fwidth;H.gain;H.gapSize;H.getConstNodeType;H.getCurrentStack;H.getDirection;H.getDistanceAttenuation;H.getGeometryRoughness;H.getNormalFromDepth;H.getParallaxCorrectNormal;H.getRoughness;H.getScreenPosition;H.getShIrradianceAt;H.getTextureIndex;H.getViewPosition;H.glsl;H.glslFn;H.grayscale;H.greaterThan;H.greaterThanEqual;H.hash;H.highpModelNormalViewMatrix;H.highpModelViewMatrix;H.hue;H.instance;const Ice=H.instanceIndex;H.instancedArray;H.instancedBufferAttribute;H.instancedDynamicBufferAttribute;H.instancedMesh;H.int;H.inverseSqrt;H.inversesqrt;H.invocationLocalIndex;H.invocationSubgroupIndex;H.ior;H.iridescence;H.iridescenceIOR;H.iridescenceThickness;H.ivec2;H.ivec3;H.ivec4;H.js;H.label;H.length;H.lengthSq;H.lessThan;H.lessThanEqual;H.lightPosition;H.lightTargetDirection;H.lightTargetPosition;H.lightViewPosition;H.lightingContext;H.lights;H.linearDepth;H.linearToneMapping;H.localId;H.globalId;H.log;H.log2;H.logarithmicDepthToViewZ;H.loop;H.luminance;H.mediumpModelViewMatrix;H.mat2;H.mat3;H.mat4;H.matcapUV;H.materialAO;H.materialAlphaTest;H.materialAnisotropy;H.materialAnisotropyVector;H.materialAttenuationColor;H.materialAttenuationDistance;H.materialClearcoat;H.materialClearcoatNormal;H.materialClearcoatRoughness;H.materialColor;H.materialDispersion;H.materialEmissive;H.materialIOR;H.materialIridescence;H.materialIridescenceIOR;H.materialIridescenceThickness;H.materialLightMap;H.materialLineDashOffset;H.materialLineDashSize;H.materialLineGapSize;H.materialLineScale;H.materialLineWidth;H.materialMetalness;H.materialNormal;H.materialOpacity;H.materialPointSize;H.materialReference;H.materialReflectivity;H.materialRefractionRatio;H.materialRotation;H.materialRoughness;H.materialSheen;H.materialSheenRoughness;H.materialShininess;H.materialSpecular;H.materialSpecularColor;H.materialSpecularIntensity;H.materialSpecularStrength;H.materialThickness;H.materialTransmission;H.max;H.maxMipLevel;H.metalness;H.min;H.mix;H.mixElement;H.mod;H.modInt;H.modelDirection;H.modelNormalMatrix;H.modelPosition;H.modelRadius;H.modelScale;H.modelViewMatrix;H.modelViewPosition;H.modelViewProjection;H.modelWorldMatrix;H.modelWorldMatrixInverse;H.morphReference;H.mrt;H.mul;H.mx_aastep;H.mx_cell_noise_float;H.mx_contrast;H.mx_fractal_noise_float;H.mx_fractal_noise_vec2;H.mx_fractal_noise_vec3;H.mx_fractal_noise_vec4;H.mx_hsvtorgb;H.mx_noise_float;H.mx_noise_vec3;H.mx_noise_vec4;H.mx_ramplr;H.mx_ramptb;H.mx_rgbtohsv;H.mx_safepower;H.mx_splitlr;H.mx_splittb;H.mx_srgb_texture_to_lin_rec709;H.mx_transform_uv;H.mx_worley_noise_float;H.mx_worley_noise_vec2;H.mx_worley_noise_vec3;const Fce=H.negate;H.neutralToneMapping;H.nodeArray;H.nodeImmutable;H.nodeObject;H.nodeObjects;H.nodeProxy;H.normalFlat;H.normalGeometry;H.normalLocal;H.normalMap;H.normalView;H.normalWorld;H.normalize;H.not;H.notEqual;H.numWorkgroups;H.objectDirection;H.objectGroup;H.objectPosition;H.objectRadius;H.objectScale;H.objectViewPosition;H.objectWorldMatrix;H.oneMinus;H.or;H.orthographicDepthToViewZ;H.oscSawtooth;H.oscSine;H.oscSquare;H.oscTriangle;H.output;H.outputStruct;H.overlay;H.overloadingFn;H.parabola;H.parallaxDirection;H.parallaxUV;H.parameter;H.pass;H.passTexture;H.pcurve;H.perspectiveDepthToViewZ;H.pmremTexture;H.pointUV;H.pointWidth;H.positionGeometry;H.positionLocal;H.positionPrevious;H.positionView;H.positionViewDirection;H.positionWorld;H.positionWorldDirection;H.posterize;H.pow;H.pow2;H.pow3;H.pow4;H.property;H.radians;H.rand;H.range;H.rangeFog;H.rangeFogFactor;H.reciprocal;H.lightProjectionUV;H.reference;H.referenceBuffer;H.reflect;H.reflectVector;H.reflectView;H.reflector;H.refract;H.refractVector;H.refractView;H.reinhardToneMapping;H.remainder;H.remap;H.remapClamp;H.renderGroup;H.renderOutput;H.rendererReference;H.rotate;H.rotateUV;H.roughness;H.round;H.rtt;H.sRGBTransferEOTF;H.sRGBTransferOETF;H.sampler;H.samplerComparison;H.saturate;H.saturation;H.screen;H.screenCoordinate;H.screenSize;H.screenUV;H.scriptable;H.scriptableValue;H.select;H.setCurrentStack;H.shaderStages;H.shadow;H.pointShadow;H.shadowPositionWorld;H.sharedUniformGroup;H.shapeCircle;H.sheen;H.sheenRoughness;H.shiftLeft;H.shiftRight;H.shininess;H.sign;const kce=H.sin;H.sinc;H.skinning;H.smoothstep;H.smoothstepElement;H.specularColor;H.specularF90;H.spherizeUV;H.split;H.spritesheetUV;const zce=H.sqrt;H.stack;H.step;const Gce=H.storage;H.storageBarrier;H.storageObject;H.storageTexture;H.string;H.struct;H.sub;H.subgroupIndex;H.subgroupSize;H.tan;H.tangentGeometry;H.tangentLocal;H.tangentView;H.tangentWorld;H.temp;H.texture;H.texture3D;H.textureBarrier;H.textureBicubic;H.textureCubeUV;H.textureLoad;H.textureSize;H.textureStore;H.thickness;H.threshold;H.time;H.timerDelta;H.timerGlobal;H.timerLocal;H.toOutputColorSpace;H.toWorkingColorSpace;H.toneMapping;H.toneMappingExposure;H.toonOutlinePass;H.transformDirection;H.transformNormal;H.transformNormalToView;H.transformedBentNormalView;H.transformedBitangentView;H.transformedBitangentWorld;H.transformedClearcoatNormalView;H.transformedNormalView;H.transformedNormalWorld;H.transformedTangentView;H.transformedTangentWorld;H.transmission;H.transpose;H.tri;H.tri3;H.triNoise3D;H.triplanarTexture;H.triplanarTextures;H.trunc;H.tslFn;H.uint;const Vce=H.uniform;H.uniformArray;H.uniformGroup;H.uniforms;H.userData;H.uv;H.uvec2;H.uvec3;H.uvec4;H.Var;H.varying;H.varyingProperty;H.vec2;H.vec3;H.vec4;H.vectorComponents;H.velocity;H.vertexColor;H.vertexIndex;H.vibrance;H.viewZToLogarithmicDepth;H.viewZToOrthographicDepth;H.viewZToPerspectiveDepth;H.viewport;H.viewportBottomLeft;H.viewportCoordinate;H.viewportDepthTexture;H.viewportLinearDepth;H.viewportMipTexture;H.viewportResolution;H.viewportSafeUV;H.viewportSharedTexture;H.viewportSize;H.viewportTexture;H.viewportTopLeft;H.viewportUV;H.wgsl;H.wgslFn;H.workgroupArray;H.workgroupBarrier;H.workgroupId;H.workingToColorSpace;H.xor;const KR=new Uc,T6=new le;class $B extends tV{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new mi(e,3)),this.setAttribute("uv",new mi(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new g8(t,6,1);return this.setAttribute("instanceStart",new ou(n,3,0)),this.setAttribute("instanceEnd",new ou(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new g8(t,6,1);return this.setAttribute("instanceColorStart",new ou(n,3,0)),this.setAttribute("instanceColorEnd",new ou(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new DG(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Uc);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),KR.setFromBufferAttribute(t),this.boundingBox.union(KR))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Z1),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)T6.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(T6)),T6.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(T6));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}}Dt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new rt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Ra.line={uniforms:x5.merge([Dt.common,Dt.fog,Dt.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class Jq extends Ga{constructor(e){super({type:"LineMaterial",uniforms:x5.clone(Ra.line.uniforms),vertexShader:Ra.line.vertexShader,fragmentShader:Ra.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const w_=new sn,ZR=new le,JR=new le,Os=new sn,Bs=new sn,Kl=new sn,E_=new le,M_=new yn,Is=new iV,eC=new le,w6=new Uc,E6=new Z1,Zl=new sn;let su,fh;function tC(i,e,t){return Zl.set(0,0,-e,1).applyMatrix4(i.projectionMatrix),Zl.multiplyScalar(1/Zl.w),Zl.x=fh/t.width,Zl.y=fh/t.height,Zl.applyMatrix4(i.projectionMatrixInverse),Zl.multiplyScalar(1/Zl.w),Math.abs(Math.max(Zl.x,Zl.y))}function Hce(i,e){const t=i.matrixWorld,n=i.geometry,r=n.attributes.instanceStart,s=n.attributes.instanceEnd,a=Math.min(n.instanceCount,r.count);for(let o=0,u=a;o<u;o++){Is.start.fromBufferAttribute(r,o),Is.end.fromBufferAttribute(s,o),Is.applyMatrix4(t);const c=new le,p=new le;su.distanceSqToSegment(Is.start,Is.end,p,c),p.distanceTo(c)<fh*.5&&e.push({point:p,pointOnLine:c,distance:su.origin.distanceTo(p),object:i,face:null,faceIndex:o,uv:null,uv1:null})}}function jce(i,e,t){const n=e.projectionMatrix,s=i.material.resolution,a=i.matrixWorld,o=i.geometry,u=o.attributes.instanceStart,c=o.attributes.instanceEnd,p=Math.min(o.instanceCount,u.count),g=-e.near;su.at(1,Kl),Kl.w=1,Kl.applyMatrix4(e.matrixWorldInverse),Kl.applyMatrix4(n),Kl.multiplyScalar(1/Kl.w),Kl.x*=s.x/2,Kl.y*=s.y/2,Kl.z=0,E_.copy(Kl),M_.multiplyMatrices(e.matrixWorldInverse,a);for(let y=0,q=p;y<q;y++){if(Os.fromBufferAttribute(u,y),Bs.fromBufferAttribute(c,y),Os.w=1,Bs.w=1,Os.applyMatrix4(M_),Bs.applyMatrix4(M_),Os.z>g&&Bs.z>g)continue;if(Os.z>g){const P=Os.z-Bs.z,O=(Os.z-g)/P;Os.lerp(Bs,O)}else if(Bs.z>g){const P=Bs.z-Os.z,O=(Bs.z-g)/P;Bs.lerp(Os,O)}Os.applyMatrix4(n),Bs.applyMatrix4(n),Os.multiplyScalar(1/Os.w),Bs.multiplyScalar(1/Bs.w),Os.x*=s.x/2,Os.y*=s.y/2,Bs.x*=s.x/2,Bs.y*=s.y/2,Is.start.copy(Os),Is.start.z=0,Is.end.copy(Bs),Is.end.z=0;const R=Is.closestPointToPointParameter(E_,!0);Is.at(R,eC);const M=Qd.lerp(Os.z,Bs.z,R),E=M>=-1&&M<=1,U=E_.distanceTo(eC)<fh*.5;if(E&&U){Is.start.fromBufferAttribute(u,y),Is.end.fromBufferAttribute(c,y),Is.start.applyMatrix4(a),Is.end.applyMatrix4(a);const P=new le,O=new le;su.distanceSqToSegment(Is.start,Is.end,O,P),t.push({point:O,pointOnLine:P,distance:su.origin.distanceTo(O),object:i,face:null,faceIndex:y,uv:null,uv1:null})}}}class Wce extends yi{constructor(e=new $B,t=new Jq({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let a=0,o=0,u=t.count;a<u;a++,o+=2)ZR.fromBufferAttribute(t,a),JR.fromBufferAttribute(n,a),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+ZR.distanceTo(JR);const s=new g8(r,2,1);return e.setAttribute("instanceDistanceStart",new ou(s,1,0)),e.setAttribute("instanceDistanceEnd",new ou(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;r===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;su=e.ray;const a=this.matrixWorld,o=this.geometry,u=this.material;fh=u.linewidth+s,o.boundingSphere===null&&o.computeBoundingSphere(),E6.copy(o.boundingSphere).applyMatrix4(a);let c;if(n)c=fh*.5;else{const g=Math.max(r.near,E6.distanceToPoint(su.origin));c=tC(r,g,u.resolution)}if(E6.radius+=c,su.intersectsSphere(E6)===!1)return;o.boundingBox===null&&o.computeBoundingBox(),w6.copy(o.boundingBox).applyMatrix4(a);let p;if(n)p=fh*.5;else{const g=Math.max(r.near,w6.distanceToPoint(su.origin));p=tC(r,g,u.resolution)}w6.expandByScalar(p),su.intersectsBox(w6)!==!1&&(n?Hce(this,t):jce(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(w_),this.material.uniforms.resolution.value.set(w_.z,w_.w))}}class XB extends $B{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setColors(n),this}setFromPoints(e){const t=e.length-1,n=new Float32Array(6*t);for(let r=0;r<t;r++)n[6*r]=e[r].x,n[6*r+1]=e[r].y,n[6*r+2]=e[r].z||0,n[6*r+3]=e[r+1].x,n[6*r+4]=e[r+1].y,n[6*r+5]=e[r+1].z||0;return super.setPositions(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class $ce extends Wce{constructor(e=new XB,t=new Jq({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class nC extends Ax{constructor(e,t={}){const n=t.font;if(n===void 0)super();else{const r=n.generateShapes(e,t.size);t.depth===void 0&&(t.depth=50),t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}let Xce=class{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=Qce(e,t,this.data);for(let s=0,a=r.length;s<a;s++)n.push(...r[s].toShapes());return n}};function Qce(i,e,t){const n=Array.from(i),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,a=[];let o=0,u=0;for(let c=0;c<n.length;c++){const p=n[c];if(p===`
`)o=0,u-=s;else{const g=Yce(p,r,o,u,t);o+=g.offsetX,a.push(g.path)}}return a}function Yce(i,e,t,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const a=new FN;let o,u,c,p,g,y,q,S;if(s.o){const R=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let M=0,E=R.length;M<E;)switch(R[M++]){case"m":o=R[M++]*e+t,u=R[M++]*e+n,a.moveTo(o,u);break;case"l":o=R[M++]*e+t,u=R[M++]*e+n,a.lineTo(o,u);break;case"q":c=R[M++]*e+t,p=R[M++]*e+n,g=R[M++]*e+t,y=R[M++]*e+n,a.quadraticCurveTo(g,y,c,p);break;case"b":c=R[M++]*e+t,p=R[M++]*e+n,g=R[M++]*e+t,y=R[M++]*e+n,q=R[M++]*e+t,S=R[M++]*e+n,a.bezierCurveTo(g,y,q,S,c,p);break}}return{offsetX:s.ha*e,path:a}}function cy(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function Kce(i){if(Array.isArray(i))return i}function Zce(i){if(Array.isArray(i))return cy(i)}function QB(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Jce(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function iC(i,e,t,n,r,s,a){try{var o=i[s](a),u=o.value}catch(c){return void t(c)}o.done?e(u):Promise.resolve(u).then(n,r)}function e1e(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function a(u){iC(s,n,r,a,o,"next",u)}function o(u){iC(s,n,r,a,o,"throw",u)}a(void 0)})}}function r9(i,e,t){return e=cA(e),u1e(i,tb()?Reflect.construct(e,t||[],cA(i).constructor):e.apply(i,t))}function t1e(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s9(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function np(i,e){return i.get(QB(i,e))}function R_(i,e,t){t1e(i,e),e.set(i,t)}function C_(i,e,t){return i.set(QB(i,e),t),t}function eb(i,e,t){if(tb())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return r}function n1e(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,YB(n.key),n)}}function a9(i,e,t){return e&&n1e(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Ts(i,e,t){return(e=YB(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function hy(){return hy=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,e,t){var n=c1e(i,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?i:t):r.value}},hy.apply(null,arguments)}function cA(i){return cA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cA(i)}function o9(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&dy(i,e)}function tb(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tb=function(){return!!i})()}function i1e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function r1e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],u=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(p){c=!0,r=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function s1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rC(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Ci(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rC(Object(t),!0).forEach(function(n){Ts(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):rC(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function o1e(i,e){if(i==null)return{};var t,n,r=l1e(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function l1e(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}function u1e(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jce(i)}function fy(){fy=function(){return e};var i,e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(W,J,re){W[J]=re.value},s=typeof Symbol=="function"?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function c(W,J,re){return Object.defineProperty(W,J,{value:re,enumerable:!0,configurable:!0,writable:!0}),W[J]}try{c({},"")}catch{c=function(J,re,ge){return J[re]=ge}}function p(W,J,re,ge){var Y=J&&J.prototype instanceof E?J:E,me=Object.create(Y.prototype),Me=new ue(ge||[]);return r(me,"_invoke",{value:G(W,re,Me)}),me}function g(W,J,re){try{return{type:"normal",arg:W.call(J,re)}}catch(ge){return{type:"throw",arg:ge}}}e.wrap=p;var y="suspendedStart",q="suspendedYield",S="executing",R="completed",M={};function E(){}function U(){}function P(){}var O={};c(O,a,function(){return this});var F=Object.getPrototypeOf,I=F&&F(F(ae([])));I&&I!==t&&n.call(I,a)&&(O=I);var z=P.prototype=E.prototype=Object.create(O);function j(W){["next","throw","return"].forEach(function(J){c(W,J,function(re){return this._invoke(J,re)})})}function k(W,J){function re(Y,me,Me,Be){var be=g(W[Y],W,me);if(be.type!=="throw"){var Fe=be.arg,$e=Fe.value;return $e&&typeof $e=="object"&&n.call($e,"__await")?J.resolve($e.__await).then(function(ht){re("next",ht,Me,Be)},function(ht){re("throw",ht,Me,Be)}):J.resolve($e).then(function(ht){Fe.value=ht,Me(Fe)},function(ht){return re("throw",ht,Me,Be)})}Be(be.arg)}var ge;r(this,"_invoke",{value:function(Y,me){function Me(){return new J(function(Be,be){re(Y,me,Be,be)})}return ge=ge?ge.then(Me,Me):Me()}})}function G(W,J,re){var ge=y;return function(Y,me){if(ge===S)throw Error("Generator is already running");if(ge===R){if(Y==="throw")throw me;return{value:i,done:!0}}for(re.method=Y,re.arg=me;;){var Me=re.delegate;if(Me){var Be=$(Me,re);if(Be){if(Be===M)continue;return Be}}if(re.method==="next")re.sent=re._sent=re.arg;else if(re.method==="throw"){if(ge===y)throw ge=R,re.arg;re.dispatchException(re.arg)}else re.method==="return"&&re.abrupt("return",re.arg);ge=S;var be=g(W,J,re);if(be.type==="normal"){if(ge=re.done?R:q,be.arg===M)continue;return{value:be.arg,done:re.done}}be.type==="throw"&&(ge=R,re.method="throw",re.arg=be.arg)}}}function $(W,J){var re=J.method,ge=W.iterator[re];if(ge===i)return J.delegate=null,re==="throw"&&W.iterator.return&&(J.method="return",J.arg=i,$(W,J),J.method==="throw")||re!=="return"&&(J.method="throw",J.arg=new TypeError("The iterator does not provide a '"+re+"' method")),M;var Y=g(ge,W.iterator,J.arg);if(Y.type==="throw")return J.method="throw",J.arg=Y.arg,J.delegate=null,M;var me=Y.arg;return me?me.done?(J[W.resultName]=me.value,J.next=W.nextLoc,J.method!=="return"&&(J.method="next",J.arg=i),J.delegate=null,M):me:(J.method="throw",J.arg=new TypeError("iterator result is not an object"),J.delegate=null,M)}function te(W){var J={tryLoc:W[0]};1 in W&&(J.catchLoc=W[1]),2 in W&&(J.finallyLoc=W[2],J.afterLoc=W[3]),this.tryEntries.push(J)}function ne(W){var J=W.completion||{};J.type="normal",delete J.arg,W.completion=J}function ue(W){this.tryEntries=[{tryLoc:"root"}],W.forEach(te,this),this.reset(!0)}function ae(W){if(W||W===""){var J=W[a];if(J)return J.call(W);if(typeof W.next=="function")return W;if(!isNaN(W.length)){var re=-1,ge=function Y(){for(;++re<W.length;)if(n.call(W,re))return Y.value=W[re],Y.done=!1,Y;return Y.value=i,Y.done=!0,Y};return ge.next=ge}}throw new TypeError(typeof W+" is not iterable")}return U.prototype=P,r(z,"constructor",{value:P,configurable:!0}),r(P,"constructor",{value:U,configurable:!0}),U.displayName=c(P,u,"GeneratorFunction"),e.isGeneratorFunction=function(W){var J=typeof W=="function"&&W.constructor;return!!J&&(J===U||(J.displayName||J.name)==="GeneratorFunction")},e.mark=function(W){return Object.setPrototypeOf?Object.setPrototypeOf(W,P):(W.__proto__=P,c(W,u,"GeneratorFunction")),W.prototype=Object.create(z),W},e.awrap=function(W){return{__await:W}},j(k.prototype),c(k.prototype,o,function(){return this}),e.AsyncIterator=k,e.async=function(W,J,re,ge,Y){Y===void 0&&(Y=Promise);var me=new k(p(W,J,re,ge),Y);return e.isGeneratorFunction(J)?me:me.next().then(function(Me){return Me.done?Me.value:me.next()})},j(z),c(z,u,"Generator"),c(z,a,function(){return this}),c(z,"toString",function(){return"[object Generator]"}),e.keys=function(W){var J=Object(W),re=[];for(var ge in J)re.push(ge);return re.reverse(),function Y(){for(;re.length;){var me=re.pop();if(me in J)return Y.value=me,Y.done=!1,Y}return Y.done=!0,Y}},e.values=ae,ue.prototype={constructor:ue,reset:function(W){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(ne),!W)for(var J in this)J.charAt(0)==="t"&&n.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=i)},stop:function(){this.done=!0;var W=this.tryEntries[0].completion;if(W.type==="throw")throw W.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var J=this;function re(be,Fe){return me.type="throw",me.arg=W,J.next=be,Fe&&(J.method="next",J.arg=i),!!Fe}for(var ge=this.tryEntries.length-1;ge>=0;--ge){var Y=this.tryEntries[ge],me=Y.completion;if(Y.tryLoc==="root")return re("end");if(Y.tryLoc<=this.prev){var Me=n.call(Y,"catchLoc"),Be=n.call(Y,"finallyLoc");if(Me&&Be){if(this.prev<Y.catchLoc)return re(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return re(Y.finallyLoc)}else if(Me){if(this.prev<Y.catchLoc)return re(Y.catchLoc,!0)}else{if(!Be)throw Error("try statement without catch or finally");if(this.prev<Y.finallyLoc)return re(Y.finallyLoc)}}}},abrupt:function(W,J){for(var re=this.tryEntries.length-1;re>=0;--re){var ge=this.tryEntries[re];if(ge.tryLoc<=this.prev&&n.call(ge,"finallyLoc")&&this.prev<ge.finallyLoc){var Y=ge;break}}Y&&(W==="break"||W==="continue")&&Y.tryLoc<=J&&J<=Y.finallyLoc&&(Y=null);var me=Y?Y.completion:{};return me.type=W,me.arg=J,Y?(this.method="next",this.next=Y.finallyLoc,M):this.complete(me)},complete:function(W,J){if(W.type==="throw")throw W.arg;return W.type==="break"||W.type==="continue"?this.next=W.arg:W.type==="return"?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):W.type==="normal"&&J&&(this.next=J),M},finish:function(W){for(var J=this.tryEntries.length-1;J>=0;--J){var re=this.tryEntries[J];if(re.finallyLoc===W)return this.complete(re.completion,re.afterLoc),ne(re),M}},catch:function(W){for(var J=this.tryEntries.length-1;J>=0;--J){var re=this.tryEntries[J];if(re.tryLoc===W){var ge=re.completion;if(ge.type==="throw"){var Y=ge.arg;ne(re)}return Y}}throw Error("illegal catch attempt")},delegateYield:function(W,J,re){return this.delegate={iterator:ae(W),resultName:J,nextLoc:re},this.method==="next"&&(this.arg=i),M}},e}function dy(i,e){return dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},dy(i,e)}function lr(i,e){return Kce(i)||r1e(i,e)||KB(i,e)||s1e()}function c1e(i,e){for(;!{}.hasOwnProperty.call(i,e)&&(i=cA(i))!==null;);return i}function N_(i,e,t,n){var r=hy(cA(i.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function Bi(i){return Zce(i)||i1e(i)||KB(i)||a1e()}function h1e(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function YB(i){var e=h1e(i,"string");return typeof e=="symbol"?e:e+""}function KB(i,e){if(i){if(typeof i=="string")return cy(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?cy(i,e):void 0}}var ZB=function(e){e instanceof Array?e.forEach(ZB):(e.map&&e.map.dispose(),e.dispose())},nb=function(e){e.geometry&&e.geometry.dispose(),e.material&&ZB(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(nb)},Vi=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),nb(t)}};function ma(i,e){var t=new e;return{linkProp:function(r){return{default:t[r](),onChange:function(a,o){o[i][r](a)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var a=s[i],o=arguments.length,u=new Array(o>1?o-1:0),c=1;c<o;c++)u[c-1]=arguments[c];var p=a[r].apply(a,u);return p===a?this:p}}}}var ir=100;function sC(){return ir}function tl(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180,s=ir*(1+t),a=Math.sin(n);return{x:s*a*Math.cos(r),y:s*Math.cos(n),z:s*a*Math.sin(r)}}function JB(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),a=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-a*180/Math.PI-(a<-Math.PI/2?360:0),altitude:r/ir-1}}function Q0(i){return i*Math.PI/180}var S3=window.THREE?window.THREE:{BackSide:Oi,BufferAttribute:_r,Color:Xt,Mesh:yi,ShaderMaterial:Ga},f1e=`
uniform float hollowRadius;

varying vec3 vVertexWorldPosition;
varying vec3 vVertexNormal;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {    
  vVertexNormal	= normalize(normalMatrix * normal);
  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
  
  vec4 objCenterViewPosition = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);
  vCameraDistanceToObjCenter = length(objCenterViewPosition);
  
  float edgeAngle = atan(hollowRadius / vCameraDistanceToObjCenter);
  float vertexAngle = acos(dot(normalize(modelViewMatrix * vec4(position, 1.0)), normalize(objCenterViewPosition)));
  vVertexAngularDistanceToHollowRadius = vertexAngle - edgeAngle;

  gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,d1e=`
uniform vec3 color;
uniform float coefficient;
uniform float power;
uniform float hollowRadius;

varying vec3 vVertexNormal;
varying vec3 vVertexWorldPosition;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {
  if (vCameraDistanceToObjCenter < hollowRadius) discard; // inside the hollowRadius
  if (vVertexAngularDistanceToHollowRadius < 0.0) discard; // frag position is within the hollow radius

  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;
  vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
  viewCameraToVertex = normalize(viewCameraToVertex);
  float intensity	= pow(
    coefficient + dot(vVertexNormal, viewCameraToVertex),
    power
  );
  gl_FragColor = vec4(color, intensity);
}`;function A1e(i,e,t,n){return new S3.ShaderMaterial({depthWrite:!1,transparent:!0,vertexShader:f1e,fragmentShader:d1e,uniforms:{coefficient:{value:i},color:{value:new S3.Color(e)},power:{value:t},hollowRadius:{value:n}}})}function p1e(i,e){for(var t=i.clone(),n=new Float32Array(i.attributes.position.count*3),r=0,s=n.length;r<s;r++){var a=i.attributes.normal.array[r],o=i.attributes.position.array[r];n[r]=o+a*e}return t.setAttribute("position",new S3.BufferAttribute(n,3)),t}var m1e=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.color,a=s===void 0?"gold":s,o=r.size,u=o===void 0?2:o,c=r.coefficient,p=c===void 0?.5:c,g=r.power,y=g===void 0?1:g,q=r.hollowRadius,S=q===void 0?0:q,R=r.backside,M=R===void 0?!0:R;s9(this,e),n=r9(this,e);var E=p1e(t,u),U=A1e(p,a,y,S);return M&&(U.side=S3.BackSide),n.geometry=E,n.material=U,n}return o9(e,i),a9(e)}(S3.Mesh),Jl=window.THREE?window.THREE:{Color:Xt,Group:Da,LineBasicMaterial:vA,LineSegments:yN,Mesh:yi,MeshPhongMaterial:DN,SphereGeometry:Mu,SRGBColorSpace:nn,TextureLoader:mx},eI=ls({props:{globeImageUrl:{},bumpImageUrl:{},showGlobe:{default:!0,onChange:function(e,t){t.globeGroup.visible=!!e},triggerUpdate:!1},showGraticules:{default:!1,onChange:function(e,t){t.graticulesObj.visible=!!e},triggerUpdate:!1},showAtmosphere:{default:!0,onChange:function(e,t){t.atmosphereObj&&(t.atmosphereObj.visible=!!e)},triggerUpdate:!1},atmosphereColor:{default:"lightskyblue"},atmosphereAltitude:{default:.15},globeTileEngineUrl:{onChange:function(e,t){t.tileEngine.tileUrl=e}},globeTileEngineMaxLevel:{default:17,onChange:function(e,t){t.tileEngine.maxLevel=e},triggerUpdate:!1},updatePov:{onChange:function(e,t){t.tileEngine.updatePov(e)},triggerUpdate:!1},onReady:{default:function(){},triggerUpdate:!1}},methods:{globeMaterial:function(e,t){return t!==void 0?(e.globeObj.material=t||e.defaultGlobeMaterial,this):e.globeObj.material},_destructor:function(e){Vi(e.globeObj),Vi(e.tileEngine),Vi(e.graticulesObj)}},stateInit:function(){var e=new Jl.SphereGeometry(ir,75,75),t=new Jl.MeshPhongMaterial({color:0}),n=new Jl.Mesh(e,t);n.rotation.y=-Math.PI/2;var r=new oK(ir),s=new Jl.Group;s.__globeObjType="globe",s.add(n),s.add(r);var a=new Jl.LineSegments(new VP(TY(),ir,2),new Jl.LineBasicMaterial({color:"lightgrey",transparent:!0,opacity:.1}));return{globeGroup:s,globeObj:n,graticulesObj:a,defaultGlobeMaterial:t,tileEngine:r}},init:function(e,t){Vi(e),t.scene=e,t.scene.add(t.globeGroup),t.scene.add(t.graticulesObj),t.ready=!1},update:function(e,t){var n=e.globeObj.material;if(e.tileEngine.visible=!(e.globeObj.visible=!e.globeTileEngineUrl),t.hasOwnProperty("globeImageUrl")&&(e.globeImageUrl?new Jl.TextureLoader().load(e.globeImageUrl,function(s){s.colorSpace=Jl.SRGBColorSpace,n.map=s,n.color=null,n.needsUpdate=!0,!e.ready&&(e.ready=!0)&&setTimeout(e.onReady)}):!n.color&&(n.color=new Jl.Color(0))),t.hasOwnProperty("bumpImageUrl")&&(e.bumpImageUrl?e.bumpImageUrl&&new Jl.TextureLoader().load(e.bumpImageUrl,function(s){n.bumpMap=s,n.needsUpdate=!0}):(n.bumpMap=null,n.needsUpdate=!0)),(t.hasOwnProperty("atmosphereColor")||t.hasOwnProperty("atmosphereAltitude"))&&(e.atmosphereObj&&(e.scene.remove(e.atmosphereObj),Vi(e.atmosphereObj)),e.atmosphereColor&&e.atmosphereAltitude)){var r=e.atmosphereObj=new m1e(e.globeObj.geometry,{color:e.atmosphereColor,size:ir*e.atmosphereAltitude,hollowRadius:ir,coefficient:.1,power:3.5});r.visible=!!e.showAtmosphere,r.__globeObjType="atmosphere",e.scene.add(r)}!e.ready&&(!e.globeImageUrl||e.globeTileEngineUrl)&&(e.ready=!0,e.onReady())}}),Tu=function(e){return isNaN(e)?parseInt(an(e).toHex(),16):e},Ll=function(e){return e&&isNaN(e)?vh(e).opacity:1},K1=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r,s=1,a=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.eE+-]+)\s*\)$/.exec(e.trim().toLowerCase());if(a){var o=a.slice(1),u=lr(o,4),c=u[0],p=u[1],g=u[2],y=u[3];r=new Xt("rgb(".concat(+c,",").concat(+p,",").concat(+g,")")),s=Math.min(+y,1)}else r=new Xt(e);n&&r.convertLinearToSRGB();var q=r.toArray();return t?[].concat(Bi(q),[s]):q};function g1e(i,e,t){return i.opacity=e,i.transparent=e<1,i.depthWrite=e>=1,i}var aC=window.THREE?window.THREE:{BufferAttribute:_r};function wu(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float32Array;if(e===1)return new aC.BufferAttribute(new t(i),e);for(var n=new aC.BufferAttribute(new t(i.length*e),e),r=0,s=i.length;r<s;r++)n.set(i[r],r*e);return n}function _1e(i){for(var e=i.itemSize,t=[],n=0;n<i.count;n++)t.push(i.array.slice(n*e,(n+1)*e));return t}var P_=new WeakMap,M6=new WeakMap,R6=new WeakMap,Xa=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.dataBindAttr,a=s===void 0?"__data":s,o=r.objBindAttr,u=o===void 0?"__threeObj":o,c=r.removeDelay,p=c===void 0?0:c;return s9(this,e),n=r9(this,e),Ts(n,"scene",void 0),R_(n,P_,void 0),R_(n,M6,void 0),R_(n,R6,void 0),n.scene=t,C_(P_,n,a),C_(M6,n,u),C_(R6,n,p),n.onRemoveObj(function(){}),n}return o9(e,i),a9(e,[{key:"onCreateObj",value:function(n){var r=this;return N_(e,"onCreateObj",this)([function(s){var a=n(s);return s[np(M6,r)]=a,a[np(P_,r)]=s,r.scene.add(a),a}]),this}},{key:"onRemoveObj",value:function(n){var r=this;return N_(e,"onRemoveObj",this)([function(s,a){var o=N_(e,"getData",r)([s]);n(s,a);var u=function(){r.scene.remove(s),Vi(s),delete o[np(M6,r)]};np(R6,r)?setTimeout(u,np(R6,r)):u()}]),this}}])}(OZ),vl=window.THREE?window.THREE:{BufferGeometry:Ii,CylinderGeometry:w5,Matrix4:yn,Mesh:yi,MeshLambertMaterial:Oc,Object3D:ur,Vector3:le},oC=Object.assign({},Px),lC=oC.BufferGeometryUtils||oC,tI=ls({props:{pointsData:{default:[]},pointLat:{default:"lat"},pointLng:{default:"lng"},pointColor:{default:function(){return"#ffffaa"}},pointAltitude:{default:.1},pointRadius:{default:.25},pointResolution:{default:12,triggerUpdate:!1},pointsMerge:{default:!1},pointsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Vi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjPoint"})},update:function(e,t){var n=_t(e.pointLat),r=_t(e.pointLng),s=_t(e.pointAltitude),a=_t(e.pointRadius),o=_t(e.pointColor),u=new vl.CylinderGeometry(1,1,1,e.pointResolution);u.applyMatrix4(new vl.Matrix4().makeRotationX(Math.PI/2)),u.applyMatrix4(new vl.Matrix4().makeTranslation(0,0,-.5));var c=2*Math.PI*ir/360,p={};if(!e.pointsMerge&&t.hasOwnProperty("pointsMerge")&&Vi(e.scene),e.dataMapper.scene=e.pointsMerge?new vl.Object3D:e.scene,e.dataMapper.onCreateObj(q).onUpdateObj(S).digest(e.pointsData),e.pointsMerge){var g=e.pointsData.length?(lC.mergeGeometries||lC.mergeBufferGeometries)(e.pointsData.map(function(R){var M=e.dataMapper.getObj(R),E=M.geometry.clone();M.updateMatrix(),E.applyMatrix4(M.matrix);var U=K1(o(R));return E.setAttribute("color",wu(Array(E.getAttribute("position").count).fill(U),4)),E})):new vl.BufferGeometry,y=new vl.Mesh(g,new vl.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0}));y.__globeObjType="points",y.__data=e.pointsData,e.dataMapper.clear(),Vi(e.scene),e.scene.add(y)}function q(){var R=new vl.Mesh(u);return R.__globeObjType="point",R}function S(R,M){var E=function(j){var k=R.__currentTargetD=j,G=k.r,$=k.alt,te=k.lat,ne=k.lng;Object.assign(R.position,tl(te,ne));var ue=e.pointsMerge?new vl.Vector3(0,0,0):e.scene.localToWorld(new vl.Vector3(0,0,0));R.lookAt(ue),R.scale.x=R.scale.y=Math.min(30,G)*c,R.scale.z=Math.max($*ir,.1)},U={alt:+s(M),r:+a(M),lat:+n(M),lng:+r(M)},P=R.__currentTargetD||Object.assign({},U,{alt:-.001});if(Object.keys(U).some(function(z){return P[z]!==U[z]})&&(e.pointsMerge||!e.pointsTransitionDuration||e.pointsTransitionDuration<0?E(U):e.tweenGroup.add(new ia(P).to(U,e.pointsTransitionDuration).easing(Yr.Quadratic.InOut).onUpdate(E).start())),!e.pointsMerge){var O=o(M),F=O?Ll(O):0,I=!!F;R.visible=I,I&&(p.hasOwnProperty(O)||(p[O]=new vl.MeshLambertMaterial({color:Tu(O),transparent:F<1,opacity:F})),R.material=p[O])}}}}),nI=function(){return{uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:`
    uniform float dashTranslate; 

    attribute vec4 color;
    varying vec4 vColor;
    
    attribute float relDistance;
    varying float vRelDistance;

    void main() {
      // pass through colors and distances
      vColor = color;
      vRelDistance = relDistance + dashTranslate;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,fragmentShader:`
    uniform float dashOffset; 
    uniform float dashSize;
    uniform float gapSize; 
    
    varying vec4 vColor;
    varying float vRelDistance;
    
    void main() {
      // ignore pixels in the gap
      if (vRelDistance < dashOffset) discard;
      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;
    
      // set px color: [r, g, b, a], interpolated between vertices 
      gl_FragColor = vColor; 
    }
  `}},Ay=function(e){return e.uniforms.surfaceRadius={type:"float",value:0},e.vertexShader=(`attribute float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.vertexShader).replace("void main() {",["void main() {","vSurfaceRadius = surfaceRadius;","vPos = position;"].join(`
`)),e.fragmentShader=(`uniform float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.fragmentShader).replace("void main() {",["void main() {","if (length(vPos) < max(surfaceRadius, vSurfaceRadius)) discard;"].join(`
`)),e},v1e=function(e){return e.vertexShader=`
    attribute float r;
    
    const float PI = 3.1415926535897932384626433832795;
    float toRad(in float a) {
      return a * PI / 180.0;
    }
    
    vec3 Polar2Cartesian(in vec3 c) { // [lat, lng, r]
      float phi = toRad(90.0 - c.x);
      float theta = toRad(90.0 - c.y);
      float r = c.z;
      return vec3( // x,y,z
        r * sin(phi) * cos(theta),
        r * cos(phi),
        r * sin(phi) * sin(theta)
      );
    }
    
    vec2 Cartesian2Polar(in vec3 p) {
      float r = sqrt(p.x * p.x + p.y * p.y + p.z * p.z);
      float phi = acos(p.y / r);
      float theta = atan(p.z, p.x);
      return vec2( // lat,lng
        90.0 - phi * 180.0 / PI,
        90.0 - theta * 180.0 / PI - (theta < -PI / 2.0 ? 360.0 : 0.0)
      );
    }
    `.concat(e.vertexShader.replace("}",`                  
        vec3 pos = Polar2Cartesian(vec3(Cartesian2Polar(position), r));
        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
      }
    `),`
  `),e},ib=function(e,t){return e.onBeforeCompile=function(n){e.userData.shader=t(n)},e},y1e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(r){return r};if(e.userData.shader)t(e.userData.shader.uniforms);else{var n=e.onBeforeCompile;e.onBeforeCompile=function(r){n(r),t(r.uniforms)}}},x1e=["stroke"],yl=window.THREE?window.THREE:{BufferGeometry:Ii,CubicBezierCurve3:bN,Curve:Bl,Group:Da,Line:S5,Mesh:yi,NormalBlending:ka,ShaderMaterial:Ga,TubeGeometry:px,Vector3:le},q1e=iA.default||iA,iI=ls({props:{arcsData:{default:[]},arcStartLat:{default:"startLat"},arcStartLng:{default:"startLng"},arcEndLat:{default:"endLat"},arcEndLng:{default:"endLng"},arcColor:{default:function(){return"#ffffaa"}},arcAltitude:{},arcAltitudeAutoScale:{default:.5},arcStroke:{},arcCurveResolution:{default:64,triggerUpdate:!1},arcCircularResolution:{default:6,triggerUpdate:!1},arcDashLength:{default:1},arcDashGap:{default:0},arcDashInitialGap:{default:0},arcDashAnimateTime:{default:0},arcsTransitionDuration:{default:1e3,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;e.sharedMaterial.dispose(),(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new q1e,sharedMaterial:new yl.ShaderMaterial(Ci(Ci({},nI()),{},{transparent:!0,blending:yl.NormalBlending}))}},init:function(e,t){Vi(e),t.scene=e,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjArc"}).onCreateObj(function(){var n=new yl.Group;return n.__globeObjType="arc",n}),t.ticker.onTick.add(function(n,r){t.dataMapper.entries().map(function(s){var a=lr(s,2),o=a[1];return o}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var a=s.children[0],o=a.__dashAnimateStep*r,u=a.material.uniforms.dashTranslate.value%1e9;a.material.uniforms.dashTranslate.value=u+o})})},update:function(e){var t=_t(e.arcStartLat),n=_t(e.arcStartLng),r=_t(e.arcEndLat),s=_t(e.arcEndLng),a=_t(e.arcAltitude),o=_t(e.arcAltitudeAutoScale),u=_t(e.arcStroke),c=_t(e.arcColor),p=_t(e.arcDashLength),g=_t(e.arcDashGap),y=_t(e.arcDashInitialGap),q=_t(e.arcDashAnimateTime);e.dataMapper.onUpdateObj(function(E,U){var P=u(U),O=P!=null;if(!E.children.length||O!==(E.children[0].type==="Mesh")){Vi(E);var F=O?new yl.Mesh:new yl.Line(new yl.BufferGeometry);F.material=e.sharedMaterial.clone(),E.add(F)}var I=E.children[0];Object.assign(I.material.uniforms,{dashSize:{value:p(U)},gapSize:{value:g(U)},dashOffset:{value:y(U)}});var z=q(U);I.__dashAnimateStep=z>0?1e3/z:0;var j=R(c(U),e.arcCurveResolution,O?e.arcCircularResolution+1:1),k=M(e.arcCurveResolution,O?e.arcCircularResolution+1:1,!0);I.geometry.setAttribute("color",j),I.geometry.setAttribute("relDistance",k);var G=function(ue){var ae=E.__currentTargetD=ue,W=ae.stroke,J=o1e(ae,x1e),re=S(J);O?(I.geometry&&I.geometry.dispose(),I.geometry=new yl.TubeGeometry(re,e.arcCurveResolution,W/2,e.arcCircularResolution),I.geometry.setAttribute("color",j),I.geometry.setAttribute("relDistance",k)):I.geometry.setFromPoints(re.getPoints(e.arcCurveResolution))},$={stroke:P,alt:a(U),altAutoScale:+o(U),startLat:+t(U),startLng:+n(U),endLat:+r(U),endLng:+s(U)},te=E.__currentTargetD||Object.assign({},$,{altAutoScale:-.001});Object.keys($).some(function(ne){return te[ne]!==$[ne]})&&(!e.arcsTransitionDuration||e.arcsTransitionDuration<0?G($):e.tweenGroup.add(new ia(te).to($,e.arcsTransitionDuration).easing(Yr.Quadratic.InOut).onUpdate(G).start()))}).digest(e.arcsData);function S(E){var U=E.alt,P=E.altAutoScale,O=E.startLat,F=E.startLng,I=E.endLat,z=E.endLng,j=function(me){var Me=lr(me,3),Be=Me[0],be=Me[1],Fe=Me[2],$e=tl(be,Be,Fe),ht=$e.x,wt=$e.y,kt=$e.z;return new yl.Vector3(ht,wt,kt)},k=[F,O],G=[z,I],$=U;if($==null&&($=Q1(k,G)/2*P),$){var te=Ex(k,G),ne=[.25,.75].map(function(Y){return[].concat(Bi(te(Y)),[$*1.5])}),ue=lr(ne,2),ae=ue[0],W=ue[1],J=eb(yl.CubicBezierCurve3,Bi([k,ae,W,G].map(j)));return J}else{var re=.001;return ge.apply(void 0,Bi([[].concat(k,[re]),[].concat(G,[re])].map(j)))}function ge(Y,me){var Me=Y.angleTo(me),Be=Me===0?function(){return Y.clone()}:function(Fe){return new yl.Vector3().addVectors(Y.clone().multiplyScalar(Math.sin((1-Fe)*Me)),me.clone().multiplyScalar(Math.sin(Fe*Me))).divideScalar(Math.sin(Me))},be=new yl.Curve;return be.getPoint=Be,be}}function R(E,U){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=U+1,F;if(E instanceof Array||E instanceof Function){var I=E instanceof Array?Ec().domain(E.map(function(ne,ue){return ue/(E.length-1)})).range(E):E;F=function(ue){return K1(I(ue),!0,!0)}}else{var z=K1(E,!0,!0);F=function(){return z}}for(var j=[],k=0,G=O;k<G;k++)for(var $=F(k/(G-1)),te=0;te<P;te++)j.push($);return wu(j,4)}function M(E){for(var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,O=E+1,F=[],I=0,z=O;I<z;I++)for(var j=I/(z-1),k=0;k<U;k++)F.push(j);return P&&F.reverse(),wu(F,1)}}}),S1=window.THREE?window.THREE:{BufferGeometry:Ii,DoubleSide:Qr,Mesh:yi,MeshLambertMaterial:Oc,Object3D:ur},uC=Object.assign({},Px),cC=uC.BufferGeometryUtils||uC,rI=ls({props:{hexBinPointsData:{default:[]},hexBinPointLat:{default:"lat"},hexBinPointLng:{default:"lng"},hexBinPointWeight:{default:1},hexBinResolution:{default:4},hexMargin:{default:.2},hexTopCurvatureResolution:{default:5},hexTopColor:{default:function(){return"#ffffaa"}},hexSideColor:{default:function(){return"#ffffaa"}},hexAltitude:{default:function(e){var t=e.sumWeight;return t*.01}},hexBinMerge:{default:!1},hexTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Vi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjHexbin"})},update:function(e,t){var n=_t(e.hexBinPointLat),r=_t(e.hexBinPointLng),s=_t(e.hexBinPointWeight),a=_t(e.hexAltitude),o=_t(e.hexTopColor),u=_t(e.hexSideColor),c=_t(e.hexMargin),p=ree(e.hexBinPointsData.map(function(U){return Ci(Ci({},U),{},{h3Idx:Fee(n(U),r(U),e.hexBinResolution)})}),"h3Idx"),g=Object.entries(p).map(function(U){var P=lr(U,2),O=P[0],F=P[1];return{h3Idx:O,points:F,sumWeight:F.reduce(function(I,z){return I+ +s(z)},0)}}),y={};if(!e.hexBinMerge&&t.hasOwnProperty("hexBinMerge")&&Vi(e.scene),e.dataMapper.scene=e.hexBinMerge?new S1.Object3D:e.scene,e.dataMapper.id(function(U){return U.h3Idx}).onCreateObj(M).onUpdateObj(E).digest(g),e.hexBinMerge){var q=g.length?(cC.mergeGeometries||cC.mergeBufferGeometries)(g.map(function(U){var P=e.dataMapper.getObj(U),O=P.geometry.toNonIndexed();P.updateMatrix(),O.applyMatrix4(P.matrix);var F=K1(o(U)),I=K1(u(U)),z=O.getAttribute("position").count,j=O.groups[0].count;return O.setAttribute("color",wu(Bi(new Array(z)).map(function(k,G){return G>=j?F:I}),4)),O})):new S1.BufferGeometry,S=new S1.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0,side:S1.DoubleSide});S.onBeforeCompile=function(U){S.userData.shader=Ay(U)};var R=new S1.Mesh(q,S);R.__globeObjType="hexBinPoints",R.__data=g,e.dataMapper.clear(),Vi(e.scene),e.scene.add(R)}function M(U){var P=new S1.Mesh;P.__hexCenter=lD(U.h3Idx),P.__hexGeoJson=uD(U.h3Idx,!0).reverse();var O=P.__hexCenter[1];return P.__hexGeoJson.forEach(function(F){var I=F[0];Math.abs(O-I)>170&&(F[0]+=O>I?360:-360)}),P.__globeObjType="hexbin",P}function E(U,P){var O=function(J,re,ge){return J-(J-re)*ge},F=Math.max(0,Math.min(1,+c(P))),I=lr(U.__hexCenter,2),z=I[0],j=I[1],k=F===0?U.__hexGeoJson:U.__hexGeoJson.map(function(W){var J=lr(W,2),re=J[0],ge=J[1];return[[re,j],[ge,z]].map(function(Y){var me=lr(Y,2),Me=me[0],Be=me[1];return O(Me,Be,F)})}),G=e.hexTopCurvatureResolution;U.geometry&&U.geometry.dispose(),U.geometry=new Bx([k],0,ir,!1,!0,!0,G);var $={alt:+a(P)},te=function(J){var re=U.__currentTargetD=J,ge=re.alt;U.scale.x=U.scale.y=U.scale.z=1+ge;var Y=ir/(ge+1);U.geometry.setAttribute("surfaceRadius",wu(Array(U.geometry.getAttribute("position").count).fill(Y),1))},ne=U.__currentTargetD||Object.assign({},$,{alt:-.001});if(Object.keys($).some(function(W){return ne[W]!==$[W]})&&(e.hexBinMerge||!e.hexTransitionDuration||e.hexTransitionDuration<0?te($):e.tweenGroup.add(new ia(ne).to($,e.hexTransitionDuration).easing(Yr.Quadratic.InOut).onUpdate(te).start())),!e.hexBinMerge){var ue=u(P),ae=o(P);[ue,ae].forEach(function(W){if(!y.hasOwnProperty(W)){var J=Ll(W);y[W]=ib(new S1.MeshLambertMaterial({color:Tu(W),transparent:J<1,opacity:J,side:S1.DoubleSide}),Ay)}}),U.material=[ue,ae].map(function(W){return y[W]})}}}}),sI=function(e){return e*e},vc=function(e){return e*Math.PI/180};function b1e(i,e){var t=Math.sqrt,n=Math.cos,r=function(p){return sI(Math.sin(p/2))},s=vc(i[1]),a=vc(e[1]),o=vc(i[0]),u=vc(e[0]);return 2*Math.asin(t(r(a-s)+n(s)*n(a)*r(u-o)))}var S1e=Math.sqrt(2*Math.PI);function T1e(i,e){return Math.exp(-sI(i/e)/2)/(e*S1e)}var w1e=function(e){var t=lr(e,2),n=t[0],r=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=a.lngAccessor,u=o===void 0?function(M){return M[0]}:o,c=a.latAccessor,p=c===void 0?function(M){return M[1]}:c,g=a.weightAccessor,y=g===void 0?function(){return 1}:g,q=a.bandwidth,S=[n,r],R=q*Math.PI/180;return tQ(s.map(function(M){var E=y(M);if(!E)return 0;var U=b1e(S,[u(M),p(M)]);return T1e(U,R)*E}))},E1e=function(){var i=e1e(fy().mark(function e(t){var n,r,s,a,o,u,c,p,g,y,q,S,R,M,E,U,P,O,F,I,z,j,k,G,$,te,ne,ue,ae,W,J,re,ge,Y,me,Me,Be,be,Fe,$e,ht=arguments;return fy().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(r=ht.length>1&&ht[1]!==void 0?ht[1]:[],s=ht.length>2&&ht[2]!==void 0?ht[2]:{},a=s.lngAccessor,o=a===void 0?function(Ct){return Ct[0]}:a,u=s.latAccessor,c=u===void 0?function(Ct){return Ct[1]}:u,p=s.weightAccessor,g=p===void 0?function(){return 1}:p,y=s.bandwidth,(n=navigator)!==null&&n!==void 0&&n.gpu){kt.next=5;break}return console.warn("WebGPU not enabled in browser. Please consider enabling it to improve performance."),kt.abrupt("return",t.map(function(Ct){return w1e(Ct,r,{lngAccessor:o,latAccessor:c,weightAccessor:g,bandwidth:y})}));case 5:return q=4,S=Nce,R=Pce,M=Vce,E=Gce,U=Bce,P=Ice,O=Dce,F=zce,I=kce,z=Uce,j=Lce,k=Oce,G=Fce,$=E(new o8(new Float32Array(t.flat().map(vc)),2),"vec2",t.length),te=E(new o8(new Float32Array(r.map(function(Ct){return[vc(o(Ct)),vc(c(Ct)),g(Ct)]}).flat()),3),"vec3",r.length),ne=new o8(t.length,1),ue=E(ne,"float",t.length),ae=U(Math.PI),W=F(ae.mul(2)),J=function(Kt){return Kt.mul(Kt)},re=function(Kt){return J(I(Kt.div(2)))},ge=function(Kt,Bn){var _n=U(Kt[1]),ye=U(Bn[1]),gi=U(Kt[0]),ut=U(Bn[0]);return U(2).mul(j(F(re(ye.sub(_n)).add(z(_n).mul(z(ye)).mul(re(ut.sub(gi)))))))},Y=function(Kt,Bn){return k(G(J(Kt.div(Bn)).div(2))).div(Bn.mul(W))},me=M(vc(y)),Me=M(vc(y*q)),Be=M(r.length),be=S(function(){var Ct=$.element(P),Kt=ue.element(P);Kt.assign(0),O(Be,function(Bn){var _n=Bn.i,ye=te.element(_n),gi=ye.z;R(gi,function(){var ut=ge(ye.xy,Ct.xy);R(ut&&ut.lessThan(Me),function(){Kt.addAssign(Y(ut,me).mul(gi))})})})}),Fe=be().compute(t.length),$e=new WB,kt.next=25,$e.computeAsync(Fe);case 25:return kt.t0=Array,kt.t1=Float32Array,kt.next=29,$e.getArrayBufferAsync(ne);case 29:return kt.t2=kt.sent,kt.t3=new kt.t1(kt.t2),kt.abrupt("return",kt.t0.from.call(kt.t0,kt.t3));case 32:case"end":return kt.stop()}},e)}));return function(t){return i.apply(this,arguments)}}(),C6=window.THREE?window.THREE:{Mesh:yi,MeshLambertMaterial:Oc,SphereGeometry:Mu},M1e=3.5,R1e=.1,hC=100,C1e=function(e){var t=vh(zee(e));return t.opacity=Math.cbrt(e),t.formatRgb()},aI=ls({props:{heatmapsData:{default:[]},heatmapPoints:{default:function(e){return e}},heatmapPointLat:{default:function(e){return e[0]}},heatmapPointLng:{default:function(e){return e[1]}},heatmapPointWeight:{default:1},heatmapBandwidth:{default:2.5},heatmapColorFn:{default:function(){return C1e}},heatmapColorSaturation:{default:1.5},heatmapBaseAltitude:{default:.01},heatmapTopAltitude:{},heatmapsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Vi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjHeatmap"}).onCreateObj(function(){var s=new C6.Mesh(new C6.SphereGeometry(ir),ib(new C6.MeshLambertMaterial({vertexColors:!0,transparent:!0}),v1e));return s.__globeObjType="heatmap",s})},update:function(e){var t=_t(e.heatmapPoints),n=_t(e.heatmapPointLat),r=_t(e.heatmapPointLng),s=_t(e.heatmapPointWeight),a=_t(e.heatmapBandwidth),o=_t(e.heatmapColorFn),u=_t(e.heatmapColorSaturation),c=_t(e.heatmapBaseAltitude),p=_t(e.heatmapTopAltitude);e.dataMapper.onUpdateObj(function(g,y){var q=a(y),S=o(y),R=u(y),M=c(y),E=p(y),U=t(y).map(function(z){var j=n(z),k=r(z),G=tl(j,k),$=G.x,te=G.y,ne=G.z;return{x:$,y:te,z:ne,lat:j,lng:k,weight:s(z)}}),P=Math.max(R1e,q/M1e),O=Math.ceil(360/(P||-1));g.geometry.parameters.widthSegments!==O&&(g.geometry.dispose(),g.geometry=new C6.SphereGeometry(ir,O,O/2));var F=_1e(g.geometry.getAttribute("position")),I=F.map(function(z){var j=lr(z,3),k=j[0],G=j[1],$=j[2],te=JB({x:k,y:G,z:$}),ne=te.lng,ue=te.lat;return[ne,ue]});E1e(I,U,{latAccessor:function(j){return j.lat},lngAccessor:function(j){return j.lng},weightAccessor:function(j){return j.weight},bandwidth:q}).then(function(z){var j=Bi(new Array(hC)).map(function(te,ne){return K1(S(ne/(hC-1)))}),k=function(ne){var ue=g.__currentTargetD=ne,ae=ue.kdeVals,W=ue.topAlt,J=ue.saturation,re=ZX(ae.map(Math.abs))||1e-15,ge=uP([0,re/J],j);g.geometry.setAttribute("color",wu(ae.map(function(me){return ge(Math.abs(me))}),4));var Y=Ec([0,re],[ir*(1+M),ir*(1+(W||M))]);g.geometry.setAttribute("r",wu(ae.map(Y)))},G={kdeVals:z,topAlt:E,saturation:R},$=g.__currentTargetD||Object.assign({},G,{kdeVals:z.map(function(){return 0}),topAlt:E&&M,saturation:.5});$.kdeVals.length!==z.length&&($.kdeVals=z.slice()),Object.keys(G).some(function(te){return $[te]!==G[te]})&&(!e.heatmapsTransitionDuration||e.heatmapsTransitionDuration<0?k(G):e.tweenGroup.add(new ia($).to(G,e.heatmapsTransitionDuration).easing(Yr.Quadratic.InOut).onUpdate(k).start()))})}).digest(e.heatmapsData)}}),T1=window.THREE?window.THREE:{DoubleSide:Qr,Group:Da,LineBasicMaterial:vA,LineSegments:yN,Mesh:yi,MeshBasicMaterial:jo},oI=ls({props:{polygonsData:{default:[]},polygonGeoJsonGeometry:{default:"geometry"},polygonSideColor:{default:function(){return"#ffffaa"}},polygonSideMaterial:{},polygonCapColor:{default:function(){return"#ffffaa"}},polygonCapMaterial:{},polygonStrokeColor:{},polygonAltitude:{default:.01},polygonCapCurvatureResolution:{default:5},polygonsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Vi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjPolygon"}).id(function(s){return s.id}).onCreateObj(function(){var s=new T1.Group;return s.__defaultSideMaterial=ib(new T1.MeshBasicMaterial({side:T1.DoubleSide,depthWrite:!0}),Ay),s.__defaultCapMaterial=new T1.MeshBasicMaterial({side:T1.DoubleSide,depthWrite:!0}),s.add(new T1.Mesh(void 0,[s.__defaultSideMaterial,s.__defaultCapMaterial])),s.add(new T1.LineSegments(void 0,new T1.LineBasicMaterial)),s.__globeObjType="polygon",s})},update:function(e){var t=_t(e.polygonGeoJsonGeometry),n=_t(e.polygonAltitude),r=_t(e.polygonCapCurvatureResolution),s=_t(e.polygonCapColor),a=_t(e.polygonCapMaterial),o=_t(e.polygonSideColor),u=_t(e.polygonSideMaterial),c=_t(e.polygonStrokeColor),p=[];e.polygonsData.forEach(function(g){var y={data:g,capColor:s(g),capMaterial:a(g),sideColor:o(g),sideMaterial:u(g),strokeColor:c(g),altitude:+n(g),capCurvatureResolution:+r(g)},q=t(g),S=g.__id||"".concat(Math.round(Math.random()*1e9));g.__id=S,q.type==="Polygon"?p.push(Ci({id:"".concat(S,"_0"),coords:q.coordinates},y)):q.type==="MultiPolygon"?p.push.apply(p,Bi(q.coordinates.map(function(R,M){return Ci({id:"".concat(S,"_").concat(M),coords:R},y)}))):console.warn("Unsupported GeoJson geometry type: ".concat(q.type,". Skipping geometry..."))}),e.dataMapper.onUpdateObj(function(g,y){var q=y.coords,S=y.capColor,R=y.capMaterial,M=y.sideColor,E=y.sideMaterial,U=y.strokeColor,P=y.altitude,O=y.capCurvatureResolution,F=lr(g.children,2),I=F[0],z=F[1],j=!!U;z.visible=j;var k=!!(S||R),G=!!(M||E);N1e(I.geometry.parameters||{},{polygonGeoJson:q,curvatureResolution:O,closedTop:k,includeSides:G})||(I.geometry&&I.geometry.dispose(),I.geometry=new Bx(q,0,ir,!1,k,G,O)),j&&(!z.geometry.parameters||z.geometry.parameters.geoJson.coordinates!==q||z.geometry.parameters.resolution!==O)&&(z.geometry&&z.geometry.dispose(),z.geometry=new VP({type:"Polygon",coordinates:q},ir,O));var $=G?0:-1,te=k?G?1:0:-1;if($>=0&&(I.material[$]=E||g.__defaultSideMaterial),te>=0&&(I.material[te]=R||g.__defaultCapMaterial),[[!E&&M,$],[!R&&S,te]].forEach(function(re){var ge=lr(re,2),Y=ge[0],me=ge[1];if(!(!Y||me<0)){var Me=I.material[me],Be=Ll(Y);Me.color.set(Tu(Y)),Me.transparent=Be<1,Me.opacity=Be}}),j){var ne=z.material,ue=Ll(U);ne.color.set(Tu(U)),ne.transparent=ue<1,ne.opacity=ue}var ae={alt:P},W=function(ge){var Y=g.__currentTargetD=ge,me=Y.alt;I.scale.x=I.scale.y=I.scale.z=1+me,j&&(z.scale.x=z.scale.y=z.scale.z=1+me+1e-4),y1e(g.__defaultSideMaterial,function(Me){return Me.surfaceRadius.value=ir/(me+1)})},J=g.__currentTargetD||Object.assign({},ae,{alt:-.001});Object.keys(ae).some(function(re){return J[re]!==ae[re]})&&(!e.polygonsTransitionDuration||e.polygonsTransitionDuration<0||J.alt===ae.alt?W(ae):e.tweenGroup.add(new ia(J).to(ae,e.polygonsTransitionDuration).easing(Yr.Quadratic.InOut).onUpdate(W).start()))}).digest(p)}});function N1e(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return function(n,r){return n===r}};return Object.entries(e).every(function(n){var r=lr(n,2),s=r[0],a=r[1];return i.hasOwnProperty(s)&&t(s)(i[s],a)})}var Wf=window.THREE?window.THREE:{BufferGeometry:Ii,DoubleSide:Qr,Mesh:yi,MeshLambertMaterial:Oc,Vector3:le},fC=Object.assign({},Px),dC=fC.BufferGeometryUtils||fC,lI=ls({props:{hexPolygonsData:{default:[]},hexPolygonGeoJsonGeometry:{default:"geometry"},hexPolygonColor:{default:function(){return"#ffffaa"}},hexPolygonAltitude:{default:.001},hexPolygonResolution:{default:3},hexPolygonMargin:{default:.2},hexPolygonUseDots:{default:!1},hexPolygonCurvatureResolution:{default:5},hexPolygonDotResolution:{default:12},hexPolygonsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Vi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjHexPolygon"}).onCreateObj(function(){var s=new Wf.Mesh(void 0,new Wf.MeshLambertMaterial({side:Wf.DoubleSide}));return s.__globeObjType="hexPolygon",s})},update:function(e){var t=_t(e.hexPolygonGeoJsonGeometry),n=_t(e.hexPolygonColor),r=_t(e.hexPolygonAltitude),s=_t(e.hexPolygonResolution),a=_t(e.hexPolygonMargin),o=_t(e.hexPolygonUseDots),u=_t(e.hexPolygonCurvatureResolution),c=_t(e.hexPolygonDotResolution);e.dataMapper.onUpdateObj(function(p,g){var y=t(g),q=s(g),S=r(g),R=Math.max(0,Math.min(1,+a(g))),M=o(g),E=u(g),U=c(g),P=n(g),O=Ll(P);p.material.color.set(Tu(P)),p.material.transparent=O<1,p.material.opacity=O;var F={alt:S,margin:R,curvatureResolution:E},I={geoJson:y,h3Res:q},z=p.__currentTargetD||Object.assign({},F,{alt:-.001}),j=p.__currentMemD||I;if(Object.keys(F).some(function(te){return z[te]!==F[te]})||Object.keys(I).some(function(te){return j[te]!==I[te]})){p.__currentMemD=I;var k=[];y.type==="Polygon"?FM(y.coordinates,q,!0).forEach(function(te){return k.push(te)}):y.type==="MultiPolygon"?y.coordinates.forEach(function(te){return FM(te,q,!0).forEach(function(ne){return k.push(ne)})}):console.warn("Unsupported GeoJson geometry type: ".concat(y.type,". Skipping geometry..."));var G=k.map(function(te){var ne=lD(te),ue=uD(te,!0).reverse(),ae=ne[1];return ue.forEach(function(W){var J=W[0];Math.abs(ae-J)>170&&(W[0]+=ae>J?360:-360)}),{h3Idx:te,hexCenter:ne,hexGeoJson:ue}}),$=function(ne){var ue=p.__currentTargetD=ne,ae=ue.alt,W=ue.margin,J=ue.curvatureResolution;p.geometry&&p.geometry.dispose(),p.geometry=G.length?(dC.mergeGeometries||dC.mergeBufferGeometries)(G.map(function(re){var ge=lr(re.hexCenter,2),Y=ge[0],me=ge[1];if(M){var Me=tl(Y,me,ae),Be=tl(re.hexGeoJson[0][1],re.hexGeoJson[0][0],ae),be=.85*(1-W)*new Wf.Vector3(Me.x,Me.y,Me.z).distanceTo(new Wf.Vector3(Be.x,Be.y,Be.z)),Fe=new T5(be,U);return Fe.rotateX(Q0(-Y)),Fe.rotateY(Q0(me)),Fe.translate(Me.x,Me.y,Me.z),Fe}else{var $e=function(kt,Ct,Kt){return kt-(kt-Ct)*Kt},ht=W===0?re.hexGeoJson:re.hexGeoJson.map(function(wt){var kt=lr(wt,2),Ct=kt[0],Kt=kt[1];return[[Ct,me],[Kt,Y]].map(function(Bn){var _n=lr(Bn,2),ye=_n[0],gi=_n[1];return $e(ye,gi,W)})});return new Bx([ht],ir,ir*(1+ae),!1,!0,!1,J)}})):new Wf.BufferGeometry};!e.hexPolygonsTransitionDuration||e.hexPolygonsTransitionDuration<0?$(F):e.tweenGroup.add(new ia(z).to(F,e.hexPolygonsTransitionDuration).easing(Yr.Quadratic.InOut).onUpdate($).start())}}).digest(e.hexPolygonsData)}}),P1e=window.THREE?window.THREE:{Vector3:le};function D1e(i,e){var t=function(a,o){var u=a[a.length-1];return[].concat(Bi(a),Bi(Array(o-a.length).fill(u)))},n=Math.max(i.length,e.length),r=gQ.apply(void 0,Bi([i,e].map(function(s){return s.map(function(a){var o=a.x,u=a.y,c=a.z;return[o,u,c]})}).map(function(s){return t(s,n)})));return function(s){return s===0?i:s===1?e:r(s).map(function(a){var o=lr(a,3),u=o[0],c=o[1],p=o[2];return new P1e.Vector3(u,c,p)})}}var B0=window.THREE?window.THREE:{BufferGeometry:Ii,Color:Xt,Group:Da,Line:S5,NormalBlending:ka,ShaderMaterial:Ga,Vector3:le},L1e=iA.default||iA,uI=ls({props:{pathsData:{default:[]},pathPoints:{default:function(e){return e}},pathPointLat:{default:function(e){return e[0]}},pathPointLng:{default:function(e){return e[1]}},pathPointAlt:{default:.001},pathResolution:{default:2},pathColor:{default:function(){return"#ffffaa"}},pathStroke:{},pathDashLength:{default:1},pathDashGap:{default:0},pathDashInitialGap:{default:0},pathDashAnimateTime:{default:0},pathTransitionDuration:{default:1e3,triggerUpdate:!1},rendererSize:{}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new L1e,sharedMaterial:new B0.ShaderMaterial(Ci(Ci({},nI()),{},{transparent:!0,blending:B0.NormalBlending}))}},init:function(e,t){Vi(e),t.scene=e,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjPath"}).onCreateObj(function(){var n=new B0.Group;return n.__globeObjType="path",n}),t.ticker.onTick.add(function(n,r){t.dataMapper.entries().map(function(s){var a=lr(s,2),o=a[1];return o}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var a=s.children[0],o=a.__dashAnimateStep*r;if(a.type==="Line"){var u=a.material.uniforms.dashTranslate.value%1e9;a.material.uniforms.dashTranslate.value=u+o}else if(a.type==="Line2"){for(var c=a.material.dashOffset-o,p=a.material.dashSize+a.material.gapSize;c<=-p;)c+=p;a.material.dashOffset=c}})})},update:function(e){var t=_t(e.pathPoints),n=_t(e.pathPointLat),r=_t(e.pathPointLng),s=_t(e.pathPointAlt),a=_t(e.pathStroke),o=_t(e.pathColor),u=_t(e.pathDashLength),c=_t(e.pathDashGap),p=_t(e.pathDashInitialGap),g=_t(e.pathDashAnimateTime);e.dataMapper.onUpdateObj(function(M,E){var U=a(E),P=U!=null;if(!M.children.length||P===(M.children[0].type==="Line")){Vi(M);var O=P?new $ce(new XB,new Jq):new B0.Line(new B0.BufferGeometry,e.sharedMaterial.clone());M.add(O)}var F=M.children[0],I=q(t(E),n,r,s,e.pathResolution),z=g(E);if(F.__dashAnimateStep=z>0?1e3/z:0,P){F.material.resolution=e.rendererSize;{var G=u(E),$=c(E),te=p(E);F.material.dashed=$>0,F.material.dashed?F.material.defines.USE_DASH="":delete F.material.defines.USE_DASH,F.material.dashed&&(F.material.dashScale=1/y(I),F.material.dashSize=G,F.material.gapSize=$,F.material.dashOffset=-te)}{var ne=o(E);if(ne instanceof Array){var ue=S(o(E),I.length-1,1,!1);F.geometry.setColors(ue.array),F.material.vertexColors=!0}else{var ae=ne,W=Ll(ae);F.material.color=new B0.Color(Tu(ae)),F.material.transparent=W<1,F.material.opacity=W,F.material.vertexColors=!1}}F.material.needsUpdate=!0}else{Object.assign(F.material.uniforms,{dashSize:{value:u(E)},gapSize:{value:c(E)},dashOffset:{value:p(E)}});var j=S(o(E),I.length),k=R(I.length,1,!0);F.geometry.setAttribute("color",j),F.geometry.setAttribute("relDistance",k)}var J=D1e(M.__currentTargetD&&M.__currentTargetD.points||[I[0]],I),re=function(Me){var Be=M.__currentTargetD=Me,be=Be.stroke,Fe=Be.interpolK,$e=M.__currentTargetD.points=J(Fe);if(P){var ht;F.geometry.setPositions((ht=[]).concat.apply(ht,Bi($e.map(function(wt){var kt=wt.x,Ct=wt.y,Kt=wt.z;return[kt,Ct,Kt]})))),F.material.linewidth=be,F.material.dashed&&F.computeLineDistances()}else F.geometry.setFromPoints($e),F.geometry.computeBoundingSphere()},ge={stroke:U,interpolK:1},Y=Object.assign({},M.__currentTargetD||ge,{interpolK:0});Object.keys(ge).some(function(me){return Y[me]!==ge[me]})&&(!e.pathTransitionDuration||e.pathTransitionDuration<0?re(ge):e.tweenGroup.add(new ia(Y).to(ge,e.pathTransitionDuration).easing(Yr.Quadratic.InOut).onUpdate(re).start()))}).digest(e.pathsData);function y(M){var E=0,U;return M.forEach(function(P){U&&(E+=U.distanceTo(P)),U=P}),E}function q(M,E,U,P,O){var F=function(k,G,$){for(var te=[],ne=1;ne<=$;ne++)te.push(k+(G-k)*ne/($+1));return te},I=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,$=[],te=null;return k.forEach(function(ne){if(te){for(;Math.abs(te[1]-ne[1])>180;)te[1]+=360*(te[1]<ne[1]?1:-1);var ue=Math.sqrt(Math.pow(ne[0]-te[0],2)+Math.pow(ne[1]-te[1],2));if(ue>G)for(var ae=Math.floor(ue/G),W=F(te[0],ne[0],ae),J=F(te[1],ne[1],ae),re=F(te[2],ne[2],ae),ge=0,Y=W.length;ge<Y;ge++)$.push([W[ge],J[ge],re[ge]])}$.push(te=ne)}),$},z=function(k){var G=lr(k,3),$=G[0],te=G[1],ne=G[2],ue=tl($,te,ne),ae=ue.x,W=ue.y,J=ue.z;return new B0.Vector3(ae,W,J)};return I(M.map(function(j){return[E(j),U(j),P(j)]}),O).map(z)}function S(M,E){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,O=E+1,F;if(M instanceof Array||M instanceof Function){var I=M instanceof Array?Ec().domain(M.map(function(ne,ue){return ue/(M.length-1)})).range(M):M;F=function(ue){return K1(I(ue),P,!0)}}else{var z=K1(M,P,!0);F=function(){return z}}for(var j=[],k=0,G=O;k<G;k++)for(var $=F(k/(G-1)),te=0;te<U;te++)j.push($);return wu(j,P?4:3)}function R(M){for(var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,P=M+1,O=[],F=0,I=P;F<I;F++)for(var z=F/(I-1),j=0;j<E;j++)O.push(z);return U&&O.reverse(),wu(O,1)}}}),N6=window.THREE?window.THREE:{Euler:ks,Mesh:yi,MeshLambertMaterial:Oc,SphereGeometry:Mu},cI=ls({props:{tilesData:{default:[]},tileLat:{default:"lat"},tileLng:{default:"lng"},tileAltitude:{default:.01},tileWidth:{default:1},tileHeight:{default:1},tileUseGlobeProjection:{default:!0},tileMaterial:{default:function(){return new N6.MeshLambertMaterial({color:"#ffbb88",opacity:.4,transparent:!0})}},tileCurvatureResolution:{default:5},tilesTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Vi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjTile"}).onCreateObj(function(){var s=new N6.Mesh;return s.__globeObjType="tile",s})},update:function(e){var t=_t(e.tileLat),n=_t(e.tileLng),r=_t(e.tileAltitude),s=_t(e.tileWidth),a=_t(e.tileHeight),o=_t(e.tileUseGlobeProjection),u=_t(e.tileMaterial),c=_t(e.tileCurvatureResolution);e.dataMapper.onUpdateObj(function(p,g){p.material=u(g);var y=o(g),q=c(g),S=function(U){var P=p.__currentTargetD=U,O=P.lat,F=P.lng,I=P.alt,z=P.width,j=P.height,k=$f(F),G=$f(-O);p.geometry&&p.geometry.dispose(),p.geometry=new N6.SphereGeometry(ir*(1+I),Math.ceil(z/(q||-1)),Math.ceil(j/(q||-1)),$f(90-z/2)+(y?k:0),$f(z),$f(90-j/2)+(y?G:0),$f(j)),y||p.setRotationFromEuler(new N6.Euler(G,k,0,"YXZ"))},R={lat:+t(g),lng:+n(g),alt:+r(g),width:+s(g),height:+a(g)},M=p.__currentTargetD||Object.assign({},R,{width:0,height:0});Object.keys(R).some(function(E){return M[E]!==R[E]})&&(!e.tilesTransitionDuration||e.tilesTransitionDuration<0?S(R):e.tweenGroup.add(new ia(M).to(R,e.tilesTransitionDuration).easing(Yr.Quadratic.InOut).onUpdate(S).start()))}).digest(e.tilesData)}}),$f=function(e){return e*Math.PI/180},ip=window.THREE?window.THREE:{BufferGeometry:Ii,Color:Xt,Points:tG,PointsMaterial:hx},hI=ls({props:{particlesData:{default:[]},particlesList:{default:function(e){return e}},particleLat:{default:"lat"},particleLng:{default:"lng"},particleAltitude:{default:.01},particlesSize:{default:.5},particlesSizeAttenuation:{default:!0},particlesColor:{default:function(){return"white"}},particlesTexture:{}},init:function(e,t){Vi(e),t.scene=e,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjParticles"}).onCreateObj(function(){var n=new ip.Points(new ip.BufferGeometry,new ip.PointsMaterial);return n.__globeObjType="particles",n}).onUpdateObj(function(n,r){var s=_t(t.particlesList),a=_t(t.particleLat),o=_t(t.particleLng),u=_t(t.particleAltitude);n.geometry.setAttribute("position",wu(s(r).map(function(c){return Object.values(tl(a(c),o(c),u(c)))}),3))})},update:function(e,t){["particlesData","particlesList","particleLat","particleLng","particleAltitude"].some(function(o){return t.hasOwnProperty(o)})&&e.dataMapper.digest(e.particlesData);var n=_t(e.particlesColor),r=_t(e.particlesSize),s=_t(e.particlesSizeAttenuation),a=_t(e.particlesTexture);e.dataMapper.entries().forEach(function(o){var u=lr(o,2),c=u[0],p=u[1];if(p.material.size=r(c),p.material.sizeAttenuation=s(c),e.particlesTexture)p.material.color=new ip.Color(16777215),p.material.transparent=!1,p.material.alphaTest=.5,p.material.map=a(c);else{var g=n(c),y=Ll(g);p.material.color=new ip.Color(Tu(g)),p.material.transparent=y<1,p.material.opacity=y,p.material.alphaTest=0}})}}),U1e=window.THREE?window.THREE:{BufferGeometry:Ii},O1e=function(i){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32;s9(this,e),t=r9(this,e),t.type="CircleLineGeometry",t.parameters={radius:n,segmentCount:r};for(var s=[],a=0;a<=r;a++){var o=(a/r-.25)*Math.PI*2;s.push({x:Math.cos(o)*n,y:Math.sin(o)*n,z:0})}return t.setFromPoints(s),t}return o9(e,i),a9(e)}(U1e.BufferGeometry),Xf=window.THREE?window.THREE:{Color:Xt,Group:Da,Line:S5,LineBasicMaterial:vA,Vector3:le},B1e=iA.default||iA,fI=ls({props:{ringsData:{default:[]},ringLat:{default:"lat"},ringLng:{default:"lng"},ringAltitude:{default:.0015},ringColor:{default:function(){return"#ffffaa"},triggerUpdate:!1},ringResolution:{default:64,triggerUpdate:!1},ringMaxRadius:{default:2,triggerUpdate:!1},ringPropagationSpeed:{default:1,triggerUpdate:!1},ringRepeatPeriod:{default:700,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},init:function(e,t,n){var r=n.tweenGroup;Vi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjRing",removeDelay:3e4}).onCreateObj(function(){var s=new Xf.Group;return s.__globeObjType="ring",s}),t.ticker=new B1e,t.ticker.onTick.add(function(s){if(t.ringsData.length){var a=_t(t.ringColor),o=_t(t.ringAltitude),u=_t(t.ringMaxRadius),c=_t(t.ringPropagationSpeed),p=_t(t.ringRepeatPeriod);t.dataMapper.entries().filter(function(g){var y=lr(g,2),q=y[1];return q}).forEach(function(g){var y=lr(g,2),q=y[0],S=y[1];if((S.__nextRingTime||0)<=s){var R=p(q)/1e3;S.__nextRingTime=s+(R<=0?1/0:R);var M=new Xf.Line(new O1e(1,t.ringResolution),new Xf.LineBasicMaterial),E=a(q),U=E instanceof Array||E instanceof Function,P;U?E instanceof Array?(P=Ec().domain(E.map(function($,te){return te/(E.length-1)})).range(E),M.material.transparent=E.some(function($){return Ll($)<1})):(P=E,M.material.transparent=!0):(M.material.color=new Xf.Color(Tu(E)),g1e(M.material,Ll(E)));var O=ir*(1+o(q)),F=u(q),I=F*Math.PI/180,z=c(q),j=z<=0,k=function(te){var ne=te.t,ue=(j?1-ne:ne)*I;if(M.scale.x=M.scale.y=O*Math.sin(ue),M.position.z=O*(1-Math.cos(ue)),U){var ae=P(ne);M.material.color=new Xf.Color(Tu(ae)),M.material.transparent&&(M.material.opacity=Ll(ae))}};if(z===0)k({t:0}),S.add(M);else{var G=Math.abs(F/z)*1e3;t.tweenGroup.add(new ia({t:0}).to({t:1},G).onUpdate(k).onStart(function(){return S.add(M)}).onComplete(function(){S.remove(M),nb(M)}).start())}}})}})},update:function(e){var t=_t(e.ringLat),n=_t(e.ringLng),r=_t(e.ringAltitude),s=e.scene.localToWorld(new Xf.Vector3(0,0,0));e.dataMapper.onUpdateObj(function(a,o){var u=t(o),c=n(o),p=r(o);Object.assign(a.position,tl(u,c,p)),a.lookAt(s)}).digest(e.ringsData)}}),I1e={0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},ο:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"¦":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},Τ:{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},Π:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},ΐ:{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"²":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"–":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},Κ:{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},ƒ:{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},ό:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"»":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"©":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},ώ:{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"«":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"∙":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},ÿ:{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},µ:{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},Ι:{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},Ύ:{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"’":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},Ν:{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},ς:{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},Ψ:{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},ι:{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},Ά:{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},ε:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},Δ:{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"‰":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"—":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},ρ:{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"¯":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},Η:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},Α:{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"…":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},ν:{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"¶":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},β:{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},Μ:{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},Ό:{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ή:{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"•":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"¥":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},γ:{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},α:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"­":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},Χ:{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"†":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"°":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},Ξ:{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "}," ":{x_min:0,x_max:0,ha:853},Ϋ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"”":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},Ί:{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},Β:{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},υ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},χ:{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},ί:{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},Ζ:{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"¨":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"‹":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"„":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},δ:{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},έ:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},ω:{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"´":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"±":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},ϋ:{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"§":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},Ω:{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},ύ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"™":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},ή:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},Θ:{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"®":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},Ε:{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"³":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},σ:{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},ζ:{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},θ:{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},Ο:{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},Γ:{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},Έ:{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ώ:{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},Ϊ:{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"½":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},Ρ:{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},ª:{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"΅":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},Φ:{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"⁋":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},Σ:{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"›":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"£":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"¬":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},λ:{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},τ:{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},ξ:{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},Λ:{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},ΰ:{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"·":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},Υ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},μ:{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},φ:{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"“":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"‘":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},ϊ:{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},π:{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},ά:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"¤":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},κ:{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"‡":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},ψ:{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},η:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},F1e="normal",k1e=1189,z1e=-100,G1e="normal",V1e={yMin:-334,xMin:-111,yMax:1189,xMax:1672},H1e=1e3,j1e={postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) Μagenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"Μagenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:`Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r
\r
Permission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r
\r
The above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r
\r
The Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r
\r
This License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r
\r
The Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r
\r
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.`,manufacturer_name:"Μagenta ltd",font_sub_family_name:"Regular"},W1e=-334,$1e="Helvetiker",X1e=1522,Q1e=50,Y1e={glyphs:I1e,cssFontWeight:F1e,ascender:k1e,underlinePosition:z1e,cssFontStyle:G1e,boundingBox:V1e,resolution:H1e,original_font_information:j1e,descender:W1e,familyName:$1e,lineHeight:X1e,underlineThickness:Q1e},xl=Ci(Ci({},window.THREE?window.THREE:{BoxGeometry:J1,CircleGeometry:T5,DoubleSide:Qr,Group:Da,Mesh:yi,MeshLambertMaterial:Oc,TextGeometry:nC,Vector3:le}),{},{Font:Xce,TextGeometry:nC}),dI=ls({props:{labelsData:{default:[]},labelLat:{default:"lat"},labelLng:{default:"lng"},labelAltitude:{default:0},labelText:{default:"text"},labelSize:{default:.5},labelTypeFace:{default:Y1e,onChange:function(e,t){t.font=new xl.Font(e)}},labelColor:{default:function(){return"lightgrey"}},labelRotation:{default:0},labelResolution:{default:3},labelIncludeDot:{default:!0},labelDotRadius:{default:.1},labelDotOrientation:{default:function(){return"bottom"}},labelsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Vi(e),t.scene=e,t.tweenGroup=r;var s=new xl.CircleGeometry(1,32);t.dataMapper=new Xa(e,{objBindAttr:"__threeObjLabel"}).onCreateObj(function(){var a=new xl.MeshLambertMaterial;a.side=Qr;var o=new xl.Group;o.add(new xl.Mesh(s,a));var u=new xl.Mesh(void 0,a);o.add(u);var c=new xl.Mesh;return c.visible=!1,u.add(c),o.__globeObjType="label",o})},update:function(e){var t=_t(e.labelLat),n=_t(e.labelLng),r=_t(e.labelAltitude),s=_t(e.labelText),a=_t(e.labelSize),o=_t(e.labelRotation),u=_t(e.labelColor),c=_t(e.labelIncludeDot),p=_t(e.labelDotRadius),g=_t(e.labelDotOrientation),y=new Set(["right","top","bottom"]),q=2*Math.PI*ir/360;e.dataMapper.onUpdateObj(function(S,R){var M=lr(S.children,2),E=M[0],U=M[1],P=lr(U.children,1),O=P[0],F=u(R),I=Ll(F);U.material.color.set(Tu(F)),U.material.transparent=I<1,U.material.opacity=I;var z=c(R),j=g(R);!z||!y.has(j)&&(j="bottom");var k=z?+p(R)*q:1e-12;E.scale.x=E.scale.y=k;var G=+a(R)*q;if(U.geometry&&U.geometry.dispose(),U.geometry=new xl.TextGeometry(s(R),{font:e.font,size:G,depth:0,bevelEnabled:!0,bevelThickness:0,bevelSize:0,curveSegments:e.labelResolution}),O.geometry&&O.geometry.dispose(),U.geometry.computeBoundingBox(),O.geometry=eb(xl.BoxGeometry,Bi(new xl.Vector3().subVectors(U.geometry.boundingBox.max,U.geometry.boundingBox.min).toArray())),j!=="right"&&U.geometry.center(),z){var $=k+G/2;j==="right"&&(U.position.x=$),U.position.y={right:-G/2,top:$+G/2,bottom:-$-G/2}[j]}var te=function(W){var J=S.__currentTargetD=W,re=J.lat,ge=J.lng,Y=J.alt,me=J.rot,Me=J.scale;Object.assign(S.position,tl(re,ge,Y)),S.lookAt(e.scene.localToWorld(new xl.Vector3(0,0,0))),S.rotateY(Math.PI),S.rotateZ(-me*Math.PI/180),S.scale.x=S.scale.y=S.scale.z=Me},ne={lat:+t(R),lng:+n(R),alt:+r(R),rot:+o(R),scale:1},ue=S.__currentTargetD||Object.assign({},ne,{scale:1e-12});Object.keys(ne).some(function(ae){return ue[ae]!==ne[ae]})&&(!e.labelsTransitionDuration||e.labelsTransitionDuration<0?te(ne):e.tweenGroup.add(new ia(ue).to(ne,e.labelsTransitionDuration).easing(Yr.Quadratic.InOut).onUpdate(te).start()))}).digest(e.labelsData)}}),K1e=Ci(Ci({},window.THREE?window.THREE:{}),{},{CSS2DObject:z$}),AI=ls({props:{htmlElementsData:{default:[]},htmlLat:{default:"lat"},htmlLng:{default:"lng"},htmlAltitude:{default:0},htmlElement:{},htmlElementVisibilityModifier:{triggerUpdate:!1},htmlTransitionDuration:{default:1e3,triggerUpdate:!1},isBehindGlobe:{onChange:function(){this.updateObjVisibility()},triggerUpdate:!1}},methods:{updateObjVisibility:function(e,t){if(e.dataMapper){var n=t?[t]:e.dataMapper.entries().map(function(r){var s=lr(r,2),a=s[1];return a}).filter(function(r){return r});n.forEach(function(r){var s=!e.isBehindGlobe||!e.isBehindGlobe(r.position);e.htmlElementVisibilityModifier?(r.visible=!0,e.htmlElementVisibilityModifier(r.element,s)):r.visible=s})}}},init:function(e,t,n){var r=n.tweenGroup;Vi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjHtml"}).onCreateObj(function(s){var a=_t(t.htmlElement)(s),o=new K1e.CSS2DObject(a);return o.__globeObjType="html",o})},update:function(e,t){var n=this,r=_t(e.htmlLat),s=_t(e.htmlLng),a=_t(e.htmlAltitude);t.hasOwnProperty("htmlElement")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(o,u){var c=function(y){var q=o.__currentTargetD=y,S=q.alt,R=q.lat,M=q.lng;Object.assign(o.position,tl(R,M,S)),n.updateObjVisibility(o)},p={lat:+r(u),lng:+s(u),alt:+a(u)};!e.htmlTransitionDuration||e.htmlTransitionDuration<0||!o.__currentTargetD?c(p):e.tweenGroup.add(new ia(o.__currentTargetD).to(p,e.htmlTransitionDuration).easing(Yr.Quadratic.InOut).onUpdate(c).start())}).digest(e.htmlElementsData)}}),P6=window.THREE?window.THREE:{Group:Da,Mesh:yi,MeshLambertMaterial:Oc,SphereGeometry:Mu},pI=ls({props:{objectsData:{default:[]},objectLat:{default:"lat"},objectLng:{default:"lng"},objectAltitude:{default:.01},objectFacesSurface:{default:!0},objectRotation:{},objectThreeObject:{default:new P6.Mesh(new P6.SphereGeometry(1,16,8),new P6.MeshLambertMaterial({color:"#ffffaa",transparent:!0,opacity:.7}))}},init:function(e,t){Vi(e),t.scene=e,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjObject"}).onCreateObj(function(n){var r=_t(t.objectThreeObject)(n);t.objectThreeObject===r&&(r=r.clone());var s=new P6.Group;return s.add(r),s.__globeObjType="object",s})},update:function(e,t){var n=_t(e.objectLat),r=_t(e.objectLng),s=_t(e.objectAltitude),a=_t(e.objectFacesSurface),o=_t(e.objectRotation);t.hasOwnProperty("objectThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(u,c){var p=+n(c),g=+r(c),y=+s(c);Object.assign(u.position,tl(p,g,y)),a(c)?u.setRotationFromEuler(new ks(Q0(-p),Q0(g),0,"YXZ")):u.rotation.set(0,0,0);var q=u.children[0],S=o(c);S&&q.setRotationFromEuler(new ks(Q0(S.x||0),Q0(S.y||0),Q0(S.z||0)))}).digest(e.objectsData)}}),mI=ls({props:{customLayerData:{default:[]},customThreeObject:{},customThreeObjectUpdate:{triggerUpdate:!1}},init:function(e,t){Vi(e),t.scene=e,t.dataMapper=new Xa(e,{objBindAttr:"__threeObjCustom"}).onCreateObj(function(n){var r=_t(t.customThreeObject)(n,ir);return r&&(t.customThreeObject===r&&(r=r.clone()),r.__globeObjType="custom"),r})},update:function(e,t){e.customThreeObjectUpdate||Vi(e.scene);var n=_t(e.customThreeObjectUpdate);t.hasOwnProperty("customThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(r,s){return n(r,s,ir)}).digest(e.customLayerData)}}),D6=window.THREE?window.THREE:{Camera:P3,Group:Da,Vector2:rt,Vector3:le},Z1e=["globeLayer","pointsLayer","arcsLayer","hexBinLayer","heatmapsLayer","polygonsLayer","hexedPolygonsLayer","pathsLayer","tilesLayer","particlesLayer","ringsLayer","labelsLayer","htmlElementsLayer","objectsLayer","customLayer"],gI=ma("globeLayer",eI),J1e=Object.assign.apply(Object,Bi(["globeImageUrl","bumpImageUrl","globeTileEngineUrl","globeTileEngineMaxLevel","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude"].map(function(i){return Ts({},i,gI.linkProp(i))}))),e0e=Object.assign.apply(Object,Bi(["globeMaterial"].map(function(i){return Ts({},i,gI.linkMethod(i))}))),t0e=ma("pointsLayer",tI),n0e=Object.assign.apply(Object,Bi(["pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration"].map(function(i){return Ts({},i,t0e.linkProp(i))}))),i0e=ma("arcsLayer",iI),r0e=Object.assign.apply(Object,Bi(["arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration"].map(function(i){return Ts({},i,i0e.linkProp(i))}))),s0e=ma("hexBinLayer",rI),a0e=Object.assign.apply(Object,Bi(["hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration"].map(function(i){return Ts({},i,s0e.linkProp(i))}))),o0e=ma("heatmapsLayer",aI),l0e=Object.assign.apply(Object,Bi(["heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration"].map(function(i){return Ts({},i,o0e.linkProp(i))}))),u0e=ma("hexedPolygonsLayer",lI),c0e=Object.assign.apply(Object,Bi(["hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration"].map(function(i){return Ts({},i,u0e.linkProp(i))}))),h0e=ma("polygonsLayer",oI),f0e=Object.assign.apply(Object,Bi(["polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration"].map(function(i){return Ts({},i,h0e.linkProp(i))}))),d0e=ma("pathsLayer",uI),A0e=Object.assign.apply(Object,Bi(["pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration"].map(function(i){return Ts({},i,d0e.linkProp(i))}))),p0e=ma("tilesLayer",cI),m0e=Object.assign.apply(Object,Bi(["tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration"].map(function(i){return Ts({},i,p0e.linkProp(i))}))),g0e=ma("particlesLayer",hI),_0e=Object.assign.apply(Object,Bi(["particlesData","particlesList","particleLat","particleLng","particleAltitude","particlesSize","particlesSizeAttenuation","particlesColor","particlesTexture"].map(function(i){return Ts({},i,g0e.linkProp(i))}))),v0e=ma("ringsLayer",fI),y0e=Object.assign.apply(Object,Bi(["ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod"].map(function(i){return Ts({},i,v0e.linkProp(i))}))),x0e=ma("labelsLayer",dI),q0e=Object.assign.apply(Object,Bi(["labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration"].map(function(i){return Ts({},i,x0e.linkProp(i))}))),b0e=ma("htmlElementsLayer",AI),S0e=Object.assign.apply(Object,Bi(["htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlElementVisibilityModifier","htmlTransitionDuration"].map(function(i){return Ts({},i,b0e.linkProp(i))}))),T0e=ma("objectsLayer",pI),w0e=Object.assign.apply(Object,Bi(["objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject"].map(function(i){return Ts({},i,T0e.linkProp(i))}))),E0e=ma("customLayer",mI),M0e=Object.assign.apply(Object,Bi(["customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(i){return Ts({},i,E0e.linkProp(i))}))),R0e=ls({props:Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci(Ci({onGlobeReady:{triggerUpdate:!1},rendererSize:{default:new D6.Vector2(window.innerWidth,window.innerHeight),onChange:function(e,t){t.pathsLayer.rendererSize(e)},triggerUpdate:!1}},J1e),n0e),r0e),a0e),l0e),f0e),c0e),A0e),m0e),_0e),y0e),q0e),S0e),w0e),M0e),methods:Ci({getGlobeRadius:sC,getCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return tl.apply(void 0,n)},toGeoCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return JB.apply(void 0,n)},setPointOfView:function(e,t){var n=t instanceof D6.Camera?t.position:t,r=sC(),s=void 0;if(e.scene&&n){var a,o,u,c;s=function(g){a===void 0&&(a=n.clone().applyMatrix4(e.scene.matrixWorld.clone().invert())),o===void 0&&(o=a.length()),u===void 0&&(u=Math.sqrt(Math.pow(o,2)-Math.pow(r,2))),c===void 0&&(c=Math.acos(u/o));var y=a.distanceTo(g);if(y<u)return!1;var q=g.length(),S=Math.acos((Math.pow(o,2)+Math.pow(y,2)-Math.pow(q,2))/(2*o*y));return S<c}}e.layersThatNeedUpdatePov.forEach(function(p){return p.updatePov(t)}),e.layersThatNeedBehindGlobeChecker.forEach(function(p){return p.isBehindGlobe(s)})},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),e.pausableLayers.forEach(function(t){var n;return(n=t.pauseAnimation)===null||n===void 0?void 0:n.call(t)}),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),e.pausableLayers.forEach(function(t){var n;return(n=t.resumeAnimation)===null||n===void 0?void 0:n.call(t)}),this},_animationCycle:function(e){e.animationFrameRequestId=requestAnimationFrame(this._animationCycle),e.tweenGroup.update()},_destructor:function(e){this.pauseAnimation(),e.destructableLayers.forEach(function(t){return t._destructor()})}},e0e),stateInit:function(){var e=new R5,t={tweenGroup:e},n={globeLayer:eI(t),pointsLayer:tI(t),arcsLayer:iI(t),hexBinLayer:rI(t),heatmapsLayer:aI(t),polygonsLayer:oI(t),hexedPolygonsLayer:lI(t),pathsLayer:uI(t),tilesLayer:cI(t),particlesLayer:hI(t),ringsLayer:fI(t),labelsLayer:dI(t),htmlElementsLayer:AI(t),objectsLayer:pI(t),customLayer:mI(t)};return Ci(Ci({tweenGroup:e},n),{},{layersThatNeedUpdatePov:Object.values(n).filter(function(r){return r.hasOwnProperty("updatePov")}),layersThatNeedBehindGlobeChecker:Object.values(n).filter(function(r){return r.hasOwnProperty("isBehindGlobe")}),destructableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("_destructor")}),pausableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("pauseAnimation")})})},init:function(e,t,n){var r=n.animateIn,s=r===void 0?!0:r,a=n.waitForGlobeReady,o=a===void 0?!0:a;Vi(e),t.scene=e,t.scene.visible=!1,Z1e.forEach(function(c){var p=new D6.Group;t.scene.add(p),t[c](p)});var u=function(){if(s){t.scene.scale.set(1e-6,1e-6,1e-6),t.tweenGroup.add(new ia({k:1e-6}).to({k:1},600).easing(Yr.Quadratic.Out).onUpdate(function(g){var y=g.k;return t.scene.scale.set(y,y,y)}).start());var p=new D6.Vector3(0,1,0);t.tweenGroup.add(new ia({rot:Math.PI*2}).to({rot:0},1200).easing(Yr.Quintic.Out).onUpdate(function(g){var y=g.rot;return t.scene.setRotationFromAxisAngle(p,y)}).start())}t.scene.visible=!0,t.onGlobeReady&&t.onGlobeReady()};o?t.globeLayer.onReady(u):u(),this._animationCycle()},update:function(e){}});function C0e(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=function(r){function s(){var a;s9(this,s);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return a=r9(this,s,[].concat(u)),a.__kapsuleInstance=eb(i,[].concat(Bi(t?[a]:[]),u)),a}return o9(s,r),a9(s)}(e);return Object.keys(i()).forEach(function(r){return n.prototype[r]=function(){var s,a=(s=this.__kapsuleInstance)[r].apply(s,arguments);return a===this.__kapsuleInstance?this:a}}),n}var N0e=window.THREE?window.THREE:{Group:Da},_I=C0e(R0e,N0e.Group,!0);const D_={type:"change"},rb={type:"start"},sb={type:"end"},AC=1e-6,bi={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},L6=new rt,w1=new rt,P0e=new le,U6=new le,L_=new le,Qf=new Ul,pC=new le,O6=new le,U_=new le,B6=new le;class D0e extends _x{constructor(e,t=null){super(e,t),this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Xo.ROTATE,MIDDLE:Xo.DOLLY,RIGHT:Xo.PAN},this.target=new le,this.state=bi.NONE,this.keyState=bi.NONE,this._lastPosition=new le,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new le,this._movePrev=new rt,this._moveCurr=new rt,this._lastAxis=new le,this._zoomStart=new rt,this._zoomEnd=new rt,this._panStart=new rt,this._panEnd=new rt,this._pointers=[],this._pointerPositions={},this._onPointerMove=U0e.bind(this),this._onPointerDown=L0e.bind(this),this._onPointerUp=O0e.bind(this),this._onPointerCancel=B0e.bind(this),this._onContextMenu=H0e.bind(this),this._onMouseWheel=V0e.bind(this),this._onKeyDown=F0e.bind(this),this._onKeyUp=I0e.bind(this),this._onTouchStart=j0e.bind(this),this._onTouchMove=W0e.bind(this),this._onTouchEnd=$0e.bind(this),this._onMouseDown=k0e.bind(this),this._onMouseMove=z0e.bind(this),this._onMouseUp=G0e.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,t!==null&&(this.connect(t),this.handleResize()),this.update()}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>AC&&(this.dispatchEvent(D_),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>AC||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(D_),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=bi.NONE,this.keyState=bi.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(D_),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(w1.copy(this._panEnd).sub(this._panStart),w1.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,t=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;w1.x*=e,w1.y*=t}w1.multiplyScalar(this._eye.length()*this.panSpeed),U6.copy(this._eye).cross(this.object.up).setLength(w1.x),U6.add(P0e.copy(this.object.up).setLength(w1.y)),this.object.position.add(U6),this.target.add(U6),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(w1.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){B6.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=B6.length();e?(this._eye.copy(this.object.position).sub(this.target),pC.copy(this._eye).normalize(),O6.copy(this.object.up).normalize(),U_.crossVectors(O6,pC).normalize(),O6.setLength(this._moveCurr.y-this._movePrev.y),U_.setLength(this._moveCurr.x-this._movePrev.x),B6.copy(O6.add(U_)),L_.crossVectors(B6,this._eye).normalize(),e*=this.rotateSpeed,Qf.setFromAxisAngle(L_,e),this._eye.applyQuaternion(Qf),this.object.up.applyQuaternion(Qf),this._lastAxis.copy(L_),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),Qf.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(Qf),this.object.up.applyQuaternion(Qf)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===bi.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=Qd.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=Qd.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,t){return L6.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),L6}_getMouseOnCircle(e,t){return L6.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-t))/this.screen.width),L6}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId==e.pointerId){this._pointers.splice(t,1);return}}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new rt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[t.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function L0e(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i))}function U0e(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function O0e(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchEnd(i):this._onMouseUp(),this._removePointer(i),this._pointers.length===0&&(this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function B0e(i){this._removePointer(i)}function I0e(){this.enabled!==!1&&(this.keyState=bi.NONE,window.addEventListener("keydown",this._onKeyDown))}function F0e(i){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===bi.NONE&&(i.code===this.keys[bi.ROTATE]&&!this.noRotate?this.keyState=bi.ROTATE:i.code===this.keys[bi.ZOOM]&&!this.noZoom?this.keyState=bi.ZOOM:i.code===this.keys[bi.PAN]&&!this.noPan&&(this.keyState=bi.PAN)))}function k0e(i){let e;switch(i.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Xo.DOLLY:this.state=bi.ZOOM;break;case Xo.ROTATE:this.state=bi.ROTATE;break;case Xo.PAN:this.state=bi.PAN;break;default:this.state=bi.NONE}const t=this.keyState!==bi.NONE?this.keyState:this.state;t===bi.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr)):t===bi.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(i.pageX,i.pageY)),this._zoomEnd.copy(this._zoomStart)):t===bi.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(i.pageX,i.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(rb)}function z0e(i){const e=this.keyState!==bi.NONE?this.keyState:this.state;e===bi.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY))):e===bi.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(i.pageX,i.pageY)):e===bi.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(i.pageX,i.pageY))}function G0e(){this.state=bi.NONE,this.dispatchEvent(sb)}function V0e(i){if(this.enabled!==!1&&this.noZoom!==!0){switch(i.preventDefault(),i.deltaMode){case 2:this._zoomStart.y-=i.deltaY*.025;break;case 1:this._zoomStart.y-=i.deltaY*.01;break;default:this._zoomStart.y-=i.deltaY*25e-5;break}this.dispatchEvent(rb),this.dispatchEvent(sb)}}function H0e(i){this.enabled!==!1&&i.preventDefault()}function j0e(i){switch(this._trackPointer(i),this._pointers.length){case 1:this.state=bi.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=bi.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,t=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+t*t);const n=(this._pointers[0].pageX+this._pointers[1].pageX)/2,r=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(n,r)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(rb)}function W0e(i){switch(this._trackPointer(i),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY));break;default:const e=this._getSecondPointerPosition(i),t=i.pageX-e.x,n=i.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(t*t+n*n);const r=(i.pageX+e.x)/2,s=(i.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(r,s));break}}function $0e(i){switch(this._pointers.length){case 0:this.state=bi.NONE;break;case 1:this.state=bi.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=bi.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==i.pointerId){const t=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(t.x,t.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(sb)}const mC={type:"change"},ab={type:"start"},vI={type:"end"},I6=new N3,gC=new tu,X0e=Math.cos(70*Qd.DEG2RAD),ns=new le,Ta=2*Math.PI,Gi={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},O_=1e-6;class Q0e extends _x{constructor(e,t=null){super(e,t),this.state=Gi.NONE,this.target=new le,this.cursor=new le,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Xo.ROTATE,MIDDLE:Xo.DOLLY,RIGHT:Xo.PAN},this.touches={ONE:od.ROTATE,TWO:od.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new le,this._lastQuaternion=new Ul,this._lastTargetPosition=new le,this._quat=new Ul().setFromUnitVectors(e.up,new le(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Fw,this._sphericalDelta=new Fw,this._scale=1,this._panOffset=new le,this._rotateStart=new rt,this._rotateEnd=new rt,this._rotateDelta=new rt,this._panStart=new rt,this._panEnd=new rt,this._panDelta=new rt,this._dollyStart=new rt,this._dollyEnd=new rt,this._dollyDelta=new rt,this._dollyDirection=new le,this._mouse=new rt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=K0e.bind(this),this._onPointerDown=Y0e.bind(this),this._onPointerUp=Z0e.bind(this),this._onContextMenu=she.bind(this),this._onMouseWheel=the.bind(this),this._onKeyDown=nhe.bind(this),this._onTouchStart=ihe.bind(this),this._onTouchMove=rhe.bind(this),this._onMouseDown=J0e.bind(this),this._onMouseMove=ehe.bind(this),this._interceptControlDown=ahe.bind(this),this._interceptControlUp=ohe.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(mC),this.update(),this.state=Gi.NONE}update(e=null){const t=this.object.position;ns.copy(t).sub(this.target),ns.applyQuaternion(this._quat),this._spherical.setFromVector3(ns),this.autoRotate&&this.state===Gi.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(n)&&isFinite(r)&&(n<-Math.PI?n+=Ta:n>Math.PI&&(n-=Ta),r<-Math.PI?r+=Ta:r>Math.PI&&(r-=Ta),n<=r?this._spherical.theta=Math.max(n,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+r)/2?Math.max(n,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(ns.setFromSpherical(this._spherical),ns.applyQuaternion(this._quatInverse),t.copy(this.target).add(ns),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const o=ns.length();a=this._clampDistance(o*this._scale);const u=o-a;this.object.position.addScaledVector(this._dollyDirection,u),this.object.updateMatrixWorld(),s=!!u}else if(this.object.isOrthographicCamera){const o=new le(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const u=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=u!==this.object.zoom;const c=new le(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(o),this.object.updateMatrixWorld(),a=ns.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(I6.origin.copy(this.object.position),I6.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(I6.direction))<X0e?this.object.lookAt(this.target):(gC.setFromNormalAndCoplanarPoint(this.object.up,this.target),I6.intersectPlane(gC,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>O_||8*(1-this._lastQuaternion.dot(this.object.quaternion))>O_||this._lastTargetPosition.distanceToSquared(this.target)>O_?(this.dispatchEvent(mC),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Ta/60*this.autoRotateSpeed*e:Ta/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){ns.setFromMatrixColumn(t,0),ns.multiplyScalar(-e),this._panOffset.add(ns)}_panUp(e,t){this.screenSpacePanning===!0?ns.setFromMatrixColumn(t,1):(ns.setFromMatrixColumn(t,0),ns.crossVectors(this.object.up,ns)),ns.multiplyScalar(e),this._panOffset.add(ns)}_pan(e,t){const n=this.domElement;if(this.object.isPerspectiveCamera){const r=this.object.position;ns.copy(r).sub(this.target);let s=ns.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/n.clientHeight,this.object.matrix),this._panUp(2*t*s/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),r=e-n.left,s=t-n.top,a=n.width,o=n.height;this._mouse.x=r/a*2-1,this._mouse.y=-(s/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Ta*this._rotateDelta.x/t.clientHeight),this._rotateUp(Ta*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Ta*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Ta*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Ta*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Ta*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(n,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(n,r)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Ta*this._rotateDelta.x/t.clientHeight),this._rotateUp(Ta*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(n,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+t.x)*.5,o=(e.pageY+t.y)*.5;this._updateZoomParameters(a,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new rt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function Y0e(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(i)&&(this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i)))}function K0e(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function Z0e(i){switch(this._removePointer(i),this._pointers.length){case 0:this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(vI),this.state=Gi.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function J0e(i){let e;switch(i.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Xo.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(i),this.state=Gi.DOLLY;break;case Xo.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=Gi.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=Gi.ROTATE}break;case Xo.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=Gi.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=Gi.PAN}break;default:this.state=Gi.NONE}this.state!==Gi.NONE&&this.dispatchEvent(ab)}function ehe(i){switch(this.state){case Gi.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(i);break;case Gi.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(i);break;case Gi.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(i);break}}function the(i){this.enabled===!1||this.enableZoom===!1||this.state!==Gi.NONE||(i.preventDefault(),this.dispatchEvent(ab),this._handleMouseWheel(this._customWheelEvent(i)),this.dispatchEvent(vI))}function nhe(i){this.enabled!==!1&&this._handleKeyDown(i)}function ihe(i){switch(this._trackPointer(i),this._pointers.length){case 1:switch(this.touches.ONE){case od.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(i),this.state=Gi.TOUCH_ROTATE;break;case od.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(i),this.state=Gi.TOUCH_PAN;break;default:this.state=Gi.NONE}break;case 2:switch(this.touches.TWO){case od.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(i),this.state=Gi.TOUCH_DOLLY_PAN;break;case od.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(i),this.state=Gi.TOUCH_DOLLY_ROTATE;break;default:this.state=Gi.NONE}break;default:this.state=Gi.NONE}this.state!==Gi.NONE&&this.dispatchEvent(ab)}function rhe(i){switch(this._trackPointer(i),this.state){case Gi.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(i),this.update();break;case Gi.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(i),this.update();break;case Gi.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(i),this.update();break;case Gi.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(i),this.update();break;default:this.state=Gi.NONE}}function she(i){this.enabled!==!1&&i.preventDefault()}function ahe(i){i.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function ohe(i){i.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const lhe={type:"change"},_C=1e-6,vC=new Ul;class uhe extends _x{constructor(e,t=null){super(e,t),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new le(0,0,0),this._rotationVector=new le(0,0,0),this._lastQuaternion=new Ul,this._lastPosition=new le,this._status=0,this._onKeyDown=che.bind(this),this._onKeyUp=hhe.bind(this),this._onPointerMove=dhe.bind(this),this._onPointerDown=fhe.bind(this),this._onPointerUp=Ahe.bind(this),this._onPointerCancel=phe.bind(this),this._onContextMenu=mhe.bind(this),t!==null&&this.connect(t)}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const t=this.object,n=e*this.movementSpeed,r=e*this.rollSpeed;t.translateX(this._moveVector.x*n),t.translateY(this._moveVector.y*n),t.translateZ(this._moveVector.z*n),vC.set(this._rotationVector.x*r,this._rotationVector.y*r,this._rotationVector.z*r,1).normalize(),t.quaternion.multiply(vC),(this._lastPosition.distanceToSquared(t.position)>_C||8*(1-this._lastQuaternion.dot(t.quaternion))>_C)&&(this.dispatchEvent(lhe),this._lastQuaternion.copy(t.quaternion),this._lastPosition.copy(t.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function che(i){if(!(i.altKey||this.enabled===!1)){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function hhe(i){if(this.enabled!==!1){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function fhe(i){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(i.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function dhe(i){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),t=e.size[0]/2,n=e.size[1]/2;this._moveState.yawLeft=-(i.pageX-e.offset[0]-t)/t,this._moveState.pitchDown=(i.pageY-e.offset[1]-n)/n,this._updateRotationVector()}}function Ahe(i){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(i.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function phe(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function mhe(i){this.enabled!==!1&&i.preventDefault()}const ghe={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class l9{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const _he=new O3(-1,1,1,-1,0,1);class vhe extends Ii{constructor(){super(),this.setAttribute("position",new mi([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new mi([0,2,0,0,2,0],2))}}const yhe=new vhe;class xhe{constructor(e){this._mesh=new yi(yhe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,_he)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class qhe extends l9{constructor(e,t="tDiffuse"){super(),this.textureID=t,this.uniforms=null,this.material=null,e instanceof Ga?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=x5.clone(e.uniforms),this.material=new Ga({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new xhe(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class yC extends l9{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,o;this.inverse?(a=0,o=1):(a=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,a,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class bhe extends l9{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class She{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new rt);this._width=n.width,this._height=n.height,t=new X1(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Ss}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new qhe(ghe),this.copyPass.material.blending=Fa,this.clock=new IN}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const a=this.passes[r];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),a.needsSwap){if(n){const o=this.renderer.getContext(),u=this.renderer.state.buffers.stencil;u.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),u.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}yC!==void 0&&(a instanceof yC?n=!0:a instanceof bhe&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new rt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class The extends l9{constructor(e,t,n=null,r=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Xt}render(e,t,n){const r=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=r}}function Wa(){return Wa=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Wa.apply(null,arguments)}function whe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function T3(i,e){return T3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},T3(i,e)}function Ehe(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,T3(i,e)}function py(i){return py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},py(i)}function Mhe(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}function yI(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yI=function(){return!!i})()}function Rhe(i,e,t){if(yI())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return t&&T3(r,t.prototype),r}function my(i){var e=typeof Map=="function"?new Map:void 0;return my=function(n){if(n===null||!Mhe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return Rhe(n,arguments,py(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),T3(r,n)},my(i)}var lu=function(i){Ehe(e,i);function e(t){var n;return n=i.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,whe(n)}return e}(my(Error));function B_(i){return Math.round(i*255)}function Che(i,e,t){return B_(i)+","+B_(e)+","+B_(t)}function h5(i,e,t,n){if(n===void 0&&(n=Che),e===0)return n(t,t,t);var r=(i%360+360)%360/60,s=(1-Math.abs(2*t-1))*e,a=s*(1-Math.abs(r%2-1)),o=0,u=0,c=0;r>=0&&r<1?(o=s,u=a):r>=1&&r<2?(o=a,u=s):r>=2&&r<3?(u=s,c=a):r>=3&&r<4?(u=a,c=s):r>=4&&r<5?(o=a,c=s):r>=5&&r<6&&(o=s,c=a);var p=t-s/2,g=o+p,y=u+p,q=c+p;return n(g,y,q)}var xC={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function Nhe(i){if(typeof i!="string")return i;var e=i.toLowerCase();return xC[e]?"#"+xC[e]:i}var Phe=/^#[a-fA-F0-9]{6}$/,Dhe=/^#[a-fA-F0-9]{8}$/,Lhe=/^#[a-fA-F0-9]{3}$/,Uhe=/^#[a-fA-F0-9]{4}$/,I_=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,Ohe=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Bhe=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Ihe=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function hA(i){if(typeof i!="string")throw new lu(3);var e=Nhe(i);if(e.match(Phe))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(Dhe)){var t=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:t}}if(e.match(Lhe))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(Uhe)){var n=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:n}}var r=I_.exec(e);if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10)};var s=Ohe.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var a=Bhe.exec(e);if(a){var o=parseInt(""+a[1],10),u=parseInt(""+a[2],10)/100,c=parseInt(""+a[3],10)/100,p="rgb("+h5(o,u,c)+")",g=I_.exec(p);if(!g)throw new lu(4,e,p);return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10)}}var y=Ihe.exec(e.substring(0,50));if(y){var q=parseInt(""+y[1],10),S=parseInt(""+y[2],10)/100,R=parseInt(""+y[3],10)/100,M="rgb("+h5(q,S,R)+")",E=I_.exec(M);if(!E)throw new lu(4,e,M);return{red:parseInt(""+E[1],10),green:parseInt(""+E[2],10),blue:parseInt(""+E[3],10),alpha:parseFloat(""+y[4])>1?parseFloat(""+y[4])/100:parseFloat(""+y[4])}}throw new lu(5)}function Fhe(i){var e=i.red/255,t=i.green/255,n=i.blue/255,r=Math.max(e,t,n),s=Math.min(e,t,n),a=(r+s)/2;if(r===s)return i.alpha!==void 0?{hue:0,saturation:0,lightness:a,alpha:i.alpha}:{hue:0,saturation:0,lightness:a};var o,u=r-s,c=a>.5?u/(2-r-s):u/(r+s);switch(r){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;default:o=(e-t)/u+4;break}return o*=60,i.alpha!==void 0?{hue:o,saturation:c,lightness:a,alpha:i.alpha}:{hue:o,saturation:c,lightness:a}}function i0(i){return Fhe(hA(i))}var khe=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},gy=khe;function H0(i){var e=i.toString(16);return e.length===1?"0"+e:e}function F_(i){return H0(Math.round(i*255))}function zhe(i,e,t){return gy("#"+F_(i)+F_(e)+F_(t))}function xI(i,e,t){return h5(i,e,t,zhe)}function Ghe(i,e,t){if(typeof i=="object"&&e===void 0&&t===void 0)return xI(i.hue,i.saturation,i.lightness);throw new lu(1)}function Vhe(i,e,t,n){if(typeof i=="object"&&e===void 0&&t===void 0&&n===void 0)return i.alpha>=1?xI(i.hue,i.saturation,i.lightness):"rgba("+h5(i.hue,i.saturation,i.lightness)+","+i.alpha+")";throw new lu(2)}function qI(i,e,t){if(typeof i=="number"&&typeof e=="number"&&typeof t=="number")return gy("#"+H0(i)+H0(e)+H0(t));if(typeof i=="object"&&e===void 0&&t===void 0)return gy("#"+H0(i.red)+H0(i.green)+H0(i.blue));throw new lu(6)}function u9(i,e,t,n){if(typeof i=="object"&&e===void 0&&t===void 0&&n===void 0)return i.alpha>=1?qI(i.red,i.green,i.blue):"rgba("+i.red+","+i.green+","+i.blue+","+i.alpha+")";throw new lu(7)}var Hhe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},jhe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},Whe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},$he=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function r0(i){if(typeof i!="object")throw new lu(8);if(jhe(i))return u9(i);if(Hhe(i))return qI(i);if($he(i))return Vhe(i);if(Whe(i))return Ghe(i);throw new lu(8)}function bI(i,e,t){return function(){var r=t.concat(Array.prototype.slice.call(arguments));return r.length>=e?i.apply(this,r):bI(i,e,r)}}function So(i){return bI(i,i.length,[])}function Xhe(i,e){if(e==="transparent")return e;var t=i0(e);return r0(Wa({},t,{hue:t.hue+parseFloat(i)}))}So(Xhe);function TA(i,e,t){return Math.max(i,Math.min(e,t))}function Qhe(i,e){if(e==="transparent")return e;var t=i0(e);return r0(Wa({},t,{lightness:TA(0,1,t.lightness-parseFloat(i))}))}So(Qhe);function Yhe(i,e){if(e==="transparent")return e;var t=i0(e);return r0(Wa({},t,{saturation:TA(0,1,t.saturation-parseFloat(i))}))}So(Yhe);function Khe(i,e){if(e==="transparent")return e;var t=i0(e);return r0(Wa({},t,{lightness:TA(0,1,t.lightness+parseFloat(i))}))}So(Khe);function Zhe(i,e,t){if(e==="transparent")return t;if(t==="transparent")return e;if(i===0)return t;var n=hA(e),r=Wa({},n,{alpha:typeof n.alpha=="number"?n.alpha:1}),s=hA(t),a=Wa({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),o=r.alpha-a.alpha,u=parseFloat(i)*2-1,c=u*o===-1?u:u+o,p=1+u*o,g=(c/p+1)/2,y=1-g,q={red:Math.floor(r.red*g+a.red*y),green:Math.floor(r.green*g+a.green*y),blue:Math.floor(r.blue*g+a.blue*y),alpha:r.alpha*parseFloat(i)+a.alpha*(1-parseFloat(i))};return u9(q)}var Jhe=So(Zhe),SI=Jhe;function efe(i,e){if(e==="transparent")return e;var t=hA(e),n=typeof t.alpha=="number"?t.alpha:1,r=Wa({},t,{alpha:TA(0,1,(n*100+parseFloat(i)*100)/100)});return u9(r)}var tfe=So(efe),nfe=tfe;function ife(i,e){if(e==="transparent")return e;var t=i0(e);return r0(Wa({},t,{saturation:TA(0,1,t.saturation+parseFloat(i))}))}So(ife);function rfe(i,e){return e==="transparent"?e:r0(Wa({},i0(e),{hue:parseFloat(i)}))}So(rfe);function sfe(i,e){return e==="transparent"?e:r0(Wa({},i0(e),{lightness:parseFloat(i)}))}So(sfe);function afe(i,e){return e==="transparent"?e:r0(Wa({},i0(e),{saturation:parseFloat(i)}))}So(afe);function ofe(i,e){return e==="transparent"?e:SI(parseFloat(i),"rgb(0, 0, 0)",e)}So(ofe);function lfe(i,e){return e==="transparent"?e:SI(parseFloat(i),"rgb(255, 255, 255)",e)}So(lfe);function ufe(i,e){if(e==="transparent")return e;var t=hA(e),n=typeof t.alpha=="number"?t.alpha:1,r=Wa({},t,{alpha:TA(0,1,+(n*100-parseFloat(i)*100).toFixed(2)/100)});return u9(r)}So(ufe);var _y="http://www.w3.org/1999/xhtml";const qC={svg:"http://www.w3.org/2000/svg",xhtml:_y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function TI(i){var e=i+="",t=e.indexOf(":");return t>=0&&(e=i.slice(0,t))!=="xmlns"&&(i=i.slice(t+1)),qC.hasOwnProperty(e)?{space:qC[e],local:i}:i}function cfe(i){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===_y&&e.documentElement.namespaceURI===_y?e.createElement(i):e.createElementNS(t,i)}}function hfe(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function wI(i){var e=TI(i);return(e.local?hfe:cfe)(e)}function ffe(){}function EI(i){return i==null?ffe:function(){return this.querySelector(i)}}function dfe(i){typeof i!="function"&&(i=EI(i));for(var e=this._groups,t=e.length,n=new Array(t),r=0;r<t;++r)for(var s=e[r],a=s.length,o=n[r]=new Array(a),u,c,p=0;p<a;++p)(u=s[p])&&(c=i.call(u,u.__data__,p,s))&&("__data__"in u&&(c.__data__=u.__data__),o[p]=c);return new nl(n,this._parents)}function Afe(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function pfe(){return[]}function mfe(i){return i==null?pfe:function(){return this.querySelectorAll(i)}}function gfe(i){return function(){return Afe(i.apply(this,arguments))}}function _fe(i){typeof i=="function"?i=gfe(i):i=mfe(i);for(var e=this._groups,t=e.length,n=[],r=[],s=0;s<t;++s)for(var a=e[s],o=a.length,u,c=0;c<o;++c)(u=a[c])&&(n.push(i.call(u,u.__data__,c,a)),r.push(u));return new nl(n,r)}function vfe(i){return function(){return this.matches(i)}}function MI(i){return function(e){return e.matches(i)}}var yfe=Array.prototype.find;function xfe(i){return function(){return yfe.call(this.children,i)}}function qfe(){return this.firstElementChild}function bfe(i){return this.select(i==null?qfe:xfe(typeof i=="function"?i:MI(i)))}var Sfe=Array.prototype.filter;function Tfe(){return Array.from(this.children)}function wfe(i){return function(){return Sfe.call(this.children,i)}}function Efe(i){return this.selectAll(i==null?Tfe:wfe(typeof i=="function"?i:MI(i)))}function Mfe(i){typeof i!="function"&&(i=vfe(i));for(var e=this._groups,t=e.length,n=new Array(t),r=0;r<t;++r)for(var s=e[r],a=s.length,o=n[r]=[],u,c=0;c<a;++c)(u=s[c])&&i.call(u,u.__data__,c,s)&&o.push(u);return new nl(n,this._parents)}function RI(i){return new Array(i.length)}function Rfe(){return new nl(this._enter||this._groups.map(RI),this._parents)}function f5(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}f5.prototype={constructor:f5,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function Cfe(i){return function(){return i}}function Nfe(i,e,t,n,r,s){for(var a=0,o,u=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],n[a]=o):t[a]=new f5(i,s[a]);for(;a<u;++a)(o=e[a])&&(r[a]=o)}function Pfe(i,e,t,n,r,s,a){var o,u,c=new Map,p=e.length,g=s.length,y=new Array(p),q;for(o=0;o<p;++o)(u=e[o])&&(y[o]=q=a.call(u,u.__data__,o,e)+"",c.has(q)?r[o]=u:c.set(q,u));for(o=0;o<g;++o)q=a.call(i,s[o],o,s)+"",(u=c.get(q))?(n[o]=u,u.__data__=s[o],c.delete(q)):t[o]=new f5(i,s[o]);for(o=0;o<p;++o)(u=e[o])&&c.get(y[o])===u&&(r[o]=u)}function Dfe(i){return i.__data__}function Lfe(i,e){if(!arguments.length)return Array.from(this,Dfe);var t=e?Pfe:Nfe,n=this._parents,r=this._groups;typeof i!="function"&&(i=Cfe(i));for(var s=r.length,a=new Array(s),o=new Array(s),u=new Array(s),c=0;c<s;++c){var p=n[c],g=r[c],y=g.length,q=Ufe(i.call(p,p&&p.__data__,c,n)),S=q.length,R=o[c]=new Array(S),M=a[c]=new Array(S),E=u[c]=new Array(y);t(p,g,R,M,E,q,e);for(var U=0,P=0,O,F;U<S;++U)if(O=R[U]){for(U>=P&&(P=U+1);!(F=M[P])&&++P<S;);O._next=F||null}}return a=new nl(a,n),a._enter=o,a._exit=u,a}function Ufe(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function Ofe(){return new nl(this._exit||this._groups.map(RI),this._parents)}function Bfe(i,e,t){var n=this.enter(),r=this,s=this.exit();return typeof i=="function"?(n=i(n),n&&(n=n.selection())):n=n.append(i+""),e!=null&&(r=e(r),r&&(r=r.selection())),t==null?s.remove():t(s),n&&r?n.merge(r).order():r}function Ife(i){for(var e=i.selection?i.selection():i,t=this._groups,n=e._groups,r=t.length,s=n.length,a=Math.min(r,s),o=new Array(r),u=0;u<a;++u)for(var c=t[u],p=n[u],g=c.length,y=o[u]=new Array(g),q,S=0;S<g;++S)(q=c[S]||p[S])&&(y[S]=q);for(;u<r;++u)o[u]=t[u];return new nl(o,this._parents)}function Ffe(){for(var i=this._groups,e=-1,t=i.length;++e<t;)for(var n=i[e],r=n.length-1,s=n[r],a;--r>=0;)(a=n[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function kfe(i){i||(i=zfe);function e(g,y){return g&&y?i(g.__data__,y.__data__):!g-!y}for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s){for(var a=t[s],o=a.length,u=r[s]=new Array(o),c,p=0;p<o;++p)(c=a[p])&&(u[p]=c);u.sort(e)}return new nl(r,this._parents).order()}function zfe(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function Gfe(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function Vfe(){return Array.from(this)}function Hfe(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var n=i[e],r=0,s=n.length;r<s;++r){var a=n[r];if(a)return a}return null}function jfe(){let i=0;for(const e of this)++i;return i}function Wfe(){return!this.node()}function $fe(i){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,a=r.length,o;s<a;++s)(o=r[s])&&i.call(o,o.__data__,s,r);return this}function Xfe(i){return function(){this.removeAttribute(i)}}function Qfe(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Yfe(i,e){return function(){this.setAttribute(i,e)}}function Kfe(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function Zfe(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(i):this.setAttribute(i,t)}}function Jfe(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,t)}}function ede(i,e){var t=TI(i);if(arguments.length<2){var n=this.node();return t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}return this.each((e==null?t.local?Qfe:Xfe:typeof e=="function"?t.local?Jfe:Zfe:t.local?Kfe:Yfe)(t,e))}function CI(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function tde(i){return function(){this.style.removeProperty(i)}}function nde(i,e,t){return function(){this.style.setProperty(i,e,t)}}function ide(i,e,t){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(i):this.style.setProperty(i,n,t)}}function rde(i,e,t){return arguments.length>1?this.each((e==null?tde:typeof e=="function"?ide:nde)(i,e,t??"")):sde(this.node(),i)}function sde(i,e){return i.style.getPropertyValue(e)||CI(i).getComputedStyle(i,null).getPropertyValue(e)}function ade(i){return function(){delete this[i]}}function ode(i,e){return function(){this[i]=e}}function lde(i,e){return function(){var t=e.apply(this,arguments);t==null?delete this[i]:this[i]=t}}function ude(i,e){return arguments.length>1?this.each((e==null?ade:typeof e=="function"?lde:ode)(i,e)):this.node()[i]}function NI(i){return i.trim().split(/^|\s+/)}function ob(i){return i.classList||new PI(i)}function PI(i){this._node=i,this._names=NI(i.getAttribute("class")||"")}PI.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function DI(i,e){for(var t=ob(i),n=-1,r=e.length;++n<r;)t.add(e[n])}function LI(i,e){for(var t=ob(i),n=-1,r=e.length;++n<r;)t.remove(e[n])}function cde(i){return function(){DI(this,i)}}function hde(i){return function(){LI(this,i)}}function fde(i,e){return function(){(e.apply(this,arguments)?DI:LI)(this,i)}}function dde(i,e){var t=NI(i+"");if(arguments.length<2){for(var n=ob(this.node()),r=-1,s=t.length;++r<s;)if(!n.contains(t[r]))return!1;return!0}return this.each((typeof e=="function"?fde:e?cde:hde)(t,e))}function Ade(){this.textContent=""}function pde(i){return function(){this.textContent=i}}function mde(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function gde(i){return arguments.length?this.each(i==null?Ade:(typeof i=="function"?mde:pde)(i)):this.node().textContent}function _de(){this.innerHTML=""}function vde(i){return function(){this.innerHTML=i}}function yde(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function xde(i){return arguments.length?this.each(i==null?_de:(typeof i=="function"?yde:vde)(i)):this.node().innerHTML}function qde(){this.nextSibling&&this.parentNode.appendChild(this)}function bde(){return this.each(qde)}function Sde(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tde(){return this.each(Sde)}function wde(i){var e=typeof i=="function"?i:wI(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ede(){return null}function Mde(i,e){var t=typeof i=="function"?i:wI(i),n=e==null?Ede:typeof e=="function"?e:EI(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})}function Rde(){var i=this.parentNode;i&&i.removeChild(this)}function Cde(){return this.each(Rde)}function Nde(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function Pde(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function Dde(i){return this.select(i?Pde:Nde)}function Lde(i){return arguments.length?this.property("__data__",i):this.node().__data__}function Ude(i){return function(e){i.call(this,e,this.__data__)}}function Ode(i){return i.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function Bde(i){return function(){var e=this.__on;if(e){for(var t=0,n=-1,r=e.length,s;t<r;++t)s=e[t],(!i.type||s.type===i.type)&&s.name===i.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function Ide(i,e,t){return function(){var n=this.__on,r,s=Ude(e);if(n){for(var a=0,o=n.length;a<o;++a)if((r=n[a]).type===i.type&&r.name===i.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(i.type,s,t),r={type:i.type,name:i.name,value:e,listener:s,options:t},n?n.push(r):this.__on=[r]}}function Fde(i,e,t){var n=Ode(i+""),r,s=n.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,c=o.length,p;u<c;++u)for(r=0,p=o[u];r<s;++r)if((a=n[r]).type===p.type&&a.name===p.name)return p.value}return}for(o=e?Ide:Bde,r=0;r<s;++r)this.each(o(n[r],e,t));return this}function UI(i,e,t){var n=CI(i),r=n.CustomEvent;typeof r=="function"?r=new r(e,t):(r=n.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),i.dispatchEvent(r)}function kde(i,e){return function(){return UI(this,i,e)}}function zde(i,e){return function(){return UI(this,i,e.apply(this,arguments))}}function Gde(i,e){return this.each((typeof e=="function"?zde:kde)(i,e))}function*Vde(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var n=i[e],r=0,s=n.length,a;r<s;++r)(a=n[r])&&(yield a)}var Hde=[null];function nl(i,e){this._groups=i,this._parents=e}function jde(){return this}nl.prototype={constructor:nl,select:dfe,selectAll:_fe,selectChild:bfe,selectChildren:Efe,filter:Mfe,data:Lfe,enter:Rfe,exit:Ofe,join:Bfe,merge:Ife,selection:jde,order:Ffe,sort:kfe,call:Gfe,nodes:Vfe,node:Hfe,size:jfe,empty:Wfe,each:$fe,attr:ede,style:rde,property:ude,classed:dde,text:gde,html:xde,raise:bde,lower:Tde,append:wde,insert:Mde,remove:Cde,clone:Dde,datum:Lde,on:Fde,dispatch:Gde,[Symbol.iterator]:Vde};function Wde(i){return typeof i=="string"?new nl([[document.querySelector(i)]],[document.documentElement]):new nl([[i]],Hde)}function $de(i){let e;for(;e=i.sourceEvent;)i=e;return i}function Xde(i,e){if(i=$de(i),e===void 0&&(e=i.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var n=t.createSVGPoint();return n.x=i.clientX,n.y=i.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop]}}return[i.pageX,i.pageY]}var t4,gr,OI,BI,Y0,bC,II,FI,kI,lb,vy,yy,w3={},zI=[],Qde=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,c9=Array.isArray;function uu(i,e){for(var t in e)i[t]=e[t];return i}function ub(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function Yde(i,e,t){var n,r,s,a={};for(s in e)s=="key"?n=e[s]:s=="ref"?r=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?t4.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(s in i.defaultProps)a[s]==null&&(a[s]=i.defaultProps[s]);return Np(i,a,n,r,null)}function Np(i,e,t,n,r){var s={type:i,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++OI,__i:-1,__u:0};return r==null&&gr.vnode!=null&&gr.vnode(s),s}function h9(i){return i.children}function c8(i,e){this.props=i,this.context=e}function fA(i,e){if(e==null)return i.__?fA(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?fA(i):null}function GI(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return GI(i)}}function SC(i){(!i.__d&&(i.__d=!0)&&Y0.push(i)&&!d5.__r++||bC!=gr.debounceRendering)&&((bC=gr.debounceRendering)||II)(d5)}function d5(){for(var i,e,t,n,r,s,a,o=1;Y0.length;)Y0.length>o&&Y0.sort(FI),i=Y0.shift(),o=Y0.length,i.__d&&(t=void 0,r=(n=(e=i).__v).__e,s=[],a=[],e.__P&&((t=uu({},n)).__v=n.__v+1,gr.vnode&&gr.vnode(t),cb(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,s,r??fA(n),!!(32&n.__u),a),t.__v=n.__v,t.__.__k[t.__i]=t,jI(s,t,a),t.__e!=r&&GI(t)));d5.__r=0}function VI(i,e,t,n,r,s,a,o,u,c,p){var g,y,q,S,R,M,E=n&&n.__k||zI,U=e.length;for(u=Kde(t,e,E,u,U),g=0;g<U;g++)(q=t.__k[g])!=null&&(y=q.__i==-1?w3:E[q.__i]||w3,q.__i=g,M=cb(i,q,y,r,s,a,o,u,c,p),S=q.__e,q.ref&&y.ref!=q.ref&&(y.ref&&hb(y.ref,null,q),p.push(q.ref,q.__c||S,q)),R==null&&S!=null&&(R=S),4&q.__u||y.__k===q.__k?u=HI(q,u,i):typeof q.type=="function"&&M!==void 0?u=M:S&&(u=S.nextSibling),q.__u&=-7);return t.__e=R,u}function Kde(i,e,t,n,r){var s,a,o,u,c,p=t.length,g=p,y=0;for(i.__k=new Array(r),s=0;s<r;s++)(a=e[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(u=s+y,(a=i.__k[s]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Np(null,a,null,null,null):c9(a)?Np(h9,{children:a},null,null,null):a.constructor==null&&a.__b>0?Np(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=i,a.__b=i.__b+1,o=null,(c=a.__i=Zde(a,t,u,g))!=-1&&(g--,(o=t[c])&&(o.__u|=2)),o==null||o.__v==null?(c==-1&&(r>p?y--:r<p&&y++),typeof a.type!="function"&&(a.__u|=4)):c!=u&&(c==u-1?y--:c==u+1?y++:(c>u?y--:y++,a.__u|=4))):i.__k[s]=null;if(g)for(s=0;s<p;s++)(o=t[s])!=null&&(2&o.__u)==0&&(o.__e==n&&(n=fA(o)),$I(o,o));return n}function HI(i,e,t){var n,r;if(typeof i.type=="function"){for(n=i.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=i,e=HI(n[r],e,t));return e}i.__e!=e&&(e&&i.type&&!t.contains(e)&&(e=fA(i)),t.insertBefore(i.__e,e||null),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Zde(i,e,t,n){var r,s,a=i.key,o=i.type,u=e[t];if(u===null&&i.key==null||u&&a==u.key&&o==u.type&&(2&u.__u)==0)return t;if(n>(u!=null&&(2&u.__u)==0?1:0))for(r=t-1,s=t+1;r>=0||s<e.length;){if(r>=0){if((u=e[r])&&(2&u.__u)==0&&a==u.key&&o==u.type)return r;r--}if(s<e.length){if((u=e[s])&&(2&u.__u)==0&&a==u.key&&o==u.type)return s;s++}}return-1}function TC(i,e,t){e[0]=="-"?i.setProperty(e,t??""):i[e]=t==null?"":typeof t!="number"||Qde.test(e)?t:t+"px"}function F6(i,e,t,n,r){var s;e:if(e=="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof n=="string"&&(i.style.cssText=n=""),n)for(e in n)t&&e in t||TC(i.style,e,"");if(t)for(e in t)n&&t[e]==n[e]||TC(i.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(kI,"$1")),e=e.toLowerCase()in i||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),i.l||(i.l={}),i.l[e+s]=t,t?n?t.u=n.u:(t.u=lb,i.addEventListener(e,s?yy:vy,s)):i.removeEventListener(e,s?yy:vy,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&t==1?"":t))}}function wC(i){return function(e){if(this.l){var t=this.l[e.type+i];if(e.t==null)e.t=lb++;else if(e.t<t.u)return;return t(gr.event?gr.event(e):e)}}}function cb(i,e,t,n,r,s,a,o,u,c){var p,g,y,q,S,R,M,E,U,P,O,F,I,z,j,k,G,$=e.type;if(e.constructor!=null)return null;128&t.__u&&(u=!!(32&t.__u),s=[o=e.__e=t.__e]),(p=gr.__b)&&p(e);e:if(typeof $=="function")try{if(E=e.props,U="prototype"in $&&$.prototype.render,P=(p=$.contextType)&&n[p.__c],O=p?P?P.props.value:p.__:n,t.__c?M=(g=e.__c=t.__c).__=g.__E:(U?e.__c=g=new $(E,O):(e.__c=g=new c8(E,O),g.constructor=$,g.render=eAe),P&&P.sub(g),g.props=E,g.state||(g.state={}),g.context=O,g.__n=n,y=g.__d=!0,g.__h=[],g._sb=[]),U&&g.__s==null&&(g.__s=g.state),U&&$.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=uu({},g.__s)),uu(g.__s,$.getDerivedStateFromProps(E,g.__s))),q=g.props,S=g.state,g.__v=e,y)U&&$.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),U&&g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if(U&&$.getDerivedStateFromProps==null&&E!==q&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(E,O),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(E,g.__s,O)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(g.props=E,g.state=g.__s,g.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(te){te&&(te.__=e)}),F=0;F<g._sb.length;F++)g.__h.push(g._sb[F]);g._sb=[],g.__h.length&&a.push(g);break e}g.componentWillUpdate!=null&&g.componentWillUpdate(E,g.__s,O),U&&g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(q,S,R)})}if(g.context=O,g.props=E,g.__P=i,g.__e=!1,I=gr.__r,z=0,U){for(g.state=g.__s,g.__d=!1,I&&I(e),p=g.render(g.props,g.state,g.context),j=0;j<g._sb.length;j++)g.__h.push(g._sb[j]);g._sb=[]}else do g.__d=!1,I&&I(e),p=g.render(g.props,g.state,g.context),g.state=g.__s;while(g.__d&&++z<25);g.state=g.__s,g.getChildContext!=null&&(n=uu(uu({},n),g.getChildContext())),U&&!y&&g.getSnapshotBeforeUpdate!=null&&(R=g.getSnapshotBeforeUpdate(q,S)),k=p,p!=null&&p.type===h9&&p.key==null&&(k=WI(p.props.children)),o=VI(i,c9(k)?k:[k],e,t,n,r,s,a,o,u,c),g.base=e.__e,e.__u&=-161,g.__h.length&&a.push(g),M&&(g.__E=g.__=null)}catch(te){if(e.__v=null,u||s!=null)if(te.then){for(e.__u|=u?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,e.__e=o}else for(G=s.length;G--;)ub(s[G]);else e.__e=t.__e,e.__k=t.__k;gr.__e(te,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):o=e.__e=Jde(t.__e,e,t,n,r,s,a,u,c);return(p=gr.diffed)&&p(e),128&e.__u?void 0:o}function jI(i,e,t){for(var n=0;n<t.length;n++)hb(t[n],t[++n],t[++n]);gr.__c&&gr.__c(e,i),i.some(function(r){try{i=r.__h,r.__h=[],i.some(function(s){s.call(r)})}catch(s){gr.__e(s,r.__v)}})}function WI(i){return typeof i!="object"||i==null||i.__b&&i.__b>0?i:c9(i)?i.map(WI):uu({},i)}function Jde(i,e,t,n,r,s,a,o,u){var c,p,g,y,q,S,R,M=t.props,E=e.props,U=e.type;if(U=="svg"?r="http://www.w3.org/2000/svg":U=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((q=s[c])&&"setAttribute"in q==!!U&&(U?q.localName==U:q.nodeType==3)){i=q,s[c]=null;break}}if(i==null){if(U==null)return document.createTextNode(E);i=document.createElementNS(r,U,E.is&&E),o&&(gr.__m&&gr.__m(e,s),o=!1),s=null}if(U==null)M===E||o&&i.data==E||(i.data=E);else{if(s=s&&t4.call(i.childNodes),M=t.props||w3,!o&&s!=null)for(M={},c=0;c<i.attributes.length;c++)M[(q=i.attributes[c]).name]=q.value;for(c in M)if(q=M[c],c!="children"){if(c=="dangerouslySetInnerHTML")g=q;else if(!(c in E)){if(c=="value"&&"defaultValue"in E||c=="checked"&&"defaultChecked"in E)continue;F6(i,c,null,q,r)}}for(c in E)q=E[c],c=="children"?y=q:c=="dangerouslySetInnerHTML"?p=q:c=="value"?S=q:c=="checked"?R=q:o&&typeof q!="function"||M[c]===q||F6(i,c,q,M[c],r);if(p)o||g&&(p.__html==g.__html||p.__html==i.innerHTML)||(i.innerHTML=p.__html),e.__k=[];else if(g&&(i.innerHTML=""),VI(e.type=="template"?i.content:i,c9(y)?y:[y],e,t,n,U=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,a,s?s[0]:t.__k&&fA(t,0),o,u),s!=null)for(c=s.length;c--;)ub(s[c]);o||(c="value",U=="progress"&&S==null?i.removeAttribute("value"):S!=null&&(S!==i[c]||U=="progress"&&!S||U=="option"&&S!=M[c])&&F6(i,c,S,M[c],r),c="checked",R!=null&&R!=i[c]&&F6(i,c,R,M[c],r))}return i}function hb(i,e,t){try{if(typeof i=="function"){var n=typeof i.__u=="function";n&&i.__u(),n&&e==null||(i.__u=i(e))}else i.current=e}catch(r){gr.__e(r,t)}}function $I(i,e,t){var n,r;if(gr.unmount&&gr.unmount(i),(n=i.ref)&&(n.current&&n.current!=i.__e||hb(n,null,e)),(n=i.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){gr.__e(s,e)}n.base=n.__P=null}if(n=i.__k)for(r=0;r<n.length;r++)n[r]&&$I(n[r],e,t||typeof i.type!="function");t||ub(i.__e),i.__c=i.__=i.__e=void 0}function eAe(i,e,t){return this.constructor(i,t)}function tAe(i,e,t){var n,r,s,a;e==document&&(e=document.documentElement),gr.__&&gr.__(i,e),r=(n=!1)?null:e.__k,s=[],a=[],cb(e,i=e.__k=Yde(h9,null,[i]),r||w3,w3,e.namespaceURI,r?null:e.firstChild?t4.call(e.childNodes):null,s,r?r.__e:e.firstChild,n,a),jI(s,i,a)}function XI(i,e,t){var n,r,s,a,o=uu({},i.props);for(s in i.type&&i.type.defaultProps&&(a=i.type.defaultProps),e)s=="key"?n=e[s]:s=="ref"?r=e[s]:o[s]=e[s]==null&&a!=null?a[s]:e[s];return arguments.length>2&&(o.children=arguments.length>3?t4.call(arguments,2):t),Np(i.type,o,n||i.key,r||i.ref,null)}t4=zI.slice,gr={__e:function(i,e,t,n){for(var r,s,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(i)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(i,n||{}),a=r.__d),a)return r.__E=r}catch(o){i=o}throw i}},OI=0,BI=function(i){return i!=null&&i.constructor==null},c8.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=uu({},this.state),typeof i=="function"&&(i=i(uu({},t),this.props)),i&&uu(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),SC(this))},c8.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),SC(this))},c8.prototype.render=h9,Y0=[],II=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,FI=function(i,e){return i.__v.__b-e.__v.__b},d5.__r=0,kI=/(PointerCapture)$|Capture$/i,lb=0,vy=wC(!1),yy=wC(!0);function EC(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function nAe(i){if(Array.isArray(i))return i}function iAe(i,e,t){return(e=uAe(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function rAe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],u=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(u=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(p){c=!0,r=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function sAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MC(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function aAe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MC(Object(t),!0).forEach(function(n){iAe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):MC(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function oAe(i,e){return nAe(i)||rAe(i,e)||cAe(i,e)||sAe()}function lAe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function uAe(i){var e=lAe(i,"string");return typeof e=="symbol"?e:e+""}function A5(i){"@babel/helpers - typeof";return A5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A5(i)}function cAe(i,e){if(i){if(typeof i=="string")return EC(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?EC(i,e):void 0}}var xy=function(e){if(A5(e)!=="object")return e;var t=XI(e);if(t.props){var n;t.props=aAe({},t.props),t!=null&&(n=t.props)!==null&&n!==void 0&&n.children&&(t.props.children=Array.isArray(t.props.children)?t.props.children.map(xy):xy(t.props.children))}return t},hAe=function(e){return BI(XI(e))},fAe=function(e,t){delete t.__k,tAe(xy(e),t)};function dAe(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var AAe=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;dAe(AAe);var pAe=ls({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.style,s=r===void 0?{}:r,a=!!e&&A5(e)==="object"&&!!e.node&&typeof e.node=="function",o=Wde(a?e.node():e);o.style("position")==="static"&&o.style("position","relative"),t.tooltipEl=o.append("div").attr("class","float-tooltip-kap"),Object.entries(s).forEach(function(c){var p=oAe(c,2),g=p[0],y=p[1];return t.tooltipEl.style(g,y)}),t.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));t.mouseInside=!1,o.on("mousemove.".concat(u),function(c){t.mouseInside=!0;var p=Xde(c),g=o.node(),y=g.offsetWidth,q=g.offsetHeight,S=[t.offsetX===null||t.offsetX===void 0?"-".concat(p[0]/y*100,"%"):typeof t.offsetX=="number"?"calc(-50% + ".concat(t.offsetX,"px)"):t.offsetX,t.offsetY===null||t.offsetY===void 0?q>130&&q-p[1]<100?"calc(-100% - 6px)":"21px":typeof t.offsetY=="number"?t.offsetY<0?"calc(-100% - ".concat(Math.abs(t.offsetY),"px)"):"".concat(t.offsetY,"px"):t.offsetY];t.tooltipEl.style("left",p[0]+"px").style("top",p[1]+"px").style("transform","translate(".concat(S.join(","),")")),t.content&&t.tooltipEl.style("display","inline")}),o.on("mouseover.".concat(u),function(){t.mouseInside=!0,t.content&&t.tooltipEl.style("display","inline")}),o.on("mouseout.".concat(u),function(){t.mouseInside=!1,t.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):hAe(e.content)?(e.tooltipEl.text(""),fAe(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function mAe(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var gAe=`.scene-nav-info {
  position: absolute;
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;mAe(gAe);function qy(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function _Ae(i){if(Array.isArray(i))return i}function vAe(i){if(Array.isArray(i))return qy(i)}function yAe(i,e,t){return(e=EAe(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function xAe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function qAe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],u=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(u=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(p){c=!0,r=p}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function bAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TAe(i,e){return _Ae(i)||qAe(i,e)||QI(i,e)||bAe()}function I0(i){return vAe(i)||xAe(i)||QI(i)||SAe()}function wAe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function EAe(i){var e=wAe(i,"string");return typeof e=="symbol"?e:e+""}function QI(i,e){if(i){if(typeof i=="string")return qy(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?qy(i,e):void 0}}var pr=window.THREE?window.THREE:{WebGLRenderer:k$,Scene:b5,PerspectiveCamera:bs,Raycaster:nV,SRGBColorSpace:nn,TextureLoader:mx,Vector2:rt,Vector3:le,Box3:Uc,Color:Xt,Mesh:yi,SphereGeometry:Mu,MeshBasicMaterial:jo,BackSide:Oi,Clock:IN},YI=ls({props:{width:{default:window.innerWidth,onChange:function(e,t,n){isNaN(e)&&(t.width=n)}},height:{default:window.innerHeight,onChange:function(e,t,n){isNaN(e)&&(t.height=n)}},viewOffset:{default:[0,0]},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.tooltip&&t.tooltip.content(null)},triggerUpdate:!1},pointerRaycasterThrottleMs:{default:50,triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},pointsHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(a){return a.render(e.scene,e.camera)});var t=+new Date;if(e.enablePointerInteraction&&t-e.lastRaycasterCheck>=e.pointerRaycasterThrottleMs){e.lastRaycasterCheck=t;var n=null;if(e.hoverDuringDrag||!e.isPointerDragging){var r=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y);e.hoverOrderComparator&&r.sort(function(a,o){return e.hoverOrderComparator(a.object,o.object)});var s=r.find(function(a){return e.hoverFilter(a.object)})||null;n=s?s.object:null,e.intersection=s||null}n!==e.hoverObj&&(e.onHover(n,e.hoverObj,e.intersection),e.tooltip.content(n&&_t(e.tooltipContent)(n,e.intersection)||null),e.hoverObj=n)}e.tweenGroup.update()}return this},getPointerPos:function(e){var t=e.pointerPos,n=t.x,r=t.y;return{x:n,y:r}},cameraPosition:function(e,t,n,r){var s=e.camera;if(t&&e.initialised){var a=t,o=n||{x:0,y:0,z:0};if(!r)p(a),g(o);else{var u=Object.assign({},s.position),c=y();e.tweenGroup.add(new ia(u).to(a,r).easing(Yr.Quadratic.Out).onUpdate(p).start()),e.tweenGroup.add(new ia(c).to(o,r/3).easing(Yr.Quadratic.Out).onUpdate(g).start())}return this}return Object.assign({},s.position,{lookAt:y()});function p(q){var S=q.x,R=q.y,M=q.z;S!==void 0&&(s.position.x=S),R!==void 0&&(s.position.y=R),M!==void 0&&(s.position.z=M)}function g(q){var S=new pr.Vector3(q.x,q.y,q.z);e.controls.target?e.controls.target=S:s.lookAt(S)}function y(){return Object.assign(new pr.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,r=arguments.length,s=new Array(r>3?r-3:0),a=3;a<r;a++)s[a-3]=arguments[a];return this.fitToBbox(this.getBbox.apply(this,s),t,n)},fitToBbox:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(t){var a=new pr.Vector3(0,0,0),o=Math.max.apply(Math,I0(Object.entries(t).map(function(q){var S=TAe(q,2),R=S[0],M=S[1];return Math.max.apply(Math,I0(M.map(function(E){return Math.abs(a[R]-E)})))})))*2,u=(1-r*2/e.height)*s.fov,c=o/Math.atan(u*Math.PI/180),p=c/s.aspect,g=Math.max(c,p);if(g>0){var y=a.clone().sub(s.position).normalize().multiplyScalar(-g);this.cameraPosition(y,a,n)}}return this},getBbox:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},n=new pr.Box3(new pr.Vector3(0,0,0),new pr.Vector3(0,0,0)),r=e.objects.filter(t);return r.length?(r.forEach(function(s){return n.expandByObject(s)}),Object.assign.apply(Object,I0(["x","y","z"].map(function(s){return yAe({},s,[n.min[s],n.max[s]])})))):null},getScreenCoords:function(e,t,n,r){var s=new pr.Vector3(t,n,r);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new pr.Vector2(t/e.width*2-1,-(n/e.height)*2+1),a=new pr.Raycaster;return a.setFromCamera(s,e.camera),Object.assign({},a.ray.at(r,new pr.Vector3))},intersectingObjects:function(e,t,n){var r=new pr.Vector2(t/e.width*2-1,-(n/e.height)*2+1),s=new pr.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.params.Points.threshold=e.pointsHoverPrecision,s.setFromCamera(r,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new pr.Scene,camera:new pr.PerspectiveCamera,clock:new pr.Clock,tweenGroup:new R5,lastRaycasterCheck:0}},init:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.controlType,s=r===void 0?"trackball":r,a=n.useWebGPU,o=a===void 0?!1:a,u=n.rendererConfig,c=u===void 0?{}:u,p=n.extraRenderers,g=p===void 0?[]:p,y=n.waitForLoadComplete,q=y===void 0?!0:y;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.tooltip=new pAe(t.container),t.pointerPos=new pr.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(S){return t.container.addEventListener(S,function(R){if(S==="pointerdown"&&(t.isPointerPressed=!0),!t.isPointerDragging&&R.type==="pointermove"&&(R.pressure>0||t.isPointerPressed)&&(R.pointerType!=="touch"||R.movementX===void 0||[R.movementX,R.movementY].some(function(U){return Math.abs(U)>1}))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var M=E(t.container);t.pointerPos.x=R.pageX-M.left,t.pointerPos.y=R.pageY-M.top}function E(U){var P=U.getBoundingClientRect(),O=window.pageXOffset||document.documentElement.scrollLeft,F=window.pageYOffset||document.documentElement.scrollTop;return{top:P.top+F,left:P.left+O}}},{passive:!0})}),t.container.addEventListener("pointerup",function(S){t.isPointerPressed=!1,!(t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag))&&requestAnimationFrame(function(){S.button===0&&t.onClick(t.hoverObj||null,S,t.intersection),S.button===2&&t.onRightClick&&t.onRightClick(t.hoverObj||null,S,t.intersection)})},{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",function(S){t.onRightClick&&S.preventDefault()}),t.renderer=new(o?WB:pr.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},c)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.extraRenderers=g,t.extraRenderers.forEach(function(S){S.domElement.style.position="absolute",S.domElement.style.top="0px",S.domElement.style.pointerEvents="none",t.container.appendChild(S.domElement)}),t.postProcessingComposer=new She(t.renderer),t.postProcessingComposer.addPass(new The(t.scene,t.camera)),t.controls=new{trackball:D0e,orbit:Q0e,fly:uhe}[s](t.camera,t.renderer.domElement),s==="fly"&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",function(){t.controlsEngaged=!0}),t.controls.addEventListener("change",function(){t.controlsEngaged&&(t.controlsDragging=!0)}),t.controls.addEventListener("end",function(){t.controlsEngaged=!1,t.controlsDragging=!1})),[t.renderer,t.postProcessingComposer].concat(I0(t.extraRenderers)).forEach(function(S){return S.setSize(t.width,t.height)}),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new pr.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!q,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))){var n,r=e.width,s=e.height;e.container.style.width="".concat(r,"px"),e.container.style.height="".concat(s,"px"),[e.renderer,e.postProcessingComposer].concat(I0(e.extraRenderers)).forEach(function(q){return q.setSize(r,s)}),e.camera.aspect=r/s;var a=e.viewOffset.slice(0,2);a.some(function(q){return q})&&(n=e.camera).setViewOffset.apply(n,[r,s].concat(I0(a),[r,s])),e.camera.updateProjectionMatrix()}if(t.hasOwnProperty("viewOffset")){var o,u=e.width,c=e.height,p=e.viewOffset.slice(0,2);p.some(function(q){return q})?(o=e.camera).setViewOffset.apply(o,[u,c].concat(I0(p),[u,c])):e.camera.clearViewOffset()}if(t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new pr.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var g=hA(e.backgroundColor).alpha;g===void 0&&(g=1),e.renderer.setClearColor(new pr.Color(nfe(1,e.backgroundColor)),g)}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new pr.TextureLoader().load(e.backgroundImageUrl,function(q){q.colorSpace=pr.SRGBColorSpace,e.skysphere.material=new pr.MeshBasicMaterial({map:q,side:pr.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&y()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&y())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("lights")&&((t.lights||[]).forEach(function(q){return e.scene.remove(q)}),e.lights.forEach(function(q){return e.scene.add(q)})),t.hasOwnProperty("objects")&&((t.objects||[]).forEach(function(q){return e.scene.remove(q)}),e.objects.forEach(function(q){return e.scene.add(q)}));function y(){e.loadComplete=e.scene.visible=!0}}});function MAe(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var RAe=`.scene-container .clickable {
  cursor: pointer;
}`;MAe(RAe);function by(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function CAe(i){if(Array.isArray(i))return by(i)}function n4(i,e,t){return(e=OAe(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function NAe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function PAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RC(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function K0(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RC(Object(t),!0).forEach(function(n){n4(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):RC(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function DAe(i,e){if(i==null)return{};var t,n,r=LAe(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function LAe(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}function f9(i){return CAe(i)||NAe(i)||BAe(i)||PAe()}function UAe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function OAe(i){var e=UAe(i,"string");return typeof e=="symbol"?e:e+""}function BAe(i,e){if(i){if(typeof i=="string")return by(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?by(i,e):void 0}}function KI(i,e){var t=new e;return t._destructor&&t._destructor(),{linkProp:function(r){return{default:t[r](),onChange:function(a,o){o[i][r](a)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var a=s[i],o=arguments.length,u=new Array(o>1?o-1:0),c=1;c<o;c++)u[c-1]=arguments[c];var p=a[r].apply(a,u);return p===a?this:p}}}}var IAe=["rendererConfig","waitForGlobeReady"],rp=K0(K0({},window.THREE?window.THREE:{AmbientLight:ON,DirectionalLight:UN,Vector2:rt,REVISION:pA}),{},{CSS2DRenderer:G$}),ZI=KI("globe",_I),FAe=Object.assign.apply(Object,f9(["globeImageUrl","bumpImageUrl","globeTileEngineUrl","globeTileEngineMaxLevel","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude","onGlobeReady","pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration","arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration","polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration","pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration","heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration","hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration","hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration","tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration","particlesData","particlesList","particleLat","particleLng","particleAltitude","particlesSize","particlesSizeAttenuation","particlesColor","particlesTexture","ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod","labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration","htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlElementVisibilityModifier","htmlTransitionDuration","objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject","customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(i){return n4({},i,ZI.linkProp(i))}))),kAe=Object.assign.apply(Object,f9(["globeMaterial","getGlobeRadius","getCoords","toGeoCoords"].map(function(i){return n4({},i,ZI.linkMethod(i))}))),JI=KI("renderObjs",YI),zAe=Object.assign.apply(Object,f9(["width","height","backgroundColor","backgroundImageUrl","enablePointerInteraction"].map(function(i){return n4({},i,JI.linkProp(i))}))),GAe=Object.assign.apply(Object,f9(["lights","postProcessingComposer"].map(function(i){return n4({},i,JI.linkMethod(i))}))),VAe=ls({props:K0(K0({onZoom:{triggerUpdate:!1},onGlobeClick:{triggerUpdate:!1},onGlobeRightClick:{triggerUpdate:!1},pointLabel:{default:"name",triggerUpdate:!1},onPointClick:{triggerUpdate:!1},onPointRightClick:{triggerUpdate:!1},onPointHover:{triggerUpdate:!1},arcLabel:{default:"name",triggerUpdate:!1},onArcClick:{triggerUpdate:!1},onArcRightClick:{triggerUpdate:!1},onArcHover:{triggerUpdate:!1},polygonLabel:{default:"name",triggerUpdate:!1},onPolygonClick:{triggerUpdate:!1},onPolygonRightClick:{triggerUpdate:!1},onPolygonHover:{triggerUpdate:!1},pathLabel:{default:"name",triggerUpdate:!1},onPathClick:{triggerUpdate:!1},onPathRightClick:{triggerUpdate:!1},onPathHover:{triggerUpdate:!1},onHeatmapClick:{triggerUpdate:!1},onHeatmapRightClick:{triggerUpdate:!1},onHeatmapHover:{triggerUpdate:!1},hexLabel:{triggerUpdate:!1},onHexClick:{triggerUpdate:!1},onHexRightClick:{triggerUpdate:!1},onHexHover:{triggerUpdate:!1},hexPolygonLabel:{triggerUpdate:!1},onHexPolygonClick:{triggerUpdate:!1},onHexPolygonRightClick:{triggerUpdate:!1},onHexPolygonHover:{triggerUpdate:!1},tileLabel:{default:"name",triggerUpdate:!1},onTileClick:{triggerUpdate:!1},onTileRightClick:{triggerUpdate:!1},onTileHover:{triggerUpdate:!1},particleLabel:{default:"name",triggerUpdate:!1},onParticleClick:{triggerUpdate:!1},onParticleRightClick:{triggerUpdate:!1},onParticleHover:{triggerUpdate:!1},labelLabel:{triggerUpdate:!1},onLabelClick:{triggerUpdate:!1},onLabelRightClick:{triggerUpdate:!1},onLabelHover:{triggerUpdate:!1},objectLabel:{default:"name",triggerUpdate:!1},onObjectClick:{triggerUpdate:!1},onObjectRightClick:{triggerUpdate:!1},onObjectHover:{triggerUpdate:!1},customLayerLabel:{default:"name",triggerUpdate:!1},onCustomLayerClick:{triggerUpdate:!1},onCustomLayerRightClick:{triggerUpdate:!1},onCustomLayerHover:{triggerUpdate:!1},pointerEventsFilter:{default:function(){return!0},triggerUpdate:!1},lineHoverPrecision:{default:.2,triggerUpdate:!1,onChange:function(e,t){t.renderObjs.lineHoverPrecision(e),t.renderObjs.pointsHoverPrecision(e)}},globeOffset:{default:[0,0],triggerUpdate:!1,onChange:function(e,t){return Array.isArray(e)&&e.length===2&&t.renderObjs.viewOffset(e.map(function(n){return-n}))}}},FAe),zAe),methods:K0(K0({pauseAnimation:function(e){var t;return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),(t=e.globe)===null||t===void 0||t.pauseAnimation(),this},resumeAnimation:function(e){var t;return e.animationFrameRequestId===null&&this._animationCycle(),(t=e.globe)===null||t===void 0||t.resumeAnimation(),this},_animationCycle:function(e){e.renderObjs.tick(),e.tweenGroup.update(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},pointOfView:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=a();if(t.lat===void 0&&t.lng===void 0&&t.altitude===void 0)return r;var s=Object.assign({},r,t);if(["lat","lng","altitude"].forEach(function(u){return s[u]=+s[u]}),!n)o(s);else{for(;r.lng-s.lng>180;)r.lng-=360;for(;r.lng-s.lng<-180;)r.lng+=360;e.tweenGroup.add(new ia(r).to(s,n).easing(Yr.Cubic.InOut).onUpdate(o).start())}return this;function a(){return e.globe.toGeoCoords(e.renderObjs.cameraPosition())}function o(u){var c=u.lat,p=u.lng,g=u.altitude;e.renderObjs.cameraPosition(e.globe.getCoords(c,p,g)),e.globe.setPointOfView(e.renderObjs.camera())}},getScreenCoords:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var a=(t=e.globe).getCoords.apply(t,r);return e.renderObjs.getScreenCoords(a.x,a.y,a.z)},toGlobeCoords:function(e,t,n){var r=e.renderObjs.intersectingObjects(t,n).find(function(u){return(u.object.__globeObjType||u.object.parent.__globeObjType)==="globe"});if(!r)return null;var s=e.globe.toGeoCoords(r.point),a=s.lat,o=s.lng;return{lat:a,lng:o}},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},_destructor:function(e){e.globe._destructor(),this.pauseAnimation(),this.pointsData([]),this.arcsData([]),this.polygonsData([]),this.pathsData([]),this.heatmapsData([]),this.hexBinPointsData([]),this.hexPolygonsData([]),this.tilesData([]),this.particlesData([]),this.labelsData([]),this.htmlElementsData([]),this.objectsData([]),this.customLayerData([])}},kAe),GAe),stateInit:function(e){var t=e.rendererConfig,n=e.waitForGlobeReady,r=n===void 0?!0:n,s=DAe(e,IAe),a=new _I(K0({waitForGlobeReady:r},s));return{globe:a,renderObjs:YI({controlType:"orbit",rendererConfig:t,waitForLoadComplete:r,extraRenderers:[new rp.CSS2DRenderer]}).skyRadius(a.getGlobeRadius()*500).showNavInfo(!1).objects([a]).lights([new rp.AmbientLight(13421772,Math.PI),new rp.DirectionalLight(16777215,.6*Math.PI)]),tweenGroup:new R5}},init:function(e,t){var n=this;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var r=document.createElement("div");t.container.appendChild(r),t.renderObjs(r),t.globe.rendererSize(t.renderObjs.renderer().getSize(new rp.Vector2)),this.pointOfView({altitude:2.5});var s=t.globe.getGlobeRadius(),a=t.renderObjs.controls();t.renderObjs.camera().near=.05,a.minDistance=s+Math.max(.001,t.renderObjs.camera().near*1.1),a.maxDistance=s*100,a.enablePan=!1,a.enableDamping=!0,a.dampingFactor=.1,a.rotateSpeed=.3,a.zoomSpeed=.3,a.zoomToCursor=!0,a.addEventListener("change",function(){a.target.setScalar(0);var c=n.pointOfView();a.rotateSpeed=c.altitude*.3,a.zoomSpeed=Math.sqrt(c.altitude)*.5,t.globe.setPointOfView(t.renderObjs.camera()),t.onZoom&&t.onZoom(c)});var o=function(p){for(var g=p;g&&!g.hasOwnProperty("__globeObjType");)g=g.parent;return g},u={point:function(p){return p},arc:function(p){return p},polygon:function(p){return p.data},path:function(p){return p},heatmap:function(p){return p},hexbin:function(p){return p},hexPolygon:function(p){return p},tile:function(p){return p},particles:function(p,g){return!g||!g.hasOwnProperty("index")||p.length<=g.index?p:p[g.index]},label:function(p){return p},object:function(p){return p},custom:function(p){return p}};rp.REVISION<155&&(t.renderObjs.renderer().useLegacyLights=!1),t.renderObjs.hoverFilter(function(c){var p=o(c);if(!p)return!1;var g=p.__globeObjType;if(g!=="globe"&&!u.hasOwnProperty(g))return!1;var y=u.hasOwnProperty(g)&&p.__data?u[g](p.__data):null;return["points","hexBinPoints"].some(function(q){return q===g})&&Array.isArray(y)?!1:t.pointerEventsFilter(p,y)}).tooltipContent(function(c,p){var g={point:t.pointLabel,arc:t.arcLabel,polygon:t.polygonLabel,path:t.pathLabel,hexbin:t.hexLabel,hexPolygon:t.hexPolygonLabel,tile:t.tileLabel,particles:t.particleLabel,label:t.labelLabel,object:t.objectLabel,custom:t.customLayerLabel},y=o(c),q=y&&y.__globeObjType;return y&&q&&g.hasOwnProperty(q)&&u.hasOwnProperty(q)&&_t(g[q])(u[q](y.__data,p))||""}).onHover(function(c,p,g){var y={point:t.onPointHover,arc:t.onArcHover,polygon:t.onPolygonHover,path:t.onPathHover,heatmap:t.onHeatmapHover,hexbin:t.onHexHover,hexPolygon:t.onHexPolygonHover,tile:t.onTileHover,particles:t.onParticleHover,label:t.onLabelHover,object:t.onObjectHover,custom:t.onCustomLayerHover},q={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,heatmap:t.onHeatmapClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,tile:t.onTileClick,particles:t.onParticleClick,label:t.onLabelClick,object:t.onObjectClick,custom:t.onCustomLayerClick},S=o(c);if(S&&!y.hasOwnProperty(S.__globeObjType)&&(S=null),S!==t.hoverObj){var R=t.hoverObj?t.hoverObj.__globeObjType:null,M=t.hoverData,E=S?S.__globeObjType:null,U=S?u[E](S.__data,g):null;R&&R!==E&&y[R]&&y[R](null,M||null),E&&y[E]&&y[E](U,R===E?M:null),t.renderObjs.renderer().domElement.classList[E&&q[E]?"add":"remove"]("clickable"),t.hoverObj=S,t.hoverData=U}}).onClick(function(c,p,g){if(c){var y={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,heatmap:t.onHeatmapClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,tile:t.onTileClick,particles:t.onParticleClick,label:t.onLabelClick,object:t.onObjectClick,custom:t.onCustomLayerClick},q=o(c),S=q.__globeObjType;if(q&&y.hasOwnProperty(S)&&y[S]){var R=[p],M=g!=null&&g.isVector3?g:g==null?void 0:g.point;if(S==="globe"){var E=n.toGeoCoords(M),U=E.lat,P=E.lng;R.unshift({lat:U,lng:P})}else R.push(n.toGeoCoords(M));u.hasOwnProperty(S)&&R.unshift(u[S](q.__data,g)),y[S].apply(y,R)}}}).onRightClick(function(c,p,g){if(c){var y={globe:t.onGlobeRightClick,point:t.onPointRightClick,arc:t.onArcRightClick,polygon:t.onPolygonRightClick,path:t.onPathRightClick,heatmap:t.onHeatmapRightClick,hexbin:t.onHexRightClick,hexPolygon:t.onHexPolygonRightClick,tile:t.onTileRightClick,particles:t.onParticleRightClick,label:t.onLabelRightClick,object:t.onObjectRightClick,custom:t.onCustomLayerRightClick},q=o(c),S=q.__globeObjType;if(q&&y.hasOwnProperty(S)&&y[S]){var R=[p],M=g!=null&&g.isVector3?g:g==null?void 0:g.point;if(S==="globe"){var E=n.toGeoCoords(M),U=E.lat,P=E.lng;R.unshift({lat:U,lng:P})}else R.push(n.toGeoCoords(M));u.hasOwnProperty(S)&&R.unshift(u[S](q.__data,g)),y[S].apply(y,R)}}}),this._animationCycle()}});function HAe(i){const e=VAe()(i,{rendererConfig:{antialias:!0,logarithmicDepthBuffer:!0}});return e.globeImageUrl("earth-blue-marble.jpg").backgroundImageUrl("night-sky.png").showGlobe(!0).showGraticules(!0),e}var jAe=Object.defineProperty,WAe=(i,e,t)=>e in i?jAe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,k_=(i,e,t)=>(WAe(i,typeof e!="symbol"?e+"":e,t),t);class $Ae extends U3{constructor(e){super(e)}load(e,t,n,r){const s=new jG(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{if(typeof a!="string")throw new Error("unsupported data type");const o=JSON.parse(a),u=this.parse(o);t&&t(u)},n,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new XAe(e)}}class XAe{constructor(e){k_(this,"data"),k_(this,"isFont",!0),k_(this,"type","Font"),this.data=e}generateShapes(e,t=100,n){const r=[],s={letterSpacing:0,lineHeight:1,...n},a=QAe(e,t,this.data,s);for(let o=0,u=a.length;o<u;o++)Array.prototype.push.apply(r,a[o].toShapes(!1));return r}}function QAe(i,e,t,n){const r=Array.from(i),s=e/t.resolution,a=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,o=[];let u=0,c=0;for(let p=0;p<r.length;p++){const g=r[p];if(g===`
`)u=0,c-=a*n.lineHeight;else{const y=YAe(g,s,u,c,t);y&&(u+=y.offsetX+n.letterSpacing,o.push(y.path))}}return o}function YAe(i,e,t,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const a=new FN;let o,u,c,p,g,y,q,S;if(s.o){const R=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let M=0,E=R.length;M<E;)switch(R[M++]){case"m":o=parseInt(R[M++])*e+t,u=parseInt(R[M++])*e+n,a.moveTo(o,u);break;case"l":o=parseInt(R[M++])*e+t,u=parseInt(R[M++])*e+n,a.lineTo(o,u);break;case"q":c=parseInt(R[M++])*e+t,p=parseInt(R[M++])*e+n,g=parseInt(R[M++])*e+t,y=parseInt(R[M++])*e+n,a.quadraticCurveTo(g,y,c,p);break;case"b":c=parseInt(R[M++])*e+t,p=parseInt(R[M++])*e+n,g=parseInt(R[M++])*e+t,y=parseInt(R[M++])*e+n,q=parseInt(R[M++])*e+t,S=parseInt(R[M++])*e+n,a.bezierCurveTo(g,y,q,S,c,p);break}}return{offsetX:s.ha*e,path:a}}const KAe=JSON.parse('[{"name":"北京","latitude":39.9042,"longitude":116.4074},{"name":"上海","latitude":31.2304,"longitude":121.4737},{"name":"广州","latitude":23.1291,"longitude":113.2644},{"name":"深圳","latitude":22.5431,"longitude":114.0579},{"name":"杭州","latitude":30.2741,"longitude":120.1551},{"name":"成都","latitude":30.5728,"longitude":104.0668},{"name":"南京","latitude":32.0603,"longitude":118.7969},{"name":"无锡","latitude":31.5749,"longitude":120.304},{"name":"徐州","latitude":34.2044,"longitude":117.2841},{"name":"常州","latitude":31.7723,"longitude":119.9543},{"name":"苏州","latitude":31.2989,"longitude":120.5853},{"name":"南通","latitude":31.9802,"longitude":120.8943},{"name":"连云港","latitude":34.5967,"longitude":119.2216},{"name":"淮安","latitude":33.6104,"longitude":119.0153},{"name":"盐城","latitude":33.3557,"longitude":120.1635},{"name":"扬州","latitude":32.3936,"longitude":119.4129},{"name":"泰州","latitude":32.476,"longitude":119.9151},{"name":"宿迁","latitude":33.963,"longitude":118.2755},{"name":"西安","latitude":34.3416,"longitude":108.9398},{"name":"重庆","latitude":29.563,"longitude":106.5516},{"name":"武汉","latitude":30.5928,"longitude":114.3055},{"name":"天津","latitude":39.3434,"longitude":117.3616},{"name":"厦门","latitude":24.4798,"longitude":118.0894},{"name":"哈尔滨","latitude":45.8038,"longitude":126.5349},{"name":"青岛","latitude":36.0671,"longitude":120.3826},{"name":"大连","latitude":38.914,"longitude":121.6147},{"name":"潍坊","latitude":36.7069,"longitude":119.1618},{"name":"纽约","latitude":40.7128,"longitude":-74.006},{"name":"伦敦","latitude":51.5074,"longitude":-0.1278},{"name":"巴黎","latitude":48.8566,"longitude":2.3522},{"name":"柏林","latitude":52.52,"longitude":13.405},{"name":"东京","latitude":35.6895,"longitude":139.6917},{"name":"首尔","latitude":37.5665,"longitude":126.978},{"name":"新加坡","latitude":1.3521,"longitude":103.8198},{"name":"悉尼","latitude":-33.8688,"longitude":151.2093},{"name":"洛杉矶","latitude":34.0522,"longitude":-118.2437},{"name":"旧金山","latitude":37.7749,"longitude":-122.4194},{"name":"芝加哥","latitude":41.8781,"longitude":-87.6298},{"name":"多伦多","latitude":43.6532,"longitude":-79.3832},{"name":"温哥华","latitude":49.2827,"longitude":-123.1207},{"name":"莫斯科","latitude":55.7558,"longitude":37.6173},{"name":"圣保罗","latitude":-23.5505,"longitude":-46.6333},{"name":"布宜诺斯艾利斯","latitude":-34.6037,"longitude":-58.3816},{"name":"约翰内斯堡","latitude":-26.2041,"longitude":28.0473},{"name":"开罗","latitude":30.0444,"longitude":31.2357},{"name":"孟买","latitude":19.076,"longitude":72.8777},{"name":"新德里","latitude":28.6139,"longitude":77.209},{"name":"华盛顿","latitude":38.9072,"longitude":-77.0369},{"name":"休斯顿","latitude":29.7604,"longitude":-95.3698},{"name":"西雅图","latitude":47.6062,"longitude":-122.3321},{"name":"波士顿","latitude":42.3601,"longitude":-71.0589},{"name":"迈阿密","latitude":25.7617,"longitude":-80.1918},{"name":"巴塞罗那","latitude":41.3851,"longitude":2.1734},{"name":"马德里","latitude":40.4168,"longitude":-3.7038},{"name":"米兰","latitude":45.4642,"longitude":9.19},{"name":"阿姆斯特丹","latitude":52.3676,"longitude":4.9041},{"name":"布鲁塞尔","latitude":50.8503,"longitude":4.3517},{"name":"日内瓦","latitude":46.2044,"longitude":6.1432},{"name":"曼谷","latitude":13.7563,"longitude":100.5018},{"name":"吉隆坡","latitude":3.139,"longitude":101.6869},{"name":"胡志明市","latitude":10.7769,"longitude":106.7009},{"name":"马尼拉","latitude":14.5995,"longitude":120.9842},{"name":"雅加达","latitude":-6.2088,"longitude":106.8456},{"name":"墨尔本","latitude":-37.8136,"longitude":144.9631},{"name":"奥克兰","latitude":-36.8485,"longitude":174.7633},{"name":"利马","latitude":-12.0464,"longitude":-77.0428},{"name":"圣地亚哥","latitude":-33.4489,"longitude":-70.6693},{"name":"内罗毕","latitude":-1.2921,"longitude":36.8219},{"name":"拉各斯","latitude":6.5244,"longitude":3.3792},{"name":"伊斯坦布尔","latitude":41.0082,"longitude":28.9784},{"name":"特拉维夫","latitude":32.0853,"longitude":34.7818},{"name":"利雅得","latitude":24.7136,"longitude":46.6753},{"name":"底特律","latitude":42.3314,"longitude":-83.0458},{"name":"费城","latitude":39.9526,"longitude":-75.1652},{"name":"亚特兰大","latitude":33.749,"longitude":-84.388},{"name":"蒙特利尔","latitude":45.5017,"longitude":-73.5673},{"name":"渥太华","latitude":45.4215,"longitude":-75.699},{"name":"慕尼黑","latitude":48.1351,"longitude":11.582},{"name":"法兰克福","latitude":50.1109,"longitude":8.6821},{"name":"苏黎世","latitude":47.3769,"longitude":8.5417},{"name":"奥斯陆","latitude":59.9139,"longitude":10.7522},{"name":"斯德哥尔摩","latitude":59.3293,"longitude":18.0686},{"name":"赫尔辛基","latitude":60.1699,"longitude":24.9384},{"name":"哥本哈根","latitude":55.6761,"longitude":12.5683},{"name":"里约热内卢","latitude":-22.9068,"longitude":-43.1729},{"name":"波哥大","latitude":4.711,"longitude":-74.0721},{"name":"加拉加斯","latitude":10.4806,"longitude":-66.9036},{"name":"阿克拉","latitude":5.6037,"longitude":-0.187},{"name":"阿尔及尔","latitude":36.7538,"longitude":3.0588},{"name":"达喀尔","latitude":14.7167,"longitude":-17.4677},{"name":"德黑兰","latitude":35.6892,"longitude":51.389},{"name":"卡拉奇","latitude":24.8607,"longitude":67.0011},{"name":"拉合尔","latitude":31.5497,"longitude":74.3436},{"name":"加德满都","latitude":27.7172,"longitude":85.324},{"name":"科伦坡","latitude":6.9271,"longitude":79.8612},{"name":"仰光","latitude":16.8409,"longitude":96.1735},{"name":"河内","latitude":21.0285,"longitude":105.8544},{"name":"达卡","latitude":23.8103,"longitude":90.4125},{"name":"阿布扎比","latitude":24.4539,"longitude":54.3773},{"name":"迪拜","latitude":25.2048,"longitude":55.2708},{"name":"多哈","latitude":25.276987,"longitude":51.520008},{"name":"安卡拉","latitude":39.9208,"longitude":32.8541},{"name":"贝鲁特","latitude":33.8938,"longitude":35.5018},{"name":"大马士革","latitude":33.5138,"longitude":36.2765},{"name":"巴格达","latitude":33.3152,"longitude":44.3661},{"name":"埃里温","latitude":40.1792,"longitude":44.4991},{"name":"第比利斯","latitude":41.7151,"longitude":44.8271},{"name":"努尔苏丹","latitude":51.1605,"longitude":71.4704},{"name":"塔什干","latitude":41.2995,"longitude":69.2401},{"name":"比什凯克","latitude":42.8746,"longitude":74.5698},{"name":"阿什哈巴德","latitude":37.9601,"longitude":58.3261},{"name":"第聂伯罗","latitude":48.4647,"longitude":35.0462},{"name":"华沙","latitude":52.2297,"longitude":21.0122},{"name":"布达佩斯","latitude":47.4979,"longitude":19.0402},{"name":"布加勒斯特","latitude":44.4268,"longitude":26.1025},{"name":"贝尔格莱德","latitude":44.7866,"longitude":20.4489},{"name":"索非亚","latitude":42.6975,"longitude":23.3242},{"name":"萨拉热窝","latitude":43.8563,"longitude":18.4131},{"name":"基希讷乌","latitude":47.0105,"longitude":28.8638},{"name":"圣萨尔瓦多","latitude":13.6929,"longitude":-89.2182},{"name":"哈瓦那","latitude":23.1136,"longitude":-82.3666},{"name":"金斯敦","latitude":17.9712,"longitude":-76.7936},{"name":"金边","latitude":11.5564,"longitude":104.9282},{"name":"万象","latitude":17.9757,"longitude":102.6331},{"name":"阿克拉","latitude":5.6037,"longitude":-0.187},{"name":"卢萨卡","latitude":-15.3875,"longitude":28.3228},{"name":"哈拉雷","latitude":-17.8252,"longitude":31.0335},{"name":"安塔那那利佛","latitude":-18.8792,"longitude":47.5079}]'),ZAe=JSON.parse('{"阿":{"ha":1389,"x_min":221,"x_max":1303,"o":"m 568 938 q 572 931 572 935 q 562 918 572 928 q 533 880 551 908 q 507 831 515 851 l 449 689 q 536 469 536 597 q 502 326 536 390 q 456 261 468 261 q 447 268 451 261 q 333 411 399 339 l 343 425 l 450 357 q 488 488 488 414 q 411 683 488 593 l 469 888 l 303 860 l 303 -11 q 296 -160 303 -124 q 285 -196 289 -196 q 276 -189 281 -196 l 221 -76 q 253 94 253 -18 l 253 836 q 238 1010 253 915 l 256 1015 l 304 903 l 461 929 l 500 996 l 568 938 m 1297 886 q 1303 878 1303 881 q 1294 875 1303 876 l 1068 851 l 1114 810 q 1118 803 1118 807 q 1111 785 1118 799 q 1101 745 1104 771 q 1099 638 1099 719 l 1099 -10 q 1081 -168 1099 -111 q 1054 -225 1064 -225 q 1047 -219 1051 -225 q 824 21 957 -106 l 835 39 l 1033 -96 q 1047 44 1047 -49 l 1047 663 q 1029 847 1047 785 q 586 785 607 801 l 522 842 q 974 884 767 861 q 1239 940 1181 907 l 1297 886 m 897 669 l 956 622 q 961 614 961 618 q 956 604 961 610 q 924 543 926 572 l 906 375 l 944 342 q 951 333 951 336 q 944 328 951 329 l 706 289 q 693 197 706 197 q 689 201 692 197 l 643 276 q 658 309 654 293 q 661 376 663 325 l 658 529 q 640 664 658 581 l 656 669 l 699 585 l 863 613 l 897 669 m 876 571 l 701 543 l 706 332 l 861 361 l 876 571 z "},"埃":{"ha":1389,"x_min":71,"x_max":1313,"o":"m 1313 -158 l 1088 -183 l 843 189 q 685 -74 793 31 q 393 -246 578 -178 l 383 -229 q 790 189 714 -76 q 513 147 593 168 l 447 194 l 801 233 q 821 411 818 313 l 668 389 q 556 253 608 304 l 540 268 q 711 621 700 478 q 671 608 676 614 q 660 603 665 603 q 649 608 654 603 l 593 657 q 652 691 632 674 q 697 757 672 708 l 785 925 q 822 1079 819 993 l 836 1082 l 901 992 q 904 982 904 986 q 897 975 904 978 q 840 906 879 968 l 700 676 l 1046 725 q 933 883 988 818 l 946 897 l 1142 710 q 1143 663 1143 686 q 1135 617 1143 639 q 1123 596 1128 596 q 1114 603 1118 596 q 1065 692 1097 639 l 738 626 l 782 565 q 788 554 788 558 q 776 545 788 550 q 737 494 765 540 q 700 436 708 449 q 1046 511 971 478 l 1096 467 q 1104 456 1104 460 q 1094 451 1104 453 l 881 419 q 856 240 874 346 q 1138 300 1040 264 l 1203 247 q 1210 238 1210 242 q 1197 233 1210 235 l 882 200 l 971 71 q 1133 -96 1060 -57 q 1313 -139 1206 -135 l 1313 -158 m 572 632 q 579 623 579 626 q 569 618 579 619 l 407 592 l 407 289 l 543 363 l 556 346 q 168 78 186 99 l 71 108 l 357 263 l 357 585 q 192 546 217 561 l 122 592 l 357 629 l 357 835 q 322 1049 357 979 l 342 1064 l 431 981 q 439 967 439 972 q 435 956 439 963 q 415 895 424 936 q 407 808 407 854 l 407 638 q 526 674 488 653 l 572 632 z "},"艾":{"ha":1389,"x_min":110,"x_max":1274,"o":"m 1217 754 q 1222 747 1222 750 q 1214 743 1222 743 l 853 715 q 765 503 817 606 l 743 510 q 803 711 781 619 l 590 694 q 606 516 606 549 q 601 483 606 483 q 593 488 597 483 l 531 563 q 544 690 549 606 q 239 650 288 669 l 168 711 l 539 738 l 529 811 q 507 915 522 864 q 476 985 492 965 l 490 1000 l 590 933 q 597 925 597 929 q 593 917 597 921 q 579 835 579 900 q 581 797 579 821 l 585 742 l 814 756 q 846 952 846 892 q 836 1038 846 1013 l 850 1049 l 947 961 q 951 954 951 958 q 947 947 951 950 q 910 886 933 938 q 865 760 888 835 q 1149 815 1058 779 l 1217 754 m 1221 746 q 1226 738 1226 742 q 1218 735 1226 735 l 856 713 q 765 501 819 610 l 743 510 q 806 710 785 631 l 593 696 q 604 520 604 556 q 600 485 604 485 q 592 489 596 485 l 531 565 q 547 693 549 603 q 240 658 294 676 l 171 721 l 542 740 l 533 814 q 513 917 528 865 q 485 989 499 969 l 499 1004 l 597 935 q 604 926 604 931 q 598 915 604 922 q 587 874 592 908 q 585 800 582 839 l 589 743 l 818 754 q 853 972 853 894 q 844 1035 853 1013 l 858 1046 l 954 957 q 958 950 958 954 q 954 943 958 946 q 915 882 939 932 q 869 757 892 832 q 1153 807 1063 772 l 1221 746 m 1274 -158 l 1001 -178 l 711 119 q 126 -212 515 -100 l 122 -190 q 675 160 469 -78 l 553 283 q 394 406 447 390 l 397 418 l 493 417 q 576 317 507 385 l 703 193 q 826 396 782 293 q 865 549 871 499 l 882 556 l 943 461 q 949 449 949 453 q 943 443 949 446 q 889 378 922 436 q 742 154 818 246 q 998 -58 900 -1 q 1271 -133 1096 -115 l 1274 -158 m 1261 -168 l 989 -183 l 704 119 q 114 -203 503 -97 l 110 -181 q 668 160 460 -72 l 549 286 q 392 411 447 393 l 394 424 l 490 421 q 572 319 506 388 l 697 193 q 824 394 778 292 q 865 546 871 496 l 882 553 l 942 457 q 946 445 946 450 q 939 438 946 440 q 915 415 932 435 q 886 375 899 396 q 735 154 814 246 q 986 -63 889 -4 q 1258 -143 1083 -122 l 1261 -168 z "},"安":{"ha":1389,"x_min":126,"x_max":1251,"o":"m 781 924 q 753 858 771 886 q 728 831 735 831 q 714 849 721 831 l 635 1056 l 654 1065 l 781 924 m 1149 821 q 1153 812 1153 815 q 1147 804 1153 808 q 1089 753 1122 792 q 992 624 1056 715 l 969 636 l 1038 788 l 344 718 q 310 608 336 660 q 278 556 285 556 q 271 564 274 556 l 240 642 q 319 882 304 704 l 346 878 q 350 763 351 815 l 1040 838 l 1089 886 l 1149 821 m 1244 428 q 1251 418 1251 422 q 1239 413 1251 414 l 921 388 q 767 89 854 210 q 1058 -62 889 33 q 1068 -150 1068 -119 q 1063 -181 1068 -181 q 1051 -176 1058 -181 q 736 50 890 -40 q 509 -120 650 -47 q 225 -215 368 -193 l 218 -192 q 683 79 519 -110 q 424 185 550 151 q 510 356 454 242 q 199 311 317 339 l 126 367 l 531 399 q 640 717 643 633 l 661 717 l 714 624 q 718 613 718 617 q 710 607 718 610 q 594 404 674 596 q 1178 482 1078 442 l 1244 428 m 847 382 l 575 360 l 496 203 q 713 114 615 158 q 847 382 797 229 z "},"奥":{"ha":1389,"x_min":100,"x_max":1294,"o":"m 1082 892 q 1088 884 1088 888 q 1078 874 1088 881 q 1058 847 1068 868 q 1046 804 1047 826 l 1013 439 q 978 279 997 279 q 971 285 974 279 l 931 360 q 967 472 961 396 l 997 851 l 661 825 l 724 771 q 728 765 728 768 q 726 757 728 761 q 711 651 711 728 l 711 599 l 761 604 q 817 788 824 731 l 829 794 l 872 739 q 876 731 876 735 q 871 724 876 728 q 793 607 851 711 q 894 632 854 617 l 932 593 q 938 584 938 588 q 931 581 938 581 l 711 563 l 711 546 l 881 454 q 883 397 883 422 q 878 372 883 372 q 868 378 874 372 l 711 526 q 708 376 711 399 q 701 353 706 353 q 692 358 696 353 l 651 403 q 669 532 669 418 q 456 319 593 426 l 443 335 q 629 556 604 494 q 490 529 538 547 l 436 572 l 582 586 l 504 753 l 515 761 l 613 660 q 594 588 606 611 l 669 594 l 669 651 q 642 824 669 767 l 401 804 l 411 369 q 397 246 413 246 q 392 251 394 246 l 339 339 q 360 446 361 365 l 354 763 q 338 946 351 853 l 354 951 l 401 844 l 583 860 q 633 1042 633 986 q 631 1069 633 1056 l 647 1079 l 704 1013 q 708 1004 708 1008 q 703 996 708 1000 q 624 863 688 986 l 982 893 l 1024 942 l 1082 892 m 1294 -201 l 1006 -210 l 692 150 l 661 149 q 104 -236 533 -136 l 100 -218 q 599 146 486 -97 q 233 106 338 132 l 161 163 l 617 188 q 639 283 639 251 q 633 333 639 315 l 650 344 l 714 279 q 718 272 718 275 q 714 265 718 269 q 678 190 693 244 q 1156 244 1085 214 l 1208 193 q 1217 182 1217 186 q 1204 178 1217 178 l 733 153 l 882 -4 q 1058 -133 972 -100 q 1294 -179 1143 -167 l 1294 -201 z "},"巴":{"ha":1389,"x_min":328,"x_max":1243,"o":"m 1201 229 q 1213 79 1207 131 q 1231 -28 1219 28 q 1243 -92 1243 -83 q 1236 -106 1243 -101 q 1178 -119 1229 -110 q 1029 -136 1126 -129 q 801 -143 932 -143 q 573 -135 669 -143 q 436 -110 476 -126 q 366 -53 396 -94 q 336 93 336 -11 l 336 779 q 328 975 336 935 l 351 979 l 397 861 l 925 908 l 969 971 l 1043 911 q 1049 903 1049 907 q 1037 893 1049 900 q 1010 866 1025 886 q 992 826 994 846 l 954 549 l 1001 507 q 1010 497 1010 500 q 997 492 1010 493 l 392 442 l 392 89 q 422 -29 392 6 q 537 -75 451 -64 q 736 -86 622 -86 q 988 -76 850 -86 q 1160 -35 1125 -65 l 1172 229 l 1201 229 m 938 860 l 674 838 l 674 515 l 899 538 l 938 860 m 619 510 l 619 832 l 392 813 l 392 488 l 619 510 z "},"柏":{"ha":1389,"x_min":83,"x_max":1238,"o":"m 1165 732 l 1229 676 q 1238 665 1238 669 q 1224 651 1238 661 q 1205 628 1210 640 q 1197 563 1200 615 l 1167 61 q 1144 -115 1158 -67 q 1122 -162 1129 -162 q 1115 -154 1118 -162 l 1072 -42 l 746 -74 q 735 -207 749 -207 q 722 -194 729 -207 l 672 -104 q 696 8 696 -67 l 693 528 q 668 739 693 622 l 686 746 l 746 613 l 810 622 q 893 988 893 865 q 886 1043 893 1022 l 904 1056 l 983 964 q 989 955 989 958 q 983 946 989 951 q 944 873 968 931 q 850 629 919 815 l 1119 674 l 1165 732 m 1136 626 l 740 567 l 743 306 q 1008 361 953 336 l 1067 322 q 1072 315 1072 318 q 1064 311 1072 313 l 743 264 l 746 -35 q 1028 15 982 -10 l 1085 -31 q 1114 106 1110 -4 l 1136 626 m 633 622 q 638 615 638 618 q 632 611 638 611 l 461 596 l 461 519 l 619 415 q 615 359 621 388 q 605 331 610 331 q 597 335 600 331 l 461 496 l 461 -17 q 457 -193 461 -162 q 447 -224 453 -224 q 438 -215 442 -224 l 378 -110 q 404 -51 396 -83 q 413 56 413 -18 l 413 474 q 99 74 300 260 l 83 90 q 407 590 311 332 q 218 547 264 565 l 149 599 l 413 631 l 413 828 q 406 943 413 899 q 376 1042 399 988 l 388 1053 l 483 967 q 492 955 492 960 q 486 942 492 950 q 461 824 461 901 l 461 636 q 585 668 543 649 l 633 622 z "},"拜":{"ha":1389,"x_min":143,"x_max":1267,"o":"m 728 379 q 733 374 733 376 q 726 369 733 371 l 496 332 q 384 68 464 181 q 160 -149 304 -44 l 147 -133 q 344 88 275 -17 q 443 322 413 192 q 203 271 256 292 l 143 318 l 453 365 q 471 575 465 446 q 283 539 319 551 l 232 583 l 471 619 q 473 722 472 667 q 471 842 474 778 q 203 735 328 769 l 197 751 q 481 901 356 817 q 617 1019 606 985 l 626 1022 l 697 964 q 701 958 701 961 q 694 953 701 956 q 532 872 621 921 q 525 629 525 636 q 636 664 597 644 l 689 622 q 694 615 694 618 q 688 611 694 613 l 522 585 q 503 375 517 457 q 676 424 603 392 l 728 379 m 1260 311 l 947 285 l 947 54 q 944 -165 947 -131 q 935 -200 942 -200 q 919 -185 928 -200 l 868 -90 q 896 57 896 -61 l 896 281 q 640 240 714 264 l 578 288 l 896 321 l 896 490 q 756 465 775 474 l 697 507 l 896 529 l 896 685 q 754 656 792 671 l 700 700 l 896 726 l 896 883 q 719 847 765 865 l 656 894 q 1133 983 1047 938 l 1194 936 q 1200 929 1200 932 q 1194 925 1200 926 l 947 892 l 947 735 q 1099 774 1051 749 l 1156 731 q 1160 723 1160 726 q 1156 719 1160 719 l 947 692 l 947 535 q 1121 579 1074 550 l 1172 536 q 1176 528 1176 532 q 1172 525 1176 525 l 947 496 l 947 326 q 1196 376 1154 347 l 1258 325 q 1267 315 1267 318 q 1260 311 1267 311 z "},"保":{"ha":1389,"x_min":65,"x_max":1308,"o":"m 525 951 q 528 943 528 947 q 522 935 528 939 q 460 860 489 911 q 374 726 431 808 l 374 33 q 354 -201 374 -201 q 342 -186 350 -201 l 293 -94 q 324 94 324 -31 l 324 658 q 81 394 204 504 l 65 413 q 349 776 254 619 q 443 1025 443 932 q 442 1049 443 1038 l 458 1058 l 525 951 m 1308 -15 l 1103 -28 l 865 379 l 849 378 l 849 -71 q 841 -215 849 -194 q 828 -236 833 -236 q 817 -224 824 -236 l 765 -140 q 799 25 799 -97 l 799 346 q 392 -64 618 82 l 381 -43 q 744 368 619 140 q 492 332 546 349 l 432 379 l 799 413 q 785 582 799 544 l 688 571 q 672 493 688 493 q 663 501 668 493 l 618 574 q 639 685 640 606 l 636 810 q 608 960 635 857 l 624 968 l 682 875 l 986 921 l 1029 979 l 1092 915 q 1097 906 1097 910 q 1092 897 1097 903 q 1058 861 1067 876 q 1042 804 1050 846 l 1017 674 l 1051 628 q 1056 619 1056 622 q 1049 614 1056 615 l 817 586 l 861 544 q 869 533 869 538 q 867 525 869 529 q 849 418 850 493 q 1140 476 1079 442 l 1204 426 q 1215 415 1215 418 q 1201 410 1215 411 l 899 382 l 1011 218 q 1148 58 1094 96 q 1308 4 1201 19 l 1308 -15 m 999 878 l 682 828 l 688 613 l 964 651 l 999 878 z "},"堡":{"ha":1389,"x_min":101,"x_max":1292,"o":"m 510 940 q 513 930 513 933 q 506 922 513 926 q 447 853 486 914 q 389 769 407 792 l 389 358 q 374 197 389 197 q 361 210 368 197 l 314 286 q 342 400 342 321 l 342 710 q 113 492 228 574 l 101 506 q 443 1029 429 811 l 461 1033 l 510 940 m 1292 283 l 1078 263 l 835 561 l 826 560 l 826 361 q 821 215 826 238 q 810 193 815 193 q 800 206 806 193 l 758 286 q 775 330 771 308 q 779 403 779 351 l 779 538 q 424 231 661 367 l 414 247 q 724 550 619 376 q 500 518 557 535 l 450 561 l 779 593 l 779 711 l 644 697 q 639 640 644 654 q 630 626 633 626 q 621 635 626 626 l 579 703 q 594 735 592 721 q 594 797 596 749 l 592 867 q 576 983 590 926 l 596 992 l 632 914 l 963 953 l 999 1003 l 1056 960 q 1063 950 1063 954 q 1052 938 1063 946 q 1034 919 1042 931 q 1021 875 1026 907 l 1003 778 l 1031 751 q 1038 742 1038 744 q 1028 738 1038 739 l 826 717 l 826 597 q 1139 654 1093 628 l 1193 611 q 1204 599 1204 603 q 1190 594 1204 596 l 872 565 l 985 449 q 1086 355 1047 383 q 1168 316 1125 326 q 1292 301 1211 306 l 1292 283 m 975 914 l 636 875 l 642 733 l 956 776 l 975 914 m 1181 -65 q 1188 -74 1188 -71 q 1178 -79 1188 -78 q 206 -164 324 -137 l 144 -115 l 651 -79 l 651 82 q 374 44 451 63 l 322 89 l 651 118 l 651 140 q 626 299 651 225 l 642 308 l 714 239 q 721 228 721 232 q 718 222 721 225 q 699 124 700 194 q 971 179 918 146 l 1035 132 q 1042 122 1042 126 q 1035 118 1042 118 l 699 88 l 699 -76 q 1115 -12 1058 -50 l 1181 -65 z "},"北":{"ha":1389,"x_min":99,"x_max":1258,"o":"m 1215 210 q 1241 22 1224 100 q 1258 -65 1258 -57 q 1249 -78 1258 -74 q 1176 -91 1239 -82 q 1040 -100 1113 -100 q 890 -90 968 -100 q 784 -37 811 -79 q 757 128 757 4 l 757 833 q 732 1031 757 990 l 747 1042 l 825 964 q 836 946 836 953 q 831 926 836 939 q 810 807 810 875 l 810 411 q 1106 744 1067 621 l 1128 744 l 1150 640 q 1151 629 1151 635 q 1142 619 1151 624 q 810 368 1101 601 l 810 163 q 833 -12 810 25 q 1001 -49 856 -49 q 1183 -26 1107 -49 l 1189 210 l 1215 210 m 511 1000 l 589 925 q 599 908 599 915 q 592 892 599 901 q 574 725 574 867 l 574 17 q 558 -199 574 -199 q 544 -182 553 -199 l 492 -81 q 522 86 522 -18 l 522 179 q 196 -35 242 14 l 99 6 l 522 213 l 522 500 q 232 446 328 472 l 158 500 l 522 542 l 522 765 q 494 986 522 932 l 511 1000 z "},"贝":{"ha":1389,"x_min":110,"x_max":1174,"o":"m 960 1004 l 1021 953 q 1028 943 1028 947 q 1013 926 1028 939 q 992 903 997 913 q 986 876 988 894 l 964 322 q 939 147 958 147 q 924 164 933 147 l 882 242 q 910 389 906 274 l 929 907 l 458 861 l 458 278 q 456 126 458 147 q 447 104 453 104 q 435 117 442 104 l 379 211 q 407 313 407 242 l 407 836 q 379 1003 407 894 l 400 1014 l 460 908 l 918 951 l 960 1004 m 654 778 l 735 704 q 744 690 744 696 q 737 671 744 683 q 723 620 729 658 q 708 460 717 582 q 553 33 688 182 q 115 -219 419 -115 l 110 -200 q 444 -7 331 -100 q 608 226 558 86 q 658 631 658 367 q 643 765 658 725 l 654 778 m 1164 -61 q 1174 -142 1174 -107 q 1164 -176 1174 -176 q 1151 -169 1160 -176 q 719 178 1001 -24 l 729 194 l 1164 -61 z "},"本":{"ha":1389,"x_min":104,"x_max":1317,"o":"m 1317 86 l 1075 69 l 719 660 l 707 658 l 707 167 q 901 206 847 181 l 957 157 q 963 149 963 153 q 956 146 963 146 l 707 124 l 707 -44 q 702 -217 707 -187 q 692 -247 697 -247 q 681 -236 686 -247 l 626 -126 q 656 28 656 -79 l 656 118 q 436 85 494 104 l 385 139 l 656 163 l 656 654 l 650 654 q 118 -4 460 292 l 104 22 q 582 649 428 333 q 239 596 314 626 l 167 665 l 656 697 l 656 853 q 629 1060 656 982 l 643 1072 l 718 1003 q 732 983 732 990 q 726 963 732 975 q 707 850 707 915 l 707 700 q 1129 761 1004 724 l 1200 711 q 1208 701 1208 706 q 1200 697 1208 697 l 767 664 l 964 349 q 1061 215 1021 258 q 1157 149 1101 172 q 1317 108 1213 126 l 1317 86 z "},"比":{"ha":1389,"x_min":228,"x_max":1274,"o":"m 1226 228 q 1239 68 1225 168 q 1263 -72 1253 -32 q 1274 -117 1274 -112 q 1268 -124 1274 -122 l 1238 -129 q 1152 -137 1214 -133 q 1000 -142 1090 -142 q 849 -126 910 -142 q 756 -63 789 -110 q 724 78 724 -17 l 724 800 q 688 1025 724 979 l 706 1038 l 807 939 q 811 931 811 935 q 807 922 811 928 q 788 857 796 907 q 779 743 779 807 l 779 371 q 986 562 917 481 q 1046 708 1056 643 l 1068 710 l 1128 599 q 1129 590 1129 594 q 1124 585 1129 586 q 1058 544 1099 576 q 779 329 894 411 l 779 97 q 827 -51 779 -18 q 1032 -83 875 -83 q 1185 -64 1133 -83 l 1204 228 l 1226 228 m 650 121 q 429 -43 529 36 q 316 -139 329 -122 q 299 -156 303 -156 q 292 -153 296 -156 l 228 -100 q 283 -42 272 -67 q 293 54 293 -18 l 293 756 q 261 939 293 874 l 278 949 l 372 864 q 376 858 376 861 q 372 850 376 856 q 356 792 364 839 q 349 701 349 746 l 349 482 q 561 544 500 507 l 611 503 q 617 496 617 499 q 608 492 617 493 q 383 432 458 461 l 349 463 l 349 -35 l 639 140 l 650 121 z "},"毕":{"ha":1389,"x_min":107,"x_max":1250,"o":"m 1161 633 q 1192 459 1175 524 q 1210 391 1210 394 q 1206 385 1210 388 q 1160 374 1203 382 q 1060 360 1118 365 q 922 354 1001 354 q 799 369 842 354 q 737 417 757 383 q 717 504 717 451 l 717 857 q 713 994 717 964 q 697 1043 708 1025 l 713 1053 l 794 990 q 799 984 799 988 q 792 972 799 981 q 777 917 785 964 q 769 835 769 871 l 769 672 q 1047 925 1014 819 l 1071 924 l 1090 829 q 1092 822 1092 825 q 1086 817 1092 818 q 1015 782 1051 807 q 769 643 875 688 l 769 507 q 801 431 769 449 q 929 413 833 413 q 1136 450 1068 413 l 1140 633 l 1161 633 m 617 749 q 622 741 622 743 q 614 738 622 739 l 357 703 l 357 424 l 600 539 l 613 518 q 315 322 339 351 q 308 318 313 318 q 301 321 304 318 l 250 374 q 294 423 283 400 q 304 513 304 446 l 304 835 q 275 1006 304 950 l 289 1017 l 375 946 q 381 939 381 942 q 376 932 381 936 q 363 883 369 922 q 357 804 357 844 l 357 749 q 568 797 526 765 l 617 749 m 1242 207 q 1250 197 1250 200 q 1238 192 1250 193 l 694 157 l 694 -22 q 690 -217 694 -187 q 678 -247 685 -247 q 672 -242 675 -247 l 615 -136 q 640 29 640 -75 l 640 154 q 172 111 210 129 l 107 171 l 640 203 q 614 439 640 404 l 628 450 l 713 375 q 717 369 717 372 q 715 361 717 365 q 694 206 694 324 q 1171 265 1075 228 l 1242 207 z "},"边":{"ha":1389,"x_min":79,"x_max":1315,"o":"m 1076 744 l 1144 689 q 1150 681 1150 685 q 1144 672 1150 676 q 1097 589 1104 640 q 985 106 1029 199 q 928 14 942 14 q 921 19 925 14 q 790 208 874 111 l 803 222 l 926 125 q 988 315 953 161 q 1040 647 1024 468 l 836 619 q 738 297 804 428 q 533 42 671 167 l 515 58 q 779 610 733 299 q 596 568 646 590 l 524 622 l 786 657 q 804 892 804 783 q 786 1051 804 1000 l 800 1063 l 890 979 q 897 968 897 974 q 892 957 897 963 q 858 811 871 929 q 842 664 853 736 l 1032 689 l 1076 744 m 478 799 q 471 731 478 771 q 457 690 464 690 q 442 700 450 690 l 275 911 l 285 928 l 478 799 m 1315 -132 l 1093 -210 l 556 -36 q 267 10 411 10 q 149 -8 183 10 l 92 46 q 197 56 131 56 q 342 47 263 56 q 386 195 386 139 q 339 313 386 251 l 404 489 q 146 442 201 461 l 79 490 l 396 532 l 433 588 l 496 536 q 501 526 501 532 q 494 514 501 519 q 449 453 472 493 q 379 315 425 414 q 426 258 414 279 q 439 211 439 236 q 378 43 439 168 q 560 6 481 29 q 951 -99 836 -74 q 1140 -124 1067 -124 q 1314 -111 1213 -124 l 1315 -132 z "},"滨":{"ha":1389,"x_min":149,"x_max":1254,"o":"m 901 938 q 883 881 897 911 q 863 850 868 850 q 854 857 857 850 l 781 1040 l 792 1050 l 901 938 m 432 807 q 422 735 429 756 q 412 714 415 714 q 404 719 408 714 l 251 893 l 263 908 l 432 807 m 1229 838 q 1233 832 1233 835 q 1228 826 1233 829 q 1099 650 1185 807 l 1079 656 l 1132 803 l 586 754 q 547 613 575 658 q 510 569 519 568 q 504 575 507 569 l 479 646 q 564 893 560 726 l 589 893 q 590 794 593 846 l 1126 843 l 1165 893 l 1229 838 m 1246 206 q 1254 196 1254 199 q 1242 192 1254 193 q 494 126 571 151 l 439 174 l 636 188 l 628 475 q 603 642 626 553 l 618 649 l 669 564 q 910 649 853 621 q 960 701 967 678 l 975 708 l 1042 643 q 1046 635 1046 639 q 1035 629 1046 631 q 954 611 997 625 q 674 539 847 579 l 675 418 q 945 452 871 440 q 1047 482 1019 464 l 1110 436 q 1114 428 1114 432 q 1108 425 1114 425 l 921 407 l 954 367 q 957 358 957 363 q 954 350 957 354 q 929 292 938 331 l 913 208 q 1186 253 1114 224 l 1246 206 m 889 404 l 676 383 l 679 192 l 872 206 l 886 319 q 892 378 892 365 q 889 404 892 392 m 339 511 q 340 481 340 499 q 336 442 340 463 q 328 422 332 422 q 318 428 324 422 l 149 581 l 158 599 l 339 511 m 488 517 l 299 -110 q 292 -119 296 -119 q 282 -112 288 -119 q 157 49 231 -40 l 171 61 l 264 -19 l 465 526 l 488 517 m 772 33 q 774 25 774 29 q 761 21 774 21 q 682 -28 749 21 q 392 -214 496 -165 l 382 -199 q 628 -11 536 -97 q 726 119 719 75 l 743 121 l 772 33 m 1129 -85 q 1123 -151 1131 -110 q 1108 -193 1115 -193 q 1101 -187 1104 -193 q 874 99 983 -7 l 890 115 l 1129 -85 z "},"波":{"ha":1389,"x_min":144,"x_max":1288,"o":"m 1288 -146 l 1074 -164 l 869 111 q 467 -214 731 -75 l 456 -194 q 840 150 711 -32 l 743 282 q 669 356 724 308 l 672 367 l 758 351 q 831 228 761 315 l 864 186 q 988 450 940 307 q 676 401 719 417 l 628 446 l 824 472 l 824 688 l 640 668 q 578 192 619 372 q 400 -150 536 13 l 383 -133 q 548 296 510 57 q 586 682 586 535 q 574 840 586 760 l 597 849 l 650 714 l 824 733 l 824 881 q 803 1044 824 985 l 824 1058 l 894 986 q 899 978 899 982 q 893 966 899 975 q 880 928 888 957 q 872 876 872 900 l 872 739 l 1085 763 l 1125 818 l 1193 761 q 1199 754 1199 757 q 1192 747 1199 751 q 1129 690 1160 728 q 1057 586 1099 651 l 1036 599 l 1085 717 l 872 693 l 872 479 l 988 494 l 1035 546 l 1097 490 q 1103 482 1103 485 q 1097 476 1103 479 q 1058 440 1074 463 q 1022 374 1042 418 q 894 146 963 240 q 1079 -56 1013 -8 q 1288 -121 1146 -104 l 1288 -146 m 453 817 q 454 772 454 794 q 450 729 454 750 q 441 708 446 708 q 432 713 436 708 l 251 910 l 264 925 l 453 817 m 340 525 q 349 448 349 478 q 339 418 349 418 q 331 422 335 418 l 144 599 l 156 615 l 340 525 m 500 519 l 293 -93 q 286 -103 290 -103 q 275 -94 282 -103 q 147 44 203 -7 l 161 63 l 258 -6 l 476 532 l 500 519 z "},"伯":{"ha":1389,"x_min":61,"x_max":1163,"o":"m 1157 669 q 1163 663 1163 665 q 1150 649 1163 660 q 1132 628 1138 639 q 1125 594 1126 617 l 1107 69 q 1094 -70 1106 1 q 1074 -142 1083 -142 q 1067 -135 1069 -142 l 1018 -21 l 683 -56 q 685 -118 685 -97 q 675 -178 685 -178 q 665 -168 671 -178 l 608 -71 q 626 -10 622 -39 q 628 89 629 18 l 617 515 q 594 719 613 653 l 613 725 l 657 618 l 714 626 q 784 847 760 758 q 808 975 808 935 q 803 1044 808 1015 l 817 1053 l 896 954 q 901 943 901 947 q 897 936 901 939 q 854 873 878 922 q 753 632 831 824 l 1050 676 l 1088 733 l 1157 669 m 1071 636 l 665 572 l 672 325 q 953 389 919 368 l 1003 344 q 1008 337 1008 339 q 1000 333 1008 335 l 674 285 l 682 -11 q 985 39 936 14 l 1026 0 q 1056 122 1053 38 l 1071 636 m 544 942 q 550 927 550 932 q 543 918 550 922 q 481 842 514 900 q 390 714 447 783 l 390 21 q 371 -212 390 -212 q 358 -199 367 -212 l 307 -108 q 342 32 342 -65 l 342 654 q 72 396 221 517 l 61 411 q 374 780 268 610 q 469 1039 479 950 l 486 1047 l 544 942 z "},"布":{"ha":1389,"x_min":54,"x_max":1238,"o":"m 1228 781 q 1238 770 1238 774 q 1225 765 1238 767 l 685 729 l 763 657 q 765 652 765 656 q 763 644 765 649 q 738 490 738 610 l 976 519 l 1015 576 l 1083 511 q 1089 503 1089 506 q 1083 497 1089 500 q 1051 469 1058 488 q 1043 422 1044 450 q 999 53 1029 154 q 950 -49 969 -49 q 943 -43 947 -49 q 800 172 883 69 l 813 183 l 939 85 q 988 478 976 163 l 738 447 l 738 -47 q 713 -250 738 -250 q 707 -246 710 -250 l 649 -136 q 675 -64 664 -114 q 686 35 686 -14 l 686 442 l 469 415 l 476 101 q 474 -8 478 8 q 467 -24 471 -24 q 460 -18 463 -24 l 400 76 q 415 124 408 93 q 422 174 422 156 l 421 375 q 407 467 421 431 q 65 194 269 324 l 54 214 q 542 719 388 456 q 200 681 264 701 l 135 739 l 567 767 q 649 1069 657 935 l 669 1076 l 747 990 q 751 983 751 986 q 745 976 751 981 q 726 956 739 972 q 707 925 713 939 q 632 771 674 846 q 1157 835 1103 801 l 1228 781 m 686 485 q 657 728 686 649 l 606 724 q 432 493 533 603 l 463 457 l 686 485 z "},"常":{"ha":1389,"x_min":161,"x_max":1254,"o":"m 1250 763 q 1254 755 1254 758 q 1249 749 1254 751 q 1058 560 1193 726 l 1042 569 l 1129 725 l 281 647 q 237 504 267 556 q 199 453 207 453 q 192 461 194 453 l 161 540 q 267 801 251 597 l 285 801 q 287 742 286 771 q 285 688 288 714 l 665 724 l 665 886 q 639 1043 665 985 l 653 1054 l 731 996 q 736 988 736 992 q 733 981 736 985 q 714 899 714 954 l 714 728 l 833 739 q 900 883 879 831 q 921 960 921 936 q 918 996 921 983 l 933 1004 l 993 922 q 996 915 996 918 q 990 910 996 913 q 933 845 960 896 q 867 742 906 794 l 1135 768 l 1178 826 l 1250 763 m 533 846 q 518 784 531 815 q 500 753 506 753 q 492 760 494 753 q 385 950 443 868 l 397 963 l 533 846 m 1017 317 l 1074 265 q 1079 256 1079 260 q 1063 240 1079 253 q 1039 212 1047 228 q 1028 168 1031 196 q 987 -56 1013 28 q 947 -139 961 -139 q 939 -133 944 -139 q 792 -4 886 -78 l 799 11 l 936 -56 q 985 229 963 21 l 713 201 l 713 -64 q 693 -261 713 -261 q 688 -256 690 -261 l 638 -175 q 661 -119 657 -143 q 665 -24 665 -96 l 665 196 l 425 169 l 438 -32 q 440 -108 440 -72 q 433 -143 440 -143 q 426 -137 431 -143 l 367 -60 q 389 32 392 -19 l 383 154 q 349 282 381 213 l 363 292 l 422 203 l 665 231 q 651 349 665 324 l 514 335 q 506 286 517 286 q 500 290 503 286 l 453 353 q 469 413 472 371 l 464 508 q 444 592 461 539 l 457 600 l 499 539 l 863 586 l 893 626 l 947 582 q 953 574 953 576 q 943 565 953 571 q 921 543 933 560 q 907 508 908 526 l 899 425 l 936 388 q 940 381 940 383 q 932 376 940 378 l 685 353 l 726 317 q 732 309 732 313 q 728 301 732 306 q 713 235 715 285 l 972 265 l 1017 317 m 863 551 l 508 504 l 513 369 l 851 411 l 863 551 z "},"城":{"ha":1389,"x_min":76,"x_max":1294,"o":"m 1257 160 q 1267 -6 1257 90 q 1285 -149 1276 -101 q 1294 -203 1294 -197 q 1289 -210 1294 -210 q 1215 -174 1274 -210 q 1090 -62 1157 -139 q 974 122 1022 14 q 796 -110 892 -10 l 776 -92 q 956 168 876 22 q 867 624 896 357 l 643 588 q 631 407 638 488 l 744 431 l 775 479 l 839 431 q 846 423 846 426 q 839 415 846 419 q 814 381 822 404 q 798 272 806 358 q 770 84 790 185 q 731 -59 750 -17 q 703 -101 711 -101 q 694 -93 700 -101 q 589 54 650 -18 l 601 69 l 694 0 q 756 390 743 139 l 626 364 q 533 27 601 161 q 324 -228 465 -107 l 310 -212 q 564 265 521 -10 q 165 43 194 64 l 76 86 l 349 200 l 349 511 q 176 474 188 485 l 117 522 l 349 558 l 349 810 q 310 1031 349 943 l 322 1040 l 415 961 q 422 951 422 956 q 419 942 422 947 q 399 808 399 908 l 399 565 q 525 601 499 583 l 588 557 q 575 743 590 665 l 593 750 l 649 631 l 863 667 q 790 1043 831 989 l 806 1057 l 906 979 q 913 969 913 974 q 908 957 913 964 q 897 876 897 939 q 910 675 897 814 q 1171 739 1121 711 l 1231 694 q 1236 687 1236 690 q 1225 682 1236 683 l 915 632 q 988 231 939 426 q 1071 444 1043 346 q 1094 593 1099 543 l 1110 599 l 1169 504 q 1172 495 1172 499 q 1165 486 1172 492 q 1103 374 1146 475 q 1006 176 1061 272 q 1218 -104 1081 -1 l 1236 161 l 1257 160 m 588 549 l 399 519 l 399 221 l 568 292 q 588 549 585 415 m 1128 871 q 1131 810 1131 846 q 1122 775 1131 775 q 1114 781 1119 775 l 960 936 l 972 953 l 1128 871 z "},"成":{"ha":1389,"x_min":139,"x_max":1263,"o":"m 1217 146 q 1240 -75 1225 17 l 1263 -212 q 1257 -218 1263 -218 q 1142 -172 1221 -218 q 990 -41 1063 -126 q 869 154 917 44 q 664 -7 767 56 l 654 10 q 854 197 760 90 q 750 650 776 418 l 417 604 q 397 383 411 508 l 603 421 l 642 469 l 697 413 q 704 403 704 407 q 697 396 704 399 q 665 356 675 382 q 647 250 656 331 q 614 74 638 169 q 568 -67 590 -22 q 539 -112 546 -112 q 529 -106 532 -112 q 392 94 481 -10 l 401 110 l 535 -7 q 613 381 572 54 l 392 338 q 317 47 371 171 q 158 -197 264 -76 l 139 -181 q 324 231 294 33 q 354 558 354 428 q 339 774 354 688 l 361 781 l 408 647 l 744 694 q 675 1047 715 974 l 689 1060 l 794 976 q 800 970 800 974 q 796 961 800 967 q 782 883 782 938 q 796 701 782 828 q 1064 760 1029 735 l 1132 713 q 1139 706 1139 708 q 1132 703 1139 704 l 801 657 q 892 244 826 446 q 1001 412 964 336 q 1039 533 1039 488 l 1056 539 l 1108 444 q 1111 435 1111 439 q 1107 431 1111 432 q 1024 344 1069 417 q 908 196 978 271 q 1026 4 950 92 q 1181 -119 1103 -83 l 1194 146 l 1217 146 m 1085 907 q 1086 866 1086 885 q 1082 828 1086 847 q 1075 810 1078 810 q 1068 814 1072 810 l 915 986 l 922 1000 l 1085 907 z "},"达":{"ha":1389,"x_min":92,"x_max":1322,"o":"m 1174 622 q 1182 613 1182 615 q 1172 608 1182 610 l 833 564 q 813 454 825 507 l 1118 214 q 1119 177 1119 200 q 1115 120 1119 154 q 1104 86 1110 86 q 1093 93 1099 86 q 804 421 936 310 q 557 26 744 178 l 544 42 q 776 557 743 246 q 590 518 636 539 l 519 571 l 782 603 q 799 872 799 768 q 778 1044 799 975 l 789 1054 l 888 969 q 893 962 893 965 q 888 951 893 958 q 860 843 864 921 q 839 610 853 714 q 1111 669 1056 638 l 1174 622 m 443 808 q 438 725 444 757 q 428 693 432 693 q 419 699 425 693 l 232 918 l 244 932 l 443 808 m 1322 -107 l 1063 -196 l 613 -69 q 282 -14 415 -14 q 153 -33 206 -14 l 92 25 q 204 33 136 33 q 346 25 272 33 q 393 170 393 110 q 349 283 393 231 l 415 464 q 156 413 193 425 l 100 463 l 414 506 l 460 560 l 517 503 q 522 494 522 497 q 514 485 522 490 q 461 426 485 464 q 390 286 438 389 q 449 174 449 222 q 381 21 449 125 q 471 4 426 14 q 918 -87 804 -69 q 1117 -104 1032 -104 q 1319 -86 1201 -104 l 1322 -107 z "},"大":{"ha":1389,"x_min":138,"x_max":1276,"o":"m 1276 -78 l 1274 -101 l 997 -115 l 674 500 q 151 -190 568 17 l 138 -172 q 622 524 528 63 q 272 474 288 486 l 194 533 l 632 575 q 658 879 658 729 q 635 1032 658 982 l 649 1047 l 753 965 q 761 954 761 958 q 754 941 761 950 q 738 898 747 932 q 725 832 728 864 q 690 581 713 692 q 1125 657 992 614 l 1199 600 q 1210 589 1210 592 q 1199 585 1210 586 l 707 532 l 908 167 q 1066 -28 993 11 q 1276 -78 1139 -68 z "},"丹":{"ha":1389,"x_min":93,"x_max":1294,"o":"m 1285 460 q 1294 449 1294 453 q 1282 444 1294 446 l 949 419 l 954 -14 q 935 -157 954 -118 q 910 -196 915 -196 q 897 -189 904 -196 q 665 64 813 -86 l 682 85 l 876 -60 q 896 32 897 -40 l 890 415 l 475 383 q 382 59 460 186 q 114 -187 304 -68 l 101 -169 q 332 86 258 -42 q 417 379 406 214 q 150 343 225 363 l 93 406 l 419 428 q 426 759 426 588 q 411 1025 426 931 l 439 1035 l 501 892 l 860 935 l 896 1007 l 972 949 q 978 940 978 944 q 967 926 978 936 q 950 896 956 915 q 944 832 944 876 l 949 464 q 1201 522 1143 478 l 1285 460 m 889 460 l 883 885 l 494 839 q 487 648 489 776 q 478 432 485 519 l 889 460 m 754 613 q 731 542 740 563 q 717 522 721 522 q 710 529 714 522 l 594 763 l 615 778 l 754 613 z "},"岛":{"ha":1389,"x_min":229,"x_max":1151,"o":"m 1088 496 l 1144 443 q 1151 433 1151 438 q 1144 426 1151 429 q 1117 397 1125 418 q 1090 260 1108 376 q 1049 38 1072 144 q 1006 -125 1026 -68 q 968 -206 985 -182 q 949 -234 951 -231 q 942 -237 946 -237 q 932 -229 938 -237 q 800 -71 894 -169 l 813 -56 l 932 -132 q 1003 96 969 -60 q 1050 400 1038 251 l 504 354 l 572 296 q 578 287 578 292 q 575 279 578 282 q 551 175 551 244 l 551 10 l 733 25 q 743 75 739 42 l 754 156 q 760 229 760 196 q 749 282 760 263 l 760 290 l 838 217 q 840 211 840 214 q 838 204 840 208 q 810 154 814 181 l 782 -6 q 764 -72 774 -53 q 751 -90 754 -90 q 747 -89 749 -90 l 715 -21 l 381 -51 q 335 -62 350 -54 q 312 -82 319 -69 q 297 -92 304 -94 l 231 -61 q 266 -19 258 -36 q 272 32 274 -3 l 267 125 q 229 260 263 206 l 243 272 l 321 215 q 328 205 328 210 q 325 192 328 200 q 317 143 315 168 l 322 -11 l 503 6 l 503 192 q 481 351 503 281 q 431 321 447 346 q 423 315 426 315 q 417 317 419 315 l 363 357 q 395 392 385 374 q 404 457 406 410 l 397 726 q 371 931 393 849 l 389 938 l 443 825 l 521 833 q 576 961 557 907 q 590 1067 594 1015 l 604 1071 l 658 999 q 663 987 663 993 q 657 976 663 981 q 564 839 614 944 l 860 874 l 901 932 l 961 875 q 964 869 964 872 q 951 858 964 865 q 930 822 939 850 q 914 738 921 793 q 819 425 883 497 l 1047 444 l 1088 496 m 867 828 l 447 783 l 456 394 l 811 425 q 636 550 765 474 l 643 565 l 797 507 q 867 828 858 615 m 714 679 q 724 622 724 647 q 718 597 724 597 q 708 600 713 597 l 514 731 l 521 747 l 714 679 z "},"德":{"ha":1389,"x_min":114,"x_max":1276,"o":"m 1239 853 q 1247 843 1247 847 q 1235 838 1247 839 l 883 804 l 865 682 l 1093 713 l 1132 761 l 1188 710 q 1194 699 1194 704 q 1188 690 1194 694 q 1151 643 1156 668 l 1128 507 l 1167 471 q 1175 459 1175 463 q 1163 454 1175 456 l 646 397 q 638 326 650 326 q 628 335 633 326 l 581 401 q 596 481 599 432 l 588 613 q 575 713 585 658 l 596 718 l 624 650 l 821 676 l 833 799 q 590 761 651 779 l 532 810 l 838 838 q 847 981 847 933 q 838 1060 847 1028 l 853 1068 l 924 996 q 929 985 929 990 q 924 972 929 981 q 889 843 906 949 q 1178 900 1099 864 l 1239 853 m 1101 671 l 965 653 l 944 474 l 1081 490 l 1101 671 m 915 646 l 797 632 l 793 456 l 897 468 l 915 646 m 750 450 l 749 625 l 636 610 l 644 438 l 750 450 m 540 938 q 544 924 544 929 q 536 915 544 919 q 478 856 510 900 q 189 542 324 640 l 171 558 q 396 825 314 694 q 478 1038 478 956 l 494 1042 l 540 938 m 526 632 q 529 620 529 625 q 521 610 529 615 q 413 483 496 592 l 413 -75 q 406 -206 413 -175 q 394 -237 399 -237 q 385 -226 390 -237 l 333 -125 q 364 -3 364 -76 l 364 422 q 129 203 235 274 l 114 225 q 371 506 268 356 q 474 721 474 656 l 489 726 l 526 632 m 1242 318 q 1250 308 1250 311 q 1240 303 1250 304 q 567 239 608 254 l 514 285 q 976 324 821 306 q 1185 368 1131 342 l 1242 318 m 947 125 q 936 66 947 99 q 919 33 925 33 q 908 40 913 33 l 796 221 l 808 235 l 947 125 m 1274 93 q 1261 -12 1276 -12 q 1250 -4 1258 -12 l 1051 194 l 1064 211 l 1274 93 m 1047 57 q 1172 -162 1118 -79 q 1176 -172 1176 -168 q 1172 -178 1176 -175 q 1138 -185 1167 -181 q 1076 -190 1108 -190 q 893 -153 986 -190 q 752 -49 800 -117 q 658 154 704 18 l 681 163 q 831 -62 739 6 q 1086 -126 924 -129 l 1028 49 l 1047 57 m 581 156 q 583 93 583 122 q 551 -78 583 -17 q 510 -139 519 -139 q 503 -129 506 -139 l 481 -49 q 560 156 549 8 l 581 156 z "},"得":{"ha":1389,"x_min":86,"x_max":1299,"o":"m 1044 1050 l 1107 1000 q 1115 989 1115 993 q 1108 979 1115 985 q 1076 928 1081 956 l 1043 689 l 1076 651 q 1085 639 1085 643 q 1074 633 1085 635 l 697 597 q 682 540 693 540 q 672 551 679 540 l 629 628 q 647 725 649 665 l 642 922 q 632 1036 642 971 l 651 1042 l 682 961 l 1014 1001 l 1044 1050 m 1021 957 l 690 917 l 693 800 q 900 844 871 822 l 944 808 q 954 797 954 801 q 944 792 954 793 l 693 760 l 696 642 l 994 674 l 1021 957 m 501 929 q 506 917 506 921 q 496 908 506 913 q 426 850 463 890 q 144 611 288 703 l 132 629 q 361 860 281 756 q 442 1018 442 965 l 460 1022 l 501 929 m 525 657 q 528 644 528 650 q 518 633 528 639 q 450 568 496 618 q 406 517 428 542 l 406 11 q 397 -156 406 -112 q 383 -199 389 -199 q 372 -189 378 -199 l 322 -108 q 358 53 358 -50 l 358 467 q 100 257 244 356 l 86 275 q 370 551 265 419 q 471 738 475 682 l 490 742 l 525 657 m 1289 329 q 1299 318 1299 321 q 1286 314 1299 315 l 1010 285 l 1010 -51 q 996 -186 1010 -142 q 972 -231 982 -231 q 961 -222 968 -231 q 774 -24 878 -128 l 788 -8 l 946 -114 q 958 -28 958 -81 l 958 279 l 674 249 l 769 128 q 751 72 767 107 q 730 36 736 36 q 719 46 724 36 l 644 246 q 519 222 578 236 l 458 274 l 958 325 q 935 465 958 378 q 610 413 710 440 l 550 463 q 1124 551 1014 508 l 1178 508 q 1188 497 1188 500 q 1176 492 1188 493 l 969 469 l 1018 425 q 1024 415 1024 419 q 1019 404 1024 411 q 1010 331 1011 388 q 1228 381 1160 347 l 1289 329 z "},"迪":{"ha":1389,"x_min":65,"x_max":1325,"o":"m 1113 756 l 1193 694 q 1197 688 1197 692 q 1181 674 1197 685 q 1158 656 1165 664 q 1147 633 1151 649 q 1140 578 1143 617 l 1108 199 l 1157 153 q 1160 147 1160 150 q 1153 142 1160 143 l 632 83 q 628 28 632 50 q 620 7 624 7 q 613 13 617 7 l 549 111 q 576 219 576 140 q 575 274 576 246 l 563 524 q 532 715 558 618 l 551 725 l 608 625 l 810 654 l 810 801 q 772 1044 810 969 l 786 1058 l 883 976 q 888 970 888 974 q 885 963 888 967 q 860 786 860 929 l 860 661 l 1069 693 l 1113 756 m 1092 650 l 860 615 l 860 421 q 982 454 944 435 l 1035 414 q 1040 407 1040 410 q 1033 403 1040 404 l 860 376 l 860 158 l 1057 186 l 1092 650 m 810 151 l 810 368 q 713 347 765 361 l 651 392 l 810 414 l 810 608 l 611 579 l 631 128 l 810 151 m 407 772 q 397 691 406 718 q 383 664 388 664 q 375 669 379 664 l 204 874 l 218 892 l 407 772 m 1325 -142 l 1043 -225 q 613 -72 821 -124 q 282 -19 404 -19 q 156 -37 208 -19 l 82 29 q 190 36 132 36 q 311 29 247 36 q 347 158 347 103 q 296 296 347 214 l 363 468 q 129 414 186 433 l 65 463 l 350 510 l 392 578 l 463 511 q 468 502 468 506 q 461 493 468 499 q 412 438 438 475 q 326 294 386 400 q 381 226 367 250 q 394 169 394 201 q 343 25 394 138 q 589 -24 453 13 q 949 -115 849 -93 q 1121 -136 1049 -136 q 1322 -121 1193 -136 l 1325 -142 z "},"底":{"ha":1389,"x_min":125,"x_max":1260,"o":"m 1206 825 q 1213 817 1213 819 q 1204 813 1213 814 l 450 744 q 435 596 442 694 q 344 130 415 317 q 143 -208 272 -57 l 125 -192 q 345 310 303 56 q 388 767 388 565 q 379 900 388 854 l 401 906 l 449 794 l 817 821 l 688 1038 l 700 1050 l 850 932 q 824 822 839 858 q 1143 878 1058 843 l 1206 825 m 1224 150 q 1242 -74 1232 -3 l 1260 -190 q 1254 -197 1260 -197 q 1158 -153 1243 -197 q 981 14 1072 -108 q 839 351 890 136 l 593 317 l 581 4 l 821 188 l 836 168 q 633 -21 686 32 q 553 -114 581 -74 q 543 -122 547 -122 q 535 -119 539 -122 l 478 -79 q 519 -26 506 -53 q 533 54 532 1 l 551 514 q 540 656 553 579 l 553 661 l 608 574 q 982 726 929 668 l 993 729 l 1061 669 q 1068 660 1068 664 q 1061 656 1068 657 q 853 604 1025 650 q 881 403 861 499 q 1131 461 1074 432 l 1189 414 q 1199 403 1199 407 q 1188 399 1199 400 l 889 358 q 1189 -101 963 31 l 1200 151 l 1224 150 m 831 394 q 799 589 806 525 q 601 535 668 554 l 594 358 l 831 394 m 910 -71 q 897 -136 907 -108 q 883 -164 888 -164 q 874 -157 878 -164 l 751 47 l 763 58 l 910 -71 z "},"地":{"ha":1389,"x_min":97,"x_max":1290,"o":"m 1243 179 q 1271 -29 1258 40 l 1290 -131 q 1285 -137 1290 -135 q 1232 -150 1281 -140 q 1112 -165 1183 -160 q 969 -171 1040 -171 q 756 -149 819 -171 q 671 -76 692 -128 q 650 94 650 -25 l 650 389 q 550 324 596 360 l 482 351 l 650 435 l 650 546 q 621 782 650 724 l 635 792 l 713 725 q 721 712 721 717 q 717 703 721 707 q 697 561 697 681 l 697 458 l 854 536 l 854 782 q 835 1022 854 963 l 846 1036 l 922 976 q 929 967 929 971 q 925 957 929 963 q 903 778 903 922 l 903 560 l 1096 657 l 1125 721 l 1197 669 q 1206 659 1206 663 q 1200 651 1206 656 q 1140 531 1153 624 q 1080 171 1106 257 q 1042 85 1054 85 q 1033 92 1038 85 q 933 235 994 163 l 946 249 l 1031 183 q 1100 611 1068 303 l 903 514 l 903 236 q 900 33 903 61 q 892 6 897 6 q 883 13 888 6 l 836 81 q 854 250 854 113 l 854 490 l 697 413 l 697 85 q 723 -62 697 -18 q 824 -117 749 -107 q 964 -126 900 -126 q 1222 -92 1103 -126 l 1224 179 l 1243 179 m 586 513 q 592 506 592 508 q 583 501 592 503 l 419 469 l 419 124 l 574 186 l 582 168 q 164 -58 199 -28 l 97 -7 l 372 104 l 372 461 q 189 415 233 435 l 132 458 l 372 503 l 372 757 q 336 990 372 907 l 349 999 l 439 932 q 447 922 447 926 q 443 913 447 918 q 419 756 419 882 l 419 513 q 538 549 499 531 l 586 513 z "},"第":{"ha":1389,"x_min":146,"x_max":1240,"o":"m 1232 883 q 1240 874 1240 878 q 1229 869 1240 871 l 953 831 l 1036 753 q 1022 703 1033 733 q 1008 672 1011 672 q 1000 681 1004 672 l 918 825 l 786 807 q 651 635 714 701 l 635 647 q 779 875 724 758 q 838 1069 835 992 l 853 1074 l 901 999 q 906 988 906 992 q 901 979 906 983 q 813 849 885 963 q 1172 925 1088 892 l 1232 883 m 707 844 q 715 835 715 838 q 706 831 715 832 l 511 799 l 592 719 q 578 665 589 693 q 563 638 567 638 q 554 646 558 638 l 481 794 l 383 778 q 163 549 282 642 l 151 563 q 373 840 288 696 q 458 1067 458 985 l 475 1072 l 528 997 q 532 988 532 992 q 522 976 532 983 q 497 950 511 969 q 453 883 483 931 q 417 826 424 836 q 660 886 638 861 l 707 844 m 1153 318 q 1158 309 1158 313 q 1151 301 1158 306 q 1111 251 1118 282 q 1014 -19 1046 32 q 972 -71 982 -71 q 963 -62 969 -71 q 801 122 903 15 l 815 138 l 969 25 q 1057 269 1021 103 l 714 228 l 714 -54 q 700 -247 714 -247 q 693 -240 697 -247 l 629 -140 q 655 -87 647 -121 q 663 28 663 -54 l 663 174 q 427 -31 572 76 q 157 -194 282 -137 l 146 -176 q 633 219 426 -7 l 415 193 q 357 154 381 189 q 349 149 353 149 q 342 153 346 149 l 288 194 q 329 235 315 217 q 347 285 343 253 l 358 358 q 361 406 361 374 q 353 469 361 438 l 372 481 l 415 410 l 663 442 l 663 571 q 358 524 421 543 l 306 571 l 911 642 l 953 686 l 1008 629 q 1013 622 1013 625 q 1004 617 1013 619 q 987 601 996 614 q 974 569 978 588 l 958 490 l 1000 451 q 1007 442 1007 446 q 996 438 1007 439 l 714 401 l 714 276 l 1053 315 l 1090 372 l 1153 318 m 931 601 l 714 576 l 714 449 l 908 474 l 931 601 m 663 269 l 663 394 l 404 363 l 390 239 l 663 269 z "},"东":{"ha":1389,"x_min":119,"x_max":1257,"o":"m 1251 757 q 1257 749 1257 751 q 1250 746 1257 746 l 622 703 l 451 401 l 726 424 q 706 660 726 628 l 719 671 l 806 600 q 810 594 810 597 q 807 586 810 590 q 779 429 782 546 q 1035 472 956 444 l 1103 417 q 1108 408 1108 411 q 1101 406 1108 406 l 779 379 l 779 19 q 767 -195 779 -153 q 743 -237 756 -237 q 738 -233 742 -237 q 543 -19 675 -149 l 554 -6 l 713 -108 q 726 54 726 -37 l 726 375 l 481 354 q 400 321 439 350 q 392 317 396 317 q 385 321 388 317 l 328 382 q 394 424 369 399 q 456 510 419 450 q 561 699 492 569 q 265 665 301 681 l 194 731 l 588 750 q 669 922 642 853 q 696 1040 696 992 q 694 1065 696 1053 l 713 1074 l 783 969 q 786 960 786 964 q 772 944 786 957 q 744 913 758 932 q 700 840 731 894 l 650 753 q 1174 819 1078 775 l 1251 757 m 571 206 q 572 198 572 203 q 564 190 572 193 q 504 151 532 178 q 133 -122 332 -12 l 119 -97 q 394 121 283 8 q 511 299 506 233 l 529 303 l 571 206 m 1197 33 q 1192 -65 1199 -35 q 1180 -94 1185 -94 q 1171 -87 1175 -94 q 879 236 1076 63 l 893 253 l 1197 33 z "},"都":{"ha":1389,"x_min":108,"x_max":1283,"o":"m 897 561 l 607 526 q 435 344 524 426 l 681 375 l 715 431 l 771 389 q 778 378 778 383 q 772 368 778 374 q 749 306 750 346 l 740 47 q 729 -93 738 -51 q 710 -135 721 -135 q 704 -131 707 -135 l 654 -43 l 443 -64 q 440 -131 443 -97 q 432 -164 436 -164 q 426 -158 429 -164 l 378 -72 q 393 -36 389 -56 q 397 47 397 -17 l 397 308 q 118 108 272 200 l 108 125 q 392 360 254 229 l 383 431 l 399 438 l 421 389 q 539 518 479 447 q 203 461 333 492 l 146 506 l 497 553 l 497 724 q 319 690 394 708 l 260 731 l 497 765 l 499 856 q 463 1053 499 985 l 471 1063 l 561 993 q 567 984 567 988 q 564 975 567 981 q 544 869 544 942 l 544 772 q 647 799 629 789 l 690 760 q 693 754 693 757 q 686 750 693 751 l 544 731 l 544 558 l 575 561 q 782 946 782 825 l 796 951 l 842 851 q 844 840 844 846 q 836 829 844 835 q 758 731 804 807 q 644 571 713 656 q 847 617 800 594 l 896 576 q 903 566 903 569 q 897 561 903 563 m 699 339 l 443 304 l 443 164 q 617 200 585 185 l 656 160 q 660 153 660 157 q 649 149 660 150 l 443 124 l 443 -22 q 626 11 601 -1 l 674 -21 q 693 113 690 0 l 699 339 m 1272 869 q 1279 857 1279 863 q 1268 847 1279 851 q 1239 820 1257 842 q 1215 785 1221 799 l 1128 557 q 1283 265 1283 407 q 1226 97 1283 178 q 1153 15 1169 15 q 1143 24 1147 15 q 1022 201 1078 131 l 1038 217 l 1163 117 q 1225 279 1225 197 q 1085 551 1225 401 l 1167 825 l 968 801 l 968 -40 q 950 -256 968 -256 q 943 -247 947 -256 l 885 -140 q 917 21 917 -103 l 917 761 q 900 967 917 875 l 922 972 l 964 853 l 1171 879 l 1215 928 l 1272 869 z "},"敦":{"ha":1389,"x_min":118,"x_max":1301,"o":"m 535 951 q 516 899 529 924 q 497 874 503 874 q 486 883 490 874 l 407 1057 l 421 1065 l 535 951 m 1301 -161 l 1079 -172 l 928 119 q 782 -52 871 25 q 532 -215 693 -129 l 522 -196 q 766 -12 679 -94 q 903 168 853 71 l 810 347 q 779 393 797 374 q 724 292 751 336 l 700 300 q 851 727 813 535 q 890 960 890 919 q 885 1029 890 1001 l 899 1039 l 975 943 q 978 936 978 939 q 975 931 978 933 q 931 824 953 908 q 863 601 910 739 q 1165 674 1093 632 l 1229 628 q 1236 619 1236 622 q 1226 614 1236 615 l 1049 589 l 1092 535 q 1094 527 1094 529 q 1092 522 1094 525 q 1035 381 1071 508 q 951 163 1000 253 q 1101 -66 1042 -8 q 1301 -137 1160 -124 l 1301 -161 m 1013 583 l 849 561 q 793 422 824 486 l 824 418 q 854 340 824 397 l 924 213 q 992 425 967 313 q 1013 583 1018 538 m 761 867 q 767 858 767 861 q 757 854 767 856 q 188 778 322 807 l 129 819 q 714 907 669 885 l 761 867 m 629 785 l 676 743 q 683 733 683 738 q 676 725 683 729 q 647 685 653 708 l 628 604 l 651 581 q 658 569 658 574 q 650 564 658 565 l 344 517 q 343 489 346 501 q 337 476 340 476 q 329 481 333 476 l 283 533 q 296 593 297 564 l 293 665 q 271 756 290 707 l 289 765 l 328 706 l 599 747 l 629 785 m 597 703 l 336 665 l 344 556 l 582 593 l 597 703 m 676 268 l 501 207 q 510 85 510 153 q 487 -117 510 -42 q 442 -193 464 -193 q 433 -187 438 -193 q 304 -15 388 -107 l 321 4 l 433 -83 q 456 118 456 -17 q 454 190 456 153 q 182 89 193 101 l 118 133 l 453 228 q 424 338 446 290 l 443 349 q 468 306 458 326 l 557 418 q 204 346 235 364 l 143 393 l 586 464 l 624 507 l 671 447 q 675 438 675 442 q 667 431 675 433 q 594 388 626 417 l 479 281 q 494 239 485 271 l 668 289 l 676 268 z "},"顿":{"ha":1389,"x_min":106,"x_max":1258,"o":"m 667 743 q 674 733 674 738 q 664 726 674 728 l 432 697 l 432 367 l 551 388 l 560 507 q 544 614 564 567 l 558 626 l 625 558 q 632 547 632 551 q 626 535 632 542 q 607 478 610 513 l 599 371 q 592 300 594 313 q 585 288 590 288 q 575 294 581 288 l 539 342 l 432 322 l 432 51 l 626 188 l 640 168 q 472 20 514 58 q 412 -39 429 -18 q 390 -60 394 -60 q 379 -54 386 -60 l 325 -12 q 368 42 354 7 q 382 156 382 78 l 382 313 q 283 290 306 299 q 253 272 260 282 q 242 261 246 261 q 232 267 239 261 l 189 303 q 218 345 211 325 q 222 403 225 365 l 219 440 q 192 560 213 525 l 206 571 l 275 510 q 283 500 283 504 q 281 492 283 496 q 269 439 269 474 l 269 338 l 382 357 l 382 692 q 172 649 261 675 l 106 701 l 382 735 q 374 958 382 900 q 344 1057 365 1017 l 358 1072 l 451 983 q 460 970 460 975 q 451 951 460 965 q 437 893 442 936 q 432 740 432 850 q 619 785 561 758 l 667 743 m 1251 942 q 1258 933 1258 936 q 1250 928 1258 929 l 932 897 l 974 842 q 976 834 976 839 q 972 825 976 829 q 943 781 957 810 q 899 665 929 753 l 1071 686 l 1106 743 l 1172 688 q 1178 680 1178 683 q 1164 667 1178 676 q 1144 642 1150 657 q 1139 594 1139 626 l 1139 247 q 1133 134 1139 179 q 1118 89 1126 89 q 1111 94 1115 89 l 1058 189 q 1083 318 1083 221 l 1083 643 l 769 606 l 769 242 q 758 107 769 107 q 751 113 756 107 l 700 201 q 719 306 719 231 l 719 568 q 704 697 719 624 l 718 704 l 756 649 l 857 661 q 894 894 901 840 q 671 854 731 878 l 608 906 q 1196 990 1129 960 l 1251 942 m 892 540 l 960 474 q 969 459 969 464 q 965 447 969 454 q 940 333 947 411 q 892 90 929 181 q 772 -72 856 0 q 518 -237 689 -143 l 506 -217 q 743 -45 644 -140 q 866 171 842 50 q 890 396 890 292 q 874 531 890 500 l 892 540 m 1213 -74 q 1214 -110 1214 -93 q 1210 -159 1214 -132 q 1201 -186 1206 -186 q 1190 -178 1197 -186 q 939 72 1092 -57 l 949 90 l 1213 -74 z "},"多":{"ha":1389,"x_min":210,"x_max":1179,"o":"m 1097 846 q 1101 838 1101 842 q 1096 833 1101 835 q 1049 813 1067 825 q 1006 774 1031 800 q 272 289 654 415 l 261 308 q 958 821 696 497 q 653 776 682 789 l 624 803 l 583 763 l 696 667 q 681 604 692 635 q 665 574 671 574 q 656 582 660 574 l 563 744 q 311 563 454 646 l 300 582 q 596 844 472 704 q 743 1072 719 983 l 764 1075 l 803 972 q 804 965 804 968 q 800 960 804 961 q 665 847 751 942 q 656 836 658 839 l 985 871 l 1036 922 l 1097 846 m 1176 408 q 1179 400 1179 404 q 1174 394 1179 396 q 1131 366 1154 392 q 1053 257 1108 340 q 722 -53 928 68 q 211 -240 517 -174 l 210 -217 q 751 26 574 -99 q 1049 371 928 151 q 731 319 794 342 l 707 340 l 658 294 l 781 181 q 769 94 779 129 q 752 58 758 58 q 742 67 746 58 l 640 278 q 290 44 492 147 l 281 61 q 794 543 635 286 l 808 544 l 843 475 q 844 467 844 471 q 837 460 844 463 q 814 444 829 458 q 744 376 799 431 l 1054 422 l 1119 483 l 1176 408 z "},"尔":{"ha":1389,"x_min":179,"x_max":1228,"o":"m 1206 747 q 1208 740 1208 744 q 1201 732 1208 736 q 1117 650 1161 711 q 1019 500 1072 589 l 994 514 l 1090 715 l 729 665 l 799 596 q 801 589 801 593 q 799 581 801 585 q 783 532 790 568 q 775 464 775 496 l 775 50 q 761 -179 775 -129 q 736 -229 747 -229 q 726 -224 732 -229 q 521 -12 636 -115 l 532 7 l 710 -106 q 722 86 722 -49 l 722 431 q 699 661 722 597 q 518 624 603 647 l 472 660 q 197 336 360 482 l 181 351 q 479 769 376 576 q 576 1056 582 961 l 593 1061 l 657 943 q 658 937 658 940 q 654 932 658 933 q 578 838 625 919 q 485 679 532 756 l 1093 764 l 1133 817 l 1206 747 m 582 388 q 585 378 585 382 q 578 372 585 375 q 528 317 567 367 q 197 -31 371 110 l 179 -15 q 435 285 353 154 q 508 478 517 415 l 529 482 l 582 388 m 1213 199 q 1228 110 1228 138 q 1224 69 1228 83 q 1217 54 1221 54 q 1208 60 1214 54 q 1051 233 1153 128 q 860 421 950 339 l 874 440 l 1213 199 z "},"法":{"ha":1389,"x_min":125,"x_max":1249,"o":"m 1244 389 q 1249 383 1249 386 q 1240 378 1249 379 l 799 338 l 822 288 q 826 276 826 281 q 818 265 826 271 q 733 160 803 254 l 571 -60 l 982 -4 q 861 172 947 51 l 876 185 l 1117 -61 q 1104 -140 1118 -96 q 1083 -183 1090 -183 q 1072 -176 1076 -183 q 1000 -35 1032 -86 q 538 -131 571 -112 q 528 -133 533 -133 q 515 -128 524 -133 l 442 -79 q 528 -39 497 -62 q 606 53 558 -15 q 699 203 654 122 q 757 333 744 283 q 500 297 549 314 l 442 335 l 269 -142 q 260 -151 265 -151 q 246 -135 254 -151 q 125 26 238 -119 l 144 44 l 247 -43 l 469 497 l 496 485 l 447 351 l 779 379 l 779 624 q 563 590 618 606 l 485 638 l 779 665 l 779 815 q 756 1017 779 971 l 774 1029 l 854 946 q 863 933 863 936 q 860 928 863 931 q 840 874 850 914 q 831 799 831 833 l 831 671 q 1063 718 1010 688 l 1126 668 q 1132 660 1132 663 q 1125 657 1132 658 l 831 628 l 831 383 q 1060 408 986 397 q 1172 440 1133 419 l 1244 389 m 456 794 q 458 756 458 775 q 453 715 458 738 q 443 692 449 692 q 432 699 438 692 l 258 899 l 269 915 l 456 794 m 340 519 q 343 472 343 489 q 340 437 343 456 q 333 418 338 418 q 324 424 329 418 l 135 603 l 144 619 l 340 519 z "},"坊":{"ha":1389,"x_min":100,"x_max":1294,"o":"m 656 301 q 204 22 318 100 l 100 64 l 383 199 l 383 519 q 201 478 238 494 l 132 525 l 383 568 l 383 788 q 344 1065 383 967 l 357 1075 l 453 996 q 458 988 458 992 q 456 979 458 983 q 440 907 447 964 q 433 786 433 850 l 433 578 q 558 617 489 586 l 608 572 q 613 565 613 568 q 608 561 613 563 l 433 529 l 433 222 l 646 324 l 656 301 m 950 900 q 933 824 943 858 q 920 784 924 789 q 913 779 917 779 q 906 786 910 779 l 772 1040 l 788 1057 l 950 900 m 1289 708 q 1294 701 1294 704 q 1286 697 1294 699 l 835 654 l 883 596 q 886 588 886 592 q 881 579 886 585 q 867 549 875 574 q 839 435 860 524 l 1057 467 l 1093 517 l 1164 460 q 1168 451 1168 456 q 1163 444 1168 447 q 1117 374 1128 426 q 1069 161 1093 257 q 1020 -8 1044 65 q 972 -135 996 -82 q 931 -210 947 -187 q 913 -233 914 -232 q 908 -235 911 -235 q 901 -229 904 -235 q 751 -6 828 -87 l 765 8 l 910 -119 q 1064 421 1008 56 l 826 386 q 672 44 775 183 q 367 -233 568 -96 l 351 -214 q 720 231 633 -4 q 800 651 807 467 q 619 621 756 646 l 557 672 q 1023 719 871 701 q 1224 763 1175 738 l 1289 708 z "},"非":{"ha":1389,"x_min":164,"x_max":1236,"o":"m 1229 207 q 1236 197 1236 201 q 1225 192 1236 193 l 839 157 l 839 -32 q 830 -179 839 -135 q 815 -224 821 -224 q 806 -214 810 -224 l 756 -117 q 785 54 785 -58 l 785 821 q 763 1046 785 975 l 781 1057 l 864 964 q 868 957 868 960 q 865 950 868 954 q 847 900 854 935 q 839 826 839 865 l 839 700 q 1138 757 1088 731 l 1188 714 q 1196 703 1196 707 q 1183 699 1196 700 l 839 654 l 839 457 q 1090 513 1053 486 l 1140 465 q 1147 455 1147 458 q 1136 450 1147 451 l 839 414 l 839 201 q 1171 261 1124 232 l 1229 207 m 543 1019 l 628 936 q 632 929 632 932 q 629 922 632 926 q 607 799 607 893 l 607 -7 q 599 -152 607 -110 q 583 -194 590 -194 q 576 -186 581 -194 l 524 -85 q 554 79 554 -25 l 554 183 q 219 135 296 153 l 164 183 l 554 224 l 554 432 q 296 393 344 407 l 242 442 l 554 474 l 554 658 q 250 618 347 639 l 199 669 l 554 701 l 554 793 q 529 1006 554 947 l 543 1019 z "},"费":{"ha":1389,"x_min":160,"x_max":1229,"o":"m 1226 593 q 1229 588 1229 590 q 1218 578 1229 585 q 1197 558 1207 572 q 1169 466 1188 543 q 1128 347 1151 389 q 1099 304 1106 304 q 1088 313 1093 304 q 986 451 1057 363 l 1000 463 l 1089 393 q 1135 557 1124 474 l 842 529 q 836 378 842 411 l 904 385 l 943 432 l 994 388 q 999 381 999 385 q 988 370 999 378 q 972 349 978 363 q 965 293 967 335 l 958 144 q 933 13 951 13 q 926 17 929 13 l 886 93 q 910 194 906 124 l 918 340 l 513 307 l 513 129 q 509 1 513 22 q 500 -19 506 -19 q 492 -14 494 -19 l 443 68 q 460 106 456 85 q 464 182 464 128 l 464 325 q 171 144 376 240 l 160 164 q 417 335 336 261 q 533 501 499 408 l 476 496 q 370 481 397 489 q 333 460 343 472 q 321 447 324 447 q 315 450 318 447 l 272 493 q 318 553 307 518 l 344 638 q 354 747 358 685 l 372 751 l 404 689 l 581 704 q 592 826 586 743 q 333 794 393 811 l 269 844 l 593 868 q 578 1056 597 1014 l 592 1065 l 663 1004 q 669 995 669 999 q 664 986 669 992 q 646 872 654 976 l 793 883 q 788 1000 793 964 q 769 1068 783 1036 l 781 1078 l 864 1007 q 869 999 869 1003 q 867 992 869 994 q 842 888 843 958 l 1028 901 l 1061 949 l 1119 897 q 1122 891 1122 894 q 1117 885 1122 888 q 1071 799 1086 869 l 1060 746 l 1085 718 q 1089 709 1089 714 q 1081 704 1089 704 l 842 685 l 842 568 l 1126 596 l 1171 649 l 1226 593 m 1032 861 l 842 846 l 842 726 l 1011 740 l 1032 861 m 793 722 l 793 842 l 643 831 q 631 708 639 765 l 793 722 m 793 564 l 793 681 l 625 667 q 597 546 617 610 l 793 564 m 575 663 l 399 649 l 363 524 l 547 540 q 575 663 560 581 m 819 376 l 779 456 q 793 525 792 483 l 585 506 q 499 363 554 426 l 508 347 l 819 376 m 682 278 l 746 215 q 751 207 751 210 q 747 199 751 204 q 715 131 735 182 q 603 -70 664 -7 q 458 -169 543 -133 q 261 -235 372 -206 l 253 -212 q 574 -36 475 -147 q 671 272 674 75 l 682 278 m 1051 -117 q 1067 -194 1067 -168 q 1062 -221 1067 -221 q 1053 -217 1057 -221 q 718 47 894 -74 l 726 65 l 1051 -117 z "},"佛":{"ha":1389,"x_min":121,"x_max":1267,"o":"m 1261 414 q 1267 406 1267 410 q 1259 399 1267 403 q 1240 376 1251 394 q 1226 343 1228 357 q 1186 128 1208 213 q 1142 1 1164 43 q 1114 -42 1119 -42 q 1104 -33 1108 -42 q 990 161 1047 88 l 1004 174 l 1108 75 q 1176 369 1149 142 l 958 338 l 958 -15 q 953 -208 958 -179 q 942 -236 947 -236 q 935 -231 938 -236 l 878 -131 q 901 -72 896 -110 q 907 57 907 -35 l 907 331 l 763 310 q 673 0 739 113 q 458 -221 607 -112 l 447 -204 q 641 26 583 -85 q 711 301 699 138 q 599 280 625 289 q 567 260 574 271 q 558 249 561 249 q 549 253 554 249 l 500 290 q 539 375 535 332 l 550 488 q 551 527 551 501 q 540 592 551 553 l 556 597 l 600 521 l 724 539 q 724 706 725 621 q 549 672 593 689 l 485 718 l 724 751 q 689 1001 719 951 l 703 1013 l 792 933 q 797 924 797 928 q 792 914 797 921 q 775 758 776 894 l 907 776 q 903 974 907 922 q 883 1058 900 1026 l 899 1071 l 983 993 q 988 985 988 989 q 983 976 988 982 q 958 783 958 946 l 1082 801 l 1119 854 l 1175 810 q 1183 800 1183 804 q 1174 790 1183 796 q 1154 767 1165 785 q 1140 736 1143 750 l 1114 607 l 1153 576 q 1160 567 1160 571 q 1150 563 1160 564 l 958 533 l 958 378 l 1164 410 l 1201 458 l 1261 414 m 1090 757 l 958 739 l 958 575 l 1065 594 l 1090 757 m 907 567 l 907 732 l 775 714 l 775 547 l 907 567 m 907 369 l 907 525 l 774 506 q 765 347 772 404 l 907 369 m 722 497 l 596 479 l 581 318 l 714 339 q 722 497 718 393 m 549 933 q 551 924 551 928 q 543 914 551 919 q 494 860 518 901 q 415 733 469 818 l 415 47 q 388 -221 415 -221 q 381 -214 383 -221 l 331 -119 q 365 75 365 -78 l 365 661 q 136 404 265 524 l 121 424 q 376 762 286 603 q 467 1010 467 921 q 464 1035 467 1024 l 479 1042 l 549 933 z "},"夫":{"ha":1389,"x_min":103,"x_max":1288,"o":"m 1288 -133 l 1029 -144 l 674 376 q 477 28 621 182 q 114 -217 333 -125 l 103 -196 q 441 60 314 -89 q 614 372 568 208 q 243 325 383 350 l 176 378 l 625 417 q 658 661 646 507 q 379 625 453 640 l 317 678 l 663 707 q 668 888 668 799 q 646 1044 668 976 l 664 1057 l 758 967 q 765 956 765 960 q 760 947 765 953 q 740 891 747 935 q 722 713 732 847 q 1011 761 914 732 l 1068 717 q 1076 708 1076 711 q 1064 703 1076 704 l 718 668 q 685 422 707 514 q 1121 488 1003 450 l 1188 438 q 1197 427 1197 431 q 1185 422 1197 424 l 717 382 l 825 229 q 1051 -31 964 33 q 1288 -110 1138 -96 l 1288 -133 z "},"福":{"ha":1389,"x_min":121,"x_max":1261,"o":"m 508 913 q 495 838 506 869 q 479 806 485 806 q 469 813 474 806 l 326 1031 l 339 1046 l 508 913 m 1256 938 q 1261 929 1261 932 q 1251 925 1261 926 q 675 864 794 890 l 611 918 q 1200 993 1085 946 l 1256 938 m 1094 838 l 1146 783 q 1151 774 1151 778 q 1146 767 1151 771 q 1104 700 1111 740 l 1088 607 l 1128 569 q 1135 559 1135 563 q 1124 554 1135 556 l 789 526 q 782 456 789 456 q 775 461 779 456 l 725 528 q 743 626 743 551 l 743 706 q 731 819 743 779 l 751 828 l 783 756 l 1051 789 l 1094 838 m 1060 742 l 789 714 l 789 572 l 1039 599 l 1060 742 m 611 701 q 614 694 614 699 q 608 688 614 690 q 549 635 571 667 q 456 514 526 604 l 456 492 l 590 433 q 594 390 594 410 q 586 343 594 343 q 581 346 583 343 l 456 465 l 456 19 q 447 -167 456 -122 q 431 -212 439 -212 q 424 -206 428 -212 l 369 -110 q 406 72 406 -56 l 406 456 q 139 214 318 354 l 121 235 q 493 663 371 451 q 206 608 240 624 l 151 657 l 504 707 l 557 763 l 611 701 m 1189 486 l 1246 432 q 1251 422 1251 426 q 1240 410 1251 418 q 1220 383 1228 401 q 1207 317 1213 365 l 1174 -1 q 1139 -164 1156 -164 q 1133 -158 1136 -164 l 1083 -39 l 696 -78 q 688 -197 696 -197 q 679 -189 685 -197 l 624 -97 q 644 -46 640 -74 q 647 75 647 -18 l 647 274 q 633 481 647 403 l 653 485 l 696 388 l 1147 431 l 1189 486 m 1157 385 l 929 365 l 929 208 q 1051 236 1007 217 l 1096 190 q 1100 183 1100 186 q 1093 179 1100 181 l 929 163 l 929 -7 q 1074 18 1050 4 l 1106 -12 q 1124 46 1119 0 l 1157 385 m 883 203 l 883 361 l 696 344 l 696 183 l 883 203 m 883 -12 l 883 158 q 722 135 775 146 l 696 157 l 696 -33 l 883 -12 z "},"干":{"ha":1389,"x_min":132,"x_max":1256,"o":"m 1249 539 q 1256 528 1256 532 q 1247 525 1256 525 l 718 488 l 718 -8 q 712 -206 718 -169 q 697 -242 706 -242 q 690 -236 694 -242 l 625 -124 q 663 72 663 -69 l 663 483 q 211 429 292 456 l 132 496 l 663 532 l 663 869 q 375 828 447 849 l 297 893 q 1014 972 940 932 l 1069 919 q 1075 910 1075 914 q 1068 907 1075 907 l 718 875 l 718 536 q 1185 601 1094 564 l 1249 539 z "},"港":{"ha":1389,"x_min":108,"x_max":1288,"o":"m 1288 207 l 1108 189 l 871 515 l 728 501 q 619 360 683 438 l 644 322 l 881 353 l 915 396 l 967 346 q 971 337 971 342 q 967 329 971 332 q 935 268 943 310 l 914 171 l 949 131 q 954 120 954 124 q 946 115 954 117 l 651 82 l 651 -6 q 666 -107 650 -78 q 727 -147 682 -136 q 836 -157 772 -157 q 977 -148 900 -157 q 1081 -125 1054 -139 l 1093 88 l 1114 89 q 1144 -101 1132 -42 q 1157 -162 1157 -160 q 1154 -168 1157 -165 q 1097 -181 1151 -171 q 972 -198 1043 -192 q 836 -204 901 -204 q 644 -165 686 -204 q 601 -36 601 -126 l 601 238 q 593 328 601 289 q 328 92 465 178 l 258 -143 q 251 -154 256 -154 q 242 -147 247 -154 q 117 15 178 -60 l 131 33 l 231 -40 l 422 483 l 443 475 l 340 133 q 654 494 531 288 q 518 469 560 482 l 463 513 l 669 535 l 658 711 l 560 692 l 504 735 l 656 751 l 650 839 q 613 996 642 943 l 625 1007 l 707 951 q 714 943 714 947 q 711 935 714 939 q 700 843 697 908 l 703 757 l 882 776 l 889 853 q 893 947 893 900 q 876 1029 893 994 l 888 1040 l 961 969 q 967 958 967 964 q 964 949 967 953 q 942 840 951 925 l 935 783 q 1056 814 1028 800 l 1100 776 q 1106 767 1106 771 q 1097 763 1106 764 l 931 743 l 910 561 q 1135 600 1064 581 l 1185 558 q 1190 549 1190 553 q 1183 546 1190 546 l 908 519 q 1097 298 1029 357 q 1288 225 1165 239 l 1288 207 m 879 738 l 704 717 l 708 539 l 865 556 l 879 738 m 890 308 l 651 282 l 651 126 l 865 156 l 890 308 m 419 821 q 428 747 428 779 q 423 715 428 715 q 414 719 418 715 l 239 888 l 246 906 l 419 821 m 314 493 q 308 426 314 456 q 297 397 301 397 q 286 403 292 397 l 108 589 l 118 607 l 314 493 z "},"哥":{"ha":1389,"x_min":78,"x_max":1293,"o":"m 1286 472 q 1293 463 1293 467 q 1283 458 1293 460 l 924 432 l 957 397 q 963 388 963 392 q 960 379 963 383 q 949 269 949 357 l 949 -67 q 934 -194 949 -146 q 910 -242 919 -242 q 903 -237 907 -242 q 697 -40 819 -144 l 708 -24 l 886 -126 q 897 -28 897 -104 l 897 272 q 888 429 897 414 q 310 384 414 393 q 144 363 207 375 l 78 414 l 922 475 l 876 550 q 899 654 899 589 l 899 822 q 888 915 899 889 q 269 846 335 872 l 203 897 l 707 942 q 980 972 896 960 q 1096 1003 1064 983 l 1156 951 q 1164 942 1164 944 q 1154 938 1164 939 l 918 918 l 961 883 q 965 876 965 881 q 963 868 965 872 q 947 782 947 844 l 947 585 q 942 476 947 524 q 1226 524 1169 493 l 1286 472 m 696 833 l 751 786 q 757 776 757 781 q 744 760 757 772 q 723 735 731 749 q 714 706 715 722 l 704 615 l 731 585 q 738 574 738 576 q 726 569 738 571 l 460 539 q 450 464 460 464 q 443 472 449 464 l 394 549 q 413 618 414 569 l 410 722 q 400 828 410 765 l 419 832 l 449 751 l 656 778 l 696 833 m 665 735 l 456 711 l 458 581 l 657 606 l 665 735 m 683 360 l 740 306 q 747 297 747 300 q 740 289 747 293 q 708 233 713 269 l 697 144 l 731 108 q 739 97 739 100 q 725 92 739 93 l 440 72 q 435 -35 443 -35 q 426 -26 432 -35 l 375 58 q 393 138 394 81 l 389 256 q 379 361 389 311 l 396 365 l 429 283 l 646 307 l 683 360 m 660 264 l 438 242 l 440 114 l 649 129 l 660 264 z "},"革":{"ha":1389,"x_min":117,"x_max":1263,"o":"m 1253 140 q 1263 129 1263 132 q 1250 125 1263 126 l 721 92 l 721 -56 q 701 -244 721 -244 q 694 -239 697 -244 l 635 -136 q 663 -63 657 -111 q 669 88 669 -15 q 190 39 244 60 l 117 96 l 669 131 l 669 257 l 443 239 q 438 181 443 200 q 429 161 433 161 q 419 172 425 161 l 378 246 q 397 329 400 271 l 393 439 q 367 558 390 497 l 382 567 l 443 464 l 669 489 l 669 608 l 578 599 q 567 544 578 544 q 560 550 564 544 l 513 618 q 528 668 526 638 q 531 783 531 699 q 231 747 268 763 l 168 797 l 531 824 l 531 901 q 493 1050 531 983 l 506 1061 l 589 994 q 599 984 599 988 q 594 975 599 981 q 578 881 578 951 l 578 828 l 838 847 q 842 946 842 906 q 818 1069 842 1029 l 831 1079 l 921 1003 q 926 995 926 999 q 916 981 926 992 q 899 938 906 969 q 889 850 893 906 q 1142 896 1089 868 l 1196 849 q 1206 838 1206 840 q 1194 833 1206 835 l 886 810 l 875 682 l 910 644 q 914 638 914 640 q 906 633 914 635 l 721 614 l 721 494 l 971 521 l 1014 569 l 1064 515 q 1069 505 1069 508 q 1059 495 1069 501 q 1038 473 1049 489 q 1024 442 1026 457 l 1007 340 l 1047 304 q 1057 292 1057 294 q 1046 288 1057 289 l 721 261 l 721 133 q 1201 190 1119 160 l 1253 140 m 835 806 l 578 788 l 578 643 l 826 669 l 835 806 m 978 475 l 721 449 l 721 304 l 958 325 l 978 475 m 669 300 l 669 443 l 439 421 l 442 281 l 669 300 z "},"格":{"ha":1389,"x_min":68,"x_max":1315,"o":"m 1315 256 l 1133 229 l 872 482 q 654 281 788 383 l 692 208 l 983 243 l 1022 292 l 1079 236 q 1086 226 1086 229 q 1077 217 1086 222 q 1057 194 1068 213 q 1043 160 1046 175 l 1010 -37 l 1049 -83 q 1056 -96 1056 -92 q 1042 -101 1056 -100 l 708 -126 q 696 -228 713 -228 q 688 -219 693 -228 l 633 -135 q 654 -24 657 -86 l 649 140 q 631 263 646 213 q 464 153 543 199 l 453 175 q 838 514 711 349 q 685 649 701 649 q 601 517 650 582 l 583 528 q 720 836 671 697 q 769 1039 769 975 q 767 1061 769 1051 l 786 1071 l 847 1000 q 853 990 853 994 q 847 981 853 986 q 805 906 824 954 q 757 796 786 858 l 1001 829 l 1046 883 l 1108 815 q 1117 803 1117 807 q 1111 796 1117 799 q 1038 724 1061 764 q 903 518 976 611 q 1117 340 1036 392 q 1315 276 1199 288 l 1315 256 m 1006 789 q 781 746 800 756 l 749 774 q 696 668 714 701 l 756 669 q 774 642 756 663 q 867 553 793 622 q 1006 789 935 651 m 990 193 l 700 163 l 707 -81 l 957 -57 l 990 193 m 601 683 q 610 672 610 676 q 596 667 610 668 l 419 646 l 419 557 l 588 465 q 585 405 590 435 q 574 375 581 375 q 558 385 568 375 l 419 528 l 419 11 q 413 -195 419 -161 q 399 -229 406 -229 q 390 -221 396 -229 l 331 -125 q 368 83 368 -62 l 368 483 q 83 92 260 269 l 68 106 q 368 622 250 328 l 368 639 q 185 607 229 622 l 126 651 l 368 682 l 368 879 q 339 1056 368 992 l 353 1069 l 443 992 q 447 984 447 988 q 446 976 447 981 q 419 835 419 921 l 419 689 q 556 722 510 703 l 601 683 z "},"各":{"ha":1389,"x_min":82,"x_max":1310,"o":"m 1310 238 l 1056 207 l 714 503 q 463 304 585 385 l 507 219 l 876 260 l 907 297 l 969 239 q 976 230 976 233 q 969 224 976 226 q 935 176 939 207 l 904 -35 l 958 -81 q 967 -90 967 -87 q 956 -93 967 -92 l 531 -129 q 533 -199 533 -178 q 522 -250 533 -250 q 513 -240 518 -250 l 451 -139 q 468 -19 472 -83 l 457 143 q 438 288 451 224 q 94 115 282 188 l 82 139 q 672 538 478 338 q 506 668 540 653 l 506 683 l 575 692 q 700 567 597 650 q 851 782 786 658 q 553 729 599 744 l 524 751 q 226 447 406 586 l 208 467 q 494 803 388 639 q 601 1050 601 968 q 599 1071 601 1061 l 619 1076 l 682 982 q 688 970 688 974 q 675 960 688 967 q 633 908 663 954 q 544 779 603 861 l 861 829 l 903 890 l 981 821 q 988 812 988 815 q 979 806 988 808 q 908 742 936 788 q 744 533 833 621 q 1038 328 936 379 q 1310 260 1140 276 l 1310 238 m 879 214 l 510 174 l 528 -79 l 853 -54 l 879 214 z "},"根":{"ha":1389,"x_min":74,"x_max":1311,"o":"m 599 646 q 607 635 607 639 q 592 629 607 631 l 422 611 l 422 544 l 585 456 q 583 394 588 424 q 573 364 578 364 q 560 372 568 364 l 422 517 l 422 -32 q 408 -218 422 -218 q 399 -208 404 -218 l 340 -117 q 365 -67 357 -96 q 372 40 372 -37 l 372 471 q 242 251 321 361 q 90 79 163 142 l 74 93 q 371 606 279 339 q 200 569 256 593 l 144 619 l 372 646 l 372 806 q 350 1038 372 971 l 364 1044 l 443 960 q 449 951 449 954 q 446 943 449 947 q 422 801 422 904 l 422 651 q 554 683 528 665 l 599 646 m 1311 -104 l 1076 -126 l 771 403 l 697 392 l 697 -74 l 861 63 l 876 46 q 675 -196 711 -139 q 668 -201 671 -201 q 661 -199 665 -201 l 594 -156 q 635 -114 622 -136 q 647 -25 647 -92 l 647 785 q 628 978 647 915 l 646 985 l 700 871 l 1010 914 l 1042 971 l 1107 925 q 1115 916 1115 919 q 1111 908 1115 913 q 1081 844 1085 881 l 1038 500 l 1069 463 q 1076 450 1076 454 q 1065 444 1076 446 l 807 408 l 919 225 q 1062 363 1018 313 q 1124 471 1106 414 l 1142 472 l 1171 376 q 1172 368 1172 372 q 1163 363 1172 364 q 936 199 1128 358 q 1098 -12 1031 44 q 1311 -86 1165 -68 l 1311 -104 m 1021 867 l 697 821 l 697 656 q 911 708 875 682 l 953 671 q 963 658 963 663 q 947 651 963 654 l 697 613 l 697 435 l 989 483 l 1021 867 z "},"谷":{"ha":1389,"x_min":94,"x_max":1297,"o":"m 625 946 q 628 937 628 940 q 621 929 628 933 q 569 882 603 918 q 267 596 404 697 l 253 614 q 490 877 410 768 q 567 1035 571 986 l 582 1040 l 625 946 m 1076 822 q 1072 740 1079 781 q 1058 700 1064 700 q 1043 717 1053 700 q 813 1011 961 851 l 829 1029 l 1076 822 m 1297 303 l 1296 278 l 1068 257 l 688 674 q 104 161 418 328 l 94 181 q 527 563 367 364 q 688 842 688 761 l 703 846 l 746 744 q 749 734 749 739 q 736 722 749 729 q 711 701 724 714 q 965 447 886 518 q 1107 347 1044 375 q 1297 303 1169 318 m 915 389 l 976 333 q 986 322 986 325 q 976 311 986 318 q 956 285 965 304 q 943 247 946 267 l 907 3 l 953 -43 q 963 -58 963 -53 q 946 -64 963 -62 l 529 -89 q 514 -207 532 -207 q 501 -192 510 -207 l 449 -92 q 469 -43 463 -75 q 476 14 476 -11 l 472 243 q 457 388 469 318 l 475 396 l 517 306 l 875 344 l 915 389 m 888 293 l 524 258 l 529 -42 l 853 -15 l 888 293 z "},"光":{"ha":1389,"x_min":128,"x_max":1267,"o":"m 1206 156 q 1264 -119 1222 14 q 1267 -131 1267 -126 q 1257 -140 1267 -136 q 1173 -153 1247 -144 q 989 -162 1099 -162 q 810 -129 879 -162 q 742 13 742 -96 l 742 379 q 731 482 742 431 l 582 471 l 622 415 q 626 406 626 410 q 621 396 626 401 q 588 326 601 376 q 418 -10 526 117 q 138 -210 310 -136 l 128 -192 q 558 468 508 14 q 240 429 310 450 l 172 482 l 675 522 l 675 854 q 666 986 675 946 q 635 1063 657 1026 l 647 1075 l 747 1001 q 754 993 754 997 q 750 985 754 989 q 726 860 726 956 l 726 526 q 1171 589 1092 556 l 1226 535 q 1233 524 1233 528 q 1222 519 1233 521 l 757 485 l 810 439 q 815 429 815 433 q 813 419 815 425 q 792 322 792 388 l 792 15 q 835 -76 792 -51 q 990 -101 879 -101 q 1181 -78 1124 -101 l 1185 156 l 1206 156 m 1057 856 q 1060 847 1060 851 q 1053 839 1060 843 q 987 776 1029 828 q 842 582 944 724 l 825 594 q 942 806 900 718 q 985 950 985 893 l 1000 956 l 1057 856 m 551 710 q 533 636 544 663 q 517 610 522 610 q 508 617 513 610 l 353 890 l 365 900 l 551 710 z "},"广":{"ha":1389,"x_min":125,"x_max":1253,"o":"m 839 899 q 808 836 826 868 q 785 804 789 804 q 778 813 781 804 l 696 1042 l 710 1050 l 839 899 m 1243 788 q 1253 778 1253 782 q 1242 772 1253 774 l 431 686 q 422 405 425 464 q 401 257 419 346 q 350 86 383 168 q 264 -72 317 4 q 139 -212 211 -147 l 125 -197 q 295 75 247 -44 q 357 347 343 194 q 371 619 371 499 q 350 876 371 739 l 368 883 l 435 735 q 1161 839 1114 800 l 1243 788 z "},"哈":{"ha":1389,"x_min":147,"x_max":1290,"o":"m 1290 344 l 1089 331 l 768 860 q 613 541 701 690 q 325 197 525 392 l 308 215 q 625 660 510 413 q 740 1028 740 907 q 738 1060 740 1044 l 750 1065 l 815 985 q 822 972 822 976 q 814 961 822 967 q 786 904 806 956 l 968 621 q 1080 459 1044 503 q 1156 398 1115 415 q 1290 363 1196 381 l 1290 344 m 438 815 l 497 772 q 506 761 506 765 q 495 747 506 757 q 478 720 485 736 q 465 664 472 704 l 435 486 l 461 461 q 468 450 468 454 q 457 444 468 446 l 219 408 q 208 268 222 268 q 200 274 204 268 l 150 353 q 174 472 176 393 l 167 683 q 147 833 164 765 l 164 838 l 208 732 l 404 761 l 438 815 m 418 719 l 213 689 l 218 451 l 390 479 l 418 719 m 950 472 q 958 461 958 464 q 946 456 958 458 q 611 397 679 419 l 556 446 q 906 511 860 476 l 950 472 m 957 336 l 1017 288 q 1026 276 1026 281 q 1013 263 1026 271 q 991 239 999 256 q 976 179 983 222 l 947 -4 l 989 -44 q 994 -53 994 -50 q 986 -58 994 -57 l 629 -103 q 631 -160 631 -137 q 618 -222 631 -222 q 608 -215 614 -222 l 557 -137 q 578 -31 581 -103 l 569 165 q 546 319 567 233 l 567 326 l 611 231 l 918 283 l 957 336 m 926 239 l 615 188 l 628 -58 l 899 -22 l 926 239 z "},"海":{"ha":1389,"x_min":113,"x_max":1271,"o":"m 1182 826 q 1189 817 1189 821 q 1181 813 1189 814 l 621 758 q 478 589 557 669 l 463 600 q 706 1061 722 942 l 719 1067 l 775 993 q 781 981 781 986 q 772 971 781 975 q 710 894 754 964 q 654 806 667 824 q 1115 874 1039 843 l 1182 826 m 414 847 q 404 774 413 807 q 391 742 396 742 q 382 747 386 742 l 246 969 l 261 982 l 414 847 m 1265 386 q 1271 376 1271 381 q 1261 371 1271 371 l 1031 356 q 1013 107 1025 226 q 1154 138 1131 115 l 1210 92 q 1219 79 1219 85 q 1208 74 1219 74 l 1007 64 q 960 -167 989 -101 q 922 -233 932 -233 q 911 -225 918 -233 q 758 -36 831 -111 l 771 -25 l 911 -125 q 958 61 940 -76 l 701 50 q 591 40 618 46 q 553 26 564 35 q 537 18 542 18 q 526 22 532 18 l 482 64 q 528 101 518 81 q 551 201 538 121 l 572 326 q 450 307 490 321 l 393 357 l 579 371 l 601 510 q 614 630 614 585 q 608 693 614 675 l 624 700 l 653 631 l 979 660 l 1022 717 l 1071 667 q 1076 656 1076 661 q 1068 643 1076 650 q 1042 551 1044 621 l 1033 403 q 1201 439 1160 413 l 1265 386 m 990 615 l 657 590 l 624 374 l 983 399 l 990 615 m 867 478 q 848 433 861 457 q 828 408 835 408 q 817 422 822 408 l 754 568 l 767 578 l 867 478 m 981 353 l 617 329 l 579 88 l 964 104 q 981 353 974 194 m 844 214 q 830 158 839 179 q 815 138 821 138 q 806 146 810 138 l 729 286 l 740 296 l 844 214 m 290 540 q 273 471 283 496 q 257 446 263 446 q 247 454 251 446 l 119 669 l 133 681 l 290 540 m 440 636 l 265 -64 q 258 -72 263 -72 q 249 -64 254 -72 q 113 129 197 24 l 122 140 l 233 53 l 421 643 l 440 636 z "},"翰":{"ha":1389,"x_min":115,"x_max":1324,"o":"m 1324 568 l 1167 550 l 890 882 q 653 529 779 658 l 778 547 l 814 589 l 854 544 q 858 536 858 539 q 856 531 858 533 q 838 439 838 513 l 838 18 q 826 -153 838 -107 q 804 -199 814 -199 q 796 -193 801 -199 q 656 -53 738 -126 l 667 -36 l 778 -96 q 789 71 789 -60 l 789 229 q 617 60 653 106 l 539 85 l 789 264 l 789 513 q 665 489 713 501 l 638 514 q 596 475 629 504 l 579 490 q 790 796 717 650 q 864 1022 864 942 q 861 1049 864 1038 l 876 1056 l 944 974 q 949 967 949 969 q 943 961 949 964 q 907 914 928 953 l 1018 790 q 1182 638 1121 676 q 1324 589 1243 600 l 1324 568 m 682 793 q 693 781 693 785 q 676 776 693 778 l 436 749 l 426 614 l 518 632 l 551 678 l 606 631 q 611 622 611 625 q 604 613 611 618 q 578 549 585 599 l 553 369 l 581 342 q 589 330 589 333 q 579 325 589 326 l 444 303 l 444 172 q 565 208 531 189 l 600 176 q 608 165 608 169 q 596 160 608 161 l 444 135 l 444 -62 q 431 -221 444 -221 q 424 -215 428 -221 l 367 -126 q 397 42 397 -87 l 397 126 q 179 81 243 101 l 115 121 l 397 164 l 397 294 l 299 279 q 300 244 300 258 q 297 216 300 231 q 290 201 294 201 q 282 210 286 201 l 235 288 q 251 372 256 313 l 240 526 q 224 657 233 621 l 243 664 l 283 588 l 382 606 l 389 743 q 192 713 221 724 l 121 758 l 392 786 q 396 926 396 872 q 379 1035 396 979 l 394 1047 l 476 972 q 485 960 485 965 q 476 946 485 954 q 440 792 451 917 q 631 835 581 810 l 682 793 m 531 597 l 283 547 l 289 450 q 450 493 417 471 l 482 464 q 490 453 490 457 q 475 447 490 450 l 292 418 l 297 318 l 504 356 l 531 597 m 1082 614 l 1135 567 q 1140 558 1140 561 q 1136 551 1140 554 q 1111 474 1111 532 l 1111 17 q 1099 -173 1111 -136 q 1078 -210 1086 -210 q 1071 -204 1076 -210 q 901 -32 985 -107 l 919 -15 l 1053 -103 q 1064 69 1064 -35 l 1064 247 q 913 103 929 135 l 846 132 l 1064 278 l 1064 538 q 904 504 956 522 l 867 540 l 1049 571 l 1082 614 m 1011 356 q 989 279 1003 279 q 982 285 986 279 l 885 401 l 892 413 l 1011 356 m 731 351 q 722 296 729 317 q 710 275 714 275 q 701 282 707 275 l 611 401 l 622 411 l 731 351 z "},"汉":{"ha":1389,"x_min":126,"x_max":1329,"o":"m 1329 -115 l 1082 -129 l 863 281 q 394 -196 682 -29 l 379 -175 q 835 333 671 31 l 717 550 q 621 696 650 675 l 624 710 l 715 693 q 771 542 714 647 l 857 381 q 1025 851 958 578 q 610 789 685 813 l 538 844 l 1015 901 l 1067 969 l 1138 903 q 1144 893 1144 897 q 1138 885 1144 889 q 1075 775 1106 860 q 889 325 971 465 q 1095 3 1017 83 q 1329 -89 1174 -78 l 1329 -115 m 458 839 q 449 762 458 799 q 434 725 439 725 q 425 731 429 725 l 271 946 l 286 961 l 458 839 m 360 546 q 364 489 364 515 q 353 432 364 432 q 347 433 350 432 l 126 635 l 136 653 l 360 546 m 553 619 l 315 -112 q 307 -125 311 -125 q 297 -117 303 -125 q 140 38 246 -58 l 149 54 l 283 -4 l 526 631 l 553 619 z "},"杭":{"ha":1389,"x_min":81,"x_max":1290,"o":"m 621 667 q 626 660 626 663 q 619 656 626 657 l 458 636 l 458 558 l 618 453 q 621 406 621 428 q 617 365 621 385 q 608 346 613 346 q 597 353 603 346 l 458 533 l 458 1 q 449 -175 458 -121 q 431 -229 439 -229 q 424 -221 428 -229 l 376 -118 q 401 -49 394 -90 q 407 82 407 -7 l 407 521 q 96 133 274 294 l 81 144 q 394 626 290 381 q 225 592 299 614 l 163 642 l 407 675 l 407 750 q 401 947 407 892 q 374 1049 394 1003 l 386 1061 l 479 978 q 486 966 486 971 q 485 958 486 961 q 463 882 468 919 q 458 747 458 844 l 458 682 q 567 708 539 692 l 621 667 m 953 906 q 931 826 946 861 q 910 790 915 790 q 899 803 904 790 l 789 1038 l 808 1053 l 953 906 m 1242 742 q 1249 732 1249 735 q 1238 728 1249 729 q 693 651 721 674 l 629 704 q 1006 749 888 732 q 1179 794 1124 765 l 1242 742 m 1226 164 q 1288 -110 1256 -3 q 1290 -124 1290 -118 q 1284 -132 1290 -129 q 1241 -140 1278 -135 q 1157 -144 1204 -144 q 974 -108 1008 -144 q 940 -7 939 -72 l 951 485 l 789 465 q 726 62 786 203 q 490 -193 667 -79 l 481 -182 q 646 1 588 -99 q 721 249 704 100 q 738 473 738 399 q 729 594 738 547 l 750 601 l 786 507 l 947 532 l 982 588 l 1040 536 q 1050 521 1050 526 q 1035 503 1050 517 q 1013 469 1021 490 q 1003 411 1004 449 l 994 18 q 1017 -69 993 -54 q 1103 -83 1042 -83 q 1206 -74 1164 -83 l 1204 164 l 1226 164 z "},"合":{"ha":1389,"x_min":75,"x_max":1331,"o":"m 1331 413 l 1329 394 l 1093 369 l 692 875 q 420 538 561 679 q 89 263 279 396 l 75 275 q 512 714 346 494 q 678 1036 678 933 q 675 1060 678 1049 l 690 1067 l 756 965 q 761 953 761 957 q 754 946 761 949 q 713 903 736 936 l 893 690 q 1113 477 1029 528 q 1331 413 1196 426 m 918 493 q 929 481 929 485 q 914 476 929 478 q 468 419 514 433 l 403 469 q 723 499 619 486 q 865 535 826 513 l 918 493 m 932 328 l 994 272 q 999 265 999 268 q 986 250 999 261 q 967 225 974 239 q 954 174 960 211 l 922 -50 l 968 -96 q 975 -107 975 -103 q 964 -111 975 -111 l 497 -142 q 495 -203 499 -181 q 488 -226 492 -226 q 478 -218 483 -226 l 421 -133 q 439 -24 443 -106 l 429 175 q 401 318 426 235 l 415 326 l 475 240 l 894 278 l 932 328 m 901 235 l 479 196 l 494 -99 l 868 -69 l 901 235 z "},"河":{"ha":1389,"x_min":131,"x_max":1265,"o":"m 433 878 q 418 771 433 771 q 408 778 414 771 l 239 985 l 253 1000 l 433 878 m 1260 915 q 1265 908 1265 911 q 1256 903 1265 904 l 1013 885 l 1054 836 q 1061 822 1061 826 q 1058 811 1061 817 q 1042 703 1042 778 l 1042 51 q 1024 -105 1042 -43 q 994 -167 1006 -167 q 985 -160 990 -167 q 749 51 900 -61 l 760 69 l 974 -51 q 990 107 990 7 l 990 704 q 979 882 990 851 q 518 831 660 858 l 449 881 q 1027 931 913 918 q 1193 967 1142 944 l 1260 915 m 844 713 l 897 660 q 901 652 901 656 q 897 646 901 649 q 861 565 868 624 l 844 425 l 885 381 q 892 370 892 374 q 883 365 892 367 l 650 343 q 651 276 651 297 q 643 215 651 215 q 635 225 640 215 l 583 306 q 601 424 604 338 l 596 576 q 582 749 593 675 l 600 754 l 638 638 l 808 658 l 844 713 m 815 617 l 642 596 l 649 386 l 801 404 l 815 617 m 339 579 q 347 508 347 535 q 338 482 347 482 q 331 485 335 482 l 131 649 l 139 668 l 339 579 m 476 586 l 294 -50 q 288 -58 292 -58 q 276 -50 285 -58 q 143 97 215 25 l 158 117 l 261 40 l 451 596 l 476 586 z "},"赫":{"ha":1389,"x_min":138,"x_max":1246,"o":"m 1239 225 q 1246 174 1246 199 q 1241 131 1246 150 q 1232 111 1236 111 q 1222 118 1228 111 l 1017 347 l 1017 -10 q 1009 -196 1017 -167 q 995 -225 1001 -225 q 982 -217 989 -225 q 815 -49 907 -132 l 825 -35 l 954 -121 q 965 7 965 -96 l 965 543 l 892 535 q 815 81 874 238 q 618 -219 756 -75 l 604 -210 q 784 117 732 -46 q 838 528 836 281 q 721 504 758 515 l 663 538 l 561 524 l 561 399 l 651 354 q 663 291 663 311 q 658 271 663 271 q 649 275 653 271 l 561 363 l 561 40 q 536 -178 561 -178 q 528 -172 532 -178 q 379 -25 461 -99 l 386 -12 l 500 -78 q 510 57 510 -71 l 510 517 l 436 507 q 364 113 419 268 q 175 -199 308 -42 l 154 -186 q 322 128 269 -31 q 379 499 375 286 q 197 465 249 481 l 138 501 l 447 544 l 447 710 q 301 682 349 696 l 236 722 l 447 750 l 447 832 q 413 1047 447 992 l 426 1058 l 519 982 q 525 974 525 978 q 519 965 525 969 q 498 918 503 950 q 493 828 493 886 l 493 758 q 607 788 568 769 l 651 750 q 657 742 657 744 q 649 739 657 740 l 493 717 l 493 551 q 633 588 579 567 l 685 546 l 889 571 l 889 733 q 761 708 822 725 l 701 750 l 889 772 l 889 843 q 881 984 889 942 q 854 1060 872 1026 l 865 1068 l 963 1000 q 969 992 969 996 q 965 983 969 988 q 938 844 938 951 l 938 778 q 1104 822 1064 793 l 1157 774 q 1163 766 1163 768 q 1154 763 1163 764 l 938 739 l 938 576 q 1182 633 1139 604 l 1239 586 q 1246 577 1246 581 q 1235 572 1246 574 l 1017 549 l 1017 376 l 1239 225 m 731 406 l 779 329 q 783 319 783 324 q 779 313 783 315 q 753 275 765 303 q 638 58 688 129 l 619 71 q 721 375 721 282 q 719 400 721 388 l 731 406 m 267 406 l 315 329 q 319 319 319 324 q 315 313 319 315 q 289 275 301 303 q 186 82 228 139 l 168 94 q 235 249 211 183 q 258 347 258 314 q 256 400 258 381 l 267 406 z "},"黑":{"ha":1389,"x_min":125,"x_max":1254,"o":"m 1244 254 q 1254 244 1254 247 q 1243 239 1254 240 q 189 158 231 176 l 125 214 l 654 246 l 654 385 q 360 350 428 369 l 299 401 l 654 426 l 654 575 l 403 553 q 404 526 404 538 q 396 488 404 488 q 386 496 392 488 l 333 568 q 350 660 354 607 l 333 876 q 313 1004 328 954 l 328 1011 l 374 938 l 1004 992 l 1039 1050 l 1107 992 q 1113 983 1113 986 q 1100 973 1113 981 q 1078 947 1088 965 q 1063 883 1069 928 l 1025 661 l 1064 624 q 1071 614 1071 617 q 1061 610 1071 611 l 704 579 l 704 429 q 1028 474 990 450 l 1078 426 q 1086 415 1086 418 q 1076 411 1086 411 l 704 388 l 704 250 q 1181 304 1111 275 l 1244 254 m 1011 943 l 704 919 l 704 624 l 765 628 q 833 867 833 806 q 832 889 833 879 l 846 897 l 901 824 q 910 809 910 814 q 904 801 910 804 q 863 749 892 794 q 803 632 835 704 l 976 646 l 1011 943 m 654 619 l 654 915 l 382 893 l 400 599 l 654 619 m 571 738 q 558 681 569 715 q 540 647 546 647 q 529 658 533 647 l 451 840 l 467 851 l 571 738 m 1153 -60 q 1128 -141 1144 -107 q 1106 -175 1113 -175 q 1097 -167 1100 -175 q 943 144 1029 -3 l 958 157 l 1153 -60 m 603 -60 q 563 -125 588 -99 q 533 -151 539 -151 q 528 -143 528 -151 q 489 122 522 -29 l 508 131 l 603 -60 m 335 126 q 290 -122 339 -43 q 228 -201 242 -201 q 219 -187 222 -201 l 201 -106 q 315 126 294 -31 l 335 126 m 868 -67 q 836 -135 858 -106 q 808 -165 814 -165 q 801 -151 803 -165 q 729 114 793 -64 l 746 124 l 868 -67 z "},"胡":{"ha":1389,"x_min":143,"x_max":1229,"o":"m 779 690 q 786 681 786 685 q 776 676 786 678 l 521 647 l 499 421 l 589 431 l 626 471 l 675 422 q 682 411 682 415 q 676 404 682 407 q 642 347 647 386 l 617 183 l 656 143 q 660 135 660 139 q 651 129 660 131 l 361 94 q 354 -43 365 -43 q 346 -36 350 -43 l 292 51 q 313 179 314 99 l 311 310 q 292 485 311 397 l 310 492 l 350 404 l 456 415 l 472 640 q 218 596 299 619 q 203 593 207 593 q 192 599 199 593 l 143 642 l 475 681 l 485 821 q 488 915 488 874 q 469 1054 488 1010 l 483 1067 l 561 1001 q 569 990 569 994 q 565 979 569 986 q 536 819 549 950 l 524 686 q 724 736 654 707 l 779 690 m 594 389 l 354 363 l 360 139 l 572 168 l 594 389 m 1172 967 l 1222 917 q 1229 905 1229 910 q 1216 888 1229 900 q 1197 861 1203 875 q 1192 826 1192 847 l 1192 56 q 1176 -178 1192 -125 q 1150 -232 1161 -232 q 1138 -221 1144 -232 q 947 11 1031 -75 l 961 28 l 1128 -103 q 1140 61 1140 -67 l 1140 869 l 872 838 q 871 603 874 746 q 1049 647 1010 626 l 1088 610 q 1094 601 1094 604 q 1085 596 1094 597 l 868 560 q 850 360 861 442 q 1057 407 1003 382 l 1097 368 q 1106 356 1106 360 q 1082 349 1106 353 l 844 321 q 742 38 817 158 q 490 -226 667 -83 l 475 -208 q 765 193 713 0 q 818 696 818 386 q 815 890 818 831 q 797 1003 811 949 l 818 1008 l 868 883 l 1138 917 l 1172 967 z "},"华":{"ha":1389,"x_min":119,"x_max":1265,"o":"m 1183 657 q 1201 540 1190 597 l 1224 433 q 1225 423 1225 428 q 1222 415 1225 418 q 1158 403 1219 411 q 993 396 1096 396 q 833 411 890 396 q 759 469 776 426 q 740 619 742 513 q 579 561 667 586 l 571 586 q 740 660 642 610 l 740 869 q 715 1067 740 1000 l 732 1081 l 813 1010 q 821 999 821 1003 q 815 985 821 994 q 789 843 789 942 l 789 686 q 977 823 904 754 q 1058 938 1050 892 l 1079 940 l 1097 832 q 1086 811 1100 815 q 1010 772 1050 801 q 789 643 885 689 q 800 506 789 542 q 851 460 811 471 q 991 450 890 450 q 1150 465 1092 450 l 1164 657 l 1183 657 m 582 975 q 585 965 585 969 q 576 953 585 960 q 476 839 536 918 l 476 439 q 471 328 476 353 q 462 303 465 303 q 454 310 458 303 l 404 389 q 431 494 431 419 l 431 786 q 132 515 301 639 l 119 531 q 519 1069 504 879 l 538 1074 l 582 975 m 1257 218 q 1265 206 1265 211 q 1253 200 1265 200 l 714 174 l 714 -82 q 709 -201 714 -149 q 696 -254 704 -254 q 686 -244 692 -254 l 629 -140 q 664 -12 664 -110 l 664 171 q 194 129 249 150 l 124 186 l 664 214 q 660 386 664 346 q 646 453 657 426 l 660 464 l 731 396 q 738 385 738 389 q 733 375 738 381 q 714 217 714 343 q 1193 274 1119 238 l 1257 218 z "},"淮":{"ha":1389,"x_min":139,"x_max":1238,"o":"m 1167 64 l 1231 13 q 1238 3 1238 7 q 1231 -1 1238 -1 q 1066 -12 1204 -1 q 871 -30 928 -24 q 779 -42 814 -36 q 717 -54 744 -47 l 671 -24 q 667 -183 671 -150 q 662 -222 664 -217 q 655 -226 660 -226 q 647 -219 650 -226 l 593 -107 q 621 65 621 -68 l 621 628 q 469 403 553 497 l 451 424 q 638 762 572 594 q 704 1024 704 929 q 700 1063 704 1047 l 718 1071 l 783 975 q 785 967 785 972 q 781 958 785 963 q 733 869 763 942 q 671 728 704 797 l 671 710 q 1146 786 1089 750 l 1204 742 q 1210 733 1210 738 q 1204 729 1210 729 l 935 697 l 935 519 q 1101 558 1053 535 l 1160 515 q 1165 508 1165 511 q 1158 503 1165 504 l 935 478 l 935 290 q 1104 331 1057 307 l 1167 285 q 1172 278 1172 281 q 1165 274 1172 275 l 935 247 l 935 17 q 1167 64 1108 33 m 885 13 l 885 242 q 722 213 778 231 l 675 260 l 885 285 l 885 472 q 725 446 758 456 l 678 489 l 885 514 l 885 690 l 671 665 l 671 -7 l 885 13 m 989 890 q 967 832 982 863 q 946 801 951 801 q 939 807 940 801 l 858 1042 l 879 1053 l 989 890 m 453 863 q 451 786 456 821 q 439 751 447 751 q 432 756 435 751 l 247 978 l 261 997 l 453 863 m 342 575 q 353 499 353 524 q 348 474 353 474 q 340 476 343 474 l 139 642 l 150 660 l 342 575 m 479 592 l 300 -57 q 294 -61 299 -61 q 278 -47 289 -61 q 149 83 267 -33 l 163 103 l 264 33 l 454 600 l 479 592 z "},"基":{"ha":1389,"x_min":79,"x_max":1313,"o":"m 1313 38 l 1093 10 l 806 349 l 606 335 q 356 97 472 188 q 88 -67 240 7 l 79 -49 q 360 147 239 43 q 524 329 481 250 q 218 293 282 310 l 154 340 l 522 367 l 513 744 q 296 718 313 728 l 242 764 l 511 782 l 510 847 q 482 1026 506 975 l 493 1038 l 572 969 q 578 960 578 964 q 575 951 578 956 q 560 843 558 925 l 561 785 l 889 808 q 892 896 892 858 q 872 1035 892 996 l 885 1044 l 957 985 q 964 974 964 979 q 958 955 964 969 q 947 912 951 940 q 938 813 942 883 q 1128 853 1067 829 l 1178 813 q 1186 803 1186 807 q 1176 797 1186 799 l 935 778 l 910 394 q 1192 439 1140 414 l 1247 393 q 1253 383 1253 388 q 1246 379 1253 379 l 842 351 l 982 204 q 1137 88 1069 113 q 1313 56 1204 63 l 1313 38 m 886 774 l 561 749 l 563 643 q 738 675 719 660 l 772 643 q 779 634 779 638 q 769 629 779 631 l 563 608 l 564 500 q 747 535 729 518 l 785 501 q 790 493 790 496 q 782 489 790 490 l 564 465 l 565 369 l 864 390 l 886 774 m 1125 -128 q 1131 -137 1131 -132 q 1121 -142 1131 -142 q 516 -174 697 -162 q 293 -204 335 -186 l 224 -149 l 676 -124 l 676 42 q 494 15 536 32 l 436 61 l 676 82 l 676 154 q 661 290 676 251 l 672 304 l 738 257 q 744 247 744 251 q 742 238 744 243 q 725 156 725 204 l 725 86 q 896 114 868 100 l 943 72 q 947 64 947 68 q 940 60 947 60 l 725 44 l 725 -122 q 1072 -83 1021 -106 l 1125 -128 z "},"吉":{"ha":1389,"x_min":139,"x_max":1242,"o":"m 1236 694 q 1242 686 1242 689 q 1233 682 1242 683 l 721 639 l 721 443 q 1004 490 893 458 l 1064 440 q 1069 433 1069 436 q 1060 428 1069 429 q 385 358 485 392 l 317 410 l 669 439 l 669 635 q 210 576 326 604 l 139 631 l 669 678 l 669 847 q 639 1058 669 992 l 651 1068 l 744 988 q 751 978 751 982 q 749 971 751 975 q 721 818 721 933 l 721 682 q 1178 744 1099 717 l 1236 694 m 951 307 l 1013 257 q 1021 246 1021 250 q 1014 239 1021 242 q 972 160 985 226 l 935 -35 l 979 -79 q 985 -88 985 -85 q 978 -92 985 -92 l 486 -128 q 472 -236 489 -236 q 467 -232 469 -236 l 415 -136 q 435 -43 436 -93 l 432 146 q 413 297 432 200 l 432 301 l 472 213 l 914 256 l 951 307 m 917 217 l 478 174 l 486 -86 l 886 -50 l 917 217 z "},"及":{"ha":1389,"x_min":74,"x_max":1308,"o":"m 1308 -94 l 1307 -118 l 1061 -142 l 807 171 q 290 -197 622 -47 l 279 -179 q 771 213 599 -4 l 531 508 q 85 -167 389 38 l 74 -154 q 407 326 289 31 q 536 878 525 621 q 325 846 354 858 l 263 903 l 886 961 l 940 1021 l 997 958 q 1004 947 1004 950 q 997 940 1004 943 q 958 913 972 931 q 928 857 943 896 l 824 597 l 982 613 l 1025 669 l 1088 610 q 1094 600 1094 604 q 1088 593 1094 596 q 1025 519 1053 578 q 836 207 938 333 q 1021 15 946 79 q 1160 -72 1096 -49 q 1308 -94 1224 -94 m 978 567 l 861 553 q 820 542 833 550 q 798 522 807 535 q 784 510 789 510 q 772 518 779 510 l 725 572 q 793 665 767 594 l 888 914 l 578 882 l 619 825 q 624 814 624 818 q 618 804 624 810 q 580 691 603 789 q 543 547 557 593 l 578 547 q 663 417 604 488 l 800 250 q 978 567 903 388 z "},"加":{"ha":1389,"x_min":88,"x_max":1292,"o":"m 779 678 q 785 668 785 672 q 774 657 785 664 q 751 628 763 650 q 738 585 739 607 q 691 222 715 372 q 644 -17 667 71 q 606 -138 621 -106 q 584 -177 590 -171 q 574 -183 578 -183 q 567 -175 571 -183 q 418 61 517 -78 l 433 74 l 568 -54 q 631 202 596 -4 q 678 631 665 408 l 499 608 q 106 -224 406 47 l 88 -207 q 309 129 225 -57 q 440 600 393 315 q 201 561 286 581 l 132 613 l 450 653 q 468 882 468 775 q 449 1049 468 989 l 463 1058 l 553 975 q 558 965 558 969 q 554 956 558 961 q 526 842 532 921 q 507 658 521 763 l 674 679 l 714 733 l 779 678 m 1286 644 q 1292 637 1292 640 q 1285 629 1292 633 q 1240 528 1247 600 l 1204 178 l 1253 131 q 1261 119 1261 124 q 1253 114 1261 115 l 922 86 q 915 -44 922 -18 q 904 -70 908 -71 q 894 -60 900 -69 l 844 47 q 869 179 869 88 l 869 500 q 847 728 869 606 l 871 733 l 915 615 l 1185 649 l 1215 697 l 1286 644 m 1186 600 l 922 569 l 922 132 l 1154 164 l 1186 600 z "},"金":{"ha":1389,"x_min":82,"x_max":1306,"o":"m 1306 383 l 1093 357 l 688 853 q 414 506 538 635 q 844 579 772 536 l 904 533 q 910 526 910 529 q 901 521 910 522 l 711 496 l 711 304 q 947 346 899 322 l 1004 303 q 1013 294 1013 297 q 1004 289 1013 290 l 711 263 l 711 -101 l 776 -97 q 879 96 847 25 q 913 224 911 167 l 931 228 l 978 133 q 981 126 981 129 q 974 117 981 124 q 814 -96 943 90 q 1117 -47 1006 -82 l 1186 -106 q 1192 -114 1192 -110 q 1185 -118 1192 -118 q 529 -156 710 -143 q 256 -187 349 -168 l 188 -132 l 660 -104 l 660 257 q 414 218 514 244 l 343 271 l 660 300 l 660 489 q 465 456 524 471 l 406 496 q 94 244 269 356 l 82 264 q 310 461 210 363 q 507 694 410 560 q 634 896 604 828 q 660 1024 664 964 l 675 1032 l 740 935 q 744 924 744 928 q 734 913 744 919 q 706 879 724 906 l 896 667 q 1099 472 1022 526 q 1306 403 1176 417 l 1306 383 m 556 21 q 538 -33 554 7 q 517 -74 522 -74 q 510 -67 513 -74 l 417 171 l 433 182 l 556 21 z "},"津":{"ha":1389,"x_min":126,"x_max":1267,"o":"m 1261 667 q 1267 658 1267 661 q 1260 654 1267 654 l 1053 635 l 1042 540 l 1083 499 q 1089 490 1089 493 q 1081 486 1089 488 l 800 456 l 800 338 q 1050 378 1024 361 l 1090 339 q 1096 331 1096 333 q 1088 328 1096 329 l 800 299 l 800 176 q 1174 228 1136 208 l 1222 182 q 1229 174 1229 176 q 1219 169 1229 171 l 800 135 l 800 -3 q 794 -210 800 -176 q 783 -244 789 -244 q 774 -233 781 -244 l 715 -139 q 751 38 751 -92 l 751 131 q 464 97 511 114 l 400 140 l 751 172 l 751 293 q 557 267 588 276 l 508 304 l 751 332 l 751 450 q 585 424 626 439 l 532 464 l 751 488 l 751 606 q 492 569 542 585 l 436 614 l 751 647 l 751 765 q 556 738 590 749 l 501 781 l 751 806 q 719 1063 751 1001 l 731 1074 l 821 994 q 826 986 826 992 q 824 975 826 981 q 800 811 801 924 l 1011 832 l 1050 882 l 1103 833 q 1110 823 1110 826 q 1100 814 1110 819 q 1080 788 1090 808 q 1067 746 1069 767 l 1058 679 q 1211 714 1175 694 l 1261 667 m 1019 793 l 800 771 l 800 653 l 1008 674 l 1019 793 m 1003 629 l 800 610 l 800 493 l 994 521 l 1003 629 m 426 844 q 418 774 426 801 q 406 747 410 747 q 397 754 403 747 l 253 929 l 263 944 l 426 844 m 314 550 q 315 520 315 538 q 310 478 315 503 q 301 453 304 453 q 292 458 297 453 l 135 624 l 143 640 l 314 550 m 456 528 l 264 -76 q 258 -85 261 -85 q 253 -79 256 -85 q 126 76 175 28 l 140 92 l 232 26 l 433 538 l 456 528 z "},"京":{"ha":1389,"x_min":113,"x_max":1257,"o":"m 775 899 q 749 837 767 868 q 724 806 731 806 q 715 817 719 806 l 607 1065 l 624 1075 l 775 899 m 1253 813 q 1257 806 1257 808 q 1249 801 1257 803 q 197 692 296 717 l 126 744 q 1190 864 1051 818 l 1253 813 m 1011 644 q 1017 636 1017 639 q 1010 629 1017 633 q 971 560 981 613 l 942 408 l 981 371 q 988 360 988 364 q 976 354 988 356 l 703 326 l 742 288 q 746 278 746 283 q 743 268 746 274 q 731 200 731 246 l 731 -78 q 719 -201 731 -153 q 699 -249 708 -249 q 686 -240 694 -249 q 478 -46 624 -172 l 490 -29 l 665 -132 q 681 -28 681 -97 l 681 197 q 671 324 681 285 l 499 306 q 497 258 500 278 q 488 239 493 239 q 481 243 483 239 l 432 317 q 449 413 450 358 l 444 525 q 426 657 442 606 l 446 667 l 485 588 l 908 640 l 950 694 l 1011 644 m 921 596 l 490 543 l 499 342 l 892 390 l 921 596 m 528 124 q 531 113 531 118 q 518 101 531 107 q 442 51 479 86 q 122 -168 308 -67 l 113 -149 q 371 51 269 -47 q 478 199 472 149 l 492 203 l 528 124 m 1157 40 q 1164 -44 1164 -10 q 1154 -78 1164 -78 q 1144 -71 1150 -78 q 1013 48 1081 -4 q 836 175 946 100 l 846 190 l 1157 40 z "},"旧":{"ha":1389,"x_min":229,"x_max":1149,"o":"m 1143 900 q 1149 892 1149 896 q 1133 876 1149 888 q 1107 840 1117 865 q 1094 765 1097 814 l 1053 85 q 1038 -35 1049 25 q 1015 -96 1026 -96 q 1007 -87 1011 -96 l 963 13 l 607 -14 q 590 -110 607 -110 q 583 -103 588 -110 l 522 -6 q 551 196 554 46 l 539 742 q 510 953 536 863 l 529 960 l 585 849 l 1029 893 l 1075 956 l 1143 900 m 1043 847 l 592 801 l 599 460 q 907 511 843 481 l 958 464 q 963 456 963 460 q 953 451 963 453 l 599 417 l 607 31 q 819 49 747 42 q 922 72 892 57 l 969 38 q 1006 203 997 67 l 1043 847 m 343 71 q 341 -28 346 4 q 331 -61 336 -61 q 318 -50 325 -61 l 260 44 q 283 282 289 81 l 272 668 q 229 890 268 813 l 244 903 l 319 835 q 333 817 333 822 q 331 804 333 813 q 322 749 322 781 q 324 676 322 717 l 343 71 z "},"喀":{"ha":1389,"x_min":135,"x_max":1329,"o":"m 1329 154 l 1140 126 l 1042 200 q 1011 118 1017 182 l 994 -74 l 1026 -114 q 1032 -124 1032 -119 q 1022 -129 1032 -129 l 689 -153 q 675 -247 692 -247 q 667 -239 672 -247 l 613 -150 q 635 -60 638 -111 l 628 110 q 613 218 625 179 q 304 68 476 133 l 293 89 q 776 401 574 211 q 661 478 699 461 l 663 489 l 744 499 q 804 426 747 475 q 950 603 889 511 q 750 558 778 578 l 703 586 q 426 297 574 400 l 413 313 q 624 554 532 419 q 731 778 715 689 l 558 758 q 532 617 553 689 q 497 546 511 546 q 488 557 492 546 l 457 636 q 508 729 492 674 q 532 894 524 785 l 558 896 q 561 803 563 851 l 847 836 l 719 1064 l 731 1079 l 889 951 q 861 838 883 874 l 1107 865 l 1151 922 l 1214 868 q 1221 856 1221 861 q 1215 847 1221 851 q 1083 679 1169 817 l 1058 692 l 1110 822 l 765 782 l 801 719 q 804 710 804 715 q 797 702 804 706 q 778 688 789 699 q 751 656 768 678 l 718 607 l 964 651 l 1006 697 l 1057 642 q 1067 628 1067 633 q 1058 621 1067 624 q 982 553 1025 608 q 846 397 922 468 l 997 293 q 1168 201 1090 228 q 1329 174 1246 174 l 1329 154 m 981 246 l 817 372 q 638 235 731 294 l 667 181 l 956 215 l 981 246 m 958 172 l 676 140 l 688 -110 l 944 -85 l 958 172 m 363 783 l 422 735 q 426 728 426 732 q 417 717 426 725 q 403 694 408 710 q 394 638 399 679 l 379 469 l 408 439 q 417 426 417 431 q 406 421 417 422 l 214 393 q 217 313 217 332 q 207 271 217 271 q 200 278 204 271 l 147 358 q 165 468 168 396 l 160 638 q 135 810 158 703 l 154 814 l 197 713 l 336 735 l 363 783 m 346 696 l 204 674 l 214 432 l 335 456 l 346 696 z "},"卡":{"ha":1389,"x_min":108,"x_max":1272,"o":"m 1265 515 q 1272 506 1272 510 q 1261 500 1272 501 l 686 449 l 719 414 q 725 403 725 408 q 722 393 725 399 q 707 258 707 367 l 707 -32 q 688 -251 707 -251 q 679 -242 685 -251 l 617 -140 q 646 -55 635 -114 q 657 67 657 4 l 657 294 q 647 446 657 411 q 181 388 328 417 l 108 443 l 658 493 l 658 769 q 619 1072 658 986 l 636 1083 l 726 999 q 733 986 733 992 q 725 971 733 981 q 712 920 717 961 q 707 761 707 879 q 1019 835 947 800 l 1076 789 q 1083 779 1083 783 q 1072 774 1083 775 l 707 715 l 707 497 q 1200 568 1093 532 l 1265 515 m 1078 176 q 1093 81 1093 122 q 1085 39 1093 39 q 1075 46 1082 39 l 776 311 l 788 326 l 1078 176 z "},"开":{"ha":1389,"x_min":115,"x_max":1256,"o":"m 1247 503 q 1256 492 1256 496 q 1243 486 1256 488 l 888 461 l 888 19 q 884 -199 888 -164 q 874 -233 881 -233 q 864 -225 868 -233 l 800 -111 q 835 63 835 -64 l 835 458 l 581 442 q 463 49 547 174 q 168 -194 379 -75 l 157 -176 q 423 79 343 -49 q 529 438 503 207 q 186 400 243 419 l 115 457 l 535 485 q 549 711 549 622 q 538 842 549 800 q 346 814 399 831 l 279 871 q 783 905 581 888 q 1067 951 985 922 l 1131 900 q 1139 888 1139 892 q 1126 883 1139 885 l 850 864 l 906 797 q 911 785 911 792 q 908 772 911 779 q 888 619 888 728 l 888 508 q 1186 553 1125 526 l 1247 503 m 835 506 l 835 628 q 819 861 835 799 l 564 843 l 618 785 q 626 771 626 776 q 622 758 626 765 q 600 638 606 724 q 588 489 594 553 l 835 506 z "},"凯":{"ha":1389,"x_min":169,"x_max":1290,"o":"m 614 926 l 661 867 q 667 855 667 860 q 660 838 667 850 q 647 790 653 826 l 626 669 q 613 608 617 615 q 605 600 608 600 q 599 607 601 600 l 574 667 l 338 632 q 286 618 304 626 q 256 595 268 610 q 241 581 244 581 q 232 585 238 581 l 188 622 q 213 656 207 643 q 218 689 219 669 l 214 797 q 189 910 214 853 l 201 919 l 261 863 q 268 849 268 856 q 263 829 268 843 q 258 790 257 815 l 264 664 l 404 682 l 404 914 q 385 1058 404 1008 l 397 1065 l 460 1000 q 468 986 468 992 q 460 961 468 981 q 451 894 451 942 l 451 688 l 585 706 q 590 731 589 718 l 606 826 q 597 918 611 865 l 614 926 m 1244 151 q 1288 -115 1261 -32 q 1290 -126 1290 -122 q 1278 -135 1290 -131 q 1228 -144 1267 -140 q 1146 -149 1189 -149 q 997 -102 1029 -149 q 969 74 964 -56 l 997 807 l 815 789 q 721 92 813 292 q 438 -225 629 -107 l 424 -207 q 651 48 581 -89 q 742 392 721 185 q 763 726 763 600 q 744 925 763 851 l 763 931 l 813 833 l 985 850 l 1026 904 l 1088 847 q 1094 838 1094 842 q 1078 820 1094 833 q 1055 785 1061 807 q 1047 729 1049 764 l 1022 96 q 1021 40 1021 64 q 1047 -78 1021 -56 q 1127 -100 1074 -100 q 1217 -86 1181 -100 l 1224 151 l 1244 151 m 614 521 q 621 510 621 515 q 611 499 621 506 q 579 442 585 476 l 563 324 l 590 297 q 603 282 603 286 q 589 276 603 278 l 279 233 l 279 -44 l 578 136 l 589 118 q 349 -60 406 -15 q 251 -143 292 -104 q 242 -149 246 -149 q 232 -143 238 -149 l 183 -99 q 221 -58 211 -81 q 231 21 231 -35 l 231 213 q 214 347 231 279 l 229 353 l 274 276 l 517 315 l 533 479 q 228 431 275 447 l 169 479 l 526 522 l 560 567 l 614 521 z "},"科":{"ha":1389,"x_min":72,"x_max":1329,"o":"m 1321 344 l 1054 299 l 1054 -60 q 1045 -198 1054 -165 q 1028 -231 1036 -231 q 1021 -225 1024 -231 l 967 -111 q 1000 60 1000 -67 l 1000 289 q 660 207 749 244 l 586 254 l 1000 336 l 1000 818 q 969 1039 1000 972 l 981 1050 l 1069 971 q 1075 963 1075 967 q 1072 956 1075 960 q 1054 826 1054 924 l 1054 347 q 1246 408 1194 375 l 1321 358 q 1329 349 1329 351 q 1321 344 1329 346 m 639 622 l 449 597 l 449 519 l 611 439 q 625 376 625 407 q 617 346 625 346 q 608 351 614 346 l 449 494 l 449 8 q 441 -168 449 -121 q 425 -215 433 -215 q 418 -207 422 -215 l 367 -99 q 394 -23 388 -79 q 401 165 401 33 l 401 504 q 90 82 267 253 l 72 99 q 264 358 169 210 q 383 589 358 507 q 172 536 250 572 l 115 583 l 401 629 l 401 846 q 172 772 279 800 l 163 793 q 526 976 508 910 l 592 922 q 600 914 600 917 q 592 908 600 911 q 449 864 522 893 l 449 638 q 579 678 533 650 l 639 633 q 646 626 646 628 q 639 622 646 624 m 897 799 q 901 762 901 781 q 897 724 901 743 q 886 704 892 704 q 875 711 881 704 l 735 869 l 747 886 l 897 799 m 882 511 q 890 460 890 486 q 876 415 890 415 q 867 422 874 415 l 718 574 l 725 589 l 882 511 z "},"克":{"ha":1389,"x_min":110,"x_max":1256,"o":"m 1256 -133 q 1244 -151 1256 -151 q 1016 -172 1142 -172 q 840 -162 890 -172 q 765 -118 790 -151 q 739 -19 739 -85 l 739 253 q 731 328 739 278 l 618 319 l 651 272 q 657 260 657 265 q 651 249 657 256 q 622 194 635 228 q 437 -74 554 22 q 119 -231 319 -169 l 110 -212 q 456 5 332 -132 q 592 317 581 142 l 479 308 q 468 236 479 236 q 458 244 465 236 l 414 304 q 432 411 435 335 l 428 532 q 406 658 426 615 l 419 664 l 478 582 l 657 597 l 676 754 q 247 710 283 722 l 176 761 l 682 794 l 688 843 q 694 956 694 896 q 683 1063 694 1017 l 697 1071 l 775 999 q 779 990 779 994 q 776 982 779 985 q 754 926 767 969 q 736 839 742 882 l 731 797 q 1150 864 1092 824 l 1214 811 q 1221 801 1221 806 q 1213 797 1221 797 l 725 758 l 706 601 l 918 619 l 961 669 l 1011 624 q 1019 610 1019 615 q 1011 599 1019 604 q 975 538 985 581 l 944 397 l 976 365 q 985 352 985 357 q 972 346 985 347 l 754 329 l 800 282 q 807 270 807 275 q 804 261 807 265 q 788 160 788 231 l 788 -15 q 824 -106 788 -83 q 975 -129 861 -129 q 1183 -106 1089 -129 l 1185 165 l 1204 165 q 1256 -133 1221 25 m 926 578 l 475 540 l 479 350 l 893 385 l 926 578 z "},"拉":{"ha":1389,"x_min":94,"x_max":1290,"o":"m 1283 -11 q 1290 -22 1290 -18 q 1278 -26 1290 -25 q 571 -92 719 -60 l 508 -39 l 901 -8 q 1005 466 983 350 q 1024 639 1026 582 q 668 590 744 610 l 613 635 l 454 613 l 454 436 l 608 517 l 621 493 l 454 392 l 454 15 q 441 -166 454 -96 q 418 -236 428 -236 q 408 -229 414 -236 q 228 -7 329 -115 l 238 7 l 390 -99 q 403 47 403 -37 l 403 360 q 172 211 190 229 l 94 250 l 403 410 l 403 606 q 186 561 239 581 l 125 614 l 403 650 l 403 831 q 368 1054 403 971 l 381 1067 l 471 986 q 476 976 476 981 q 474 965 476 971 q 460 912 467 956 q 454 813 454 868 l 454 657 q 578 692 551 674 l 642 643 q 1200 724 1138 681 l 1254 678 q 1263 667 1263 672 q 1251 661 1263 663 l 1054 642 l 1108 554 q 1113 542 1113 547 q 1107 532 1113 536 q 1052 411 1085 514 q 942 -6 1019 308 q 1233 35 1185 15 l 1283 -11 m 974 865 q 949 793 965 822 q 927 764 933 764 q 917 774 921 764 l 807 1039 l 825 1051 l 974 865 m 839 167 q 803 98 822 122 q 777 74 783 74 q 769 89 771 74 q 708 549 754 294 l 732 557 l 839 167 z "},"莱":{"ha":1389,"x_min":121,"x_max":1289,"o":"m 1181 853 q 1186 845 1186 849 q 1178 840 1186 842 l 851 814 l 783 661 l 760 674 l 810 810 l 574 790 l 578 738 q 582 662 582 689 q 577 635 582 635 q 567 640 572 635 l 518 696 q 529 786 535 725 q 260 749 340 769 l 203 800 l 526 826 l 522 882 q 510 949 519 911 q 486 1008 500 988 l 494 1019 l 567 974 q 574 965 574 969 q 572 957 574 961 q 565 890 563 936 l 569 831 l 824 851 q 858 1013 858 960 q 856 1046 858 1029 l 872 1054 l 932 985 q 936 976 936 981 q 932 967 936 971 q 871 856 911 946 q 1115 901 1061 872 l 1181 853 m 1289 -81 l 1071 -96 l 715 281 l 715 -18 q 711 -197 715 -169 q 702 -225 707 -225 q 693 -217 697 -225 l 640 -122 q 660 -61 656 -99 q 665 63 665 -24 l 665 276 l 661 276 q 132 -157 472 28 l 121 -137 q 588 271 461 81 q 225 224 318 249 l 160 281 l 665 315 l 665 547 q 307 504 351 521 l 249 557 l 665 588 q 644 753 665 713 l 660 763 l 724 699 q 731 688 731 693 q 724 675 731 682 q 715 592 717 668 q 1058 643 1007 614 l 1119 603 q 1129 592 1129 597 q 1118 586 1129 588 l 715 551 l 715 318 l 779 322 q 897 563 886 479 l 914 565 l 956 499 q 958 488 958 493 q 950 482 958 483 q 906 442 942 481 q 815 325 871 403 q 1179 383 1099 346 l 1238 336 q 1244 326 1244 331 q 1236 321 1244 321 l 757 283 l 892 150 q 1095 -12 1008 35 q 1289 -60 1182 -58 l 1289 -81 m 558 401 q 547 347 556 372 q 535 322 539 322 q 525 331 531 322 l 419 499 l 432 511 l 558 401 z "},"兰":{"ha":1389,"x_min":138,"x_max":1239,"o":"m 1138 592 q 1147 580 1147 585 q 1135 574 1147 575 q 319 479 472 519 l 249 531 l 764 579 q 881 1014 869 858 l 900 1017 l 961 899 q 963 892 963 896 q 956 882 963 888 q 801 583 904 840 q 1078 639 982 604 l 1138 592 m 599 753 q 586 682 597 722 q 568 642 575 642 q 563 647 565 642 l 406 932 l 418 946 l 599 753 m 1011 275 q 1018 265 1018 269 q 1007 260 1018 261 q 432 193 576 228 l 364 244 q 953 318 868 283 l 1011 275 m 1231 -74 q 1239 -85 1239 -81 q 1228 -92 1239 -90 q 206 -169 319 -149 l 138 -117 q 865 -74 617 -96 q 1174 -24 1114 -53 l 1231 -74 z "},"勒":{"ha":1389,"x_min":119,"x_max":1243,"o":"m 804 829 q 810 822 810 825 q 801 818 810 819 l 611 794 l 599 676 l 640 639 q 646 632 646 633 q 638 629 646 631 l 521 614 l 521 499 l 649 518 l 685 565 l 735 518 q 738 512 738 515 q 732 504 738 508 q 697 431 703 476 l 686 339 l 718 310 q 724 301 724 304 q 714 297 724 299 l 521 271 l 521 146 q 744 193 706 171 l 794 147 q 799 140 799 143 q 793 136 799 136 l 521 106 l 521 -51 q 514 -189 521 -150 q 500 -228 507 -228 q 494 -222 497 -228 l 442 -129 q 467 -62 461 -103 q 472 100 472 -21 q 182 44 304 82 l 119 96 l 472 140 l 472 264 l 350 247 q 342 175 353 175 q 336 179 339 175 l 288 247 q 303 332 306 274 l 299 417 q 279 539 296 476 l 297 547 l 332 471 l 472 492 l 472 607 l 406 599 q 404 555 407 571 q 399 539 401 539 q 393 542 396 539 l 344 600 q 361 664 361 621 q 357 764 361 707 q 185 726 231 743 l 121 774 l 354 801 q 340 932 349 890 q 303 1018 331 974 l 314 1031 l 403 969 q 410 962 410 965 q 408 956 410 958 q 396 894 396 935 q 397 807 396 854 l 569 828 q 575 969 575 906 q 554 1067 575 1032 l 568 1078 l 647 994 q 651 987 651 990 q 647 978 651 983 q 614 833 626 954 q 751 872 703 849 l 804 829 m 567 789 l 399 769 l 404 638 l 558 660 l 567 789 m 654 481 l 521 461 l 521 311 l 642 331 l 654 481 m 472 303 l 472 454 l 343 435 l 349 283 l 472 303 m 1238 607 q 1243 598 1243 601 q 1229 588 1243 594 q 1208 565 1215 581 q 1197 514 1201 550 q 1101 -119 1136 -43 q 1054 -194 1067 -194 q 1046 -186 1051 -194 q 903 25 997 -103 l 918 39 l 1044 -78 q 1147 574 1097 -15 l 974 544 q 851 53 929 218 q 611 -237 772 -111 l 600 -219 q 810 65 739 -99 q 921 535 882 228 q 814 507 875 526 l 757 551 l 926 579 q 950 887 950 765 q 929 1061 950 1008 l 947 1072 l 1031 983 q 1038 974 1038 978 q 1031 965 1038 969 q 1003 828 1013 954 q 979 588 993 701 l 1132 613 l 1178 674 l 1238 607 z "},"雷":{"ha":1389,"x_min":193,"x_max":1207,"o":"m 1201 839 q 1207 829 1207 833 q 1200 821 1207 825 q 1085 676 1154 792 l 1064 686 l 1108 799 l 717 767 l 717 583 q 713 466 717 518 q 707 408 710 414 q 701 401 704 401 q 694 407 699 401 l 642 483 q 668 617 668 524 l 668 763 l 278 731 q 256 606 274 654 q 232 558 239 558 q 225 565 228 558 l 193 639 q 254 875 244 679 l 278 875 q 279 771 279 836 l 668 804 l 668 929 q 419 901 489 914 l 358 947 q 981 1015 922 981 l 1026 975 q 1032 965 1032 969 q 1021 960 1032 961 l 717 933 l 717 808 l 1108 842 l 1153 890 l 1201 839 m 1039 661 q 1043 653 1043 657 q 1035 649 1043 650 q 811 619 860 632 l 763 658 q 999 694 975 676 l 1039 661 m 596 625 q 600 618 600 622 q 590 614 600 614 q 368 589 419 604 l 321 628 q 551 667 536 647 l 596 625 m 1079 535 q 1083 527 1083 531 q 1076 524 1083 524 q 818 496 890 513 l 769 535 q 1035 575 999 553 l 1079 535 m 606 496 q 610 490 610 493 q 599 485 610 486 q 364 458 442 474 l 315 497 q 561 533 528 511 l 606 496 m 1081 399 q 1086 390 1086 394 q 1079 381 1086 386 q 1044 300 1050 360 l 1018 15 q 999 -103 1013 -50 q 976 -156 985 -156 q 971 -150 974 -156 l 929 -65 l 438 -96 q 439 -148 439 -125 q 435 -186 439 -171 q 427 -201 431 -201 q 419 -193 424 -201 l 363 -92 q 383 21 386 -56 l 376 243 q 363 414 375 331 l 382 421 l 418 344 l 985 394 l 1019 444 l 1081 399 m 994 351 l 711 328 l 711 185 q 871 213 844 197 l 913 174 q 918 165 918 168 q 910 161 918 161 l 711 144 l 711 -28 q 901 -10 889 -15 l 942 -43 q 974 96 965 -12 l 994 351 m 664 -31 l 664 140 q 515 118 551 131 l 456 164 l 664 181 l 664 324 l 421 303 l 436 -46 l 664 -31 z "},"黎":{"ha":1389,"x_min":89,"x_max":1300,"o":"m 1151 846 q 1157 835 1157 840 q 1149 826 1157 831 q 1130 799 1142 821 q 1115 761 1118 778 q 1038 470 1071 542 q 988 399 1004 399 q 979 406 983 399 q 876 547 929 488 l 886 558 l 979 486 q 1071 815 1036 563 l 957 794 q 761 497 869 586 l 749 511 q 901 785 854 629 q 814 754 833 771 l 776 786 q 681 651 735 717 l 664 665 q 783 868 742 769 q 824 1026 824 967 q 822 1046 824 1038 l 838 1051 l 889 988 q 893 978 893 982 q 888 971 893 974 q 847 915 869 965 q 786 801 824 865 l 1064 850 l 1100 894 l 1151 846 m 704 799 q 710 789 710 793 q 701 783 710 785 l 503 761 l 503 731 l 650 668 q 638 594 650 594 q 629 600 635 594 l 503 708 l 503 575 q 501 448 503 478 q 496 418 500 418 q 488 424 492 418 l 439 500 q 461 611 461 533 l 461 710 q 156 443 358 560 l 143 461 q 433 753 357 600 q 221 715 256 733 l 167 761 l 461 794 l 461 919 q 281 883 343 892 l 278 901 q 599 1028 574 976 l 617 1032 l 671 981 q 676 970 676 975 q 668 965 676 965 q 503 931 615 961 l 503 800 q 657 842 628 815 l 704 799 m 1300 203 l 1089 168 l 681 494 q 97 94 456 244 l 89 114 q 501 378 335 235 q 668 600 668 522 l 682 606 l 719 547 q 724 537 724 542 q 715 527 724 532 q 700 515 707 522 l 956 332 q 1122 247 1056 261 q 1299 225 1188 232 l 1300 203 m 1003 35 q 1019 -42 1019 -21 q 1017 -64 1019 -64 q 1007 -58 1014 -64 q 715 114 921 14 l 715 -83 q 708 -188 715 -154 q 689 -222 700 -222 q 679 -217 685 -222 q 519 -74 619 -151 l 531 -60 l 657 -132 q 671 -65 671 -125 l 671 96 q 353 -64 397 -15 l 265 -10 l 671 122 l 671 242 q 646 379 671 328 l 658 389 l 721 336 q 728 324 728 329 q 725 317 728 319 q 717 273 718 306 q 715 138 715 240 q 882 283 853 226 l 894 288 l 926 232 q 929 223 929 228 q 919 214 929 218 q 742 126 865 194 l 1003 35 m 571 197 q 561 142 568 164 q 549 119 554 119 q 539 126 544 119 l 435 251 l 444 265 l 571 197 z "},"里":{"ha":1389,"x_min":140,"x_max":1246,"o":"m 1239 -60 q 1246 -69 1246 -65 q 1236 -72 1246 -72 q 487 -105 700 -92 q 221 -135 274 -118 l 140 -79 l 668 -53 l 668 167 q 393 133 460 151 l 328 182 l 668 208 l 668 407 l 439 389 q 433 297 442 297 q 426 303 429 297 l 369 394 q 389 511 390 428 l 383 763 q 357 972 381 885 l 371 979 l 422 882 l 965 931 l 1017 992 l 1082 931 q 1088 920 1088 925 q 1073 909 1088 915 q 1047 879 1058 903 q 1029 811 1035 856 l 992 488 l 1038 447 q 1043 438 1043 442 q 1036 435 1043 435 l 718 411 l 718 213 q 1006 257 961 231 l 1063 210 q 1068 201 1068 204 q 1060 197 1068 197 l 718 171 l 718 -50 q 1031 -31 935 -39 q 1164 -4 1126 -22 l 1239 -60 m 982 889 l 718 865 l 718 690 q 869 724 815 701 l 911 682 q 917 674 917 676 q 908 669 917 671 l 718 646 l 718 454 l 946 479 l 982 889 m 668 450 l 668 640 q 532 614 569 626 l 468 664 l 668 685 l 668 861 l 428 839 l 439 432 l 668 450 z "},"利":{"ha":1389,"x_min":110,"x_max":1217,"o":"m 1118 1053 l 1208 975 q 1217 963 1217 968 q 1211 946 1217 957 q 1201 906 1206 935 q 1197 786 1197 878 l 1197 39 q 1185 -167 1197 -107 q 1163 -226 1174 -226 q 1154 -222 1158 -226 q 914 -1 1071 -132 l 925 13 l 1131 -106 q 1146 78 1146 -82 l 1146 665 q 1137 924 1146 846 q 1103 1042 1128 1001 l 1118 1053 m 828 638 q 832 629 832 633 q 821 624 832 625 l 579 594 l 579 521 l 783 392 q 777 330 782 358 q 771 298 772 301 q 767 294 769 294 q 760 299 764 294 l 579 497 l 579 35 q 574 -175 579 -142 q 561 -208 568 -208 q 554 -200 558 -208 l 494 -93 q 528 104 528 -53 l 528 496 q 122 47 379 242 l 110 63 q 513 588 399 318 q 232 538 288 558 l 171 586 l 528 629 l 528 850 q 233 761 368 794 l 229 779 q 556 909 417 847 q 690 1008 694 971 l 707 1015 l 788 956 q 796 944 796 949 q 786 939 796 940 q 692 908 764 935 q 579 868 621 882 l 579 635 q 779 681 721 656 l 828 638 m 907 826 l 978 768 q 985 758 985 763 q 982 749 985 753 q 971 608 971 729 l 971 338 q 967 184 971 210 q 960 158 964 158 q 951 164 956 158 l 899 238 q 917 290 911 260 q 922 406 922 321 l 922 631 q 896 817 922 754 l 907 826 z "},"连":{"ha":1389,"x_min":75,"x_max":1318,"o":"m 1207 258 q 1211 252 1211 256 q 1206 249 1211 249 l 874 224 l 874 106 q 871 -19 874 8 q 863 -46 868 -46 q 854 -42 858 -46 l 797 26 q 824 219 824 58 q 553 189 575 201 l 486 236 l 824 260 l 824 444 l 697 429 q 644 417 672 426 q 610 403 617 408 q 599 399 603 399 q 590 403 594 399 l 539 457 q 590 489 569 465 q 638 568 610 513 q 717 733 667 624 q 563 703 622 722 l 496 750 l 735 774 q 794 916 771 851 q 818 1006 818 981 q 817 1044 818 1032 l 832 1051 l 897 971 q 901 963 901 967 q 896 956 901 960 q 839 878 865 932 l 790 779 q 1121 840 1068 808 l 1185 790 q 1189 784 1189 788 q 1183 781 1189 781 l 771 739 l 636 465 l 824 485 q 806 664 822 621 l 821 672 l 892 604 q 896 597 896 600 q 893 589 896 593 q 874 490 875 558 q 1065 532 1032 508 l 1118 490 q 1124 483 1124 486 q 1115 478 1124 479 l 874 450 l 874 264 q 1142 311 1067 278 l 1207 258 m 449 786 q 432 713 443 740 q 417 685 421 685 q 410 689 413 685 l 256 906 l 271 918 l 449 786 m 1318 -128 l 1035 -225 q 687 -101 994 -197 q 268 -6 379 -6 q 138 -28 210 -6 l 75 32 q 229 43 169 43 q 340 35 289 43 q 383 180 383 126 q 335 297 383 233 l 397 483 q 157 428 186 444 l 94 476 l 392 526 l 428 579 l 492 521 q 494 515 494 518 q 490 510 494 513 q 445 453 469 494 q 367 294 421 413 q 419 231 404 257 q 435 181 435 206 q 368 31 435 135 q 601 -31 444 15 q 881 -102 758 -78 q 1098 -126 1003 -126 q 1318 -110 1193 -126 l 1318 -128 z "},"林":{"ha":1389,"x_min":54,"x_max":1328,"o":"m 1328 100 l 1128 83 l 911 565 l 911 -3 q 902 -206 911 -171 q 882 -242 893 -242 q 874 -233 878 -242 l 822 -132 q 861 171 861 -62 l 861 517 q 538 57 725 242 l 521 72 q 842 618 724 303 q 682 589 725 603 l 639 625 l 475 604 l 475 531 l 640 436 q 644 392 644 413 q 640 358 644 371 q 633 344 636 344 q 624 350 629 344 l 475 506 l 475 10 q 468 -197 475 -164 q 450 -231 461 -231 q 442 -222 446 -231 l 388 -126 q 425 182 425 -49 l 425 510 q 68 31 274 213 l 54 46 q 253 303 154 147 q 407 596 353 458 q 181 553 242 574 l 119 600 l 425 640 l 425 742 q 419 926 425 871 q 397 1033 413 981 l 413 1044 l 506 967 q 510 959 510 964 q 508 950 510 954 q 475 739 475 893 l 475 649 q 601 682 567 665 l 657 642 l 861 667 l 861 767 q 856 965 861 904 q 835 1056 850 1025 l 851 1071 l 939 990 q 944 982 944 986 q 942 974 944 978 q 917 906 924 947 q 911 764 911 864 l 911 672 q 1133 726 1074 694 l 1190 683 q 1203 669 1203 674 q 1193 664 1203 665 l 917 626 l 1078 311 q 1183 174 1125 219 q 1326 118 1242 129 l 1328 100 z "},"隆":{"ha":1389,"x_min":203,"x_max":1310,"o":"m 1310 400 l 1115 368 l 850 607 q 617 429 756 517 q 929 481 910 464 l 974 444 q 979 436 979 440 q 968 431 979 432 l 788 414 l 849 367 q 856 356 856 361 q 850 340 856 350 q 842 314 844 331 q 838 253 839 297 q 1014 293 981 271 l 1068 257 q 1072 250 1072 254 q 1063 244 1072 246 l 838 218 l 838 83 q 1008 117 968 97 l 1056 79 q 1061 72 1061 75 q 1050 67 1061 68 l 838 46 l 838 -108 q 1158 -61 1101 -90 l 1219 -107 q 1225 -115 1225 -111 q 1214 -119 1225 -118 q 458 -183 526 -160 l 401 -137 l 793 -111 l 793 40 q 592 10 658 26 l 542 51 l 793 78 l 793 213 q 607 182 650 196 l 581 201 q 451 51 519 115 l 439 65 q 589 375 604 275 l 601 382 l 656 319 q 658 313 658 317 q 653 304 658 308 q 594 224 642 296 l 793 247 q 767 413 792 349 q 657 390 707 407 l 613 426 q 503 364 539 382 l 492 382 q 819 633 679 488 q 669 744 715 726 l 672 757 l 728 765 q 842 657 736 743 q 974 844 922 746 q 749 799 826 819 l 711 825 q 529 594 629 697 l 514 610 q 688 869 628 750 q 747 1051 747 988 q 744 1075 747 1065 l 763 1082 l 817 1000 q 822 987 822 993 q 814 976 822 981 q 764 914 790 964 q 722 842 747 883 l 967 881 l 1011 936 l 1075 883 q 1081 875 1081 878 q 1072 867 1081 872 q 1006 794 1044 850 q 874 632 949 707 l 992 536 q 1138 450 1065 476 q 1308 419 1210 424 l 1310 400 m 539 893 q 544 885 544 889 q 538 878 544 882 q 469 793 494 849 l 407 657 q 489 419 489 540 q 469 311 489 363 q 436 260 449 260 q 428 265 432 260 q 310 404 379 333 l 318 418 l 424 351 q 446 450 446 394 q 375 657 446 556 l 444 857 l 276 831 l 276 110 q 273 -162 276 -114 q 258 -210 269 -210 q 249 -201 253 -210 l 203 -117 q 231 106 231 -68 l 231 717 q 208 988 231 900 l 229 994 l 275 871 l 444 897 l 476 947 l 539 893 z "},"卢":{"ha":1389,"x_min":119,"x_max":1233,"o":"m 1228 882 q 1233 873 1233 878 q 1226 868 1233 868 l 715 818 l 715 665 l 986 693 l 1018 744 l 1074 699 q 1079 689 1079 693 q 1068 678 1079 685 q 1051 660 1057 671 q 1039 624 1044 650 l 997 439 l 1040 399 q 1046 390 1046 393 q 1038 386 1046 386 l 422 331 q 132 -244 393 -29 l 119 -226 q 272 -16 215 -124 q 353 212 329 92 q 376 535 376 332 q 364 718 376 635 l 381 725 l 421 635 l 665 660 l 665 894 q 661 992 665 963 q 640 1067 657 1022 l 656 1076 l 733 1001 q 738 992 738 997 q 732 981 738 988 q 715 864 715 958 q 1149 940 1103 906 l 1228 882 m 988 644 l 435 589 q 426 378 435 482 l 949 435 l 988 644 z "},"鲁":{"ha":1389,"x_min":104,"x_max":1269,"o":"m 1029 858 l 1085 801 q 1092 789 1092 794 q 1080 776 1092 783 q 1060 757 1068 769 q 1044 690 1053 744 l 1019 532 l 1054 499 q 1063 486 1063 492 q 1050 479 1063 481 l 435 414 q 430 374 435 390 q 421 358 425 358 q 413 364 417 358 l 367 432 q 386 531 388 479 l 383 643 q 374 746 381 721 q 163 589 269 658 l 150 606 q 575 1082 517 897 l 593 1088 l 621 1007 q 624 994 624 1000 q 615 984 624 988 q 557 925 607 981 l 517 881 l 783 918 l 840 976 l 888 917 q 890 908 890 913 q 885 901 890 904 q 743 771 831 882 l 982 801 l 1029 858 m 774 876 q 538 838 592 854 l 500 864 q 396 765 461 824 l 418 731 l 692 765 l 774 876 m 996 764 l 725 731 l 725 628 q 901 667 839 643 l 951 617 l 725 589 l 725 488 l 967 515 l 996 764 m 676 482 l 676 583 q 515 553 575 569 l 467 594 l 676 622 l 676 724 l 428 693 l 435 454 l 676 482 m 1258 379 q 1269 365 1269 371 q 1253 357 1269 358 q 178 242 299 275 l 104 292 q 1200 421 1128 379 l 1258 379 m 1010 232 q 1015 222 1015 228 q 1007 211 1015 215 q 978 135 985 199 l 960 -28 q 940 -173 947 -150 q 926 -196 932 -196 q 915 -186 919 -196 l 882 -114 l 496 -140 q 499 -179 499 -161 q 495 -214 499 -197 q 488 -231 492 -231 q 476 -218 483 -231 l 428 -137 q 446 -35 449 -93 l 436 131 q 424 243 431 204 l 443 250 l 474 185 l 921 235 l 957 282 l 1010 232 m 928 194 l 483 140 l 488 40 q 811 94 746 64 l 851 53 q 856 44 856 49 q 843 38 856 39 l 489 -1 l 494 -103 q 842 -60 760 -87 l 889 -101 q 911 -19 906 -92 l 928 194 z "},"陆":{"ha":1389,"x_min":204,"x_max":1288,"o":"m 1279 456 q 1288 446 1288 450 q 1274 440 1288 442 l 903 403 l 903 -33 l 1089 -14 q 1099 35 1096 1 l 1113 179 q 1115 236 1115 203 q 1100 308 1115 269 l 1114 318 l 1185 249 q 1193 235 1193 240 q 1189 226 1193 231 q 1165 144 1172 210 l 1144 -49 q 1131 -113 1139 -90 q 1119 -136 1124 -136 q 1110 -126 1114 -136 l 1079 -54 l 750 -96 q 661 -146 683 -101 q 653 -151 657 -151 q 644 -147 650 -151 l 586 -96 q 615 -67 607 -82 q 622 -15 622 -53 l 621 138 q 597 272 621 211 l 608 285 l 681 231 q 689 219 689 224 q 686 208 689 214 q 669 125 669 178 l 671 -57 l 853 -37 l 853 397 q 608 361 657 378 l 538 407 l 853 439 l 853 672 q 647 638 683 650 l 583 681 l 853 714 l 853 790 q 818 1040 853 978 l 831 1050 l 922 974 q 938 956 938 961 q 932 944 938 951 q 903 719 904 907 q 1124 772 1088 743 l 1185 732 q 1196 721 1196 725 q 1185 715 1196 717 l 903 678 l 903 444 q 1121 473 1050 461 q 1217 504 1192 485 l 1279 456 m 551 876 q 557 868 557 872 q 547 858 557 864 q 517 819 538 851 q 478 740 496 786 l 425 610 q 515 396 515 515 q 485 268 515 326 q 444 211 454 210 q 436 217 440 211 q 317 361 392 281 l 326 375 l 431 304 q 467 418 467 353 q 388 604 467 518 l 460 832 l 285 803 l 285 108 q 281 -193 285 -167 q 270 -219 276 -219 q 260 -211 264 -219 l 204 -93 q 235 104 235 -37 l 235 681 q 213 968 235 861 l 231 975 l 288 846 l 442 871 l 478 935 l 551 876 z "},"律":{"ha":1389,"x_min":68,"x_max":1314,"o":"m 1306 681 q 1314 671 1314 675 q 1303 665 1314 667 l 1065 640 l 1054 535 l 1093 496 q 1099 485 1099 489 q 1089 481 1099 482 l 839 451 l 839 326 q 1097 369 1060 350 l 1151 328 q 1156 319 1156 324 q 1147 314 1156 315 l 839 285 l 839 167 q 1076 189 990 178 q 1199 221 1161 200 l 1260 174 q 1265 165 1265 169 q 1256 158 1265 160 l 839 125 q 835 -181 839 -131 q 819 -231 832 -231 q 808 -221 814 -231 l 756 -136 q 785 -54 779 -94 q 790 121 790 -14 q 501 88 551 104 l 440 136 l 790 163 l 790 281 q 567 244 621 264 l 503 290 l 790 322 l 790 446 q 590 410 663 432 l 533 451 l 790 488 l 790 610 q 524 567 578 586 l 460 611 l 790 650 l 790 781 q 619 750 657 764 l 561 790 l 790 819 q 785 967 790 917 q 758 1058 781 1018 l 768 1069 l 860 1008 q 865 1000 865 1006 q 863 988 865 994 q 843 919 847 956 q 839 825 839 882 l 1011 847 l 1051 904 l 1114 857 q 1118 849 1118 853 q 1114 842 1118 846 q 1079 764 1086 824 l 1071 685 q 1244 725 1203 703 l 1306 681 m 1031 810 l 839 788 l 839 657 l 1017 678 l 1031 810 m 1013 635 l 839 615 l 839 494 l 1001 519 l 1013 635 m 507 944 q 510 933 510 938 q 503 925 510 928 q 447 879 475 911 q 308 727 360 779 q 175 607 257 675 l 158 622 q 367 863 288 746 q 446 1040 446 979 l 463 1049 l 507 944 m 501 669 q 503 658 503 664 q 493 649 503 653 q 385 553 464 635 l 385 -1 q 368 -207 385 -207 q 361 -200 365 -207 l 301 -86 q 335 71 335 -37 l 335 501 q 82 290 253 419 l 68 307 q 351 585 247 465 q 454 751 454 706 l 471 756 l 501 669 z "},"伦":{"ha":1389,"x_min":65,"x_max":1315,"o":"m 1315 460 l 1314 438 l 1108 431 l 801 878 q 674 619 746 747 l 750 533 q 757 519 757 525 q 753 508 757 514 q 724 401 724 471 l 724 219 q 902 365 844 307 q 975 483 960 424 l 993 485 l 1021 388 q 1024 371 1024 379 q 1010 360 1024 363 q 889 293 961 346 q 724 185 817 240 l 724 54 q 765 -78 724 -44 q 916 -111 807 -111 q 1108 -90 1025 -111 l 1119 147 l 1140 147 q 1185 -125 1151 -6 q 1186 -138 1186 -132 q 1179 -148 1186 -144 q 1099 -160 1172 -151 q 949 -168 1026 -168 q 732 -122 790 -168 q 674 56 674 -76 l 674 413 q 660 596 674 549 q 413 290 551 417 l 400 307 q 676 721 561 479 q 779 1061 792 963 l 797 1068 l 861 988 q 865 974 865 979 q 851 961 865 969 q 818 917 836 953 l 1000 668 q 1143 519 1078 561 q 1315 460 1208 478 m 517 951 q 519 941 519 946 q 514 931 519 936 q 455 854 483 910 q 399 750 426 799 l 399 -49 q 383 -229 399 -229 q 375 -221 379 -229 l 319 -117 q 346 -56 340 -87 q 351 114 351 -25 l 351 671 q 79 340 235 483 l 65 354 q 333 733 224 531 q 442 1026 442 935 q 440 1046 442 1038 l 460 1054 l 517 951 z "},"罗":{"ha":1389,"x_min":149,"x_max":1144,"o":"m 1140 967 q 1144 958 1144 963 q 1131 947 1144 953 q 1109 926 1118 940 q 1093 869 1100 911 l 1068 708 l 1108 672 q 1115 660 1115 665 q 1104 654 1115 656 l 682 613 l 718 546 q 721 535 721 540 q 707 525 721 529 q 659 485 693 521 q 582 389 625 449 l 975 460 l 1018 515 l 1079 446 q 1083 435 1083 440 q 1075 426 1083 431 q 1008 356 1043 411 q 641 -27 863 128 q 151 -240 419 -182 l 149 -214 q 644 36 428 -131 q 964 411 860 203 q 600 338 626 350 l 563 365 q 528 326 531 328 l 693 190 q 681 143 690 171 q 666 106 671 115 q 654 97 661 97 q 640 108 647 97 l 515 311 q 246 79 382 168 l 228 96 q 654 610 589 410 l 392 585 q 390 511 393 529 q 380 493 386 493 q 369 501 374 493 l 315 603 q 338 714 340 646 l 331 850 q 297 1038 325 951 l 317 1047 l 385 915 l 1028 972 l 1069 1029 l 1140 967 m 1038 928 l 844 910 l 828 676 l 1015 700 l 1038 928 m 783 904 l 613 889 l 621 654 l 776 671 l 783 904 m 569 649 l 561 885 l 383 868 l 390 629 l 569 649 z "},"洛":{"ha":1389,"x_min":111,"x_max":1304,"o":"m 1304 246 l 1150 214 l 840 474 q 628 285 742 368 l 668 200 l 975 229 l 1011 276 l 1071 228 q 1078 217 1078 222 q 1075 210 1078 213 q 1042 160 1057 194 l 1010 -53 l 1053 -94 q 1058 -104 1058 -100 q 1043 -110 1058 -108 l 669 -136 q 664 -224 669 -212 q 654 -236 658 -236 q 646 -228 650 -236 l 596 -139 q 618 -21 618 -87 l 618 138 q 600 267 618 192 q 411 142 507 200 l 394 160 q 803 507 651 335 q 626 644 653 636 q 476 469 547 536 l 460 483 q 667 810 597 668 q 738 1028 738 951 q 735 1057 738 1044 l 751 1065 l 824 964 q 828 955 828 958 q 817 943 828 951 q 788 913 806 935 q 758 862 771 890 q 714 781 744 833 l 992 818 l 1031 867 l 1096 810 q 1100 802 1100 806 q 1090 793 1100 799 q 1022 719 1046 761 q 867 501 957 608 q 1112 324 1025 374 q 1304 264 1199 274 l 1304 246 m 979 768 q 743 729 790 747 l 699 758 q 644 672 674 714 l 688 669 q 826 535 696 644 q 979 768 915 644 m 988 189 l 669 158 l 669 -94 l 954 -67 l 988 189 m 422 824 q 429 776 429 790 q 426 743 429 763 q 418 724 422 724 q 407 729 414 724 l 239 885 l 249 901 l 422 824 m 461 644 l 285 -100 q 278 -110 282 -110 q 268 -101 275 -110 q 128 53 210 -26 l 139 69 l 247 10 l 440 650 l 461 644 m 288 531 q 292 479 292 499 q 281 428 292 428 q 269 435 276 428 l 111 597 l 119 613 l 288 531 z "},"马":{"ha":1389,"x_min":140,"x_max":1204,"o":"m 1122 535 l 1196 475 q 1204 465 1204 469 q 1188 449 1204 460 q 1162 415 1172 438 q 1144 357 1151 393 q 1074 34 1108 164 q 1014 -152 1040 -96 q 978 -219 988 -208 q 964 -229 968 -229 q 954 -222 960 -229 q 761 -14 861 -114 l 774 1 l 956 -117 q 1094 422 1025 0 l 549 350 q 510 342 524 347 q 489 324 497 336 q 476 311 481 311 q 467 317 472 311 l 401 368 q 444 414 435 390 q 474 572 454 438 q 494 744 494 706 q 488 815 494 783 l 506 822 l 568 751 q 574 740 574 744 q 571 729 574 735 q 532 597 546 693 l 503 396 l 799 433 l 892 914 q 407 847 499 872 l 336 904 l 867 961 l 913 1029 l 999 964 q 1004 955 1004 958 q 997 944 1004 951 q 940 839 954 906 l 854 440 l 1081 469 l 1122 535 m 972 185 q 985 169 985 175 q 971 163 985 164 q 217 67 282 92 l 140 122 q 675 179 492 157 q 917 229 858 201 l 972 185 z "},"买":{"ha":1389,"x_min":172,"x_max":1228,"o":"m 1074 993 l 1136 931 q 1143 919 1143 924 q 1136 908 1143 914 q 1083 857 1111 892 q 989 725 1056 822 l 968 735 l 1032 889 q 324 806 369 826 l 256 864 l 1025 933 l 1074 993 m 1221 344 q 1228 335 1228 339 q 1215 331 1228 332 l 765 292 q 583 -10 710 108 q 238 -214 456 -129 l 229 -196 q 544 15 429 -99 q 711 286 658 128 q 242 228 331 257 l 172 283 l 724 331 q 773 544 750 418 q 796 727 796 671 q 790 814 796 783 l 806 822 l 871 753 q 879 740 879 744 q 874 725 879 735 q 843 618 858 701 q 779 335 811 444 q 1158 399 1085 363 l 1221 344 m 675 657 q 682 590 682 621 q 674 560 682 560 q 664 565 671 560 l 485 713 l 493 729 l 675 657 m 600 467 q 606 410 606 432 q 600 375 606 375 q 586 382 594 375 l 403 529 l 411 543 l 600 467 m 1111 -31 q 1129 -119 1129 -82 q 1125 -157 1129 -157 q 1111 -149 1121 -157 l 790 122 l 800 136 l 1111 -31 z "},"迈":{"ha":1389,"x_min":69,"x_max":1306,"o":"m 369 828 q 363 760 369 797 q 353 718 357 724 q 347 713 350 713 q 338 719 343 713 l 179 925 l 193 939 l 369 828 m 1174 874 q 1181 864 1181 868 q 1172 858 1181 860 l 771 813 l 819 758 q 825 746 825 751 q 819 735 825 740 q 767 576 808 721 l 981 611 l 1019 661 l 1074 607 q 1079 597 1079 601 q 1074 588 1079 592 q 1038 510 1050 567 q 931 146 981 243 q 864 49 881 49 q 854 56 858 49 q 725 231 803 135 l 736 243 l 865 144 q 939 324 901 197 q 989 567 976 451 l 754 531 q 450 74 688 281 l 435 88 q 678 456 610 260 q 747 808 747 651 q 522 768 594 789 l 456 821 q 1117 921 1050 878 l 1174 874 m 1306 -87 l 1063 -181 l 688 -68 q 276 3 446 3 q 135 -18 188 3 l 79 36 q 198 42 147 42 q 286 40 249 42 q 346 203 346 151 q 296 324 346 256 l 356 501 q 128 456 208 481 l 69 504 l 340 539 l 388 592 l 440 544 q 446 533 446 539 q 430 510 446 528 q 391 451 414 493 q 333 332 368 408 q 385 265 371 290 q 400 214 400 240 q 381 148 400 188 q 319 38 363 108 q 633 -14 451 26 q 916 -72 815 -54 q 1092 -89 1017 -89 q 1301 -69 1167 -89 l 1306 -87 z "},"满":{"ha":1389,"x_min":114,"x_max":1231,"o":"m 1189 796 q 1196 786 1196 789 q 1185 782 1196 783 l 936 764 q 881 621 924 713 l 860 629 q 892 760 875 683 l 717 747 q 719 674 719 701 q 711 613 719 613 q 703 618 707 613 l 660 664 q 671 744 672 693 q 521 724 568 735 l 463 771 l 669 785 l 664 871 q 626 1007 658 953 l 638 1017 l 719 954 q 725 945 725 950 q 721 933 725 940 q 711 854 708 910 l 715 788 l 901 800 q 921 945 921 894 q 907 1026 921 996 l 918 1039 l 1000 969 q 1006 961 1006 964 q 1001 956 1006 958 q 947 804 985 942 q 1139 840 1088 818 l 1189 796 m 408 835 q 400 768 408 799 q 386 738 392 738 q 372 750 381 738 l 246 926 l 258 942 l 408 835 m 1224 582 q 1231 572 1231 576 q 1218 567 1231 568 l 949 547 q 935 394 944 489 l 1069 408 l 1106 456 l 1160 403 q 1164 397 1164 400 q 1151 387 1164 393 q 1133 358 1139 381 q 1125 285 1128 336 q 1083 -116 1107 -18 q 1043 -214 1058 -214 q 1035 -208 1039 -214 q 892 -53 985 -144 l 903 -37 l 1021 -111 q 1076 369 1060 -35 l 929 354 q 906 239 917 282 l 1019 147 q 1008 83 1015 103 q 997 63 1001 63 q 983 76 992 63 l 897 211 q 757 -37 861 90 l 740 -25 q 882 350 857 135 l 728 335 q 714 269 721 296 l 810 207 q 796 131 807 131 q 783 143 792 131 l 708 246 q 568 -10 664 83 l 551 7 q 682 331 646 126 l 549 317 l 549 31 q 544 -178 549 -156 q 534 -201 539 -201 q 522 -190 529 -201 l 475 -114 q 504 29 504 -68 l 504 283 q 486 435 504 356 l 501 442 l 544 356 l 689 371 q 704 529 700 451 q 511 503 579 518 l 457 547 q 1168 628 1086 594 l 1224 582 m 896 543 l 756 533 q 736 375 746 429 l 886 390 q 896 543 892 444 m 318 513 q 319 467 319 489 q 315 426 319 446 q 306 407 311 407 q 294 415 301 407 l 138 590 l 151 608 l 318 513 m 457 496 l 253 -118 q 246 -129 250 -129 q 235 -121 242 -129 q 114 17 181 -53 l 128 31 l 219 -28 l 435 507 l 457 496 z "},"曼":{"ha":1389,"x_min":161,"x_max":1274,"o":"m 1029 992 q 1035 984 1035 988 q 1028 976 1035 981 q 982 894 994 953 l 953 751 l 990 715 q 996 707 996 710 q 989 704 996 704 l 474 654 q 467 596 476 596 q 460 601 464 596 l 404 672 q 421 758 424 707 l 415 849 q 388 1039 411 931 l 401 1046 l 454 950 l 928 994 l 968 1047 l 1029 992 m 939 954 l 460 906 l 465 821 q 828 875 790 857 l 869 840 q 878 830 878 833 q 865 825 878 826 l 467 785 l 471 694 l 901 736 l 939 954 m 1110 618 q 1115 610 1115 614 q 1101 599 1115 607 q 1077 574 1088 590 q 1061 524 1067 557 l 1049 449 l 1097 410 q 1103 401 1103 404 q 1096 397 1103 399 l 367 329 q 356 249 369 249 q 347 254 351 249 l 293 332 q 313 428 313 368 l 313 483 q 306 553 313 507 q 289 628 299 599 l 308 633 l 361 556 l 1010 617 l 1053 665 l 1110 618 m 1018 575 l 828 557 l 810 410 l 996 435 l 1018 575 m 776 551 l 592 535 l 599 392 l 763 406 l 776 551 m 551 388 l 540 531 l 356 513 l 364 371 l 551 388 m 1274 -142 l 969 -174 l 703 26 q 163 -211 507 -137 l 161 -190 q 664 57 475 -90 q 510 164 551 140 l 511 174 l 565 181 q 690 79 608 135 q 840 257 788 158 q 475 199 539 221 l 418 244 l 853 299 l 893 340 l 954 282 q 957 276 957 279 q 951 269 957 274 q 876 204 899 236 q 732 51 803 111 l 815 -4 q 1017 -94 919 -74 q 1274 -119 1115 -115 l 1274 -142 z "},"门":{"ha":1389,"x_min":251,"x_max":1142,"o":"m 497 878 q 476 801 488 825 q 461 778 465 778 q 451 788 457 778 l 333 1011 l 350 1024 l 497 878 m 1138 899 q 1142 890 1142 894 q 1130 876 1142 886 q 1113 842 1118 865 q 1107 772 1107 818 l 1107 60 q 1094 -148 1107 -107 q 1071 -189 1081 -189 q 1064 -183 1068 -189 q 864 35 1014 -118 l 875 49 l 1040 -62 q 1053 71 1053 -36 l 1053 844 q 738 811 803 819 q 632 790 674 803 l 571 846 l 1031 889 l 1081 950 l 1138 899 m 267 858 l 346 779 q 351 769 351 774 q 347 756 351 764 q 331 643 331 724 l 331 24 q 327 -139 331 -89 q 314 -189 324 -189 q 306 -182 310 -189 l 251 -92 q 279 65 279 -47 l 279 621 q 274 767 279 729 q 254 847 269 806 l 267 858 z "},"蒙":{"ha":1389,"x_min":135,"x_max":1286,"o":"m 1143 893 q 1149 885 1149 889 q 1140 881 1149 882 l 833 854 q 776 715 804 789 l 753 721 q 792 853 785 821 l 588 836 q 575 706 590 706 q 569 710 572 706 l 529 758 q 543 832 544 793 q 293 799 376 817 l 236 846 l 542 871 l 540 929 q 513 1054 539 1006 l 526 1064 l 593 1006 q 599 995 599 1000 q 596 983 599 990 q 586 921 585 961 l 588 874 l 800 890 q 819 1013 819 978 q 815 1063 819 1047 l 831 1074 l 896 1000 q 899 992 899 996 q 896 986 899 989 q 850 894 883 974 q 1085 940 1014 908 l 1143 893 m 1203 740 q 1208 729 1208 735 q 1200 719 1208 724 q 1144 664 1171 701 q 1081 556 1118 626 l 1060 564 l 1107 706 l 271 629 q 240 512 265 556 q 207 468 215 468 q 201 475 204 468 l 176 551 q 250 738 243 619 l 272 739 q 274 672 274 717 l 1100 740 l 1147 799 l 1203 740 m 953 589 q 957 581 957 586 q 942 575 957 576 q 440 515 524 538 l 385 561 q 899 626 824 589 l 953 589 m 1286 -96 l 1058 -119 l 772 228 l 731 210 q 761 69 761 144 q 723 -151 761 -65 q 669 -236 685 -236 q 657 -228 664 -236 q 486 -42 574 -122 l 501 -26 l 657 -133 q 706 51 706 -68 q 690 171 706 113 q 146 -169 461 -43 l 135 -150 q 669 229 501 26 q 643 274 661 249 q 176 -3 435 86 l 165 14 q 608 319 453 133 q 590 339 597 333 q 189 156 396 219 l 182 174 q 604 419 474 293 q 314 379 394 400 l 254 425 q 1054 518 976 483 l 1100 481 q 1106 469 1106 475 q 1088 463 1106 464 l 653 425 l 674 400 q 679 388 679 393 q 663 378 679 383 q 615 356 647 374 q 721 229 686 296 q 931 411 907 353 l 946 418 l 983 358 q 988 345 988 350 q 975 335 988 340 q 897 297 931 318 q 804 244 864 275 l 936 93 q 1088 -30 1004 10 q 1285 -74 1171 -69 l 1286 -96 z "},"孟":{"ha":1389,"x_min":101,"x_max":1282,"o":"m 1226 667 q 1232 660 1232 663 q 1221 656 1232 657 l 769 614 q 776 511 776 563 q 753 346 776 411 q 717 281 729 281 q 708 286 714 281 q 526 442 622 371 l 536 456 l 693 368 q 721 551 721 435 q 719 608 721 581 q 269 544 356 571 l 207 603 l 715 647 q 665 799 701 742 l 681 807 q 735 732 713 778 l 918 939 q 426 865 475 886 l 364 918 l 935 988 l 983 1039 l 1043 964 q 1047 956 1047 958 q 1039 949 1047 953 q 956 894 996 932 l 747 703 q 763 651 756 685 q 1163 725 1068 678 l 1226 667 m 1275 -87 q 1282 -98 1282 -93 q 1272 -103 1282 -103 q 167 -168 436 -124 l 101 -111 l 375 -97 l 357 163 q 328 329 349 261 l 343 338 l 399 244 l 964 299 l 1013 358 l 1072 308 q 1079 298 1079 303 q 1072 286 1079 293 q 1035 194 1044 263 l 997 -64 q 1213 -29 1156 -56 l 1275 -87 m 983 250 l 775 231 l 818 199 q 826 188 826 192 q 822 178 826 183 q 813 148 818 172 q 806 101 807 124 l 796 -75 l 946 -67 l 983 250 m 756 94 q 750 228 758 181 l 574 213 l 617 179 q 625 166 625 172 q 621 153 625 160 q 610 74 610 135 l 611 -85 l 749 -78 l 756 94 m 565 -87 l 561 85 q 547 210 560 181 l 408 197 l 422 -94 l 565 -87 z "},"米":{"ha":1389,"x_min":104,"x_max":1281,"o":"m 1281 0 l 1035 -12 l 719 443 l 719 65 q 713 -145 719 -57 q 694 -233 707 -233 q 688 -226 690 -233 l 639 -126 q 672 138 672 -68 l 672 428 q 413 133 563 272 q 117 -94 263 -7 l 104 -74 q 632 465 451 181 q 246 415 322 438 l 188 469 l 672 508 l 672 754 q 667 968 672 914 q 649 1051 661 1022 l 663 1067 l 750 979 q 757 968 757 972 q 753 960 757 964 q 719 751 719 931 l 719 513 q 1140 579 1032 538 l 1197 525 q 1206 515 1206 518 q 1193 510 1206 511 l 732 474 l 983 174 q 1064 88 1033 114 q 1141 48 1094 63 q 1281 21 1188 33 l 1281 0 m 1047 833 q 1042 818 1051 821 q 975 758 1019 811 q 807 572 908 678 l 793 585 q 937 805 886 710 q 986 935 988 900 l 1006 944 l 1047 833 m 531 657 q 512 599 525 626 q 493 571 499 571 q 485 576 488 571 l 340 832 l 353 844 l 531 657 z "},"密":{"ha":1389,"x_min":203,"x_max":1201,"o":"m 782 942 q 765 876 776 904 q 748 847 753 847 q 739 854 743 847 l 635 1049 l 650 1061 l 782 942 m 1193 847 q 1199 835 1199 840 q 1185 825 1199 831 q 1046 686 1133 800 l 1025 692 l 1081 818 l 335 764 q 303 639 324 679 q 275 599 283 599 q 269 608 272 599 l 240 696 q 311 915 303 728 l 333 918 q 340 860 340 893 q 339 807 340 828 l 1079 865 l 1140 915 l 1193 847 m 932 525 q 1008 358 974 425 q 1042 287 1042 290 q 1036 283 1042 283 q 1006 282 1031 282 q 813 310 911 282 q 638 390 715 338 q 214 168 453 256 l 203 188 q 600 418 415 282 q 446 642 506 500 l 465 649 q 636 447 543 521 q 808 617 738 529 q 893 767 878 706 l 911 768 l 939 674 q 942 663 942 667 q 932 654 942 658 q 879 613 903 640 q 676 419 794 515 q 954 339 790 350 l 915 519 l 932 525 m 733 640 q 724 592 732 624 q 710 560 715 560 q 699 568 704 560 l 586 724 l 597 736 l 733 640 m 385 632 q 369 493 385 560 q 331 390 353 426 q 303 354 310 354 q 293 363 296 354 l 272 442 q 326 508 307 469 q 365 632 344 546 l 385 632 m 1199 485 q 1201 419 1201 454 q 1193 383 1201 383 q 1186 388 1190 383 l 983 585 l 990 601 l 1199 485 m 988 214 l 1058 150 q 1064 142 1064 146 q 1058 131 1064 138 q 1038 69 1044 114 l 1014 -90 q 1000 -150 1008 -129 q 987 -171 992 -171 q 979 -164 982 -171 l 950 -94 l 518 -139 q 440 -168 468 -144 q 429 -174 435 -174 q 418 -168 424 -174 l 368 -125 q 397 -94 390 -106 q 404 -62 404 -82 l 404 38 q 379 175 404 117 l 393 189 l 463 125 q 468 116 468 119 q 464 107 468 113 q 451 50 451 88 l 451 -96 l 683 -76 l 683 154 q 679 242 683 219 q 664 290 675 264 l 678 303 l 749 244 q 754 235 754 240 q 750 221 754 229 q 732 122 732 190 l 732 -72 l 963 -54 q 972 -21 969 -37 l 985 75 q 989 139 989 107 q 976 199 989 171 l 988 214 z "},"明":{"ha":1389,"x_min":251,"x_max":1163,"o":"m 1160 942 q 1163 935 1163 939 q 1158 929 1163 932 q 1126 868 1126 908 l 1126 74 q 1115 -153 1126 -106 q 1093 -201 1103 -201 q 1085 -194 1090 -201 q 908 -1 1014 -103 l 919 13 l 1056 -76 q 1075 117 1075 -40 l 1075 899 l 815 868 q 811 613 818 736 q 992 660 957 639 l 1035 621 q 1039 614 1039 617 q 1029 610 1039 611 l 808 571 q 788 383 801 461 q 996 429 960 406 l 1038 388 q 1042 381 1042 383 q 1033 376 1042 378 l 781 347 q 663 42 744 164 q 419 -204 581 -81 l 406 -189 q 681 176 597 -21 q 765 724 765 372 q 742 1025 765 939 l 760 1032 l 822 913 l 1058 943 l 1094 999 l 1160 942 m 551 901 l 608 850 q 615 840 615 844 q 603 826 615 836 q 587 800 592 815 q 581 750 582 785 l 564 344 q 538 175 557 175 q 531 183 535 175 l 489 268 l 331 244 q 328 131 332 144 q 320 118 325 118 q 313 124 315 118 l 261 214 q 282 388 285 249 l 276 694 q 251 915 274 801 l 269 921 l 317 822 l 521 856 l 551 901 m 535 817 l 321 783 l 325 567 q 442 597 417 581 l 476 564 q 482 555 482 558 q 476 550 482 551 l 326 526 l 331 283 q 469 322 436 301 l 497 296 q 519 426 515 338 l 535 817 z "},"摩":{"ha":1389,"x_min":76,"x_max":1240,"o":"m 1233 111 l 771 67 l 771 -40 q 763 -193 771 -150 q 746 -236 754 -236 q 738 -232 742 -236 q 531 -82 685 -186 l 547 -71 l 707 -150 q 724 -51 724 -128 l 724 63 q 353 13 379 29 l 297 56 l 724 101 l 724 190 q 463 151 486 163 l 415 192 l 724 225 l 724 319 q 403 269 564 292 l 400 289 q 874 399 717 338 l 838 456 q 851 499 849 475 q 854 594 854 524 l 854 624 q 646 418 790 532 l 633 432 q 819 647 764 560 q 758 638 781 644 l 736 653 l 586 638 l 586 617 l 689 574 q 692 546 692 560 q 688 518 692 532 q 680 504 683 504 q 674 507 676 504 l 586 600 l 586 524 q 583 367 586 392 q 575 343 579 343 q 567 349 571 343 l 526 406 q 542 455 539 428 q 546 574 546 482 q 349 383 485 492 l 331 392 q 92 -143 281 61 l 76 -128 q 274 333 238 97 q 311 774 311 568 q 300 951 311 876 l 319 957 l 372 858 l 746 888 l 668 1064 l 679 1072 l 796 965 q 761 889 782 922 q 1138 940 1056 917 l 1194 896 q 1200 888 1200 892 q 1193 885 1200 885 l 849 857 l 908 803 q 913 796 913 799 q 908 784 913 793 q 899 756 903 775 q 896 688 896 736 q 1074 719 1026 701 l 1117 681 q 1121 674 1121 678 q 1113 671 1121 671 l 931 657 l 1006 572 q 1110 486 1064 506 q 1233 454 1156 467 l 1233 439 l 1061 432 l 903 654 l 896 654 l 896 568 q 892 407 896 429 q 932 431 921 419 l 943 433 l 1003 382 q 1007 376 1007 378 q 1000 372 1007 374 q 899 353 971 369 q 771 328 826 338 l 771 231 q 990 275 924 249 l 1039 233 q 1042 228 1042 231 q 1035 225 1042 226 l 771 196 l 771 106 q 1179 167 1119 143 l 1233 121 q 1240 113 1240 115 q 1233 111 1240 111 m 854 685 q 829 854 853 793 l 547 832 l 599 781 q 604 772 604 775 q 598 763 604 769 q 589 740 592 756 q 586 671 586 724 q 696 696 671 682 l 724 675 l 854 685 m 546 667 q 531 831 546 793 l 367 817 q 353 608 357 701 q 332 394 350 514 q 536 632 460 507 q 433 611 465 622 l 393 650 l 546 667 z "},"莫":{"ha":1389,"x_min":142,"x_max":1250,"o":"m 1222 890 q 1228 882 1228 886 q 1219 878 1228 878 l 860 854 l 776 706 l 747 715 q 810 851 796 815 l 572 836 l 576 782 q 579 716 579 733 q 575 699 579 699 q 567 703 571 699 l 510 763 q 525 833 529 785 q 239 799 318 819 l 178 851 l 522 872 l 518 922 q 475 1039 513 989 l 488 1051 l 569 999 q 575 990 575 994 q 574 982 575 985 q 565 944 565 965 q 567 907 565 922 l 569 875 l 825 892 q 863 1043 863 986 q 861 1074 863 1057 l 879 1079 l 942 1000 q 946 991 946 994 q 942 985 946 988 q 882 894 926 974 q 1147 947 1085 907 l 1222 890 m 1247 -189 l 1015 -203 l 710 146 l 679 142 q 497 -74 614 18 q 185 -246 379 -165 l 176 -225 q 621 139 514 -49 q 207 103 306 124 l 142 157 l 640 178 q 683 318 683 258 l 451 306 q 449 247 453 267 q 442 228 446 228 q 432 236 438 228 l 375 324 q 397 369 394 346 q 399 428 400 393 l 389 603 q 358 742 385 675 l 374 750 l 440 675 l 969 719 l 1010 768 l 1067 719 q 1075 708 1075 713 q 1069 701 1075 704 q 1039 664 1047 688 q 1026 608 1031 640 l 993 393 l 1024 354 q 1028 344 1028 349 q 1019 340 1028 340 l 724 321 l 754 283 q 758 274 758 278 q 754 268 758 271 q 699 181 738 256 q 1000 201 894 188 q 1143 244 1106 215 l 1235 185 q 1242 174 1242 179 q 1229 169 1242 169 l 754 147 l 886 19 q 1074 -125 1007 -99 q 1250 -167 1142 -151 l 1247 -189 m 979 679 l 436 638 l 450 343 l 943 388 l 979 679 m 906 528 q 913 518 913 522 q 904 514 913 514 q 524 475 615 499 l 475 519 q 734 542 649 532 q 854 574 819 551 l 906 528 z "},"墨":{"ha":1389,"x_min":196,"x_max":1190,"o":"m 1183 454 q 1190 444 1190 447 q 1178 439 1190 440 q 250 351 258 364 l 196 396 l 674 435 l 674 526 q 417 492 471 507 l 363 536 l 674 564 l 674 667 l 413 644 q 400 594 413 594 q 393 599 396 594 l 347 650 q 364 705 364 671 q 363 764 364 739 l 357 856 q 333 1013 354 907 l 349 1021 l 396 931 l 1013 990 l 1047 1039 l 1103 988 q 1108 978 1108 982 q 1097 968 1108 975 q 1078 947 1086 961 q 1065 896 1071 932 l 1043 756 l 1069 719 q 1075 709 1075 713 q 1063 704 1075 706 l 721 671 l 721 568 q 997 607 947 590 l 1029 572 q 1035 561 1035 565 q 1017 556 1035 557 l 721 529 l 721 438 q 1139 497 1107 469 l 1183 454 m 1021 951 l 858 936 l 899 874 q 903 861 903 867 q 896 849 903 856 q 811 722 875 828 l 996 742 l 1021 951 m 838 933 l 721 922 l 721 713 l 781 719 q 839 917 839 871 q 838 933 839 925 m 674 707 l 674 918 l 400 892 l 413 682 l 674 707 m 583 772 q 565 717 576 739 q 549 696 554 696 q 539 706 543 696 l 471 851 l 485 864 l 583 772 m 1169 225 q 1160 147 1169 171 q 1147 122 1151 122 q 1139 128 1143 122 l 971 364 l 985 375 l 1169 225 m 878 251 q 859 187 871 208 q 842 165 847 165 q 831 178 838 165 l 747 349 l 761 358 l 878 251 m 571 213 q 551 174 565 196 q 532 153 538 153 q 524 165 526 153 l 483 326 l 500 333 l 571 213 m 336 322 q 326 224 336 268 q 298 145 317 179 q 261 95 279 111 q 238 79 243 79 q 232 94 233 79 l 225 163 q 287 226 267 192 q 318 322 307 261 l 336 322 m 1176 -97 q 1183 -108 1183 -104 q 1174 -111 1183 -111 q 517 -145 728 -132 q 271 -174 307 -158 l 206 -122 l 665 -96 l 665 42 q 401 13 436 22 l 351 61 l 665 82 l 665 111 q 636 288 665 229 l 654 299 l 731 222 q 736 213 736 217 q 733 207 736 210 q 715 86 715 176 q 988 131 907 100 l 1038 88 q 1043 80 1043 82 q 1035 76 1043 78 l 715 47 l 715 -93 q 1125 -46 1089 -74 l 1176 -97 z "},"姆":{"ha":1389,"x_min":74,"x_max":1314,"o":"m 504 775 l 569 713 q 575 703 575 707 q 571 696 575 700 q 552 656 563 688 q 538 596 542 625 q 431 201 496 358 l 535 153 q 546 85 546 110 q 543 60 546 60 q 533 65 540 60 q 413 158 461 126 q 113 -196 319 -50 l 103 -183 q 374 182 281 -31 q 199 274 294 233 q 294 613 243 393 q 132 582 164 594 l 74 629 l 303 653 q 353 940 353 876 q 336 1050 353 1004 l 347 1063 l 433 989 q 438 982 438 985 q 433 974 438 979 q 397 869 411 944 q 350 657 382 793 l 494 671 q 496 717 496 692 q 493 768 496 743 l 504 775 m 490 639 l 340 619 q 251 285 288 400 l 390 221 q 490 639 451 376 m 1306 540 q 1314 529 1314 533 q 1304 524 1314 525 l 1090 497 q 1065 181 1075 261 q 1207 217 1163 196 l 1260 176 q 1272 164 1272 168 q 1258 158 1272 160 l 1061 136 q 1017 -139 1039 -54 q 985 -224 994 -224 q 972 -214 981 -224 q 772 -18 886 -107 l 779 0 l 964 -111 q 1010 129 992 -26 l 753 100 q 683 90 699 94 q 662 75 668 85 q 651 65 656 65 q 642 71 647 65 l 596 114 q 640 240 632 146 l 658 442 q 576 424 613 435 l 517 469 q 663 486 585 478 l 686 743 q 688 794 688 763 q 678 950 688 896 l 693 954 l 739 853 l 1050 901 l 1089 964 l 1146 917 q 1156 905 1156 910 q 1149 896 1156 900 q 1121 858 1129 885 q 1107 738 1113 831 l 1093 539 q 1254 581 1214 556 l 1306 540 m 1060 858 l 740 810 l 711 493 l 1042 532 q 1060 858 1056 733 m 939 650 q 916 599 928 615 q 899 583 904 583 q 890 592 894 583 l 825 750 l 835 758 l 939 650 m 1039 490 l 707 449 l 679 132 l 1014 174 q 1039 490 1026 281 m 915 321 q 898 261 908 283 q 883 239 888 239 q 876 244 879 239 l 797 410 l 808 419 l 915 321 z "},"慕":{"ha":1389,"x_min":79,"x_max":1292,"o":"m 1292 15 l 1100 -6 l 801 297 l 576 279 q 86 -69 350 44 l 79 -51 q 508 274 335 94 q 222 239 317 260 l 174 288 l 546 317 q 622 428 597 378 l 483 414 q 481 375 485 389 q 472 361 476 361 q 464 368 468 361 l 422 436 q 438 514 439 463 l 432 657 q 415 761 431 711 l 431 769 l 469 697 l 585 710 l 553 761 q 560 794 560 774 q 557 836 560 815 q 254 804 344 822 l 206 849 l 554 875 l 549 925 q 519 1036 543 988 l 531 1050 l 594 1004 q 601 995 601 1000 q 600 988 601 990 q 593 910 589 964 l 596 878 l 817 894 q 836 1022 836 986 q 833 1072 836 1057 l 854 1076 l 911 1015 q 917 1006 917 1010 q 911 998 917 1001 q 891 965 906 994 q 864 899 876 936 q 1129 943 1069 915 l 1179 894 q 1185 886 1185 890 q 1176 882 1185 882 l 851 858 l 810 735 l 931 749 l 968 790 l 1022 742 q 1031 731 1031 735 q 1018 719 1031 726 q 997 696 1006 711 q 982 646 989 681 l 958 519 l 996 478 q 1001 467 1001 471 q 993 463 1001 464 l 671 432 l 683 390 q 686 379 686 383 q 682 374 686 375 q 615 322 664 368 q 1140 394 1072 358 l 1196 343 q 1204 333 1204 336 q 1190 328 1204 329 l 844 300 l 988 175 q 1139 68 1082 92 q 1292 36 1196 44 l 1292 15 m 808 856 l 599 840 q 604 751 604 779 q 601 711 604 724 l 776 731 q 808 856 800 821 m 939 704 l 476 656 l 479 569 q 824 624 792 604 l 861 589 q 868 580 868 583 q 860 575 868 576 l 481 536 l 483 453 l 913 496 l 939 704 m 650 257 l 715 201 q 722 192 722 196 q 719 186 722 189 q 707 104 707 168 l 707 -79 q 693 -198 707 -161 q 668 -235 679 -235 q 663 -231 665 -235 q 518 -53 604 -150 l 532 -39 l 651 -132 q 660 -57 660 -117 l 660 101 q 655 192 660 168 q 635 240 650 215 l 650 257 m 507 110 q 426 -86 464 -39 q 378 -133 388 -133 q 374 -122 374 -133 l 372 -42 q 492 121 439 7 l 507 110 m 861 -29 q 841 -81 856 -57 q 823 -104 826 -104 q 817 -94 819 -104 l 760 108 l 775 117 l 861 -29 m 1014 -26 q 999 -94 1010 -72 q 985 -115 989 -115 q 978 -110 981 -115 l 900 82 l 914 93 l 1014 -26 z "},"那":{"ha":1389,"x_min":96,"x_max":1242,"o":"m 792 931 q 796 924 796 928 q 790 917 796 921 q 750 825 753 885 q 709 281 742 488 q 643 -1 676 75 q 597 -76 610 -76 q 590 -71 593 -76 q 438 165 536 38 l 450 178 l 599 44 q 701 894 686 278 l 490 869 l 536 819 q 539 814 539 817 q 535 806 539 811 q 507 697 517 781 q 501 649 504 663 q 603 678 569 661 l 644 644 q 649 638 649 640 q 642 635 649 636 l 497 614 q 464 415 482 494 q 589 454 554 433 l 626 415 q 631 408 631 411 q 624 403 631 404 l 456 379 q 107 -114 379 51 l 96 -96 q 401 371 328 75 q 229 333 290 354 l 178 376 l 411 408 q 444 606 435 515 q 300 579 335 590 l 246 617 l 449 642 q 461 799 461 750 q 458 867 461 849 q 297 838 325 851 l 244 885 l 696 932 l 729 983 l 792 931 m 1235 894 q 1240 887 1240 890 q 1233 879 1240 883 q 1165 794 1192 851 l 1075 597 q 1242 289 1242 457 q 1186 106 1242 190 q 1113 21 1131 21 q 1104 25 1107 21 q 985 221 1053 132 l 997 233 l 1118 121 q 1190 301 1190 197 q 1040 589 1190 456 l 1132 849 l 929 822 l 929 79 q 924 -203 929 -169 q 913 -237 918 -237 q 904 -233 907 -237 l 849 -132 q 878 75 878 -85 l 878 728 q 864 976 878 913 l 881 983 l 932 864 l 1129 890 l 1174 947 l 1235 894 z "},"南":{"ha":1389,"x_min":146,"x_max":1229,"o":"m 1225 831 q 1229 823 1229 826 q 1221 818 1229 819 l 711 772 l 693 585 l 1035 613 l 1071 671 l 1139 617 q 1143 610 1143 614 q 1139 604 1143 607 q 1094 504 1099 579 q 1040 -97 1063 7 q 996 -201 1018 -201 q 988 -194 992 -201 q 826 -12 928 -101 l 835 4 l 978 -89 q 1044 567 1025 85 l 825 550 l 854 513 q 857 504 857 508 q 850 494 857 500 q 808 441 825 471 q 760 335 790 411 q 892 364 838 343 l 939 324 q 942 319 942 321 q 935 315 942 317 l 700 289 l 700 167 q 946 206 882 183 l 988 161 q 993 152 993 156 q 985 149 993 149 l 700 126 l 700 -1 q 699 -158 700 -139 q 692 -178 697 -178 q 685 -172 688 -178 l 626 -78 q 651 49 651 -47 l 651 122 q 442 99 482 110 l 381 143 l 651 163 l 651 285 q 467 257 488 267 l 415 299 l 736 332 q 785 547 775 446 l 335 513 l 364 -17 q 371 -166 371 -133 q 360 -199 371 -199 q 353 -193 357 -199 l 290 -89 q 310 -14 310 -51 q 308 64 310 24 l 293 429 q 260 654 286 564 l 276 661 l 329 554 l 642 581 l 657 768 q 199 721 203 726 l 146 771 l 660 813 q 665 949 665 893 q 650 1061 665 1006 l 664 1069 l 744 994 q 750 984 750 989 q 747 976 750 979 q 730 935 736 965 q 715 817 724 906 q 1165 886 1081 847 l 1225 831 m 628 400 q 614 352 624 378 q 597 326 604 326 q 589 331 590 326 l 503 506 l 518 514 l 628 400 z "},"内":{"ha":1389,"x_min":251,"x_max":1147,"o":"m 1076 768 l 1143 711 q 1147 704 1147 707 q 1143 699 1147 701 q 1108 659 1115 676 q 1100 587 1101 642 q 1085 366 1099 532 q 1058 78 1071 200 q 1029 -121 1044 -43 q 1006 -214 1014 -199 q 996 -231 997 -229 q 992 -232 994 -232 q 985 -226 989 -232 q 764 36 893 -99 l 775 49 l 965 -89 q 1044 663 1014 22 l 689 629 q 651 478 675 550 l 910 285 q 903 222 913 267 q 888 178 894 178 q 881 182 883 178 q 643 453 796 313 q 335 89 567 236 q 331 -192 335 -161 q 321 -222 326 -222 q 311 -217 315 -222 l 251 -117 q 283 51 283 -53 l 283 558 q 276 656 283 596 q 256 760 268 717 l 276 765 l 329 644 l 640 674 q 657 903 657 810 q 633 1040 657 997 l 646 1056 l 743 971 q 747 963 747 967 q 740 949 747 960 q 726 910 732 939 q 713 799 721 881 q 697 679 704 717 l 1029 710 l 1076 768 m 633 624 l 335 596 l 335 113 q 541 342 472 225 q 633 624 610 458 z "},"尼":{"ha":1389,"x_min":90,"x_max":1238,"o":"m 983 1014 l 1053 953 q 1060 944 1060 947 q 1053 936 1060 940 q 1000 864 1010 910 l 968 704 l 1011 664 q 1017 655 1017 658 q 1007 650 1017 651 l 467 583 q 333 129 422 308 q 107 -165 244 -50 l 90 -151 q 348 299 265 35 q 431 849 431 563 q 422 1013 431 938 l 443 1018 l 492 900 l 944 957 l 983 1014 m 949 910 l 493 854 q 474 633 488 744 l 915 692 l 949 910 m 1176 169 q 1194 68 1185 113 q 1214 -18 1203 24 l 1236 -101 q 1238 -115 1238 -108 q 1228 -124 1238 -121 q 1115 -138 1219 -128 q 918 -149 1011 -149 q 703 -126 750 -149 q 639 -51 656 -103 q 622 118 622 0 l 622 399 q 600 556 622 517 l 613 569 l 693 497 q 700 485 700 492 q 693 463 700 478 q 679 420 686 449 q 672 374 672 392 l 672 210 q 897 352 817 292 q 1008 471 976 413 l 1026 471 l 1049 381 q 1033 357 1053 363 q 965 325 1000 346 q 672 172 819 240 l 672 104 q 692 -40 674 -3 q 778 -88 710 -78 q 915 -99 847 -99 q 1154 -62 1089 -99 l 1154 168 l 1176 169 z "},"聂":{"ha":1389,"x_min":136,"x_max":1275,"o":"m 1275 -160 l 1049 -182 l 847 43 q 651 -119 772 -36 q 435 -239 529 -201 l 428 -219 q 815 79 688 -67 l 776 122 q 661 217 719 188 l 664 233 l 739 233 q 842 111 751 203 q 975 335 925 217 q 722 290 818 314 l 665 331 l 888 363 l 847 433 q 858 519 858 464 q 208 431 401 467 l 147 476 l 453 513 l 453 878 q 279 850 339 865 l 221 899 q 789 956 556 925 q 1064 1008 1022 988 l 1119 964 q 1128 953 1128 957 q 1117 949 1128 950 l 907 926 l 907 565 q 1181 619 1119 596 l 1233 576 q 1242 564 1242 569 q 1228 557 1242 558 l 907 524 q 904 364 907 413 l 971 374 l 1017 426 l 1068 375 q 1078 358 1078 365 q 1067 344 1078 351 q 999 261 1033 321 q 876 76 921 128 l 960 -8 q 1105 -109 1033 -83 q 1275 -139 1176 -135 l 1275 -160 m 858 560 l 858 921 l 501 883 l 501 778 q 751 836 708 811 l 796 801 q 804 792 804 796 q 794 788 804 789 l 501 739 l 501 646 q 756 703 722 682 l 796 669 q 806 658 806 663 q 794 653 806 654 l 501 606 l 501 518 l 858 560 m 643 351 q 650 340 650 344 q 637 324 650 335 q 607 288 624 314 q 563 206 590 263 q 508 110 535 150 l 594 64 q 601 -9 601 25 q 596 -43 601 -43 q 585 -36 590 -43 q 481 71 540 21 q 146 -219 335 -125 l 136 -196 q 444 100 317 -79 q 319 190 383 147 l 329 207 l 467 132 q 550 311 529 229 q 278 265 313 281 l 219 311 l 553 353 l 593 404 l 643 351 z "},"纽":{"ha":1389,"x_min":133,"x_max":1290,"o":"m 597 693 q 600 685 600 689 q 594 676 600 681 q 504 581 565 658 l 275 288 l 582 358 l 593 336 q 243 214 290 242 q 233 210 238 210 q 225 215 229 210 l 178 276 q 221 294 203 283 q 317 408 239 306 q 426 560 394 511 q 191 496 199 501 q 180 490 183 490 q 174 494 176 490 l 133 557 q 192 583 176 568 q 279 713 208 597 q 378 896 350 829 q 417 1036 407 963 l 435 1044 l 492 949 q 494 939 494 943 q 489 932 494 935 q 435 875 463 918 l 238 567 l 449 594 q 532 778 532 721 l 547 782 l 597 693 m 1285 -32 q 1290 -40 1290 -36 q 1283 -43 1290 -43 q 551 -106 721 -69 l 488 -53 l 700 -37 l 750 407 q 629 381 672 393 l 574 428 l 754 449 l 796 814 q 667 792 711 803 l 603 839 l 1049 893 l 1089 950 l 1154 885 q 1158 878 1158 882 q 1154 871 1158 874 q 1117 838 1125 853 q 1106 779 1110 824 l 1029 -14 q 1221 18 1172 -3 l 1285 -32 m 1057 849 l 846 821 l 806 456 q 956 492 918 475 l 1004 450 q 1008 443 1008 446 q 1001 439 1008 440 l 800 413 l 750 -33 l 979 -18 l 1057 849 m 606 136 q 219 -71 250 -51 l 143 -26 l 597 158 l 606 136 z "},"努":{"ha":1389,"x_min":119,"x_max":1294,"o":"m 606 933 l 658 856 q 664 842 664 849 q 660 832 664 836 q 619 753 638 804 q 500 529 568 615 l 608 486 q 614 447 614 465 q 613 421 614 428 q 608 414 613 414 q 600 417 603 414 q 468 493 546 453 q 132 258 358 369 l 119 275 q 432 513 331 396 q 290 579 319 568 q 358 749 324 649 q 196 721 221 735 l 139 772 l 372 793 q 417 1029 417 938 q 415 1067 417 1047 l 433 1075 l 490 989 q 497 974 497 981 q 490 963 497 968 q 451 892 468 944 q 419 797 435 839 l 581 811 q 592 891 592 867 q 589 928 592 915 l 606 933 m 571 772 l 406 754 q 344 593 361 633 l 460 546 q 571 772 538 647 m 1294 386 l 1071 358 l 878 557 q 650 364 779 446 l 669 335 q 671 328 671 332 q 668 321 671 324 q 628 243 647 303 l 885 269 l 928 333 l 988 281 q 992 271 992 276 q 988 261 992 265 q 942 182 956 235 q 835 -158 872 -81 q 785 -235 797 -235 q 772 -224 779 -235 q 628 -18 728 -144 l 643 0 l 776 -126 q 840 10 811 -86 q 899 229 868 106 l 613 199 q 459 -60 561 46 q 179 -247 357 -165 l 169 -229 q 556 193 469 -62 q 340 157 410 176 l 274 208 l 571 238 q 600 407 600 344 l 621 410 l 638 383 q 849 588 764 483 l 774 665 q 704 719 724 708 l 706 733 l 775 735 q 832 653 790 692 l 871 617 q 982 819 936 704 q 738 786 794 801 l 679 828 l 985 865 l 1031 924 l 1096 861 q 1103 850 1103 854 q 1097 844 1103 846 q 1036 789 1058 831 q 901 586 969 669 q 1094 444 1015 479 q 1294 410 1174 410 l 1294 386 z "},"诺":{"ha":1389,"x_min":75,"x_max":1294,"o":"m 1233 824 q 1242 813 1242 817 q 1231 807 1242 808 l 1013 782 q 947 592 986 669 l 926 600 q 965 776 943 663 l 711 750 l 711 674 q 708 585 711 606 q 701 564 706 564 q 689 574 696 564 l 650 625 q 665 744 665 658 q 550 724 596 738 l 488 772 l 664 790 l 663 854 q 651 945 661 899 q 629 1004 642 992 l 643 1021 l 715 965 q 724 954 724 958 q 721 944 724 950 q 711 858 711 925 l 711 796 l 975 822 q 996 975 996 936 q 981 1057 996 1014 l 993 1067 l 1067 999 q 1078 985 1078 989 q 1074 975 1078 981 q 1024 828 1054 942 q 1188 865 1143 844 l 1233 824 m 415 842 q 397 731 415 731 q 383 742 393 731 l 218 944 l 229 960 l 415 842 m 1288 494 q 1294 483 1294 488 q 1283 478 1294 479 l 793 431 q 711 254 767 363 l 713 232 l 1057 263 l 1097 313 l 1154 260 q 1161 249 1161 253 q 1154 239 1161 244 q 1119 188 1124 213 l 1088 -47 l 1122 -82 q 1131 -95 1131 -90 q 1118 -100 1131 -100 l 719 -122 q 717 -205 721 -179 q 710 -231 714 -231 q 700 -219 706 -231 l 647 -125 q 669 -36 669 -82 l 669 126 q 668 179 669 172 q 390 -150 547 -10 l 372 -132 q 590 144 488 -11 q 739 425 692 299 q 521 393 593 411 l 451 443 l 753 471 q 794 667 794 594 q 792 694 794 683 l 806 703 l 865 628 q 875 610 875 615 q 865 599 875 606 q 810 476 849 585 q 1232 543 1175 511 l 1288 494 m 1069 217 l 713 188 l 719 -85 l 1036 -60 l 1069 217 m 550 232 q 338 -82 363 -28 q 327 -93 332 -93 q 317 -89 322 -93 l 256 -47 q 293 1 281 -21 q 306 50 306 22 l 306 500 q 129 474 168 483 l 75 518 l 299 543 l 329 596 l 385 550 q 393 539 393 543 q 388 529 393 535 q 357 468 357 504 l 357 42 l 533 244 l 550 232 z "},"佩":{"ha":1389,"x_min":51,"x_max":1300,"o":"m 457 947 q 458 942 458 944 q 454 936 458 939 q 391 849 429 919 q 338 754 353 778 l 338 -21 q 332 -185 338 -154 q 318 -215 326 -215 q 311 -207 315 -215 l 263 -100 q 283 -25 279 -65 q 288 110 288 15 l 288 676 q 64 424 196 542 l 51 439 q 302 787 219 631 q 378 1039 385 943 l 390 1047 l 457 947 m 1285 203 q 1293 -39 1285 64 l 1300 -140 q 1293 -153 1300 -153 q 1199 -99 1274 -153 q 1077 58 1124 -44 q 1014 315 1031 161 q 1001 703 997 468 l 794 668 l 794 510 l 878 525 l 913 565 l 964 521 q 971 512 971 515 q 965 504 971 508 q 943 432 944 493 q 923 155 938 219 q 899 90 908 90 q 890 97 896 90 q 794 221 833 178 l 794 21 q 791 -160 794 -136 q 782 -183 788 -183 q 771 -171 776 -183 l 724 -76 q 747 71 747 -36 l 747 464 l 658 450 l 658 265 q 643 108 658 108 q 638 114 640 108 l 599 186 q 617 288 617 231 l 617 431 q 603 551 617 503 l 622 564 l 651 486 l 747 503 l 747 661 q 615 632 653 646 l 561 668 q 493 88 554 260 q 353 -172 432 -83 l 338 -149 q 435 50 386 -75 q 499 367 485 175 q 513 697 513 558 q 499 975 513 835 l 518 978 l 561 871 l 994 929 l 1035 990 l 1107 942 q 1111 935 1111 939 q 1107 929 1111 932 q 1075 890 1086 914 q 1062 839 1064 867 q 1056 725 1060 811 q 1053 565 1053 639 q 1097 156 1053 299 q 1238 -49 1142 13 l 1264 203 l 1285 203 m 1007 883 l 564 832 q 561 671 564 786 q 946 757 896 713 l 1001 715 q 1007 883 1004 825 m 897 488 l 794 471 l 794 251 l 871 194 q 897 488 889 217 z "},"坡":{"ha":1389,"x_min":81,"x_max":1315,"o":"m 1315 -131 l 1093 -167 l 879 76 q 736 -74 821 -8 q 478 -232 651 -139 l 465 -215 q 847 113 721 -74 q 650 311 675 310 q 544 6 618 129 q 332 -232 469 -117 l 317 -217 q 540 89 463 -83 q 617 574 617 261 q 593 804 617 715 l 613 813 l 667 699 l 828 726 l 828 869 q 792 1064 828 1006 l 806 1078 l 896 1004 q 901 993 901 1000 q 899 983 901 986 q 884 933 892 971 q 876 858 876 896 l 876 735 l 1072 769 l 1114 828 l 1179 768 q 1185 758 1185 763 q 1182 753 1185 754 q 1124 697 1151 732 q 1035 563 1097 661 l 1015 575 l 1074 722 l 876 689 l 876 460 l 985 481 l 1015 524 l 1079 469 q 1083 463 1083 467 q 1079 456 1083 458 q 1025 375 1039 418 q 906 114 965 213 q 1117 -67 1047 -29 q 1315 -114 1188 -104 l 1315 -131 m 828 450 l 828 681 l 672 656 q 664 419 672 524 l 828 450 m 981 436 q 699 372 713 382 l 663 397 q 653 325 661 378 l 719 331 q 869 150 728 293 q 981 436 944 272 m 576 578 l 393 543 l 393 196 l 544 264 l 551 247 q 168 22 189 44 l 81 56 l 343 174 l 343 533 q 164 488 228 511 l 104 531 l 343 572 l 343 782 q 332 928 343 879 q 297 1031 321 978 l 313 1044 l 407 967 q 413 958 413 963 q 411 949 413 953 q 397 895 400 928 q 393 781 393 863 l 393 583 q 528 629 479 603 l 576 588 q 581 581 581 583 q 576 578 581 579 z "},"奇":{"ha":1389,"x_min":115,"x_max":1265,"o":"m 1257 528 q 1265 518 1265 522 q 1256 513 1265 514 l 919 483 l 975 431 q 979 422 979 426 q 975 410 979 417 q 963 289 963 386 l 963 -92 q 951 -201 963 -160 q 926 -243 939 -243 q 917 -237 922 -243 q 740 -57 825 -129 l 751 -39 l 900 -133 q 913 -54 913 -110 l 913 300 q 890 481 913 419 q 183 399 225 424 l 115 454 l 319 471 l 313 478 q 599 776 536 619 q 318 739 365 754 l 253 792 l 614 819 q 643 1003 643 919 q 636 1064 643 1040 l 649 1072 l 721 997 q 726 989 726 992 q 721 981 726 986 q 688 901 703 963 q 665 824 672 840 q 1019 883 943 846 l 1083 836 q 1093 824 1093 829 q 1081 818 1093 819 l 650 781 q 638 747 646 767 l 922 643 q 936 572 936 606 q 931 539 936 539 q 919 544 926 539 q 626 725 779 643 q 347 474 550 581 q 1188 576 1133 543 l 1257 528 m 717 381 l 776 335 q 782 327 782 331 q 778 319 782 324 q 750 267 754 296 l 733 136 l 760 107 q 765 97 765 100 q 756 92 765 93 l 457 65 q 460 -11 460 8 q 447 -67 460 -67 q 436 -58 442 -67 l 386 19 q 411 113 414 51 l 407 215 q 389 374 404 297 l 406 381 l 449 297 l 688 332 l 717 381 m 700 290 l 450 257 l 456 104 l 688 133 l 700 290 z "},"迁":{"ha":1389,"x_min":85,"x_max":1313,"o":"m 1199 564 q 1208 551 1208 556 q 1194 546 1208 547 l 863 511 l 863 258 q 859 31 863 81 q 846 -18 856 -18 q 836 -10 842 -18 l 785 76 q 811 288 811 107 l 811 506 q 579 468 644 488 l 518 517 l 811 551 l 811 818 q 544 761 710 790 l 538 785 q 1017 968 1008 907 l 1031 971 l 1108 913 q 1118 901 1118 904 q 1104 896 1118 899 q 863 832 1043 886 l 863 558 q 1146 610 1126 589 l 1199 564 m 426 825 q 428 783 428 807 q 424 734 428 758 q 415 710 419 710 q 403 718 410 710 l 218 921 l 235 939 l 426 825 m 1313 -87 l 1099 -176 l 657 -56 q 283 14 403 14 q 156 -11 210 14 l 97 43 q 210 60 146 60 q 335 51 274 60 q 369 178 369 129 q 328 300 369 226 l 383 493 q 147 442 189 458 l 85 489 l 371 528 l 407 582 l 471 536 q 479 524 479 529 q 472 514 479 519 q 363 303 431 475 q 419 192 419 235 q 367 49 419 149 q 623 -6 439 39 q 915 -69 807 -50 q 1097 -89 1022 -89 q 1310 -69 1172 -89 l 1313 -87 z "},"青":{"ha":1389,"x_min":121,"x_max":1279,"o":"m 1272 594 q 1279 585 1279 588 q 1269 581 1279 582 q 178 469 417 506 l 121 515 l 669 565 l 669 686 q 421 651 446 661 l 358 696 l 669 725 l 669 833 q 338 793 367 803 l 279 839 l 669 875 q 636 1075 669 1026 l 647 1089 l 742 1015 q 747 1008 747 1011 q 744 1001 747 1004 q 718 879 718 963 q 1067 940 971 904 l 1122 893 q 1129 883 1129 886 q 1119 878 1129 879 l 718 838 l 718 729 q 994 782 907 750 l 1042 742 q 1051 731 1051 733 q 1042 726 1051 728 l 718 692 l 718 569 q 1219 642 1142 608 l 1272 594 m 947 496 l 1006 444 q 1010 438 1010 442 q 1006 432 1010 435 q 978 397 985 415 q 972 338 972 379 l 972 -74 q 960 -211 972 -175 q 942 -247 947 -247 q 931 -242 936 -247 q 751 -60 856 -156 l 764 -42 l 910 -140 q 922 -18 922 -125 l 922 406 l 486 357 l 486 242 q 808 297 747 274 l 853 261 q 858 253 858 257 q 849 249 858 250 l 486 207 l 486 85 q 826 143 794 122 l 872 108 q 878 99 878 103 q 869 94 878 96 l 486 47 l 486 -65 q 482 -220 486 -200 q 472 -240 478 -240 q 465 -233 469 -240 l 404 -137 q 431 -83 424 -115 q 438 14 438 -51 l 438 299 q 424 456 438 375 l 447 463 l 479 399 l 919 449 l 947 496 z "},"庆":{"ha":1389,"x_min":69,"x_max":1264,"o":"m 801 954 q 782 884 794 913 q 764 856 769 856 q 753 865 758 857 l 653 1026 l 669 1049 l 801 954 m 1264 -153 l 1031 -161 l 739 354 q 279 -217 656 -12 l 260 -193 q 688 396 625 33 q 481 363 525 382 l 417 418 l 694 442 q 714 647 714 571 q 700 768 714 724 l 393 743 q 293 103 363 292 q 90 -208 224 -85 l 69 -190 q 229 70 175 -78 q 304 420 283 218 q 325 732 325 622 q 310 919 325 842 l 338 926 l 396 796 q 1078 879 1015 836 l 1147 821 q 1157 810 1157 813 q 1144 806 1157 807 l 732 771 l 797 699 q 803 688 803 693 q 797 676 803 683 q 754 447 778 647 q 1063 506 976 469 l 1126 453 q 1136 442 1136 444 q 1124 438 1136 439 l 751 401 l 974 58 q 1106 -81 1040 -47 q 1264 -126 1172 -115 l 1264 -153 z "},"热":{"ha":1389,"x_min":143,"x_max":1242,"o":"m 1225 407 q 1233 215 1224 292 q 1242 133 1242 139 q 1235 126 1242 126 q 1146 160 1210 126 q 1043 245 1082 194 q 987 365 1004 296 q 969 514 969 435 q 978 675 969 593 l 832 649 q 793 453 817 542 l 917 376 q 916 309 919 351 q 901 267 913 267 q 890 275 896 267 q 779 406 850 336 q 572 107 726 240 l 557 124 q 740 443 693 275 q 667 510 694 486 l 676 525 l 750 479 q 781 639 764 543 q 707 617 735 631 l 639 657 l 786 683 q 801 901 801 799 q 781 1039 801 1003 l 797 1051 l 882 972 q 892 960 892 964 q 889 953 892 956 q 859 859 867 931 q 839 693 851 788 l 974 718 l 1008 767 l 1065 714 q 1071 705 1071 708 q 1059 693 1071 701 q 1040 667 1047 685 q 1025 604 1032 650 q 1018 510 1018 558 q 1060 316 1018 396 q 1181 206 1101 236 l 1206 410 l 1225 407 m 693 707 l 500 682 l 500 529 l 654 586 l 663 565 l 500 492 l 500 329 q 490 175 500 211 q 474 139 479 139 q 464 144 469 139 q 294 294 407 204 l 304 313 l 439 233 q 450 338 450 267 l 450 469 q 215 358 232 372 l 143 400 l 450 511 l 450 675 q 249 638 294 656 l 185 689 l 450 718 l 450 782 q 441 941 450 894 q 406 1039 432 988 l 418 1050 l 515 968 q 521 960 521 964 q 513 944 521 956 q 503 906 506 932 q 500 782 500 881 l 500 725 q 647 764 576 738 l 693 725 q 704 713 704 717 q 693 707 704 708 m 1183 -78 q 1173 -141 1183 -96 q 1156 -186 1163 -186 q 1143 -175 1150 -186 l 981 101 l 996 117 l 1183 -78 m 358 107 q 310 -142 350 -68 q 258 -215 269 -215 q 251 -206 254 -215 l 225 -121 q 335 108 307 -62 l 358 107 m 872 -90 q 847 -156 864 -125 q 825 -186 831 -186 q 815 -172 819 -186 l 740 94 l 760 103 l 872 -90 m 625 -106 q 590 -160 614 -131 q 559 -189 565 -189 q 551 -172 553 -189 l 526 81 l 547 86 l 625 -106 z "},"日":{"ha":1389,"x_min":375,"x_max":1024,"o":"m 956 931 l 1013 879 q 1024 864 1024 869 q 1009 842 1024 858 q 989 809 994 825 q 982 754 983 793 l 957 250 q 915 -107 940 -107 q 900 -86 910 -107 l 853 11 l 463 -32 q 457 -107 463 -87 q 447 -126 451 -126 q 431 -106 442 -126 l 382 -11 q 408 214 413 15 l 400 669 q 375 924 400 811 l 399 932 l 447 814 l 906 868 l 956 931 m 925 818 l 453 765 l 457 447 q 799 511 719 479 l 847 468 q 854 456 854 461 q 840 450 854 451 l 457 401 l 463 17 q 804 71 788 54 l 863 26 q 904 250 897 57 l 925 818 z "},"萨":{"ha":1389,"x_min":178,"x_max":1244,"o":"m 1240 374 q 1244 365 1244 369 q 1236 361 1244 361 l 675 318 q 400 -224 640 -50 l 386 -210 q 583 83 538 -65 q 629 382 629 231 q 625 474 629 429 l 644 478 l 676 357 l 804 367 l 754 546 q 669 532 688 539 l 614 576 l 892 600 l 828 758 q 799 689 814 722 l 778 696 q 814 831 790 740 l 604 814 l 608 757 q 611 696 611 717 q 606 675 611 675 q 597 681 601 675 l 553 738 q 560 773 560 750 q 558 810 560 796 q 240 772 299 788 l 178 822 l 556 850 l 551 894 q 514 1017 547 950 l 524 1024 l 604 974 q 610 966 610 969 q 607 957 610 963 q 600 883 597 943 l 601 854 l 824 871 q 846 994 846 960 q 842 1053 846 1029 l 860 1058 l 917 985 q 922 974 922 978 q 915 967 922 971 q 869 874 899 957 q 1153 917 1058 890 l 1197 874 q 1203 865 1203 868 q 1194 861 1203 863 l 856 833 q 838 785 850 817 l 943 676 q 914 603 928 622 q 1156 642 1115 619 l 1207 601 q 1213 594 1213 597 q 1203 590 1213 592 l 1003 571 l 1036 536 q 1042 527 1042 531 q 1035 519 1042 524 q 965 381 1011 501 q 1193 422 1139 399 l 1240 374 m 975 568 l 778 549 l 846 449 q 815 368 829 392 l 938 378 q 975 568 982 533 m 519 660 l 569 613 q 575 603 575 607 q 569 597 575 600 q 531 555 551 586 q 465 432 511 524 q 543 240 543 335 q 519 147 543 188 q 485 106 496 106 q 475 111 481 106 q 360 228 439 154 l 368 239 l 468 181 q 493 263 493 211 q 431 426 493 347 l 489 572 l 328 556 l 328 44 q 324 -162 328 -118 q 310 -207 319 -207 q 304 -201 307 -207 l 253 -93 q 283 81 283 -42 l 283 464 q 272 683 283 603 l 289 688 l 328 596 l 486 615 l 519 660 z "},"塞":{"ha":1389,"x_min":72,"x_max":1301,"o":"m 751 989 q 715 903 732 903 q 704 914 711 903 l 601 1069 l 614 1083 l 751 989 m 1301 78 l 1300 56 l 1078 35 l 817 367 l 561 350 q 85 -65 358 93 l 72 -50 q 482 344 349 150 q 224 310 335 332 l 160 363 l 546 390 l 542 494 q 399 472 463 486 l 340 519 l 540 536 l 538 646 q 367 621 424 633 l 310 664 l 536 686 q 510 796 532 753 l 525 803 l 594 753 q 601 743 601 749 q 597 726 601 738 q 588 690 592 715 l 790 710 q 792 783 792 740 q 782 858 792 825 l 299 817 q 272 680 296 729 q 240 631 247 631 q 225 646 232 631 l 194 714 q 246 800 229 746 q 263 950 263 854 l 288 950 q 299 857 297 894 l 1094 928 l 1131 972 l 1190 913 q 1196 903 1196 907 q 1176 885 1196 899 q 1129 842 1156 871 q 1044 735 1103 814 l 1024 744 l 1085 885 l 803 860 l 860 803 q 867 790 867 796 q 863 776 867 785 q 843 714 853 756 q 953 742 917 724 l 1001 706 q 1010 694 1010 699 q 996 689 1010 690 l 838 674 l 829 561 q 975 596 940 578 l 1024 553 q 1029 544 1029 547 q 1018 539 1029 540 l 828 521 l 819 410 q 1151 458 1063 426 l 1211 411 q 1221 400 1221 404 q 1203 394 1221 396 l 850 369 q 1077 147 993 208 q 1301 78 1161 86 m 788 669 l 586 650 l 589 540 l 781 557 l 788 669 m 779 517 l 589 499 l 592 393 l 772 406 l 779 517 m 1108 -86 q 1115 -95 1115 -92 q 1100 -100 1115 -99 q 497 -135 626 -125 q 299 -161 367 -146 l 235 -110 l 656 -83 l 656 97 q 453 67 510 83 l 401 111 l 656 135 q 631 315 656 285 l 642 329 l 718 269 q 728 256 728 261 q 723 244 728 250 q 713 207 718 238 q 706 139 707 176 q 864 176 808 151 l 924 133 q 931 125 931 128 q 921 121 931 122 l 706 101 l 706 -81 q 1042 -36 986 -62 l 1108 -86 z "},"沙":{"ha":1389,"x_min":151,"x_max":1281,"o":"m 847 1049 l 924 983 q 929 972 929 978 q 926 961 929 967 q 908 878 908 929 l 908 492 q 905 290 908 335 q 895 244 901 244 q 879 260 889 244 l 821 357 q 858 554 858 400 l 858 881 q 833 1038 858 967 l 847 1049 m 488 835 q 467 733 483 733 q 454 743 463 733 l 285 935 l 294 949 l 488 835 m 710 746 l 771 672 q 776 662 776 667 q 771 651 776 657 q 731 589 753 633 q 632 411 693 513 q 515 239 571 310 l 496 251 q 697 739 706 590 l 710 746 m 1279 558 q 1281 514 1281 536 q 1269 444 1281 444 q 1258 453 1265 444 q 1031 706 1147 597 l 1044 718 l 1279 558 m 364 540 q 360 475 365 507 q 350 443 356 443 q 336 451 344 443 l 171 613 l 181 628 l 364 540 m 531 590 l 294 -81 q 286 -92 290 -92 q 276 -83 282 -92 q 151 83 215 6 l 164 97 l 267 15 l 510 601 l 531 590 m 1143 425 q 1147 415 1147 419 q 1138 401 1147 410 q 1068 321 1103 371 q 738 -20 929 124 q 336 -222 546 -164 l 331 -197 q 645 -35 507 -131 q 874 160 783 61 q 1009 335 965 260 q 1065 444 1053 410 q 1074 513 1076 478 l 1089 517 l 1143 425 z "},"杉":{"ha":1389,"x_min":93,"x_max":1211,"o":"m 688 692 q 696 682 696 686 q 686 676 696 678 l 482 649 l 482 558 l 651 469 q 660 410 660 444 q 653 376 660 376 q 638 385 647 376 l 482 526 l 482 54 q 480 -148 482 -97 q 467 -199 478 -199 q 457 -189 463 -199 l 403 -99 q 431 82 431 -46 l 431 539 q 108 64 297 258 l 93 81 q 413 639 317 356 q 201 589 306 622 l 136 639 l 431 681 l 431 850 q 392 1043 431 956 l 403 1054 l 500 972 q 506 963 506 967 q 503 951 506 958 q 488 890 494 932 q 482 818 482 849 l 482 689 q 638 731 596 711 l 688 692 m 1089 939 q 1090 932 1090 936 q 1082 921 1090 928 q 1047 882 1056 899 q 900 690 988 788 q 722 525 813 592 l 708 539 q 947 828 876 714 q 1018 1040 1017 943 l 1038 1044 l 1089 939 m 1110 608 q 1113 598 1113 603 q 1106 590 1113 593 q 1058 549 1082 579 q 856 324 933 394 q 671 178 778 253 l 657 196 q 1051 696 1033 513 l 1072 704 l 1110 608 m 1210 335 q 1211 326 1211 331 q 1204 318 1211 321 q 1158 278 1179 307 q 556 -225 915 -50 l 547 -203 q 962 122 793 -62 q 1154 435 1131 307 l 1171 440 l 1210 335 z "},"山":{"ha":1389,"x_min":265,"x_max":1171,"o":"m 1083 636 l 1164 560 q 1171 547 1171 553 q 1165 531 1171 540 q 1136 436 1143 496 l 1096 79 q 1049 -122 1072 -122 q 1038 -103 1043 -122 l 1014 -21 l 479 -65 q 401 -77 421 -71 q 369 -98 381 -83 q 352 -112 357 -112 q 340 -107 347 -112 l 285 -60 q 328 43 332 -28 l 306 417 q 265 582 299 529 l 276 594 l 356 539 q 368 526 368 531 q 365 517 368 522 q 357 422 353 489 l 381 -26 l 678 -4 l 678 804 q 642 1039 678 968 l 657 1049 l 744 971 q 754 956 754 963 q 749 935 754 949 q 737 885 743 921 q 731 818 731 850 l 731 0 l 1029 21 q 1049 118 1042 56 l 1082 433 q 1086 506 1086 469 q 1069 625 1086 583 l 1083 636 z "},"上":{"ha":1389,"x_min":104,"x_max":1275,"o":"m 1265 -61 q 1275 -74 1275 -69 q 1260 -79 1275 -78 q 178 -144 228 -125 l 104 -78 l 646 -56 l 646 682 q 615 1050 646 963 l 631 1063 l 731 958 q 738 947 738 951 q 732 933 738 942 q 704 679 704 890 l 704 524 q 1046 590 947 549 l 1110 535 q 1117 526 1117 529 q 1108 521 1117 522 l 704 476 l 704 -54 q 1193 1 1119 -37 l 1265 -61 z "},"深":{"ha":1389,"x_min":115,"x_max":1292,"o":"m 1099 983 l 1163 919 q 1169 908 1169 913 q 1163 900 1169 904 q 1103 853 1132 883 q 1007 739 1074 824 l 989 747 l 1057 894 l 550 839 q 526 708 547 761 q 496 654 506 654 q 486 668 490 654 l 461 744 q 505 836 490 772 q 517 975 519 900 l 539 976 q 551 881 551 933 l 1058 936 l 1099 983 m 374 874 q 378 817 378 844 q 368 765 378 765 q 356 774 364 765 l 188 943 l 197 960 l 374 874 m 726 724 q 732 710 732 715 q 724 700 732 706 q 656 622 706 690 q 460 408 581 518 l 444 421 q 613 644 558 554 q 663 788 667 733 l 678 794 l 726 724 m 1075 626 q 1074 554 1076 594 q 1064 514 1071 514 q 1050 525 1057 514 q 843 764 958 658 l 856 779 l 1075 626 m 296 574 q 306 493 306 518 q 297 468 306 468 q 288 474 294 468 l 121 626 l 129 644 l 296 574 m 1292 -29 l 1061 -49 l 808 335 l 808 -32 q 804 -190 808 -165 q 792 -215 800 -215 q 783 -206 789 -215 l 729 -104 q 760 67 760 -71 l 760 308 q 338 -114 593 47 l 324 -96 q 704 328 565 82 q 504 293 549 308 l 440 344 l 760 376 q 736 608 760 565 l 749 618 l 828 550 q 833 541 833 546 q 829 526 833 536 q 808 381 810 482 q 1092 435 1035 406 l 1142 392 q 1149 381 1149 385 q 1139 376 1149 378 l 838 343 l 933 211 q 1046 74 1003 115 q 1140 16 1089 33 q 1292 -11 1192 -1 l 1292 -29 m 433 586 l 264 -101 q 258 -112 261 -112 q 249 -104 254 -112 q 115 61 196 -29 l 128 74 l 229 1 l 411 592 l 433 586 z "},"盛":{"ha":1389,"x_min":143,"x_max":1239,"o":"m 1207 431 q 1209 223 1204 294 q 1214 147 1214 151 q 1208 142 1214 142 q 1135 175 1197 142 q 992 279 1074 208 q 856 438 911 350 q 635 274 767 353 l 617 293 q 833 479 751 394 q 736 744 769 614 l 393 708 q 374 558 386 635 l 583 586 l 618 636 l 675 589 q 681 581 681 585 q 675 575 681 578 q 632 469 644 557 q 594 313 617 367 q 558 258 571 258 q 549 267 554 258 q 442 389 507 321 l 456 406 l 546 343 q 590 542 568 390 l 365 513 q 290 268 338 363 q 164 94 243 174 l 143 108 q 283 376 231 203 q 335 739 335 550 q 325 886 335 819 l 344 890 l 399 757 l 726 792 q 686 967 700 921 q 650 1049 672 1013 l 663 1064 l 763 1003 q 771 993 771 997 q 766 981 771 989 q 761 929 761 972 q 778 797 761 886 q 1078 851 1040 825 l 1142 800 q 1147 792 1147 796 q 1138 788 1147 789 l 788 750 q 867 517 818 619 q 976 706 976 640 l 1000 710 l 1038 618 q 1039 610 1039 614 q 1035 604 1039 606 q 890 471 1015 597 q 1013 328 936 394 q 1157 233 1089 261 l 1188 431 l 1207 431 m 992 943 q 988 887 992 917 q 978 857 983 857 q 967 864 972 857 l 849 994 l 858 1010 l 992 943 m 1235 -96 q 1239 -103 1239 -100 q 1231 -107 1239 -107 q 206 -162 425 -128 l 149 -108 l 386 -97 l 381 119 q 356 282 379 218 l 372 290 l 424 218 l 944 258 l 961 288 l 1013 249 q 1018 240 1018 243 q 1015 233 1018 236 q 996 178 999 217 l 975 -68 q 1178 -39 1115 -60 l 1235 -96 m 944 215 l 774 203 l 801 171 q 807 162 807 165 q 803 153 807 158 q 786 74 793 143 l 772 -78 l 922 -71 l 944 215 m 739 200 l 594 189 l 628 156 q 632 148 632 151 q 629 142 632 144 q 617 79 617 129 l 617 -86 l 726 -81 l 738 72 q 742 157 742 129 q 739 200 742 185 m 569 -87 l 569 53 q 563 188 569 135 l 432 178 l 436 -94 l 569 -87 z "},"圣":{"ha":1389,"x_min":94,"x_max":1294,"o":"m 1294 310 l 1067 269 l 681 594 q 108 199 396 329 l 94 225 q 640 626 383 374 q 419 778 475 774 l 422 789 l 539 796 q 674 660 543 768 q 868 911 803 794 q 382 863 464 888 l 306 924 l 882 968 l 928 1025 l 999 957 q 1006 945 1006 950 q 994 935 1006 940 q 929 874 961 918 q 714 626 842 751 l 794 560 q 988 416 911 463 q 1131 354 1064 369 q 1293 339 1197 339 l 1294 310 m 1158 -86 q 1165 -97 1165 -93 q 1149 -101 1165 -101 q 242 -154 363 -121 l 167 -96 l 651 -72 l 651 169 q 411 140 510 161 l 351 196 l 651 214 q 625 490 651 421 l 638 501 l 725 422 q 735 408 735 414 q 726 394 735 401 q 709 335 717 388 q 701 218 701 282 q 932 258 842 231 l 988 206 q 996 194 996 199 q 983 189 996 190 l 701 172 l 701 -71 q 1096 -29 1011 -54 l 1158 -86 z "},"什":{"ha":1389,"x_min":90,"x_max":1279,"o":"m 1271 581 q 1279 569 1279 574 q 1267 564 1279 565 l 921 529 l 921 38 q 917 -188 921 -154 q 907 -222 913 -222 q 896 -211 901 -222 l 836 -94 q 865 99 865 -49 l 865 524 q 571 476 649 496 l 503 531 l 865 568 l 865 739 q 825 1054 865 967 l 838 1065 l 943 972 q 950 960 950 967 q 944 947 950 954 q 921 740 921 913 l 921 575 q 1213 632 1151 603 l 1271 581 m 594 943 q 599 930 599 935 q 590 918 599 925 q 508 822 558 893 q 443 733 458 751 l 443 18 q 437 -199 443 -162 q 424 -235 431 -235 q 413 -225 418 -235 l 360 -126 q 389 36 389 -79 l 389 665 q 100 401 288 546 l 90 421 q 399 768 281 590 q 514 1040 518 946 l 533 1046 l 594 943 z "},"士":{"ha":1389,"x_min":129,"x_max":1240,"o":"m 1231 508 q 1240 497 1240 501 q 1225 492 1240 493 l 732 443 l 732 -25 q 1051 26 989 -4 l 1117 -25 q 1126 -36 1126 -32 q 1111 -42 1126 -40 q 351 -108 471 -82 l 294 -57 l 674 -29 l 674 438 q 190 375 290 401 l 129 428 l 674 482 l 674 825 q 639 1043 674 949 l 657 1056 l 767 949 q 772 938 772 943 q 760 921 772 933 q 740 874 747 908 q 732 776 732 839 l 732 488 q 1158 560 1093 524 l 1231 508 z "},"世":{"ha":1389,"x_min":104,"x_max":1282,"o":"m 1271 551 q 1282 539 1282 543 q 1265 533 1282 535 l 975 514 l 938 229 l 981 186 q 990 172 990 176 q 976 168 990 168 l 681 156 q 678 81 681 114 q 669 47 676 47 q 657 57 663 47 l 604 150 q 627 214 625 183 q 629 281 629 244 l 626 493 l 415 479 l 415 -82 q 861 -68 729 -74 q 1044 -55 993 -62 q 1117 -28 1096 -47 l 1199 -86 q 1208 -99 1208 -93 q 1192 -106 1208 -106 l 472 -126 q 426 -134 439 -128 q 397 -174 413 -140 q 389 -182 394 -182 q 376 -176 383 -182 l 313 -129 q 356 -75 347 -99 q 364 -3 364 -51 l 364 475 q 172 453 210 465 l 104 510 l 364 525 l 364 665 q 335 899 364 846 l 349 914 l 426 840 q 433 828 433 833 q 426 815 433 824 q 415 681 415 801 l 415 528 l 626 540 l 624 794 q 593 971 622 913 l 608 985 l 682 924 q 689 913 689 919 q 685 900 689 907 q 675 818 675 876 l 678 543 l 926 557 l 950 771 q 958 890 958 843 q 944 986 958 938 l 961 993 l 1036 915 q 1043 903 1043 908 q 1034 889 1043 899 q 1020 859 1025 879 q 1003 740 1015 839 l 979 560 q 1197 604 1161 572 l 1271 551 m 921 511 l 678 496 l 681 200 l 886 211 l 921 511 z "},"市":{"ha":1389,"x_min":125,"x_max":1250,"o":"m 743 954 q 723 878 740 924 q 699 832 706 832 q 688 844 693 832 l 590 1064 l 600 1074 l 743 954 m 1243 807 q 1250 798 1250 801 q 1239 793 1250 794 l 668 740 l 726 683 q 735 670 735 675 q 728 658 735 665 q 717 631 721 651 q 713 554 714 610 l 979 586 l 1015 642 l 1081 590 q 1089 579 1089 585 q 1074 565 1089 574 q 1052 530 1060 556 q 1039 442 1044 504 q 993 97 1014 171 q 963 24 972 24 q 950 35 958 24 q 792 224 881 133 l 804 243 l 940 146 q 989 539 972 236 l 713 508 l 713 -21 q 704 -195 713 -156 q 692 -235 696 -235 q 682 -225 688 -235 l 628 -114 q 650 -51 640 -94 q 660 31 660 -7 l 660 501 l 415 475 l 419 196 q 407 35 422 35 q 399 44 404 35 l 343 131 q 361 181 354 150 q 368 235 368 213 l 365 465 q 350 610 365 536 l 372 618 l 411 519 l 660 549 q 636 738 660 681 q 199 682 283 706 l 125 739 q 1175 860 1074 818 l 1243 807 z "},"首":{"ha":1389,"x_min":121,"x_max":1267,"o":"m 1258 725 q 1267 713 1267 717 q 1254 708 1267 710 l 679 665 l 708 631 q 713 620 713 625 q 704 607 713 615 q 644 496 683 588 l 907 529 l 944 589 l 1006 536 q 1014 524 1014 529 q 1006 513 1014 518 q 976 436 978 492 l 958 -51 q 938 -187 953 -187 q 929 -178 933 -187 l 881 -81 l 499 -117 q 495 -199 500 -168 q 485 -229 490 -229 q 475 -219 481 -229 l 421 -115 q 447 -17 449 -71 l 439 411 q 424 557 436 504 l 444 565 l 481 475 l 603 490 q 639 663 639 606 q 189 614 253 633 l 121 671 l 738 710 q 833 935 813 874 q 854 1058 854 997 l 871 1067 l 935 976 q 939 965 939 969 q 929 954 939 960 q 778 713 894 935 q 1204 772 1092 733 l 1258 725 m 926 486 l 486 432 l 489 289 q 819 350 796 332 l 864 314 q 871 304 871 308 q 860 299 871 300 l 490 246 l 494 111 q 821 169 779 147 l 869 135 q 879 125 879 129 q 867 119 879 121 l 494 71 l 497 -72 q 840 -28 792 -44 l 885 -69 q 911 50 907 -54 l 926 486 m 615 815 q 588 752 603 779 q 569 725 574 725 q 561 738 565 725 l 467 989 l 482 999 l 615 815 z "},"斯":{"ha":1389,"x_min":99,"x_max":1281,"o":"m 783 761 q 790 751 790 756 q 779 746 790 747 l 646 731 l 629 243 q 731 278 685 253 l 782 233 q 788 225 788 228 q 779 221 788 222 q 168 135 194 147 l 111 176 l 340 206 l 329 693 q 194 665 250 683 l 135 713 l 328 733 l 325 843 q 315 937 324 882 q 293 1025 306 992 l 307 1038 l 386 963 q 392 953 392 957 q 389 943 392 949 q 374 829 372 910 l 375 739 l 593 761 l 596 874 q 571 1050 599 969 l 583 1063 l 669 982 q 675 972 675 976 q 672 963 675 968 q 650 851 653 924 l 647 771 q 740 803 708 786 l 783 761 m 593 724 l 376 699 l 379 558 q 510 596 494 576 l 550 563 q 558 553 558 556 q 546 547 558 550 l 381 517 l 383 396 q 513 435 499 421 l 554 399 q 561 390 561 393 q 549 383 561 386 l 385 354 l 388 213 l 583 238 l 593 724 m 1271 549 q 1281 540 1281 543 q 1269 535 1281 536 l 1063 506 l 1063 -49 q 1058 -211 1063 -186 q 1047 -236 1054 -236 q 1039 -228 1043 -236 l 982 -129 q 1011 14 1011 -85 l 1011 499 l 874 479 q 798 60 860 211 q 578 -219 736 -90 l 565 -206 q 771 116 715 -51 q 826 618 826 283 q 806 897 826 818 l 824 904 l 878 785 q 1094 965 1094 908 l 1107 972 l 1172 907 q 1178 898 1178 901 q 1171 892 1178 894 q 881 753 1129 875 q 876 521 881 622 q 1203 592 1132 557 l 1271 549 m 428 67 q 429 59 429 64 q 415 46 429 54 q 379 19 400 38 q 108 -181 261 -92 l 99 -165 q 376 140 360 42 l 394 146 l 428 67 m 665 42 q 663 -23 667 6 q 655 -51 660 -51 q 643 -44 650 -51 l 497 115 l 507 129 l 665 42 z "},"苏":{"ha":1389,"x_min":164,"x_max":1243,"o":"m 1219 828 q 1225 820 1225 824 q 1215 815 1225 817 l 886 789 q 814 607 867 719 l 790 614 q 838 785 818 710 l 568 763 q 569 653 569 717 q 558 590 569 590 q 550 596 554 590 l 506 656 q 521 758 522 690 q 229 725 282 735 l 164 772 l 519 801 l 513 893 q 475 1025 508 965 l 488 1036 l 564 978 q 574 965 574 971 q 568 949 574 960 q 563 911 563 939 q 564 858 563 883 l 567 804 l 847 828 q 876 997 876 950 q 874 1072 876 1044 l 885 1078 l 956 992 q 961 981 961 985 q 956 974 961 978 q 900 832 936 960 q 1161 879 1063 847 l 1219 828 m 983 499 q 988 492 988 496 q 982 485 988 489 q 943 404 950 460 q 879 26 910 158 q 828 -152 849 -107 q 798 -210 807 -197 q 785 -222 789 -222 q 776 -214 781 -222 q 608 11 731 -124 l 621 25 l 776 -104 q 892 453 849 22 l 679 431 q 526 19 622 174 q 267 -254 431 -135 l 249 -239 q 490 37 403 -111 q 624 424 578 185 q 397 388 453 404 l 332 435 l 632 469 q 647 613 647 558 q 636 693 647 668 l 654 706 l 728 621 q 733 610 733 615 q 725 596 733 606 q 710 567 717 586 q 689 475 704 549 l 881 497 l 919 551 l 983 499 m 376 301 q 354 163 379 232 q 297 53 329 94 q 256 13 265 13 q 246 29 247 13 l 236 107 q 317 183 294 138 q 353 303 339 229 l 376 301 m 1243 131 q 1222 25 1238 25 q 1208 38 1217 25 q 982 282 1128 150 l 997 297 l 1243 131 z "},"宿":{"ha":1389,"x_min":111,"x_max":1246,"o":"m 794 971 q 774 899 786 925 q 756 874 763 874 q 744 882 749 874 l 644 1071 l 658 1083 l 794 971 m 1240 865 q 1246 855 1246 861 q 1236 846 1246 849 q 1079 690 1188 829 l 1063 699 l 1118 825 l 531 769 l 575 686 q 579 670 579 676 q 565 656 579 664 q 515 597 550 649 q 449 507 479 546 l 449 19 q 446 -177 449 -112 q 432 -242 443 -242 q 421 -231 426 -242 l 369 -129 q 393 -66 388 -100 q 399 33 399 -32 l 399 444 q 125 181 275 300 l 111 196 q 401 531 296 374 q 504 767 507 688 l 324 749 q 292 617 314 664 q 265 569 271 569 q 254 582 260 569 l 222 663 q 274 763 251 688 q 299 926 296 839 l 318 926 q 328 796 329 853 l 1122 876 l 1169 924 l 1240 865 m 1233 615 q 1242 604 1242 608 q 1228 599 1242 600 l 892 565 q 822 390 863 508 l 1039 419 l 1074 467 l 1126 419 q 1133 409 1133 414 q 1126 399 1133 404 q 1099 344 1100 381 l 1088 10 q 1069 -162 1082 -129 q 1051 -196 1057 -196 q 1042 -183 1046 -196 l 1007 -90 l 694 -124 q 689 -210 694 -187 q 679 -232 683 -232 q 669 -221 675 -232 l 621 -125 q 640 -39 642 -86 l 633 308 q 611 440 628 382 l 629 449 l 675 369 l 782 385 q 814 557 808 483 q 575 517 658 538 l 521 572 q 1175 661 1065 607 l 1233 615 m 1043 374 l 681 324 l 686 157 q 933 210 885 183 l 983 174 q 992 164 992 168 q 981 158 992 160 l 688 115 l 693 -81 q 963 -32 932 -58 l 1019 -72 q 1033 22 1031 -56 l 1043 374 z "},"索":{"ha":1389,"x_min":186,"x_max":1257,"o":"m 1251 704 q 1257 696 1257 700 q 1250 688 1257 692 q 1179 626 1215 671 q 1088 500 1143 581 l 1067 511 l 1146 671 l 711 629 l 721 606 q 724 599 724 603 q 710 590 724 594 q 626 532 672 575 l 514 426 l 763 453 q 886 601 875 544 l 899 603 l 928 515 q 931 503 931 508 q 924 497 931 499 q 870 473 906 494 q 740 388 835 451 l 517 236 l 933 275 l 817 372 l 829 386 l 1064 261 q 1068 195 1068 224 q 1064 167 1068 167 q 1053 174 1060 167 l 965 249 l 700 217 l 747 167 q 751 158 751 161 q 749 150 751 154 q 739 71 739 138 l 739 -62 q 728 -206 739 -169 q 708 -242 717 -242 q 699 -235 704 -242 q 514 -68 636 -169 l 524 -56 l 678 -131 q 689 -26 689 -97 l 689 93 q 674 214 689 153 q 382 163 428 182 q 372 161 376 161 q 365 164 368 161 l 318 210 q 499 265 438 232 q 728 422 560 299 q 515 385 565 394 q 452 369 465 375 q 433 363 439 363 q 421 368 426 363 l 378 410 q 456 436 418 419 q 513 471 493 453 q 564 522 532 489 q 616 579 596 554 q 644 624 636 604 l 296 590 q 253 472 283 526 q 214 417 224 417 q 208 422 210 417 l 186 500 q 278 729 260 558 l 303 728 q 300 631 304 681 l 689 667 l 689 811 q 432 775 490 792 l 374 821 l 689 847 q 685 997 689 958 q 664 1064 681 1035 l 674 1074 l 761 1007 q 767 999 767 1003 q 760 985 767 994 q 745 937 753 976 q 738 851 738 897 q 1001 897 911 868 l 1054 860 q 1064 849 1064 853 q 1053 844 1064 846 l 738 815 l 738 671 l 1144 710 l 1181 758 l 1251 704 m 531 72 l 532 67 q 516 54 532 60 q 435 6 500 49 q 200 -135 253 -114 l 189 -121 q 490 146 450 42 l 503 147 l 531 72 m 1133 7 q 1149 -101 1149 -57 q 1145 -107 1149 -107 q 1138 -103 1142 -107 q 829 114 1039 -15 l 839 129 l 1133 7 z "},"塔":{"ha":1389,"x_min":75,"x_max":1321,"o":"m 1242 825 q 1249 817 1249 819 q 1239 813 1249 814 l 976 782 l 933 604 l 907 610 l 933 776 l 703 750 q 693 589 707 589 q 682 597 688 589 l 640 653 q 657 744 657 679 q 515 714 568 731 l 446 758 l 654 785 l 647 904 q 633 981 646 938 q 607 1038 619 1024 l 619 1050 l 701 990 q 707 982 707 986 q 704 972 707 978 q 693 913 692 944 l 700 790 l 939 819 q 951 958 951 908 q 936 1049 951 1007 l 954 1057 l 1032 982 q 1039 972 1039 976 q 1032 960 1039 967 q 986 825 1015 943 q 1181 872 1140 846 l 1242 825 m 557 378 q 291 213 379 269 q 164 117 203 157 l 75 157 l 333 290 l 333 574 q 172 533 215 551 l 110 576 l 333 614 l 333 849 q 290 1036 333 969 l 303 1047 l 400 972 q 407 963 407 967 q 399 945 407 960 q 387 902 390 931 q 383 819 383 874 l 383 622 q 511 661 476 640 l 557 622 q 564 614 564 617 q 557 610 564 611 l 383 582 l 383 315 l 544 399 l 557 378 m 1321 218 l 1117 194 l 807 588 q 325 82 647 297 l 310 100 q 646 426 519 258 q 786 718 772 593 l 801 724 l 850 664 q 856 653 856 657 q 847 642 856 649 q 825 617 839 635 l 1065 340 q 1161 265 1115 282 q 1321 240 1207 247 l 1321 218 m 967 340 q 972 332 972 335 q 965 328 972 329 q 671 283 722 303 l 626 326 q 926 382 876 353 l 967 340 m 983 246 l 1039 197 q 1044 188 1044 192 q 1033 172 1044 183 q 1015 147 1022 161 q 1006 108 1008 133 l 985 -46 l 1019 -89 q 1025 -99 1025 -96 q 1018 -103 1025 -103 l 665 -129 q 660 -222 668 -222 q 650 -214 657 -222 l 594 -147 q 615 -46 619 -110 l 607 101 q 586 239 603 185 l 606 244 l 644 164 l 949 200 l 983 246 m 957 157 l 651 121 l 664 -89 l 935 -61 l 957 157 z "},"泰":{"ha":1389,"x_min":106,"x_max":1297,"o":"m 1297 142 l 1088 126 l 808 492 l 522 467 q 426 328 486 404 l 568 250 q 557 167 571 167 q 550 171 553 167 l 415 314 q 119 49 299 176 l 106 67 q 465 461 322 231 q 236 426 333 449 l 175 482 l 493 508 q 554 631 522 556 q 435 610 508 626 l 374 660 l 574 676 q 618 807 600 747 q 371 775 426 792 l 308 825 l 629 849 q 658 1029 658 960 q 653 1078 658 1058 l 668 1086 l 744 1004 q 747 997 747 1000 q 738 983 747 993 q 717 949 728 974 q 685 853 707 925 q 975 907 922 876 l 1043 851 q 1049 844 1049 847 q 1042 842 1049 842 l 671 811 q 625 681 647 739 q 932 732 882 701 l 990 679 q 994 674 994 676 q 986 669 994 671 l 607 635 q 549 513 583 578 q 1122 590 1065 554 l 1192 538 q 1196 531 1196 533 q 1186 526 1196 528 l 844 494 q 1005 313 939 379 q 1129 212 1071 246 q 1297 161 1188 178 l 1297 142 m 1013 17 q 1035 -97 1035 -64 q 1031 -104 1035 -104 q 1024 -101 1026 -104 q 715 126 929 -8 l 715 -68 q 689 -246 715 -246 q 679 -237 685 -246 q 528 -69 646 -190 l 538 -54 l 654 -125 q 667 13 667 -110 l 667 279 q 644 467 667 404 l 658 474 l 728 403 q 733 394 733 397 q 727 382 733 390 q 718 353 721 374 q 715 272 715 333 l 715 189 q 868 353 851 294 l 885 356 l 907 283 q 899 268 910 269 q 715 161 856 261 l 715 154 l 1013 17 m 636 133 q 349 -65 381 -25 l 257 -21 l 625 151 l 636 133 z "},"太":{"ha":1389,"x_min":101,"x_max":1296,"o":"m 1296 -118 l 1043 -129 l 681 535 l 671 533 q 578 253 640 386 l 760 147 q 763 103 763 125 q 758 59 763 82 q 749 36 754 36 q 740 42 744 36 l 568 233 q 117 -217 426 -43 l 101 -197 q 438 116 322 -50 q 610 526 553 282 q 260 481 272 490 l 189 538 l 621 576 q 646 756 636 661 q 656 911 656 851 q 636 1035 656 971 l 651 1051 l 747 965 q 751 958 751 963 q 747 949 751 954 q 713 803 726 919 q 681 582 700 686 q 1097 656 1013 614 l 1168 600 q 1174 592 1174 594 q 1167 588 1174 589 l 726 539 q 963 125 888 240 q 1103 -34 1039 10 q 1296 -94 1167 -78 l 1296 -118 z "},"坦":{"ha":1389,"x_min":69,"x_max":1299,"o":"m 601 192 q 156 -17 197 14 l 69 26 l 363 131 l 363 483 q 189 442 254 467 l 128 490 l 363 522 l 363 781 q 356 927 363 886 q 331 1006 349 968 l 343 1018 l 438 944 q 444 936 444 940 q 437 917 444 932 q 422 862 429 903 q 415 779 415 821 l 415 531 q 550 568 492 546 l 596 532 q 607 519 607 522 q 596 514 607 515 l 415 490 l 415 150 l 593 214 l 601 192 m 1113 908 l 1171 856 q 1179 844 1179 849 q 1163 829 1179 840 q 1140 796 1147 818 q 1126 708 1132 774 l 1086 264 l 1126 224 q 1135 212 1135 215 q 1126 207 1135 208 l 729 160 q 715 17 732 17 q 707 26 713 17 l 654 121 q 679 311 682 167 l 671 725 q 650 910 668 843 l 669 915 l 718 808 l 1072 854 l 1113 908 m 1076 803 l 724 760 l 726 513 q 956 560 882 528 l 992 517 q 1000 503 1000 507 q 990 499 1000 500 l 726 465 l 729 210 l 1029 250 l 1076 803 m 1289 -62 q 1299 -76 1299 -72 q 1288 -82 1299 -81 q 822 -113 1056 -93 q 510 -149 589 -133 l 436 -90 q 920 -60 678 -85 q 1233 -8 1163 -36 l 1289 -62 z "},"特":{"ha":1389,"x_min":86,"x_max":1297,"o":"m 1289 374 q 1297 363 1297 367 q 1282 358 1297 360 l 1017 338 l 1017 22 q 999 -194 1017 -147 q 972 -242 982 -242 q 961 -233 967 -242 q 778 -49 892 -144 l 790 -31 l 956 -133 q 967 51 967 -99 l 967 333 q 561 283 665 310 l 501 336 l 967 376 q 939 547 965 496 q 606 504 750 532 l 549 554 l 851 579 l 851 746 q 672 714 731 733 l 617 763 l 851 786 l 851 872 q 831 1067 851 1015 l 847 1078 l 922 1017 q 926 1008 926 1013 q 920 997 926 1003 q 907 949 914 990 q 900 876 900 908 l 900 792 q 1092 832 1046 814 l 1142 790 q 1150 780 1150 783 q 1139 775 1150 776 l 900 751 l 900 583 q 1200 633 1154 606 l 1250 589 q 1258 578 1258 582 q 1244 572 1258 574 l 964 550 l 1028 490 q 1035 480 1035 485 q 1029 469 1035 475 q 1017 381 1017 457 q 1229 421 1165 394 l 1289 374 m 618 654 q 625 645 625 649 q 615 640 625 642 l 458 617 l 458 421 l 567 485 l 581 464 l 458 379 l 458 57 q 444 -211 458 -211 q 438 -203 442 -211 l 382 -100 q 411 56 411 -47 l 411 346 q 174 165 228 218 l 86 201 l 411 393 l 411 610 l 257 588 q 157 356 211 454 l 140 367 q 254 821 254 663 q 253 854 254 839 l 267 860 l 326 781 q 332 769 332 775 q 325 758 332 764 q 292 694 308 744 q 272 631 276 643 l 411 653 l 411 865 q 379 1058 411 982 l 393 1069 l 485 994 q 489 988 489 992 q 481 976 489 983 q 466 935 474 968 q 458 865 458 903 l 458 663 q 564 696 510 674 l 618 654 m 788 147 q 774 92 786 131 q 755 53 761 53 q 746 63 749 53 l 681 257 l 693 264 l 788 147 z "},"天":{"ha":1389,"x_min":125,"x_max":1286,"o":"m 1286 -64 l 1047 -79 l 688 515 q 512 119 646 275 q 138 -142 378 -36 l 125 -122 q 480 158 368 15 q 633 532 592 301 q 268 475 358 500 l 193 535 l 642 582 q 663 779 663 721 q 661 863 663 838 q 386 815 442 835 l 317 869 q 996 976 914 932 l 1057 924 q 1061 916 1061 919 q 1053 911 1061 913 l 700 867 l 739 836 q 744 826 744 832 q 739 810 744 821 q 728 775 733 799 l 699 588 q 1143 658 1081 628 l 1203 607 q 1214 594 1214 599 q 1199 589 1214 590 l 719 540 q 956 170 875 285 q 1101 13 1038 56 q 1286 -40 1164 -31 l 1286 -64 z "},"通":{"ha":1389,"x_min":93,"x_max":1300,"o":"m 1064 767 l 1126 713 q 1132 706 1132 708 q 1122 698 1132 703 q 1104 674 1111 693 q 1097 606 1097 656 l 1100 182 q 1086 42 1100 106 q 1061 -22 1072 -22 q 1054 -17 1058 -22 q 908 140 1006 50 l 921 157 l 1033 90 q 1049 235 1049 139 l 1046 672 l 842 649 l 842 513 q 954 540 924 524 l 997 503 q 1003 494 1003 497 q 994 490 1003 492 l 842 472 l 842 339 q 969 365 932 350 l 1011 331 q 1017 323 1017 325 q 1010 319 1017 321 l 842 299 l 842 233 q 835 50 842 78 q 824 22 829 22 q 817 29 819 22 l 771 124 q 793 292 793 151 q 676 269 725 283 l 629 313 l 793 332 l 793 465 q 683 444 714 454 l 635 483 l 793 506 l 793 643 l 601 621 l 608 222 q 605 69 611 107 q 590 31 599 31 q 583 36 586 31 l 539 125 q 557 265 558 165 l 554 611 q 540 756 554 682 l 557 760 l 599 667 l 847 693 l 689 826 l 699 840 l 832 782 l 949 936 q 565 879 638 900 l 500 925 l 960 976 l 1014 1026 l 1071 965 q 1075 957 1075 961 q 1068 950 1075 953 q 992 899 1033 933 q 860 771 951 864 l 876 763 q 879 731 879 749 q 875 696 879 714 l 1032 713 l 1064 767 m 399 776 q 395 706 401 742 q 384 671 389 671 q 375 676 379 671 l 218 879 l 229 893 l 399 776 m 1300 -110 l 1071 -196 q 478 -17 601 -47 q 276 14 356 14 q 151 -4 196 14 l 100 46 q 229 56 175 56 q 325 51 283 56 q 361 188 361 125 q 308 317 361 251 l 365 488 q 147 439 174 451 l 93 486 l 369 528 l 411 579 l 468 522 q 472 515 472 518 q 467 510 472 513 q 418 460 443 499 q 344 319 393 422 q 399 244 385 271 q 414 186 414 218 q 357 47 414 154 q 468 24 418 38 q 890 -84 767 -58 q 1093 -110 1014 -110 q 1296 -90 1172 -110 l 1300 -110 z "},"图":{"ha":1389,"x_min":254,"x_max":1188,"o":"m 1121 1024 l 1183 965 q 1188 959 1188 963 q 1178 950 1188 956 q 1156 928 1168 944 q 1143 890 1143 911 l 1124 57 q 1110 -117 1121 -81 q 1094 -153 1099 -153 q 1086 -146 1090 -153 l 1029 -40 l 331 -74 q 323 -170 331 -157 q 312 -183 315 -183 q 306 -176 308 -183 l 254 -69 q 278 71 278 -24 l 278 814 q 272 903 278 836 q 260 1011 267 969 l 278 1019 l 326 915 l 1079 969 l 1121 1024 m 1089 924 l 650 894 l 679 849 q 682 840 682 843 q 678 832 682 838 q 603 714 661 814 l 796 753 l 829 797 l 888 751 q 892 745 892 749 q 886 738 892 742 q 831 679 849 708 q 719 532 775 592 l 794 475 q 943 387 886 406 q 1075 374 1000 368 l 1089 924 m 1075 349 l 892 318 q 696 506 785 425 q 360 264 583 386 l 347 282 q 664 535 543 397 q 542 628 592 596 q 392 479 485 560 l 378 493 q 548 706 483 596 q 617 892 613 817 l 331 872 l 331 -31 q 810 -7 649 -17 q 990 18 971 3 l 1044 -28 q 1069 132 1067 3 l 1075 349 m 769 290 q 772 233 772 258 q 765 208 772 208 q 758 214 764 208 q 590 365 690 286 l 599 376 l 769 290 m 793 119 q 799 68 799 94 q 789 18 799 18 q 782 24 788 18 q 554 224 697 119 l 563 238 l 793 119 m 786 713 q 610 672 635 682 l 588 688 q 551 640 578 671 l 596 640 q 685 558 603 624 q 786 713 747 635 z "},"瓦":{"ha":1389,"x_min":168,"x_max":1258,"o":"m 1213 201 q 1236 1 1224 79 l 1258 -124 q 1251 -135 1258 -133 q 1206 -141 1244 -137 q 1129 -144 1167 -144 q 945 -110 1010 -144 q 852 -30 881 -76 q 824 104 824 17 q 826 160 824 129 l 856 590 l 528 547 l 438 -10 l 782 143 l 790 125 q 490 -44 567 0 q 402 -101 414 -89 q 385 -112 390 -112 q 376 -107 381 -112 l 328 -50 q 379 -5 367 -32 q 404 99 392 22 l 519 833 q 239 788 343 811 l 168 843 q 822 911 611 885 q 1092 964 1033 938 l 1161 914 q 1169 904 1169 908 q 1160 899 1169 900 l 575 839 l 536 594 l 849 636 l 890 699 l 953 638 q 957 628 957 633 q 942 612 957 624 q 920 581 928 600 q 908 511 913 561 l 883 235 q 878 102 878 164 q 896 3 878 40 q 967 -57 914 -33 q 1076 -81 1021 -81 q 1176 -69 1132 -81 l 1189 200 l 1213 201 m 725 350 q 726 313 726 335 q 722 267 726 292 q 711 242 717 242 q 700 249 706 242 l 563 447 l 574 464 l 725 350 z "},"万":{"ha":1389,"x_min":122,"x_max":1246,"o":"m 1236 907 q 1246 894 1246 899 q 1232 888 1246 889 l 678 856 l 710 811 q 715 796 715 803 q 706 783 715 789 q 622 542 685 767 l 925 585 l 968 636 l 1024 579 q 1029 569 1029 574 q 1021 557 1029 564 q 974 463 990 533 q 878 131 924 251 q 795 -43 833 11 q 746 -97 757 -97 q 735 -86 740 -97 q 590 125 682 6 l 604 142 l 757 13 q 854 240 804 85 q 926 535 904 396 q 671 493 738 510 l 619 531 q 436 124 551 289 q 139 -156 321 -40 l 122 -133 q 521 399 418 93 q 629 853 624 706 q 264 818 322 835 l 190 875 q 1169 965 1013 910 l 1236 907 z "},"潍":{"ha":1389,"x_min":132,"x_max":1278,"o":"m 842 1047 l 917 946 q 921 936 921 942 q 917 928 921 931 q 880 852 903 918 q 835 731 857 786 l 835 -25 q 831 -189 835 -158 q 821 -219 826 -219 q 813 -214 815 -219 l 760 -121 q 782 -62 778 -96 q 786 46 786 -28 l 786 614 q 681 431 740 514 l 663 447 q 792 740 747 603 q 836 967 836 876 q 824 1038 836 1013 l 842 1047 m 732 344 q 488 257 511 269 q 459 244 464 244 q 451 247 454 244 l 407 293 q 469 333 444 304 q 542 446 494 361 q 610 569 590 531 q 478 531 508 543 q 444 519 449 519 q 436 522 439 519 l 397 563 q 468 626 444 572 l 546 803 q 599 990 599 922 q 597 1021 599 1004 l 615 1026 l 672 919 q 674 913 674 917 q 669 904 674 908 q 608 824 632 872 l 486 578 l 628 608 q 660 736 660 678 l 675 743 l 719 663 q 715 647 724 656 q 656 563 697 631 l 503 311 l 729 368 l 732 344 m 1082 831 q 1053 781 1069 800 q 1033 763 1038 763 q 1028 769 1029 763 l 972 972 l 988 982 l 1082 831 m 421 867 q 414 797 421 819 q 403 775 407 775 q 397 778 400 775 l 249 949 l 260 963 l 421 867 m 1274 10 q 1278 2 1278 6 q 1269 -3 1278 -1 q 886 -50 951 -31 l 838 -6 l 993 11 l 993 228 q 885 207 947 222 l 839 247 l 993 265 l 993 438 q 883 415 925 428 l 836 456 l 993 481 l 993 656 q 879 632 924 644 l 838 672 q 1182 743 1133 713 l 1226 703 q 1231 696 1231 699 q 1224 692 1231 693 l 1042 664 l 1042 488 q 1144 518 1108 499 l 1192 479 q 1196 473 1196 476 q 1189 468 1196 469 l 1042 446 l 1042 271 q 1167 301 1135 283 l 1204 265 q 1210 257 1210 260 q 1203 253 1210 254 l 1042 235 l 1042 17 q 1221 53 1189 33 l 1274 10 m 308 557 q 311 513 311 529 q 301 468 311 468 q 293 474 299 468 l 132 608 l 142 626 l 308 557 m 425 490 l 278 -115 q 272 -124 275 -124 q 265 -118 269 -124 q 144 11 214 -58 l 157 28 l 242 -22 l 401 500 l 425 490 m 713 158 q 439 -1 474 26 l 353 35 l 703 176 l 713 158 z "},"维":{"ha":1389,"x_min":131,"x_max":1254,"o":"m 582 329 q 325 252 386 272 q 251 224 264 232 q 235 217 239 217 q 228 219 231 217 l 181 276 q 247 310 225 293 q 333 415 269 328 q 433 563 396 501 q 225 501 313 535 q 216 500 221 500 q 208 503 211 500 l 156 558 q 231 606 203 575 q 320 756 258 636 q 403 934 382 875 q 424 1049 424 993 l 439 1054 l 499 968 q 501 958 501 963 q 497 950 501 954 q 436 860 479 932 l 264 572 l 457 600 q 521 747 513 693 l 539 751 l 576 672 q 567 655 581 664 q 513 590 554 646 l 294 297 l 579 351 l 582 329 m 1250 -4 q 1254 -12 1254 -8 q 1246 -15 1254 -15 q 763 -65 851 -40 l 722 -32 q 703 -211 722 -211 q 696 -207 699 -211 l 642 -97 q 672 76 672 -51 l 672 635 q 546 449 610 522 l 526 464 q 690 767 633 624 q 746 1003 746 911 q 743 1036 746 1021 l 758 1043 l 824 957 q 828 947 828 951 q 824 940 828 943 q 778 860 806 928 q 722 733 750 793 l 722 -14 l 910 0 l 910 206 q 779 183 832 197 l 729 229 l 910 247 l 910 435 q 781 413 821 424 l 726 458 l 910 478 l 910 661 q 772 636 821 647 l 726 682 q 1158 754 1094 718 l 1213 708 q 1217 702 1217 706 q 1210 697 1217 699 l 960 668 l 960 482 q 1117 517 1064 496 l 1167 475 q 1171 469 1171 472 q 1164 464 1171 465 l 960 440 l 960 253 q 1115 289 1064 267 l 1169 249 q 1175 242 1175 244 q 1168 238 1175 239 l 960 211 l 960 4 q 1199 42 1153 19 l 1250 -4 m 1019 874 q 996 813 1013 840 q 975 786 979 786 q 968 793 971 786 l 874 1018 l 889 1031 l 1019 874 m 604 147 q 351 35 432 74 q 217 -43 269 -4 l 131 7 l 593 169 l 604 147 z "},"温":{"ha":1389,"x_min":111,"x_max":1310,"o":"m 1051 993 l 1117 936 q 1121 930 1121 933 q 1109 918 1121 926 q 1090 896 1097 910 q 1078 857 1082 882 l 1035 575 l 1067 533 q 1072 523 1072 526 q 1067 519 1072 519 l 690 476 q 682 399 690 399 q 674 407 679 399 l 617 485 q 635 522 631 500 q 638 592 639 543 l 631 803 q 606 981 631 872 l 624 986 l 676 894 l 1008 942 l 1051 993 m 1021 894 l 675 853 l 681 714 q 913 757 872 733 l 956 717 q 963 708 963 711 q 956 704 963 706 l 682 672 l 689 518 l 983 563 l 1021 894 m 432 847 q 424 774 432 803 q 411 744 415 744 q 400 753 407 744 l 250 947 l 260 960 l 432 847 m 311 583 q 314 546 314 564 q 309 506 314 528 q 299 483 304 483 q 286 492 294 483 l 111 658 l 119 674 l 311 583 m 481 626 l 268 -124 q 262 -132 265 -132 q 253 -125 258 -132 q 115 31 181 -33 l 126 44 l 228 -17 l 457 635 l 481 626 m 1246 -42 l 1303 -96 q 1310 -106 1310 -103 q 1303 -108 1310 -108 q 999 -118 1219 -108 q 675 -135 779 -128 q 512 -149 571 -142 q 428 -164 453 -157 l 360 -112 l 543 -100 l 533 242 q 518 385 532 296 l 533 390 l 585 304 l 1085 365 l 1126 414 l 1185 353 q 1192 342 1192 346 q 1186 333 1192 338 q 1144 258 1153 310 l 1096 -67 q 1246 -42 1219 -57 m 1090 315 l 932 299 l 967 260 q 971 250 971 254 q 968 239 971 246 q 947 157 953 210 l 924 -78 l 1044 -69 l 1090 315 m 892 150 q 897 239 897 211 q 892 293 897 267 l 739 276 l 774 232 q 778 221 778 225 q 776 213 778 217 q 765 149 767 192 l 760 -87 l 872 -81 l 892 150 m 715 -90 l 715 142 q 700 272 715 214 l 583 260 l 593 -97 l 715 -90 z "},"窝":{"ha":1389,"x_min":201,"x_max":1215,"o":"m 1149 958 l 1207 903 q 1215 889 1215 894 q 1207 879 1215 883 q 1071 725 1165 861 l 1050 733 l 1110 865 l 618 833 l 643 764 q 646 751 646 757 q 624 739 646 746 q 562 707 603 732 q 468 653 521 682 l 500 588 l 858 635 l 888 674 l 942 631 q 950 621 950 625 q 941 611 950 617 q 924 593 932 606 q 914 572 915 581 l 899 469 l 946 433 q 953 424 953 428 q 939 419 953 421 l 685 390 l 728 344 q 733 335 733 339 q 725 326 733 331 q 700 264 717 321 l 1006 293 l 1044 347 l 1101 294 q 1111 282 1111 286 q 1099 270 1111 278 q 1078 247 1086 263 q 1064 188 1069 231 q 1001 -178 1019 -125 q 972 -232 982 -232 q 958 -221 968 -232 q 814 -79 904 -158 l 825 -65 l 953 -139 q 1017 251 988 -50 l 688 221 q 669 172 676 188 l 890 64 q 896 1 896 29 q 891 -28 896 -28 q 878 -19 886 -28 q 663 157 785 74 q 429 -90 600 8 l 418 -74 q 556 61 508 -3 q 633 217 604 125 l 372 193 l 382 -108 l 383 -179 q 377 -221 383 -221 q 363 -210 371 -221 l 313 -136 q 333 -35 335 -92 l 326 182 q 308 329 326 242 l 328 336 l 368 232 l 646 258 q 663 389 660 313 l 514 372 q 507 307 517 307 q 496 318 504 307 l 450 381 q 462 415 457 394 q 467 442 467 435 l 463 547 q 447 642 463 575 q 267 553 357 593 l 260 572 q 596 832 561 742 l 290 811 q 274 681 288 726 q 249 635 260 635 q 238 646 243 635 l 201 714 q 244 802 232 751 q 263 951 257 853 l 285 953 q 290 854 290 907 l 715 883 l 633 1063 l 646 1075 l 767 958 q 733 885 758 925 l 1104 908 l 1149 958 m 865 594 l 506 547 l 513 410 l 853 450 l 865 594 m 1029 713 q 1050 658 1043 685 q 1057 622 1057 631 q 1052 614 1057 614 q 1039 619 1047 614 q 736 793 897 717 l 743 810 l 1029 713 z "},"乌":{"ha":1389,"x_min":161,"x_max":1189,"o":"m 1115 456 l 1182 396 q 1189 385 1189 389 q 1178 374 1189 382 q 1159 344 1168 367 q 1132 247 1150 321 q 1015 -153 1057 -71 q 963 -235 972 -235 q 957 -229 960 -235 q 793 -35 899 -147 l 807 -19 l 956 -125 q 1025 50 986 -83 q 1090 342 1064 183 l 542 286 q 492 277 508 283 q 467 260 475 271 q 457 250 460 250 q 450 254 454 250 l 397 307 q 437 346 429 331 q 444 406 444 361 l 444 661 q 418 883 444 801 l 436 892 l 489 793 l 574 803 q 635 1029 635 957 q 633 1061 635 1044 l 649 1067 l 714 989 q 719 978 719 982 q 708 966 719 975 q 677 928 696 957 q 608 807 658 899 l 886 838 l 932 901 l 993 846 q 999 836 999 840 q 993 826 999 832 q 943 697 964 803 q 879 483 911 549 q 832 418 847 418 q 825 422 828 418 q 667 576 744 510 l 678 593 l 824 506 q 871 626 846 539 q 903 793 896 714 l 494 749 l 494 331 l 1072 389 l 1115 456 m 947 121 q 954 112 954 115 q 943 107 954 108 q 226 28 318 53 l 161 82 q 886 171 808 129 l 947 121 z "},"无":{"ha":1389,"x_min":119,"x_max":1240,"o":"m 1178 232 q 1211 39 1192 111 l 1240 -74 q 1233 -82 1240 -78 q 1170 -94 1225 -86 q 994 -101 1115 -101 q 813 -86 872 -101 q 735 -25 753 -71 q 717 135 717 21 l 717 385 q 711 542 717 504 l 664 538 q 508 162 610 307 q 131 -146 407 17 l 119 -126 q 456 172 347 21 q 610 532 565 324 q 263 486 360 506 l 196 542 l 619 578 q 644 768 644 706 q 640 863 644 831 q 390 825 469 847 l 324 878 q 965 963 910 928 l 1035 913 q 1042 904 1042 907 q 1032 900 1042 901 l 676 867 l 731 806 q 733 799 733 801 q 729 789 733 796 q 697 704 707 758 l 675 582 q 1106 653 1022 617 l 1174 601 q 1182 592 1182 596 q 1169 588 1182 589 l 736 544 l 786 494 q 792 485 792 489 q 788 475 792 481 q 769 372 769 450 l 769 101 q 800 -15 769 17 q 919 -46 831 -46 q 1146 -29 1085 -46 l 1157 232 l 1178 232 z "},"武":{"ha":1389,"x_min":146,"x_max":1253,"o":"m 1213 156 q 1222 -16 1213 72 q 1240 -154 1231 -104 l 1253 -228 q 1244 -235 1253 -235 q 1074 -128 1192 -235 q 887 149 957 -22 q 776 600 817 321 l 529 574 l 581 528 q 589 513 589 519 q 588 504 589 507 q 569 453 574 485 q 564 340 564 421 q 704 382 671 361 l 760 339 q 767 331 767 333 q 760 328 767 329 l 564 296 l 564 60 l 778 133 l 789 108 q 235 -133 307 -86 l 146 -85 l 328 -21 l 319 225 q 285 385 315 332 l 296 397 l 383 332 q 389 326 389 328 q 383 316 389 324 q 375 292 376 308 q 374 233 374 276 l 376 -4 l 513 42 l 513 385 q 492 569 513 524 q 235 528 326 551 l 161 583 l 769 647 q 724 940 742 854 q 682 1068 707 1026 l 696 1079 l 804 1001 q 811 992 811 996 q 808 985 811 989 q 799 897 799 964 q 819 653 799 831 q 1114 711 1021 675 l 1178 656 q 1185 647 1185 650 q 1178 643 1185 644 l 826 606 q 951 130 868 301 q 1172 -124 1033 -42 l 1192 156 l 1213 156 m 1068 864 q 1061 778 1068 803 q 1049 755 1054 754 q 1039 761 1044 756 l 883 951 l 896 968 l 1068 864 m 592 857 l 647 813 q 653 806 653 808 q 647 803 653 804 l 468 771 q 350 746 390 757 l 292 790 q 592 857 544 824 z "},"西":{"ha":1389,"x_min":124,"x_max":1256,"o":"m 1249 931 q 1256 921 1256 926 q 1247 915 1256 915 l 806 882 l 806 640 l 1046 663 l 1079 718 l 1146 661 q 1150 654 1150 658 q 1138 640 1150 650 q 1119 612 1126 631 q 1108 550 1113 593 l 1072 135 q 1028 -115 1050 -115 q 1022 -108 1025 -115 l 979 -4 l 392 -46 q 394 -126 394 -93 q 388 -158 394 -158 q 376 -150 382 -158 l 322 -81 q 338 68 338 -37 q 335 129 338 103 l 304 508 q 272 697 296 607 l 290 703 l 344 597 l 567 618 q 569 865 572 704 q 194 821 275 843 l 124 874 q 852 928 607 907 q 1182 976 1097 950 l 1249 931 m 757 636 l 757 878 l 622 868 q 615 622 622 707 l 757 636 m 1061 619 l 806 597 l 806 354 q 818 299 806 317 q 860 282 831 282 q 947 306 889 282 l 986 267 q 994 253 994 258 q 963 245 994 249 q 899 242 932 242 q 769 266 781 242 q 757 356 757 290 l 757 593 l 613 581 q 565 328 603 429 q 419 117 528 228 l 404 132 q 519 319 483 217 q 564 576 556 421 l 350 557 l 389 -6 q 958 54 911 33 l 993 18 q 1019 164 1007 32 l 1061 619 z "},"锡":{"ha":1389,"x_min":106,"x_max":1274,"o":"m 639 139 q 415 -65 429 -44 q 396 -86 400 -86 q 389 -83 392 -86 l 336 -42 q 375 -6 364 -24 q 386 51 386 11 l 386 303 q 232 274 275 290 l 168 324 l 386 342 l 386 532 q 278 513 326 526 l 243 542 q 119 396 189 474 l 106 410 q 335 767 256 610 q 415 1006 415 924 q 411 1039 415 1025 l 425 1047 l 493 954 q 497 944 497 949 q 492 936 497 940 q 451 883 472 924 q 400 788 431 843 q 582 829 533 801 l 635 788 q 639 781 639 783 q 631 776 639 778 l 378 744 q 256 558 313 635 q 550 607 478 571 l 596 565 q 600 558 600 561 q 590 553 600 554 l 435 538 l 435 347 q 576 382 544 363 l 626 340 q 632 333 632 335 q 624 329 632 331 l 435 308 l 435 24 l 629 151 l 639 139 m 1071 1021 l 1132 967 q 1140 955 1140 960 q 1128 940 1140 950 q 1109 915 1115 931 q 1100 863 1103 899 l 1085 629 l 1108 594 q 1113 586 1113 589 q 1104 582 1113 583 l 751 547 q 739 504 749 504 q 732 510 736 504 l 692 578 q 706 651 706 607 l 706 842 q 676 990 706 915 l 692 997 l 738 933 l 1032 967 l 1071 1021 m 1051 925 l 751 890 l 751 756 q 944 796 907 768 l 990 758 q 999 749 999 753 q 988 744 999 746 l 751 715 l 751 590 l 1038 622 l 1051 925 m 1267 413 q 1274 401 1274 406 q 1264 390 1274 396 q 1221 322 1232 371 q 1130 -10 1168 103 q 1062 -171 1092 -122 q 1026 -219 1032 -219 q 1015 -211 1019 -219 q 913 -40 976 -133 l 925 -26 l 1026 -112 q 1178 379 1106 1 l 1031 365 l 1068 289 q 1071 279 1071 283 q 1064 269 1071 275 q 1033 225 1050 260 q 895 -1 969 89 q 711 -181 821 -92 l 699 -165 q 917 108 829 -40 q 1014 363 1004 256 l 879 350 l 899 293 q 900 284 900 289 q 891 276 900 279 q 861 239 882 272 q 611 -57 760 76 l 597 -40 q 756 156 681 40 q 851 347 832 272 l 742 336 q 558 158 633 208 l 547 174 q 803 540 765 396 l 819 543 l 850 486 q 853 476 853 481 q 847 469 853 472 q 815 438 831 463 q 776 382 800 413 l 1172 424 l 1210 471 l 1267 413 z "},"希":{"ha":1389,"x_min":114,"x_max":1272,"o":"m 1265 582 q 1272 572 1272 576 q 1264 568 1272 568 l 729 528 l 789 474 q 792 469 792 472 q 789 464 792 467 q 774 431 778 453 q 769 351 769 408 l 997 375 l 1038 436 l 1101 378 q 1106 371 1106 375 q 1101 364 1106 367 q 1069 328 1078 346 q 1058 274 1061 310 q 1014 -11 1040 61 q 975 -83 988 -83 q 967 -78 969 -83 q 838 86 910 4 l 850 101 l 963 15 q 1008 333 994 90 l 769 308 l 769 -62 q 765 -190 769 -144 q 749 -235 760 -235 q 742 -229 744 -235 l 686 -126 q 719 32 719 -81 l 719 303 l 507 282 l 511 58 q 507 -59 513 -35 q 499 -83 501 -83 q 492 -78 494 -83 l 442 7 q 463 101 464 50 l 458 251 q 453 335 457 308 q 124 94 329 217 l 114 113 q 551 514 400 301 q 228 472 274 493 l 154 528 l 581 558 q 663 769 651 674 q 279 618 476 671 l 274 639 q 692 842 489 715 q 357 954 533 900 l 367 979 l 735 869 q 956 1065 938 1003 l 972 1069 l 1033 1008 q 1038 1001 1038 1004 q 1032 996 1038 999 q 797 850 978 968 l 1031 781 q 1064 683 1064 718 q 1060 676 1064 676 q 1051 679 1057 676 q 750 819 903 761 q 689 785 731 807 l 735 713 q 738 705 738 708 q 733 699 738 701 q 642 564 715 688 q 1199 638 1121 599 l 1265 582 m 719 347 q 693 525 717 463 l 611 519 q 474 356 553 435 l 489 324 l 719 347 z "},"悉":{"ha":1389,"x_min":126,"x_max":1269,"o":"m 1269 332 l 1022 307 l 722 600 l 722 489 q 719 294 722 328 q 708 261 715 261 q 703 264 706 261 l 646 336 q 667 399 661 358 q 672 532 672 439 l 672 594 l 653 593 q 138 206 475 364 l 126 224 q 582 588 411 382 q 226 540 336 567 l 163 592 l 532 624 l 415 804 l 425 817 l 560 715 q 539 624 551 654 l 672 635 l 672 882 q 307 831 494 851 l 306 853 q 740 938 593 900 q 914 1014 886 975 l 931 1017 l 1007 957 q 1011 951 1011 954 q 1009 947 1011 949 q 956 935 1007 946 l 722 890 l 722 639 l 803 646 q 894 817 875 772 q 914 894 914 863 l 929 897 l 971 817 q 974 808 974 813 q 965 800 974 803 q 922 764 947 793 q 839 650 897 735 q 1151 703 1086 672 l 1214 650 q 1218 642 1218 646 q 1207 638 1218 639 l 769 603 l 842 538 q 1053 391 961 428 q 1269 354 1146 354 l 1269 332 m 772 156 q 763 79 772 104 q 748 54 753 54 q 738 63 743 54 l 610 258 l 622 271 l 772 156 m 1156 90 q 1157 40 1157 60 q 1147 -14 1157 -14 q 1139 -8 1144 -14 l 940 217 l 951 229 l 1156 90 m 913 88 q 1018 -174 971 -79 q 1022 -187 1022 -182 q 1017 -192 1022 -192 q 969 -193 1013 -193 q 608 -95 721 -193 q 442 200 494 3 l 467 207 q 631 -49 518 35 q 931 -132 743 -132 l 894 85 l 913 88 m 367 167 q 306 -53 351 42 q 243 -149 260 -149 q 236 -142 239 -149 l 208 -61 q 290 38 263 -12 q 343 174 317 88 l 367 167 z "},"厦":{"ha":1389,"x_min":100,"x_max":1299,"o":"m 1154 958 q 1160 951 1160 954 q 1150 946 1160 947 l 394 875 q 316 185 379 383 q 115 -176 253 -12 l 100 -165 q 249 111 201 -15 q 317 424 297 238 q 338 853 338 611 q 329 1011 338 947 l 347 1018 l 389 913 q 1101 999 1042 963 l 1154 958 m 1299 -139 l 1054 -168 l 788 28 q 251 -199 549 -142 l 249 -182 q 751 53 543 -104 q 611 143 632 144 l 613 154 l 682 160 q 778 74 701 124 q 943 244 878 157 q 667 196 714 211 l 636 219 q 331 -11 511 88 l 319 4 q 542 182 456 94 q 644 329 628 269 l 569 321 q 557 260 569 260 q 549 265 553 260 l 507 331 q 526 426 526 361 l 526 586 q 513 713 526 671 l 532 717 l 568 656 l 688 671 q 719 772 718 749 q 471 738 560 757 l 413 776 q 1075 864 1053 833 l 1131 826 q 1138 817 1138 821 q 1128 811 1138 813 l 783 778 q 721 675 765 751 l 985 707 l 1024 753 l 1079 703 q 1082 697 1082 700 q 1071 688 1082 693 q 1052 664 1060 682 q 1039 606 1044 646 l 1011 415 l 1054 379 q 1057 373 1057 376 q 1051 369 1057 369 l 671 332 l 693 283 q 694 276 694 279 q 692 271 694 274 q 653 235 678 264 l 949 278 l 1001 326 l 1060 276 q 1067 267 1067 271 q 1057 261 1067 264 q 975 193 1029 253 q 817 49 893 106 l 889 3 q 1083 -96 1008 -75 q 1297 -118 1157 -117 l 1299 -139 m 999 672 l 569 622 l 569 556 q 865 604 840 586 l 904 574 q 908 567 908 571 q 901 563 908 564 l 569 525 l 569 458 q 865 504 836 486 l 908 478 q 913 472 913 475 q 906 467 913 468 l 569 429 l 569 356 l 964 400 l 999 672 z "},"象":{"ha":1389,"x_min":101,"x_max":1294,"o":"m 1294 -68 l 1058 -83 l 792 260 l 754 235 q 771 79 771 165 q 740 -142 771 -51 q 693 -232 710 -232 q 682 -224 689 -232 q 514 -65 615 -151 l 525 -49 l 681 -131 q 715 92 715 -33 q 710 179 715 138 q 108 -132 461 -36 l 101 -108 q 432 43 269 -56 q 699 249 594 142 q 678 313 690 288 q 185 38 456 154 l 175 60 q 650 365 425 175 q 601 428 633 397 q 199 176 472 300 l 189 199 q 594 483 464 328 l 446 467 l 446 429 q 440 417 446 417 q 428 426 435 417 l 381 488 q 399 579 399 524 q 382 722 399 635 q 221 596 314 663 l 204 615 q 487 878 382 758 q 601 1061 592 999 l 618 1068 l 657 979 q 658 972 658 976 q 650 964 658 968 q 595 921 618 947 q 549 874 572 894 l 783 904 l 835 950 l 879 892 q 885 881 885 886 q 874 871 885 875 q 806 819 842 857 q 722 721 769 781 l 986 754 l 1028 807 l 1079 757 q 1085 748 1085 751 q 1078 740 1085 744 q 1042 690 1049 717 l 1015 583 l 1051 551 q 1061 539 1061 543 q 1047 533 1061 535 l 657 490 q 621 449 635 463 q 744 267 703 385 q 903 394 849 342 q 964 486 958 446 l 983 488 l 1000 407 q 992 385 1004 389 q 818 278 950 368 l 982 93 q 1113 -8 1047 19 q 1294 -46 1179 -35 l 1294 -68 m 778 861 l 499 825 q 404 740 449 778 l 436 683 l 671 714 l 778 861 m 989 711 l 738 679 l 757 661 q 760 655 760 658 q 751 643 760 651 q 726 599 743 635 q 688 533 708 563 l 967 568 l 989 711 m 686 672 l 443 643 l 446 504 l 625 526 q 686 672 675 600 z "},"辛":{"ha":1389,"x_min":138,"x_max":1246,"o":"m 743 940 q 726 876 739 913 q 708 840 714 840 q 699 849 703 840 l 592 1064 l 606 1074 l 743 940 m 1233 510 q 1246 493 1246 499 q 1231 486 1246 488 l 729 444 l 729 246 q 1081 297 1047 275 l 1138 250 q 1144 239 1144 244 q 1135 232 1144 233 l 729 197 l 729 -40 q 724 -203 729 -168 q 711 -239 718 -239 q 699 -231 704 -239 l 642 -137 q 675 39 675 -92 l 675 192 q 308 146 369 165 l 242 200 l 675 240 l 675 440 q 206 390 254 406 l 138 444 l 776 496 q 826 751 826 682 q 825 783 826 767 q 360 725 440 749 l 294 779 q 836 828 668 808 q 1061 875 1004 847 l 1119 824 q 1126 814 1126 818 q 1117 808 1126 810 l 865 786 l 914 732 q 919 722 919 726 q 908 706 919 718 q 876 649 896 694 q 819 499 856 604 q 1179 558 1111 525 l 1233 510 m 615 603 q 599 544 614 579 q 577 510 583 510 q 567 519 571 510 l 494 717 l 510 725 l 615 603 z "},"新":{"ha":1389,"x_min":128,"x_max":1313,"o":"m 513 960 q 492 861 510 861 q 483 869 488 861 q 372 1044 447 938 l 385 1057 l 513 960 m 1306 574 q 1313 563 1313 568 q 1301 557 1313 558 l 1076 531 l 1076 121 q 1075 -190 1076 -158 q 1069 -221 1074 -221 q 1058 -210 1064 -221 l 1000 -103 q 1022 121 1022 -79 l 1022 524 l 853 504 q 781 60 840 213 q 578 -229 722 -93 l 564 -214 q 765 163 722 -47 q 807 658 807 372 q 792 921 807 796 l 813 928 l 858 815 q 1048 925 989 886 q 1107 996 1107 964 l 1124 1003 l 1190 942 q 1196 932 1196 936 q 1188 925 1196 928 q 1059 866 1154 914 q 864 785 964 818 q 854 549 860 631 q 1242 618 1190 592 l 1306 574 m 788 560 q 793 551 793 556 q 785 546 793 547 l 482 507 l 519 474 q 525 463 525 468 q 522 450 525 457 q 513 357 513 425 q 692 401 642 375 l 743 360 q 751 349 751 354 q 740 343 751 344 l 513 314 l 513 -1 q 503 -129 513 -85 q 485 -174 494 -174 q 474 -167 479 -174 q 324 -15 403 -83 l 339 0 l 449 -65 q 463 46 463 -46 l 463 307 q 260 269 325 289 l 197 319 l 463 350 q 449 503 460 453 q 199 461 246 476 l 142 507 l 528 554 q 572 764 572 689 q 569 796 572 782 q 256 747 360 772 l 190 793 q 686 868 590 829 l 736 829 q 743 819 743 824 q 732 814 743 815 l 599 799 l 640 743 q 646 731 646 736 q 639 722 646 726 q 557 557 621 708 q 739 604 693 578 l 788 560 m 442 642 q 426 597 440 629 q 406 564 411 564 q 396 574 400 564 l 329 729 l 344 739 l 442 642 m 711 172 q 715 119 715 142 q 709 82 715 82 q 699 86 703 82 l 560 236 l 572 256 l 711 172 m 396 183 q 399 169 399 175 q 392 158 399 164 q 329 97 368 140 q 140 -75 256 7 l 128 -62 q 287 123 238 53 q 344 251 336 193 l 365 254 l 396 183 z "},"休":{"ha":1389,"x_min":56,"x_max":1314,"o":"m 1314 40 l 1115 29 l 843 563 l 843 -40 q 837 -206 843 -179 q 827 -233 831 -233 q 819 -226 824 -233 l 767 -118 q 786 -55 781 -90 q 792 132 792 -19 l 792 478 q 435 -10 692 218 l 419 7 q 769 579 688 283 q 543 533 632 561 l 474 583 l 792 624 l 792 792 q 783 957 792 906 q 756 1057 775 1008 l 771 1067 l 864 982 q 869 973 869 978 q 867 964 869 968 q 843 771 843 917 l 843 631 q 1113 692 1054 663 l 1185 640 q 1192 633 1192 635 q 1185 629 1192 631 l 867 592 l 1008 329 q 1155 128 1088 181 q 1314 61 1222 75 l 1314 40 m 522 926 q 525 915 525 921 q 518 906 525 910 q 446 817 483 879 q 381 714 408 754 l 381 4 q 376 -208 381 -185 q 367 -231 371 -231 q 358 -221 364 -231 l 304 -118 q 331 15 331 -69 l 331 646 q 68 374 214 489 l 56 389 q 347 752 240 565 q 447 1036 453 939 l 465 1043 l 522 926 z "},"徐":{"ha":1389,"x_min":72,"x_max":1319,"o":"m 1319 510 l 1106 488 l 801 861 q 429 381 618 558 l 407 394 q 685 766 585 588 q 786 1040 786 944 q 785 1063 786 1053 l 801 1069 l 867 963 q 869 954 869 958 q 863 947 869 950 q 819 892 851 943 l 993 697 q 1147 574 1071 610 q 1319 529 1222 538 l 1319 510 m 497 963 q 500 955 500 958 q 494 947 500 951 q 440 894 469 932 q 281 715 340 771 q 154 610 221 658 l 140 626 q 351 860 276 756 q 425 1053 425 965 l 440 1058 l 497 963 m 513 660 q 514 652 514 654 q 508 647 514 650 q 444 594 492 642 l 374 524 l 374 0 q 369 -211 374 -179 q 359 -243 364 -243 q 350 -236 354 -243 l 289 -122 q 317 -58 311 -87 q 322 44 322 -29 l 322 474 q 83 276 215 369 l 72 294 q 463 761 431 592 l 479 765 l 513 660 m 1142 364 q 1147 357 1147 360 q 1140 353 1147 354 l 847 314 l 847 -4 q 835 -186 847 -140 q 813 -232 822 -232 q 806 -228 810 -232 q 642 -49 732 -135 l 654 -33 l 788 -119 q 796 35 796 -94 l 796 307 q 550 257 611 282 l 485 306 l 796 349 l 796 521 q 661 489 697 507 l 600 531 q 949 603 878 567 l 1000 560 q 1004 553 1004 556 q 997 549 1004 550 l 847 528 l 847 357 q 1076 413 1001 378 l 1142 364 m 699 161 q 700 153 700 157 q 694 146 700 150 q 653 113 664 126 q 426 -112 517 -42 l 414 -99 q 643 242 636 140 l 658 246 l 699 161 m 1161 85 q 1175 -31 1175 26 q 1171 -36 1175 -36 q 1100 28 1168 -36 l 915 204 l 925 219 l 1161 85 z "},"雅":{"ha":1389,"x_min":78,"x_max":1297,"o":"m 1289 -14 q 1297 -24 1297 -21 q 1288 -28 1297 -26 q 792 -69 864 -54 l 765 -46 q 760 -178 765 -136 q 749 -219 754 -219 q 739 -210 743 -219 l 690 -114 q 717 0 717 -81 l 717 607 q 599 438 657 500 l 581 453 q 742 761 675 578 q 808 1029 808 944 q 806 1051 808 1043 l 822 1057 l 876 957 q 881 945 881 949 q 875 935 881 942 q 826 847 849 901 q 765 706 804 792 q 1023 734 918 719 q 1169 772 1128 749 l 1214 729 q 1221 719 1221 722 q 1213 714 1221 715 l 999 690 l 999 506 q 1139 539 1103 524 l 1188 494 q 1194 485 1194 488 q 1188 481 1194 482 l 999 463 l 999 268 q 1147 307 1115 285 l 1199 260 q 1206 251 1206 254 q 1197 247 1206 249 l 999 226 l 999 -4 q 1228 39 1192 13 l 1289 -14 m 950 -8 l 950 221 q 814 199 864 214 l 768 243 l 950 263 l 950 458 q 810 435 868 451 l 768 478 l 950 500 l 950 685 q 797 657 860 676 l 765 676 l 765 -24 l 950 -8 m 1043 881 q 1021 818 1036 846 q 1001 790 1006 790 q 993 799 996 790 l 926 1026 l 942 1035 l 1043 881 m 678 876 l 518 861 l 518 551 q 596 578 560 563 l 618 540 q 624 528 624 532 q 615 524 624 525 l 518 508 l 518 46 q 506 -165 518 -121 q 481 -208 494 -208 q 471 -200 476 -208 q 306 -7 392 -96 l 315 7 l 454 -85 q 467 128 467 -67 l 467 419 q 294 185 401 304 q 92 0 186 65 l 78 19 q 451 500 315 228 l 343 483 q 261 449 290 476 q 248 440 251 440 q 240 444 244 440 l 204 483 q 260 576 238 496 q 283 728 283 656 q 281 768 283 751 l 293 775 l 351 714 q 356 706 356 710 q 351 697 356 701 q 311 599 326 669 l 294 519 l 467 543 l 467 856 q 275 822 361 844 l 211 872 q 628 931 547 893 l 678 889 q 685 881 685 883 q 678 876 685 878 z "},"亚":{"ha":1389,"x_min":125,"x_max":1249,"o":"m 1240 -36 q 1249 -48 1249 -44 q 1239 -51 1249 -51 q 602 -80 908 -60 q 190 -117 296 -100 l 125 -60 l 561 -36 l 561 818 q 324 783 361 800 l 254 840 q 837 889 651 869 q 1074 935 1022 908 l 1138 886 q 1147 876 1147 879 q 1138 872 1147 874 l 826 843 l 826 256 q 1050 644 1040 517 l 1065 649 l 1111 539 q 1114 528 1114 533 q 1104 517 1114 522 q 1044 457 1081 501 q 826 214 899 283 l 826 -22 q 1181 24 1126 -6 l 1240 -36 m 772 -25 l 772 838 l 614 822 l 614 -33 l 772 -25 m 475 322 q 456 235 468 264 q 440 206 444 206 q 432 214 436 206 l 285 568 l 299 578 l 475 322 z "},"盐":{"ha":1389,"x_min":132,"x_max":1265,"o":"m 739 485 q 254 322 272 346 l 190 371 l 469 444 l 469 644 q 271 610 299 624 l 211 656 l 469 690 l 469 775 q 465 927 469 885 q 439 1010 460 969 l 456 1021 l 543 949 q 550 939 550 943 q 539 919 550 935 q 525 883 528 904 q 522 774 522 861 l 522 697 q 681 738 650 718 l 732 692 q 738 684 738 688 q 729 679 738 681 l 522 651 l 522 458 l 729 513 l 739 485 m 1150 588 q 1167 492 1167 519 q 1162 465 1167 465 q 1151 471 1157 465 q 864 693 1044 579 l 864 471 q 856 317 864 340 q 843 294 847 294 q 833 304 839 294 l 785 399 q 806 452 801 428 q 811 519 811 476 l 811 786 q 785 1006 811 961 l 801 1021 l 886 944 q 890 936 890 940 q 888 926 890 932 q 869 874 874 903 q 864 790 864 844 l 864 722 l 1150 588 m 1261 -124 q 1265 -131 1265 -128 q 1258 -133 1265 -133 q 463 -169 654 -157 q 190 -194 271 -181 l 132 -144 l 379 -131 l 369 133 q 350 300 365 249 l 371 308 l 413 228 l 960 275 l 994 324 l 1057 269 q 1064 260 1064 264 q 1057 253 1064 256 q 1013 150 1021 233 l 989 -96 q 1199 -62 1144 -85 l 1261 -124 m 965 229 l 790 215 l 822 172 q 826 163 826 167 q 821 154 826 160 q 799 75 804 138 l 782 -108 l 938 -99 l 965 229 m 756 213 l 581 199 l 615 164 q 621 155 621 158 q 618 147 621 151 q 607 40 607 125 l 607 -118 l 733 -111 l 754 81 q 760 161 760 131 q 756 213 760 192 m 561 -121 l 561 65 q 551 196 561 168 l 418 185 l 424 -128 l 561 -121 z "},"扬":{"ha":1389,"x_min":139,"x_max":1235,"o":"m 628 672 q 632 665 632 668 q 624 661 632 663 l 457 638 l 457 457 l 589 522 l 599 504 l 457 419 l 457 19 q 449 -146 457 -92 q 431 -200 442 -200 q 421 -193 426 -200 q 238 -12 354 -117 l 250 3 l 394 -89 q 407 44 407 -57 l 407 389 q 218 263 256 299 l 139 300 l 407 432 l 407 629 q 213 594 244 607 l 150 642 l 407 675 l 407 789 q 356 1022 407 949 l 369 1038 l 474 953 q 479 944 479 949 q 475 935 479 940 q 457 772 457 906 l 457 682 q 574 717 539 694 l 628 672 m 1229 561 q 1235 551 1235 556 q 1228 543 1235 547 q 1181 447 1194 524 q 1067 -81 1114 42 q 999 -203 1021 -203 q 990 -196 994 -203 q 857 0 947 -114 l 871 13 l 992 -96 q 1068 136 1026 -39 q 1138 521 1110 311 l 989 504 l 1025 449 q 1029 439 1029 443 q 1024 432 1029 435 q 975 342 1011 425 q 799 32 882 136 q 589 -156 715 -72 l 576 -135 q 814 130 707 -44 q 963 500 921 304 l 832 486 l 863 442 q 867 433 867 436 q 861 426 867 431 q 821 368 851 419 q 672 159 742 235 q 501 15 601 83 l 488 31 q 700 261 613 133 q 803 482 788 389 q 685 440 725 472 q 672 433 676 433 q 661 439 667 433 l 618 482 q 749 592 690 521 l 979 869 q 675 814 746 843 l 610 865 l 979 911 l 1032 968 l 1085 908 q 1090 898 1090 901 q 1078 890 1090 894 q 1050 872 1065 885 q 1004 824 1035 860 l 746 515 l 1126 565 l 1171 619 l 1229 561 z "},"仰":{"ha":1389,"x_min":103,"x_max":1260,"o":"m 542 942 q 546 931 546 935 q 539 924 546 926 q 482 855 517 914 q 413 743 447 796 l 413 -37 q 394 -225 413 -225 q 389 -218 392 -225 l 329 -100 q 361 61 361 -60 l 361 668 q 121 396 260 525 l 103 413 q 463 1047 483 847 l 481 1054 l 542 942 m 864 921 q 867 913 867 917 q 861 904 867 908 q 633 735 826 888 l 633 275 l 810 364 l 822 346 q 623 191 639 210 q 603 172 607 172 q 593 176 600 172 l 531 224 q 572 253 560 240 q 583 308 583 267 l 583 699 q 565 851 583 771 l 585 858 l 629 774 q 750 903 711 843 q 785 999 789 963 l 800 1004 l 864 921 m 1185 844 l 1253 782 q 1260 773 1260 776 q 1242 758 1260 769 q 1215 729 1224 747 q 1203 661 1207 711 q 1144 226 1172 313 q 1104 139 1115 139 q 1096 146 1101 139 q 950 318 1036 226 l 963 333 l 1090 244 q 1154 742 1132 324 l 929 713 l 929 -32 q 913 -232 929 -232 q 906 -225 910 -232 l 849 -119 q 878 25 878 -69 l 878 717 q 860 854 878 764 l 882 867 l 925 760 l 1144 788 l 1185 844 z "},"伊":{"ha":1389,"x_min":79,"x_max":1296,"o":"m 549 936 q 550 930 550 933 q 544 922 550 926 q 475 838 510 897 q 392 711 440 778 l 392 -39 q 369 -206 392 -206 q 361 -200 364 -206 l 310 -97 q 335 -43 331 -67 q 340 50 340 -19 l 340 644 q 94 392 242 522 l 79 413 q 378 783 278 613 q 469 1039 479 953 l 489 1047 l 549 936 m 1288 667 q 1296 657 1296 660 q 1286 653 1296 654 l 1060 628 l 1039 419 l 1089 376 q 1096 367 1096 371 q 1083 363 1096 364 l 746 324 q 644 15 721 142 q 422 -215 568 -112 l 411 -196 q 600 24 535 -96 q 690 317 665 143 q 581 292 621 306 l 514 339 l 696 363 q 715 590 710 468 q 496 556 539 571 l 433 607 l 718 638 q 724 846 724 733 q 614 822 649 835 l 549 868 l 1019 931 l 1064 988 l 1126 926 q 1129 919 1129 924 q 1113 902 1129 915 q 1090 874 1097 889 q 1081 828 1083 858 l 1065 676 q 1226 718 1192 694 l 1288 667 m 1025 883 l 785 854 q 774 644 779 707 l 1008 669 l 1025 883 m 1004 622 l 771 597 q 751 369 763 460 l 988 403 l 1004 622 z "},"宜":{"ha":1389,"x_min":126,"x_max":1274,"o":"m 776 932 q 751 876 765 900 q 731 853 738 853 q 722 858 725 853 l 626 1064 l 638 1074 l 776 932 m 1222 849 q 1226 839 1226 843 q 1218 829 1226 835 q 1156 777 1186 811 q 1069 661 1125 743 l 1042 669 l 1110 819 l 325 781 q 298 642 321 704 q 264 581 275 581 q 256 588 260 581 l 213 667 q 289 932 289 735 l 308 933 q 325 824 322 882 l 1115 863 l 1157 915 l 1222 849 m 1264 -72 q 1274 -83 1274 -81 q 1258 -86 1274 -86 q 196 -129 317 -104 l 126 -72 l 461 -64 l 456 485 q 439 675 456 589 l 456 682 l 497 604 l 874 628 l 917 686 l 992 624 q 996 618 996 621 q 981 606 996 615 q 956 574 965 596 q 946 515 947 553 l 917 -53 q 1197 -18 1129 -46 l 1264 -72 m 892 586 l 507 564 l 508 382 q 778 425 743 403 l 826 376 q 832 368 832 371 q 824 365 832 365 l 508 343 l 510 174 q 776 210 728 188 l 818 167 q 825 156 825 160 q 815 151 825 151 l 510 133 l 511 -62 l 863 -54 l 892 586 z "},"约":{"ha":1389,"x_min":146,"x_max":1189,"o":"m 1121 739 l 1181 681 q 1189 667 1189 672 q 1175 649 1189 661 q 1154 619 1161 638 q 1143 560 1147 600 q 1083 99 1111 264 q 1034 -126 1056 -65 q 1005 -197 1013 -186 q 992 -207 997 -207 q 976 -194 988 -207 q 775 24 901 -99 l 786 39 l 979 -94 q 1093 629 1047 72 q 768 571 828 594 l 732 599 q 631 367 681 461 l 607 376 q 726 725 685 568 q 767 975 767 882 q 756 1049 767 1024 l 769 1060 l 856 979 q 864 965 864 971 q 858 951 864 958 q 805 819 832 917 q 743 626 778 721 l 1078 679 l 1121 739 m 614 675 q 617 660 617 668 q 607 643 617 651 q 542 571 568 608 l 338 275 l 600 335 l 606 315 q 310 203 364 231 q 291 197 297 197 q 276 206 285 197 l 232 254 q 290 290 271 271 q 363 388 310 308 q 464 543 415 468 q 246 482 307 510 q 226 475 232 475 q 214 483 219 475 l 179 529 q 244 576 224 553 q 322 710 265 600 q 404 882 379 821 q 429 971 429 943 q 428 1013 429 999 l 449 1017 l 497 924 q 504 906 504 913 q 492 889 504 900 q 417 793 447 849 l 286 553 l 488 581 q 560 757 551 682 l 578 760 l 614 675 m 886 300 q 867 234 881 260 q 847 208 853 208 q 835 222 842 208 l 732 451 l 747 461 l 886 300 m 635 108 q 311 -40 372 -10 q 236 -86 250 -71 l 146 -32 l 628 129 l 635 108 z "},"云":{"ha":1389,"x_min":111,"x_max":1276,"o":"m 1049 865 q 1054 856 1054 860 q 1042 851 1054 853 q 418 803 435 815 l 349 860 q 772 884 639 874 q 983 922 904 894 l 1049 865 m 1269 547 q 1276 538 1276 542 q 1267 533 1276 533 l 693 493 l 725 435 q 728 424 728 429 q 719 414 728 419 q 636 313 694 397 l 426 6 l 967 65 q 803 265 889 175 l 814 281 l 1101 49 q 1090 -56 1101 -14 q 1069 -99 1078 -99 q 1061 -89 1065 -99 q 985 40 1036 -35 q 353 -83 435 -47 q 341 -86 346 -86 q 329 -79 336 -86 l 279 -21 q 378 37 333 -7 q 524 237 424 81 q 650 490 624 393 q 182 442 239 464 l 111 504 q 1190 611 1061 547 l 1269 547 z "},"扎":{"ha":1389,"x_min":122,"x_max":1272,"o":"m 1229 232 q 1244 44 1233 126 q 1264 -72 1256 -39 q 1272 -108 1272 -104 q 1265 -117 1272 -115 q 1230 -126 1258 -119 q 1155 -139 1201 -133 q 1051 -144 1108 -144 q 883 -127 931 -144 q 822 -65 836 -110 q 807 79 807 -21 l 807 799 q 802 976 807 931 q 785 1051 797 1022 l 797 1061 l 883 985 q 892 974 892 978 q 889 964 892 969 q 860 758 860 911 l 860 69 q 872 -37 860 -6 q 920 -81 883 -69 q 1049 -92 957 -92 q 1190 -74 1140 -92 l 1201 232 l 1229 232 m 751 682 q 756 675 756 678 q 749 671 756 672 l 504 628 l 504 425 l 694 513 l 703 496 l 504 388 l 504 42 q 491 -144 504 -78 q 467 -211 478 -211 q 458 -206 463 -211 q 243 21 393 -119 l 254 35 l 438 -82 q 451 50 451 -50 l 451 358 q 207 215 217 229 l 122 251 l 451 401 l 451 619 q 228 569 271 588 l 164 617 l 451 665 l 451 779 q 413 1046 451 979 l 425 1057 l 518 979 q 525 969 525 974 q 522 961 525 965 q 504 779 504 931 l 504 674 q 703 726 660 701 l 751 682 z "},"芝":{"ha":1389,"x_min":138,"x_max":1285,"o":"m 1206 796 q 1213 788 1213 790 q 1203 783 1213 785 l 831 756 q 767 558 800 643 l 744 567 q 785 751 774 689 l 524 732 q 528 606 528 650 q 522 561 528 561 q 510 571 517 561 l 464 633 q 476 728 476 664 q 218 697 281 714 l 146 749 l 475 772 l 471 872 q 435 1022 468 949 l 449 1033 l 524 978 q 532 967 532 971 q 529 957 532 963 q 517 871 514 919 l 521 775 l 793 793 q 818 977 818 924 q 808 1056 818 1031 l 819 1065 l 901 994 q 907 985 907 990 q 897 968 907 979 q 840 797 881 949 q 1146 846 1060 815 l 1206 796 m 699 535 q 679 486 693 513 q 660 460 665 460 q 651 469 656 460 l 578 640 l 590 650 l 699 535 m 1285 -143 l 1014 -224 q 673 -90 969 -194 q 258 14 376 14 q 174 -4 207 14 l 138 53 q 228 60 188 60 q 308 53 269 60 q 875 432 647 261 q 285 343 363 371 l 210 397 l 906 478 l 968 538 l 1028 468 q 1033 458 1033 461 q 1021 449 1033 454 q 883 375 964 428 l 368 42 q 519 -3 422 29 q 875 -108 765 -82 q 1073 -135 985 -135 q 1285 -122 1161 -135 l 1285 -143 z "},"志":{"ha":1389,"x_min":165,"x_max":1208,"o":"m 1168 760 q 1178 748 1178 751 q 1165 743 1178 744 l 700 689 l 700 442 q 979 499 868 468 l 1032 457 q 1043 444 1043 449 q 1028 439 1043 440 q 676 400 863 426 q 400 350 490 374 l 331 397 l 650 436 l 650 683 q 232 618 422 656 l 165 669 l 650 722 l 650 863 q 615 1056 650 983 l 626 1065 l 718 997 q 725 986 725 992 q 719 967 725 981 q 706 923 713 954 q 700 865 700 892 l 700 728 q 1107 807 1001 764 l 1168 760 m 797 203 q 800 154 800 172 q 797 119 800 136 q 789 103 793 103 q 778 111 785 103 l 607 301 l 615 315 l 797 203 m 1204 185 q 1208 119 1208 147 q 1202 69 1208 69 q 1189 76 1196 69 q 940 300 1071 201 l 950 315 l 1204 185 m 299 251 q 280 28 297 121 q 240 -108 263 -64 q 210 -151 218 -151 q 204 -142 207 -151 l 176 -31 q 271 251 258 24 l 299 251 m 949 86 q 1069 -204 1011 -86 q 1074 -216 1074 -211 q 1067 -222 1074 -221 q 1036 -224 1060 -224 q 771 -165 915 -224 q 533 13 626 -106 q 408 239 440 131 l 431 244 q 658 -40 514 61 q 978 -151 803 -142 l 931 79 l 949 86 z "},"重":{"ha":1389,"x_min":139,"x_max":1244,"o":"m 1235 736 l 721 688 l 721 581 l 976 606 l 1014 657 l 1072 606 q 1081 594 1081 599 q 1071 586 1081 590 q 1036 507 1046 576 l 1006 296 l 1038 263 q 1043 253 1043 257 q 1031 247 1043 249 l 721 221 l 721 86 q 950 129 917 104 l 1011 83 q 1018 74 1018 78 q 1008 69 1018 71 l 721 43 l 721 -103 q 1135 -53 1078 -82 l 1197 -103 q 1207 -113 1207 -110 q 1194 -118 1207 -117 q 253 -186 386 -161 l 185 -133 l 669 -106 l 669 38 q 414 3 443 19 l 342 53 l 669 82 l 669 217 l 433 197 q 432 156 435 185 q 424 126 429 126 q 413 136 419 126 l 364 206 q 382 281 382 229 q 381 310 382 292 l 369 458 q 344 613 361 551 l 363 619 l 403 551 l 669 576 l 669 682 q 211 629 290 649 l 139 681 l 669 725 l 669 865 q 294 803 478 824 l 292 824 q 706 924 544 874 q 893 1004 868 974 l 910 1011 l 978 960 q 988 949 988 951 q 975 943 988 946 q 721 878 924 936 l 721 731 q 1175 796 1119 763 l 1235 751 q 1244 741 1244 744 q 1235 736 1244 738 m 992 565 l 721 539 l 721 433 q 860 463 819 444 l 900 425 q 908 414 908 418 q 893 408 908 410 l 721 392 l 721 267 l 957 292 l 992 565 m 669 263 l 669 386 q 526 365 572 378 l 471 411 l 669 429 l 669 535 l 414 510 l 432 238 l 669 263 z "},"州":{"ha":1389,"x_min":96,"x_max":1128,"o":"m 1025 1064 l 1117 990 q 1128 976 1128 982 q 1122 961 1128 971 q 1106 776 1106 932 l 1106 42 q 1103 -185 1106 -143 q 1092 -226 1100 -226 q 1082 -217 1088 -226 l 1026 -119 q 1049 -50 1044 -86 q 1053 94 1053 -14 l 1053 783 q 1011 1054 1053 950 l 1025 1064 m 390 1006 l 478 928 q 486 914 486 919 q 482 900 486 908 q 467 794 467 874 q 442 322 467 493 q 341 26 417 151 q 108 -214 265 -99 l 96 -199 q 298 34 231 -89 q 389 320 365 157 q 413 751 413 483 q 404 892 413 842 q 376 996 396 943 l 390 1006 m 689 925 l 772 850 q 779 839 779 844 q 772 819 779 833 q 760 774 764 804 q 757 682 757 744 l 757 167 q 751 -20 757 14 q 740 -54 746 -54 q 728 -42 733 -54 l 681 64 q 700 117 694 88 q 706 231 706 147 l 706 703 q 675 914 706 854 l 689 925 m 296 696 q 299 597 299 644 q 265 353 299 440 q 219 267 232 267 q 213 279 215 267 l 189 375 q 271 696 268 472 l 296 696 m 985 511 q 973 418 982 450 q 959 386 964 386 q 947 400 954 386 q 814 644 876 550 l 826 657 l 985 511 m 654 500 q 638 424 649 453 q 622 396 626 396 q 611 408 617 396 q 504 618 553 544 l 517 629 l 654 500 z "},"讷":{"ha":1389,"x_min":63,"x_max":1232,"o":"m 1161 771 l 1222 717 q 1232 703 1232 708 q 1217 683 1232 699 q 1193 637 1201 668 q 1185 539 1185 606 q 1153 -100 1178 28 q 1106 -228 1128 -228 q 1088 -212 1097 -228 q 922 8 1042 -143 l 935 25 l 1086 -99 q 1120 167 1107 -44 q 1133 663 1133 378 l 892 631 q 868 489 885 561 l 1057 342 q 1054 268 1060 313 q 1043 224 1049 224 q 1032 233 1038 224 q 860 456 965 344 q 669 114 815 278 l 653 135 q 781 360 740 251 q 836 622 822 469 l 644 597 l 651 46 q 650 -151 653 -101 q 636 -201 647 -201 q 628 -193 632 -201 l 574 -100 q 600 61 601 -56 l 594 561 q 587 650 594 590 q 569 746 579 710 l 592 756 l 640 644 l 840 671 q 849 863 849 779 q 825 1056 849 1001 l 839 1065 l 935 986 q 942 975 942 981 q 935 958 942 969 q 910 849 914 925 q 897 679 906 774 l 1118 708 l 1161 771 m 424 861 q 413 757 426 757 q 406 761 410 757 l 224 974 l 236 992 l 424 861 m 551 229 q 413 45 472 129 q 342 -60 354 -39 q 326 -84 331 -81 q 315 -85 322 -87 l 247 -53 q 300 76 299 11 l 308 517 q 117 475 175 493 l 63 519 l 294 564 l 335 618 l 399 563 q 401 556 401 560 q 388 543 401 553 q 365 519 374 533 q 356 475 356 506 l 349 53 l 536 243 l 551 229 z "},"圳":{"ha":1389,"x_min":88,"x_max":1179,"o":"m 614 611 q 619 603 619 607 q 613 599 619 600 l 426 575 l 426 250 l 597 321 l 606 301 q 182 67 203 97 l 88 110 l 376 229 l 376 568 q 194 531 246 551 l 136 576 l 376 608 l 376 800 q 370 950 376 910 q 340 1044 364 990 l 353 1056 l 447 981 q 453 972 453 976 q 450 963 453 967 q 431 906 435 939 q 426 799 426 872 l 426 615 q 565 657 522 633 l 614 611 m 1086 1029 l 1174 961 q 1179 953 1179 957 q 1176 946 1179 949 q 1153 807 1153 915 l 1153 -49 q 1136 -221 1153 -221 q 1129 -215 1132 -221 l 1074 -118 q 1096 -65 1090 -97 q 1101 57 1101 -32 l 1101 801 q 1097 939 1101 903 q 1074 1017 1093 975 l 1086 1029 m 686 988 l 765 921 q 771 911 771 915 q 768 901 771 907 q 755 845 758 888 q 751 615 751 803 q 726 276 750 426 q 635 10 701 125 q 431 -229 568 -106 l 415 -214 q 624 82 550 -81 q 699 629 699 244 q 694 856 699 785 q 672 978 689 926 l 686 988 m 885 883 l 963 814 q 968 808 968 811 q 965 800 968 804 q 942 672 942 767 l 942 169 q 931 26 942 26 q 924 32 928 26 l 869 103 q 888 156 883 129 q 892 242 892 183 l 892 667 q 871 874 892 826 l 885 883 z "},"渥":{"ha":1389,"x_min":133,"x_max":1282,"o":"m 1219 -31 l 1275 -79 q 1282 -87 1282 -85 q 1275 -90 1282 -89 l 888 -126 q 647 -152 708 -144 q 567 -168 585 -160 l 504 -118 l 881 -85 l 881 94 q 699 60 733 76 l 639 110 l 881 136 q 863 286 881 226 q 749 256 764 265 q 730 247 733 247 q 721 253 726 247 l 669 300 q 749 344 725 317 q 804 422 774 372 q 843 518 835 471 q 678 485 717 500 l 642 514 q 299 -187 588 90 l 283 -172 q 483 121 399 -61 q 589 500 567 303 q 611 823 611 697 q 596 1029 611 949 l 615 1032 l 664 906 l 1049 954 l 1083 1006 l 1146 954 q 1151 947 1151 950 q 1147 940 1151 944 q 1106 876 1113 911 l 1086 775 l 1121 733 q 1126 725 1126 728 q 1121 722 1126 722 l 657 664 l 646 536 q 1121 619 1050 578 l 1179 569 q 1183 564 1183 565 q 1178 561 1183 563 l 879 522 l 903 471 q 904 463 904 467 q 899 456 904 458 q 781 315 869 438 l 1040 356 l 967 444 l 976 457 l 1151 336 q 1156 296 1156 314 q 1152 261 1156 278 q 1144 244 1149 244 q 1135 251 1140 244 l 1065 331 l 897 293 l 944 253 q 946 242 949 249 q 929 142 931 213 q 1100 185 1056 158 l 1154 136 q 1160 129 1160 132 q 1156 126 1160 126 l 929 100 l 929 -81 q 1219 -31 1138 -60 m 1056 911 l 668 863 q 660 707 665 778 l 1035 758 l 1056 911 m 431 863 q 440 794 440 826 q 432 761 440 761 q 425 767 431 761 l 244 943 l 254 960 l 431 863 m 338 558 q 346 493 346 517 q 336 453 346 453 q 326 458 332 453 l 146 631 l 156 646 l 338 558 m 504 593 l 283 -85 q 278 -92 281 -92 q 269 -86 275 -92 q 133 61 219 -25 l 142 75 l 249 13 l 479 603 l 504 593 z "},"矶":{"ha":1389,"x_min":101,"x_max":1315,"o":"m 1261 217 q 1298 0 1281 78 q 1315 -82 1315 -78 q 1310 -89 1315 -86 q 1267 -94 1306 -92 q 1190 -97 1228 -97 q 999 -54 1033 -97 q 968 82 965 -11 l 989 857 l 801 831 q 783 535 797 699 q 756 305 769 372 q 716 174 743 238 q 643 47 689 110 q 529 -79 597 -15 q 364 -214 461 -143 l 349 -197 q 613 76 518 -61 q 724 438 707 213 q 742 787 742 663 q 731 993 742 911 l 756 1000 l 796 876 l 978 901 l 1025 969 l 1089 908 q 1097 896 1097 900 q 1085 883 1097 892 q 1043 793 1044 858 l 1022 92 q 1043 -17 1022 10 q 1131 -44 1064 -44 q 1235 -36 1199 -44 l 1240 217 l 1261 217 m 674 825 q 682 815 682 819 q 672 810 682 811 l 436 781 l 454 736 q 457 724 457 729 q 447 710 457 718 q 425 683 438 703 q 385 613 413 664 q 344 540 358 561 l 365 524 l 525 556 l 560 608 l 611 567 q 619 556 619 560 q 608 542 619 551 q 590 519 597 533 q 582 479 583 506 l 571 285 l 604 251 q 611 241 611 244 q 600 236 611 238 l 382 210 q 381 116 385 151 q 372 81 378 81 q 361 90 365 81 l 313 189 q 332 306 335 222 l 328 464 q 322 503 325 493 q 117 246 221 339 l 101 261 q 292 532 213 388 q 388 775 371 676 q 203 739 257 756 l 140 786 q 618 867 560 835 l 674 825 m 532 515 l 372 489 l 381 250 l 525 274 l 532 515 z "}}'),JAe="STFangsong",e2e=1369,t2e=-437,n2e=-185,i2e=28,r2e={yMin:-437,xMin:-196,yMax:1369,xMax:1476},s2e=1e3,a2e={format:0,copyright:"Copyright (c) 1991-1998, Changzhou SinoType Technology Co., Ltd.  All rights reserved.",fontFamily:"STFangsong",fontSubfamily:"Regular",uniqueID:"STFangsong TTF",fullName:"STFangsong",version:"Version 1.02",postScriptName:"STFangsong",trademark:"STFangsong and SinoType are trademarks of Changzhou SinoType Technology Co., Ltd."},o2e="normal",l2e="normal",u2e={glyphs:ZAe,familyName:JAe,ascender:e2e,descender:t2e,underlinePosition:n2e,underlineThickness:i2e,boundingBox:r2e,resolution:s2e,original_font_information:a2e,cssFontWeight:o2e,cssFontStyle:l2e};function c2e(i){const t=new $Ae().parse(u2e);i.labelsData(KAe).labelTypeFace(t.data).labelLat(n=>n.latitude).labelLng(n=>n.longitude).labelText(n=>n.name).labelAltitude(.001).labelSize(.1).labelDotRadius(.1).labelColor(()=>"rgba(0,255,255,0.9)").labelResolution(4)}function h2e(i){return`
      <div class="globe-message-box-title">${i.title||"无标题"}</div>
      <div class="globe-message-box-content">${i.content||"无内容"}</div>
      <div class="globe-message-box-arrow"></div>
  `}function f2e(i,e,t){i.htmlElementsData(e).htmlElement(n=>{const r=document.createElement("div");return r.className="globe-message-box",r.innerHTML=h2e(n),r.style.width="100px",r.style.transition="opacity 250ms",r.style.pointerEvents="auto",r.style.cursor="pointer",r.onclick=s=>{s.stopPropagation(),t(n)},r}).htmlLat(n=>n.lat).htmlLng(n=>n.lon).htmlElementVisibilityModifier((n,r)=>{n.style.visibility=r?"visible":"hidden"})}const d2e="modulepreload",A2e=function(i,e){return new URL(i,e).href},CC={},dA=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=A2e(c,n),c in CC)return;CC[c]=!0;const p=c.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(!!n)for(let S=a.length-1;S>=0;S--){const R=a[S];if(R.href===c&&(!p||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${g}`))return;const q=document.createElement("link");if(q.rel=p?"stylesheet":d2e,p||(q.as="script"),q.crossOrigin="",q.href=c,u&&q.setAttribute("nonce",u),document.head.appendChild(q),p)return new Promise((S,R)=>{q.addEventListener("load",S),q.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},p2e=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>dA(async()=>{const{default:n}=await Promise.resolve().then(()=>wA);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class fb extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class m2e extends fb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class g2e extends fb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _2e extends fb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Sy;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Sy||(Sy={}));var v2e=function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(p){try{c(n.next(p))}catch(g){a(g)}}function u(p){try{c(n.throw(p))}catch(g){a(g)}}function c(p){p.done?s(p.value):r(p.value).then(o,u)}c((n=n.apply(i,e||[])).next())})};class y2e{constructor(e,{headers:t={},customFetch:n,region:r=Sy.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=p2e(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return v2e(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:a}=t;let o={},{region:u}=t;u||(u=this.region),u&&u!=="any"&&(o["x-region"]=u);let c;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const p=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:c}).catch(S=>{throw new m2e(S)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new g2e(p);if(!p.ok)throw new _2e(p);let y=((n=p.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),q;return y==="application/json"?q=yield p.json():y==="application/octet-stream"?q=yield p.blob():y==="text/event-stream"?q=p:y==="multipart/form-data"?q=yield p.formData():q=yield p.text(),{data:q,error:null}}catch(r){return{data:null,error:r}}})}}var _s={},Yf={},Kf={},Zf={},Jf={},ed={},x2e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},AA=x2e();const q2e=AA.fetch,eF=AA.fetch.bind(AA),tF=AA.Headers,b2e=AA.Request,S2e=AA.Response,wA=Object.freeze(Object.defineProperty({__proto__:null,Headers:tF,Request:b2e,Response:S2e,default:eF,fetch:q2e},Symbol.toStringTag,{value:"Module"})),T2e=Ek(wA);var k6={},NC;function nF(){if(NC)return k6;NC=1,Object.defineProperty(k6,"__esModule",{value:!0});class i extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return k6.default=i,k6}var PC;function iF(){if(PC)return ed;PC=1;var i=ed&&ed.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ed,"__esModule",{value:!0});const e=i(T2e),t=i(nF());class n{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=Object.assign({},this.headers),this.headers[s]=a,this}then(s,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let u=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var p,g,y;let q=null,S=null,R=null,M=c.status,E=c.statusText;if(c.ok){if(this.method!=="HEAD"){const F=await c.text();F===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=F:S=JSON.parse(F))}const P=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),O=(g=c.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");P&&O&&O.length>1&&(R=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(q={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,R=null,M=406,E="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const P=await c.text();try{q=JSON.parse(P),Array.isArray(q)&&c.status===404&&(S=[],q=null,M=200,E="OK")}catch{c.status===404&&P===""?(M=204,E="No Content"):q={message:P}}if(q&&this.isMaybeSingle&&(!((y=q==null?void 0:q.details)===null||y===void 0)&&y.includes("0 rows"))&&(q=null,M=200,E="OK"),q&&this.shouldThrowOnError)throw new t.default(q)}return{error:q,data:S,count:R,status:M,statusText:E}});return this.shouldThrowOnError||(u=u.catch(c=>{var p,g,y;return{error:{message:`${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(g=c==null?void 0:c.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=c==null?void 0:c.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),u.then(s,a)}returns(){return this}overrideTypes(){return this}}return ed.default=n,ed}var DC;function rF(){if(DC)return Jf;DC=1;var i=Jf&&Jf.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Jf,"__esModule",{value:!0});const e=i(iF());class t extends e.default{select(r){let s=!1;const a=(r??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:s=!0,nullsFirst:a,foreignTable:o,referencedTable:u=o}={}){const c=u?`${u}.order`:"order",p=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${p?`${p},`:""}${r}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${r}`),this}range(r,s,{foreignTable:a,referencedTable:o=a}={}){const u=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${r}`),this.url.searchParams.set(c,`${s-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:s=!1,settings:a=!1,buffers:o=!1,wal:u=!1,format:c="text"}={}){var p;const g=[r?"analyze":null,s?"verbose":null,a?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),y=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${y}"; options=${g};`,c==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Jf.default=t,Jf}var LC;function db(){if(LC)return Zf;LC=1;var i=Zf&&Zf.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Zf,"__esModule",{value:!0});const e=i(rF());class t extends e.default{eq(r,s){return this.url.searchParams.append(r,`eq.${s}`),this}neq(r,s){return this.url.searchParams.append(r,`neq.${s}`),this}gt(r,s){return this.url.searchParams.append(r,`gt.${s}`),this}gte(r,s){return this.url.searchParams.append(r,`gte.${s}`),this}lt(r,s){return this.url.searchParams.append(r,`lt.${s}`),this}lte(r,s){return this.url.searchParams.append(r,`lte.${s}`),this}like(r,s){return this.url.searchParams.append(r,`like.${s}`),this}likeAllOf(r,s){return this.url.searchParams.append(r,`like(all).{${s.join(",")}}`),this}likeAnyOf(r,s){return this.url.searchParams.append(r,`like(any).{${s.join(",")}}`),this}ilike(r,s){return this.url.searchParams.append(r,`ilike.${s}`),this}ilikeAllOf(r,s){return this.url.searchParams.append(r,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(r,s){return this.url.searchParams.append(r,`ilike(any).{${s.join(",")}}`),this}is(r,s){return this.url.searchParams.append(r,`is.${s}`),this}in(r,s){const a=Array.from(new Set(s)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}contains(r,s){return typeof s=="string"?this.url.searchParams.append(r,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(r,`cs.{${s.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(s)}`),this}containedBy(r,s){return typeof s=="string"?this.url.searchParams.append(r,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(r,`cd.{${s.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(s)}`),this}rangeGt(r,s){return this.url.searchParams.append(r,`sr.${s}`),this}rangeGte(r,s){return this.url.searchParams.append(r,`nxl.${s}`),this}rangeLt(r,s){return this.url.searchParams.append(r,`sl.${s}`),this}rangeLte(r,s){return this.url.searchParams.append(r,`nxr.${s}`),this}rangeAdjacent(r,s){return this.url.searchParams.append(r,`adj.${s}`),this}overlaps(r,s){return typeof s=="string"?this.url.searchParams.append(r,`ov.${s}`):this.url.searchParams.append(r,`ov.{${s.join(",")}}`),this}textSearch(r,s,{config:a,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const c=a===void 0?"":`(${a})`;return this.url.searchParams.append(r,`${u}fts${c}.${s}`),this}match(r){return Object.entries(r).forEach(([s,a])=>{this.url.searchParams.append(s,`eq.${a}`)}),this}not(r,s,a){return this.url.searchParams.append(r,`not.${s}.${a}`),this}or(r,{foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${r})`),this}filter(r,s,a){return this.url.searchParams.append(r,`${s}.${a}`),this}}return Zf.default=t,Zf}var UC;function sF(){if(UC)return Kf;UC=1;var i=Kf&&Kf.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Kf,"__esModule",{value:!0});const e=i(db());class t{constructor(r,{headers:s={},schema:a,fetch:o}){this.url=r,this.headers=s,this.schema=a,this.fetch=o}select(r,{head:s=!1,count:a}={}){const o=s?"HEAD":"GET";let u=!1;const c=(r??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",c),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:s,defaultToNull:a=!0}={}){const o="POST",u=[];if(this.headers.Prefer&&u.push(this.headers.Prefer),s&&u.push(`count=${s}`),a||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(r)){const c=r.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(c.length>0){const p=[...new Set(c)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:s,ignoreDuplicates:a=!1,count:o,defaultToNull:u=!0}={}){const c="POST",p=[`resolution=${a?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&p.push(this.headers.Prefer),o&&p.push(`count=${o}`),u||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(r)){const g=r.reduce((y,q)=>y.concat(Object.keys(q)),[]);if(g.length>0){const y=[...new Set(g)].map(q=>`"${q}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:s}={}){const a="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const s="DELETE",a=[];return r&&a.push(`count=${r}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Kf.default=t,Kf}var sp={},ap={},OC;function w2e(){return OC||(OC=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.version=void 0,ap.version="0.0.0-automated"),ap}var BC;function E2e(){if(BC)return sp;BC=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.DEFAULT_HEADERS=void 0;const i=w2e();return sp.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${i.version}`},sp}var IC;function M2e(){if(IC)return Yf;IC=1;var i=Yf&&Yf.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Yf,"__esModule",{value:!0});const e=i(sF()),t=i(db()),n=E2e();class r{constructor(a,{headers:o={},schema:u,fetch:c}={}){this.url=a,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),o),this.schemaName=u,this.fetch=c}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:u=!1,get:c=!1,count:p}={}){let g;const y=new URL(`${this.url}/rpc/${a}`);let q;u||c?(g=u?"HEAD":"GET",Object.entries(o).filter(([R,M])=>M!==void 0).map(([R,M])=>[R,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([R,M])=>{y.searchParams.append(R,M)})):(g="POST",q=o);const S=Object.assign({},this.headers);return p&&(S.Prefer=`count=${p}`),new t.default({method:g,url:y,headers:S,schema:this.schemaName,body:q,fetch:this.fetch,allowEmpty:!1})}}return Yf.default=r,Yf}var FC;function R2e(){if(FC)return _s;FC=1;var i=_s&&_s.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(_s,"__esModule",{value:!0}),_s.PostgrestError=_s.PostgrestBuilder=_s.PostgrestTransformBuilder=_s.PostgrestFilterBuilder=_s.PostgrestQueryBuilder=_s.PostgrestClient=void 0;const e=i(M2e());_s.PostgrestClient=e.default;const t=i(sF());_s.PostgrestQueryBuilder=t.default;const n=i(db());_s.PostgrestFilterBuilder=n.default;const r=i(rF());_s.PostgrestTransformBuilder=r.default;const s=i(iF());_s.PostgrestBuilder=s.default;const a=i(nF());return _s.PostgrestError=a.default,_s.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:s.default,PostgrestError:a.default},_s}var C2e=R2e();const N2e=Py(C2e),{PostgrestClient:P2e,PostgrestQueryBuilder:U3e,PostgrestFilterBuilder:O3e,PostgrestTransformBuilder:B3e,PostgrestBuilder:I3e,PostgrestError:F3e}=N2e,D2e="2.11.2",L2e={"X-Client-Info":`realtime-js/${D2e}`},U2e="1.0.0",aF=1e4,O2e=1e3;var Md;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Md||(Md={}));var co;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(co||(co={}));var Sl;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Sl||(Sl={}));var Ty;(function(i){i.websocket="websocket"})(Ty||(Ty={}));var Z0;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Z0||(Z0={}));class B2e{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+r));a=a+r;const u=n.decode(e.slice(a,a+s));a=a+s;const c=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:u,payload:c}}}class oF{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tr;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(tr||(tr={}));const kC=(i,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,a)=>(s[a]=I2e(a,i,e,r),s),{})},I2e=(i,e,t,n)=>{const r=e.find(o=>o.name===i),s=r==null?void 0:r.type,a=t[i];return s&&!n.includes(s)?lF(s,a):wy(a)},lF=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return G2e(e,t)}switch(i){case tr.bool:return F2e(e);case tr.float4:case tr.float8:case tr.int2:case tr.int4:case tr.int8:case tr.numeric:case tr.oid:return k2e(e);case tr.json:case tr.jsonb:return z2e(e);case tr.timestamp:return V2e(e);case tr.abstime:case tr.date:case tr.daterange:case tr.int4range:case tr.int8range:case tr.money:case tr.reltime:case tr.text:case tr.time:case tr.timestamptz:case tr.timetz:case tr.tsrange:case tr.tstzrange:return wy(e);default:return wy(e)}},wy=i=>i,F2e=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},k2e=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},z2e=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},G2e=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,n=i[t];if(i[0]==="{"&&n==="}"){let s;const a=i.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>lF(e,o))}return i},V2e=i=>typeof i=="string"?i.replace(" ","T"):i,uF=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class z_{constructor(e,t,n={},r=aF){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zC;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(zC||(zC={}));class Pp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pp.syncState(this.state,r,s,a),this.pendingDiffs.forEach(u=>{this.state=Pp.syncDiff(this.state,u,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Pp.syncDiff(this.state,r,s,a),o())}),this.onJoin((r,s,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:a})}),this.onLeave((r,s,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const s=this.cloneDeep(e),a=this.transformState(t),o={},u={};return this.map(s,(c,p)=>{a[c]||(u[c]=p)}),this.map(a,(c,p)=>{const g=s[c];if(g){const y=p.map(M=>M.presence_ref),q=g.map(M=>M.presence_ref),S=p.filter(M=>q.indexOf(M.presence_ref)<0),R=g.filter(M=>y.indexOf(M.presence_ref)<0);S.length>0&&(o[c]=S),R.length>0&&(u[c]=R)}else o[c]=p}),this.syncDiff(s,{joins:o,leaves:u},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,(o,u)=>{var c;const p=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(u),p.length>0){const g=e[o].map(q=>q.presence_ref),y=p.filter(q=>g.indexOf(q.presence_ref)<0);e[o].unshift(...y)}n(o,p,u)}),this.map(a,(o,u)=>{let c=e[o];if(!c)return;const p=u.map(g=>g.presence_ref);c=c.filter(g=>p.indexOf(g.presence_ref)<0),e[o]=c,r(o,c,u),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var GC;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(GC||(GC={}));var VC;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(VC||(VC={}));var fc;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(fc||(fc={}));class Ab{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=co.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new z_(this,Sl.join,this.params,this.timeout),this.rejoinTimer=new oF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=co.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=co.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=co.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=co.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sl.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new Pp(this),this.broadcastEndpointURL=uF(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a,private:o}}=this.params;this._onError(p=>e==null?void 0:e(fc.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(fc.CLOSED));const u={},c={broadcast:s,presence:a,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&r!==void 0?r:[],private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){e==null||e(fc.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,q=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,S=[];for(let R=0;R<q;R++){const M=y[R],{filter:{event:E,schema:U,table:P,filter:O}}=M,F=p&&p[R];if(F&&F.event===E&&F.schema===U&&F.table===P&&F.filter===O)S.push(Object.assign(Object.assign({},M),{id:F.id}));else{this.unsubscribe(),e==null||e(fc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(fc.SUBSCRIBED);return}}).receive("error",p=>{e==null||e(fc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,u;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=co.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sl.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new z_(this,Sl.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new z_(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const a=e.toLocaleLowerCase(),{close:o,error:u,leave:c,join:p}=Sl;if(n&&[o,u,c,p].indexOf(a)>=0&&n!==this._joinRef())return;let y=this._onMessage(a,t,n);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(q=>{var S,R,M;return((S=q.filter)===null||S===void 0?void 0:S.event)==="*"||((M=(R=q.filter)===null||R===void 0?void 0:R.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===a}).map(q=>q.callback(y,n)):(s=this.bindings[a])===null||s===void 0||s.filter(q=>{var S,R,M,E,U,P;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in q){const O=q.id,F=(S=q.filter)===null||S===void 0?void 0:S.event;return O&&((R=t.ids)===null||R===void 0?void 0:R.includes(O))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((M=t.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const O=(U=(E=q==null?void 0:q.filter)===null||E===void 0?void 0:E.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return O==="*"||O===((P=t==null?void 0:t.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return q.type.toLocaleLowerCase()===a}).map(q=>{if(typeof y=="object"&&"ids"in y){const S=y.data,{schema:R,table:M,commit_timestamp:E,type:U,errors:P}=S;y=Object.assign(Object.assign({},{schema:R,table:M,commit_timestamp:E,eventType:U,new:{},old:{},errors:P}),this._getPayloadRecords(S))}q.callback(y,n)})}_isClosed(){return this.state===co.closed}_isJoined(){return this.state===co.joined}_isJoining(){return this.state===co.joining}_isLeaving(){return this.state===co.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&Ab.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Sl.close,{},e)}_onError(e){this._on(Sl.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=co.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=kC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=kC(e.columns,e.old_record)),t}}const H2e=()=>{},j2e=typeof WebSocket<"u",W2e=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $2e{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=L2e,this.params={},this.timeout=aF,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=H2e,this.conn=null,this.sendBuffer=[],this.serializer=new B2e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>dA(async()=>{const{default:u}=await Promise.resolve().then(()=>wA);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${Ty.websocket}`,this.httpEndpoint=uF(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,a)=>a(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new oF(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(j2e){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new X2e(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),dA(async()=>{const{default:e}=await Promise.resolve().then(()=>E3e);return{default:e}},void 0,import.meta.url).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:U2e}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Md.connecting:return Z0.Connecting;case Md.open:return Z0.Open;case Md.closing:return Z0.Closing;default:return Z0.Closed}}isConnected(){return this.connectionState()===Z0.Open}channel(e,t={config:{}}){const n=new Ab(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:s}=e,a=()=>{this.encode(e,o=>{var u;(u=this.conn)===null||u===void 0||u.send(o)})};this.log("push",`${t} ${n} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t}),r.joinedOnce&&r._isJoined()&&r._push(Sl.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(O2e,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:r,payload:s,ref:a}=t;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${r} ${a&&"("+a+")"||""}`,s),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(r,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Sl.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([W2e],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class X2e{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Md.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class pb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ys(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Q2e extends pb{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ey extends pb{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Y2e=function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(p){try{c(n.next(p))}catch(g){a(g)}}function u(p){try{c(n.throw(p))}catch(g){a(g)}}function c(p){p.done?s(p.value):r(p.value).then(o,u)}c((n=n.apply(i,e||[])).next())})};const cF=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>dA(async()=>{const{default:n}=await Promise.resolve().then(()=>wA);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},K2e=()=>Y2e(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield dA(()=>Promise.resolve().then(()=>wA),void 0,import.meta.url)).Response:Response}),My=i=>{if(Array.isArray(i))return i.map(t=>My(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[r]=My(n)}),e};var Ch=function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(p){try{c(n.next(p))}catch(g){a(g)}}function u(p){try{c(n.throw(p))}catch(g){a(g)}}function c(p){p.done?s(p.value):r(p.value).then(o,u)}c((n=n.apply(i,e||[])).next())})};const G_=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Z2e=(i,e,t)=>Ch(void 0,void 0,void 0,function*(){const n=yield K2e();i instanceof n&&!(t!=null&&t.noResolveJson)?i.json().then(r=>{e(new Q2e(G_(r),i.status||500))}).catch(r=>{e(new Ey(G_(r),r))}):e(new Ey(G_(i),i))}),J2e=(i,e,t,n)=>{const r={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),t))};function i4(i,e,t,n,r,s){return Ch(this,void 0,void 0,function*(){return new Promise((a,o)=>{i(t,J2e(e,n,r,s)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>Z2e(u,o,n))})})}function p5(i,e,t,n){return Ch(this,void 0,void 0,function*(){return i4(i,"GET",e,t,n)})}function N1(i,e,t,n,r){return Ch(this,void 0,void 0,function*(){return i4(i,"POST",e,n,r,t)})}function epe(i,e,t,n,r){return Ch(this,void 0,void 0,function*(){return i4(i,"PUT",e,n,r,t)})}function tpe(i,e,t,n){return Ch(this,void 0,void 0,function*(){return i4(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function hF(i,e,t,n,r){return Ch(this,void 0,void 0,function*(){return i4(i,"DELETE",e,n,r,t)})}var wa=function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(p){try{c(n.next(p))}catch(g){a(g)}}function u(p){try{c(n.throw(p))}catch(g){a(g)}}function c(p){p.done?s(p.value):r(p.value).then(o,u)}c((n=n.apply(i,e||[])).next())})};const npe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},HC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ipe{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=cF(r)}uploadOrUpdate(e,t,n,r){return wa(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},HC),r);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",a.cacheControl),u&&s.append("metadata",this.encodeMetadata(u))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,u&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),r!=null&&r.headers&&(o=Object.assign(Object.assign({},o),r.headers));const c=this._removeEmptyFolders(t),p=this._getFinalPath(c),g=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:e,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),y=yield g.json();return g.ok?{data:{path:c,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(s){if(ys(s))return{data:null,error:s};throw s}})}upload(e,t,n){return wa(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return wa(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let u;const c=Object.assign({upsert:HC.upsert},r),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",c.cacheControl)):(u=n,p["cache-control"]=`max-age=${c.cacheControl}`,p["content-type"]=c.contentType);const g=yield this.fetch(o.toString(),{method:"PUT",body:u,headers:p}),y=yield g.json();return g.ok?{data:{path:s,fullPath:y.Key},error:null}:{data:null,error:y}}catch(u){if(ys(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,t){return wa(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const s=yield N1(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new pb("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(ys(n))return{data:null,error:n};throw n}})}update(e,t,n){return wa(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return wa(this,void 0,void 0,function*(){try{return{data:yield N1(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ys(r))return{data:null,error:r};throw r}})}copy(e,t,n){return wa(this,void 0,void 0,function*(){try{return{data:{path:(yield N1(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ys(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return wa(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield N1(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(r){if(ys(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return wa(this,void 0,void 0,function*(){try{const r=yield N1(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(r){if(ys(r))return{data:null,error:r};throw r}})}download(e,t){return wa(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield p5(this.fetch,`${this.url}/${r}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ys(o))return{data:null,error:o};throw o}})}info(e){return wa(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield p5(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:My(n),error:null}}catch(n){if(ys(n))return{data:null,error:n};throw n}})}exists(e){return wa(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield tpe(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ys(n)&&n instanceof Ey){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});u!==""&&r.push(u);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}remove(e){return wa(this,void 0,void 0,function*(){try{return{data:yield hF(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ys(t))return{data:null,error:t};throw t}})}list(e,t,n){return wa(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},npe),t),{prefix:e||""});return{data:yield N1(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ys(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const rpe="2.7.1",spe={"X-Client-Info":`storage-js/${rpe}`};var td=function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(p){try{c(n.next(p))}catch(g){a(g)}}function u(p){try{c(n.throw(p))}catch(g){a(g)}}function c(p){p.done?s(p.value):r(p.value).then(o,u)}c((n=n.apply(i,e||[])).next())})};class ape{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},spe),t),this.fetch=cF(n)}listBuckets(){return td(this,void 0,void 0,function*(){try{return{data:yield p5(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ys(e))return{data:null,error:e};throw e}})}getBucket(e){return td(this,void 0,void 0,function*(){try{return{data:yield p5(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ys(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return td(this,void 0,void 0,function*(){try{return{data:yield N1(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ys(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return td(this,void 0,void 0,function*(){try{return{data:yield epe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ys(n))return{data:null,error:n};throw n}})}emptyBucket(e){return td(this,void 0,void 0,function*(){try{return{data:yield N1(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ys(t))return{data:null,error:t};throw t}})}deleteBucket(e){return td(this,void 0,void 0,function*(){try{return{data:yield hF(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ys(t))return{data:null,error:t};throw t}})}}class ope extends ape{constructor(e,t={},n){super(e,t,n)}from(e){return new ipe(this.url,this.headers,e,this.fetch)}}const lpe="2.49.4";let mp="";typeof Deno<"u"?mp="deno":typeof document<"u"?mp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mp="react-native":mp="node";const upe={"X-Client-Info":`supabase-js-${mp}/${lpe}`},cpe={headers:upe},hpe={schema:"public"},fpe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dpe={};var Ape=function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(p){try{c(n.next(p))}catch(g){a(g)}}function u(p){try{c(n.throw(p))}catch(g){a(g)}}function c(p){p.done?s(p.value):r(p.value).then(o,u)}c((n=n.apply(i,e||[])).next())})};const ppe=i=>{let e;return i?e=i:typeof fetch>"u"?e=eF:e=fetch,(...t)=>e(...t)},mpe=()=>typeof Headers>"u"?tF:Headers,gpe=(i,e,t)=>{const n=ppe(t),r=mpe();return(s,a)=>Ape(void 0,void 0,void 0,function*(){var o;const u=(o=yield e())!==null&&o!==void 0?o:i;let c=new r(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",i),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),n(s,Object.assign(Object.assign({},a),{headers:c}))})};var _pe=function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(p){try{c(n.next(p))}catch(g){a(g)}}function u(p){try{c(n.throw(p))}catch(g){a(g)}}function c(p){p.done?s(p.value):r(p.value).then(o,u)}c((n=n.apply(i,e||[])).next())})};function vpe(i){return i.replace(/\/$/,"")}function ype(i,e){const{db:t,auth:n,realtime:r,global:s}=i,{db:a,auth:o,realtime:u,global:c}=e,p={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},u),r),global:Object.assign(Object.assign({},c),s),accessToken:()=>_pe(this,void 0,void 0,function*(){return""})};return i.accessToken?p.accessToken=i.accessToken:delete p.accessToken,p}const fF="2.69.1",ad=30*1e3,Ry=3,V_=Ry*ad,xpe="http://localhost:9999",qpe="supabase.auth.token",bpe={"X-Client-Info":`gotrue-js/${fF}`},Cy="X-Supabase-Api-Version",dF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Spe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Tpe=6e5;class mb extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function $n(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class wpe extends mb{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Epe(i){return $n(i)&&i.name==="AuthApiError"}class AF extends mb{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class s0 extends mb{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class E1 extends s0{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Mpe(i){return $n(i)&&i.name==="AuthSessionMissingError"}class H_ extends s0{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class z6 extends s0{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class G6 extends s0{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Rpe(i){return $n(i)&&i.name==="AuthImplicitGrantRedirectError"}class jC extends s0{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ny extends s0{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function j_(i){return $n(i)&&i.name==="AuthRetryableFetchError"}class WC extends s0{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Dp extends s0{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),XC=` 	
\r=`.split(""),Cpe=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<XC.length;e+=1)i[XC[e].charCodeAt(0)]=-2;for(let e=0;e<$C.length;e+=1)i[$C[e].charCodeAt(0)]=e;return i})();function pF(i,e,t){const n=Cpe[i];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function QC(i){const e=[],t=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=a=>{Dpe(a,n,t)};for(let a=0;a<i.length;a+=1)pF(i.charCodeAt(a),r,s);return e.join("")}function Npe(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Ppe(i,e){for(let t=0;t<i.length;t+=1){let n=i.charCodeAt(t);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(i.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}Npe(n,e)}}function Dpe(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let n=1;n<6;n+=1)if((i>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Lpe(i){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<i.length;r+=1)pF(i.charCodeAt(r),t,n);return new Uint8Array(e)}function Upe(i){const e=[];return Ppe(i,t=>e.push(t)),new Uint8Array(e)}function Ope(i){return Math.round(Date.now()/1e3)+i}function Bpe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const eu=()=>typeof window<"u"&&typeof document<"u",F0={tested:!1,writable:!1},Lp=()=>{if(!eu())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(F0.tested)return F0.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),F0.tested=!0,F0.writable=!0}catch{F0.tested=!0,F0.writable=!1}return F0.writable};function Ipe(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const mF=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>dA(async()=>{const{default:n}=await Promise.resolve().then(()=>wA);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Fpe=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",gF=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},V6=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},H6=async(i,e)=>{await i.removeItem(e)};class d9{constructor(){this.promise=new d9.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}d9.promiseConstructor=Promise;function W_(i){const e=i.split(".");if(e.length!==3)throw new Dp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Spe.test(e[n]))throw new Dp("JWT not in base64url format");return{header:JSON.parse(QC(e[0])),payload:JSON.parse(QC(e[1])),signature:Lpe(e[2]),raw:{header:e[0],payload:e[1]}}}async function kpe(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function zpe(i,e){return new Promise((n,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await i(s);if(!e(s,null,a)){n(a);return}}catch(a){if(!e(s,a)){r(a);return}}})()})}function Gpe(i){return("0"+i.toString(16)).substr(-2)}function Vpe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let s=0;s<56;s++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,Gpe).join("")}async function Hpe(i){const t=new TextEncoder().encode(i),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function jpe(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await Hpe(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nd(i,e,t=!1){const n=Vpe();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await gF(i,`${e}-code-verifier`,r);const s=await jpe(n);return[s,n===s?"plain":"s256"]}const Wpe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $pe(i){const e=i.headers.get(Cy);if(!e||!e.match(Wpe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Xpe(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function Qpe(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Ype=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const j0=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Kpe=[502,503,504];async function YC(i){var e;if(!Fpe(i))throw new Ny(j0(i),0);if(Kpe.includes(i.status))throw new Ny(j0(i),i.status);let t;try{t=await i.json()}catch(s){throw new AF(j0(s),s)}let n;const r=$pe(i);if(r&&r.getTime()>=dF["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new WC(j0(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new E1}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new WC(j0(t),i.status,t.weak_password.reasons);throw new wpe(j0(t),i.status||500,n)}const Zpe=(i,e,t,n)=>{const r={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function li(i,e,t,n){var r;const s=Object.assign({},n==null?void 0:n.headers);s[Cy]||(s[Cy]=dF["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const a=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await Jpe(i,e,t+o,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function Jpe(i,e,t,n,r,s){const a=Zpe(e,n,r,s);let o;try{o=await i(t,Object.assign({},a))}catch(u){throw console.error(u),new Ny(j0(u),0)}if(o.ok||await YC(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(u){await YC(u)}}function M1(i){var e;let t=null;i3e(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=Ope(i.expires_in)));const n=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:n},error:null}}function KC(i){const e=M1(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=i.weak_password),e}function O1(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function e3e(i){return{data:i,error:null}}function t3e(i){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:s}=i,a=Ype(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:s},u=Object.assign({},a);return{data:{properties:o,user:u},error:null}}function n3e(i){return i}function i3e(i){return i.access_token&&i.refresh_token&&i.expires_in}var r3e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};class s3e{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=mF(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await li(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if($n(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await li(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:O1})}catch(n){if($n(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=r3e(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await li(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:t3e,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if($n(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await li(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:O1})}catch(t){if($n(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,s,a,o,u;try{const c={nextPage:null,lastPage:0,total:0},p=await li(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:n3e});if(p.error)throw p.error;const g=await p.json(),y=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,q=(u=(o=p.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return q.length>0&&(q.forEach(S=>{const R=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(S.split(";")[1].split("=")[1]);c[`${M}Page`]=R}),c.total=parseInt(y)),{data:Object.assign(Object.assign({},g),c),error:null}}catch(c){if($n(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await li(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:O1})}catch(t){if($n(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await li(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:O1})}catch(n){if($n(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await li(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:O1})}catch(n){if($n(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await li(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if($n(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await li(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if($n(t))return{data:null,error:t};throw t}}}const a3e={getItem:i=>Lp()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{Lp()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{Lp()&&globalThis.localStorage.removeItem(i)}};function ZC(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}function o3e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const id={debug:!!(globalThis&&Lp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _F extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class l3e extends _F{}async function u3e(i,e,t){id.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),id.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){id.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,r.name);try{return await t()}finally{id.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,r.name)}}else{if(e===0)throw id.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new l3e(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(id.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}o3e();const c3e={url:xpe,storageKey:qpe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bpe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function JC(i,e,t){return await t()}class E3{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=E3.nextInstanceID,E3.nextInstanceID+=1,this.instanceID>0&&eu()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},c3e),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new s3e({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=mF(r.fetch),this.lock=r.lock||JC,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:eu()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=u3e:this.lock=JC,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Lp()?this.storage=a3e:(this.memoryStorage={},this.storage=ZC(this.memoryStorage)):(this.memoryStorage={},this.storage=ZC(this.memoryStorage)),eu()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fF}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Ipe(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),eu()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Rpe(s)){const u=(e=s.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return $n(t)?{error:t}:{error:new AF("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const s=await li(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:M1}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if($n(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,r;try{let s;if("email"in e){const{email:p,password:g,options:y}=e;let q=null,S=null;this.flowType==="pkce"&&([q,S]=await nd(this.storage,this.storageKey)),s=await li(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:g,data:(t=y==null?void 0:y.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:q,code_challenge_method:S},xform:M1})}else if("phone"in e){const{phone:p,password:g,options:y}=e;s=await li(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(r=y==null?void 0:y.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:M1})}else throw new z6("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if($n(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:a,options:o}=e;t=await li(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:KC})}else if("phone"in e){const{phone:s,password:a,options:o}=e;t=await li(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:KC})}else throw new z6("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new H_}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if($n(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await V6(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:s,error:a}=await li(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:M1});if(await H6(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new H_}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:a})}catch(s){if($n(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:s,nonce:a}=e,o=await li(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:M1}),{data:u,error:c}=o;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new H_}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(t){if($n(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,s,a;try{if("email"in e){const{email:o,options:u}=e;let c=null,p=null;this.flowType==="pkce"&&([c,p]=await nd(this.storage,this.storageKey));const{error:g}=await li(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=u==null?void 0:u.data)!==null&&t!==void 0?t:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:p},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:o,options:u}=e,{data:c,error:p}=await li(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:p}}throw new z6("You must provide either an email or phone number.")}catch(o){if($n(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{let r,s;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await li(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:M1});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,c=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(r){if($n(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await nd(this.storage,this.storageKey)),await li(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:e3e})}catch(s){if($n(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new E1;const{error:r}=await li(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if($n(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:s}=e,{error:a}=await li(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:r,options:s}=e,{data:a,error:o}=await li(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new z6("You must provide either an email or phone number and a type")}catch(t){if($n(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await V6(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<V_:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,c,p)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,p))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await li(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:O1}):await this._useSession(async t=>{var n,r,s;const{data:a,error:o}=t;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new E1}:await li(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:O1})})}catch(t){if($n(t))return Mpe(t)&&(await this._removeSession(),await H6(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new E1;const a=r.session;let o=null,u=null;this.flowType==="pkce"&&e.email!=null&&([o,u]=await nd(this.storage,this.storageKey));const{data:c,error:p}=await li(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:u}),jwt:a.access_token,xform:O1});if(p)throw p;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if($n(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new E1;const t=Date.now()/1e3;let n=t,r=!0,s=null;const{payload:a}=W_(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{session:o,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:u}=await this._getUser(e.access_token);if(u)throw u;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if($n(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new E1;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if($n(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!eu())throw new G6("No browser detected.");if(e.error||e.error_description||e.error_code)throw new G6(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new jC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new G6("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jC("No code detected.");const{data:U,error:P}=await this._exchangeCodeForSession(e.code);if(P)throw P;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:o,expires_at:u,token_type:c}=e;if(!s||!o||!a||!c)throw new G6("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(o);let y=p+g;u&&(y=parseInt(u));const q=y-p;q*1e3<=ad&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${q}s, should have been closer to ${g}s`);const S=y-g;p-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,y,p):p-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,y,p);const{data:R,error:M}=await this._getUser(s);if(M)throw M;const E={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:g,expires_at:y,refresh_token:a,token_type:c,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(n){if($n(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await V6(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{error:s};const a=(n=r.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Epe(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await H6(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Bpe(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:s},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await nd(this.storage,this.storageKey,!0));try{return await li(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if($n(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if($n(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async s=>{var a,o,u,c,p;const{data:g,error:y}=s;if(y)throw y;const q=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await li(this.fetch,"GET",q,{headers:this.headers,jwt:(p=(c=g.session)===null||c===void 0?void 0:c.access_token)!==null&&p!==void 0?p:void 0})});if(r)throw r;return eu()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if($n(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:a}=t;if(a)throw a;return await li(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if($n(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await zpe(async r=>(r>0&&await kpe(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await li(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:M1})),(r,s)=>{const a=200*Math.pow(2,r);return s&&j_(s)&&Date.now()+a-n<ad})}catch(n){if(this._debug(t,"error",n),$n(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),eu()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await V6(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<V_;if(this._debug(t,`session has${r?"":" not"} expired with margin of ${V_}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:s}=await this._callRefreshToken(n.refresh_token);s&&(console.error(s),j_(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new E1;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new d9;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new E1;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(r,"error",s),$n(s)){const a={session:null,error:s};return j_(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(u){s.push(u)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await gF(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await H6(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&eu()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ad);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/ad);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${ad}ms, refresh threshold is ${Ry} ticks`),r<=Ry&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof _F)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!eu()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,a]=await nd(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);r.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await li(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if($n(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:c}=await li(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((r=u==null?void 0:u.totp)===null||r===void 0)&&r.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(t){if($n(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:o}=await li(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if($n(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await li(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if($n(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=W_(r.access_token);let o=null;a.aal&&(o=a.aal);let u=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const p=a.amr||[];return{data:{currentLevel:o,nextLevel:u,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(a=>a.kid===e);if(n||(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+Tpe>Date.now()))return n;const{data:r,error:s}=await li(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!r.keys||r.keys.length===0)throw new Dp("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(a=>a.kid===e),!n)throw new Dp("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:q,error:S}=await this.getSession();if(S||!q.session)return{data:null,error:S};n=q.session.access_token}const{header:r,payload:s,signature:a,raw:{header:o,payload:u}}=W_(n);if(Xpe(s.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:q}=await this.getUser(n);if(q)throw q;return{data:{claims:s,header:r,signature:a},error:null}}const c=Qpe(r.alg),p=await this.fetchJwk(r.kid,t),g=await crypto.subtle.importKey("jwk",p,c,!0,["verify"]);if(!await crypto.subtle.verify(c,g,a,Upe(`${o}.${u}`)))throw new Dp("Invalid JWT signature");return{data:{claims:s,header:r,signature:a},error:null}}catch(n){if($n(n))return{data:null,error:n};throw n}}}E3.nextInstanceID=0;const h3e=E3;class f3e extends h3e{constructor(e){super(e)}}var d3e=function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(p){try{c(n.next(p))}catch(g){a(g)}}function u(p){try{c(n.throw(p))}catch(g){a(g)}}function c(p){p.done?s(p.value):r(p.value).then(o,u)}c((n=n.apply(i,e||[])).next())})};class A3e{constructor(e,t,n){var r,s,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=vpe(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const u=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:hpe,realtime:dpe,auth:Object.assign(Object.assign({},fpe),{storageKey:u}),global:cpe},p=ype(n??{},c);this.storageKey=(r=p.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=gpe(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new P2e(`${o}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new y2e(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ope(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return d3e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:s,flowType:a,lock:o,debug:u},c,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f3e({url:this.authUrl,headers:Object.assign(Object.assign({},g),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:a,lock:o,debug:u,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $2e(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const p3e=(i,e,t)=>new A3e(i,e,t),m3e="https://ubiiazlklbqyszdazdzf.supabase.co",g3e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InViaWlhemxrbGJxeXN6ZGF6ZHpmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ3MTY0NTIsImV4cCI6MjA2MDI5MjQ1Mn0.KvfmAtQMSJSG00BDtPTKa5U3yR6AidmLYRRhevlLUVI",_3e=p3e(m3e,g3e);async function v3e(){const i=new Date,t=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate())).toISOString(),{data:n,error:r}=await _3e.from("today-news").select("*").gte("time",t);if(r)return console.error("加载新闻失败:",r.message),[];const s=new Map;return n.forEach(a=>{s.has(a.content)||s.set(a.content,a)}),Array.from(s.values())}function y3e(i,e){Rd.useEffect(()=>{if(!i.current)return;const t=HAe(i.current);c2e(t);const n=async()=>{const s=await v3e();f2e(t,s,e)};n();const r=setInterval(n,5*60*1e3);return()=>{clearInterval(r)}},[i,e])}function x3e({news:i,onClose:e}){const t=Rd.useRef(null);return Rd.useEffect(()=>{function n(r){t.current&&!t.current.contains(r.target)&&e()}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[e]),I1.jsxs("div",{className:"message-detail",ref:t,children:[I1.jsx("h3",{children:i.title}),I1.jsx("p",{children:i.content})]})}function q3e(){const i=Rd.useRef(null),[e,t]=Rd.useState(null);return y3e(i,t),I1.jsx("div",{ref:i,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"black",overflow:"hidden"},children:e&&I1.jsx(x3e,{news:e,onClose:()=>t(null)})})}function b3e(){return I1.jsx(q3e,{})}Bk.createRoot(document.getElementById("root")).render(I1.jsx(Rd.StrictMode,{children:I1.jsx(b3e,{})}));var $_,eN;function S3e(){return eN||(eN=1,$_=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),$_}var T3e=S3e();const w3e=Py(T3e),E3e=Object.freeze(Object.defineProperty({__proto__:null,default:w3e},Symbol.toStringTag,{value:"Module"}));</script>
    <style rel="stylesheet" crossorigin>:root{font-family:system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:#ffffffde;background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex;place-items:center;min-width:320px;min-height:100vh}h1{font-size:3.2em;line-height:1.1}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#1a1a1a;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}@media (prefers-color-scheme: light){:root{color:#213547;background-color:#fff}a:hover{color:#747bff}button{background-color:#f9f9f9}}.globe-message-box{position:relative;background:#fff6;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1.5px solid rgba(255,255,255,.9);border-radius:16px;box-shadow:0 2px 8px #00000026;padding:12px;max-width:240px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;word-wrap:break-word;overflow-wrap:break-word;transform-origin:center center;user-select:none;-webkit-user-select:none;outline:none;-webkit-tap-highlight-color:transparent}.globe-message-box-title{font-weight:600;font-size:12px;color:#222;margin-bottom:6px;line-height:1.4}.globe-message-box-content{font-size:9px;color:#444;line-height:1.6}.globe-message-box-arrow{position:absolute;bottom:-10px;left:calc(50% - 10px);width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid rgba(255,255,255,.6);box-shadow:0 2px 4px #0000001a}.message-detail{position:fixed;top:5%;left:50%;transform:translate(-50%);background:#fff6;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1.5px solid rgba(255,255,255,.9);border-radius:16px;box-shadow:0 2px 8px #00000026;padding:16px;max-width:80vw;width:80vw;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;word-wrap:break-word;overflow-wrap:break-word;color:#222;-webkit-user-select:text;user-select:text;z-index:10000}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
